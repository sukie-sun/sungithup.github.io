<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,ä¸ªäººåšå®¢,blog">
  <meta name="description" content="Sukieçš„ä¸ªäººåšå®¢">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  
  <link rel="dns-prefetch" href="https://widget.daovoice.io">
  <link rel="dns-prefetch" href="https://widget-static-cdn.daovoice.io">
  <link rel="dns-prefetch" href="https://im.daovoice.io">
  
  
  <link rel="dns-prefetch" href="https://hm.baidu.com/">
  
  
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://api.github.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  
  <link rel="stylesheet" type="text/css" href="/./style/main.d9e3dd.css">
	<link rel="shortcut icon" href="/favicon.ico" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>HBaseå­¦ä¹ </title>
  
  <script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?bc39ced90d9f89c71fda7b7d4ca8b638";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();
  </script>
  
  
    <script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/949e21d7.js","daovoice");daovoice('init',{app_id: "949e21d7"});daovoice('update');
  </script>
  
</head>
<body>
<canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/">Sukieå±±è„‰</a>
  <a class="face-img" href="/">
    <img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1545985146898&amp;di=2861af758f070858999b0a2a0e708388&amp;imgtype=0&amp;src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201610%2F11%2F20161011203442_eHhSV.jpeg">
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    HBaseå­¦ä¹ 
  </h1>
  


    <ul class="article-info">
      <li>
        å‘å¸ƒ
        <time datetime="2019-01-14T16:00:00.000Z" itemprop="datePublished">2019-01-15</time>
      </li>
      <li>
        
    æ›´æ–° <time datetime="2019-01-28T07:39:50.923Z" itemprop="dateUpdated">2019-01-28</time>

      </li>
      <li id="busuanzi_container_page_pv">
        é˜…è¯» <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <p>[TOC]</p>
<h1 id="Hbaseå­¦ä¹ "><a href="#Hbaseå­¦ä¹ " class="headerlink" title="Hbaseå­¦ä¹ "></a>Hbaseå­¦ä¹ </h1><p>éå…³ç³»å‹æ•°æ®åº“</p>
<p><a href="https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration" target="_blank" rel="noopener">å®˜ç½‘</a></p>
<h2 id="ä¸€ã€å¯¹æ•°æ®åº“çš„-åŸºæœ¬äº†è§£"><a href="#ä¸€ã€å¯¹æ•°æ®åº“çš„-åŸºæœ¬äº†è§£" class="headerlink" title="ä¸€ã€å¯¹æ•°æ®åº“çš„ åŸºæœ¬äº†è§£"></a>ä¸€ã€å¯¹æ•°æ®åº“çš„ åŸºæœ¬äº†è§£</h2><h3 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h3><blockquote>
<p>åŸºäºHadoop çš„åˆ†å¸ƒå¼æ•°æ®åº“</p>
<p>ç‰¹ç‚¹ï¼š</p>
<p>1ã€é«˜å¯é æ€§</p>
<p>2ã€é«˜æ€§èƒ½</p>
<p>ï¼ˆä»¥ä¸Šä¸¤ç‚¹ï¼šåŸºäºåˆ†å¸ƒå¼çš„ç‰¹ç‚¹ï¼‰</p>
<p>3ã€é¢å‘åˆ—</p>
<p>ï¼ˆä»¥ï¼ˆK,Vï¼‰å­˜å‚¨ï¼Œæœ‰å”¯ä¸€æ ‡è®°çš„rowkeyï¼ŒvalueåŒ…å«æ˜¯æ•°æ®åº“ä¸­çš„åˆ—å€¼ï¼‰</p>
<p>4ã€å¯ä¼¸ç¼©</p>
<p>ï¼ˆæ­å»ºåœ¨é›†ç¾¤ä¸Šï¼‰</p>
<p>5ã€å®æ—¶è¯»å†™</p>
<p>ï¼ˆç”¨æ—¶é—´æˆ³å”¯ä¸€æ ‡è®°æ¯ä¸€ç‰ˆæœ¬çš„æ•°æ®è®°å½•ï¼‰</p>
</blockquote>
<h3 id="2ã€å·¥ä½œç»“æ„"><a href="#2ã€å·¥ä½œç»“æ„" class="headerlink" title="2ã€å·¥ä½œç»“æ„"></a>2ã€å·¥ä½œç»“æ„</h3><blockquote>
<p>1ã€åˆ©ç”¨Hadoopçš„HDFSä½œä¸ºå…¶æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿ</p>
<p>2,åˆ©ç”¨Hadoopçš„MapReduceæ¥å¤„ç†HBaseä¸­çš„æµ·é‡æ•°æ®</p>
<p>3,åˆ©ç”¨Zookeeperä½œä¸ºå…¶åˆ†å¸ƒå¼ååŒæœåŠ¡</p>
<p>4,ä¸»è¦ç”¨æ¥å­˜å‚¨éç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–çš„æ¾æ•£æ•°æ®ï¼ˆNoSQLéå…³ç³»å‹æ•°æ®åº“æœ‰redisã€MongoDBç­‰</p>
</blockquote>
<h3 id="3ã€å…³ç³»å‹æ•°æ®åº“"><a href="#3ã€å…³ç³»å‹æ•°æ®åº“" class="headerlink" title="3ã€å…³ç³»å‹æ•°æ®åº“"></a>3ã€å…³ç³»å‹æ•°æ®åº“</h3><blockquote>
<p>1ã€å®šä¹‰</p>
<p>å…³ç³»æ¨¡å‹æŒ‡çš„å°±æ˜¯äºŒç»´è¡¨æ ¼æ¨¡å‹ï¼›</p>
<p>è€Œä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“å°±æ˜¯ç”±äºŒç»´è¡¨åŠå…¶ä¹‹é—´çš„è”ç³»æ‰€ç»„æˆçš„ä¸€ä¸ªæ•°æ®ç»„ç»‡</p>
<p>2ã€ä¸‰å¤§ä¼˜ç‚¹</p>
<ul>
<li>å®¹æ˜“ç†è§£</li>
<li>ä½¿ç”¨æ–¹ä¾¿</li>
<li>æ˜“äºç»´æŠ¤</li>
</ul>
<p>3ã€ä¸‰å¤§ç“¶é¢ˆ</p>
<ul>
<li>é«˜å¹¶å‘è¯»å†™éœ€æ±‚</li>
</ul>
<p>ç¡¬ç›˜I/Oæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç“¶é¢ˆï¼Œå¹¶ä¸”å¾ˆéš¾èƒ½åšåˆ°æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚</p>
<ul>
<li>æµ·é‡æ•°æ®çš„è¯»å†™æ€§èƒ½ä½</li>
</ul>
<p>åœ¨ä¸€å¼ åŒ…å«æµ·é‡æ•°æ®çš„è¡¨ä¸­æŸ¥è¯¢ï¼Œæ•ˆç‡æ˜¯éå¸¸ä½çš„ã€‚</p>
<ul>
<li>â€‹    æ‰©å±•æ€§å’Œå¯ç”¨æ€§å·®</li>
</ul>
<p>ä¸°å¯Œçš„å®Œæ•´æ€§ä½¿å¾—æ¨ªå‘æ‰©å±•æŠŠéš¾åº¦åŠ å¤§äº†</p>
</blockquote>
<h3 id="4ã€éå…³ç³»å‹æ•°æ®åº“"><a href="#4ã€éå…³ç³»å‹æ•°æ®åº“" class="headerlink" title="4ã€éå…³ç³»å‹æ•°æ®åº“"></a>4ã€éå…³ç³»å‹æ•°æ®åº“</h3><blockquote>
<p>1ã€å­˜å‚¨æ ¼å¼ï¼škey valueé”®å€¼å¯¹ï¼Œæ–‡æ¡£ï¼Œå›¾ç‰‡ç­‰ç­‰ ç»“æ„ä¸å›ºå®š<br>  2ã€å¯ä»¥å‡å°‘ä¸€äº›æ—¶é—´å’Œç©ºé—´çš„å¼€é”€ï¼Œä»…éœ€è¦æ ¹æ®idå–å‡ºç›¸åº”çš„valueå°±å¯ä»¥å®ŒæˆæŸ¥è¯¢ã€‚</p>
<p>3ã€ä¸€èˆ¬ä¸æ”¯æŒACIDç‰¹æ€§ï¼Œæ— éœ€ç»è¿‡SQLè§£æï¼Œè¯»å†™æ€§èƒ½é«˜</p>
<p> 4ã€ä¸æä¾›whereå­—æ®µæ¡ä»¶è¿‡æ»¤</p>
<p>5ã€éš¾ä»¥ä½“ç°è®¾è®¡çš„å®Œæ•´æ€§ï¼Œåªé€‚åˆå­˜å‚¨ä¸€äº›è¾ƒä¸ºç®€å•çš„æ•°æ®</p>
</blockquote>
<h2 id="äºŒã€å¯¹HBaseçš„åŸºæœ¬é‡Œäº†è§£"><a href="#äºŒã€å¯¹HBaseçš„åŸºæœ¬é‡Œäº†è§£" class="headerlink" title="äºŒã€å¯¹HBaseçš„åŸºæœ¬é‡Œäº†è§£"></a>äºŒã€å¯¹HBaseçš„åŸºæœ¬é‡Œäº†è§£</h2><h3 id="1ã€æ•°æ®ç»“æ„ç»„æˆ"><a href="#1ã€æ•°æ®ç»“æ„ç»„æˆ" class="headerlink" title="1ã€æ•°æ®ç»“æ„ç»„æˆ"></a>1ã€æ•°æ®ç»“æ„ç»„æˆ</h3><p>ï¼ˆ 1ï¼‰Row key  :</p>
<blockquote>
<p>å”¯ä¸€æ ‡è®°å†³å®šä¸€è¡Œæ•°æ®<br>æŒ‰ç…§å­—å…¸æ’åº<br>æœ€å¤§åªèƒ½å­˜å‚¨64KBçš„å­—èŠ‚æ•°æ®<br>è®¾è®¡éå¸¸å…³é”®</p>
</blockquote>
<p>ï¼ˆ2ï¼‰Column Familyåˆ—æ— &amp; qualifieråˆ—</p>
<blockquote>
<p><code>åˆ—æ—</code>å¿…é¡»ä½œä¸ºè¡¨æ¨¡å¼(schema)å®šä¹‰çš„ä¸€éƒ¨åˆ†é¢„å…ˆç»™å‡ºï¼Œ</p>
<p>è¡¨ä¸­çš„æ¯ä¸ªåˆ—éƒ½å½’å±äºæŸä¸ªåˆ—æ—ï¼›</p>
<p>æƒé™æ§åˆ¶ã€å­˜å‚¨ä»¥åŠè°ƒä¼˜éƒ½æ˜¯åœ¨åˆ—æ—å±‚é¢è¿›è¡Œçš„ï¼›</p>
<p><code>åˆ—å</code>ä»¥åˆ—æ—ä½œä¸ºå‰ç¼€ï¼Œæ¯ä¸ªâ€œåˆ—æ—â€éƒ½å¯ä»¥æœ‰å¤šä¸ªåˆ—æˆå‘˜(column)ï¼› </p>
<p>æ–°çš„åˆ—å¯ä»¥éšåæŒ‰éœ€ã€åŠ¨æ€åŠ å…¥ï¼›</p>
</blockquote>
<p>ï¼ˆ3ï¼‰Cellå•å…ƒæ ¼</p>
<blockquote>
<p> ç”±è¡Œå’Œåˆ—çš„åæ ‡äº¤å‰å†³å®šï¼› å•å…ƒæ ¼æ˜¯æœ‰ç‰ˆæœ¬çš„ï¼ˆæœ‰æ—¶é—´æˆ³å†³å®šï¼‰ï¼›</p>
<p> å•å…ƒæ ¼çš„å†…å®¹æ˜¯æœªè§£æçš„å­—èŠ‚æ•°ç»„ï¼›cellä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œå…¨éƒ¨æ˜¯å­—èŠ‚ç å½¢å¼å­˜è´®ã€‚</p>
<p>ç”±{rowkeyï¼Œ column( =<family> +<qualifier>)ï¼Œ version} å”¯ä¸€ç¡®å®šçš„å•å…ƒã€‚</qualifier></family></p>
</blockquote>
<p>ï¼ˆ4ï¼‰Timestampæ—¶é—´æˆ³</p>
<blockquote>
<p>åœ¨HBaseæ¯ä¸ªcellå­˜å‚¨å•å…ƒå¯¹åŒä¸€ä»½æ•°æ®æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œ</p>
<p>æ ¹æ®å”¯ä¸€çš„æ—¶é—´æˆ³æ¥åŒºåˆ†æ¯ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ï¼Œ</p>
<p>ä¸åŒç‰ˆæœ¬çš„æ•°æ®æŒ‰ç…§æ—¶é—´å€’åºæ’åºï¼Œæœ€æ–°çš„æ•°æ®ç‰ˆæœ¬æ’åœ¨æœ€å‰é¢</p>
<p>æ—¶é—´æˆ³çš„ç±»å‹æ˜¯64ä½æ•´å‹ã€‚<br>æ—¶é—´æˆ³å¯ä»¥ç”±HBase(åœ¨æ•°æ®å†™å…¥æ—¶è‡ªåŠ¨)èµ‹å€¼ï¼Œç²¾ç¡®åˆ°æ¯«ç§’</p>
<p>æ—¶é—´æˆ³ã€‚ä¹Ÿå¯ä»¥ç”±å®¢æˆ·æ˜¾å¼èµ‹å€¼ï¼Œä½†å¿…é¡»å”¯ä¸€æ€§</p>
</blockquote>
<p>ï¼ˆ5ï¼‰HLog(WAL log)</p>
<blockquote>
<ul>
<li><p>HLogæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„Hadoop SequenceFile</p>
</li>
<li><p>HLog Sequence Fileçš„Keyæ˜¯HLogKeyå¯¹è±¡<br> â€‹         **HLogKeyä¸­è®°å½•äº†å†™å…¥æ•°æ®çš„å½’å±ä¿¡æ¯ï¼ŒåŒ…æ‹¬tableå’Œregionåå­—ï¼Œsequence numberï¼ˆèµ·å§‹å€¼ä¸º0æˆ–æ˜¯æœ€è¿‘ä¸€æ¬¡å­˜å…¥æ–‡ä»¶ç³»ç»Ÿä¸­sequence  numberï¼‰å’Œtimestampï¼ˆå†™å…¥æ—¶é—´ï¼‰</p>
</li>
<li><p>HLog SequeceFileçš„Valueæ˜¯HBaseçš„KeyValueå¯¹è±¡ï¼Œå³å¯¹åº”HFileä¸­çš„KeyValue</p>
</li>
</ul>
<p>â€‹               **å­˜å‚¨hbaseè¡¨çš„æ“ä½œè®°å½•ï¼ŒKVæ•°æ®ä¿¡æ¯   </p>
</blockquote>
<p>2ã€ä½“ç³»æ¶æ„</p>
<p>ï¼ˆ1ï¼‰Client</p>
<blockquote>
<p>åŒ…å«è®¿é—®HBaseçš„æ¥å£å¹¶ç»´æŠ¤cacheæ¥åŠ å¿«å¯¹HBaseçš„è®¿é—®</p>
</blockquote>
<p>ï¼ˆ2ï¼‰Zookeeper</p>
<blockquote>
<ul>
<li><p>ä¿è¯ä»»ä½•æ—¶å€™ï¼Œé›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ªmasterï¼›</p>
</li>
<li><p>å­˜è´®æ‰€æœ‰Regionçš„å¯»å€å…¥å£ã€‚</p>
</li>
<li><p>å®æ—¶ç›‘æ§Region serverçš„ä¸Šçº¿å’Œä¸‹çº¿ä¿¡æ¯ã€‚å¹¶å®æ—¶é€šçŸ¥Master</p>
</li>
<li><p>å­˜å‚¨HBaseçš„schemaå’Œtableå…ƒæ•°æ®</p>
</li>
</ul>
</blockquote>
<p>ï¼ˆ3ï¼‰Master</p>
<blockquote>
<p>ä¸ºRegion serveråˆ†é…regionï¼›</p>
<ul>
<li><p>è´Ÿè´£Region serverçš„è´Ÿè½½å‡è¡¡ï¼›</p>
</li>
<li><p>å‘ç°å¤±æ•ˆçš„Region serverå¹¶å°†å…¶ä¸Šçš„regioné‡æ–°åˆ†é…ï¼›</p>
</li>
<li><p>ç®¡ç†ç”¨æˆ·å¯¹tableçš„å¢åˆ æ”¹æ“ä½œï¼›</p>
</li>
</ul>
</blockquote>
<p>ï¼ˆ4ï¼‰RegionServer    </p>
<blockquote>
<ul>
<li><p>ç»´æŠ¤regionï¼Œå¤„ç†å¯¹è¿™äº›regionçš„IOè¯·æ±‚</p>
</li>
<li><p>è´Ÿè´£åˆ‡åˆ†åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å˜å¾—è¿‡å¤§çš„region</p>
</li>
</ul>
</blockquote>
<p>ï¼ˆ5ï¼‰Region</p>
<blockquote>
<ul>
<li><p>ä¿å­˜ä¸€ä¸ªè¡¨é‡Œé¢æŸæ®µè¿ç»­çš„æ•°æ®ï¼Œæ¯ä¸ªè¡¨ä¸€å¼€å§‹åªæœ‰ä¸€ä¸ªregionï¼›</p>
</li>
<li><p>éšç€æ•°æ®ä¸æ–­æ’å…¥è¡¨ï¼Œregionä¸æ–­å¢å¤§ï¼Œå½“å¢å¤§åˆ°ä¸€ä¸ªé˜€å€¼çš„æ—¶å€™ï¼Œregionå°±ä¼šç­‰åˆ†ä¼šä¸¤ä¸ªæ–°çš„regionï¼ˆè£‚å˜ï¼‰</p>
<p>ï¼ˆHBaseè‡ªåŠ¨æŠŠè¡¨æ°´å¹³åˆ’åˆ†æˆå¤šä¸ªåŒºåŸŸ(region)ï¼‰</p>
</li>
<li><p>å½“tableä¸­çš„è¡Œä¸æ–­å¢å¤šï¼Œå°±ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„regionã€‚è¿™æ ·ä¸€å¼ å®Œæ•´çš„è¡¨è¢«ä¿å­˜åœ¨å¤šä¸ªRegionserverä¸Š</p>
</li>
</ul>
</blockquote>
<p>ï¼ˆ6ï¼‰Memstoreä¸storefile</p>
<blockquote>
<ul>
<li>ä¸€ä¸ªregionç”±2-3storeç»„æˆï¼Œä¸€ä¸ªstoreå¯¹åº”ä¸€ä¸ªCFï¼ˆåˆ—æ—ï¼‰</li>
<li>storeåŒ…æ‹¬ä½äºå†…å­˜ä¸­çš„memstoreå’Œä½äºç£ç›˜çš„storefileã€‚</li>
<li>å†™æ“ä½œå…ˆå†™å…¥memstoreï¼Œå½“memstoreä¸­çš„æ•°æ®è¾¾åˆ°æŸä¸ªé˜ˆå€¼ï¼Œhregionserverä¼šå¯åŠ¨flashcacheè¿›ç¨‹å†™å…¥storefileï¼Œæ¯æ¬¡å†™å…¥å½¢æˆå•ç‹¬çš„ä¸€ä¸ªstorefileï¼›</li>
<li>å½“storefileæ–‡ä»¶çš„æ•°é‡å¢é•¿åˆ°ä¸€å®šé˜ˆå€¼åï¼Œç³»ç»Ÿä¼šè¿›è¡Œåˆå¹¶ï¼ˆminorã€major<br>compactionï¼‰ï¼Œåœ¨åˆå¹¶è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œç‰ˆæœ¬åˆå¹¶å’Œåˆ é™¤å·¥ä½œï¼ˆmajarï¼‰ï¼Œå½¢æˆæ›´å¤§çš„storefile</li>
<li>å½“ä¸€ä¸ªregionæ‰€æœ‰storefileçš„å¤§å°å’Œæ•°é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼åï¼Œä¼šæŠŠå½“å‰çš„regionåˆ†å‰²ä¸ºä¸¤ä¸ªï¼Œå¹¶ç”±hmasteråˆ†é…åˆ°ç›¸åº”çš„regionserveræœåŠ¡å™¨ï¼Œå®ç°è´Ÿè½½å‡è¡¡</li>
<li>å®¢æˆ·ç«¯æ£€ç´¢æ•°æ®ï¼Œå…ˆåœ¨memstoreæ‰¾ï¼Œæ‰¾ä¸åˆ°å†æ‰¾storefile</li>
<li>HRegionæ˜¯HBaseä¸­åˆ†å¸ƒå¼å­˜å‚¨å’Œè´Ÿè½½å‡è¡¡çš„æœ€å°å•å…ƒã€‚æœ€å°å•å…ƒå°±è¡¨ç¤ºä¸åŒçš„HRegionå¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„HRegion serverä¸Šã€‚</li>
<li>æ¯ä¸ªStroreåˆç”±ä¸€ä¸ªmemStoreå’Œ0è‡³å¤šä¸ªStoreFileç»„æˆ,StoreFileä»¥HFileæ ¼å¼ä¿å­˜åœ¨HDFSä¸Š(HFile)ã€‚</li>
</ul>
</blockquote>
<h2 id="ä¸‰ã€Hbase-å®‰è£…éƒ¨ç½²"><a href="#ä¸‰ã€Hbase-å®‰è£…éƒ¨ç½²" class="headerlink" title="ä¸‰ã€Hbase å®‰è£…éƒ¨ç½²"></a>ä¸‰ã€Hbase å®‰è£…éƒ¨ç½²</h2><p>å®Œå…¨åˆ†å¸ƒå¼æ­å»º</p>
<p>1ã€å®‰è£…åŒ…å‡†å¤‡</p>
<p><a href="http://hbase.apache.org/downloads.html" target="_blank" rel="noopener">Hbase</a>ï¼ˆæœ¬æ–‡ä½¿ç”¨0.98ç‰ˆæœ¬ï¼‰</p>
<p>å°†tarä¸Šä¼ è‡³Linuxç³»ç»Ÿï¼Œè¿›è¡Œè§£å‹å®‰è£…</p>
<p>2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶hbase-env.shï¼ˆåœ¨Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­ï¼‰</p>
<p>ä¿®æ·»åŠ JAVA_HOMEç¯å¢ƒå˜é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># The java implementation to use.  Java 1.7+ required.</span><br><span class="line"># export JAVA_HOME=/usr/java/jdk1.6.0/</span><br><span class="line">export JAVA_HOME=/usr/soft/jdk1.8.0_191</span><br></pre></td></tr></table></figure>
<p>ä¸ä½¿ç”¨HBaseçš„é»˜è®¤zookeeperé…ç½®ï¼Œï¼ˆä½¿ç”¨è‡ªå·±çš„ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Tell HBase whether it should manage it&apos;s own instance of Zookeeper or not.</span><br><span class="line"> export HBASE_MANAGES_ZK=false</span><br></pre></td></tr></table></figure>
<p>3ã€ä¿®æ”¹é…ç½®hbase-site.xmlï¼ˆåœ¨Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--Hdfsé…ç½®æ—¶çš„é›†ç¾¤å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://Sunrise:8020/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--zookeeperçš„ä¸‰å°èŠ‚ç‚¹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node00,node01,node02<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®httpè®¿é—®çš„port---&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.master.info.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>60010<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>æ³¨æ„ï¼šï¼ˆä¼šå‡ºbugçš„åœ°æ–¹ï¼‰</code>ï¼š</p>
<p>1ã€é—®é¢˜æè¿°ï¼š</p>
<blockquote>
<p>HBaseå¯åŠ¨æ—¶ï¼Œè­¦å‘Šï¼š<br>Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=128m; support was removed in 8.0 </p>
</blockquote>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p><code>åŸå› ï¼š</code>ç”±äºä½¿ç”¨äº†JDK8 ï¼Œéœ€è¦åœ¨HBaseçš„é…ç½®æ–‡ä»¶ä¸­hbase-env.shï¼Œæ³¨é‡Šæ‰ä¸¤è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Configure PermSize. Only needed in JDK7. You can safely remove it for JDK8+</span><br><span class="line">#export HBASE_MASTER_OPTS=&quot;$HBASE_MASTER_OPTS -XX:PermSize=128m -XX:MaxPermSize=128m -XX:ReservedCodeCacheSize=256m&quot;</span><br><span class="line">#export HBASE_REGIONSERVER_OPTS=&quot;$HBASE_REGIONSERVER_OPTS -XX:PermSize=128m -XX:MaxPermSize=128m -XX:ReservedCodeCacheSize=256m&quot;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨HBaseã€‚</p>
<p>2ã€é—®é¢˜æè¿°ï¼š</p>
<blockquote>
<p>é…ç½®å¥½HBaseåï¼Œå„é¡¹æœåŠ¡æ­£å¸¸ï¼Œä½†æƒ³ä»æµè§ˆå™¨é€šè¿‡ç«¯å£60010çœ‹ä¸‹èŠ‚ç‚¹æƒ…å†µï¼Œä½†æ˜¯æç¤ºæ‹’ç»è®¿é—®</p>
</blockquote>
<p><code>æ£€æµ‹ï¼š</code>åœ¨æœåŠ¡å™¨ä¸Šnetstat -natl|grep 60010 å‘ç°å¹¶æ²¡æœ‰60010ç«¯å£</p>
<p><code>åŸå› ï¼š</code>HBase 1.0 ä¹‹åçš„ç‰ˆæœ¬éƒ½éœ€è¦åœ¨hbase-site.xmlä¸­é…ç½®ç«¯å£ï¼Œå¦‚ä¸‹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.master.info.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>60010<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨HBase,åœ¨æµè§ˆå™¨å†æ¬¡è®¿é—®ï¼Œå°±okäº†</p>
<p>4ã€æ·»åŠ é…ç½®regionservers æ–‡ä»¶ï¼ˆåœ¨Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­ï¼‰</p>
<p>æ·»åŠ é…ç½®çš„regionservers çš„ä¸»æœºå</p>
<p>regionservers</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node00</span><br><span class="line">node01</span><br><span class="line">node02</span><br></pre></td></tr></table></figure>
<p>5ã€æ·»åŠ é…ç½®backup-masters</p>
<p>æ·»åŠ é…ç½®çš„masterå¤‡ä»½çš„ä¸»æœºåï¼ˆåœ¨Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­ï¼‰</p>
<p>backup-masters</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node02</span><br></pre></td></tr></table></figure>
<p>6ã€å°†Hadoopå®‰è£…è§£å‹ç›®å½•/etc/hadoopç›®å½•ä¸‹çš„hdfs-site.xmlæ–‡ä»¶ æ‹·è´åˆ°Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­</p>
<p>7ã€é…ç½®ç¯å¢ƒå˜é‡ ~/.bash_profile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/soft/jdk1.8.0_191</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">HADOOP_HOME=/usr/soft/hadoop-2.6.5</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span class="line">ZOOKEEPER_HOME=/usr/soft/zookeeper-3.4.13</span><br><span class="line">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br><span class="line">HIVE_HOME=/usr/soft/apache-hive-1.2.1-bin</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br><span class="line">SQOOP_HOME=/usr/soft/sqoop-1.4.6</span><br><span class="line">export PATH=$PATH:$SQOOP_HOME/bin</span><br><span class="line">HBASE_HOME=/usr/soft/hbase-1.2.9</span><br><span class="line">export PATH=$PATH:$HBASE_HOME/bin</span><br></pre></td></tr></table></figure>
<blockquote>
<p>source ~/.bash_profile</p>
</blockquote>
<p>8ã€å°†å¦‚ä¸Šé…ç½®è¿œç¨‹å‘é€è‡³å…¶ä»–èŠ‚ç‚¹ï¼ˆHbase ã€ ./bash_profileï¼‰</p>
<p>9ã€å„ä¸ªèŠ‚ç‚¹æ³¨æ„è¦åšæ—¶é—´åŒæ­¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntpdate cn.ntp.org.cn</span><br></pre></td></tr></table></figure>
<p>10ã€å¯åŠ¨HDFSé›†ç¾¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh start</span><br><span class="line">start-hdfs.sh</span><br></pre></td></tr></table></figure>
<p>11ã€å¯åŠ¨ï¼šstart-hbase.sh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">starting master, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-master-node00.out</span><br><span class="line">node02: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node02.out</span><br><span class="line">node01: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node01.out</span><br><span class="line">node00: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node00.out</span><br><span class="line">node02: starting master, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-master-node02.out</span><br></pre></td></tr></table></figure>
<p>12ã€æŸ¥çœ‹è¿›ç¨‹ï¼šjps</p>
<p>13ã€æµè§ˆå™¨è®¿é—®ï¼šnode00:60010</p>
<p>14ã€å…³é—­ï¼šstop-hbase.sh</p>
<h2 id="å››ã€é€šè¿‡hbase-shellå‘½ä»¤è¿›å…¥HBase-å‘½ä»¤è¡Œæ¥å£"><a href="#å››ã€é€šè¿‡hbase-shellå‘½ä»¤è¿›å…¥HBase-å‘½ä»¤è¡Œæ¥å£" class="headerlink" title="å››ã€é€šè¿‡hbase shellå‘½ä»¤è¿›å…¥HBase å‘½ä»¤è¡Œæ¥å£"></a>å››ã€é€šè¿‡hbase shellå‘½ä»¤è¿›å…¥HBase å‘½ä»¤è¡Œæ¥å£</h2><p>é€šè¿‡<code>help</code>å¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤çš„æ”¯æŒä»¥åŠå¸®åŠ©æ‰‹å†Œ</p>
<blockquote>
<p>å¸®åŠ©åˆ›å»º</p>
<p>hbase(main):007:0&gt;  help create</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">åç§°</th>
<th>Shellå‘½ä»¤</th>
<th>ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">åˆ›å»ºè¡¨</td>
<td>create â€˜è¡¨åâ€™, â€˜åˆ—æ—å1â€™[,â€¦]</td>
<td>create â€˜t1â€™ï¼Œâ€˜cf1â€™</td>
</tr>
<tr>
<td style="text-align:center">åˆ—å‡ºæ‰€æœ‰è¡¨</td>
<td>list</td>
<td>list</td>
</tr>
<tr>
<td style="text-align:center">æ·»åŠ è®°å½•</td>
<td>put â€˜è¡¨åâ€™, â€˜RowKeyâ€™, â€˜åˆ—æ—åç§°:åˆ—åâ€™, â€˜å€¼â€™</td>
<td>put        â€˜t1â€™,â€˜rk_00101â€™,â€˜cf1:nameâ€™,â€˜zsâ€™</td>
</tr>
<tr>
<td style="text-align:center">æŸ¥çœ‹è®°å½•</td>
<td>get â€˜è¡¨åâ€™, â€˜RowKeyâ€™, â€˜åˆ—æ—åç§°:åˆ—åâ€™</td>
<td>get â€˜t1â€™,â€˜rk_00101â€™                         get â€˜t1â€™,â€˜rk_00101â€™,â€˜cf1:nameâ€™</td>
</tr>
<tr>
<td style="text-align:center">æŸ¥çœ‹è¡¨ä¸­                           è®°å½•æ€»æ•°</td>
<td>count  â€˜è¡¨åâ€™</td>
<td>count â€˜t1â€™</td>
</tr>
<tr>
<td style="text-align:center">åˆ é™¤è®°å½•</td>
<td>delete  â€˜è¡¨åâ€™   , â€˜RowKeyâ€™,   â€˜åˆ—æ—åç§°:åˆ—åâ€™</td>
<td>delete â€˜t1â€™,â€˜rk_00101â€™,â€˜cf1:nameâ€™</td>
</tr>
<tr>
<td style="text-align:center">åˆ é™¤ä¸€å¼ è¡¨</td>
<td>å…ˆè¦å±è”½è¯¥è¡¨ï¼Œæ‰èƒ½å¯¹è¯¥è¡¨è¿›è¡Œåˆ é™¤ã€‚                                           ç¬¬ä¸€æ­¥ disable   â€˜è¡¨åç§°â€™                                                                         ç¬¬äºŒæ­¥ drop   â€˜è¡¨åç§°â€™</td>
<td>disable â€˜t1â€™                                                      drop â€˜t1â€™</td>
</tr>
<tr>
<td style="text-align:center">æŸ¥çœ‹æ‰€æœ‰              è®°å½•</td>
<td>scan   â€˜è¡¨å â€˜</td>
<td>scan â€˜t1â€™</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td>create â€˜t2â€™, {NAME =&gt; â€˜cf1â€™, VERSIONS =&gt; 2}, METADATA =&gt; { â€˜mykeyâ€™ =&gt; â€˜myvalueâ€™ }</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">æŸ¥çœ‹æœªåŠ å·¥çš„æ•°æ®ä¸­æŒ‡å®šç‰ˆæœ¬è®°å½•</td>
<td>scan â€˜t1â€™, {RAW =&gt; true, VERSIONS =&gt; 3}                           raw  æœªåŠ å·¥çš„</td>
<td>3</td>
</tr>
<tr>
<td style="text-align:center">æŸ¥çœ‹ä¿å­˜   ç‰ˆæœ¬è®°å½•</td>
<td>scan â€˜t1â€™, {VERSIONS =&gt; 2}</td>
<td>2</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="äº”ã€HBaseä¼˜åŒ–"><a href="#äº”ã€HBaseä¼˜åŒ–" class="headerlink" title="äº”ã€HBaseä¼˜åŒ–"></a>äº”ã€HBaseä¼˜åŒ–</h2><p><code>è¯¦è§HBaseæ€§èƒ½ä¼˜åŒ–æ–‡æ¡£</code></p>

      </div>
        <div class="support-author">
          <p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ ğŸ™
          <a href="https://www.yarusun.club/" target="_blank">å…³äºè½¬è½½è¯·çœ‹è¿™é‡Œ</a>
            <!--<a class="btn-pay"  href="#pay-modal">Â¥ æ‰“èµæ”¯æŒ</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>å–œæ¬¢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script type="text/javascript">
  const gitalk = new Gitalk({
    clientID: '6b3c35f853de938a9612',
    clientSecret: '70003661fc70b011a32d9d1b2197666021305201',
    repo: 'sungithup.github.io',
    owner: 'sungithup',
    admin: ['sungithup'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false
  })

  gitalk.render('comments');
</script>


        </div>
      </div>
    </div>
   
</main>
<div class="footer">
  <div class="info">
    <p>
    <a href="https://hexo.io"> Hexo </a> å¼ºåŠ›é©±åŠ¨ |
      <a href="https://github.com/Youthink/hexo-themes-yearn"> Yearn </a>
      ä¸»é¢˜
    </p>
    <p>&copy;2013-2019 Sukieçš„ä¸ªäººåšå®¢ äº¬ICPå¤‡xxxxxxå·</p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = '\næ¬¢è¿è®¿é—® https://yarusun.club ï¼Œå›´è§‚Sukieçš„åšå®¢(ã¥ï½¡â—•â€¿â€¿â—•ï½¡)ã¥ï¼\n,\næœ¬åšå®¢ä½¿ç”¨ %cHexo%c æ­å»ºï¼Œåšå®¢ä¸»é¢˜ä¸ºå°çŒ¿å¤§åœ£å¼€å‘çš„ %chexo-themes-yearn%c ~~~ ğŸ‰ğŸ‰ğŸ‰ \n\næºç  https://github.com/Youthink/hexo-themes-yearn \n\nå¦‚æœå–œæ¬¢å¯ä»¥ star æ”¯æŒä¸€ä¸‹ â¤ï¸~\n,\næ‰«æä¸‹é¢çš„äºŒç»´ç ï¼Œåœ¨æ‰‹æœºä¸ŠæŸ¥çœ‹åšå®¢ï¼\n,https://static.hufangyun.com/blog-url-qrcode-180-180.png,\n æƒ³çŸ¥é“è¿™ä¸ªæ•ˆæœå¦‚ä½•å®ç°çš„ï¼Ÿåšå®¢å†…æœç´¢ console å½©è›‹ ğŸš€ ï¼\n'.split(',');
  var canConsole = true;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/./js/main.d9e3dd.js"></script>

</body>
</html>
