<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  
  
  <link rel="dns-prefetch" href="https://hm.baidu.com/">
  
  
  <link rel="stylesheet" type="text/css" href="/./style/main.d9e3dd.css">
	<link rel="shortcut icon" href="" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>Flumeå­¦ä¹ </title>
  
  
</head>
<body>
<canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/">Sunriseå±±è„‰</a>
  <a class="face-img" href="/">
    <img src="">
  </a>
</div>
<main>
  <div class="article-title">
    
    <ul class="article-info">
      <li>
        å‘å¸ƒ
        
      </li>
      <li>
        
      </li>
      <li id="busuanzi_container_page_pv">
        é˜…è¯» <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <p>[TOC]</p>
<h2 id="ä¸€ã€åˆ†ç±»"><a href="#ä¸€ã€åˆ†ç±»" class="headerlink" title="ä¸€ã€åˆ†ç±»"></a>ä¸€ã€åˆ†ç±»</h2><p><code>exec</code>ï¼š</p>
<blockquote>
<p> Unixç­‰æ“ä½œç³»ç»Ÿæ‰§è¡Œå‘½ä»¤è¡Œï¼Œå¦‚tail ï¼Œcat ã€‚å¯ç›‘å¬æ–‡ä»¶</p>
</blockquote>
<p><code>netcat</code></p>
<blockquote>
<p>ç›‘å¬ä¸€ä¸ªæŒ‡å®šç«¯å£ï¼Œå¹¶å°†æ¥æ”¶åˆ°çš„æ•°æ®çš„æ¯ä¸€è¡Œè½¬æ¢ä¸ºä¸€ä¸ªeventäº‹ä»¶</p>
</blockquote>
<p><code>avro</code></p>
<blockquote>
<p>åºåˆ—åŒ–çš„ä¸€ç§ï¼Œå®ç°RPCï¼ˆä¸€ç§è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ï¼‰ã€‚</p>
<p>ç›‘å¬AVROç«¯å£æ¥æ¥æ”¶å¤–éƒ¨AVROå®¢æˆ·ç«¯äº‹ä»¶æµ</p>
</blockquote>
<blockquote>
<p>capacityï¼šé»˜è®¤è¯¥é€šé“ä¸­æœ€å¤§çš„å¯ä»¥å­˜å‚¨çš„eventæ•°é‡æ˜¯1000</p>
<p>Trasaction Capacityï¼šæ¯æ¬¡æœ€å¤§å¯ä»¥sourceä¸­æ‹¿åˆ°æˆ–è€…é€åˆ°sinkä¸­çš„eventæ•°é‡ä¹Ÿæ˜¯100</p>
</blockquote>
<h2 id="äºŒã€æ“ä½œ"><a href="#äºŒã€æ“ä½œ" class="headerlink" title="äºŒã€æ“ä½œ"></a>äºŒã€æ“ä½œ</h2><h3 id="1ã€-netcatï¼ˆç›‘å¬ç«¯å£ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰"><a href="#1ã€-netcatï¼ˆç›‘å¬ç«¯å£ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰" class="headerlink" title="1ã€ netcatï¼ˆç›‘å¬ç«¯å£ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰"></a>1ã€ netcatï¼ˆç›‘å¬ç«¯å£ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰</h3><h4 id="ï¼ˆ1ï¼‰-vim-netcat-logger"><a href="#ï¼ˆ1ï¼‰-vim-netcat-logger" class="headerlink" title="ï¼ˆ1ï¼‰ vim netcat_logger"></a>ï¼ˆ1ï¼‰ vim netcat_logger</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># example.conf: A single-node Flume configuration</span><br><span class="line"></span><br><span class="line"># Name the components on this agent</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line"># Describe/configure the source</span><br><span class="line">a1.sources.r1.type = netcat</span><br><span class="line">a1.sources.r1.bind = localhost</span><br><span class="line">a1.sources.r1.port = 44444</span><br><span class="line"></span><br><span class="line"># Describe the sink</span><br><span class="line">a1.sinks.k1.type = logger</span><br><span class="line"></span><br><span class="line"># Use a channel which buffers events in memory</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line"># Bind the source and sink to the channel</span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br></pre></td></tr></table></figure>
<h4 id="ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ"><a href="#ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ" class="headerlink" title="ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ"></a>ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ</h4><ul>
<li>ï¼ˆåœ¨ä¼šè¯1ç«¯ï¼‰</li>
</ul>
<blockquote>
<p>åœ¨node00èŠ‚ç‚¹çš„æ§åˆ¶å°è¾“å…¥<code>å¯åŠ¨</code>å‘½ä»¤ï¼š</p>
<p>(<code>æ–¹å¼ä¸€</code>ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„+æ–‡ä»¶å)</p>
<p>flume-ng agent</p>
<p> â€“conf-file /root/flume/netcat_logger â€“name a1 -Dflume.root.logger=INFO,console</p>
<p>ï¼ˆ<code>æ–¹å¼äºŒ</code>ï¼šé…ç½®æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼‰</p>
<p>flume-ng agent â€“conf ./ â€“conf-file netcat_logger â€“name a1 -Dflume.root.logger=INFO,console</p>
</blockquote>
<p><code>ç‰¹åˆ«æ³¨æ„</code>ï¼š</p>
<p>#####<code>å®˜ç½‘æ–¹å¼</code>#########</p>
<blockquote>
<p>flume-ng agent</p>
<p> â€“conf conf â€“conf-file netcat_logger â€“name a1 -Dflume.root.logger=INFO,console</p>
<p>è§£é‡Šï¼šæ­¤å‘½ä»¤é€‚ç”¨äºå°†é…ç½®æ–‡ä»¶æ”¾åœ¨flumeè§£å‹å®‰è£…ç›®å½•çš„confä¸­ï¼ˆä¸å¸¸ç”¨ï¼‰</p>
</blockquote>
<p><code>æ§åˆ¶å°æ˜¾ç¤º</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â€‹`````</span><br></pre></td></tr></table></figure>
<p>19/01/18 12:27:31 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started<br>19/01/18 12:27:31 INFO node.Application: Starting Sink k1<br>19/01/18 12:27:31 INFO node.Application: Starting Source r1<br>19/01/18 12:27:31 INFO source.NetcatSource: Source starting<br>19/01/18 12:27:31 INFO source.NetcatSource: Created serverSocket:sun.nio.ch.ServerSocketChannelImpl[/127.0.0.1:44444]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* (åœ¨ä¼šè¯2ç«¯)</span><br><span class="line"></span><br><span class="line">&gt; åœ¨node00èŠ‚ç‚¹çš„æ§åˆ¶å°è¾“å…¥å‘½ä»¤ï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; 1ã€åœ¨èŠ‚ç‚¹ä¸Šå®‰è£…telnetï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; yum install -y telnet</span><br><span class="line">&gt;</span><br><span class="line">&gt; yum -y install telnet-server</span><br><span class="line">&gt;</span><br><span class="line">&gt; 2ã€å¯åŠ¨ï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; telnet localhost 44444  </span><br><span class="line">&gt;</span><br><span class="line">&gt; `æ³¨æ„ï¼š`ï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>a1.sources.r1.bind = localhost<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;</span><br><span class="line">&gt; å‰ææ˜¯/etc/hostsä¸­å·²ç»é…ç½®</span><br><span class="line">&gt;</span><br><span class="line">&gt; å¦‚æœæ­¤å¤„é…ç½®localhost é‚£ä¹ˆå¯åŠ¨æ—¶ï¼Œlocalhost  æˆ–127.0.0.1éƒ½å¯ä»¥ï¼Œnode00å°±ä¸è¡Œ</span><br><span class="line">&gt;</span><br><span class="line">&gt; å¦‚æœæ­¤å¤„é…ç½®node00é‚£ä¹ˆå¯åŠ¨æ—¶ï¼Œnode00æˆ–ipéƒ½å¯ä»¥ï¼Œlocalhostå°±ä¸è¡Œ</span><br><span class="line">&gt;</span><br><span class="line">&gt; 3ã€åœ¨æ§åˆ¶å°è¾“å…¥ä»»ä½•å†…å®¹;</span><br><span class="line">&gt;</span><br><span class="line">&gt; éƒ½ä¼šåœ¨ä¼šè¯1ç«¯æ˜¾ç¤ºï¼Œä¸”ä¼šè¯1ç«¯ï¼ˆctrl+cï¼‰é€€å‡ºæœåŠ¡ï¼Œä¼šè¯2ç«¯ä¹Ÿè‡ªåŠ¨ç»“æŸ</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>  yum list telnet*   æŸ¥çœ‹telnetç›¸å…³çš„å®‰è£…åŒ…<br>   ç›´æ¥yum â€“y install telnet å°±OK<br>     yum -y install telnet-server å®‰è£…telnetæœåŠ¡<br>     yum -y install telnet-client  å®‰è£…telnetå®¢æˆ·ç«¯(å¤§éƒ¨åˆ†ç³»ç»Ÿé»˜è®¤å®‰è£…)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 2ã€avroï¼ˆç›‘å¬è¿œç¨‹å‘é€æ–‡ä»¶ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ1ï¼‰vim avro_logger</span><br></pre></td></tr></table></figure>
<p>#test avro sources</p>
<p>##ä½¿ç”¨avroæ–¹å¼åœ¨æŸèŠ‚ç‚¹ä¸Šå°†æ–‡ä»¶å‘é€åˆ°æœ¬æœåŠ¡å™¨ä¸Šä¸”é€šè¿‡loggeræ–¹å¼æ˜¾ç¤º</p>
<p>##å½“å‰flumeèŠ‚ç‚¹æ‰§è¡Œï¼š</p>
<p>#flume-ng agent â€“conf ./ â€“conf-file avro_loggers â€“name a1 -Dflume.root.logger=INFO,console</p>
<p>##å…¶ä»–flumeèŠ‚ç‚¹æ‰§è¡Œï¼š</p>
<p>#flume-ng avro-client â€“conf ./ -H 192.168.198.128 -p 55555 -F ./logs</p>
<p>a1.sources=r1<br>a1.channels=c1<br>a1.sinks=k1</p>
<p>a1.sources.r1.type = avro<br>a1.sources.r1.bind=192.168.198.128<br>a1.sources.r1.port=55555</p>
<p>a1.sinks.k1.type=logger</p>
<p>a1.channels.c1.type = memory<br>a1.channels.c1.capacity=1000<br>a1.channels.c1.transactionCapacity = 100</p>
<p>a1.sources.r1.channels=c1<br>a1.sinks.k1.channel=c1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å®ç°åŠŸèƒ½ï¼š</span><br><span class="line"></span><br><span class="line">&gt; ä½¿ç”¨avroæ–¹å¼åœ¨æŸèŠ‚ç‚¹ä¸Šå°†æ–‡ä»¶å‘é€åˆ°æœ¬æœåŠ¡å™¨ä¸Šä¸”é€šè¿‡loggeræ–¹å¼æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ</span><br><span class="line"></span><br><span class="line">##### `å¯åŠ¨` </span><br><span class="line"></span><br><span class="line">ï¼ˆåœ¨ä¼šè¯1ç«¯ï¼‰</span><br><span class="line"></span><br><span class="line">åœ¨node00ä¸Š</span><br><span class="line"></span><br><span class="line">*  ##å½“å‰flumeèŠ‚ç‚¹æ‰§è¡Œï¼ˆé…ç½®æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼‰ï¼š</span><br><span class="line"></span><br><span class="line">* &gt;  flume-ng agent --conf ./ --conf-file avro_logger --name a1 -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line">`æ˜¾ç¤ºï¼š`</span><br></pre></td></tr></table></figure></p>
<p>19/01/18 13:53:16 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started<br>19/01/18 13:53:16 INFO node.Application: Starting Sink k1<br>19/01/18 13:53:16 INFO node.Application: Starting Source r1<br>19/01/18 13:53:16 INFO source.AvroSource: Starting Avro source r1: { bindAddress: 192.168.198.128, port: 55555 }â€¦<br>19/01/18 13:53:17 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SOURCE, name: r1: Successfully registered new MBean.<br>19/01/18 13:53:17 INFO instrumentation.MonitoredCounterGroup: Component type: SOURCE, name: r1 started<br>19/01/18 13:53:17 INFO source.AvroSource: Avro source r1 started.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#####  å‘é€</span><br><span class="line"></span><br><span class="line">(åœ¨ä¼šè¯2ç«¯)</span><br><span class="line"></span><br><span class="line">åœ¨node00ä¸Šå‘é€æ–‡ä»¶åˆ°node00</span><br><span class="line"></span><br><span class="line">`å¯åŠ¨`</span><br><span class="line"></span><br><span class="line">##å¯åœ¨æœ¬åœ°å’Œå…¶ä»–flumeèŠ‚ç‚¹æ‰§è¡Œï¼ˆé…ç½®æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼‰ï¼š</span><br></pre></td></tr></table></figure>
<p>flume-ng avro-client â€“conf ./ -H 192.168.198.128 -p 55555 -F ./flume.log<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(åœ¨ä¼šè¯1ç«¯)</span><br></pre></td></tr></table></figure></p>
<p>19/01/18 14:12:57 INFO sink.LoggerSink: Event: { headers:{} body: 68 65 6C 6C 6F 20 62 69 67 64 61 74 61          hello bigdata }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æ—¶åˆ»ç›‘å¬ä¼ è¾“æ–‡ä»¶çš„å†…å®¹</span><br><span class="line"></span><br><span class="line">`æ³¨æ„`</span><br><span class="line"></span><br><span class="line">&gt; è¯¥è¿‡ç¨‹ä¹Ÿå¯åº”ç”¨äºä¸åŒèŠ‚ç‚¹ä¹‹é—´</span><br><span class="line"></span><br><span class="line">### 3ã€execï¼ˆç›‘å¬æŸä¸€å‘½ä»¤ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ1ï¼‰vim exec_logger</span><br></pre></td></tr></table></figure></p>
<p>#å•èŠ‚ç‚¹flumeé…ç½®</p>
<h1 id="example-conf-A-single-node-Flume-configuration"><a href="#example-conf-A-single-node-Flume-configuration" class="headerlink" title="example.conf: A single-node Flume configuration"></a>example.conf: A single-node Flume configuration</h1><p>#ç»™agentä¸‰å¤§ç»“æ„å‘½å</p>
<h1 id="Name-the-components-on-this-agent"><a href="#Name-the-components-on-this-agent" class="headerlink" title="Name the components on this agent"></a>Name the components on this agent</h1><p>a1.sources = r1<br>a1.sinks = k1<br>a1.channels = c1</p>
<p>#æè¿°sourceçš„é…ç½®ï¼šç±»å‹ã€å‘½ä»¤ï¼ˆç›‘å¬/root/flume.logæ–‡ä»¶ï¼‰</p>
<h1 id="Describe-configure-the-source"><a href="#Describe-configure-the-source" class="headerlink" title="Describe/configure the source"></a>Describe/configure the source</h1><p>a1.sources.r1.type = exec<br>a1.sources.r1.command = tail -F /root/flume.log</p>
<p>#æè¿°sinkçš„é…ç½®ï¼šç±»å‹</p>
<h1 id="Describe-the-sink"><a href="#Describe-the-sink" class="headerlink" title="Describe the sink"></a>Describe the sink</h1><p>a1.sinks.k1.type = logger</p>
<p>#åœ¨å†…å­˜ä¸­ä½¿ç”¨ä¸€ä¸ªchannelç¼“å­˜äº‹ä»¶</p>
<h1 id="Use-a-channel-which-buffers-events-in-memory"><a href="#Use-a-channel-which-buffers-events-in-memory" class="headerlink" title="Use a channel which buffers events in memory"></a>Use a channel which buffers events in memory</h1><p>a1.channels.c1.type = memory<br>a1.channels.c1.capacity = 1000<br>a1.channels.c1.transactionCapacity = 100</p>
<p>#å°†sourceå’Œsinkç»‘å®šåˆ°channelä¸Š</p>
<h1 id="Bind-the-source-and-sink-to-the-channel"><a href="#Bind-the-source-and-sink-to-the-channel" class="headerlink" title="Bind the source and sink to the channel"></a>Bind the source and sink to the channel</h1><p>a1.sources.r1.channels = c1<br>a1.sinks.k1.channel = c1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ï¼ˆxshellä¼šè¯1ï¼šï¼‰</span><br><span class="line"></span><br><span class="line">&gt; åœ¨node00ä¸Šï¼š`å¯åŠ¨`</span><br><span class="line">&gt;</span><br><span class="line">&gt; åœ¨exec_loggeræ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹</span><br><span class="line">&gt;</span><br><span class="line">&gt; å‘½ä»¤ï¼šflume-ng agent  --conf-file exec_logger --name a1 -Dflume.root.logger=INFO,console</span><br><span class="line">&gt;</span><br><span class="line">&gt; r1 å¯åŠ¨</span><br><span class="line"></span><br><span class="line">&gt; ï¼ˆå¤åˆ¶ä¼šè¯ï¼šä¼šè¯2ï¼‰</span><br><span class="line">&gt;</span><br><span class="line">&gt; åœ¨node00ä¸Šï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; åœ¨rootç›®å½•ä¸‹</span><br><span class="line">&gt;</span><br><span class="line">&gt; å‘½ä»¤ï¼šecho hello bigdata &gt;&gt;flume.log</span><br><span class="line"></span><br><span class="line">&gt; ä¹‹ååœ¨ä¼šè¯2ä¸Š</span><br><span class="line">&gt;</span><br><span class="line">&gt; `loggeræœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼š`</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>19/01/18 12:03:23 INFO sink.LoggerSink:<br>Event:<br>{ headers:{} body: 68 65 6C 6C 6F 20 62 69 67 64 61 74 61  hello bigdata }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 4ã€netcatâ€“hdfs(ç›‘å¬æ•°æ®ï¼Œä¼ åˆ°hdfsä¸Š)</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ1ï¼‰vim netcat_hdfs</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="a1-which-ones-we-want-to-activate"><a href="#a1-which-ones-we-want-to-activate" class="headerlink" title="a1 which ones we want to activate."></a>a1 which ones we want to activate.</h1><p>a1.channels = c1<br>a1.sources = r1<br>a1.sinks = k1</p>
<p>a1.sources.r1.type = netcat<br>a1.sources.r1.bind = node00<br>a1.sources.r1.port = 41414</p>
<p>a1.sinks.k1.type = hdfs<br>a1.sinks.k1.hdfs.path = hdfs://Sunrise/myflume/%y-%m-%d<br>a1.sinks.k1.hdfs.useLocalTimeStamp=true</p>
<h1 id="Define-a-memory-channel-called-c1-on-a1"><a href="#Define-a-memory-channel-called-c1-on-a1" class="headerlink" title="Define a memory channel called c1 on a1"></a>Define a memory channel called c1 on a1</h1><p>a1.channels.c1.type = memory</p>
<p>#é»˜è®¤å€¼ï¼Œå¯çœ</p>
<p>#a1.channels.c1.capacity = 1000</p>
<p>#a1.channels.c1.transactionCapacity = 100</p>
<h1 id="Define-an-Avro-source-called-r1-on-a1-and-tell-it"><a href="#Define-an-Avro-source-called-r1-on-a1-and-tell-it" class="headerlink" title="Define an Avro source called r1 on a1 and tell it"></a>Define an Avro source called r1 on a1 and tell it</h1><p>a1.sources.r1.channels = c1<br>a1.sinks.k1.channel = c1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### (2)æ“ä½œ</span><br><span class="line"></span><br><span class="line">åœ¨node00çš„ä¼šè¯1ä¸Š</span><br><span class="line"></span><br><span class="line">å¯åŠ¨</span><br><span class="line"></span><br><span class="line">&gt; åœ¨node00ä¸Šï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; åœ¨netcat_hdfsæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹</span><br><span class="line">&gt;</span><br><span class="line">&gt; å‘½ä»¤ï¼šflume-ng agent  --conf-file netcat_hdfs --name a1 -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºï¼š</span><br></pre></td></tr></table></figure></p>
<p>19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started<br>19/01/18 14:34:44 INFO node.Application: Starting Sink k1<br>19/01/18 14:34:44 INFO node.Application: Starting Source r1<br>19/01/18 14:34:44 INFO source.NetcatSource: Source starting<br>19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SINK, name: k1: Successfully registered new MBean.<br>19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Component type: SINK, name: k1 started<br>19/01/18 14:34:44 INFO source.NetcatSource: Created serverSocket:sun.nio.ch.ServerSocketChannelImpl[/192.168.198.128:41414]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åœ¨node00çš„ä¼šè¯2ä¸Š</span><br><span class="line"></span><br><span class="line">å¯åŠ¨</span><br><span class="line"></span><br><span class="line">&gt; telnet node00 41414</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤º</span><br></pre></td></tr></table></figure>
<p>Trying 192.168.198.128â€¦<br>Connected to node00.<br>Escape character is â€˜^]â€™.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è¾“å…¥ä»»æ„å†…å®¹</span><br><span class="line"></span><br><span class="line">åœ¨node00ä¼šè¯1ç«¯ä¼šæ˜¾ç¤º</span><br></pre></td></tr></table></figure>
<p>19/01/18 14:36:50 INFO hdfs.HDFSSequenceFile: writeFormat = Writable, UseRawLocalFileSystem = false<br>19/01/18 14:36:51 INFO hdfs.BucketWriter: Creating hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp<br>19/01/18 14:37:29 INFO hdfs.BucketWriter: Closing hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp<br>19/01/18 14:37:29 INFO hdfs.BucketWriter: Renaming hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp to hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259<br>19/01/18 14:37:29 INFO hdfs.HDFSEventSink: Writer callback called.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åœ¨HDFåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šä¼šæ˜¾ç¤ºï¼Œç”Ÿæˆçš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">![](https://ws1.sinaimg.cn/large/005zftzDgy1fzb4acaz5fj30u10blmzc.jpg)</span><br><span class="line"></span><br><span class="line">![](https://ws1.sinaimg.cn/large/005zftzDgy1fzb4bsv8d2j30wd08k74i.jpg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">`æ³¨æ„ï¼š`</span><br><span class="line"></span><br><span class="line">è¿™ç§æƒ…å†µä¼šåœ¨hdfsä¸Šç”Ÿæˆå¾ˆå¤šå°æ–‡ä»¶ï¼Œ</span><br><span class="line"></span><br><span class="line">[åœ¨å®˜ç½‘](http://flume.apache.org/releases/content/1.8.0/FlumeUserGuide.html)</span><br><span class="line"></span><br><span class="line">#### HDFS Sink[Â¶](http://flume.apache.org/releases/content/1.8.0/FlumeUserGuide.html#hdfs-sink)</span><br><span class="line"></span><br><span class="line">æœ‰å¾ˆå¤šå…³äºæ–‡ä»¶ç”Ÿæˆè¿‡ç¨‹ä¸­çš„é…ç½®</span><br><span class="line"></span><br><span class="line">| Name                   | Default      | Description                                                  |</span><br><span class="line">| ---------------------- | ------------ | ------------------------------------------------------------ |</span><br><span class="line">| **channel**            | â€“            |                                                              |</span><br><span class="line">| **type**               | â€“            | The component type name, needs to be `hdfs`                  |</span><br><span class="line">| **hdfs.path**          | â€“            | HDFS directory path (eg hdfs://namenode/flume/webdata/)      |</span><br><span class="line">| hdfs.filePrefix        | FlumeData    | Name prefixed to files created by Flume in hdfs directory    |</span><br><span class="line">| hdfs.fileSuffix        | â€“            | Suffix to append to file (eg `.avro` - *NOTE: period is not automatically added*) |</span><br><span class="line">| hdfs.inUsePrefix       | â€“            | Prefix that is used for temporal files that flume actively writes into |</span><br><span class="line">| hdfs.inUseSuffix       | `.tmp`       | Suffix that is used for temporal files that flume actively writes into |</span><br><span class="line">| hdfs.rollInterval      | 30           | Number of seconds to wait before rolling current file (0 = never roll based on time interval) |</span><br><span class="line">| hdfs.rollSize          | 1024         | File size to trigger roll, in bytes (0: never roll based on file size) |</span><br><span class="line">| hdfs.rollCount         | 10           | Number of events written to file before it rolled (0 = never roll based on number of events) |</span><br><span class="line">| hdfs.idleTimeout       | 0            | Timeout after which inactive files get closed (0 = disable automatic closing of idle files) |</span><br><span class="line">| hdfs.batchSize         | 100          | number of events written to file before it is flushed to HDFS |</span><br><span class="line">| hdfs.codeC             | â€“            | Compression codec. one of following : gzip, bzip2, lzo, lzop, snappy |</span><br><span class="line">| hdfs.fileType          | SequenceFile | File format: currently `SequenceFile`, `DataStream` or `CompressedStream` (1)DataStream will not compress output file and please donâ€™t set codeC (2)CompressedStream requires set hdfs.codeC with an available codeC |</span><br><span class="line">| hdfs.maxOpenFiles      | 5000         | Allow only this number of open files. If this number is exceeded, the oldest file is closed. |</span><br><span class="line">| hdfs.minBlockReplicas  | â€“            | Specify minimum number of replicas per HDFS block. If not specified, it comes from the default Hadoop config in the classpath. |</span><br><span class="line">| hdfs.writeFormat       | Writable     | Format for sequence file records. One of `Text` or `Writable`. Set to `Text` before creating data files with Flume, otherwise those files cannot be read by either Apache Impala (incubating) or Apache Hive. |</span><br><span class="line">| hdfs.callTimeout       | 10000        | Number of milliseconds allowed for HDFS operations, such as open, write, flush, close. This number should be increased if many HDFS timeout operations are occurring. |</span><br><span class="line">| hdfs.threadsPoolSize   | 10           | Number of threads per HDFS sink for HDFS IO ops (open, write, etc.) |</span><br><span class="line">| hdfs.rollTimerPoolSize | 1            | Number of threads per HDFS sink for scheduling timed file rolling |</span><br><span class="line">| hdfs.kerberosPrincipal | â€“            | Kerberos user principal for accessing secure HDFS            |</span><br><span class="line">| hdfs.kerberosKeytab    | â€“            | Kerberos keytab for accessing secure HDFS                    |</span><br><span class="line">| hdfs.proxyUser         |              |                                                              |</span><br><span class="line">| hdfs.round             | false        | Should the timestamp be rounded down (if true, affects all time based escape sequences except %t) |</span><br><span class="line">| hdfs.roundValue        | 1            | Rounded down to the highest multiple of this (in the unit configured using `hdfs.roundUnit`), less than current time. |</span><br><span class="line">| hdfs.roundUnit         | second       | The unit of the round down value - `second`, `minute` or `hour`. |</span><br><span class="line">| hdfs.timeZone          | Local Time   | Name of the timezone that should be used for resolving the directory path, e.g. America/Los_Angeles. |</span><br><span class="line">| hdfs.useLocalTimeStamp | false        | Use the local time (instead of the timestamp from the event header) while replacing the escape sequences. |</span><br><span class="line">| hdfs.closeTries        | 0            | Number of times the sink must try renaming a file, after initiating a close attempt. If set to 1, this sink will not re-try a failed rename (due to, for example, NameNode or DataNode failure), and may leave the file in an open state with a .tmp extension. If set to 0, the sink will try to rename the file until the file is eventually renamed (there is no limit on the number of times it would try). The file may still remain open if the close call fails but the data will be intact and in this case, the file will be closed only after a Flume restart. |</span><br><span class="line">| hdfs.retryInterval     | 180          | Time in seconds between consecutive attempts to close a file. Each close call costs multiple RPC round-trips to the Namenode, so setting this too low can cause a lot of load on the name node. If set to 0 or less, the sink will not attempt to close the file if the first attempt fails, and may leave the file open or with a â€.tmpâ€ extension. |</span><br><span class="line">| serializer             | `TEXT`       | Other possible options include `avro_event` or the fully-qualified class name of an implementation of the `EventSerializer.Builder` interface. |</span><br><span class="line"></span><br><span class="line">netcat-hdfs </span><br><span class="line"></span><br><span class="line">ï¼ˆé…ç½®æ–¹å¼äºŒï¼‰</span><br></pre></td></tr></table></figure>
<h1 id="a1-which-ones-we-want-to-activate-1"><a href="#a1-which-ones-we-want-to-activate-1" class="headerlink" title="a1 which ones we want to activate."></a>a1 which ones we want to activate.</h1><p>a1.channels = c1<br>a1.sources = r1<br>a1.sinks = k1</p>
<p>a1.sources.r1.type = avro<br>a1.sources.r1.bind=node01<br>a1.sources.r1.port=55555</p>
<p>a1.sinks.k1.type = hdfs<br>a1.sinks.k1.hdfs.path = hdfs://shsxt/hdfsflume</p>
<h1 id="Define-a-memory-channel-called-c1-on-a1-1"><a href="#Define-a-memory-channel-called-c1-on-a1-1" class="headerlink" title="Define a memory channel called c1 on a1"></a>Define a memory channel called c1 on a1</h1><p>a1.channels.c1.type = memory<br>a1.channels.c1.capacity=1000<br>a1.channels.c1.transactionCapacity = 100</p>
<h1 id="Define-an-Avro-source-called-r1-on-a1-and-tell-it-1"><a href="#Define-an-Avro-source-called-r1-on-a1-and-tell-it-1" class="headerlink" title="Define an Avro source called r1 on a1 and tell it"></a>Define an Avro source called r1 on a1 and tell it</h1><p>a1.sources.r1.channels = c1<br>a1.sinks.k1.channel = c1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 5ã€ç»“åˆç‰ˆï¼ˆnetcat-avroï¼‰</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ1ï¼‰vim netcat2_logger</span><br><span class="line"></span><br><span class="line">ï¼ˆnode00ï¼‰</span><br></pre></td></tr></table></figure></p>
<h1 id="example-conf-A-single-node-Flume-configuration-1"><a href="#example-conf-A-single-node-Flume-configuration-1" class="headerlink" title="example.conf: A single-node Flume configuration"></a>example.conf: A single-node Flume configuration</h1><p>#flume-ng agent â€“conf ./ â€“conf-file netcat2_logger â€“name a1 -Dflume.root.logger=INFO,console</p>
<p>#flume-ng â€“conf conf â€“conf-file /root/flume_test/netcat_hdfs -n a1 -Dflume.root.logger=INFO,console</p>
<p>#telnet 192.168.235.15 44444</p>
<h1 id="Name-the-components-on-this-agent-1"><a href="#Name-the-components-on-this-agent-1" class="headerlink" title="Name the components on this agent"></a>Name the components on this agent</h1><p> a1.sources = r1<br> a1.sinks = k1<br> a1.channels = c1</p>
<h1 id="Describe-configure-the-source-1"><a href="#Describe-configure-the-source-1" class="headerlink" title="Describe/configure the source"></a>Describe/configure the source</h1><p> a1.sources.r1.type = netcat<br> a1.sources.r1.bind = node00<br> a1.sources.r1.port = 44444</p>
<h1 id="Describe-the-sink-1"><a href="#Describe-the-sink-1" class="headerlink" title="Describe the sink"></a>Describe the sink</h1><p> a1.sinks.k1.type = avro<br> a1.sinks.k1.hostname = node01<br> a1.sinks.k1.port = 60000</p>
<h1 id="Use-a-channel-which-buffers-events-in-memory-1"><a href="#Use-a-channel-which-buffers-events-in-memory-1" class="headerlink" title="Use a channel which buffers events in memory"></a>Use a channel which buffers events in memory</h1><p> a1.channels.c1.type = memory<br> a1.channels.c1.capacity = 1000<br> a1.channels.c1.transactionCapacity = 100</p>
<h1 id="Bind-the-source-and-sink-to-the-channel-1"><a href="#Bind-the-source-and-sink-to-the-channel-1" class="headerlink" title="Bind the source and sink to the channel"></a>Bind the source and sink to the channel</h1><p> a1.sources.r1.channels = c1<br> a1.sinks.k1.channel = c1</p>
<p>#â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>#flume-ng agent â€“conf-file etect2_logger â€“name a1 -#Dflume.root.logger=INFO,console</p>
<p>#flume-ng agent â€“conf conf â€“conf-file netcat_logger â€“name a1 -#Dflume.root.logger=INFO,console<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ï¼ˆnode01ï¼‰</span><br></pre></td></tr></table></figure></p>
<p>#flume-ng agent â€“conf ./ â€“conf-file avro2 -n a1<br>a1.sources = r1<br>a1.sinks = k1<br>a1.channels = c1</p>
<p>a1.sources.r1.type = avro<br>a1.sources.r1.bind = node01<br>a1.sources.r1.port = 60000</p>
<p>a1.sinks.k1.type = logger</p>
<h1 id="Use-a-channel-which-buffers-events-in-memory-2"><a href="#Use-a-channel-which-buffers-events-in-memory-2" class="headerlink" title="Use a channel which buffers events in memory"></a>Use a channel which buffers events in memory</h1><p>a1.channels.c1.type = memory<br>a1.channels.c1.capacity = 1000<br>a1.channels.c1.transactionCapacity = 100</p>
<h1 id="Bind-the-source-and-sink-to-the-channel-2"><a href="#Bind-the-source-and-sink-to-the-channel-2" class="headerlink" title="Bind the source and sink to the channel"></a>Bind the source and sink to the channel</h1><p>a1.sources.r1.channels = c1<br>a1.sinks.k1.channel = c1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(2)æ“ä½œ</span><br><span class="line"></span><br><span class="line">&gt; å…ˆå¯åŠ¨åé¢çš„flumeèŠ‚ç‚¹node01  ï¼Œåœ¨å¯åŠ¨node00ï¼Œæœ€åå¯åŠ¨node02</span><br><span class="line"></span><br><span class="line">åœ¨node01ä¸Š</span><br><span class="line"></span><br><span class="line">`å¯åŠ¨`</span><br><span class="line"></span><br><span class="line">&gt; flume-ng </span><br><span class="line">&gt;</span><br><span class="line">&gt; --conf conf --conf-file avro2 -n a1 -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤º</span><br></pre></td></tr></table></figure>
<p>19/01/18 23:22:27 INFO node.Application: Starting Channel c1<br>19/01/18 23:22:28 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: CHANNEL, name: c1: Successfully registered new MBean.<br>19/01/18 23:22:28 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started<br>19/01/18 23:22:28 INFO node.Application: Starting Sink k1<br>19/01/18 23:22:28 INFO node.Application: Starting Source r1<br>19/01/18 23:22:28 INFO source.AvroSource: Starting Avro source r1: { bindAddress: node01, port: 60000 }â€¦<br>19/01/18 23:22:30 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SOURCE, name: r1: Successfully registered new MBean.<br>19/01/18 23:22:30 INFO instrumentation.MonitoredCounterGroup: Component type: SOURCE, name: r1 started<br>19/01/18 23:22:30 INFO source.AvroSource: Avro source r1 started.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åœ¨node00ä¸Š</span><br><span class="line"></span><br><span class="line">`å¯åŠ¨`</span><br><span class="line"></span><br><span class="line">&gt; flume-ng agent</span><br><span class="line">&gt;</span><br><span class="line">&gt; --conf ./ --conf-file netcat2_logger --name a1 -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åœ¨node02ä¸Š</span><br><span class="line"></span><br><span class="line">`å¯åŠ¨`</span><br><span class="line"></span><br><span class="line">&gt; telnet node00 44444</span><br><span class="line"></span><br><span class="line">ç„¶åè¾“å…¥æ•°æ®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æœ€ååœ¨</span><br><span class="line"></span><br><span class="line">node01èŠ‚ç‚¹ä¸Š</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<p>19/01/18 23:33:01 INFO sink.LoggerSink: Event: { headers:{} body: 68 65 6C 6C 6F 20 77 6F 72 6C 64 0D             hello world. }</p>
<p><code>`</code></p>
<p>flume-ng agent  â€“conf-file flumeproject â€“name a1 -Dflume.root.logger=INFO,console</p>

      </div>
        <div class="support-author">
          <p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ ğŸ™
          <a href="" target="_blank">å…³äºè½¬è½½è¯·çœ‹è¿™é‡Œ</a>
            <!--<a class="btn-pay"  href="#pay-modal">Â¥ æ‰“èµæ”¯æŒ</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>å–œæ¬¢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          
        </div>
      </div>
    </div>
   
</main>
<div class="footer">
  <div class="info">
    <p>
    <a href="https://hexo.io"> Hexo </a> å¼ºåŠ›é©±åŠ¨ |
      <a href="https://github.com/Youthink/hexo-themes-yearn"> Yearn </a>
      ä¸»é¢˜
    </p>
    <p>&copy; </p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = ''.split(',');
  var canConsole = ;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/./js/main.d9e3dd.js"></script>

</body>
</html>
