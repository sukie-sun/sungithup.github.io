<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Sparkå­¦ä¹ </title>
      <link href="/2019/02/16/Spark%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/02/16/Spark%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Sparkç®€ä»‹"><a href="#ä¸€ã€Sparkç®€ä»‹" class="headerlink" title="ä¸€ã€Sparkç®€ä»‹"></a>ä¸€ã€Sparkç®€ä»‹</h1><h2 id="1ã€ä»€ä¹ˆæ˜¯Sparkï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯Sparkï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯Sparkï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯Sparkï¼Ÿ</h2><blockquote><p>Apache Spark æ˜¯ä¸“ä¸ºå¤§è§„æ¨¡æ•°æ®å¤„ç†è€Œè®¾è®¡çš„å¿«é€Ÿé€šç”¨çš„è®¡ç®—å¼•æ“ã€‚</p></blockquote><p>å¤§æ•°æ®åˆ†æå¼•æ“ï¼šè®¡ç®—æ¡†æ¶</p><blockquote><p>Jobçš„ä¸­é—´ç»“æœå¯ä»¥ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸éœ€è¦è¯»å–HDFS</p><p>èƒ½æ›´å¥½çš„çš„é€‚ç”¨äºæ•°æ®æŒ–æ˜ä¸æœºå™¨å­¦ä¹ ç­‰éœ€è¦è¿­ä»£çš„ç®—æ³•</p></blockquote><p>å¿«é€Ÿï¼ˆ100å€ï¼‰:ç”¨äºé€»è¾‘å›å½’ç®—æ³•ï¼ˆæœºå™¨å­¦ä¹ ï¼‰,è¿­ä»£ç®—æ³•ï¼ˆåœ¨è®¡ç®—ç»“æœçš„åŸºç¡€ä¸Šå†è®¡ç®—ï¼‰æ—¶ï¼šä¸­é—´ç»“æœå€¼åœ¨å†…å­˜ä¸­æµè½¬ï¼Œå±è”½ç£ç›˜å¼€é”€ï¼›DAGè°ƒåº¦</p><p>mrï¼šç¦»çº¿ï¼Œï¼ˆè¿­ä»£æ—¶ï¼šç£ç›˜IOï¼Œè¾ƒæ…¢ï¼‰</p><p>stormï¼šæµå¼</p><blockquote><p>Sparkæ˜¯ç”¨Scalaç¼–å†™çš„ï¼Œæ–¹ä¾¿å¿«é€Ÿç¼–ç¨‹</p></blockquote><h2 id="2ã€ä¸MapReduceçš„åŒºåˆ«"><a href="#2ã€ä¸MapReduceçš„åŒºåˆ«" class="headerlink" title="2ã€ä¸MapReduceçš„åŒºåˆ«"></a>2ã€ä¸MapReduceçš„åŒºåˆ«</h2><ul><li>MapReduce</li></ul><p><img src="/images/mr.jpg" alt=""></p><p><img src="/images/mr1.jpg" alt=""></p><ul><li>Spark</li></ul><p><img src="/images/spark.jpg" alt=""></p><p>åŒºåˆ«ï¼š</p><blockquote><p>åŒï¼šåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶</p><p>ä¸åŒï¼š</p><ul><li>SparkåŸºäºå†…å­˜ï¼ŒMRåŸºäºHDFS</li><li>Sparkå¤„ç†æ•°æ®çš„èƒ½åŠ›æ˜¯MRçš„åå€ä»¥ä¸Š</li><li>Sparké™¤äº†åŸºäºå†…å­˜è®¡ç®—ä¹‹å¤–ï¼Œè¿˜æœ‰DAGæœ‰å‘æ— ç¯å›¾æ¥åˆ‡åˆ†ä»»åŠ¡çš„æ‰§è¡Œé¡ºåº</li></ul></blockquote><p>Spark API  çš„ä½¿ç”¨è¯­è¨€</p><blockquote><p>Scalaï¼ˆå¾ˆå¥½ï¼‰<br>Python(ä¸é”™)<br>Java(â€¦)</p></blockquote><h2 id="3ã€Sparkè¿è¡Œæ¨¡å¼"><a href="#3ã€Sparkè¿è¡Œæ¨¡å¼" class="headerlink" title="3ã€Sparkè¿è¡Œæ¨¡å¼"></a>3ã€Sparkè¿è¡Œæ¨¡å¼</h2><ul><li>local</li></ul><p>å¤šç”¨äºæœ¬åœ°æµ‹è¯•ï¼Œå¦‚åœ¨ eclipseï¼Œidea ä¸­å†™ç¨‹åºæµ‹è¯•</p><ul><li>standalone</li></ul><p>standaloneæ˜¯Sparkè‡ªå¸¦çš„èµ„æºè°ƒåº¦æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®Œå…¨åˆ†å¸ƒå¼</p><ul><li>yarn</li></ul><p>Hadoopç”Ÿæ€åœˆçš„èµ„æºè°ƒåº¦æ¡†æ¶ï¼ŒSparkä¹Ÿæ˜¯å¯ä»¥åŸºäºyarnæ¥è®¡ç®—çš„</p><blockquote><p>åŸºäºyarnæ¥è¿›è¡Œèµ„æºè°ƒåº¦ï¼Œå¿…é¡»å®ç°ApplicationMasteræ¥å£ï¼ŒSparkå®ç°çš„è¿™ä¸ªæ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨</p></blockquote><ul><li>mesos</li></ul><p>èµ„æºè°ƒåº¦æ¡†æ¶</p><h1 id="äºŒã€Sparkcore"><a href="#äºŒã€Sparkcore" class="headerlink" title="äºŒã€Sparkcore"></a>äºŒã€Sparkcore</h1><h2 id="1ã€RDD"><a href="#1ã€RDD" class="headerlink" title="1ã€RDD"></a>1ã€RDD</h2><h3 id="ï¼ˆ1ï¼‰æ¦‚å¿µï¼š"><a href="#ï¼ˆ1ï¼‰æ¦‚å¿µï¼š" class="headerlink" title="ï¼ˆ1ï¼‰æ¦‚å¿µï¼š"></a>ï¼ˆ1ï¼‰æ¦‚å¿µï¼š</h3><p>RDD(Resilient Distributed Dateset)å¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†</p><h3 id="ï¼ˆ2ï¼‰äº”å¤§ç‰¹æ€§"><a href="#ï¼ˆ2ï¼‰äº”å¤§ç‰¹æ€§" class="headerlink" title="ï¼ˆ2ï¼‰äº”å¤§ç‰¹æ€§"></a>ï¼ˆ2ï¼‰äº”å¤§ç‰¹æ€§</h3><blockquote><ol><li>RDD æ˜¯ç”±ä¸€ç³»åˆ—çš„ partition ç»„æˆçš„ã€‚</li><li>å‡½æ•°æ˜¯ä½œç”¨åœ¨æ¯ä¸€ä¸ª partitionï¼ˆsplitï¼‰ä¸Šçš„ã€‚</li><li>RDD ä¹‹é—´æœ‰ä¸€ç³»åˆ—çš„ä¾èµ–å…³ç³»ã€‚</li><li>åˆ†åŒºå™¨æ˜¯ä½œç”¨åœ¨ K,V æ ¼å¼çš„ RDD ä¸Šã€‚</li><li>RDD æä¾›ä¸€ç³»åˆ—æœ€ä½³çš„è®¡ç®—ä½ç½®ã€‚</li></ol></blockquote><h3 id="ï¼ˆ3ï¼‰RDDç†è§£å›¾"><a href="#ï¼ˆ3ï¼‰RDDç†è§£å›¾" class="headerlink" title="ï¼ˆ3ï¼‰RDDç†è§£å›¾"></a>ï¼ˆ3ï¼‰RDDç†è§£å›¾</h3><p><img src="/images/rdd1.jpg" alt=""></p><p><code>ç†è®ºæ³¨è§£</code></p><blockquote><ul><li><p>RDD  å®é™…ä¸Šä¸å­˜å‚¨æ•°æ®ï¼Œè¿™é‡Œæ–¹ä¾¿ç†è§£ï¼Œæš‚æ—¶ç†è§£ä¸ºå­˜å‚¨æ•°æ®ã€‚</p></li><li><p>textFile æ–¹æ³•åº•å±‚å°è£…çš„æ˜¯MR è¯»å–æ–‡ä»¶çš„æ–¹å¼ï¼Œè¯»å–æ–‡ä»¶ä¹‹å‰å…ˆ splitï¼Œé»˜è®¤ split å¤§å°æ˜¯ä¸€ä¸ª block å¤§å°ã€‚</p></li><li><p>â€‹ RDD æä¾›è®¡ç®—æœ€ä½³ä½ç½®ï¼Œä½“ç°äº†æ•°æ®æœ¬åœ°åŒ–ã€‚ä½“ç°äº†å¤§æ•°æ®ä¸­â€œè®¡ç®—ç§»åŠ¨æ•°æ®ä¸ç§»åŠ¨â€çš„ç†å¿µã€‚</p></li></ul><p>â”  å“ªé‡Œä½“ç° RDD çš„åˆ†å¸ƒå¼ï¼Ÿ</p><p>ğŸ‘†  RDD æ˜¯ç”± Partition ç»„æˆï¼Œpartition æ˜¯åˆ†å¸ƒåœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„ã€‚</p><p>â”  å“ªé‡Œä½“ç° RDD çš„å¼¹æ€§ï¼ˆå®¹é”™ï¼‰ï¼Ÿ</p><p>ğŸ‘† partition æ•°é‡ï¼Œå¤§å°æ²¡æœ‰é™åˆ¶,é»˜è®¤å’Œsplitï¼ˆblockï¼‰ä¸€è‡´ï¼Œä½“ç°äº† RDD çš„å¼¹æ€§ã€‚<br>ğŸ‘† RDD ä¹‹é—´ä¾èµ–å…³ç³»ï¼Œå¯ä»¥åŸºäºä¸Šä¸€ä¸ª RDD é‡æ–°è®¡ç®—å‡º RDDã€‚</p><p>â”  ä»€ä¹ˆæ˜¯ K,V æ ¼å¼çš„ RDD?</p><p>ğŸ‘† å¦‚æœ RDD é‡Œé¢å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯äºŒå…ƒç»„å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ª RDD æˆ‘ä»¬å°±å«åš K,V æ ¼å¼çš„ RDDã€‚</p><p>ğŸ‘† MRæœ‰åˆ†åŒºå™¨ï¼ˆæ ¹æ®keyå€¼æ±‚hashï¼Œæ¥å†³å®šæ•°æ®å­˜æ”¾åœ¨å“ªä¸ªåˆ†åŒºä¸­ï¼Œæ‰€ä»¥åˆ†åŒºå™¨å¿…é¡»ä½œç”¨åœ¨Kï¼ŒVæ ¼å¼çš„RDDä¸Šï¼‰</p></blockquote><p><img src="/images/rdd.jpg" alt=""></p><h2 id="2ã€Sparkä»»åŠ¡æ‰§è¡ŒåŸç†"><a href="#2ã€Sparkä»»åŠ¡æ‰§è¡ŒåŸç†" class="headerlink" title="2ã€Sparkä»»åŠ¡æ‰§è¡ŒåŸç†"></a>2ã€Sparkä»»åŠ¡æ‰§è¡ŒåŸç†</h2><p><img src="/images/Sparkä»»åŠ¡æ‰§è¡ŒåŸç†.png" alt=""></p><p><img src="/images/Sparkä»»åŠ¡æ‰§è¡ŒåŸç†0.png" alt=""></p><p>Driverï¼šï¼ˆç›¸å½“äºApplicationMasterï¼‰</p><p>Workerï¼šï¼ˆç›¸å½“äºNodeManagerï¼‰</p><p>ä»¥ä¸Šå›¾ä¸­æœ‰å››ä¸ªæœºå™¨èŠ‚ç‚¹ï¼Œ</p><p>Driver å’Œ Worker æ˜¯å¯åŠ¨åœ¨èŠ‚ç‚¹ä¸Šçš„è¿›ç¨‹ï¼Œ<br>è¿è¡Œåœ¨ JVM ä¸­çš„è¿›ç¨‹ã€‚<br>ïƒ˜ Driver ä¸é›†ç¾¤èŠ‚ç‚¹ä¹‹é—´æœ‰é¢‘ç¹çš„é€šä¿¡ã€‚<br>ïƒ˜ Driverï¼šä»»åŠ¡çš„è°ƒåº¦ï¼ˆç›‘æ§ä»»åŠ¡ã€ è´Ÿè´£ä»»åŠ¡(tasks)çš„åˆ†å‘å’Œç»“æœçš„å›æ”¶ï¼‰ã€‚å¦‚æœ task<br>çš„è®¡ç®—ç»“æœéå¸¸å¤§å°±ä¸è¦å›æ”¶äº†ã€‚ä¼šé€ æˆ oomã€‚<br>ïƒ˜ Worker æ˜¯ Standalone èµ„æºè°ƒåº¦æ¡†æ¶é‡Œé¢èµ„æºç®¡ç†çš„ä»èŠ‚ç‚¹ã€‚ä¹Ÿæ˜¯JVM è¿›ç¨‹ã€‚<br>ïƒ˜ Master æ˜¯ Standalone èµ„æºè°ƒåº¦æ¡†æ¶é‡Œé¢èµ„æºç®¡ç†çš„ä¸»èŠ‚ç‚¹ã€‚ä¹Ÿæ˜¯JVM è¿›ç¨‹ã€‚</p><h2 id="3ã€Sparkä»£ç æµç¨‹"><a href="#3ã€Sparkä»£ç æµç¨‹" class="headerlink" title="3ã€Sparkä»£ç æµç¨‹"></a>3ã€Sparkä»£ç æµç¨‹</h2><h3 id="ä»¥ç”¨Scalaç¼–å†™WordCountä¸ºä¾‹"><a href="#ä»¥ç”¨Scalaç¼–å†™WordCountä¸ºä¾‹" class="headerlink" title="ä»¥ç”¨Scalaç¼–å†™WordCountä¸ºä¾‹"></a><code>ä»¥ç”¨Scalaç¼–å†™WordCountä¸ºä¾‹</code></h3><p>1ã€åˆ›å»º SparkConf å¯¹è±¡<br>ïƒ˜ å¯ä»¥è®¾ç½® Application nameã€‚<br>ïƒ˜ å¯ä»¥è®¾ç½®è¿è¡Œæ¨¡å¼åŠèµ„æºéœ€æ±‚ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>()</span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å‡ ç§è¿è¡Œæ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment">         *   1.æœ¬åœ°è¿è¡Œ</span></span><br><span class="line"><span class="comment">         *   2.yarn</span></span><br><span class="line"><span class="comment">         *   3.standalone</span></span><br><span class="line"><span class="comment">         *   4.mesos</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"> conf.setMaster(<span class="string">"local"</span>).setAppName(<span class="string">"wc"</span>)</span><br></pre></td></tr></table></figure><p>2ã€åˆ›å»º SparkContext å¯¹è±¡</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>  context = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br></pre></td></tr></table></figure><p>3ã€åŸºäº Spark çš„ä¸Šä¸‹æ–‡åˆ›å»ºä¸€ä¸ª RDDï¼Œå¯¹ RDD è¿›è¡Œå¤„ç†ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–æ–‡ä»¶ä¸­æ¯ä¸€è¡Œæ•°æ®çš„ADD</span></span><br><span class="line"> <span class="keyword">val</span> lineADD = context.textFile(<span class="string">"./wc.txt"</span>)</span><br><span class="line"><span class="comment">//è·å–æ¯ä¸€è¡Œæ•°æ®æŒ‰ç©ºæ ¼åˆ‡åˆ†åçš„ADD</span></span><br><span class="line"> <span class="keyword">val</span> wordADD = lineADD.flatMap(x=&gt;&#123;x.split(<span class="string">" "</span>)&#125;)</span><br><span class="line"><span class="comment">//è·å–æ¯ä¸ªå•è¯åŠ ä¸Š,1 åçš„ADDï¼ˆK,Væ ¼å¼ï¼‰</span></span><br><span class="line"> <span class="keyword">val</span> <span class="type">KVADD</span> = wordADD.map(x=&gt;&#123;(x,<span class="number">1</span>)&#125;)</span><br><span class="line"><span class="comment">//è·å–å°†ç›¸åŒkeyçš„valueç›¸åŠ åçš„ADDï¼ˆK,Væ ¼å¼ï¼‰ï¼Œç›¸å½“äºTuple2</span></span><br><span class="line"> <span class="keyword">val</span> resultADD = <span class="type">KVADD</span>.reduceByKey((x,y)=&gt;&#123;x+y&#125;)</span><br><span class="line"><span class="comment">//é™åºæ’åº</span></span><br><span class="line"> <span class="keyword">val</span> sortADD = resultADD.sortBy(_._2,<span class="literal">false</span>)</span><br></pre></td></tr></table></figure><p>4ã€åº”ç”¨ç¨‹åºä¸­è¦æœ‰ Action ç±»ç®—å­æ¥è§¦å‘ Transformation ç±»ç®—å­æ‰§è¡Œã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sortADD.foreach(println)</span><br></pre></td></tr></table></figure><p>5ã€å…³é—­ Spark ä¸Šä¸‹æ–‡å¯¹è±¡ SparkContextã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.stop()</span><br></pre></td></tr></table></figure><h2 id="4ã€Transformations-è½¬æ¢ç®—å­"><a href="#4ã€Transformations-è½¬æ¢ç®—å­" class="headerlink" title="4ã€Transformations è½¬æ¢ç®—å­"></a>4ã€Transformations è½¬æ¢ç®—å­</h2><h3 id="ï¼ˆ1ï¼‰æ¦‚å¿µ"><a href="#ï¼ˆ1ï¼‰æ¦‚å¿µ" class="headerlink" title="ï¼ˆ1ï¼‰æ¦‚å¿µ"></a>ï¼ˆ1ï¼‰æ¦‚å¿µ</h3><p>Transformations ç±»ç®—å­æ˜¯ä¸€ç±»ç®—å­ï¼ˆå‡½æ•°ï¼‰å«åšè½¬æ¢ç®—å­ï¼Œå¦‚map,flatMap,reduceByKey ç­‰ã€‚Transformations ç®—å­æ˜¯å»¶è¿Ÿæ‰§è¡Œï¼Œä¹Ÿå«æ‡’åŠ è½½æ‰§è¡Œã€‚</p><blockquote><p>æœ‰actionè§¦å‘ç®—å­ä»»åŠ¡æ‰èƒ½æäº¤ï¼Œæ‰ä¼šæ‰§è¡Œrunjob</p><p>ç®—å­å¿…é¡»ä½œç”¨åœ¨RDDä¸Š</p></blockquote><h3 id="ï¼ˆ2ï¼‰Transformation-ç±»ç®—å­"><a href="#ï¼ˆ2ï¼‰Transformation-ç±»ç®—å­" class="headerlink" title="ï¼ˆ2ï¼‰Transformation ç±»ç®—å­"></a>ï¼ˆ2ï¼‰Transformation ç±»ç®—å­</h3><blockquote><p>:arrow_up_small: <strong>filter</strong><br>è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„è®°å½•æ•°ï¼Œtrue ä¿ç•™ï¼Œfalse è¿‡æ»¤æ‰ã€‚</p><p>ğŸ”¼ <strong>contains</strong></p><p>ä½œä¸ºæ¡ä»¶ï¼Œæ˜¯å¦åŒ…å«ï¼Œè¿”å›true|false</p><p>:arrow_up_small:<strong>map</strong><br>å°†ä¸€ä¸ª RDD ä¸­çš„æ¯ä¸ªæ•°æ®é¡¹ï¼Œé€šè¿‡ map ä¸­çš„å‡½æ•°æ˜ å°„å˜ä¸ºä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚<br>ç‰¹ç‚¹ï¼šè¾“å…¥ä¸€æ¡ï¼Œè¾“å‡ºä¸€æ¡æ•°æ®ã€‚</p><p>:arrow_up_small: <strong>flatMap</strong><br>å…ˆ map å flatã€‚ä¸ map ç±»ä¼¼ï¼Œæ¯ä¸ªè¾“å…¥é¡¹å¯ä»¥æ˜ å°„ä¸º 0 åˆ°å¤šä¸ªè¾“å‡ºé¡¹ã€‚</p><p>:arrow_up_small:<strong>sample</strong><br>éšæœºæŠ½æ ·ç®—å­ï¼Œæ ¹æ®ä¼ è¿›å»çš„å°æ•°æŒ‰æ¯”ä¾‹è¿›è¡Œï¼Œæœ‰æ”¾å›æˆ–è€…æ— æ”¾å›çš„æŠ½æ ·ã€‚</p><p>:arrow_up_small:<strong>reduceByKey</strong><br>å°†ç›¸åŒçš„ Key æ ¹æ®ç›¸åº”çš„é€»è¾‘è¿›è¡Œå¤„ç†ã€‚</p><p>:arrow_up_small:<strong>sortByKey/sortBy</strong><br>ä½œç”¨åœ¨ K,V æ ¼å¼çš„ RDD ä¸Šï¼Œå¯¹ key è¿›è¡Œå‡åºæˆ–è€…é™åºæ’åºã€‚</p></blockquote><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>()</span><br><span class="line">      </span><br><span class="line">    conf.setMaster(<span class="string">"local"</span>).setAppName(<span class="string">"WC"</span>)</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> context = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)  <span class="comment">//ç”¨äºäº†è§£é›†ç¾¤</span></span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> linesRDD :<span class="type">RDD</span>[<span class="type">String</span>] = sc.textFile(<span class="string">"./words.txt"</span>)</span><br><span class="line">      </span><br><span class="line"><span class="comment">//  lineRDD.filter(x=&gt;&#123;</span></span><br><span class="line"><span class="comment">//            x.contains("sh")</span></span><br><span class="line"><span class="comment">//        &#125;).foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  lineRDD.sample(true,0.2).foreach(println)</span></span><br><span class="line">     </span><br><span class="line"><span class="comment">//  lineRDD.map((_,1)).reduceByKey(_ + _).sortBy(_._2,false).foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  lineRDD.map((_,1)).sortByKey().foreach(println)</span></span><br><span class="line">         </span><br><span class="line">    <span class="keyword">val</span> wordRDD :<span class="type">RDD</span>[<span class="type">String</span>]  = linesRDD.flatMap&#123;lines =&gt; &#123;</span><br><span class="line">      lines.split(<span class="string">" "</span>)  <span class="comment">//åŒ¿åå‡½æ•°</span></span><br><span class="line">    &#125;&#125;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> <span class="type">KVRDD</span>:<span class="type">RDD</span>[(<span class="type">String</span>,<span class="type">Int</span>)] = wordRDD.map&#123; x =&gt; (x,<span class="number">1</span>) &#125;</span><br><span class="line"> </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> result:<span class="type">RDD</span>[(<span class="type">String</span>,<span class="type">Int</span>)] = <span class="type">KVRDD</span>.reduceByKey&#123;(a,b)=&gt; &#123;</span><br><span class="line">        println(<span class="string">"a:"</span>+a+<span class="string">",b:"</span>+b)</span><br><span class="line">        a+b    </span><br><span class="line">    &#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="5ã€Action-è¡ŒåŠ¨ç®—å­"><a href="#5ã€Action-è¡ŒåŠ¨ç®—å­" class="headerlink" title="5ã€Action è¡ŒåŠ¨ç®—å­"></a>5ã€Action è¡ŒåŠ¨ç®—å­</h2><h3 id="ï¼ˆ1ï¼‰æ¦‚å¿µ-1"><a href="#ï¼ˆ1ï¼‰æ¦‚å¿µ-1" class="headerlink" title="ï¼ˆ1ï¼‰æ¦‚å¿µ"></a>ï¼ˆ1ï¼‰æ¦‚å¿µ</h3><p>Action ç±»ç®—å­ä¹Ÿæ˜¯ä¸€ç±»ç®—å­ï¼ˆå‡½æ•°ï¼‰å«åšè¡ŒåŠ¨ç®—å­ï¼Œå¦‚foreach,collectï¼Œcount ç­‰ã€‚</p><p>Transformations ç±»ç®—å­æ˜¯å»¶è¿Ÿæ‰§è¡Œï¼ŒAction ç±»ç®—å­æ˜¯è§¦å‘æ‰§è¡Œï¼ˆç«‹å³ï¼‰ã€‚</p><blockquote><p>ä¸€ä¸ª application åº”ç”¨ç¨‹åºä¸­æœ‰å‡ ä¸ª Action ç±»ç®—å­æ‰§è¡Œï¼Œå°±æœ‰å‡ ä¸ª job è¿è¡Œã€‚</p></blockquote><h3 id="ï¼ˆ2ï¼‰Action-ç±»ç®—å­"><a href="#ï¼ˆ2ï¼‰Action-ç±»ç®—å­" class="headerlink" title="ï¼ˆ2ï¼‰Action ç±»ç®—å­"></a>ï¼ˆ2ï¼‰Action ç±»ç®—å­</h3><blockquote><p>:arrow_up_small: <strong>count</strong><br>è¿”å›æ•°æ®é›†ä¸­çš„å…ƒç´ æ•°ã€‚ä¼šåœ¨ç»“æœè®¡ç®—å®Œæˆåå›æ”¶åˆ° Driver ç«¯ã€‚<br>:arrow_up_small: <strong>take(n)</strong><br>è¿”å›ä¸€ä¸ªåŒ…å«æ•°æ®é›†å‰ n ä¸ªå…ƒç´ çš„é›†åˆã€‚<br>:arrow_up_small: <strong>first</strong><br>first=take(1),è¿”å›æ•°æ®é›†ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p><p>:arrow_up_small: <strong>foreach</strong><br>å¾ªç¯éå†æ•°æ®é›†ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œè¿è¡Œç›¸åº”çš„é€»è¾‘ã€‚<br>:arrow_up_small: <strong>collect</strong><br>å°†è®¡ç®—ç»“æœå›æ”¶åˆ° Driver ç«¯ã€‚</p></blockquote><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>()</span><br><span class="line">    conf.setMaster(<span class="string">"local"</span>).setAppName(<span class="string">"transf"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> context = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> lineADD = context.textFile(<span class="string">"./wc.txt"</span>)</span><br><span class="line">    <span class="keyword">val</span> wordADD = lineADD.flatMap(x=&gt;&#123;x.split(<span class="string">" "</span>)&#125;)</span><br><span class="line"></span><br><span class="line">   <span class="comment">// println(wordADD.count())</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//lineADDä¸­æ•°æ®å›æ”¶</span></span><br><span class="line">    <span class="keyword">val</span> arr= lineADD.collect()</span><br><span class="line">    arr.foreach(println)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  val takes: Array[String] = lineRDD.take(5)</span></span><br><span class="line"><span class="comment">//  takes.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  val str: String = lineRDD.first()</span></span><br><span class="line"><span class="comment">//  println(str)</span></span><br></pre></td></tr></table></figure><h2 id="WordCount"><a href="#WordCount" class="headerlink" title="WordCount"></a>WordCount</h2><h3 id="ä»¥ç”¨Javaç¼–å†™ä¸ºä¾‹"><a href="#ä»¥ç”¨Javaç¼–å†™ä¸ºä¾‹" class="headerlink" title="ä»¥ç”¨Javaç¼–å†™ä¸ºä¾‹"></a><code>ä»¥ç”¨Javaç¼–å†™ä¸ºä¾‹</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.shsxt.spark.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.SparkConf;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.api.java.JavaPairRDD;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.api.java.JavaRDD;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.api.java.JavaSparkContext;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.api.java.function.*;</span><br><span class="line"><span class="keyword">import</span> scala.Tuple2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        SparkConf conf = <span class="keyword">new</span> SparkConf();</span><br><span class="line"></span><br><span class="line">        conf.setMaster(<span class="string">"local"</span>).setAppName(<span class="string">"wc"</span>);</span><br><span class="line"></span><br><span class="line">        JavaSparkContext context = <span class="keyword">new</span> JavaSparkContext(conf);</span><br><span class="line"></span><br><span class="line">        JavaRDD&lt;String&gt; rdd = context.textFile(<span class="string">"./wc.txt"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> count = rdd.count();</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; collect = rdd.collect();</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; take = rdd.take(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        String first = rdd.first();</span><br><span class="line"></span><br><span class="line">        JavaRDD&lt;String&gt; wordRDD = rdd.flatMap(<span class="keyword">new</span> FlatMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Iterable&lt;String&gt; <span class="title">call</span><span class="params">(String line)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">                String[] split = line.split(<span class="string">" "</span>);</span><br><span class="line"></span><br><span class="line">                List&lt;String&gt; list = Arrays.asList(split);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> list;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        wordRDD.map(new Function&lt;String&gt;() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public String call(String v1) throws Exception &#123;</span></span><br><span class="line"><span class="comment">//                return null;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        JavaPairRDD&lt;String, Integer&gt; pairRDD = wordRDD.mapToPair(<span class="keyword">new</span> PairFunction&lt;String, String, Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Integer&gt; <span class="title">call</span><span class="params">(String word)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple2(word, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        JavaPairRDD&lt;String, Integer&gt; resultRDD = pairRDD.reduceByKey(<span class="keyword">new</span> Function2&lt;Integer, Integer, Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">(Integer v1, Integer v2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> v1 + v2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        JavaPairRDD&lt;Integer, String&gt; reverseRDD = resultRDD.mapToPair(<span class="keyword">new</span> PairFunction&lt;Tuple2&lt;String, Integer&gt;, Integer, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple2&lt;Integer, String&gt; <span class="title">call</span><span class="params">(Tuple2&lt;String, Integer&gt; tuple2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;&gt;(tuple2._2, tuple2._1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        JavaPairRDD&lt;Integer, String&gt; sortByKey = reverseRDD.sortByKey(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">        JavaPairRDD&lt;String, Integer&gt; result = sortByKey.mapToPair(<span class="keyword">new</span> PairFunction&lt;Tuple2&lt;Integer, String&gt;, String, Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Integer&gt; <span class="title">call</span><span class="params">(Tuple2&lt;Integer, String&gt; tuple2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;&gt;(tuple2._2, tuple2._1);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        result.foreach(<span class="keyword">new</span> VoidFunction&lt;Tuple2&lt;String, Integer&gt;&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Tuple2&lt;String, Integer&gt; tuple2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                System.out.println(tuple2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Spark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—å¼•æ“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Listæ–¹æ³•</title>
      <link href="/2019/02/16/List%E6%96%B9%E6%B3%95/"/>
      <url>/2019/02/16/List%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">+</span></span>(elem: <span class="type">A</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">å‰ç½®ä¸€ä¸ªå…ƒç´ åˆ—è¡¨</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> </span>::(x: <span class="type">A</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">åœ¨è¿™ä¸ªåˆ—è¡¨çš„å¼€å¤´æ·»åŠ çš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> </span>:::(prefix: <span class="type">List</span>[<span class="type">A</span>]): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">å¢åŠ äº†ä¸€ä¸ªç»™å®šåˆ—è¡¨ä¸­è¯¥åˆ—è¡¨å‰é¢çš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> </span>::(x: <span class="type">A</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">å¢åŠ äº†ä¸€ä¸ªå…ƒç´ xåœ¨åˆ—è¡¨çš„å¼€å¤´</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addString</span></span>(b: <span class="type">StringBuilder</span>): <span class="type">StringBuilder</span></span><br><span class="line">è¿½åŠ åˆ—è¡¨çš„ä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆå™¨çš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addString</span></span>(b: <span class="type">StringBuilder</span>, sep: <span class="type">String</span>): <span class="type">StringBuilder</span></span><br><span class="line">è¿½åŠ åˆ—è¡¨çš„ä½¿ç”¨åˆ†éš”å­—ç¬¦ä¸²ä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆå™¨çš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(n: <span class="type">Int</span>): <span class="type">A</span></span><br><span class="line">é€‰æ‹©é€šè¿‡å…¶åœ¨åˆ—è¡¨ä¸­ç´¢å¼•çš„å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">contains</span></span>(elem: <span class="type">Any</span>): <span class="type">Boolean</span></span><br><span class="line">æµ‹è¯•è¯¥åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«ä¸€ä¸ªç»™å®šå€¼ä½œä¸ºå…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copyToArray</span></span>(xs: <span class="type">Array</span>[<span class="type">A</span>], start: <span class="type">Int</span>, len: <span class="type">Int</span>): <span class="type">Unit</span></span><br><span class="line">åˆ—è¡¨çš„å‰¯æœ¬å…ƒä»¶é˜µåˆ—ã€‚å¡«å……ç»™å®šçš„æ•°ç»„xsä¸æ­¤åˆ—è¡¨ä¸­æœ€å¤šlenä¸ªå…ƒç´ ï¼Œåœ¨ä½ç½®å¼€å§‹ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">distinct</span></span>: <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">å»ºç«‹ä»åˆ—è¡¨ä¸­æ²¡æœ‰ä»»ä½•é‡å¤çš„å…ƒç´ çš„æ–°åˆ—è¡¨ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop</span></span>(n: <span class="type">Int</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›é™¤äº†ç¬¬nä¸ªçš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropRight</span></span>(n: <span class="type">Int</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›é™¤äº†æœ€åçš„nä¸ªçš„å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropWhile</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">ä¸¢å¼ƒæ»¡è¶³è°“è¯çš„å…ƒç´ æœ€é•¿å‰ç¼€ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">endsWith</span></span>[<span class="type">B</span>](that: <span class="type">Seq</span>[<span class="type">B</span>]): <span class="type">Boolean</span></span><br><span class="line">æµ‹è¯•åˆ—è¡¨æ˜¯å¦ä½¿ç”¨ç»™å®šåºåˆ—ç»“æŸã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">equals</span></span>(that: <span class="type">Any</span>): <span class="type">Boolean</span></span><br><span class="line">equalsæ–¹æ³•çš„ä»»æ„åºåˆ—ã€‚æ¯”è¾ƒè¯¥åºåˆ—åˆ°æŸäº›å…¶ä»–å¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exists</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Boolean</span></span><br><span class="line">æµ‹è¯•è°“è¯æ˜¯å¦æŒæœ‰ä¸€äº›åˆ—è¡¨çš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›åˆ—è¡¨æ»¡è¶³è°“è¯çš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forall</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Boolean</span></span><br><span class="line">æµ‹è¯•è°“è¯æ˜¯å¦æŒæœ‰è¯¥åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreach</span></span>(f: (<span class="type">A</span>) =&gt; <span class="type">Unit</span>): <span class="type">Unit</span></span><br><span class="line">åº”ç”¨ä¸€ä¸ªå‡½æ•°fä»¥åˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">head</span></span>: <span class="type">A</span></span><br><span class="line">é€‰æ‹©åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">indexOf</span></span>(elem: <span class="type">A</span>, from: <span class="type">Int</span>): <span class="type">Int</span></span><br><span class="line">ç»è¿‡æˆ–åœ¨æŸäº›èµ·å§‹ç´¢å¼•æŸ¥æ‰¾åˆ—è¡¨ä¸­çš„ä¸€äº›å€¼ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span></span>: <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›é™¤äº†æœ€åçš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">intersect</span></span>(that: <span class="type">Seq</span>[<span class="type">A</span>]): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è®¡ç®—åˆ—è¡¨å’Œå¦ä¸€åºåˆ—ä¹‹é—´çš„å¤šé‡é›†äº¤é›†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isEmpty</span></span>: <span class="type">Boolean</span></span><br><span class="line">æµ‹è¯•åˆ—è¡¨æ˜¯å¦ä¸ºç©º</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">iterator</span></span>: <span class="type">Iterator</span>[<span class="type">A</span>]</span><br><span class="line">åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ä¸­åŒ…å«çš„å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">last</span></span>: <span class="type">A</span></span><br><span class="line">è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lastIndexOf</span></span>(elem: <span class="type">A</span>, end: <span class="type">Int</span>): <span class="type">Int</span></span><br><span class="line">ä¹‹å‰æˆ–åœ¨ä¸€ä¸ªç»™å®šçš„æœ€ç»ˆæŒ‡æ•°æŸ¥æ‰¾çš„åˆ—è¡¨ä¸­çš„ä¸€äº›å€¼æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">length</span></span>: <span class="type">Int</span></span><br><span class="line">è¿”å›åˆ—è¡¨çš„é•¿åº¦</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">map</span></span>[<span class="type">B</span>](f: (<span class="type">A</span>) =&gt; <span class="type">B</span>): <span class="type">List</span>[<span class="type">B</span>]</span><br><span class="line">é€šè¿‡åº”ç”¨å‡½æ•°ä»¥gè¿™ä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ æ„å»ºä¸€ä¸ªæ–°çš„é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max</span></span>: <span class="type">A</span></span><br><span class="line">æŸ¥æ‰¾æœ€å¤§çš„å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">min</span></span>: <span class="type">A</span></span><br><span class="line">æŸ¥æ‰¾æœ€å°å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkString</span></span>: <span class="type">String</span></span><br><span class="line">æ˜¾ç¤ºåˆ—è¡¨çš„å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkString</span></span>(sep: <span class="type">String</span>): <span class="type">String</span></span><br><span class="line">æ˜¾ç¤ºçš„åˆ—è¡¨ä¸­çš„å­—ç¬¦ä¸²ä¸­ä½¿ç”¨åˆ†éš”ä¸²çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse</span></span>: <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›æ–°åˆ—è¡¨ï¼Œåœ¨ç›¸åçš„é¡ºåºå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sorted</span></span>[<span class="type">B</span> &gt;: <span class="type">A</span>]: <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">æ ¹æ®æ’åºå¯¹åˆ—è¡¨è¿›è¡Œæ’åº</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">startsWith</span></span>[<span class="type">B</span>](that: <span class="type">Seq</span>[<span class="type">B</span>], offset: <span class="type">Int</span>): <span class="type">Boolean</span></span><br><span class="line">æµ‹è¯•è¯¥åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«ç»™å®šçš„ç´¢å¼•å¤„çš„ç»™å®šçš„åºåˆ—</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>: <span class="type">A</span></span><br><span class="line">æ¦‚æ‹¬è¿™ä¸ªé›†åˆçš„å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tail</span></span>: <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›é™¤äº†ç¬¬ä¸€çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">take</span></span>(n: <span class="type">Int</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›å‰nä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeRight</span></span>(n: <span class="type">Int</span>): <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›æœ€ånä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toArray</span></span>: <span class="type">Array</span>[<span class="type">A</span>]</span><br><span class="line">åˆ—è¡¨ä»¥ä¸€ä¸ªæ•°ç»„å˜æ¢</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toBuffer</span></span>[<span class="type">B</span> &gt;: <span class="type">A</span>]: <span class="type">Buffer</span>[<span class="type">B</span>]</span><br><span class="line">åˆ—è¡¨ä»¥ä¸€ä¸ªå¯å˜ç¼“å†²å™¨è½¬æ¢</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toMap</span></span>[<span class="type">T</span>, <span class="type">U</span>]: <span class="type">Map</span>[<span class="type">T</span>, <span class="type">U</span>]</span><br><span class="line">æ­¤åˆ—è¡¨çš„æ˜ å°„è½¬æ¢</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toSeq</span></span>: <span class="type">Seq</span>[<span class="type">A</span>]</span><br><span class="line">åˆ—è¡¨çš„åºåˆ—è½¬æ¢</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toSet</span></span>[<span class="type">B</span> &gt;: <span class="type">A</span>]: <span class="type">Set</span>[<span class="type">B</span>]</span><br><span class="line">åˆ—è¡¨åˆ°é›†åˆå˜æ¢</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toString</span></span>(): <span class="type">String</span></span><br><span class="line">åˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> List </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mapæ–¹æ³•</title>
      <link href="/2019/02/16/Map%E6%96%B9%E6%B3%95/"/>
      <url>/2019/02/16/Map%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Scala</span> <span class="type">Map</span> æ–¹æ³•</span><br><span class="line">ä¸‹è¡¨åˆ—å‡ºäº† <span class="type">Scala</span> <span class="type">Map</span> å¸¸ç”¨çš„æ–¹æ³•ï¼š</span><br><span class="line">åºå·æ–¹æ³•åŠæè¿°</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">++</span></span>(xs: <span class="type">Map</span>[(<span class="type">A</span>, <span class="type">B</span>)]): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›ä¸€ä¸ªæ–°çš„ <span class="type">Map</span>ï¼Œæ–°çš„ <span class="type">Map</span> xs ç»„æˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">-</span></span>(elem1: <span class="type">A</span>, elem2: <span class="type">A</span>, elems: <span class="type">A</span>*): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›ä¸€ä¸ªæ–°çš„ <span class="type">Map</span>, ç§»é™¤ key ä¸º elem1, elem2 æˆ–å…¶ä»– elemsã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">--</span></span>(xs: <span class="type">GTO</span>[<span class="type">A</span>]): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›ä¸€ä¸ªæ–°çš„ <span class="type">Map</span>, ç§»é™¤ xs å¯¹è±¡ä¸­å¯¹åº”çš„ key</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span></span>(key: <span class="type">A</span>): <span class="type">Option</span>[<span class="type">B</span>]</span><br><span class="line">è¿”å›æŒ‡å®š key çš„å€¼</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">iterator</span></span>: <span class="type">Iterator</span>[(<span class="type">A</span>, <span class="type">B</span>)]</span><br><span class="line">åˆ›å»ºæ–°çš„è¿­ä»£å™¨ï¼Œå¹¶è¾“å‡º key/value å¯¹</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addString</span></span>(b: <span class="type">StringBuilder</span>): <span class="type">StringBuilder</span></span><br><span class="line">å°† <span class="type">Map</span> ä¸­çš„æ‰€æœ‰å…ƒç´ é™„åŠ åˆ°<span class="type">StringBuilder</span>ï¼Œå¯åŠ å…¥åˆ†éš”ç¬¦</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addString</span></span>(b: <span class="type">StringBuilder</span>, sep: <span class="type">String</span>): <span class="type">StringBuilder</span></span><br><span class="line">å°† <span class="type">Map</span> ä¸­çš„æ‰€æœ‰å…ƒç´ é™„åŠ åˆ°<span class="type">StringBuilder</span>ï¼Œå¯åŠ å…¥åˆ†éš”ç¬¦</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(key: <span class="type">A</span>): <span class="type">B</span></span><br><span class="line">è¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å› <span class="type">Map</span> çš„é»˜è®¤æ–¹æ³•</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clone</span></span>(): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">ä»ä¸€ä¸ª <span class="type">Map</span> å¤åˆ¶åˆ°å¦ä¸€ä¸ª <span class="type">Map</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">contains</span></span>(key: <span class="type">A</span>): <span class="type">Boolean</span></span><br><span class="line">å¦‚æœ <span class="type">Map</span> ä¸­å­˜åœ¨æŒ‡å®š keyï¼Œè¿”å› <span class="literal">true</span>ï¼Œå¦åˆ™è¿”å› <span class="literal">false</span>ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copyToArray</span></span>(xs: <span class="type">Array</span>[(<span class="type">A</span>, <span class="type">B</span>)]): <span class="type">Unit</span></span><br><span class="line">å¤åˆ¶é›†åˆåˆ°æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span></span>(p: ((<span class="type">A</span>, <span class="type">B</span>)) =&gt; <span class="type">Boolean</span>): <span class="type">Int</span></span><br><span class="line">è®¡ç®—æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„é›†åˆå…ƒç´ æ•°é‡</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">default</span></span>(key: <span class="type">A</span>): <span class="type">B</span></span><br><span class="line">å®šä¹‰ <span class="type">Map</span> çš„é»˜è®¤å€¼ï¼Œåœ¨ key ä¸å­˜åœ¨æ—¶è¿”å›ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop</span></span>(n: <span class="type">Int</span>): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›ä¸¢å¼ƒå‰nä¸ªå…ƒç´ æ–°é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropRight</span></span>(n: <span class="type">Int</span>): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›ä¸¢å¼ƒæœ€ånä¸ªå…ƒç´ æ–°é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropWhile</span></span>(p: ((<span class="type">A</span>, <span class="type">B</span>)) =&gt; <span class="type">Boolean</span>): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">ä»å·¦å‘å³ä¸¢å¼ƒå…ƒç´ ï¼Œç›´åˆ°æ¡ä»¶pä¸æˆç«‹</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">empty</span></span>: <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›ç›¸åŒç±»å‹çš„ç©º <span class="type">Map</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">equals</span></span>(that: <span class="type">Any</span>): <span class="type">Boolean</span></span><br><span class="line">å¦‚æœä¸¤ä¸ª <span class="type">Map</span> ç›¸ç­‰(key/value å‡ç›¸ç­‰)ï¼Œè¿”å›<span class="literal">true</span>ï¼Œå¦åˆ™è¿”å›<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exists</span></span>(p: ((<span class="type">A</span>, <span class="type">B</span>)) =&gt; <span class="type">Boolean</span>): <span class="type">Boolean</span></span><br><span class="line">åˆ¤æ–­é›†åˆä¸­æŒ‡å®šæ¡ä»¶çš„å…ƒç´ æ˜¯å¦å­˜åœ¨</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>(p: ((<span class="type">A</span>, <span class="type">B</span>))=&gt; <span class="type">Boolean</span>): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„æ‰€æœ‰é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filterKeys</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›ç¬¦åˆæŒ‡å®šæ¡ä»¶çš„çš„ä¸å¯å˜ <span class="type">Map</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find</span></span>(p: ((<span class="type">A</span>, <span class="type">B</span>)) =&gt; <span class="type">Boolean</span>): <span class="type">Option</span>[(<span class="type">A</span>, <span class="type">B</span>)]</span><br><span class="line">æŸ¥æ‰¾é›†åˆä¸­æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreach</span></span>(f: ((<span class="type">A</span>, <span class="type">B</span>)) =&gt; <span class="type">Unit</span>): <span class="type">Unit</span></span><br><span class="line">å°†å‡½æ•°åº”ç”¨åˆ°é›†åˆçš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span></span>: <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›æ‰€æœ‰å…ƒç´ ï¼Œé™¤äº†æœ€åä¸€ä¸ª</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isEmpty</span></span>: <span class="type">Boolean</span></span><br><span class="line">æ£€æµ‹ <span class="type">Map</span> æ˜¯å¦ä¸ºç©º</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keys</span></span>: <span class="type">Iterable</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›æ‰€æœ‰çš„key/p&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">last</span></span>: (<span class="type">A</span>, <span class="type">B</span>)</span><br><span class="line">è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max</span></span>: (<span class="type">A</span>, <span class="type">B</span>)</span><br><span class="line">æŸ¥æ‰¾æœ€å¤§å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">min</span></span>: (<span class="type">A</span>, <span class="type">B</span>)</span><br><span class="line">æŸ¥æ‰¾æœ€å°å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkString</span></span>: <span class="type">String</span></span><br><span class="line">é›†åˆæ‰€æœ‰å…ƒç´ ä½œä¸ºå­—ç¬¦ä¸²æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">product</span></span>: (<span class="type">A</span>, <span class="type">B</span>)</span><br><span class="line">è¿”å›é›†åˆä¸­æ•°å­—å…ƒç´ çš„ç§¯ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove</span></span>(key: <span class="type">A</span>): <span class="type">Option</span>[<span class="type">B</span>]</span><br><span class="line">ç§»é™¤æŒ‡å®š key</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">retain</span></span>(p: (<span class="type">A</span>, <span class="type">B</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Map</span>.<span class="keyword">this</span>.<span class="keyword">type</span></span><br><span class="line">å¦‚æœç¬¦åˆæ»¡è¶³æ¡ä»¶çš„è¿”å› <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">size</span></span>: <span class="type">Int</span></span><br><span class="line">è¿”å› <span class="type">Map</span> å…ƒç´ çš„ä¸ªæ•°</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>: (<span class="type">A</span>, <span class="type">B</span>)</span><br><span class="line">è¿”å›é›†åˆä¸­æ‰€æœ‰æ•°å­—å…ƒç´ ä¹‹å’Œ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tail</span></span>: <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›ä¸€ä¸ªé›†åˆä¸­é™¤äº†ç¬¬ä¸€å…ƒç´ ä¹‹å¤–çš„å…¶ä»–å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">take</span></span>(n: <span class="type">Int</span>): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›å‰ n ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeRight</span></span>(n: <span class="type">Int</span>): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›å n ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeWhile</span></span>(p: ((<span class="type">A</span>, <span class="type">B</span>)) =&gt; <span class="type">Boolean</span>): <span class="type">Map</span>[<span class="type">A</span>, <span class="type">B</span>]</span><br><span class="line">è¿”å›æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toArray</span></span>: <span class="type">Array</span>[(<span class="type">A</span>, <span class="type">B</span>)]</span><br><span class="line">é›†åˆè½¬æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toBuffer</span></span>[<span class="type">B</span> &gt;: <span class="type">A</span>]: <span class="type">Buffer</span>[<span class="type">B</span>]</span><br><span class="line">è¿”å›ç¼“å†²åŒºï¼ŒåŒ…å«äº† <span class="type">Map</span> çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toList</span></span>: <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å› <span class="type">List</span>ï¼ŒåŒ…å«äº† <span class="type">Map</span> çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toSeq</span></span>: <span class="type">Seq</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å› <span class="type">Seq</span>ï¼ŒåŒ…å«äº† <span class="type">Map</span> çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toSet</span></span>: <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å› <span class="type">Set</span>ï¼ŒåŒ…å«äº† <span class="type">Map</span> çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toString</span></span>(): <span class="type">String</span></span><br><span class="line">è¿”å›å­—ç¬¦ä¸²å¯¹è±¡</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Map </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Setæ–¹æ³•</title>
      <link href="/2019/02/16/Set%E6%96%B9%E6%B3%95/"/>
      <url>/2019/02/16/Set%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Scala</span> <span class="type">Set</span> å¸¸ç”¨æ–¹æ³•</span><br><span class="line">ä¸‹è¡¨åˆ—å‡ºäº† <span class="type">Scala</span> <span class="type">Set</span> å¸¸ç”¨çš„æ–¹æ³•ï¼š</span><br><span class="line">åºå·æ–¹æ³•åŠæè¿°</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">+</span></span>(elem: <span class="type">A</span>): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">ä¸ºé›†åˆæ·»åŠ æ–°å…ƒç´ ï¼Œxå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆï¼Œé™¤éå…ƒç´ å·²å­˜åœ¨</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">-</span></span>(elem: <span class="type">A</span>): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">ç§»é™¤é›†åˆä¸­çš„å…ƒç´ ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">contains</span></span>(elem: <span class="type">A</span>): <span class="type">Boolean</span></span><br><span class="line">å¦‚æœå…ƒç´ åœ¨é›†åˆä¸­å­˜åœ¨ï¼Œè¿”å› <span class="literal">true</span>ï¼Œå¦åˆ™è¿”å› <span class="literal">false</span>ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">&amp;</span></span>(that: <span class="type">Set</span>[<span class="type">A</span>]): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›ä¸¤ä¸ªé›†åˆçš„äº¤é›†</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">&amp;~</span></span>(that: <span class="type">Set</span>[<span class="type">A</span>]): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›ä¸¤ä¸ªé›†åˆçš„å·®é›†</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">+</span></span>(elem1: <span class="type">A</span>, elem2: <span class="type">A</span>, elems: <span class="type">A</span>*): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">é€šè¿‡æ·»åŠ ä¼ å…¥æŒ‡å®šé›†åˆçš„å…ƒç´ åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸å¯å˜é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">++</span></span>(elems: <span class="type">A</span>): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">åˆå¹¶ä¸¤ä¸ªé›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">-</span></span>(elem1: <span class="type">A</span>, elem2: <span class="type">A</span>, elems: <span class="type">A</span>*): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">é€šè¿‡ç§»é™¤ä¼ å…¥æŒ‡å®šé›†åˆçš„å…ƒç´ åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸å¯å˜é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addString</span></span>(b: <span class="type">StringBuilder</span>): <span class="type">StringBuilder</span></span><br><span class="line">å°†ä¸å¯å˜é›†åˆçš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°å­—ç¬¦ä¸²ç¼“å†²åŒº</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addString</span></span>(b: <span class="type">StringBuilder</span>, sep: <span class="type">String</span>): <span class="type">StringBuilder</span></span><br><span class="line">å°†ä¸å¯å˜é›†åˆçš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°å­—ç¬¦ä¸²ç¼“å†²åŒºï¼Œå¹¶ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(elem: <span class="type">A</span>)</span><br><span class="line">æ£€æµ‹é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Int</span></span><br><span class="line">è®¡ç®—æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„é›†åˆå…ƒç´ ä¸ªæ•°</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copyToArray</span></span>(xs: <span class="type">Array</span>[<span class="type">A</span>], start: <span class="type">Int</span>, len: <span class="type">Int</span>): <span class="type">Unit</span></span><br><span class="line">å¤åˆ¶ä¸å¯å˜é›†åˆå…ƒç´ åˆ°æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">diff</span></span>(that: <span class="type">Set</span>[<span class="type">A</span>]): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">æ¯”è¾ƒä¸¤ä¸ªé›†åˆçš„å·®é›†</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop</span></span>(n: <span class="type">Int</span>): <span class="type">Set</span>[<span class="type">A</span>]]</span><br><span class="line">è¿”å›ä¸¢å¼ƒå‰nä¸ªå…ƒç´ æ–°é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropRight</span></span>(n: <span class="type">Int</span>): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›ä¸¢å¼ƒæœ€ånä¸ªå…ƒç´ æ–°é›†åˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropWhile</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">ä»å·¦å‘å³ä¸¢å¼ƒå…ƒç´ ï¼Œç›´åˆ°æ¡ä»¶pä¸æˆç«‹</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">equals</span></span>(that: <span class="type">Any</span>): <span class="type">Boolean</span></span><br><span class="line">equals æ–¹æ³•å¯ç”¨äºä»»æ„åºåˆ—ã€‚ç”¨äºæ¯”è¾ƒç³»åˆ—æ˜¯å¦ç›¸ç­‰ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exists</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Boolean</span></span><br><span class="line">åˆ¤æ–­ä¸å¯å˜é›†åˆä¸­æŒ‡å®šæ¡ä»¶çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¾“å‡ºç¬¦åˆæŒ‡å®šæ¡ä»¶çš„æ‰€æœ‰ä¸å¯å˜é›†åˆå…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Option</span>[<span class="type">A</span>]</span><br><span class="line">æŸ¥æ‰¾ä¸å¯å˜é›†åˆä¸­æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forall</span></span>(p: (<span class="type">A</span>) =&gt; <span class="type">Boolean</span>): <span class="type">Boolean</span></span><br><span class="line">æŸ¥æ‰¾ä¸å¯å˜é›†åˆä¸­æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreach</span></span>(f: (<span class="type">A</span>) =&gt; <span class="type">Unit</span>): <span class="type">Unit</span></span><br><span class="line">å°†å‡½æ•°åº”ç”¨åˆ°ä¸å¯å˜é›†åˆçš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">head</span></span>: <span class="type">A</span></span><br><span class="line">è·å–ä¸å¯å˜é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span></span>: <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›æ‰€æœ‰å…ƒç´ ï¼Œé™¤äº†æœ€åä¸€ä¸ª</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">intersect</span></span>(that: <span class="type">Set</span>[<span class="type">A</span>]): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è®¡ç®—ä¸¤ä¸ªé›†åˆçš„äº¤é›†</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isEmpty</span></span>: <span class="type">Boolean</span></span><br><span class="line">åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">iterator</span></span>: <span class="type">Iterator</span>[<span class="type">A</span>]</span><br><span class="line">åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨æ¥è¿­ä»£å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">last</span></span>: <span class="type">A</span></span><br><span class="line">è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">map</span></span>[<span class="type">B</span>](f: (<span class="type">A</span>) =&gt; <span class="type">B</span>): immutable.<span class="type">Set</span>[<span class="type">B</span>]</span><br><span class="line">é€šè¿‡ç»™å®šçš„æ–¹æ³•å°†æ‰€æœ‰å…ƒç´ é‡æ–°è®¡ç®—</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max</span></span>: <span class="type">A</span></span><br><span class="line">æŸ¥æ‰¾æœ€å¤§å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">min</span></span>: <span class="type">A</span></span><br><span class="line">æŸ¥æ‰¾æœ€å°å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkString</span></span>: <span class="type">String</span></span><br><span class="line">é›†åˆæ‰€æœ‰å…ƒç´ ä½œä¸ºå­—ç¬¦ä¸²æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkString</span></span>(sep: <span class="type">String</span>): <span class="type">String</span></span><br><span class="line">ä½¿ç”¨åˆ†éš”ç¬¦å°†é›†åˆæ‰€æœ‰å…ƒç´ ä½œä¸ºå­—ç¬¦ä¸²æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">product</span></span>: <span class="type">A</span></span><br><span class="line">è¿”å›ä¸å¯å˜é›†åˆä¸­æ•°å­—å…ƒç´ çš„ç§¯ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">size</span></span>: <span class="type">Int</span></span><br><span class="line">è¿”å›ä¸å¯å˜é›†åˆå…ƒç´ çš„æ•°é‡</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">splitAt</span></span>(n: <span class="type">Int</span>): (<span class="type">Set</span>[<span class="type">A</span>], <span class="type">Set</span>[<span class="type">A</span>])</span><br><span class="line">æŠŠä¸å¯å˜é›†åˆæ‹†åˆ†ä¸ºä¸¤ä¸ªå®¹å™¨ï¼Œç¬¬ä¸€ä¸ªç”±å‰ n ä¸ªå…ƒç´ ç»„æˆï¼Œç¬¬äºŒä¸ªç”±å‰©ä¸‹çš„å…ƒç´ ç»„æˆ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">subsetOf</span></span>(that: <span class="type">Set</span>[<span class="type">A</span>]): <span class="type">Boolean</span></span><br><span class="line">å¦‚æœé›†åˆ<span class="type">A</span>ä¸­å«æœ‰å­é›†<span class="type">B</span>è¿”å› <span class="literal">true</span>ï¼Œå¦åˆ™è¿”å›<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>: <span class="type">A</span></span><br><span class="line">è¿”å›ä¸å¯å˜é›†åˆä¸­æ‰€æœ‰æ•°å­—å…ƒç´ ä¹‹å’Œ</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tail</span></span>: <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›ä¸€ä¸ªä¸å¯å˜é›†åˆä¸­é™¤äº†ç¬¬ä¸€å…ƒç´ ä¹‹å¤–çš„å…¶ä»–å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">take</span></span>(n: <span class="type">Int</span>): <span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›å‰ n ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeRight</span></span>(n: <span class="type">Int</span>):<span class="type">Set</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å›å n ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toArray</span></span>: <span class="type">Array</span>[<span class="type">A</span>]</span><br><span class="line">å°†é›†åˆè½¬æ¢ä¸ºæ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toBuffer</span></span>[<span class="type">B</span> &gt;: <span class="type">A</span>]: <span class="type">Buffer</span>[<span class="type">B</span>]</span><br><span class="line">è¿”å›ç¼“å†²åŒºï¼ŒåŒ…å«äº†ä¸å¯å˜é›†åˆçš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toList</span></span>: <span class="type">List</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å› <span class="type">List</span>ï¼ŒåŒ…å«äº†ä¸å¯å˜é›†åˆçš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toMap</span></span>[<span class="type">T</span>, <span class="type">U</span>]: <span class="type">Map</span>[<span class="type">T</span>, <span class="type">U</span>]</span><br><span class="line">è¿”å› <span class="type">Map</span>ï¼ŒåŒ…å«äº†ä¸å¯å˜é›†åˆçš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toSeq</span></span>: <span class="type">Seq</span>[<span class="type">A</span>]</span><br><span class="line">è¿”å› <span class="type">Seq</span>ï¼ŒåŒ…å«äº†ä¸å¯å˜é›†åˆçš„æ‰€æœ‰å…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toString</span></span>(): <span class="type">String</span></span><br><span class="line">è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥å¯¹è±¡æ¥è¡¨ç¤º</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Set </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„æ–¹æ³•</title>
      <link href="/2019/02/16/%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%20/"/>
      <url>/2019/02/16/%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%20/</url>
      
        <content type="html"><![CDATA[<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">åºå·æ–¹æ³•å’Œæè¿°</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>( x: <span class="type">T</span>, xs: <span class="type">T</span>* ): <span class="type">Array</span>[<span class="type">T</span>]</span><br><span class="line">åˆ›å»ºæŒ‡å®šå¯¹è±¡ <span class="type">T</span> çš„æ•°ç»„, <span class="type">T</span> çš„å€¼å¯ä»¥æ˜¯ <span class="type">Unit</span>, <span class="type">Double</span>, <span class="type">Float</span>, <span class="type">Long</span>, <span class="type">Int</span>, <span class="type">Char</span>, <span class="type">Short</span>, <span class="type">Byte</span>, <span class="type">Boolean</span>ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">concat</span></span>[<span class="type">T</span>]( xss: <span class="type">Array</span>[<span class="type">T</span>]* ): <span class="type">Array</span>[<span class="type">T</span>]</span><br><span class="line">åˆå¹¶æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copy</span></span>( src: <span class="type">AnyRef</span>, srcPos: <span class="type">Int</span>, dest: <span class="type">AnyRef</span>, destPos: <span class="type">Int</span>, length: <span class="type">Int</span> ): <span class="type">Unit</span></span><br><span class="line">å¤åˆ¶ä¸€ä¸ªæ•°ç»„åˆ°å¦ä¸€ä¸ªæ•°ç»„ä¸Šã€‚ç›¸ç­‰äº <span class="type">Java</span><span class="symbol">'s</span> <span class="type">System</span>.arraycopy(src, srcPos, dest, destPos, length)ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">empty</span></span>[<span class="type">T</span>]: <span class="type">Array</span>[<span class="type">T</span>]</span><br><span class="line">è¿”å›é•¿åº¦ä¸º <span class="number">0</span> çš„æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">iterate</span></span>[<span class="type">T</span>]( start: <span class="type">T</span>, len: <span class="type">Int</span> )( f: (<span class="type">T</span>) =&gt; <span class="type">T</span> ): <span class="type">Array</span>[<span class="type">T</span>]</span><br><span class="line">è¿”å›æŒ‡å®šé•¿åº¦æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ ä¸ºæŒ‡å®šå‡½æ•°çš„è¿”å›å€¼ã€‚</span><br><span class="line">ä»¥ä¸Šå®ä¾‹æ•°ç»„åˆå§‹å€¼ä¸º <span class="number">0</span>ï¼Œé•¿åº¦ä¸º <span class="number">3</span>ï¼Œè®¡ç®—å‡½æ•°ä¸ºa=&gt;a+<span class="number">1</span>ï¼š</span><br><span class="line">scala&gt; <span class="type">Array</span>.iterate(<span class="number">0</span>,<span class="number">3</span>)(a=&gt;a+<span class="number">1</span>)</span><br><span class="line">res1: <span class="type">Array</span>[<span class="type">Int</span>] = <span class="type">Array</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fill</span></span>[<span class="type">T</span>]( n: <span class="type">Int</span> )(elem: =&gt; <span class="type">T</span>): <span class="type">Array</span>[<span class="type">T</span>]</span><br><span class="line">è¿”å›æ•°ç»„ï¼Œé•¿åº¦ä¸ºç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šï¼ŒåŒæ—¶æ¯ä¸ªå…ƒç´ ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°è¿›è¡Œå¡«å……ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fill</span></span>[<span class="type">T</span>]( n1: <span class="type">Int</span>, n2: <span class="type">Int</span> )( elem: =&gt; <span class="type">T</span> ): <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">T</span>]]</span><br><span class="line">è¿”å›äºŒæ•°ç»„ï¼Œé•¿åº¦ä¸ºç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šï¼ŒåŒæ—¶æ¯ä¸ªå…ƒç´ ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°è¿›è¡Œå¡«å……ã€‚</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ofDim</span></span>[<span class="type">T</span>]( n1: <span class="type">Int</span> ): <span class="type">Array</span>[<span class="type">T</span>]</span><br><span class="line">åˆ›å»ºæŒ‡å®šé•¿åº¦çš„æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ofDim</span></span>[<span class="type">T</span>]( n1: <span class="type">Int</span>, n2: <span class="type">Int</span> ): <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">T</span>]]</span><br><span class="line">åˆ›å»ºäºŒç»´æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ofDim</span></span>[<span class="type">T</span>]( n1: <span class="type">Int</span>, n2: <span class="type">Int</span>, n3: <span class="type">Int</span> ): <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">Array</span>[<span class="type">T</span>]]]</span><br><span class="line">åˆ›å»ºä¸‰ç»´æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">range</span></span>( start: <span class="type">Int</span>, end: <span class="type">Int</span>, step: <span class="type">Int</span> ): <span class="type">Array</span>[<span class="type">Int</span>]</span><br><span class="line">åˆ›å»ºæŒ‡å®šåŒºé—´å†…çš„æ•°ç»„ï¼Œstep ä¸ºæ¯ä¸ªå…ƒç´ é—´çš„æ­¥é•¿</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">range</span></span>( start: <span class="type">Int</span>, end: <span class="type">Int</span> ): <span class="type">Array</span>[<span class="type">Int</span>]</span><br><span class="line">åˆ›å»ºæŒ‡å®šåŒºé—´å†…çš„æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tabulate</span></span>[<span class="type">T</span>]( n: <span class="type">Int</span> )(f: (<span class="type">Int</span>)=&gt; <span class="type">T</span>): <span class="type">Array</span>[<span class="type">T</span>]</span><br><span class="line">è¿”å›æŒ‡å®šé•¿åº¦æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ ä¸ºæŒ‡å®šå‡½æ•°çš„è¿”å›å€¼ï¼Œé»˜è®¤ä» <span class="number">0</span> å¼€å§‹ã€‚</span><br><span class="line">ä»¥ä¸Šå®ä¾‹è¿”å› <span class="number">3</span> ä¸ªå…ƒç´ ï¼š</span><br><span class="line">scala&gt; <span class="type">Array</span>.tabulate(<span class="number">3</span>)(a =&gt; a + <span class="number">5</span>)</span><br><span class="line">res0: <span class="type">Array</span>[<span class="type">Int</span>] = <span class="type">Array</span>(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tabulate</span></span>[<span class="type">T</span>]( n1: <span class="type">Int</span>, n2: <span class="type">Int</span> )( f: (<span class="type">Int</span>, <span class="type">Int</span> ) =&gt; <span class="type">T</span>): <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">T</span>]]</span><br><span class="line">è¿”å›æŒ‡å®šé•¿åº¦çš„äºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ ä¸ºæŒ‡å®šå‡½æ•°çš„è¿”å›å€¼ï¼Œé»˜è®¤ä» <span class="number">0</span> å¼€å§‹ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Array </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>String æ–¹æ³•</title>
      <link href="/2019/02/16/String%E6%96%B9%E6%B3%95/"/>
      <url>/2019/02/16/String%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> æ–¹æ³•</span><br><span class="line"></span><br><span class="line">char charAt(int index)</span><br><span class="line">è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦  ä»<span class="number">0</span>å¼€å§‹</span><br><span class="line"></span><br><span class="line">int compareTo(<span class="type">Object</span> o)</span><br><span class="line">æ¯”è¾ƒå­—ç¬¦ä¸²ä¸å¯¹è±¡</span><br><span class="line"></span><br><span class="line">int compareTo(<span class="type">String</span> anotherString)</span><br><span class="line">æŒ‰å­—å…¸é¡ºåºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">int compareToIgnoreCase(<span class="type">String</span> str)</span><br><span class="line">æŒ‰å­—å…¸é¡ºåºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä¸è€ƒè™‘å¤§å°å†™</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> concat(<span class="type">String</span> str)</span><br><span class="line">å°†æŒ‡å®šå­—ç¬¦ä¸²è¿æ¥åˆ°æ­¤å­—ç¬¦ä¸²çš„ç»“å°¾</span><br><span class="line"></span><br><span class="line">boolean contentEquals(<span class="type">StringBuffer</span> sb)</span><br><span class="line">å°†æ­¤å­—ç¬¦ä¸²ä¸æŒ‡å®šçš„ <span class="type">StringBuffer</span> æ¯”è¾ƒã€‚</span><br><span class="line"></span><br><span class="line">static <span class="type">String</span> copyValueOf(char[] data)</span><br><span class="line">è¿”å›æŒ‡å®šæ•°ç»„ä¸­è¡¨ç¤ºè¯¥å­—ç¬¦åºåˆ—çš„ <span class="type">String</span></span><br><span class="line"></span><br><span class="line">static <span class="type">String</span> copyValueOf(char[] data, int offset, int count)</span><br><span class="line">è¿”å›æŒ‡å®šæ•°ç»„ä¸­è¡¨ç¤ºè¯¥å­—ç¬¦åºåˆ—çš„ <span class="type">String</span></span><br><span class="line"></span><br><span class="line">boolean endsWith(<span class="type">String</span> suffix)</span><br><span class="line">æµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“æŸ</span><br><span class="line"></span><br><span class="line">boolean equals(<span class="type">Object</span> anObject)</span><br><span class="line">å°†æ­¤å­—ç¬¦ä¸²ä¸æŒ‡å®šçš„å¯¹è±¡æ¯”è¾ƒ</span><br><span class="line"></span><br><span class="line">boolean equalsIgnoreCase(<span class="type">String</span> anotherString)</span><br><span class="line">å°†æ­¤ <span class="type">String</span> ä¸å¦ä¸€ä¸ª <span class="type">String</span> æ¯”è¾ƒï¼Œä¸è€ƒè™‘å¤§å°å†™</span><br><span class="line"></span><br><span class="line">byte getBytes()</span><br><span class="line">ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†å°†æ­¤ <span class="type">String</span> ç¼–ç ä¸º byte åºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„ byte æ•°ç»„ä¸­</span><br><span class="line"></span><br><span class="line">byte[] getBytes(<span class="type">String</span> charsetName</span><br><span class="line">ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†æ­¤ <span class="type">String</span> ç¼–ç ä¸º byte åºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„ byte æ•°ç»„ä¸­</span><br><span class="line"></span><br><span class="line">void getChars(int srcBegin, int srcEnd, char[] dst, int dstBegin)</span><br><span class="line">å°†å­—ç¬¦ä»æ­¤å­—ç¬¦ä¸²å¤åˆ¶åˆ°ç›®æ ‡å­—ç¬¦æ•°ç»„</span><br><span class="line"></span><br><span class="line">int hashCode()</span><br><span class="line">è¿”å›æ­¤å­—ç¬¦ä¸²çš„å“ˆå¸Œç </span><br><span class="line"><span class="number">16</span></span><br><span class="line">int indexOf(int ch)</span><br><span class="line">è¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼ˆè¾“å…¥çš„æ˜¯asciiç å€¼ï¼‰</span><br><span class="line"></span><br><span class="line">int indexOf(int ch, int fromIndex)</span><br><span class="line">è¿”è¿”å›åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°æŒ‡å®šå­—ç¬¦å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹æœç´¢</span><br><span class="line"></span><br><span class="line">int indexOf(<span class="type">String</span> str)</span><br><span class="line">è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">int indexOf(<span class="type">String</span> str, int fromIndex)</span><br><span class="line">è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> intern()</span><br><span class="line">è¿”å›å­—ç¬¦ä¸²å¯¹è±¡çš„è§„èŒƒåŒ–è¡¨ç¤ºå½¢å¼</span><br><span class="line"></span><br><span class="line">int lastIndexOf(int ch)</span><br><span class="line">è¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">int lastIndexOf(int ch, int fromIndex)</span><br><span class="line">è¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¤„å¼€å§‹è¿›è¡Œåå‘æœç´¢</span><br><span class="line"></span><br><span class="line">int lastIndexOf(<span class="type">String</span> str)</span><br><span class="line">è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€å³è¾¹å‡ºç°å¤„çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">int lastIndexOf(<span class="type">String</span> str, int fromIndex)</span><br><span class="line">è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹åå‘æœç´¢</span><br><span class="line"></span><br><span class="line">int length()</span><br><span class="line">è¿”å›æ­¤å­—ç¬¦ä¸²çš„é•¿åº¦</span><br><span class="line"></span><br><span class="line">boolean matches(<span class="type">String</span> regex)</span><br><span class="line">å‘ŠçŸ¥æ­¤å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line"></span><br><span class="line">boolean regionMatches(boolean ignoreCase, int toffset, <span class="type">String</span> other, int ooffset, int len)</span><br><span class="line">æµ‹è¯•ä¸¤ä¸ªå­—ç¬¦ä¸²åŒºåŸŸæ˜¯å¦ç›¸ç­‰</span><br><span class="line"><span class="number">28</span></span><br><span class="line">boolean regionMatches(int toffset, <span class="type">String</span> other, int ooffset, int len)</span><br><span class="line">æµ‹è¯•ä¸¤ä¸ªå­—ç¬¦ä¸²åŒºåŸŸæ˜¯å¦ç›¸ç­‰</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> replace(char oldChar, char newChar)</span><br><span class="line">è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯é€šè¿‡ç”¨ newChar æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€æœ‰ oldChar å¾—åˆ°çš„</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> replaceAll(<span class="type">String</span> regex, <span class="type">String</span> replacement</span><br><span class="line">ä½¿ç”¨ç»™å®šçš„ replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> replaceFirst(<span class="type">String</span> regex, <span class="type">String</span> replacement)</span><br><span class="line">ä½¿ç”¨ç»™å®šçš„ replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå­å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line"><span class="type">String</span>[] split(<span class="type">String</span> regex)</span><br><span class="line">æ ¹æ®ç»™å®šæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ‹†åˆ†æ­¤å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line"><span class="type">String</span>[] split(<span class="type">String</span> regex, int limit)</span><br><span class="line">æ ¹æ®åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¥æ‹†åˆ†æ­¤å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">boolean startsWith(<span class="type">String</span> prefix)</span><br><span class="line">æµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å§‹</span><br><span class="line"></span><br><span class="line">boolean startsWith(<span class="type">String</span> prefix, int toffset)</span><br><span class="line">æµ‹è¯•æ­¤å­—ç¬¦ä¸²ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„å­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å§‹ã€‚</span><br><span class="line"></span><br><span class="line"><span class="type">CharSequence</span> subSequence(int beginIndex, int endIndex)</span><br><span class="line">è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦åºåˆ—ï¼Œå®ƒæ˜¯æ­¤åºåˆ—çš„ä¸€ä¸ªå­åºåˆ—</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> substring(int beginIndex)</span><br><span class="line">è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> substring(int beginIndex, int endIndex)</span><br><span class="line">è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">char[] toCharArray()</span><br><span class="line">å°†æ­¤å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦æ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> toLowerCase()</span><br><span class="line">ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒçš„è§„åˆ™å°†æ­¤ <span class="type">String</span> ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå°å†™</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> toLowerCase(<span class="type">Locale</span> locale)</span><br><span class="line">ä½¿ç”¨ç»™å®š <span class="type">Locale</span> çš„è§„åˆ™å°†æ­¤ <span class="type">String</span> ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå°å†™</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> toString()</span><br><span class="line">è¿”å›æ­¤å¯¹è±¡æœ¬èº«ï¼ˆå®ƒå·²ç»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> toUpperCase()</span><br><span class="line">ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒçš„è§„åˆ™å°†æ­¤ <span class="type">String</span> ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå¤§å†™</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> toUpperCase(<span class="type">Locale</span> locale)</span><br><span class="line">ä½¿ç”¨ç»™å®š <span class="type">Locale</span> çš„è§„åˆ™å°†æ­¤ <span class="type">String</span> ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå¤§å†™</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> trim()</span><br><span class="line">åˆ é™¤æŒ‡å®šå­—ç¬¦ä¸²çš„é¦–å°¾ç©ºç™½ç¬¦</span><br><span class="line"></span><br><span class="line">static <span class="type">String</span> valueOf(primitive data <span class="class"><span class="keyword">type</span> <span class="title">x</span>)</span></span><br><span class="line"><span class="class"><span class="title">è¿”å›æŒ‡å®šç±»å‹å‚æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> String </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2019/02/15/Scala%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/02/15/Scala%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="ä¸€ã€Scalaå®˜ç½‘6ä¸ªç‰¹å¾ã€‚"><a href="#ä¸€ã€Scalaå®˜ç½‘6ä¸ªç‰¹å¾ã€‚" class="headerlink" title="ä¸€ã€Scalaå®˜ç½‘6ä¸ªç‰¹å¾ã€‚"></a>ä¸€ã€Scalaå®˜ç½‘6ä¸ªç‰¹å¾ã€‚</h1><h2 id="ç®€æ·ï¼Œå¿«é€Ÿ"><a href="#ç®€æ·ï¼Œå¿«é€Ÿ" class="headerlink" title="ç®€æ·ï¼Œå¿«é€Ÿ"></a>ç®€æ·ï¼Œå¿«é€Ÿ</h2><h2 id="1ã€Java"><a href="#1ã€Java" class="headerlink" title="1ã€Java"></a>1ã€Java</h2><ul><li>ä¸Javaæ— ç¼æ•´åˆï¼Œè¿è¡Œåœ¨JVMä¸Šï¼Œç¼–è¯‘å½¢æˆ.classæ–‡ä»¶</li></ul><h2 id="2ã€ç±»å‹"><a href="#2ã€ç±»å‹" class="headerlink" title="2ã€ç±»å‹"></a>2ã€ç±»å‹</h2><ul><li>ç±»å‹è‡ªåŠ¨æ¨æ–­:var å˜é‡ç±»å‹   val å¸¸é‡ç±»å‹<br> ï¼ˆvar  s = 1 è‡ªåŠ¨æ¨æ–­s ä¸ºintç±»å‹ ï¼‰<br>  dosçª—å£è¿è¡ŒScalaè¯­è¨€ï¼ˆcmd  - &gt;scalaï¼‰  </li></ul><h2 id="3ã€å¹¶å‘"><a href="#3ã€å¹¶å‘" class="headerlink" title="3ã€å¹¶å‘"></a>3ã€å¹¶å‘</h2><ul><li>åº•å±‚æœ‰actorï¼Œå¤©ç”Ÿç”¨äºé«˜å¹¶å‘å’Œåˆ†å¸ƒå¼</li></ul><h2 id="4ã€ç»§æ‰¿"><a href="#4ã€ç»§æ‰¿" class="headerlink" title="4ã€ç»§æ‰¿"></a>4ã€ç»§æ‰¿</h2><ul><li>trait ç‰¹å¾ç‰¹è´¨ï¼ˆJavaä¸­æ¥å£å’ŒæŠ½è±¡ç±»çš„ç»“åˆä½“ï¼Ÿï¼Ÿï¼Ÿä¸¤è€…åŒºåˆ«ï¼Ÿï¼Ÿå•ç»§æ‰¿å¤šå®ç°ï¼‰<br>â€‹    é™æ€è¯­è¨€  ï¼ˆJavaé™æ€è¯­è¨€  shell ã€PythonåŠ¨æ€è¯­è¨€ï¼‰</li></ul><h2 id="5ã€åŒ¹é…"><a href="#5ã€åŒ¹é…" class="headerlink" title="5ã€åŒ¹é…"></a>5ã€åŒ¹é…</h2><ul><li>æ¨¡å¼åŒ¹é…:(Javaä¸­çš„switch caseç±»å‹å¿…é¡»ä¸€è‡´)å¯åŒ¹é…å¤šç§ç±»å‹</li></ul><h2 id="6ã€é«˜é˜¶"><a href="#6ã€é«˜é˜¶" class="headerlink" title="6ã€é«˜é˜¶"></a>6ã€é«˜é˜¶</h2><ul><li>é«˜é˜¶å‡½æ•°ï¼ˆå‡½æ•°å¼ç¼–ç¨‹ï¼‰å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥æ–¹æ³•ä¸­ï¼ˆJdk 8 streamæµï¼Œè±å§†å¡”è¡¨è¾¾å¼ï¼‰</li></ul><p>â€‹       å·¥å…·ç±»ä¸­æ–¹æ³•ä¸ºé™æ€çš„</p><h1 id="äºŒã€Scalaå®‰è£…"><a href="#äºŒã€Scalaå®‰è£…" class="headerlink" title="äºŒã€Scalaå®‰è£…"></a>äºŒã€Scalaå®‰è£…</h1><h2 id="1ã€windowså®‰è£…-é…ç½®ç¯å¢ƒå˜é‡"><a href="#1ã€windowså®‰è£…-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="1ã€windowså®‰è£…,é…ç½®ç¯å¢ƒå˜é‡"></a>1ã€windowså®‰è£…,é…ç½®ç¯å¢ƒå˜é‡</h2><p>Ã˜  å®˜ç½‘ä¸‹è½½scala2.10ï¼šï¼ˆå› ä¸ºsparkéœ€è¦çš„æ˜¯è¿™ä¸ªç‰ˆæœ¬çš„Scalaï¼‰</p><p><a href="http://www.scala-lang.org/download/2.10.4.html" target="_blank" rel="noopener">http://www.scala-lang.org/download/2.10.4.html</a> </p><p>Ã˜  ä¸‹è½½å¥½åå®‰è£…ã€‚åŒå‡»msiåŒ…å®‰è£…,è®°ä½å®‰è£…çš„è·¯å¾„ã€‚</p><p>Ã˜  é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå’Œé…ç½®jdkä¸€æ ·ï¼‰</p><ul><li><p>æ–°å»ºSCALA_HOME</p></li><li><p>ç¼–è¾‘Pathå˜é‡ï¼Œåœ¨åé¢è¿½åŠ å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;%SCALA_HOME%\bin</span><br></pre></td></tr></table></figure></li></ul><p>Ã˜  æ‰“å¼€cmd,è¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scala  - version</span><br></pre></td></tr></table></figure><p>çœ‹æ˜¯å¦æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œç¡®å®šæ˜¯å¦å®‰è£…æˆåŠŸ</p><p><img src="images/Scala.jpg" alt=""></p><h2 id="2ã€eclipse-é…ç½®scalaæ’ä»¶"><a href="#2ã€eclipse-é…ç½®scalaæ’ä»¶" class="headerlink" title="2ã€eclipse é…ç½®scalaæ’ä»¶"></a>2ã€eclipse é…ç½®scalaæ’ä»¶</h2><p>Ã˜  ä¸‹è½½æ’ä»¶ï¼ˆä¸€å®šè¦å¯¹åº”eclipseç‰ˆæœ¬ä¸‹è½½ï¼‰,å¹¶è§£å‹</p><p><a href="http://scala-ide.org/download/prev-stable.html" target="_blank" rel="noopener">http://scala-ide.org/download/prev-stable.html</a></p><p><img src="images/eclipse.jpg" alt=""></p><p>Ã˜  å°†è§£å‹ç›®å½•ä¸‹çš„featureså’Œpluginsä¸¤ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ°eclipseå®‰è£…ç›®å½•ä¸­çš„â€dropins/scalaâ€ç›®å½•ä¸‹ã€‚</p><p>è¿›å…¥dropinsï¼Œæ–°å»ºscalaæ–‡ä»¶å¤¹ï¼Œå°†ä¸¤ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ°â€œdropins/scalaâ€ä¸‹</p><h2 id="3ã€Scalaç¼–è¾‘å™¨ï¼šscala-ide"><a href="#3ã€Scalaç¼–è¾‘å™¨ï¼šscala-ide" class="headerlink" title="3ã€Scalaç¼–è¾‘å™¨ï¼šscala ide"></a>3ã€Scalaç¼–è¾‘å™¨ï¼šscala ide</h2><p>ä¸‹è½½ç½‘å€ï¼š<a href="http://scala-ide.org/download/sdk.html" target="_blank" rel="noopener">http://scala-ide.org/download/sdk.html</a> </p><h2 id="4ã€Idea-ä¸­é…ç½®scalaæ’ä»¶"><a href="#4ã€Idea-ä¸­é…ç½®scalaæ’ä»¶" class="headerlink" title="4ã€Idea ä¸­é…ç½®scalaæ’ä»¶"></a>4ã€Idea ä¸­é…ç½®scalaæ’ä»¶</h2><p>Ã˜  æ‰“å¼€idea,closeé¡¹ç›®åï¼Œç‚¹å‡»Configure-&gt;Plugins</p><p>Ã˜  æœç´¢scalaï¼Œç‚¹å‡»Installå®‰è£…</p><p>Ã˜  è®¾ç½®jdkï¼Œæ‰“å¼€Project Structure,ç‚¹å‡»new é€‰æ‹©å®‰è£…å¥½çš„jdkè·¯å¾„</p><p>Ã˜ æ–°å»ºScalaé¡¹ç›®</p><p><img src="images/s1.jpg" alt=""></p><p><img src="images/s2.jpg" alt=""></p><h1 id="ä¸‰ã€ScalaåŸºç¡€è¯­æ³•"><a href="#ä¸‰ã€ScalaåŸºç¡€è¯­æ³•" class="headerlink" title="ä¸‰ã€ScalaåŸºç¡€è¯­æ³•"></a>ä¸‰ã€ScalaåŸºç¡€è¯­æ³•</h1><h2 id="1ã€æ•°æ®ç±»å‹"><a href="#1ã€æ•°æ®ç±»å‹" class="headerlink" title="1ã€æ•°æ®ç±»å‹"></a>1ã€æ•°æ®ç±»å‹</h2><p><img src="images/s4.jpg" alt=""></p><p><img src="images/s5.jpg" alt=""></p><h2 id="2ã€å˜é‡å’Œå¸¸é‡çš„å£°æ˜"><a href="#2ã€å˜é‡å’Œå¸¸é‡çš„å£°æ˜" class="headerlink" title="2ã€å˜é‡å’Œå¸¸é‡çš„å£°æ˜"></a><strong>2</strong>ã€<strong>å˜é‡å’Œå¸¸é‡çš„å£°æ˜</strong></h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰å˜é‡å’Œå¸¸é‡</span></span><br><span class="line"><span class="comment">     * å˜é‡ :ç”¨ var å®šä¹‰ ï¼Œå¯ä¿®æ”¹ </span></span><br><span class="line"><span class="comment">     * å¸¸é‡ :ç”¨ val å®šä¹‰ï¼Œä¸å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"zhangsan"</span></span><br><span class="line">    println(name)</span><br><span class="line">    name =<span class="string">"lisi"</span></span><br><span class="line">    println(name)</span><br><span class="line">    <span class="keyword">val</span> gender = <span class="string">"m"</span></span><br><span class="line"><span class="comment">//    gender = "m"//é”™è¯¯ï¼Œä¸èƒ½ç»™å¸¸é‡å†èµ‹å€¼</span></span><br><span class="line"><span class="comment">// å®šä¹‰å˜é‡æˆ–è€…å¸¸é‡çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å†™ä¸Šè¿”å›çš„ç±»å‹ï¼Œä¸€èˆ¬çœç•¥ï¼Œå¦‚ï¼šval a:Int = 10</span></span><br></pre></td></tr></table></figure><h2 id="3ã€ç±»å’Œå¯¹è±¡"><a href="#3ã€ç±»å’Œå¯¹è±¡" class="headerlink" title="3ã€ç±»å’Œå¯¹è±¡"></a><strong>3ã€</strong>ç±»å’Œå¯¹è±¡</h2><p>Ã˜  åˆ›å»ºç±»</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name = <span class="string">"zhangsan"</span></span><br><span class="line">  <span class="keyword">val</span> age = <span class="number">18</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayName</span></span>() = &#123;</span><br><span class="line">    <span class="string">"my name is "</span>+ name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Ã˜  åˆ›å»ºå¯¹è±¡</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Lesson_Class</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">    println(person.age);</span><br><span class="line">    println(person.sayName())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Ã˜  ä¼´ç”Ÿç±»å’Œä¼´ç”Ÿå¯¹è±¡</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">xname :<span class="type">String</span> , xage :<span class="type">Int</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="type">Person</span>.name</span><br><span class="line">  <span class="keyword">val</span> age = xage</span><br><span class="line">  <span class="keyword">var</span> gender = <span class="string">"m"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name:<span class="type">String</span>,age:<span class="type">Int</span>,g:<span class="type">String</span>)&#123;</span><br><span class="line">    <span class="keyword">this</span>(name,age)</span><br><span class="line">    gender = g</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayName</span></span>() = &#123;</span><br><span class="line">    <span class="string">"my name is "</span>+ name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name = <span class="string">"zhangsanfeng"</span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"wagnwu"</span>,<span class="number">10</span>,<span class="string">"f"</span>)</span><br><span class="line">    println(person.age);</span><br><span class="line">    println(person.sayName())</span><br><span class="line">    println(person.gender)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„</code></p><blockquote><ul><li>å»ºè®®ç±»åé¦–å­—æ¯å¤§å†™ ï¼Œæ–¹æ³•é¦–å­—æ¯å°å†™ï¼Œç±»å’Œæ–¹æ³•å‘½åå»ºè®®ç¬¦åˆé©¼å³°å‘½åæ³•ã€‚</li><li>.ä¸€è¡Œç»“æŸï¼Œä¸éœ€è¦åˆ†å·ã€‚å¦‚æœä¸€è¡Œé‡Œæœ‰å¤šä¸ªè¯­å¥ï¼Œåˆ™ä¹‹é—´ç”¨åˆ†å·éš”å¼€ã€‚</li><li>scala ä¸­çš„objectæ˜¯å•ä¾‹å¯¹è±¡ï¼Œç›¸å½“äºjavaä¸­çš„å·¥å…·ç±»ï¼Œå®ƒé‡Œé¢çš„æ–¹æ³•å¯ä»¥çœ‹æˆéƒ½æ˜¯staticé™æ€çš„ã€‚objectä¸å¯ä»¥ä¼ å‚æ•°ã€‚å¦ï¼šTraitä¸å¯ä»¥ä¼ å‚æ•°</li><li><p>scalaä¸­çš„classç±»é»˜è®¤å¯ä»¥ä¼ å‚æ•°ï¼Œé»˜è®¤çš„ä¼ å‚æ•°å°±æ˜¯é»˜è®¤çš„æ„é€ å‡½æ•°ã€‚</p><p>é‡å†™æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œå¿…é¡»è¦å…ˆè°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°ã€‚</p></li><li><p>class ç±»å±æ€§è‡ªå¸¦getter ï¼Œsetteræ–¹æ³•ã€‚</p></li><li>ä½¿ç”¨objectæ—¶ï¼Œä¸ç”¨newï¼Œä½¿ç”¨classæ—¶è¦new ,å¹¶ä¸”newçš„æ—¶å€™ï¼Œclassä¸­é™¤äº†æ–¹æ³•ä¸æ‰§è¡Œï¼Œå…¶ä»–éƒ½æ‰§è¡Œã€‚</li><li>å¦‚æœåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œobjectå¯¹è±¡å’Œclassç±»çš„åç§°ç›¸åŒï¼Œåˆ™è¿™ä¸ªå¯¹è±¡å°±æ˜¯è¿™ä¸ªç±»çš„ä¼´ç”Ÿå¯¹è±¡ï¼Œclassç§°ä¸ºobjectå¯¹è±¡çš„ä¼´ç”Ÿç±»ï¼Œobject ç§°ä¸ºclassç±»çš„ä¼´ç”Ÿå¯¹è±¡ï¼Œä»–ä»¬å¯ä»¥ç›´æ¥è®¿é—®å¯¹æ–¹çš„ç§æœ‰å˜é‡ã€‚</li></ul></blockquote><h2 id="3-if-else"><a href="#3-if-else" class="headerlink" title="3.  if else"></a><strong>3.</strong>  <strong>if else</strong></h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * if else </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">val</span> age =<span class="number">18</span> </span><br><span class="line"><span class="keyword">if</span> (age &lt; <span class="number">18</span> )&#123;</span><br><span class="line">println(<span class="string">"no allow"</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">18</span>&lt;=age&amp;&amp;age&lt;=<span class="number">20</span>)&#123;</span><br><span class="line">println(<span class="string">"allow with other"</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">println(<span class="string">"allow self"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-for-while-doâ€¦while"><a href="#4-for-while-doâ€¦while" class="headerlink" title="4.   for ,while,doâ€¦while"></a><strong>4.</strong>   for ,while,doâ€¦while</h2><ul><li>toå’Œuntil çš„ç”¨æ³•ï¼ˆä¸å¸¦æ­¥é•¿ï¼Œå¸¦æ­¥é•¿åŒºåˆ«ï¼‰</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**        </span></span><br><span class="line"><span class="comment">  * toå’Œuntil        </span></span><br><span class="line"><span class="comment">  * ä¾‹ï¼š        </span></span><br><span class="line"><span class="comment">  * 1 to 10 è¿”å›1åˆ°10çš„Rangeæ•°ç»„ï¼ŒåŒ…å«10        </span></span><br><span class="line"><span class="comment">  * 1 until 10 è¿”å›1åˆ°10 Rangeæ•°ç»„ ï¼Œä¸åŒ…å«10        </span></span><br><span class="line"><span class="comment">  */</span>              </span><br><span class="line">println(<span class="number">1</span> to <span class="number">10</span> )<span class="comment">//æ‰“å°ï¼š Range(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)      </span></span><br><span class="line">println(<span class="number">1.</span>to(<span class="number">10</span>))<span class="comment">//åŒä¸Š</span></span><br><span class="line"></span><br><span class="line">println(<span class="number">1</span> to (<span class="number">10</span> ,<span class="number">2</span>))<span class="comment">//æ­¥é•¿ä¸º2ï¼Œä»1å¼€å§‹æ‰“å°ï¼š Range(1, 3, 5, 7, 9)      </span></span><br><span class="line">println(<span class="number">1.</span>to(<span class="number">10</span>, <span class="number">2</span>)) <span class="comment">//åŒä¸Š</span></span><br><span class="line"></span><br><span class="line">println(<span class="number">1</span> until <span class="number">10</span> ) <span class="comment">//ä¸åŒ…å«æœ€åä¸€ä¸ªæ•°ï¼Œæ‰“å°1,2,3,4,5,6,7,8,9     </span></span><br><span class="line">println(<span class="number">1.</span>until(<span class="number">10</span>))<span class="comment">//åŒä¸Š          </span></span><br><span class="line">println(<span class="number">1</span> until (<span class="number">10</span> ,<span class="number">3</span> ))<span class="comment">//æ­¥é•¿ä¸º2ï¼Œä»1å¼€å§‹æ‰“å°ï¼Œæ‰“å°1,4,7</span></span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºforå¾ªç¯</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * for å¾ªç¯</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">for</span>( i &lt;- <span class="number">1</span> to <span class="number">10</span> )&#123;</span><br><span class="line">   println(i)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºå¤šå±‚forå¾ªç¯</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥åˆ†å·éš”å¼€ï¼Œå†™å…¥å¤šä¸ªlistèµ‹å€¼çš„å˜é‡ï¼Œæ„æˆå¤šå±‚forå¾ªç¯</span></span><br><span class="line">    <span class="comment">//scalaä¸­ ä¸èƒ½å†™count++ count-- åªèƒ½å†™count+</span></span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span>; j &lt;- <span class="number">1</span> until <span class="number">10</span>)&#123;</span><br><span class="line">      println(<span class="string">"i="</span>+ i +<span class="string">",j="</span>+j)</span><br><span class="line">      count += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(count);</span><br><span class="line"> <span class="comment">//ä¾‹å­ï¼š æ‰“å°å°ä¹ä¹</span></span><br><span class="line">    <span class="keyword">for</span>(i &lt;- <span class="number">1</span> until <span class="number">10</span> ;j &lt;- <span class="number">1</span> until <span class="number">10</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(i&gt;=j)&#123;</span><br><span class="line">      print(i +<span class="string">" * "</span> + j + <span class="string">" = "</span>+ i*j+<span class="string">""</span>)        </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(i==j )&#123;</span><br><span class="line">        println()</span><br><span class="line">      &#125;      </span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//ä¹ä¹ä¹˜æ³•è¡¨</span></span><br><span class="line">     <span class="comment">//æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="comment">//      for(i&lt;- 1 to 9 )&#123;</span></span><br><span class="line"><span class="comment">//        for (j &lt;- 1 to i)&#123;</span></span><br><span class="line"><span class="comment">//          print(j+"*"+i+"="+i*j+"\t")</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        println()</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="comment">//    for(i&lt;- 1 to 9 )&#123;</span></span><br><span class="line"><span class="comment">//      for (j&lt;- 1 to 9)&#123;</span></span><br><span class="line"><span class="comment">//        if(j&lt;=i)&#123;</span></span><br><span class="line"><span class="comment">//          print(j+"*"+i+"="+i*j+"\t")</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        if(i==j)println()</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br></pre></td></tr></table></figure><ul><li>forå¾ªç¯ä¸­å¯ä»¥åŠ æ¡ä»¶åˆ¤æ–­ï¼Œåˆ†å·éš”å¼€</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//å¯ä»¥åœ¨forå¾ªç¯ä¸­åŠ å…¥æ¡ä»¶åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">for</span>(i&lt;- <span class="number">1</span> to <span class="number">10</span> ;<span class="keyword">if</span> (i%<span class="number">2</span>) == <span class="number">0</span> ;<span class="keyword">if</span> (i == <span class="number">4</span>) )&#123;</span><br><span class="line">      println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>scalaä¸­ä¸èƒ½ä½¿ç”¨count++ï¼Œcountåªèƒ½ä½¿ç”¨count = count+1 ï¼Œcount += 1</p></li><li><p>whileå¾ªç¯ï¼Œwhileï¼ˆï¼‰{}ï¼Œdo {}while()</p></li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//å°†forä¸­çš„ç¬¦åˆæ¡ä»¶çš„å…ƒç´ é€šè¿‡yieldå…³é”®å­—è¿”å›æˆä¸€ä¸ªé›†åˆ</span></span><br><span class="line">    <span class="keyword">val</span> list = <span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span>  ; <span class="keyword">if</span>(i &gt; <span class="number">5</span> )) <span class="keyword">yield</span> i </span><br><span class="line"><span class="comment">//&lt;-  åé¢æ˜¯ä¸€ä¸ªé›†åˆ</span></span><br><span class="line">    <span class="keyword">for</span>( w &lt;- list )&#123;</span><br><span class="line">      println(w)</span><br><span class="line">&#125;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * while å¾ªç¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> index = <span class="number">0</span> </span><br><span class="line">    <span class="keyword">while</span>(index &lt; <span class="number">100</span> )&#123;</span><br><span class="line">    println(<span class="string">"ç¬¬"</span>+index+<span class="string">"æ¬¡while å¾ªç¯"</span>)</span><br><span class="line">      index += <span class="number">1</span> </span><br><span class="line">    &#125;</span><br><span class="line"> index = <span class="number">0</span> </span><br><span class="line">    do&#123;</span><br><span class="line">    index +=<span class="number">1</span> </span><br><span class="line">    println(<span class="string">"ç¬¬"</span>+index+<span class="string">"æ¬¡do while å¾ªç¯"</span>)</span><br><span class="line">&#125;<span class="keyword">while</span>(index &lt;<span class="number">100</span> )</span><br></pre></td></tr></table></figure><h1 id="å››ã€Scalaå‡½æ•°"><a href="#å››ã€Scalaå‡½æ•°" class="headerlink" title="å››ã€Scalaå‡½æ•°"></a>å››ã€Scalaå‡½æ•°</h1><h2 id="1ã€å‡½æ•°å®šä¹‰"><a href="#1ã€å‡½æ•°å®šä¹‰" class="headerlink" title="1ã€å‡½æ•°å®šä¹‰"></a>1ã€å‡½æ•°å®šä¹‰</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span> </span>(a: <span class="type">Int</span> , b: <span class="type">Int</span> ) : <span class="type">Unit</span> = &#123;</span><br><span class="line">   println(a+b)</span><br><span class="line"> &#125;</span><br><span class="line">fun(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span> </span>(a : <span class="type">Int</span> , b : <span class="type">Int</span>)= a+b</span><br><span class="line">    println(fun1(<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><p><code>è¯­æ³•è§£é‡Š</code></p><blockquote><ul><li>å‡½æ•°å®šä¹‰è¯­æ³• ç”¨defæ¥å®šä¹‰</li><li>å¯ä»¥å®šä¹‰ä¼ å…¥çš„å‚æ•°ï¼Œè¦æŒ‡å®šä¼ å…¥å‚æ•°çš„ç±»å‹</li><li>scalaä¸­å‡½æ•°ä¸­å¦‚æœè¿”å›è¿”å›å€¼ç±»å‹ä¸ºUnit ï¼Œå³æ— è¿”å›å€¼</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(x:<span class="type">Int</span>=<span class="number">10</span>,y:<span class="type">Int</span>=<span class="number">11</span>):<span class="type">Unit</span> =&#123;</span><br><span class="line">&gt;         x+y</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; <span class="comment">//å†™è¿”å›å€¼ç±»å‹æ˜¯=æ—¶ï¼Œä¸€å®šè¦è®°å¾—å†™ ï¼šï¼ˆå†’å·ï¼‰</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><ul><li><p>scalaä¸­å‡½æ•°æœ‰è¿”å›å€¼æ—¶ï¼Œå¯ä»¥å†™returnï¼Œä¹Ÿå¯ä»¥ä¸å†™returnï¼š</p></li><li><ul><li>çœç•¥returnçš„æ—¶å€™ï¼Œå‡½æ•°è‡ªåŠ¨å›å°†æœ€åä¸€è¡Œçš„è¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›å€¼</li></ul></li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;  <span class="function"><span class="keyword">def</span> <span class="title">max</span></span>(x:<span class="type">Int</span>,y:<span class="type">Int</span> )=&#123;</span><br><span class="line">&gt;       <span class="keyword">if</span> (x&gt;y)</span><br><span class="line">&gt;           x</span><br><span class="line">&gt;       <span class="keyword">else</span></span><br><span class="line">&gt;          y</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;  println(max(<span class="number">5</span>,<span class="number">7</span>))</span><br><span class="line">&gt; ç»“æœæ˜¾ç¤ºï¼š<span class="number">7</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><pre><code>* * å¦‚æœå‡½æ•°æœ‰retrun,åˆ™å¿…é¡»å†™è¿”å›ç±»å‹ã€‚</code></pre><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="function"><span class="keyword">def</span> <span class="title">min</span></span>(m:<span class="type">Int</span>,n:<span class="type">Int</span>):<span class="type">Int</span>=&#123;</span><br><span class="line">&gt;       <span class="keyword">if</span>(m&gt;n)</span><br><span class="line">&gt;         <span class="keyword">return</span> n</span><br><span class="line">&gt;       <span class="keyword">else</span></span><br><span class="line">&gt;         <span class="keyword">return</span> m</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     println(min(<span class="number">5</span>,<span class="number">7</span>))</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><pre><code>* scalaä¸­å‡½æ•°æœ‰è¿”å›å€¼æ—¶ï¼Œå¯ä»¥å†™è¿”å›å€¼çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥çœç•¥ï¼Œå› ä¸ºscalaå¯ä»¥ç±»å‹è‡ªåŠ¨æ¨æ–­ï¼Œæœ‰æ—¶å€™ä¸èƒ½çœç•¥ï¼Œå¿…é¡»å†™ï¼Œ* * æ¯”å¦‚åœ¨é€’å½’å‡½æ•°ä¸­æˆ–è€…å‡½æ•°çš„è¿”å›å€¼æ˜¯å‡½æ•°ç±»å‹çš„æ—¶å€™ã€‚</code></pre><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;  <span class="function"><span class="keyword">def</span> <span class="title">num</span></span>(x: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">&gt;             <span class="keyword">if</span> (x == <span class="number">1</span>)</span><br><span class="line">&gt;                 <span class="number">1</span></span><br><span class="line">&gt;             <span class="keyword">else</span> &#123;</span><br><span class="line">&gt;                 x * num(x - <span class="number">1</span>)</span><br><span class="line">&gt;             &#125;</span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><pre><code>* å‡½æ•°å®šä¹‰çš„æ—¶å€™ï¼Œå¦‚æœå»æ‰ = ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•è¿”å›ç±»å‹å¿…å®šæ˜¯Unitçš„ã€‚     è¿™ç§è¯´æ³•æ— è®ºæ–¹æ³•ä½“é‡Œé¢ä»€ä¹ˆé€»è¾‘éƒ½æˆç«‹ï¼Œscalaå¯ä»¥æŠŠä»»æ„ç±»å‹è½¬æ¢ä¸ºUnitã€‚     å‡è®¾ï¼Œé‡Œé¢çš„é€»è¾‘æœ€åè¿”å›äº†ä¸€ä¸ªstringï¼Œé‚£ä¹ˆè¿™ä¸ªè¿”å›å€¼ä¼šè¢«è½¬æ¢æˆUnitï¼Œå¹¶ä¸”å€¼ä¼šè¢«ä¸¢å¼ƒã€‚     åˆ™ç›¸å½“äºï¼Œå‡½æ•°å°±å°†è¿”å›å€¼å»æ‰ï¼Œå³æ— è¿”å›å€¼ã€‚* {}é‡Œçš„ä»£ç ï¼Œå¦‚æœåªæœ‰ä¸€è¡Œï¼Œåˆ™å¯ä»¥çœç•¥{}*  ä¼ é€’ç»™æ–¹æ³•çš„å‚æ•°å¯ä»¥åœ¨æ–¹æ³•ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”scalaè§„å®šæ–¹æ³•çš„ä¼ è¿‡æ¥çš„å‚æ•°ä¸ºvalç±»å‹ï¼Œä¸èƒ½ä¿®æ”¹ï¼Œä¸æ˜¯varã€‚</code></pre></blockquote><h2 id="2ã€é€’å½’å‡½æ•°"><a href="#2ã€é€’å½’å‡½æ•°" class="headerlink" title="2ã€é€’å½’å‡½æ•°"></a>2ã€é€’å½’å‡½æ•°</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * é€’å½’å‡½æ•° </span></span><br><span class="line"><span class="comment">    * 5çš„é˜¶ä¹˜</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">fun2</span></span>(num :<span class="type">Int</span>) :<span class="type">Int</span>= &#123;</span><br><span class="line">     <span class="keyword">if</span>(num ==<span class="number">1</span>)</span><br><span class="line">       num</span><br><span class="line">     <span class="keyword">else</span> </span><br><span class="line">       num * fun2(num<span class="number">-1</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   print(fun2(<span class="number">5</span>))</span><br></pre></td></tr></table></figure><h2 id="3ã€åŒ…å«å‚æ•°é»˜è®¤å€¼çš„å‡½æ•°"><a href="#3ã€åŒ…å«å‚æ•°é»˜è®¤å€¼çš„å‡½æ•°" class="headerlink" title="3ã€åŒ…å«å‚æ•°é»˜è®¤å€¼çš„å‡½æ•°"></a>3ã€<strong>åŒ…å«å‚æ•°é»˜è®¤å€¼çš„å‡½æ•°</strong></h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åŒ…å«é»˜è®¤å‚æ•°å€¼çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">    * æ³¨æ„ï¼š</span></span><br><span class="line"><span class="comment">    * 1.é»˜è®¤å€¼çš„å‡½æ•°ä¸­ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°ä¸ªæ•°ä¸å‡½æ•°å®šä¹‰ç›¸åŒï¼Œåˆ™ä¼ å…¥çš„æ•°å€¼ä¼šè¦†ç›–é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">    * 2.å¦‚æœä¸æƒ³è¦†ç›–é»˜è®¤å€¼ï¼Œä¼ å…¥çš„å‚æ•°ä¸ªæ•°å°äºå®šä¹‰çš„å‡½æ•°çš„å‚æ•°ï¼Œåˆ™éœ€è¦æŒ‡å®šå‚æ•°åç§°</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">fun3</span></span>(a :<span class="type">Int</span> = <span class="number">10</span>,b:<span class="type">Int</span>) = &#123;</span><br><span class="line">     println(a+b)</span><br><span class="line">   &#125;</span><br><span class="line">   fun3(b=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="4ã€å¯å˜å‚æ•°ä¸ªæ•°çš„å‡½æ•°"><a href="#4ã€å¯å˜å‚æ•°ä¸ªæ•°çš„å‡½æ•°" class="headerlink" title="4ã€å¯å˜å‚æ•°ä¸ªæ•°çš„å‡½æ•°"></a><strong>4</strong>ã€å¯å˜å‚æ•°ä¸ªæ•°çš„å‡½æ•°</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯å˜å‚æ•°ä¸ªæ•°çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * æ³¨æ„ï¼šå¤šä¸ªå‚æ•°é€—å·åˆ†å¼€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun4</span></span>(elem :<span class="type">Int</span>*)=&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(e &lt;- elem)&#123;</span><br><span class="line">    sum += e</span><br><span class="line">  &#125;</span><br><span class="line">  sum</span><br><span class="line">&#125;</span><br><span class="line">println(fun4(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure><h2 id="5ã€åŒ¿åå‡½æ•°"><a href="#5ã€åŒ¿åå‡½æ•°" class="headerlink" title="5ã€åŒ¿åå‡½æ•°"></a><strong>5ã€</strong>åŒ¿åå‡½æ•°</h2><ul><li><p>æœ‰å‚åŒ¿åå‡½æ•°</p></li><li><p>æ— å‚åŒ¿åå‡½æ•°</p></li><li><p>æœ‰è¿”å›å€¼çš„åŒ¿åå‡½æ•°</p></li></ul><blockquote><p>å¯ä»¥å°†åŒ¿åå‡½æ•°è¿”å›ç»™valå®šä¹‰çš„å€¼</p><p>åŒ¿åå‡½æ•°ä¸èƒ½æ˜¾å¼å£°æ˜å‡½æ•°çš„è¿”å›ç±»å‹</p></blockquote><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//æœ‰å‚æ•°åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">val</span> fun1 = (a : <span class="type">Int</span> ï¼Œ b : <span class="type">Int</span>) =&gt; &#123;</span><br><span class="line">  println(a+b)</span><br><span class="line">&#125;</span><br><span class="line">value1(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ— å‚æ•°åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">val</span> fun2 = ()=&gt;&#123;</span><br><span class="line">  println(<span class="string">"å•¦å•¦å•¦"</span>)</span><br><span class="line">&#125;</span><br><span class="line">fun2()</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ‰è¿”å›å€¼çš„åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">val</span> fun3 = (a:<span class="type">Int</span>,b:<span class="type">Int</span>) =&gt;&#123;</span><br><span class="line">  a+b</span><br><span class="line">&#125;</span><br><span class="line">println(fun3(<span class="number">4</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure><h2 id="6ã€-åµŒå¥—å‡½æ•°"><a href="#6ã€-åµŒå¥—å‡½æ•°" class="headerlink" title="6ã€ åµŒå¥—å‡½æ•°"></a><strong>6ã€</strong> <strong>åµŒå¥—å‡½æ•°</strong></h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åµŒå¥—å‡½æ•°</span></span><br><span class="line"><span class="comment">    * ä¾‹å¦‚ï¼šåµŒå¥—å‡½æ•°æ±‚5çš„é˜¶ä¹˜</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">fun5</span></span>(num:<span class="type">Int</span>)=&#123;</span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">fun6</span></span>(a:<span class="type">Int</span>,b:<span class="type">Int</span>):<span class="type">Int</span>=&#123;</span><br><span class="line">       <span class="keyword">if</span>(a == <span class="number">1</span>)&#123;</span><br><span class="line">         b</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         fun6(a<span class="number">-1</span>,a*b)</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     fun6(num,<span class="number">1</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   println(fun5(<span class="number">5</span>))</span><br></pre></td></tr></table></figure><h2 id="7ã€ååº”ç”¨å‡½æ•°"><a href="#7ã€ååº”ç”¨å‡½æ•°" class="headerlink" title="7ã€ååº”ç”¨å‡½æ•°"></a><strong>7ã€ååº”ç”¨å‡½æ•°</strong></h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.<span class="type">Date</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ååº”ç”¨å‡½æ•°æ˜¯ä¸€ç§è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">     * ä¸éœ€è¦æä¾›å‡½æ•°éœ€è¦çš„æ‰€æœ‰å‚æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">     * åªéœ€è¦æä¾›éƒ¨åˆ†ï¼Œæˆ–ä¸æä¾›æ‰€éœ€å‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(date :<span class="type">Date</span>, s :<span class="type">String</span>)= &#123;</span><br><span class="line">      println(<span class="string">"date is "</span>+ date +<span class="string">",log is "</span>+ s)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">val</span> date = <span class="keyword">new</span> <span class="type">Date</span>()</span><br><span class="line">    log(date ,<span class="string">"log1"</span>)</span><br><span class="line">    log(date ,<span class="string">"log2"</span>)</span><br><span class="line">    log(date ,<span class="string">"log3"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æƒ³è¦è°ƒç”¨logï¼Œä»¥ä¸Šå˜åŒ–çš„æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥ç”¨ååº”ç”¨å‡½æ•°å¤„ç†,æ¥ä¼˜åŒ–logæ–¹æ³•</span></span><br><span class="line">   <span class="comment">/* ç»‘å®šç¬¬ä¸€ä¸ª date å‚æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">    * ç¬¬äºŒä¸ªå‚æ•°ä½¿ç”¨ä¸‹åˆ’çº¿(_)æ›¿æ¢ç¼ºå¤±çš„å‚æ•°åˆ—è¡¨ï¼Œ</span></span><br><span class="line"><span class="comment">    * å¹¶æŠŠè¿™ä¸ªæ–°çš„å‡½æ•°å€¼çš„ç´¢å¼•çš„èµ‹ç»™å˜é‡ã€‚</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">val</span> logWithDate = log(date,_:<span class="type">String</span>)</span><br><span class="line">    logWithDate(<span class="string">"log11"</span>)</span><br><span class="line">    logWithDate(<span class="string">"log22"</span>)</span><br><span class="line">    logWithDate(<span class="string">"log33"</span>)</span><br></pre></td></tr></table></figure><h2 id="8ã€é«˜é˜¶å‡½æ•°"><a href="#8ã€é«˜é˜¶å‡½æ•°" class="headerlink" title="8ã€é«˜é˜¶å‡½æ•°"></a>8ã€<strong>é«˜é˜¶å‡½æ•°</strong></h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é«˜é˜¶å‡½æ•°:å°±æ˜¯æ“ä½œå…¶ä»–å‡½æ•°çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">     * å‡½æ•°çš„å‚æ•°æ˜¯å‡½æ•°</span></span><br><span class="line"><span class="comment">     * æˆ–è€…å‡½æ•°çš„è¿”å›æ˜¯å‡½æ•°</span></span><br><span class="line"><span class="comment">     * æˆ–è€…å‡½æ•°çš„å‚æ•°å’Œè¿”å›éƒ½æ˜¯å‡½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è€…è¿”å›ç´¯å¿ƒæ—¶ï¼Œåªéœ€æŒ‡æ˜å‡½æ•°ä¸­çš„ç±»å‹    </span></span><br><span class="line">    <span class="comment">//å‡½æ•°çš„å‚æ•°æ˜¯å‡½æ•°ï¼š</span></span><br><span class="line">    <span class="comment">//f : (Int,Int) =&gt;Int  ï¼ˆä¸¤ä¸ªIntå‹å‚æ•°ã€Intå‹è¿”å›å€¼ï¼‰</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hightFun</span></span>(f : (<span class="type">Int</span>,<span class="type">Int</span>) =&gt;<span class="type">Int</span>, a:<span class="type">Int</span> ) : <span class="type">Int</span> = &#123;</span><br><span class="line">      f(a,<span class="number">100</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>(v1 :<span class="type">Int</span>,v2: <span class="type">Int</span>):<span class="type">Int</span>  = &#123;</span><br><span class="line">      v1+v2</span><br><span class="line">    &#125;  </span><br><span class="line">    println(hightFun(f, <span class="number">1</span>))</span><br><span class="line">          <span class="comment">//***************</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">test1</span></span>(x: <span class="type">Int</span>, f: (<span class="type">Int</span>, <span class="type">Int</span>) =&gt; <span class="type">Int</span>) = &#123;</span><br><span class="line">            <span class="keyword">var</span> a = x + <span class="number">100</span></span><br><span class="line">            a * f(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">        &#125;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(x: <span class="type">Int</span>, y: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">            x - y</span><br><span class="line">        &#125;</span><br><span class="line">     println(test6(<span class="number">10</span>,sum))</span><br><span class="line"><span class="comment">//------------------------------------------------</span></span><br><span class="line">    <span class="comment">//å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¸ºå‡½æ•° ï¼š(Int,Int)=&gt;Int  f2</span></span><br><span class="line">    <span class="comment">//1ï¼Œ2,3,4ç›¸åŠ </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hightFun2</span></span>(a : <span class="type">Int</span>,b:<span class="type">Int</span>) : (<span class="type">Int</span>,<span class="type">Int</span>)=&gt;<span class="type">Int</span> = &#123;</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">f2</span> </span>(v1: <span class="type">Int</span>,v2:<span class="type">Int</span>) :<span class="type">Int</span> = &#123;</span><br><span class="line">        v1+v2+a+b</span><br><span class="line">      &#125;</span><br><span class="line">      f2</span><br><span class="line">    &#125;</span><br><span class="line">    println(hightFun2(<span class="number">1</span>,<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">            <span class="comment">//***********</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test2</span></span>(x: <span class="type">Int</span>): (<span class="type">Int</span>) =&gt; <span class="type">String</span> = &#123;</span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">concat</span></span>(y: <span class="type">Int</span>): <span class="type">String</span> = &#123;</span><br><span class="line">                x + <span class="string">" !! "</span> + y</span><br><span class="line">            &#125;</span><br><span class="line">            concat</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">val</span> concat: <span class="type">Int</span> =&gt; <span class="type">String</span> = test2(<span class="number">5</span>)</span><br><span class="line">    println(concat(<span class="number">7</span>))</span><br><span class="line"><span class="comment">//        println(test2(5)(7))</span></span><br><span class="line"> <span class="comment">//-------------------------------------------------   </span></span><br><span class="line">    <span class="comment">//å‡½æ•°çš„å‚æ•°æ˜¯å‡½æ•°:  f : (Int ,Int) =&gt; Int)</span></span><br><span class="line">    <span class="comment">//å‡½æ•°çš„è¿”å›æ˜¯å‡½æ•°:  (Int,Int) =&gt; Int</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hightFun3</span></span>(f : (<span class="type">Int</span> ,<span class="type">Int</span>) =&gt; <span class="type">Int</span>) : (<span class="type">Int</span>,<span class="type">Int</span>) =&gt; <span class="type">Int</span> = &#123;</span><br><span class="line">      f</span><br><span class="line">    &#125; </span><br><span class="line">    println(hightFun3(f)(<span class="number">100</span>,<span class="number">200</span>))</span><br><span class="line">    println(hightFun3((a,b) =&gt;&#123;a+b&#125;)(<span class="number">200</span>,<span class="number">200</span>))</span><br><span class="line">    <span class="comment">//ä»¥ä¸Šè¿™å¥è¯è¿˜å¯ä»¥å†™æˆè¿™æ ·</span></span><br><span class="line">    <span class="comment">//å¦‚æœå‡½æ•°çš„å‚æ•°åœ¨æ–¹æ³•ä½“ä¸­åªä½¿ç”¨äº†ä¸€æ¬¡ é‚£ä¹ˆå¯ä»¥å†™æˆ_è¡¨ç¤º</span></span><br><span class="line">    println(hightFun3(_+_)(<span class="number">200</span>,<span class="number">200</span>))</span><br><span class="line">            <span class="comment">//**********</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test3</span></span>(y: <span class="type">Int</span>, f: (<span class="type">Int</span>) =&gt; <span class="type">Int</span>): (<span class="type">Int</span>) =&gt; <span class="type">Int</span> = &#123;</span><br><span class="line">            <span class="keyword">var</span> sum = f(<span class="number">1</span>) + y</span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">sum4</span></span>(x: <span class="type">Int</span>) = &#123;</span><br><span class="line">                x + sum</span><br><span class="line">            &#125;</span><br><span class="line">            sum4</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        def f2 (x: Int) =&#123;</span></span><br><span class="line"><span class="comment">//            x + 10</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="keyword">val</span> f = test3(<span class="number">10</span>,(x:<span class="type">Int</span>)=&gt;&#123;x + <span class="number">10</span>&#125;)</span><br><span class="line"><span class="comment">//        println(f(5))</span></span><br></pre></td></tr></table></figure><h2 id="9ã€æŸ¯é‡ŒåŒ–å‡½æ•°"><a href="#9ã€æŸ¯é‡ŒåŒ–å‡½æ•°" class="headerlink" title="9ã€æŸ¯é‡ŒåŒ–å‡½æ•°"></a>9ã€æŸ¯é‡ŒåŒ–å‡½æ•°</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æŸ¯é‡ŒåŒ–å‡½æ•°</span></span><br><span class="line"><span class="comment">    * å¯ä»¥ç†è§£ä¸ºé«˜é˜¶å‡½æ•°çš„ç®€åŒ–</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">fun1</span></span>(a :<span class="type">Int</span>,b:<span class="type">Int</span>)(c:<span class="type">Int</span>,d:<span class="type">Int</span>) = &#123;</span><br><span class="line">     a+b+c+d</span><br><span class="line">   &#125;</span><br><span class="line">   println(fun1(<span class="number">1</span>,<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">      <span class="comment">//*******</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fun</span></span>(a :<span class="type">Int</span>)(c:<span class="type">Int</span>) = &#123;</span><br><span class="line">           a+c</span><br><span class="line">       &#125;</span><br><span class="line">   println(fun(<span class="number">1</span>)(<span class="number">3</span>))</span><br></pre></td></tr></table></figure><h1 id="äº”ã€å­—ç¬¦ä¸²"><a href="#äº”ã€å­—ç¬¦ä¸²" class="headerlink" title="äº”ã€å­—ç¬¦ä¸²"></a>äº”ã€å­—ç¬¦ä¸²</h1><h2 id="1ã€string-stringBuilder-å¯å˜"><a href="#1ã€string-stringBuilder-å¯å˜" class="headerlink" title="1ã€string  | stringBuilder (å¯å˜)"></a>1ã€string  | stringBuilder (å¯å˜)</h2><h2 id="2ã€æ“ä½œæ–¹æ³•"><a href="#2ã€æ“ä½œæ–¹æ³•" class="headerlink" title="2ã€æ“ä½œæ–¹æ³•"></a>2ã€æ“ä½œæ–¹æ³•</h2><p>Ã˜  æ¯”è¾ƒ:equals</p><p>Ã˜  æ¯”è¾ƒå¿½ç•¥å¤§å°å†™:equalsIgnoreCase</p><p>Ã˜  indexOfï¼šå¦‚æœå­—ç¬¦ä¸²ä¸­æœ‰ä¼ å…¥çš„assciç å¯¹åº”çš„å€¼ï¼Œè¿”å›ä¸‹æ ‡</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * String &amp;&amp; StringBuilder</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">val</span> str = <span class="string">"abcd"</span></span><br><span class="line">    <span class="keyword">val</span> str1 = <span class="string">"ABCD"</span></span><br><span class="line">    </span><br><span class="line">    println(str.indexOf(<span class="number">97</span>))</span><br><span class="line">    println(str.indexOf(<span class="string">"b"</span>))</span><br><span class="line">    </span><br><span class="line">    println(str==str1)</span><br><span class="line">    println(str.equals(str1))</span><br><span class="line">    println(str.equalsIgnoreCase(str1))</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * compareToIgnoreCase</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * å¦‚æœå‚æ•°å­—ç¬¦ä¸²ç­‰äºæ­¤å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å€¼ 0ï¼›</span></span><br><span class="line"><span class="comment">     * å¦‚æœæ­¤å­—ç¬¦ä¸²å°äºå­—ç¬¦ä¸²å‚æ•°ï¼Œåˆ™è¿”å›ä¸€ä¸ªå°äº 0 çš„å€¼ï¼›</span></span><br><span class="line"><span class="comment">     * å¦‚æœæ­¤å­—ç¬¦ä¸²å¤§äºå­—ç¬¦ä¸²å‚æ•°ï¼Œåˆ™è¿”å›ä¸€ä¸ªå¤§äº 0 çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    println(str.compareToIgnoreCase(str1))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">val</span> strBuilder = <span class="keyword">new</span> <span class="type">StringBuilder</span>() <span class="comment">//æ‹¬å·å¯çœ</span></span><br><span class="line">    strBuilder.append(<span class="string">"abc"</span>)</span><br><span class="line"><span class="comment">//ä¸€ä¸ª + åªèƒ½è·Ÿå•ä¸ªå­—ç¬¦ä¸”å¿…é¡»ç”¨å•å¼•å·ï¼Œå¦åˆ™æ— æ•ˆ </span></span><br><span class="line"><span class="comment">//    strBuilder.+('d')</span></span><br><span class="line">    strBuilder+ 'd'</span><br><span class="line"><span class="comment">//    strBuilder.+=('h')</span></span><br><span class="line">    strBuilder+= 'h' </span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¤ä¸ª+ å¯è·Ÿå¤šä¸ªå­—ç¬¦ä¸”å¿…é¡»ç”¨åŒå¼•å·</span></span><br><span class="line"><span class="comment">//    strBuilder.++=("efg")</span></span><br><span class="line">    strBuilder++= <span class="string">"efg"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//StringBuilderå¯ä»¥è¿½åŠ æµ®ç‚¹æ•°</span></span><br><span class="line">    strBuilder.append(<span class="number">1.0</span>)</span><br><span class="line">    strBuilder.append(<span class="number">18</span>f)</span><br><span class="line">    println(strBuilder)</span><br><span class="line"> println(strBuilder.toString())</span><br></pre></td></tr></table></figure><h1 id="å…­ã€é›†åˆ"><a href="#å…­ã€é›†åˆ" class="headerlink" title="å…­ã€é›†åˆ"></a>å…­ã€é›†åˆ</h1><h2 id="1ã€æ•°ç»„"><a href="#1ã€æ•°ç»„" class="headerlink" title="1ã€æ•°ç»„"></a>1ã€æ•°ç»„</h2><h3 id="ï¼ˆ1ï¼‰åˆ›å»ºä¸€ç»´æ•°ç»„"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºä¸€ç»´æ•°ç»„" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºä¸€ç»´æ•°ç»„"></a>ï¼ˆ1ï¼‰åˆ›å»ºä¸€ç»´æ•°ç»„</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åˆ›å»ºæ•°ç»„ä¸¤ç§æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment">    * 1.new Array[String](3)</span></span><br><span class="line"><span class="comment">    * 2.ç›´æ¥Array</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">//åˆ›å»ºç±»å‹ä¸ºInt é•¿åº¦ä¸º3çš„æ•°ç»„</span></span><br><span class="line">   <span class="keyword">val</span> arr1 = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">Int</span>](<span class="number">3</span>)</span><br><span class="line">   <span class="comment">//åˆ›å»ºString ç±»å‹çš„æ•°ç»„ï¼Œç›´æ¥èµ‹å€¼</span></span><br><span class="line">   <span class="keyword">val</span> arr2 = <span class="type">Array</span>[<span class="type">String</span>](<span class="string">"s100"</span>,<span class="string">"s200"</span>,<span class="string">"s300"</span>)</span><br><span class="line">   <span class="comment">//èµ‹å€¼</span></span><br><span class="line">   arr1(<span class="number">0</span>) = <span class="number">100</span></span><br><span class="line">   arr1(<span class="number">1</span>) = <span class="number">200</span></span><br><span class="line">   arr1(<span class="number">2</span>) = <span class="number">300</span></span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ2ï¼‰æ•°ç»„éå†"><a href="#ï¼ˆ2ï¼‰æ•°ç»„éå†" class="headerlink" title="ï¼ˆ2ï¼‰æ•°ç»„éå†"></a>ï¼ˆ2ï¼‰æ•°ç»„éå†</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * éå†ä¸¤ç§æ–¹å¼</span></span><br><span class="line"><span class="comment">  * for</span></span><br><span class="line"><span class="comment">  * foreach</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">for</span>(i &lt;- arr1)&#123;</span><br><span class="line">   println(i)</span><br><span class="line"> &#125;</span><br><span class="line"> arr1.foreach(i =&gt; &#123;</span><br><span class="line">   println(i)</span><br><span class="line"> &#125;)</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">for</span>(s &lt;- arr2)&#123;</span><br><span class="line">   println(s)</span><br><span class="line"> &#125;</span><br><span class="line"> arr2.foreach &#123; </span><br><span class="line">   x =&gt; println(x) </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ3ï¼‰æ•°ç»„æ“ä½œ"><a href="#ï¼ˆ3ï¼‰æ•°ç»„æ“ä½œ" class="headerlink" title="ï¼ˆ3ï¼‰æ•°ç»„æ“ä½œ"></a>ï¼ˆ3ï¼‰æ•°ç»„æ“ä½œ</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Array</span>.concatï¼šåˆå¹¶æ•°ç»„</span><br><span class="line"><span class="type">Array</span>.fill(<span class="number">5</span>)(â€œshsxtâ€)ï¼šåˆ›å»ºåˆå§‹å€¼çš„å®šé•¿æ•°ç»„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> a = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">Int</span>](<span class="number">3</span>)</span><br><span class="line">        a(<span class="number">0</span>) = <span class="number">1</span></span><br><span class="line">        a(<span class="number">1</span>) = <span class="number">2</span></span><br><span class="line">        a(<span class="number">2</span>) = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­æ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">//        val n = a.count(x=&gt;&#123;</span></span><br><span class="line"><span class="comment">//            if(x&gt;2)</span></span><br><span class="line"><span class="comment">//                true</span></span><br><span class="line"><span class="comment">//            else</span></span><br><span class="line"><span class="comment">//                false</span></span><br><span class="line"><span class="comment">//        &#125;)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        println(n)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> b = <span class="type">Array</span>(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line"><span class="comment">//å°†ä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ åˆå¹¶åœ¨ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­</span></span><br><span class="line">        <span class="keyword">val</span> ints = <span class="type">Array</span>.concat(a,b)</span><br><span class="line"><span class="comment">//éå†æ•°ç»„</span></span><br><span class="line">        ints.foreach(println)</span><br><span class="line"><span class="comment">//åˆ›å»ºåŒ…å«5ä¸ªæŒ‡å®šå…ƒç´ çš„æ•°ç»„</span></span><br><span class="line">        <span class="keyword">val</span> strings = <span class="type">Array</span>.fill(<span class="number">5</span>)(<span class="string">"shsxt"</span>)</span><br><span class="line">        strings.foreach(println)</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        for(i &lt;- a)&#123;</span></span><br><span class="line"><span class="comment">//            println(i)</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        val b = Array(4,5,6)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        for(i &lt;- b)&#123;</span></span><br><span class="line"><span class="comment">//            println(i)</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//        a.foreach(x=&gt; &#123; println(x) &#125; )</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        a.foreach(println(_))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//         a.foreach(println)</span></span><br><span class="line"><span class="comment">//        val c = new Array[Array[Int]](3)</span></span><br><span class="line"><span class="comment">//        c(0) = Array(1,2,3)</span></span><br><span class="line"><span class="comment">//        c(1) = Array(4,5,6)</span></span><br><span class="line"><span class="comment">//        c(2) = Array(7,8,9)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//        c.foreach(x=&gt;&#123;</span></span><br><span class="line"><span class="comment">//            x.foreach(y=&gt;&#123;</span></span><br><span class="line"><span class="comment">//                print(y + "\t")</span></span><br><span class="line"><span class="comment">//            &#125;)</span></span><br><span class="line"><span class="comment">//            println()</span></span><br><span class="line"><span class="comment">//        &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        for(i&lt;-c)&#123;</span></span><br><span class="line"><span class="comment">//            for(j &lt;-i)&#123;</span></span><br><span class="line"><span class="comment">//                print(j + "\t")</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//            println()</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ4ï¼‰åˆ›å»ºäºŒç»´æ•°ç»„"><a href="#ï¼ˆ4ï¼‰åˆ›å»ºäºŒç»´æ•°ç»„" class="headerlink" title="ï¼ˆ4ï¼‰åˆ›å»ºäºŒç»´æ•°ç»„"></a>ï¼ˆ4ï¼‰åˆ›å»ºäºŒç»´æ•°ç»„</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * åˆ›å»ºäºŒç»´æ•°ç»„å’Œéå†</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">val</span> arr3 = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">String</span>]](<span class="number">3</span>)</span><br><span class="line">  arr3(<span class="number">0</span>)=<span class="type">Array</span>(<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>)</span><br><span class="line">  arr3(<span class="number">1</span>)=<span class="type">Array</span>(<span class="string">"4"</span>,<span class="string">"5"</span>,<span class="string">"6"</span>)</span><br><span class="line">  arr3(<span class="number">2</span>)=<span class="type">Array</span>(<span class="string">"7"</span>,<span class="string">"8"</span>,<span class="string">"9"</span>)</span><br><span class="line">  <span class="keyword">for</span>(i &lt;- <span class="number">0</span> until arr3.length)&#123;</span><br><span class="line">    <span class="keyword">for</span>(j &lt;- <span class="number">0</span> until arr3(i).length)&#123;</span><br><span class="line">      print(arr3(i)(j)+<span class="string">""</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span>(arr &lt;- arr3 ;i &lt;- arr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(count%<span class="number">3</span> == <span class="number">0</span>)&#123;</span><br><span class="line">      println()</span><br><span class="line">    &#125;</span><br><span class="line">    print(i+<span class="string">""</span>)</span><br><span class="line">    count +=<span class="number">1</span> </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  arr3.foreach &#123; arr  =&gt; &#123;</span><br><span class="line">    arr.foreach &#123; println &#125;</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">val</span> arr4 = <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">Int</span>]](<span class="type">Array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>),<span class="type">Array</span>(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>))</span><br><span class="line">  arr4.foreach &#123; arr =&gt; &#123;</span><br><span class="line">    arr.foreach(i =&gt; &#123;</span><br><span class="line">      println(i)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  println(<span class="string">"-------"</span>)</span><br><span class="line">  <span class="keyword">for</span>(arr &lt;- arr4;i &lt;- arr)&#123;</span><br><span class="line">    println(i)</span><br></pre></td></tr></table></figure><h2 id="2ã€list"><a href="#2ã€list" class="headerlink" title="2ã€list"></a>2ã€list</h2><h2 id="ï¼ˆ1ï¼‰åˆ›å»ºlist"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºlist" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºlist"></a>ï¼ˆ1ï¼‰åˆ›å»ºlist</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br></pre></td></tr></table></figure><p><code>å¤‡æ³¨</code>  Nil      é•¿åº¦ä¸º0çš„list</p><h2 id="ï¼ˆ2ï¼‰listéå†"><a href="#ï¼ˆ2ï¼‰listéå†" class="headerlink" title="ï¼ˆ2ï¼‰listéå†"></a>ï¼ˆ2ï¼‰listéå†</h2><blockquote><p>foreach ï¼Œfor</p></blockquote><h2 id="ï¼ˆ3ï¼‰listæ“ä½œ"><a href="#ï¼ˆ3ï¼‰listæ“ä½œ" class="headerlink" title="ï¼ˆ3ï¼‰listæ“ä½œ"></a>ï¼ˆ3ï¼‰listæ“ä½œ</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//åˆ›å»º</span></span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//éå†</span></span><br><span class="line">    list.foreach &#123; x =&gt; println(x)&#125;</span><br><span class="line"><span class="comment">//    list.foreach &#123; println&#125;</span></span><br><span class="line">    <span class="comment">//filter è¿‡æ»¤å…ƒç´ </span></span><br><span class="line">    <span class="keyword">val</span> list1  = list.filter &#123; x =&gt; x&gt;<span class="number">3</span> &#125;</span><br><span class="line">    list1.foreach &#123; println&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//count  è®¡ç®—ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">val</span> value = list1.count &#123; x =&gt; x&gt;<span class="number">3</span> &#125;</span><br><span class="line">    println(value)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//map å¯¹å…ƒç´ æ“ä½œ å¦‚åˆ‡åˆ†</span></span><br><span class="line">    <span class="keyword">val</span> nameList = <span class="type">List</span>(</span><br><span class="line">    <span class="string">"hello shsxt"</span>,</span><br><span class="line">    <span class="string">"hello xasxt"</span>,</span><br><span class="line">    <span class="string">"hello shsxt"</span></span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">val</span> mapResult:<span class="type">List</span>[<span class="type">Array</span>[<span class="type">String</span>]] = nameList.map&#123; </span><br><span class="line">        x =&gt; x.split(<span class="string">" "</span>) </span><br><span class="line">    &#125;</span><br><span class="line">    mapResult.foreach&#123;println&#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//flatmap å°†å…ƒç´ å‹æ‰å¹³,å…ˆmapå†flat</span></span><br><span class="line">    <span class="keyword">val</span> flatMapResult : <span class="type">List</span>[<span class="type">String</span>] = nameList.flatMap&#123; x =&gt; x.split(<span class="string">" "</span>) &#125;</span><br><span class="line">    flatMapResult.foreach &#123; println &#125;</span><br></pre></td></tr></table></figure><p><img src="images/map.jpg" alt=""></p><h2 id="3ã€set"><a href="#3ã€set" class="headerlink" title="3ã€set"></a>3ã€set</h2><p><code>æ³¨æ„ï¼š</code>seté›†åˆè‡ªåŠ¨å»é‡</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> s = <span class="type">Set</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="keyword">val</span> s1 = <span class="type">Set</span>(<span class="number">1</span>ï¼Œ<span class="number">2</span>ï¼Œ<span class="number">3</span>ï¼Œ<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†æ—¶ï¼Œè‡ªåŠ¨å»é‡</span></span><br><span class="line">s.foreach(println) </span><br><span class="line"><span class="keyword">for</span>(x&lt;- s)&#123;println(x)&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤é›†</span></span><br><span class="line"><span class="keyword">val</span> inse = s.intersect(s1)</span><br><span class="line"><span class="keyword">val</span> ins = s.&amp;(s1)</span><br><span class="line">inse.foreach(println)</span><br><span class="line">inse.foreach&#123;println&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å·®é›†</span></span><br><span class="line"><span class="keyword">val</span> di = s.diff(s1)</span><br><span class="line"><span class="keyword">val</span> de = s.&amp;~(s1)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­é›†:sæ˜¯ä¸æ˜¯s1çš„å­é›†</span></span><br><span class="line"><span class="keyword">val</span> boo: <span class="type">Boolean</span> = s.subsetof(s1)</span><br><span class="line"></span><br><span class="line"><span class="comment">//max ,min</span></span><br><span class="line"><span class="keyword">val</span> max = s.max</span><br><span class="line"><span class="keyword">val</span> min = s.min</span><br><span class="line">println(max + <span class="string">":"</span> + min)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è½¬æˆæ•°ç»„ï¼Œlist</span></span><br><span class="line">s.toArray.foreach(println)</span><br><span class="line">s.toList.foreach(println)</span><br><span class="line"></span><br><span class="line"><span class="comment">//mkString , å…ƒç´ ä»¥ï¼åˆ†éš”æ‹¼æˆå­—ç¬¦ä¸²</span></span><br><span class="line">println(s.mkString)</span><br><span class="line">println(s.mkstring(<span class="string">"!"</span>))</span><br></pre></td></tr></table></figure><h2 id="4ã€map"><a href="#4ã€map" class="headerlink" title="4ã€map"></a>4ã€map</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mapåˆ›å»ºæ—¶ï¼Œè‹¥keyç›¸åŒï¼Œåˆ™éƒ½ä¼šè¢«åä¸€ä¸ªkeyè¦†ç›–</span></span><br><span class="line"><span class="keyword">val</span> map =<span class="type">Map</span>ï¼ˆ<span class="string">"1"</span>-&gt;<span class="string">"a"</span>,(<span class="string">"3"</span>,<span class="string">"c"</span>),<span class="string">"2"</span>-&gt;<span class="string">"b"</span>ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–mapå€¼</span></span><br><span class="line">println(map.get(<span class="string">"1"</span>))</span><br><span class="line">println(map.get(<span class="string">"1"</span>).get)</span><br><span class="line"><span class="comment">//è·å–æŒ‡å®škeyï¼Œè‹¥æ²¡æœ‰ï¼Œå°±ç”¨å¦ä¸€ä¸ªæŒ‡å®šå€¼ä»£æ›¿</span></span><br><span class="line">println(map.getOrElse(<span class="string">"5"</span>,<span class="string">"100"</span>))</span><br><span class="line"><span class="keyword">val</span> res = map.get(<span class="string">"8"</span>).getOrElse(<span class="string">"800"</span>)</span><br><span class="line">println(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†map</span></span><br><span class="line"><span class="comment">//xä¸ºmapä¸­çš„ä¸€ç»„é”®å€¼å¯¹</span></span><br><span class="line"><span class="keyword">for</span>(x-&gt; map)&#123;</span><br><span class="line">println(<span class="string">"key:"</span>+x._1+<span class="string">",value:"</span>+ x._2) </span><br><span class="line">&#125;</span><br><span class="line">map.foreach(x=&gt;&#123;</span><br><span class="line"> println(<span class="string">"key:"</span>+x._1+<span class="string">",value:"</span>+ x._2)    </span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//éå†key</span></span><br><span class="line"><span class="keyword">val</span> keyIteratable = map.keys</span><br><span class="line">keyIteratable.foreach(k=&gt;&#123;</span><br><span class="line">println(<span class="string">"key"</span>+k+<span class="string">",value"</span>+map.get(k).get)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//éå†value</span></span><br><span class="line"><span class="keyword">val</span> valueIteratable = map.values</span><br><span class="line">valueIteratable.foreach&#123;v=&gt;&#123;</span><br><span class="line">    println(<span class="string">"value"</span>+v)</span><br><span class="line">&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå¹¶map</span></span><br><span class="line"><span class="keyword">val</span> map1 = <span class="type">Map</span>ï¼ˆ(<span class="number">1</span>ï¼Œ<span class="string">"a"</span>),(<span class="number">2</span>,<span class="string">"b"</span>),(<span class="number">3</span>,<span class="string">"c"</span>)ï¼‰</span><br><span class="line"><span class="keyword">val</span> map2 = <span class="type">Map</span>ï¼ˆ(<span class="number">1</span>,<span class="string">"aa"</span>),(<span class="number">2</span>,<span class="string">"bb"</span>),(<span class="number">3</span>,<span class="string">"cc"</span>)ï¼‰</span><br><span class="line">map1.++(map2).foreach(println)</span><br><span class="line">map1.++:(map2).oreach(println)</span><br><span class="line"></span><br><span class="line"><span class="comment">//mapæ“ä½œæ–¹æ³•</span></span><br><span class="line"><span class="comment">//filter:è¿‡æ»¤ï¼Œç•™ä¸‹ç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">val</span> result = map.filter(x=&gt;&#123;</span><br><span class="line"><span class="keyword">if</span>(x._1.equals(<span class="string">"1"</span>))</span><br><span class="line">    <span class="literal">true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line">result.foreach(println)</span><br><span class="line">map.filter(_._2.equals(<span class="string">"a"</span>)).foreach(println)</span><br><span class="line"><span class="comment">//countï¼šç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">val</span> countResult = map.countï¼ˆx=&gt;&#123;</span><br><span class="line">      x._1.equals(<span class="string">"1"</span>)</span><br><span class="line">ï¼‰</span><br><span class="line">println(countResult)    </span><br><span class="line"><span class="comment">//containsï¼šåˆ¤æ–­mapä¸­æ˜¯å¦åŒ…å«æŸä¸ªkey</span></span><br><span class="line">map.contains(<span class="string">"3"</span>)</span><br><span class="line"><span class="comment">//existï¼šåˆ¤æ–­ç¬¦åˆæ¡ä»¶çš„å…ƒç´ æ˜¯å­˜åœ¨</span></span><br><span class="line"><span class="comment">//è‹¥é‡åˆ°æ¡ä»¶è¿”å›ç»“æœä¸ºtrueï¼Œå°±åœæ­¢è¿­ä»£</span></span><br><span class="line">map.exists(x=&gt;&#123;</span><br><span class="line"><span class="keyword">if</span>ï¼ˆx._1.equals(<span class="string">"3"</span>))&#123;</span><br><span class="line">println(<span class="string">"å­˜åœ¨å–½"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">println(<span class="string">"ä¸å­˜åœ¨å–½"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5ã€å…ƒç»„Tuple"><a href="#5ã€å…ƒç»„Tuple" class="headerlink" title="5ã€å…ƒç»„Tuple"></a>5ã€å…ƒç»„Tuple</h2><p>åŒï¼šä¸åˆ—è¡¨ç±»ä¼¼</p><p>ä¸åŒï¼šå…ƒç»„å¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„å…ƒç´ ï¼›å…ƒç»„çš„å€¼æ˜¯é€šè¿‡å°†å•ä¸ªå€¼åŒ…å«åœ¨åœ†æ‹¬å·ä¸­æ„æˆ</p><p><code>æ³¨æ„ï¼š</code>Tupleæœ€å¤šæ”¯æŒ22ä¸ªå‚æ•°</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ƒç´ ä¸ªæ•°å–å†³äºTupleåé¢çš„æ•°å­—</span></span><br><span class="line"><span class="keyword">val</span> t1 = <span class="keyword">new</span> <span class="type">Tuple1</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">val</span> t2 = <span class="keyword">new</span> <span class="type">Tuple2</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">val</span> t3 = <span class="type">Tuple3</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)  </span><br><span class="line"><span class="keyword">val</span> t5 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>ï¼Œ<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="keyword">val</span> t22 = <span class="keyword">new</span> <span class="type">Tuple22</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span>)</span><br><span class="line"><span class="comment">//è·å–å…ƒç»„ä¸­çš„å€¼ ï¼šç”¨  ._XX  </span></span><br><span class="line">printlnï¼ˆt5._4ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> t = <span class="type">Tuple2</span>((<span class="number">1</span>,<span class="number">2</span>),(<span class="string">"zhangsan"</span>,<span class="string">"lisi"</span>))</span><br><span class="line">println(t._1._2)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…ƒç»„éå†ï¼šå…ƒç´ è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">val</span> interator = t5.productorInterator</span><br><span class="line">interator.foreach(println)</span><br><span class="line"><span class="keyword">while</span>(interator.hasNext)&#123;</span><br><span class="line">    println(intrator.next())</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…ƒç´ ç¿»è½¬ swapï¼Œ åªé’ˆå¯¹äºŒå…ƒæ•°ç»„</span></span><br><span class="line">println(t2.swap)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è½¬æ¢æˆå­—ç¬¦ä¸²</span></span><br><span class="line">println(t5.toString())</span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€trait"><a href="#ä¸ƒã€trait" class="headerlink" title="ä¸ƒã€trait"></a>ä¸ƒã€trait</h1><p>Scalaï¼šåªæœ‰extends  ï¼Œå¯ä»¥ç»§æ‰¿å¤šä¸ªTrait</p><p>Scala Trait(ç‰¹å¾) ç›¸å½“äº Java çš„æ¥å£å’ŒæŠ½è±¡ç±»çš„ç»“åˆ</p><p>å¯ä»¥å®šä¹‰å±æ€§å’Œæ–¹æ³•</p><p><code>æ³¨æ„ï¼š</code></p><ul><li>è‹¥ç»§æ‰¿çš„å¤šä¸ªtraitä¸­åŒ…å«åŒåçš„å±æ€§å’Œæ–¹æ³•ï¼Œå°±å¿…é¡»åœ¨åœ¨ç±»ä¸­ä½¿ç”¨<code>override</code> é‡æ–°å®šä¹‰</li><li>è‹¥é‡æ–°å®šä¹‰çš„å±æ€§æ˜¯ä½¿ç”¨<code>var</code>å®šä¹‰çš„åˆ™ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯ä½¿ç”¨<code>val</code>å®šä¹‰çš„å±æ€§æ‰å¯ä½¿ç”¨override</li><li>traitä¸­ä¸èƒ½ä¼ å‚æ•°</li></ul><p><code>ä¸¾ä¾‹</code>ï¼štraitä¸­å¸¦å±æ€§å¸¦æ–¹æ³•å®ç°</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Read</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"read"</span></span><br><span class="line">    <span class="keyword">val</span> age = <span class="number">18</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span></span>():<span class="type">Unit</span>=&#123;</span><br><span class="line">        println(<span class="string">"read---"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Write</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"write"</span> </span><br><span class="line">    <span class="keyword">val</span> age = <span class="number">19</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span></span>():<span class="type">Unit</span>=&#123;</span><br><span class="line">        println(<span class="string">"write----"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span> <span class="keyword">extends</span> <span class="title">Read</span> <span class="keyword">with</span> <span class="title">Write</span></span>&#123;</span><br><span class="line">  <span class="comment">//å‰ænameå¿…é¡»æ˜¯ç”¨valå®šä¹‰çš„</span></span><br><span class="line">  <span class="comment">//  override var name  = "person"</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> age = <span class="number">20</span></span><br><span class="line">    name  = <span class="string">"person"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Trait</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> human = <span class="keyword">new</span> <span class="type">Human</span>() </span><br><span class="line">        println(human.name)</span><br><span class="line">        human.read()</span><br><span class="line">        human.write()</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ä¸¾ä¾‹</code>ï¼štraitä¸­å¸¦æ–¹æ³•ä¸å®ç°</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Equal</span></span>&#123;</span><br><span class="line">    <span class="comment">//æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isEqual</span></span>(p:<span class="type">Point</span>):<span class="type">Boolean</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isNoEqual</span></span>(p:<span class="type">Point</span>):<span class="type">Boolean</span>=&#123;</span><br><span class="line">        !isEqual(p)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>(<span class="params">x:<span class="type">Int</span>,y:<span class="type">Int</span></span>) <span class="keyword">extends</span> <span class="title">Equal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xx = x</span><br><span class="line">    <span class="keyword">var</span> yy = y</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">isEqual</span> </span>(p:<span class="type">Point</span>) = &#123;</span><br><span class="line">       p.xx == xx &amp; p.yy ==yy </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isEqule</span></span>(p:<span class="type">Any</span>) = &#123;</span><br><span class="line">    p.isInstanceOf[<span class="type">Point</span>] &amp;&amp; p.asInstanceOf[<span class="type">Point</span>].xx==xx</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Trait2</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span> = &#123;</span><br><span class="line">       <span class="keyword">val</span> p1 = <span class="keyword">new</span> <span class="type">Point</span>(<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line">       <span class="keyword">val</span> p2 = <span class="keyword">new</span> <span class="type">Point</span>(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">       ptintln(p1.isNoEqual(p2))</span><br><span class="line">       ptintln(p1.isEqual(p2))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…«ã€æ¨¡å¼åŒ¹é…match"><a href="#å…«ã€æ¨¡å¼åŒ¹é…match" class="headerlink" title="å…«ã€æ¨¡å¼åŒ¹é…match"></a>å…«ã€æ¨¡å¼åŒ¹é…match</h1><p>1ã€æ¦‚å¿µç†è§£</p><ul><li>ä¸€ä¸ªæ¨¡å¼åŒ¹é…åŒ…å«å¤šä¸ªå¤‡é€‰é¡¹ï¼Œä¸”æ¯ä¸ªéƒ½ä»¥å…³é”®å­—caseå¼€å§‹</li><li>æ¯ä¸ªå¤‡é€‰é¡¹éƒ½åŒ…å«ä¸€ä¸ªæ¨¡å¼å’Œå¤šä¸ªè¡¨è¾¾å¼ï¼Œä¸”ç”¨ç®­å¤´ç¬¦å· =&gt; éš”å¼€äº†æ¨¡å¼å’Œè¡¨è¾¾å¼ã€‚</li><li>Ã˜ æ¨¡å¼åŒ¹é…ä¸ä»…å¯ä»¥åŒ¹é…å€¼è¿˜å¯ä»¥åŒ¹é…ç±»å‹</li><li>Ã˜  ä»ä¸Šåˆ°ä¸‹é¡ºåºåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ°åˆ™ä¸å†å¾€ä¸‹åŒ¹é…</li><li>Ã˜  éƒ½åŒ¹é…ä¸ä¸Šæ—¶ï¼Œä¼šåŒ¹é…åˆ°case_ ,ç›¸å½“äºdefault</li><li>Ã˜  match çš„æœ€å¤–é¢çš„â€{ }â€å¯ä»¥å»æ‰çœ‹æˆä¸€ä¸ªè¯­å¥</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Match</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span> = &#123;</span><br><span class="line">       <span class="keyword">val</span> p1 =(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>f,<span class="string">"4"</span>,<span class="string">"abc"</span>,<span class="number">55</span>d)</span><br><span class="line">        p1.foreach(x=&gt;&#123;</span><br><span class="line">            println(mymatch(x))</span><br><span class="line">        &#125;)                </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mymatch</span></span>(x:<span class="type">Any</span>)=&#123;     </span><br><span class="line">        x <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"4"</span> =&gt;println(<span class="string">"macth 4--"</span>)</span><br><span class="line">            <span class="keyword">case</span> x:<span class="type">String</span> =&gt; println(<span class="string">"match String"</span>)</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span> =&gt; println(<span class="string">"1--"</span>)</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span> =&gt; println(<span class="string">"2--"</span>)</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>f =&gt; println(<span class="string">"3f--"</span>)</span><br><span class="line">    <span class="comment">//      case x :Double =&gt; println("type is Double")</span></span><br><span class="line">            <span class="keyword">case</span> _ =&gt; println(<span class="string">"no match--"</span>)</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¹ã€æ ·ä¾‹ç±»"><a href="#ä¹ã€æ ·ä¾‹ç±»" class="headerlink" title="ä¹ã€æ ·ä¾‹ç±»"></a>ä¹ã€æ ·ä¾‹ç±»</h1><p>1ã€æ¦‚å¿µç†è§£</p><ul><li><p>ä½¿ç”¨äº†caseå…³é”®å­—çš„ç±»å®šä¹‰å°±æ˜¯æ ·ä¾‹ç±»(case classes)</p></li><li><p>æ ·ä¾‹ç±»æ˜¯ç§ç‰¹æ®Šçš„ç±»ã€‚å®ç°äº†ç±»æ„é€ å‚æ•°çš„getteræ–¹æ³•ï¼ˆæ„é€ å‚æ•°é»˜è®¤è¢«å£°æ˜ä¸ºvalï¼‰ï¼Œå½“æ„é€ å‚æ•°æ˜¯å£°æ˜ä¸ºvarç±»å‹çš„ï¼Œå®ƒå°†å¸®ä½ å®ç°setterå’Œgetteræ–¹æ³•ã€‚</p><p>Ã˜  æ ·ä¾‹ç±»é»˜è®¤å¸®ä½ å®ç°äº†toString,equalsï¼Œcopyå’ŒhashCodeç­‰æ–¹æ³•ã€‚</p><p>Ã˜  æ ·ä¾‹ç±»å¯ä»¥new, ä¹Ÿå¯ä»¥ä¸ç”¨new</p></li></ul><p>2ã€ä¸¾ä¾‹ï¼šç»“åˆæ¨¡å¼åŒ¹é…çš„ä»£ç </p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Match2</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> zs = <span class="keyword">new</span> <span class="type">Woman</span>(<span class="number">18</span>,<span class="string">"zs"</span>)</span><br><span class="line">    println(zs.age + <span class="string">" : "</span>+ zs . name) </span><br><span class="line">        </span><br><span class="line">    <span class="keyword">val</span> mm = <span class="type">Woman</span>(<span class="number">19</span>,<span class="string">"meimei"</span>)</span><br><span class="line">    <span class="keyword">val</span> nn = <span class="type">Woman</span>(<span class="number">19</span>,<span class="string">"meimei"</span>)</span><br><span class="line">    println(mm.equals(zs))</span><br><span class="line">    println(mm.equals(nn))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">val</span> wo = <span class="type">List</span>(ls,mm)</span><br><span class="line">    wo.foreach(x=&gt;&#123;</span><br><span class="line">            x <span class="keyword">match</span> &#123;</span><br><span class="line">                <span class="keyword">case</span> x:<span class="type">Woman</span> =&gt; println(<span class="string">"match Woman--"</span>)</span><br><span class="line">                <span class="keyword">case</span> <span class="type">Woman</span>(<span class="number">18</span>,<span class="string">"ls"</span>) =&gt; println(<span class="string">"ls"</span>)</span><br><span class="line">                <span class="keyword">case</span> <span class="type">Woman</span>(<span class="number">19</span>,<span class="string">"mm"</span>) =&gt; println(<span class="string">"mm"</span>)</span><br><span class="line">                <span class="keyword">case</span> <span class="type">Woman</span>(<span class="number">19</span>,<span class="string">"zs"</span>) =&gt; println(<span class="string">"zs"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Woman</span> (<span class="params">age:<span class="type">Int</span> ,name:<span class="type">String</span></span>)</span></span><br></pre></td></tr></table></figure><h1 id="åã€Actor-Model"><a href="#åã€Actor-Model" class="headerlink" title="åã€Actor Model"></a>åã€<strong>Actor Model</strong></h1><p>\1.    æ¦‚å¿µç†è§£</p><p>Actor Modelæ˜¯ç”¨æ¥ç¼–å†™å¹¶è¡Œè®¡ç®—æˆ–åˆ†å¸ƒå¼ç³»ç»Ÿçš„é«˜å±‚æ¬¡æŠ½è±¡ï¼ˆç±»ä¼¼javaä¸­çš„Threadï¼‰è®©ç¨‹åºå‘˜ä¸å¿…ä¸ºå¤šçº¿ç¨‹æ¨¡å¼ä¸‹å…±äº«é”è€Œçƒ¦æ¼,è¢«ç”¨åœ¨Erlang è¯­è¨€ä¸Š, é«˜å¯ç”¨æ€§99.9999999 % ä¸€å¹´åªæœ‰31ms å®•æœºActorså°†çŠ¶æ€å’Œè¡Œä¸ºå°è£…åœ¨ä¸€ä¸ªè½»é‡çš„è¿›ç¨‹/çº¿ç¨‹ä¸­ï¼Œä½†æ˜¯ä¸å’Œå…¶ä»–Actorsåˆ†äº«çŠ¶æ€ï¼Œæ¯ä¸ªActorsæœ‰è‡ªå·±çš„ä¸–ç•Œè§‚ï¼Œå½“éœ€è¦å’Œå…¶ä»–Actorsäº¤äº’æ—¶ï¼Œé€šè¿‡å‘é€äº‹ä»¶å’Œæ¶ˆæ¯ï¼Œå‘é€æ˜¯å¼‚æ­¥çš„ï¼Œéå µå¡çš„(fire-andforget)ï¼Œå‘é€æ¶ˆæ¯åä¸å¿…ç­‰å¦å¤–Actorså›å¤ï¼Œä¹Ÿä¸å¿…æš‚åœï¼Œæ¯ä¸ªActorsæœ‰è‡ªå·±çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿›æ¥çš„æ¶ˆæ¯æŒ‰å…ˆæ¥ååˆ°æ’åˆ—ï¼Œè¿™å°±æœ‰å¾ˆå¥½çš„å¹¶å‘ç­–ç•¥å’Œå¯ä¼¸ç¼©æ€§ï¼Œå¯ä»¥å»ºç«‹æ€§èƒ½å¾ˆå¥½çš„äº‹ä»¶é©±åŠ¨ç³»ç»Ÿã€‚</p><p>Actorçš„ç‰¹å¾ï¼š</p><p>Ã˜  ActorModelæ˜¯æ¶ˆæ¯ä¼ é€’æ¨¡å‹,åŸºæœ¬ç‰¹å¾å°±æ˜¯æ¶ˆæ¯ä¼ é€’</p><p>Ã˜  æ¶ˆæ¯å‘é€æ˜¯å¼‚æ­¥çš„ï¼Œéé˜»å¡çš„</p><p>Ã˜  æ¶ˆæ¯ä¸€æ—¦å‘é€æˆåŠŸï¼Œä¸èƒ½ä¿®æ”¹</p><p>Ã˜  Actorä¹‹é—´ä¼ é€’æ—¶ï¼Œè‡ªå·±å†³å®šå†³å®šå»æ£€æŸ¥æ¶ˆæ¯ï¼Œè€Œä¸æ˜¯ä¸€ç›´ç­‰å¾…ï¼Œæ˜¯å¼‚æ­¥éé˜»å¡çš„</p><p>ä»€ä¹ˆæ˜¯Akka</p><p>Akka æ˜¯ä¸€ä¸ªç”¨ Scala ç¼–å†™çš„åº“ï¼Œç”¨äºç®€åŒ–ç¼–å†™å®¹é”™çš„ã€é«˜å¯ä¼¸ç¼©æ€§çš„ Java å’ŒScala çš„ Actor æ¨¡å‹åº”ç”¨ï¼Œåº•å±‚å®ç°å°±æ˜¯Actor,Akkaæ˜¯ä¸€ä¸ªå¼€å‘åº“å’Œè¿è¡Œç¯å¢ƒï¼Œå¯ä»¥ç”¨äºæ„å»ºé«˜å¹¶å‘ã€åˆ†å¸ƒå¼ã€å¯å®¹é”™ã€äº‹ä»¶é©±åŠ¨çš„åŸºäºJVMçš„åº”ç”¨ã€‚ä½¿æ„å»ºé«˜å¹¶å‘çš„åˆ†å¸ƒå¼åº”ç”¨æ›´åŠ å®¹æ˜“ã€‚</p><p>spark1.6ç‰ˆæœ¬ä¹‹å‰ï¼Œsparkåˆ†å¸ƒå¼èŠ‚ç‚¹ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ä½¿ç”¨çš„å°±æ˜¯Akkaï¼Œåº•å±‚ä¹Ÿå°±æ˜¯actorå®ç°çš„ã€‚1.6ä¹‹åä½¿ç”¨çš„nettyä¼ è¾“ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyActor</span> <span class="keyword">extends</span> <span class="title">Actor</span></span>&#123;</span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">act</span></span>():<span class="type">Unit</span>=&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123; receive &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"hello"</span>=&gt;println(<span class="string">"hello"</span>)  </span><br><span class="line">        <span class="keyword">case</span> x:<span class="type">String</span> =&gt; println(<span class="string">"save String ="</span>+ x)</span><br><span class="line">        <span class="keyword">case</span> x:<span class="type">Int</span> =&gt; println(<span class="string">"save Int"</span>)</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; println(<span class="string">"save default"</span>)</span><br><span class="line"></span><br><span class="line">    &#125;                 </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Actor</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span> = &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">val</span> actor = <span class="keyword">new</span> <span class="type">MyActor</span>()</span><br><span class="line">        <span class="comment">//å¯åŠ¨</span></span><br><span class="line">        actor.start()</span><br><span class="line">        <span class="comment">//å‘é€æ¶ˆæ¯</span></span><br><span class="line">        actor ! <span class="string">"hello"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Msg</span>(<span class="params">actor</span>)(<span class="params"></span>)</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">WoActor</span>(<span class="params"></span>) <span class="keyword">extends</span> <span class="title">Actor</span></span>&#123;</span><br><span class="line">    oevrride <span class="function"><span class="keyword">def</span> <span class="title">act</span></span>():<span class="type">Unit</span> =&#123;</span><br><span class="line">          <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            receive &#123;</span><br><span class="line">                <span class="keyword">case</span> msg:<span class="type">Msg</span> =&gt;&#123;</span><br><span class="line">                    msg.mes <span class="comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span></span><br><span class="line">                    msg.actor <span class="comment">//å›å¤çš„æ¶ˆæ¯</span></span><br><span class="line">                    println(<span class="string">"too"</span>)</span><br><span class="line">                    msg.actor ! <span class="string">"hahaha"</span></span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuActor</span>(<span class="params">wo:<span class="type">WoActor</span></span>) <span class="keyword">extends</span> <span class="title">Actor</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    oevrride <span class="function"><span class="keyword">def</span> <span class="title">act</span></span>():<span class="type">Unit</span> =&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            receive &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"hello"</span> =&gt;&#123;</span><br><span class="line">                    println(<span class="string">"too"</span>)</span><br><span class="line">                    <span class="keyword">val</span> msg = <span class="type">Msg</span>(<span class="keyword">this</span>,<span class="string">"rrr"</span>)</span><br><span class="line">                    wo ! msg</span><br><span class="line">                &#125;               </span><br><span class="line">                <span class="keyword">case</span> <span class="string">"rrr"</span> =&gt;&#123;</span><br><span class="line">                    println(<span class="string">"uuu"</span>)</span><br><span class="line">                   <span class="keyword">val</span> msg = <span class="type">Msg</span>(<span class="keyword">this</span>,<span class="string">"heheh"</span>)</span><br><span class="line">                    wo ! msg</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Actor2</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span> = &#123;</span><br><span class="line">     <span class="keyword">val</span> woman = <span class="keyword">new</span> <span class="type">WoActor</span>()</span><br><span class="line">    <span class="keyword">val</span> human = <span class="keyword">new</span> <span class="type">HuActor</span>(woman)</span><br><span class="line">        </span><br><span class="line">        human.start()</span><br><span class="line">        woman.start()</span><br><span class="line">        human ! <span class="string">"hello"</span>        </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Message</span>(<span class="params">actor:<span class="type">Actor</span>,msg:<span class="type">Any</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Actor1</span> <span class="keyword">extends</span> <span class="title">Actor</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">act</span></span>()&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">      receive&#123;</span><br><span class="line">        <span class="keyword">case</span>  msg :<span class="type">Message</span> =&gt; &#123;</span><br><span class="line">          println(<span class="string">"i sava msg! = "</span>+ msg.msg)</span><br><span class="line">          </span><br><span class="line">          msg.actor!<span class="string">"i love you too !"</span></span><br><span class="line">          &#125;</span><br><span class="line">        <span class="keyword">case</span> msg :<span class="type">String</span> =&gt; println(msg)</span><br><span class="line">        <span class="keyword">case</span>  _ =&gt; println(<span class="string">"default msg!"</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Actor2</span>(<span class="params">actor :<span class="type">Actor</span></span>) <span class="keyword">extends</span> <span class="title">Actor</span></span>&#123;</span><br><span class="line">  actor ! <span class="type">Message</span>(<span class="keyword">this</span>,<span class="string">"i love you !"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">act</span></span>()&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">receive&#123;</span><br><span class="line">  <span class="keyword">case</span> msg :<span class="type">String</span> =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(msg.equals(<span class="string">"i love you too !"</span>))&#123;</span><br><span class="line">      println(msg)</span><br><span class="line">     actor! <span class="string">"could we have a date !"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">case</span>  _ =&gt; println(<span class="string">"default msg!"</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Lesson_Actor2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> actor1 = <span class="keyword">new</span> <span class="type">Actor1</span>()</span><br><span class="line">    actor1.start()</span><br><span class="line">    <span class="keyword">val</span> actor2 = <span class="keyword">new</span> <span class="type">Actor2</span>(actor1)</span><br><span class="line">    actor2.start()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åä¸€ã€WordCount"><a href="#åä¸€ã€WordCount" class="headerlink" title="åä¸€ã€WordCount"></a>åä¸€ã€WordCount</h1><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨libæ–‡ä»¶ä¸­æ·»åŠ sparkçš„jaråŒ… ï¼Œå¹¶addLib</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkConf</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span>.rddToPairRDDFunctions</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>()</span><br><span class="line">      </span><br><span class="line">    conf.setMaster(<span class="string">"local"</span>).setAppName(<span class="string">"WC"</span>)</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)  <span class="comment">//ç”¨äºäº†è§£é›†ç¾¤</span></span><br><span class="line">      </span><br><span class="line">    <span class="comment">//RDD:é›†åˆ ï¼ŒæŠ½è±¡çš„</span></span><br><span class="line">    <span class="keyword">val</span> lines :<span class="type">RDD</span>[<span class="type">String</span>] = sc.textFile(<span class="string">"./words.txt"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ–¹å¼ä¸€ï¼š</span></span><br><span class="line">    <span class="keyword">val</span> word :<span class="type">RDD</span>[<span class="type">String</span>]  = lines.flatMap&#123;lines =&gt; &#123;</span><br><span class="line">      lines.split(<span class="string">" "</span>)  <span class="comment">//åŒ¿åå‡½æ•°</span></span><br><span class="line">    &#125;&#125;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> pairs:<span class="type">RDD</span>[(<span class="type">String</span>,<span class="type">Int</span>)] = word.map&#123; x =&gt; (x,<span class="number">1</span>) &#125;</span><br><span class="line">      <span class="comment">//map :ä¸€è¿›ä¸€å‡º    flatmapï¼šä¸€è¿›å¤šå‡º    xï¼šæ¯ä¸ªå•è¯</span></span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> result:<span class="type">RDD</span>[(<span class="type">String</span>,<span class="type">Int</span>)] = pairs.reduceByKey&#123;(a,b)=&gt; &#123;</span><br><span class="line">        println(<span class="string">"a:"</span>+a+<span class="string">",b:"</span>+b)</span><br><span class="line">        a+b    <span class="comment">//ç›¸å½“äº  a = a + bç”¨äºä¸‹ä¸€ä¸ªç»Ÿè®¡</span></span><br><span class="line">    &#125;&#125;</span><br><span class="line">      <span class="comment">//ä¼˜åŒ–ï¼šæ’åº  falseï¼ˆé™åºï¼‰  ç¬¬ä¸€ä¸ª_ ä»£è¡¨æ¯ä¸ªå…ƒç´ </span></span><br><span class="line">    result.sortBy(_._2,<span class="literal">false</span>).foreach(println)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ–¹å¼äºŒï¼šç®€åŒ–å†™æ³•</span></span><br><span class="line">    lines.flatMap &#123; _.split(<span class="string">" "</span>)&#125;.map &#123; (_,<span class="number">1</span>)&#125;.reduceByKey(_+_).foreach(println)</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼–ç¨‹è¯­è¨€ </tag>
            
            <tag> é™æ€ </tag>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså­¦ä¹ </title>
      <link href="/2019/02/14/Redis%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/02/14/Redis%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Redisçš„ç®€ä»‹"><a href="#ä¸€ã€Redisçš„ç®€ä»‹" class="headerlink" title="ä¸€ã€Redisçš„ç®€ä»‹"></a>ä¸€ã€Redisçš„ç®€ä»‹</h1><h2 id="1ã€å‰æƒ…æè¦"><a href="#1ã€å‰æƒ…æè¦" class="headerlink" title="1ã€å‰æƒ…æè¦"></a>1ã€å‰æƒ…æè¦</h2><p><strong>ç£ç›˜æ•°æ®åº“</strong>ï¼š </p><p> MySQLï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰<br> Hbase</p><p><img src="images/redis1.jpg" alt=""></p><p><strong>å†…å­˜æ•°æ®åº“</strong>ï¼š<br>  Redis<br>  memcached<br>  ï¼ˆæˆæœ¬é«˜ã€æ€§èƒ½å¥½ã€è¯»å†™é€Ÿåº¦å¿«ã€æ•°æ®å®‰å…¨æ€§ä½ã€ç›´æ¥æŠŠå€¼æ”¾åˆ°å†…å­˜é‡Œé¢ï¼Œå†…å­˜æ•°æ®åº“å°±ç›´æ¥æŠŠå€¼å–åˆ°ï¼‰</p><p><img src="images/redis2.jpg" alt=""></p><h2 id="2ã€ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶"><a href="#2ã€ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶" class="headerlink" title="2ã€ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶"></a>2ã€ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶</h2><blockquote><p>äºŒå…«æ³•åˆ™ï¼š80%æ˜¯ç»å¸¸è¢«æŸ¥è¯¢ï¼Œä½¿ç”¨å†…å­˜æ•°æ®åº“åšç¼“å­˜ä¸­é—´ä»¶ï¼Œè¯»å–æ€§èƒ½é«˜</p></blockquote><h1 id="äºŒã€Redisçš„ç‰¹ç‚¹"><a href="#äºŒã€Redisçš„ç‰¹ç‚¹" class="headerlink" title="äºŒã€Redisçš„ç‰¹ç‚¹"></a>äºŒã€Redisçš„ç‰¹ç‚¹</h1><h2 id="1ã€æ•°æ®ç»“æ„ä¸°å¯Œ"><a href="#1ã€æ•°æ®ç»“æ„ä¸°å¯Œ" class="headerlink" title="1ã€æ•°æ®ç»“æ„ä¸°å¯Œ"></a>1ã€æ•°æ®ç»“æ„ä¸°å¯Œ</h2><p>Redisè™½ç„¶æ˜¯é”®å€¼å¯¹æ•°æ®åº“ï¼Œä½†ä»–æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼ˆä¸»è¦æ˜¯ä¸åŒç±»å‹çš„valueï¼‰</p><blockquote><p>å­—ç¬¦ä¸²ã€æ•£åˆ—ï¼ˆhashesï¼‰ï¼Œåˆ—è¡¨ï¼ˆlistsï¼‰ï¼Œé›†åˆï¼ˆsetsï¼‰ï¼Œæœ‰åºé›†åˆï¼ˆsorted setsï¼‰</p></blockquote><p><img src="images/redis0.jpg" alt=""></p><h2 id="2ã€æ•°æ®çš„æŒä¹…åŒ–"><a href="#2ã€æ•°æ®çš„æŒä¹…åŒ–" class="headerlink" title="2ã€æ•°æ®çš„æŒä¹…åŒ–"></a>2ã€æ•°æ®çš„æŒä¹…åŒ–</h2><p>Redis æ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½åˆ°å†…å­˜è¿›è¡Œä½¿ç”¨</p><h2 id="3ã€æ•°æ®çš„å¤‡ä»½"><a href="#3ã€æ•°æ®çš„å¤‡ä»½" class="headerlink" title="3ã€æ•°æ®çš„å¤‡ä»½"></a>3ã€æ•°æ®çš„å¤‡ä»½</h2><p>Redis æ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³ master-slave æ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</p><h1 id="ä¸‰ã€Redisçš„å®‰è£…"><a href="#ä¸‰ã€Redisçš„å®‰è£…" class="headerlink" title="ä¸‰ã€Redisçš„å®‰è£…"></a>ä¸‰ã€Redisçš„å®‰è£…</h1><h2 id="1ã€ä¸‹è½½å®‰è£…åŒ…"><a href="#1ã€ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="1ã€ä¸‹è½½å®‰è£…åŒ…"></a>1ã€ä¸‹è½½å®‰è£…åŒ…</h2><p>redis-3.2.9.tar.gz </p><p>ç½‘å€ï¼š<a href="http://www.redis.cn/download.html" target="_blank" rel="noopener">http://www.redis.cn/download.html</a></p><h2 id="2ã€ä¾èµ–è½¯ä»¶å®‰è£…"><a href="#2ã€ä¾èµ–è½¯ä»¶å®‰è£…" class="headerlink" title="2ã€ä¾èµ–è½¯ä»¶å®‰è£…"></a>2ã€ä¾èµ–è½¯ä»¶å®‰è£…</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc tcl -y</span><br></pre></td></tr></table></figure><h2 id="3ã€è§£å‹-redis"><a href="#3ã€è§£å‹-redis" class="headerlink" title="3ã€è§£å‹ redis"></a>3ã€è§£å‹ redis</h2><p>å¹¶è¿›å…¥è§£å‹ç›®å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zvxf redis-3.2.9.tar.gz</span><br></pre></td></tr></table></figure><h2 id="4ã€-æ‰§è¡Œ-ç¼–è¯‘å‘½ä»¤"><a href="#4ã€-æ‰§è¡Œ-ç¼–è¯‘å‘½ä»¤" class="headerlink" title="4ã€ æ‰§è¡Œ ç¼–è¯‘å‘½ä»¤"></a>4ã€ æ‰§è¡Œ ç¼–è¯‘å‘½ä»¤</h2><p>ï¼ˆ<code>æ³¨æ„ï¼š</code>å½“å‰è·¯å¾„ä¸‹éœ€åŒ…å« makefileæ–‡ä»¶  ï¼š ç”¨äºæ‰‹åŠ¨ç¼–è¯‘ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h2 id="5ã€ä¿®æ”¹-redis-çš„é…ç½®æ–‡ä»¶"><a href="#5ã€ä¿®æ”¹-redis-çš„é…ç½®æ–‡ä»¶" class="headerlink" title="5ã€ä¿®æ”¹ redis çš„é…ç½®æ–‡ä»¶"></a>5ã€ä¿®æ”¹ redis çš„é…ç½®æ–‡ä»¶</h2><p> redis.config ( å…ˆ å¤‡ä»½ä¸€ä¸ªåŸå‚é…ç½®æ–‡ä»¶)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim redis.config</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹è¿è¡Œæ¨¡å¼ä¸ºåå°è¿è¡Œï¼ˆå¦‚æœä¸ºnoï¼Œå¯åŠ¨redis-serveråï¼Œæ§åˆ¶å°å°±ä¼šå¡åœ¨å¯åŠ¨çŠ¶æ€ï¼‰daemonizeå®ˆæŠ¤è¿›ç¨‹</li></ul><blockquote><p>daemonize yes</p></blockquote><ul><li>æŒ‡å®šredisæ•°æ®æŒä¹…åŒ–çš„è·¯å¾„(åœ¨æ‰§è¡Œredis-cliå‘½ä»¤çš„å½“å‰è·¯å¾„ï¼Œä¼šç”Ÿæˆdump.rdbæ–‡ä»¶)</li></ul><blockquote><p>dir   ./</p></blockquote><ul><li>ä½¿ç”¨é»˜è®¤çš„ redis.conf æ–‡ä»¶ï¼Œredis é»˜è®¤åªèƒ½é€šè¿‡ 127.0.0.1:6379 è¿™ä¸ªåœ°å€è®¿é—®ï¼Œè¿™æ ·å°±åªèƒ½åœ¨æœ¬æœºä¸Šæ“ä½œäº†</li><li>æƒ³è¦è¿œç¨‹æ“ä½œï¼Œéœ€è¦ä¿®æ”¹redis.conf è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„ ip åœ°å€ï¼Œ åœ¨bind 127.0.0.1 åé¢è¿½åŠ </li></ul><blockquote><p>bind 127.0.0.1 192.168.198.128</p></blockquote><h2 id="6ã€å¯åŠ¨serveræœåŠ¡"><a href="#6ã€å¯åŠ¨serveræœåŠ¡" class="headerlink" title="6ã€å¯åŠ¨serveræœåŠ¡"></a>6ã€å¯åŠ¨serveræœåŠ¡</h2><p>ï¼ˆå¦‚åœ¨redisçš„è§£å‹ç›®å½•ä¸‹ï¼‰</p><blockquote><p>å‘½ä»¤ï¼š redis-server é…ç½®æ–‡ä»¶çš„åœ°å€</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server redis-conf</span><br></pre></td></tr></table></figure><p>ç»ˆæ­¢æœåŠ¡ï¼šï¼ˆæŸ¥è¯¢redisè¿›ç¨‹å·ï¼Œç„¶åï¼Œkillè¯¥è¿›ç¨‹ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep redis</span><br><span class="line">kill è¿›ç¨‹å·</span><br></pre></td></tr></table></figure><h2 id="7ã€å¯åŠ¨å®¢æˆ·ç«¯æœåŠ¡"><a href="#7ã€å¯åŠ¨å®¢æˆ·ç«¯æœåŠ¡" class="headerlink" title="7ã€å¯åŠ¨å®¢æˆ·ç«¯æœåŠ¡"></a>7ã€å¯åŠ¨å®¢æˆ·ç«¯æœåŠ¡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºï¼š</p><blockquote><p>127.0.0.1:6379&gt; </p></blockquote><h1 id="å››ã€Redisçš„ä½¿ç”¨"><a href="#å››ã€Redisçš„ä½¿ç”¨" class="headerlink" title="å››ã€Redisçš„ä½¿ç”¨"></a>å››ã€Redisçš„ä½¿ç”¨</h1><h2 id="0ã€å‰æƒ…æè¦"><a href="#0ã€å‰æƒ…æè¦" class="headerlink" title="0ã€å‰æƒ…æè¦"></a>0ã€å‰æƒ…æè¦</h2><p>Redisçš„key å€¼æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€å¯ä»¥ç”¨ä»»ä½•äºŒè¿›åˆ¶åºåˆ—ä½œä¸º keyå€¼ã€‚</p><h2 id="1ã€åˆ‡æ¢æ•°æ®åº“ï¼ˆå®ä¾‹ï¼‰"><a href="#1ã€åˆ‡æ¢æ•°æ®åº“ï¼ˆå®ä¾‹ï¼‰" class="headerlink" title="1ã€åˆ‡æ¢æ•°æ®åº“ï¼ˆå®ä¾‹ï¼‰"></a>1ã€åˆ‡æ¢æ•°æ®åº“ï¼ˆå®ä¾‹ï¼‰</h2><blockquote><p>select databaseid é»˜è®¤å…±æœ‰ 16 ä¸ªå®ä¾‹åº“ï¼Œ</p><p>ç™»å½•æ—¶æ˜¯ ID ä¸º0 çš„æ•°æ®åº“ï¼Œæ€»å…±æœ‰ 16 ä¸ª</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 0</span><br></pre></td></tr></table></figure><h2 id="2ã€Keyæ“ä½œï¼š"><a href="#2ã€Keyæ“ä½œï¼š" class="headerlink" title="2ã€Keyæ“ä½œï¼š"></a>2ã€Keyæ“ä½œï¼š</h2><p>ï¼ˆå‰æï¼šæ˜¯é’ˆå¯¹å·²ç»å­˜åœ¨keyï¼‰</p><blockquote><p>KEYS pattern<br>æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼ pattern çš„ key ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> keys * </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure></blockquote><blockquote><p>åˆ—å‡ºæ‰€æœ‰Key</p></blockquote><blockquote><p>EXISTS  key<br>æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; EXISTS  name</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è‹¥æ˜¾ç¤º0ï¼Œåˆ™ä¸å­˜åœ¨ï¼›è‹¥æ˜¾ç¤º1ï¼Œåˆ™å­˜åœ¨</p></blockquote><blockquote><p>EXPIRE key seconds<br>ä¸ºç»™å®š key è®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼Œå½“ key è¿‡æœŸæ—¶(ç”Ÿå­˜æ—¶é—´ä¸º 0 )ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; EXPIRE age 1</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è‹¥è®¾ç½®æˆåŠŸï¼Œæ˜¾ç¤º1ï¼›æ˜¾ç¤º0 ï¼Œåˆ™ä¸ºå¤±è´¥ï¼Œå¯èƒ½æ˜¯è¯¥keyä¸å­˜åœ¨</p></blockquote><blockquote><p>TTL key<br>ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›ç»™å®š key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´</p></blockquote><blockquote><p>MOVE key db</p><p>å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“ db å½“ä¸­ã€‚<br>å¦‚æœå½“å‰æ•°æ®åº“(æºæ•°æ®åº“)å’Œç»™å®šæ•°æ®åº“(ç›®æ ‡æ•°æ®åº“)æœ‰ç›¸åŒåå­—çš„ç»™å®š key ï¼Œæˆ–è€… key ä¸å­˜åœ¨äºå½“å‰æ•°æ®åº“ï¼Œé‚£ä¹ˆ MOVE æ²¡æœ‰ä»»ä½•æ•ˆæœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  move name 1</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>name æ˜¯æ•°æ®åº“0ä¸­å·²å­˜åœ¨çš„keyï¼Œç§»åŠ¨åˆ°æ•°æ®åº“1ä¸­åï¼Œ0ä¸­å°±ä¸å­˜åœ¨è¯¥key</p></blockquote><blockquote><p>TYPE key</p><p>è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; DEL key [key ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>åˆ é™¤ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ª key ã€‚ä¸å­˜åœ¨çš„ key ä¼šè¢«å¿½ç•¥</p></blockquote><h2 id="3ã€String-æ“ä½œ"><a href="#3ã€String-æ“ä½œ" class="headerlink" title="3ã€String  æ“ä½œ"></a>3ã€String  æ“ä½œ</h2><p>å­—ç¬¦ä¸²æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„ Redis å€¼ç±»å‹ã€‚Redis å­—ç¬¦ä¸²æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œè¿™<br>æ„å‘³ç€ä¸€ä¸ª Redis å­—ç¬¦ä¸²èƒ½åŒ…å«ä»»æ„ç±»å‹çš„æ•°æ®</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET key value [EX seconds][PX milliseconds] [NX|XX]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ï® EX è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç§’ï¼Œç­‰åŒäº SETEX key seconds value<br>ï® PX è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ¯«ç§’ï¼Œç­‰åŒäº PSETEX key milliseconds value<br>ï® NX é”®ä¸å­˜åœ¨ï¼Œæ‰èƒ½è®¾ç½®ï¼Œç­‰åŒäº SETNX key value<br>ï® XX é”®å­˜åœ¨æ—¶ï¼Œæ‰èƒ½è®¾ç½®</p></blockquote><p><code>æ³¨æ„</code></p><p>å°†å­—ç¬¦ä¸²å€¼ value å…³è”åˆ° key ã€‚<br>å¦‚æœ key å·²ç»æŒæœ‰å…¶ä»–å€¼ï¼Œ SET å°±è¦†å†™æ—§å€¼ï¼Œæ— è§†ç±»å‹ã€‚<br>å¯¹äºæŸä¸ªåŸæœ¬å¸¦æœ‰ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰çš„é”®æ¥è¯´ï¼Œ å½“ SET å‘½ä»¤æˆåŠŸåœ¨è¿™ä¸ªé”®ä¸Šæ‰§è¡Œæ—¶ï¼Œ è¿™ä¸ªé”®åŸæœ‰çš„ TTL å°†è¢«æ¸…é™¤ã€‚</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; GET key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å› key æ‰€å…³è”çš„å­—ç¬¦ä¸²å€¼ã€‚å¦‚æœ key ä¸å­˜åœ¨é‚£ä¹ˆè¿”å›ç‰¹æ®Šå€¼ nil ã€‚<br>å‡å¦‚ key å‚¨å­˜çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º GET åªèƒ½<br>ç”¨äºå¤„ç†å­—ç¬¦ä¸²å€¼</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; APPEND key value</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å¦‚æœ key å·²ç»å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ APPEND å‘½ä»¤å°† value è¿½åŠ åˆ° key åŸæ¥çš„å€¼çš„æœ«å°¾ã€‚<br>å¦‚æœ key ä¸å­˜åœ¨ï¼Œ APPEND å°±ç®€å•åœ°å°†ç»™å®š key è®¾ä¸º value ï¼Œå°±åƒæ‰§è¡Œ SET key value ä¸€æ ·ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; STRLEN key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å› key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼çš„é•¿åº¦ã€‚<br>å½“ key å‚¨å­˜çš„ä¸æ˜¯å­—ç¬¦ä¸²å€¼æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; INCR key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢ä¸€ï¼Œå¹¶æ˜¾ç¤ºã€‚<br>å¦‚æœ key ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œç„¶åå†æ‰§è¡ŒINCR æ“ä½œã€‚<br>å¦‚æœå€¼åŒ…å«é”™è¯¯çš„ç±»å‹ï¼Œæˆ–å­—ç¬¦ä¸²ç±»å‹çš„å€¼ä¸èƒ½è¡¨ç¤ºä¸ºæ•°å­—ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p><code>é”™è¯¯ï¼š</code></p><p>(error) ERR value is not an integer or out of range</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; INCRBY key increment</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°† key æ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šå¢é‡ increment ï¼Œå¹¶æ˜¾ç¤ºã€‚<br>å¦‚æœ key ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œç„¶åå†æ‰§è¡ŒINCRBY å‘½ä»¤ã€‚<br>å¦‚æœå€¼åŒ…å«é”™è¯¯çš„ç±»å‹ï¼Œæˆ–å­—ç¬¦ä¸²ç±»å‹çš„å€¼ä¸èƒ½è¡¨ç¤ºä¸ºæ•°å­—ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; DECR key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å‡ä¸€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; DECRBY key decrement</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°† key æ‰€å‚¨å­˜çš„å€¼å‡å»å‡é‡ decrement ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  GETRANGE key start end</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å› key ä¸­å­—ç¬¦ä¸²å€¼çš„å­å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„æˆªå–èŒƒå›´ç”± start å’Œend ä¸¤ä¸ªåç§»é‡å†³å®š(åŒ…æ‹¬ start å’Œ end åœ¨å†…)ã€‚<br>è´Ÿæ•°åç§»é‡è¡¨ç¤ºä»å­—ç¬¦ä¸²æœ€åå¼€å§‹è®¡æ•°ï¼Œ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ -2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªï¼Œä»¥æ­¤ç±»æ¨</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SETRANGE key offset value</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ç”¨ value å‚æ•°è¦†å†™(overwrite)ç»™å®š key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œä»åç§»é‡ offset å¼€å§‹ã€‚<br>ä¸å­˜åœ¨çš„ key å½“ä½œç©ºç™½å­—ç¬¦ä¸²å¤„ç†ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SETEX key  seconds value</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°†å€¼ value å…³è”åˆ° key ï¼Œå¹¶å°† key çš„ç”Ÿå­˜æ—¶é—´è®¾ä¸º seconds<br>å¦‚æœ key å·²ç»å­˜åœ¨ï¼Œ SETEX å‘½ä»¤å°†è¦†å†™æ—§å€¼ã€‚<br>è¿™ä¸ªå‘½ä»¤ç±»ä¼¼äºä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET key value</span><br><span class="line">&gt; EXPIRE key seconds # è®¾ç½®ç”Ÿå­˜æ—¶é—´</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote></blockquote><blockquote><p>ä¸åŒä¹‹å¤„æ˜¯ï¼Œ SETEX æ˜¯ä¸€ä¸ªåŸå­æ€§(atomic)æ“ä½œï¼Œå…³è”å€¼å’Œè®¾ç½®ç”Ÿå­˜æ—¶é—´ä¸¤ä¸ªåŠ¨ä½œä¼šåœ¨åŒä¸€æ—¶é—´å†…å®Œæˆï¼Œè¯¥å‘½ä»¤åœ¨ Redis ç”¨ä½œç¼“å­˜æ—¶ï¼Œéå¸¸å®ç”¨ã€‚</p></blockquote><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> SETNX key value</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°† key çš„å€¼è®¾ä¸º value ï¼Œå½“ä¸”ä»…å½“ key ä¸å­˜åœ¨ã€‚<br>è‹¥ç»™å®šçš„ key å·²ç»å­˜åœ¨ï¼Œåˆ™ SETNX ä¸åšä»»ä½•åŠ¨ä½œã€‚<br>SETNX æ˜¯ã€SET if Not eXistsã€(å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ SET)çš„ç®€å†™ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; MGET key [key ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›æ‰€æœ‰(ä¸€ä¸ªæˆ–å¤šä¸ª)ç»™å®š key çš„å€¼ã€‚<br>å¦‚æœç»™å®šçš„ key é‡Œé¢ï¼Œæœ‰æŸä¸ª key ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ª key è¿”å›ç‰¹æ®Šå€¼ nil ã€‚å› æ­¤ï¼Œè¯¥å‘½ä»¤æ°¸ä¸å¤±è´¥</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; MSET key value [key value ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ã€‚<br>å¦‚æœæŸä¸ªç»™å®š key å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆ MSET ä¼šç”¨æ–°å€¼è¦†ç›–åŸæ¥çš„æ—§å€¼ï¼Œå¦‚æœè¿™ä¸æ˜¯ä½ æ‰€å¸Œæœ›çš„æ•ˆæœï¼Œè¯·è€ƒè™‘ä½¿ç”¨ MSETNX å‘½ä»¤ï¼šå®ƒåªä¼šåœ¨æ‰€æœ‰ç»™å®š key éƒ½ä¸å­˜åœ¨çš„æƒ…å†µä¸‹è¿›è¡Œè®¾ç½®æ“ä½œã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; MSETNX key value [key value ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ï¼Œå½“ä¸”ä»…å½“æ‰€æœ‰ç»™å®š key éƒ½ä¸å­˜åœ¨ã€‚<br>å³ä½¿åªæœ‰ä¸€ä¸ªç»™å®š key å·²å­˜åœ¨ï¼Œ MSETNX ä¹Ÿä¼šæ‹’ç»æ‰§è¡Œæ‰€æœ‰ç»™å®š key çš„è®¾ç½®æ“ä½œã€‚<br>MSETNX æ˜¯åŸå­æ€§çš„ï¼Œå› æ­¤å®ƒå¯ä»¥ç”¨ä½œè®¾ç½®å¤šä¸ªä¸åŒ key è¡¨ç¤ºä¸åŒå­—æ®µ(field)çš„å”¯ä¸€æ€§é€»è¾‘å¯¹è±¡(unique logic object)ï¼Œæ‰€æœ‰å­—æ®µè¦ä¹ˆå…¨è¢«è®¾ç½®ï¼Œè¦ä¹ˆå…¨ä¸è¢«è®¾ç½®ã€‚</p></blockquote><h2 id="4ã€-List-æ“ä½œ"><a href="#4ã€-List-æ“ä½œ" class="headerlink" title="4ã€ List æ“ä½œ"></a>4ã€ List æ“ä½œ</h2><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LPUSH key value [value ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ value æ’å…¥åˆ°åˆ—è¡¨ key çš„è¡¨å¤´ã€‚ï¼ˆä»å·¦è¾¹æ’å…¥ï¼‰<br>å¦‚æœæœ‰å¤šä¸ª value å€¼ï¼Œé‚£ä¹ˆå„ä¸ª value å€¼æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡ æ’ å…¥ åˆ° è¡¨ å¤´ ï¼š</p><p> æ¯” å¦‚ è¯´ ï¼Œ</p><p> å¯¹ ç©º åˆ— è¡¨ mylist  æ‰§ è¡Œ å‘½ä»¤ LPUSH mylist a b c ï¼Œåˆ—è¡¨çš„å€¼å°†æ˜¯ c b a ï¼Œ</p><p>è¿™ç­‰åŒäºåŸ å­ æ€§ åœ° æ‰§è¡Œ LPUSH mylist a ã€ LPUSH mylist b å’Œ LPUSH mylistc ä¸‰ä¸ªå‘½ä»¤ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; RPUSH key value [value ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ value æ’å…¥åˆ°åˆ—è¡¨ key çš„è¡¨å°¾ã€‚ï¼ˆä»å³è¾¹æ’å…¥ï¼‰<br>å¦‚æœæœ‰å¤šä¸ª value å€¼ï¼Œé‚£ä¹ˆå„ä¸ª value å€¼æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡ æ’ å…¥ åˆ° è¡¨ å°¾ ï¼š </p><p>æ¯” å¦‚ å¯¹ ä¸€ ä¸ª ç©º åˆ— è¡¨ mylist  æ‰§è¡Œ RPUSH mylist a b c ï¼Œå¾—å‡ºçš„ç»“æœåˆ—è¡¨ä¸º a b c ï¼Œ</p><p>ç­‰åŒäº æ‰§ è¡Œ å‘½ä»¤ RPUSH mylist a ã€ RPUSH mylist b ã€ RPUSH mylist c ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LRANGE key  start stop</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿” å› åˆ— è¡¨ key  ä¸­ æŒ‡ å®š åŒº é—´ å†… çš„ å…ƒ ç´  ï¼Œ åŒº é—´ ä»¥ å ç§»é‡ start å’Œ stop æŒ‡å®šã€‚ï¼ˆä»å·¦è‡³å³ï¼‰<br>ä¸‹æ ‡(index)å‚æ•° start å’Œ stop éƒ½ä»¥ 0 ä¸ºåº•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ 0 è¡¨ç¤ºåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä»¥ 1 è¡¨ç¤ºåˆ—è¡¨çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚-1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ </p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LPOP key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ç§»é™¤å¹¶è¿”å›åˆ—è¡¨ key çš„å¤´å…ƒç´ ã€‚ï¼ˆä»åˆ—è¡¨keyçš„å·¦è¾¹å¼€å§‹å¼¹å‡ºå…ƒç´ ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; RPOP key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ç§»é™¤å¹¶è¿”å›åˆ—è¡¨ key çš„å°¾å…ƒç´ ã€‚ï¼ˆä»åˆ—è¡¨keyçš„å³è¾¹å¼€å§‹å¼¹å‡ºå…ƒç´ ï¼‰</p></blockquote><p><code>å¤‡æ³¨ï¼š</code></p><blockquote><p>åŒå‘ä¸ºæ ˆï¼Œå¼‚å‘ä¸ºé˜Ÿåˆ—<br>æ ˆï¼ˆlpush  lpop  ï¼› rpush  rpopï¼‰</p><p>é˜Ÿåˆ—ï¼ˆlpush  rpop ï¼› rpush   lpop  ï¼‰</p><p>ArrayList : æ•°ç»„ï¼ˆæŸ¥æ‰¾å¿«ï¼Œå¢åˆ æ…¢ï¼‰<br>LinkList  : é“¾è¡¨ï¼ˆæŸ¥æ‰¾æ…¢ï¼Œå¢åˆ å¿«ï¼‰</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LINDEX key index</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›åˆ—è¡¨ key ä¸­ï¼Œä¸‹æ ‡ä¸º index çš„å…ƒç´ ã€‚<br>ä¸‹æ ‡(index)å‚æ•° start å’Œ stop éƒ½ä»¥ 0 ä¸ºåº•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ 0 è¡¨ç¤ºåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä»¥ 1 è¡¨ç¤ºåˆ—è¡¨çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ä¸‹æ ‡ï¼Œä»¥ -1 è¡¨ç¤ºåˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ -2 è¡¨ç¤ºåˆ—è¡¨çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LLEN key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›åˆ—è¡¨ key çš„é•¿åº¦ã€‚<br>å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™ key è¢«è§£é‡Šä¸ºä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œè¿”å› 0 .</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LREM key count value</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>æ ¹æ®å‚æ•° count çš„å€¼ï¼Œç§»é™¤åˆ—è¡¨ä¸­ä¸å‚æ•° value ç›¸ç­‰çš„å…ƒç´ ã€‚<br>count çš„å€¼å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ï¼š<br>count &gt; 0 : ä»è¡¨å¤´å¼€å§‹å‘è¡¨å°¾æœç´¢ï¼Œç§»é™¤ä¸ value ç›¸ç­‰çš„å…ƒ<br>ç´ ï¼Œæ•°é‡ä¸º count ã€‚<br>count &lt; 0 : ä»è¡¨å°¾å¼€å§‹å‘è¡¨å¤´æœç´¢ï¼Œç§»é™¤ä¸ value ç›¸ç­‰çš„å…ƒ<br>ç´ ï¼Œæ•°é‡ä¸º count çš„ç»å¯¹å€¼ã€‚<br>count = 0 : ç§»é™¤è¡¨ä¸­æ‰€æœ‰ä¸ value ç›¸ç­‰çš„å€¼ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LTRIM key start stop</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œ</p><p>ä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚<br>ä¸¾ ä¸ª ä¾‹ å­ ï¼Œ æ‰§ è¡Œ å‘½ ä»¤ LTRIM list 0 2 ï¼Œ è¡¨ ç¤º åª ä¿ ç•™ åˆ—è¡¨ list çš„å‰ä¸‰ä¸ªå…ƒç´ ï¼Œå…¶ä½™å…ƒç´ å…¨éƒ¨åˆ é™¤</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; RPOPLPUSH source  destination</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å‘½ä»¤ RPOPLPUSH åœ¨ä¸€ä¸ªåŸå­æ—¶é—´å†…ï¼Œæ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªåŠ¨ä½œï¼š<br>å°†åˆ—è¡¨ source ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ (å°¾å…ƒç´ )å¼¹å‡ºï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å°† source  å¼¹ å‡º çš„ å…ƒ ç´  æ’ å…¥ åˆ° åˆ— è¡¨ destination  ï¼Œ ä½œä¸º destination åˆ—è¡¨çš„çš„å¤´å…ƒç´ ã€‚<br>ä¸¾ ä¸ª ä¾‹ å­ ï¼Œ </p><p>ä½  æœ‰ ä¸¤ ä¸ª åˆ—è¡¨ source  å’Œ destination  ï¼Œ source  åˆ— è¡¨ æœ‰ å…ƒç´  a, b, c ï¼Œ destination åˆ—è¡¨æœ‰å…ƒç´  x, y, z ï¼Œæ‰§è¡Œ RPOPLPUSH sourcedestination ä¹‹åï¼Œ source åˆ—è¡¨åŒ…å«å…ƒç´  a, b ï¼Œ destination åˆ—è¡¨åŒ…å«å…ƒç´  c, x, y, z ï¼Œå¹¶ä¸”å…ƒç´  c ä¼šè¢«è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LSET key index value</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°†åˆ—è¡¨ key ä¸‹æ ‡ä¸º index çš„å…ƒç´ çš„å€¼è®¾ç½®ä¸º value ã€‚<br>å½“ index å‚æ•°è¶…å‡ºèŒƒå›´ï¼Œæˆ–å¯¹ä¸€ä¸ªç©ºåˆ—è¡¨( key ä¸å­˜åœ¨)è¿›è¡Œ LSET æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LINSERT key BEFORE|AFTER pivot value</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°†å€¼ value æ’å…¥åˆ°åˆ—è¡¨ key å½“ä¸­ï¼Œä½äºå€¼ pivot ä¹‹å‰æˆ–ä¹‹åã€‚<br>å½“ pivot ä¸å­˜åœ¨äºåˆ—è¡¨ key æ—¶ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚<br>å½“ key ä¸å­˜åœ¨æ—¶ï¼Œ key è¢«è§†ä¸ºç©ºåˆ—è¡¨ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚</p></blockquote><h2 id="5ã€Setæ“ä½œ"><a href="#5ã€Setæ“ä½œ" class="headerlink" title="5ã€Setæ“ä½œ"></a>5ã€Setæ“ä½œ</h2><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SADD key member [member ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°†ä¸€ä¸ªæˆ–å¤šä¸ª member å…ƒç´ åŠ å…¥åˆ°é›†åˆ key å½“ä¸­ï¼ˆæ— åºï¼‰ï¼Œå·²ç»å­˜åœ¨äºé›†åˆçš„ member å…ƒç´ å°†è¢«å¿½ç•¥ã€‚<br>å‡å¦‚ key ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªåªåŒ…å« member å…ƒç´ ä½œæˆå‘˜çš„é›†åˆã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SMEMBERS key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›é›†åˆ key ä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚</p><p>ä¸å­˜åœ¨çš„ key è¢«è§†ä¸ºç©ºé›†åˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SISMEMBER key member</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>åˆ¤æ–­ member å…ƒç´ æ˜¯å¦æ˜¯é›†åˆ key çš„æˆå‘˜ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SCARD key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›é›†åˆ key çš„åŸºæ•°(é›†åˆä¸­å…ƒç´ çš„æ•°é‡)ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SREM key member [member ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ç§» é™¤ é›† åˆ key ä¸­ çš„ ä¸€ ä¸ª æˆ– å¤š ä¸ª member å…ƒ ç´  ï¼Œ ä¸ å­˜ åœ¨çš„ member å…ƒç´ ä¼šè¢«å¿½ç•¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SPOP key ï¼ˆæŠ½å¥–åœºæ™¯ï¼‰</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ç§»é™¤å¹¶è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ ã€‚<br>å¦‚æœåªæƒ³è·å–ä¸€ä¸ªéšæœºå…ƒç´ ï¼Œä½†ä¸æƒ³è¯¥å…ƒç´ ä»é›†åˆä¸­è¢«ç§»é™¤çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ SRANDMEMBER å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SMOVE source destination member</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°† member å…ƒç´ ä» source é›†åˆç§»åŠ¨åˆ° destination é›†åˆã€‚<br>SMOVE æ˜¯åŸå­æ€§æ“ä½œã€‚<br>å¦‚æœ source é›†åˆä¸å­˜åœ¨æˆ–ä¸åŒ…å«æŒ‡å®šçš„ member å…ƒç´ ï¼Œ<br>åˆ™ SMOVE å‘½ä»¤ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œä»…è¿”å› 0 ã€‚å¦åˆ™ï¼Œ member å…ƒç´ ä» source é›†åˆä¸­è¢«ç§»é™¤ï¼Œå¹¶æ·»åŠ åˆ° destination é›†åˆä¸­å»ã€‚<br>å½“ destination é›†åˆå·²ç»åŒ…å« member å…ƒç´ æ—¶ï¼Œ SMOVE å‘½ä»¤åªæ˜¯ç®€å•åœ°å°† source é›†åˆä¸­çš„ member å…ƒç´ åˆ é™¤ã€‚<br>å½“ source æˆ– destination ä¸æ˜¯é›†åˆç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SDIFF key [key ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>æ±‚å·®é›†ï¼šä»ç¬¬ä¸€ä¸ª key çš„é›†åˆä¸­å»é™¤å…¶ä»–é›†åˆå’Œè‡ªå·±çš„äº¤é›†éƒ¨åˆ†</p><p>sdiffæ±‚ä¸¤ä¸ªsetçš„å·®é›†ï¼Œæœ‰å…ˆåé¡ºåºï¼Œä»¥é å‰çš„ä¸ºåŸºå‡†ï¼Œåˆ—å‡ºå‰ä¸€ä¸ªsetæœ‰çš„ï¼Œè€Œåä¸€ä¸ªsetæ²¡æœ‰çš„å…ƒç´ </p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SINTER key [key  ...] ï¼ˆå¾®åšæ±‚å…±åŒå…³æ³¨åœºæ™¯ï¼‰</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›ä¸€ä¸ªé›†åˆçš„å…¨éƒ¨æˆå‘˜ï¼Œè¯¥é›†åˆæ˜¯æ‰€æœ‰ç»™å®šé›†åˆçš„äº¤é›†ã€‚<br>ä¸å­˜åœ¨çš„ key è¢«è§†ä¸ºç©ºé›†ã€‚<br>å½“ç»™å®šé›†åˆå½“ä¸­æœ‰ä¸€ä¸ªç©ºé›†æ—¶ï¼Œç»“æœä¹Ÿä¸ºç©ºé›†(æ ¹æ®é›†åˆè¿ç®—å®šå¾‹)ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SUNION key [key ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›ä¸€ä¸ªé›†åˆçš„å…¨éƒ¨æˆå‘˜ï¼Œè¯¥é›†åˆæ˜¯æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†ã€‚<br>ä¸å­˜åœ¨çš„ key è¢«è§†ä¸ºç©ºé›†ã€‚</p></blockquote><h2 id="6ã€Sorted-setæ“ä½œ"><a href="#6ã€Sorted-setæ“ä½œ" class="headerlink" title="6ã€Sorted setæ“ä½œ"></a>6ã€Sorted setæ“ä½œ</h2><p>ç±»ä¼¼ Sets,ä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²å…ƒç´ éƒ½å…³è”åˆ°ä¸€ä¸ªå« score æµ®åŠ¨æ•°å€¼ã€‚é‡Œé¢çš„å…ƒç´ æ€»æ˜¯é€šè¿‡ score è¿›è¡Œç€æ’åºï¼Œæ‰€ä»¥ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯å¯ä»¥æ£€ç´¢çš„ä¸€ç³»åˆ—å…ƒç´ ã€‚</p><p><code>æ³¨æ„ï¼š</code></p><blockquote><p>åœ¨ set åŸºç¡€ä¸Šï¼ŒåŠ ä¸Š score å€¼ï¼Œ</p><p>ä¹‹å‰ set æ˜¯key value1 value2â€¦.<br>ç°åœ¨ Zset æ˜¯ key score1 value1 score2 value2</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZADD key score member [[score member][score member] ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°† ä¸€ ä¸ª æˆ– å¤š ä¸ª member å…ƒ ç´  åŠ å…¶ score å€¼ åŠ  å…¥ åˆ° æœ‰ åºé›† key å½“ä¸­ã€‚</p><p><code>æ˜¾ç¤º</code></p><p>redis&gt; ZADD page_rank 9 baidu.com 8 bing.com 10 google.com<br>(integer) 2<br>redis&gt; ZRANGE page_rank 0 -1 WITHSCORES</p><p>1) â€œbing.comâ€<br>2) â€œ8â€<br>3) â€œbaidu.comâ€<br>4) â€œ9â€<br>5) â€œgoogle.comâ€<br>6) â€œ10â€</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZRANGE key start stop [WITHSCORES]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›æœ‰åºé›† key ä¸­ï¼ŒæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ã€‚<br>å…¶ä¸­æˆå‘˜çš„ä½ç½®æŒ‰ score å€¼é€’å¢(ä»å°åˆ°å¤§)æ¥æ’åºã€‚<br>å…·æœ‰ç›¸åŒ score å€¼çš„æˆå‘˜æŒ‰å­—å…¸åº(lexicographical order )æ¥æ’åˆ—ã€‚<br>å¦‚æœä½ éœ€è¦æˆå‘˜æŒ‰ score å€¼é€’å‡(ä»å¤§åˆ°å°)æ¥æ’åˆ—ï¼Œè¯·ä½¿ç”¨ ZREVRANGE å‘½ä»¤ã€‚<br>ä¸‹æ ‡å‚æ•° start å’Œ stop éƒ½ä»¥ 0 ä¸ºåº•ï¼Œ</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ 0 è¡¨ç¤ºæœ‰åºé›†ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œä»¥ 1 è¡¨ç¤ºæœ‰åºé›†ç¬¬äºŒä¸ªæˆå‘˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ä¸‹æ ‡ï¼Œä»¥ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªæˆå‘˜ï¼Œ -2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªæˆå‘˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>è¶…å‡ºèŒƒå›´çš„ä¸‹æ ‡å¹¶ä¸ä¼šå¼•èµ·é”™è¯¯ã€‚<br>æ¯” å¦‚ è¯´ ï¼Œ å½“ start çš„ å€¼ æ¯” æœ‰ åº é›† çš„ æœ€ å¤§ ä¸‹ æ ‡ è¿˜ è¦ å¤§ ï¼Œ æˆ–æ˜¯ start &gt; stop æ—¶ï¼Œ ZRANGE å‘½ä»¤åªæ˜¯ç®€å•åœ°è¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚<br>å¦ä¸€æ–¹é¢ï¼Œå‡å¦‚ stop å‚æ•°çš„å€¼æ¯”æœ‰åºé›†çš„æœ€å¤§ä¸‹æ ‡è¿˜è¦å¤§ï¼Œé‚£ä¹ˆRedis å°† stop å½“ä½œæœ€å¤§ä¸‹æ ‡æ¥å¤„ç†ã€‚<br>å¯ä»¥é€šè¿‡ä½¿ç”¨ WITHSCORES é€‰é¡¹ï¼Œæ¥è®©æˆå‘˜å’Œå®ƒçš„ score å€¼ä¸€å¹¶è¿”å›ï¼Œ</p><p>è¿”å›åˆ—è¡¨ä»¥ value1,score1, â€¦, valueN,scoreN çš„æ ¼å¼è¡¨ç¤ºã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZREVRANGE key start stop [WITHSCORES]( ( éŸ³ä¹æ’è¡Œæ¦œåœºæ™¯) )</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›æœ‰åºé›† key ä¸­ï¼ŒæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ã€‚<br>å…¶ä¸­æˆå‘˜çš„ä½ç½®æŒ‰ score å€¼é€’å‡(ä»å¤§åˆ°å°)æ¥æ’åˆ—ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZREM key member [member ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ç§»é™¤æœ‰åºé›† key ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œä¸å­˜åœ¨çš„æˆå‘˜å°†è¢«å¿½ç•¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZREMRANGEBYSCORE key min max</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ç§»é™¤æœ‰åºé›† key ä¸­ï¼Œæ‰€æœ‰ score å€¼ä»‹äº min å’Œ max ä¹‹é—´(åŒ…æ‹¬ç­‰äº min æˆ– max )çš„æˆå‘˜ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZSCORE key member</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›æœ‰åºé›† key ä¸­ï¼Œæˆå‘˜ member çš„ score å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZCARD key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›æœ‰åºé›† key çš„åŸºæ•°ï¼ˆåŒ…å«çš„å…ƒç´ çš„ä¸ªæ•°ï¼‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZCOUNT key min max</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›æœ‰åºé›† key ä¸­ï¼Œ score å€¼åœ¨ min å’Œ max ä¹‹é—´(é»˜è®¤åŒ…æ‹¬ score å€¼ç­‰äº min æˆ– max )çš„æˆå‘˜çš„æ•°é‡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ZRANK key member</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›æœ‰åºé›† key ä¸­ï¼Œæˆå‘˜ member çš„ score å€¼ã€‚<br>ZCARD key<br>è¿”å›æœ‰åºé›† key çš„åŸºæ•°ï¼ˆåŒ…å«çš„å…ƒç´ çš„ä¸ªæ•°ï¼‰ã€‚<br>ZCOUNT key min max<br>è¿”å›æœ‰åºé›† key ä¸­ï¼Œ score å€¼åœ¨ min å’Œ max ä¹‹é—´(é»˜è®¤åŒ…æ‹¬ score å€¼ç­‰äº min æˆ– max )çš„æˆå‘˜çš„æ•°é‡ã€‚<br>ZRANK key member</p><p>è¿”å›æœ‰åºé›† key ä¸­æˆå‘˜ member çš„æ’åã€‚å…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰ score å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—ã€‚</p></blockquote><h2 id="7ã€-Hash-æ“ä½œ-ï¼ˆæ•£åˆ—ï¼‰"><a href="#7ã€-Hash-æ“ä½œ-ï¼ˆæ•£åˆ—ï¼‰" class="headerlink" title="7ã€ Hash  æ“ä½œ  ï¼ˆæ•£åˆ—ï¼‰"></a>7ã€ Hash  æ“ä½œ  ï¼ˆæ•£åˆ—ï¼‰</h2><p>KV æ¨¡å¼ä¸å˜ï¼Œä½†æ˜¯ V æ˜¯ä¸€ä¸ªé”®å€¼å¯¹</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HSET key field value</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°†å“ˆå¸Œè¡¨ key ä¸­çš„åŸŸ field çš„å€¼è®¾ä¸º value ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HGET key field</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›å“ˆå¸Œè¡¨ key ä¸­ç»™å®šåŸŸ field çš„å€¼ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HMSET key field value [field value ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>åŒæ—¶å°†å¤šä¸ª field-value (åŸŸ-å€¼)å¯¹è®¾ç½®åˆ°å“ˆå¸Œè¡¨ key ä¸­ã€‚<br>æ­¤å‘½ä»¤ä¼šè¦†ç›–å“ˆå¸Œè¡¨ä¸­å·²å­˜åœ¨çš„åŸŸã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HMGET key field [field ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›å“ˆå¸Œè¡¨ key ä¸­ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªç»™å®šåŸŸçš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HGETALL key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›å“ˆå¸Œè¡¨ key ä¸­ï¼Œæ‰€æœ‰çš„åŸŸå’Œå€¼ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HKEYS key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›å“ˆå¸Œè¡¨ key ä¸­çš„æ‰€æœ‰åŸŸã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HVALS key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>è¿”å›å“ˆå¸Œè¡¨ key ä¸­æ‰€æœ‰åŸŸçš„å€¼ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HSETNX key field value</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å°†å“ˆå¸Œè¡¨ key ä¸­çš„åŸŸ field çš„å€¼è®¾ç½®ä¸º value ï¼Œå½“ä¸”ä»…å½“åŸŸ field ä¸å­˜åœ¨ã€‚<br>è‹¥åŸŸ field å·²ç»å­˜åœ¨ï¼Œè¯¥æ“ä½œæ— æ•ˆã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HEXISTS key field</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>æŸ¥çœ‹å“ˆå¸Œè¡¨ key ä¸­ï¼Œç»™å®šåŸŸ field æ˜¯å¦å­˜åœ¨ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HDEL key field [field ...]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>åˆ é™¤å“ˆå¸Œè¡¨ key ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šåŸŸï¼Œä¸å­˜åœ¨çš„åŸŸå°†è¢«å¿½ç•¥ã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HINCRBY key field increment</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„åŸŸ field çš„å€¼åŠ ä¸Šå¢é‡ increment ã€‚<br>å¢é‡ä¹Ÿå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œç›¸å½“äºå¯¹ç»™å®šåŸŸè¿›è¡Œå‡æ³•æ“ä½œã€‚</p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; HINCRBYFLOAT key field increment</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>å¢åŠ æµ®ç‚¹æ•°<br>åœºæ™¯ï¼šç”¨æˆ·ç»´åº¦ç»Ÿè®¡<br>ç»Ÿè®¡æ•°åŒ…æ‹¬ï¼šå…³æ³¨æ•°ã€ç²‰ä¸æ•°ã€å–œæ¬¢å•†å“æ•°ã€å‘å¸–æ•°<br>ç”¨æˆ·ä¸º Keyï¼Œä¸åŒç»´åº¦ä¸º Fieldï¼ŒValue ä¸ºç»Ÿè®¡æ•°</p></blockquote><h1 id="äº”ã€Redis-çš„æŒä¹…åŒ–"><a href="#äº”ã€Redis-çš„æŒä¹…åŒ–" class="headerlink" title="äº”ã€Redis çš„æŒä¹…åŒ–"></a>äº”ã€Redis çš„æŒä¹…åŒ–</h1><h2 id="1ã€Redis-æŒä¹…åŒ–æ–¹å¼"><a href="#1ã€Redis-æŒä¹…åŒ–æ–¹å¼" class="headerlink" title="1ã€Redis  æŒä¹…åŒ–æ–¹å¼"></a>1ã€Redis  æŒä¹…åŒ–æ–¹å¼</h2><ul><li><p>RDB æŒä¹…åŒ–å¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…ç”Ÿæˆæ•°æ®é›†çš„æ—¶é—´ç‚¹å¿«ç…§ï¼ˆpoint-in-time snapshotï¼‰ã€‚</p></li><li><p>AOF æŒä¹…åŒ–è®°å½•æœåŠ¡å™¨æ‰§è¡Œçš„æ‰€æœ‰å†™æ“ä½œå‘½ä»¤ï¼Œå¹¶åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œé€šè¿‡é‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤æ¥è¿˜åŸæ•°æ®é›†ã€‚ </p><p>AOF æ–‡ä»¶ä¸­çš„å‘½ä»¤å…¨éƒ¨ä»¥ Redisåè®®çš„æ ¼å¼æ¥ä¿å­˜ï¼Œæ–°å‘½ä»¤ä¼šè¢«è¿½åŠ åˆ°æ–‡ä»¶çš„æœ«å°¾ã€‚ </p><p>Redis è¿˜å¯ä»¥åœ¨åå°å¯¹ AOF æ–‡ä»¶è¿›è¡Œé‡å†™ï¼ˆrewriteï¼‰ï¼Œä½¿å¾— AOF æ–‡ä»¶çš„ä½“ç§¯ä¸ä¼šè¶…å‡ºä¿<br>å­˜æ•°æ®é›†çŠ¶æ€æ‰€éœ€çš„å®é™…å¤§å°ã€‚</p></li><li><p>Redis è¿˜å¯ä»¥åŒæ—¶ä½¿ç”¨ AOF æŒä¹…åŒ–å’Œ RDB æŒä¹…åŒ–ã€‚ </p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ å½“ Redis é‡å¯æ—¶ï¼Œ å®ƒä¼šä¼˜å…ˆä½¿ç”¨ AOF æ–‡ä»¶æ¥è¿˜åŸæ•°æ®é›†ï¼Œ </p><p>å› ä¸º AOF æ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†é€šå¸¸æ¯” RDB æ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®é›†æ›´å®Œæ•´ã€‚</p></li><li><p>ä½ ç”šè‡³å¯ä»¥å…³é—­æŒä¹…åŒ–åŠŸèƒ½ï¼Œè®©æ•°æ®åªåœ¨æœåŠ¡å™¨è¿è¡Œæ—¶å­˜åœ¨ã€‚</p></li></ul><h2 id="2ã€Rdb"><a href="#2ã€Rdb" class="headerlink" title="2ã€Rdb:"></a>2ã€Rdb:</h2><p>ï¼ˆ1ï¼‰åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯è¡Œè¯è®²çš„ snapshot å¿«ç…§ï¼Œå®ƒæ¢å¤æ—¶å°±æ˜¯å°†å¿«ç…§æ–‡ä»¶ç›´æ¥è¯»åˆ°å†…å­˜é‡Œã€‚</p><p>Rdb ä¿å­˜çš„æ˜¯ dump.rdb æ–‡ä»¶</p><p>ï¼ˆ2ï¼‰å¦‚ä½•è§¦å‘ RDB å¿«ç…§</p><p>Saveï¼šsave æ—¶åªç®¡ä¿å­˜ï¼Œå…¶ä»–ä¸ç®¡ï¼Œå…¨éƒ¨é˜»å¡ã€‚<br>Bgsaveï¼šredis ä¼šåœ¨åå°è¿›è¡Œå¿«ç…§æ“ä½œï¼Œå¿«ç…§æ“ä½œçš„åŒæ—¶è¿˜å¯ä»¥å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡ lastsave å‘½ä»¤è·å–æœ€åä¸€æ¬¡æˆåŠŸæ‰§è¡Œå¿«ç…§çš„æ—¶é—´ã€‚</p><p>ï¼ˆ3ï¼‰å¦‚ä½•åœæ­¢</p><p>é™æ€åœæ­¢ï¼šå°†é…ç½®æ–‡ä»¶é‡Œçš„ RDB ä¿å­˜è§„åˆ™æ”¹ä¸º save â€œâ€<br>åŠ¨æ€åœæ­¢ ï¼š</p><blockquote><p> config set save â€œ â€</p></blockquote><h2 id="3ã€AOF"><a href="#3ã€AOF" class="headerlink" title="3ã€AOF"></a>3ã€AOF</h2><p>(Append Only File)</p><p>ï¼ˆ1ï¼‰ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå°† redis æ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™æŒ‡ä»¤è®°å½•ä¸‹æ¥(è¯»æ“ä½œä¸è®°å½•)ã€‚åªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼Œredis å¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œæ¢è¨€ä¹‹ï¼Œredis é‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä¸€å®Œæˆæ•°æ®æ¢å¤å·¥ä½œã€‚<br>======APPEND ONLY MODE======<br>å¼€å¯ aof ï¼šappendonly yes (é»˜è®¤æ˜¯ no)</p><p>ï¼ˆ2ï¼‰Aof  ç­–ç•¥</p><p>Appendfsync å‚æ•°ï¼š</p><p>Always ï¼šåŒæ­¥æŒä¹…åŒ– æ¯æ¬¡å‘ç”Ÿæ•°æ®å˜æ›´ä¼šè¢«ç«‹å³è®°å½•åˆ°ç£ç›˜ï¼Œæ€§èƒ½è¾ƒå·®<br>ä½†æ•°æ®å®Œæ•´æ€§è¾ƒå¥½ã€‚<br>Everysecï¼š å‡ºå‚é»˜è®¤æ¨èï¼Œå¼‚æ­¥æ“ä½œï¼Œæ¯ç§’è®°å½•ï¼Œå¦‚æœä¸€ç§’å®•æœºï¼Œæœ‰æ•°<br>æ®ä¸¢å¤±<br>Noï¼šä»ä¸ fsync ï¼šå°†æ•°æ®äº¤ç»™æ“ä½œç³»ç»Ÿæ¥å¤„ç†ã€‚æ›´å¿«ï¼Œä¹Ÿæ›´ä¸å®‰å…¨çš„é€‰<br>æ‹©ã€‚</p><p>ï¼ˆ3ï¼‰Rewrite</p><p><code>æ¦‚å¿µ</code>ï¼šAOF é‡‡ç”¨æ–‡ä»¶è¿½åŠ æ–¹å¼ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šæ¥å¤§ä¸ºé¿å…å‡ºç°æ­¤ç§æƒ…å†µï¼Œ<br>æ–°å¢äº†é‡å†™æœºåˆ¶ï¼Œaof æ–‡ä»¶çš„å¤§å°è¶…è¿‡æ‰€è®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œredis å°±ä¼šè‡ªåŠ¨å°† aofæ–‡ä»¶çš„å†…å®¹å‹ç¼©ï¼Œåªä¿ç•™å¯ä»¥æ¢å¤æ•°æ®çš„æœ€å°æŒ‡ä»¤é›†ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤<br>bgrewirteaofã€‚</p><p><code>è§¦å‘æœºåˆ¶</code>ï¼šredis ä¼šè®°å½•ä¸Šæ¬¡é‡å†™çš„ aof çš„å¤§å°ï¼Œé»˜è®¤çš„é…ç½®å½“ aof æ–‡ä»¶å¤§å°ä¸ºä¸Šæ¬¡ rewrite åå¤§å°çš„ä¸€å€ä¸”æ–‡ä»¶å¤§äº 64M è§¦å‘ã€‚</p><p><code>é‡å†™åŸç†ï¼š</code>aof æ–‡ä»¶æŒç»­å¢é•¿è€Œå¤§æ—¶ï¼Œä¼š fork å‡ºä¸€æ¡æ–°è¿›ç¨‹æ¥å°†æ–‡ä»¶é‡å†™<br>(ä¹Ÿå°±æ˜¯å…ˆå†™ä¸´æ—¶æ–‡ä»¶æœ€åå† rename)ï¼Œéå†æ–°è¿›ç¨‹çš„å†…å­˜ä¸­çš„æ•°æ®ï¼Œæ¯æ¡è®°å½•æœ‰ä¸€æ¡ set è¯­å¥ï¼Œé‡å†™ aof æ–‡ä»¶çš„æ“ä½œï¼Œå¹¶æ²¡æœ‰è¯»å–æ—§çš„çš„ aof æ–‡ä»¶ï¼Œè€Œæ˜¯å°†æ•´ä¸ªå†…å­˜çš„æ•°æ®åº“å†…å®¹ç”¨å‘½ä»¤çš„æ–¹å¼é‡å†™äº†ä¸€ä¸ªæ–°çš„ aof æ–‡ä»¶ï¼Œè¿™ç‚¹å’Œå¿«ç…§æœ‰ç‚¹ç±»ä¼¼ã€‚</p><blockquote><p>no-appendfsync-on-rewrite no : </p><p>é‡å†™æ—¶æ˜¯å¦å¯ä»¥è¿ç”¨ Appendfsync ç”¨é»˜è®¤ no å³å¯ï¼Œä¿è¯æ•°æ®å®‰å…¨</p><p>auto-aof-rewrite-percentage å€æ•°  è®¾ç½®åŸºå‡†å€¼<br>auto-aof-rewrite-min-size   è®¾ç½®åŸºå‡†å€¼å¤§å°</p></blockquote><p>ï¼ˆ4ï¼‰flushall<br>åˆ·æ–°å†…å­˜ä¸­çš„æ•°æ®ï¼Œå³æ¸…ç©ºæ•°æ®<br>å¯é€šè¿‡åˆ é™¤aofæ–‡ä»¶ä¸­è¯¥æ“ä½œçš„è®°å½•æ¥æ¢å¤æ•°æ®<br>rdbæ–‡ä»¶æ— æ³•å®ç°æ•°æ®æ¢å¤</p><p>ï¼ˆ5ï¼‰aof ç‰¹ç‚¹</p><p>aofä¼˜ç‚¹ï¼š<br>å¯ç”¨äºæ•°æ®æ¢å¤<br>ç¼ºç‚¹ï¼š<br>ä½“ç§¯å¤§ï¼Œé€Ÿåº¦æ…¢</p><p>aofæ–‡ä»¶ä½“ç§¯ä¼šè¶Šæ¥è¶Šå¤§</p><p>ï¼ˆ6ï¼‰aofæ–‡ä»¶ä¼˜åŒ–<br>é‡å†™ï¼šå½“æ–‡ä»¶å¤§å°è¾¾åˆ°ä¸€å®šé˜ˆå€¼ï¼Œå¯åŠ¨å‹ç¼©æ–‡ä»¶</p><blockquote><p>netstat -anpt<br>æŸ¥çœ‹æ‰€æœ‰ç«¯å£çš„ä½¿ç”¨æƒ…å†µ</p></blockquote><h2 id="4ã€å¤‡ä»½-Redis-æ•°æ®"><a href="#4ã€å¤‡ä»½-Redis-æ•°æ®" class="headerlink" title="4ã€å¤‡ä»½ Redis  æ•°æ®"></a>4ã€å¤‡ä»½ Redis  æ•°æ®</h2><p><code>å»ºè®®ï¼š</code><br>åˆ›å»ºä¸€ä¸ªå®šæœŸä»»åŠ¡ï¼ˆcron jobï¼‰ï¼Œ æ¯å°æ—¶å°†ä¸€ä¸ª RDB æ–‡ä»¶å¤‡ä»½åˆ°ä¸€ä¸ªæ–‡ä»¶<br>å¤¹ï¼Œ å¹¶ä¸”æ¯å¤©å°†ä¸€ä¸ª RDB æ–‡ä»¶å¤‡ä»½åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚<br>ç¡®ä¿å¿«ç…§çš„å¤‡ä»½éƒ½å¸¦æœ‰ç›¸åº”çš„æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼Œ æ¯æ¬¡æ‰§è¡Œå®šæœŸä»»åŠ¡è„šæœ¬<br>æ—¶ï¼Œ ä½¿ç”¨ find å‘½ä»¤æ¥åˆ é™¤è¿‡æœŸçš„å¿«ç…§ï¼š æ¯”å¦‚è¯´ï¼Œ ä½ å¯ä»¥ä¿ç•™æœ€è¿‘ 48 å°æ—¶<br>å†…çš„æ¯å°æ—¶å¿«ç…§ï¼Œ è¿˜å¯ä»¥ä¿ç•™æœ€è¿‘ä¸€ä¸¤ä¸ªæœˆçš„æ¯æ—¥å¿«ç…§ã€‚<br>è‡³å°‘æ¯å¤©ä¸€æ¬¡ï¼Œ å°† RDB å¤‡ä»½åˆ°ä½ çš„æ•°æ®ä¸­å¿ƒä¹‹å¤–ï¼Œ æˆ–è€…è‡³å°‘æ˜¯å¤‡ä»½åˆ°ä½ <br>è¿è¡Œ Redis æœåŠ¡å™¨çš„ç‰©ç†æœºå™¨ä¹‹å¤–ã€‚</p><h1 id="å…­ã€Redis-ä¸»ä»å¤åˆ¶"><a href="#å…­ã€Redis-ä¸»ä»å¤åˆ¶" class="headerlink" title="å…­ã€Redis  ä¸»ä»å¤åˆ¶"></a>å…­ã€Redis  ä¸»ä»å¤åˆ¶</h1><h2 id="0ã€å‰æƒ…æè¦-1"><a href="#0ã€å‰æƒ…æè¦-1" class="headerlink" title="0ã€å‰æƒ…æè¦"></a>0ã€å‰æƒ…æè¦</h2><p>Redis æ”¯æŒç®€å•ä¸”æ˜“ç”¨çš„ä¸»ä»å¤åˆ¶ï¼ˆmaster-slave replicationï¼‰åŠŸèƒ½ï¼Œ è¯¥åŠŸèƒ½å¯ä»¥è®©ä»æœåŠ¡å™¨(slave server)æˆä¸ºä¸»æœåŠ¡å™¨(masterserver)çš„ç²¾ç¡®å¤åˆ¶å“ ã€‚</p><h2 id="1ã€å…³äº-Redis-å¤åˆ¶åŠŸèƒ½çš„å‡ ä¸ªé‡è¦æ–¹é¢ï¼š"><a href="#1ã€å…³äº-Redis-å¤åˆ¶åŠŸèƒ½çš„å‡ ä¸ªé‡è¦æ–¹é¢ï¼š" class="headerlink" title="1ã€å…³äº Redis å¤åˆ¶åŠŸèƒ½çš„å‡ ä¸ªé‡è¦æ–¹é¢ï¼š"></a>1ã€å…³äº Redis å¤åˆ¶åŠŸèƒ½çš„å‡ ä¸ªé‡è¦æ–¹é¢ï¼š</h2><ul><li>Redis ä½¿ç”¨å¼‚æ­¥å¤åˆ¶ã€‚</li><li>ä¸€ä¸ªä¸»æœåŠ¡å™¨å¯ä»¥æœ‰å¤šä¸ªä»æœåŠ¡å™¨ã€‚</li><li>ä¸ä»…ä¸»æœåŠ¡å™¨å¯ä»¥æœ‰ä»æœåŠ¡å™¨ï¼Œ ä»æœåŠ¡å™¨ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„ä»æœåŠ¡å™¨ï¼Œ<br>å¤šä¸ªä»æœåŠ¡å™¨ä¹‹é—´å¯ä»¥æ„æˆä¸€ä¸ªå›¾çŠ¶ç»“æ„ã€‚</li><li>å¤åˆ¶åŠŸèƒ½ä¸ä¼šé˜»å¡ä¸»æœåŠ¡å™¨ï¼š å³ä½¿æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä»æœåŠ¡å™¨æ­£åœ¨è¿›è¡Œåˆæ¬¡<br>åŒæ­¥ï¼Œ ä¸»æœåŠ¡å™¨ä¹Ÿå¯ä»¥ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ã€‚ä¸è¿‡ï¼Œ åœ¨ä»æœåŠ¡å™¨åˆ é™¤æ—§ç‰ˆæœ¬æ•°æ®é›†å¹¶è½½å…¥æ–°ç‰ˆæœ¬æ•°æ®é›†çš„é‚£æ®µæ—¶é—´å†…ï¼Œ è¿æ¥è¯·æ±‚ä¼šè¢«é˜»å¡ã€‚</li><li>å¤åˆ¶åŠŸèƒ½å¯ä»¥å•çº¯åœ°ç”¨äºæ•°æ®å†—ä½™ï¼ˆdata redundancyï¼‰ï¼Œ ä¹Ÿå¯ä»¥é€šè¿‡è®©å¤šä¸ªä»æœåŠ¡å™¨å¤„ç†åªè¯»å‘½ä»¤è¯·æ±‚æ¥æå‡æ‰©å±•æ€§ï¼ˆscalabilityï¼‰ï¼š æ¯”å¦‚è¯´ï¼Œ ç¹é‡çš„ SORT å‘½ä»¤å¯ä»¥äº¤ç»™é™„å±èŠ‚ç‚¹å»è¿è¡Œã€‚</li></ul><h2 id="2ã€ä»æœåŠ¡å™¨é…ç½®"><a href="#2ã€ä»æœåŠ¡å™¨é…ç½®" class="headerlink" title="2ã€ä»æœåŠ¡å™¨é…ç½®"></a>2ã€ä»æœåŠ¡å™¨é…ç½®</h2><p>æ–¹å¼ä¸€ï¼šç¼–è¾‘é…ç½®æ–‡ä»¶</p><p>ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰</p><blockquote><p>æ·»åŠ ä¸»æœåŠ¡å™¨çš„IP</p><p>slaveof 192.168.198.128 6379</p></blockquote><p>æ–¹å¼äºŒï¼šè°ƒç”¨ SLAVEOF å‘½ä»¤ï¼Œè¾“å…¥ä¸»æœåŠ¡å™¨çš„ IP å’Œç«¯å£ï¼Œç„¶ååŒæ­¥å°±ä¼šå¼€å§‹</p><p><code>å‰æï¼š</code>ä¸»ä»æœåŠ¡å™¨çš„redis-serverå‡å¯åŠ¨äº†</p><p>ï¼ˆä»…é€‚ç”¨äºå½“å‰çº¿ç¨‹çš„æœåŠ¡ï¼ŒåŒæ­¥æ—¶ï¼Œä¼šå°†è‡ªå·±åŸæ¥çš„keyå€¼æ•°æ®æ¸…ç©ºï¼Œå¹¶ä¸”åœ¨ä¸»æœåŠ¡å™¨é¡µé¢ä¼šæ˜¾ç¤ºå…³äºä»æœåŠ¡å™¨çš„æ—¥å¿—ä¿¡æ¯ï¼‰</p><blockquote><p>127.0.0.1:6379&gt; SLAVEOF 192.168.198.128 6379</p></blockquote><p>è‹¥æƒ³å–æ¶ˆè¯¥æœåŠ¡å™¨çš„ä¸»ä»å…³ç³»ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œä¸”è¿˜ä¼šä¿å­˜å½“å‰æ•°æ®</p><blockquote><p>127.0.0.1:6379&gt; SLAVEOF no one</p></blockquote><p>è¿æ¥è¿œç¨‹èŠ‚ç‚¹çš„redisæœåŠ¡ï¼ˆç«¯å£é»˜è®¤ä¸º6379ï¼‰</p><blockquote><p>redis-cli -h 192.168.198.128 </p></blockquote><h2 id="3ã€åªè¯»æœåŠ¡å™¨"><a href="#3ã€åªè¯»æœåŠ¡å™¨" class="headerlink" title="3ã€åªè¯»æœåŠ¡å™¨"></a>3ã€åªè¯»æœåŠ¡å™¨</h2><p>ä» Redis 2.6 å¼€å§‹ï¼Œ ä»æœåŠ¡å™¨æ”¯æŒ<code>åªè¯»æ¨¡å¼</code>ï¼Œ å¹¶ä¸”è¯¥æ¨¡å¼ä¸ºä»æœåŠ¡å™¨çš„é»˜è®¤æ¨¡å¼ã€‚<br>ï‚·  åªè¯»æ¨¡å¼é…ç½®</p><blockquote><p>æ–¹å¼ä¸€ï¼šç”± redis.conf æ–‡ä»¶ä¸­çš„ slave-read-only é€‰é¡¹æ§åˆ¶</p><p>slave-read-only yes</p><p>æ–¹å¼äºŒï¼šé€šè¿‡ CONFIG SET å‘½ä»¤æ¥å¼€å¯æˆ–å…³é—­è¿™ä¸ªæ¨¡å¼</p></blockquote><p>ï‚·  åªè¯»ä»æœåŠ¡å™¨ä¼šæ‹’ç»æ‰§è¡Œä»»ä½•å†™å‘½ä»¤ï¼Œ æ‰€ä»¥ä¸ä¼šå‡ºç°å› ä¸ºæ“ä½œå¤±è¯¯è€Œå°†æ•°æ®ä¸å°å¿ƒå†™å…¥åˆ°äº†ä»æœåŠ¡å™¨çš„æƒ…å†µã€‚</p><p>ï‚·  å¦å¤–ï¼Œå¯¹ä¸€ä¸ªä»å±æœåŠ¡å™¨æ‰§è¡Œå‘½ä»¤ SLAVEOF NO ONE å°†ä½¿å¾—è¿™ä¸ªä»å±æœåŠ¡å™¨å…³é—­å¤åˆ¶åŠŸèƒ½ï¼Œå¹¶ä»ä»å±æœåŠ¡å™¨è½¬å˜å›ä¸»æœåŠ¡å™¨ï¼ŒåŸæ¥åŒæ­¥æ‰€å¾—çš„æ•°æ®é›†ä¸ä¼šè¢«ä¸¢å¼ƒã€‚</p><p>ï‚·  åˆ©ç”¨ã€ SLAVEOF NO ONE ä¸ä¼šä¸¢å¼ƒåŒæ­¥æ‰€å¾—æ•°æ®é›†ã€è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥åœ¨ä¸»æœåŠ¡å™¨å¤±è´¥çš„æ—¶å€™ï¼Œå°†ä»å±æœåŠ¡å™¨ç”¨ä½œæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œä»è€Œå®ç°æ— é—´æ–­è¿è¡Œã€‚</p><h2 id="4ã€ä»æœåŠ¡å™¨ç›¸å…³é…ç½®ï¼š"><a href="#4ã€ä»æœåŠ¡å™¨ç›¸å…³é…ç½®ï¼š" class="headerlink" title="4ã€ä»æœåŠ¡å™¨ç›¸å…³é…ç½®ï¼š"></a>4ã€ä»æœåŠ¡å™¨ç›¸å…³é…ç½®ï¼š</h2><p>è®¾ç½®å¯†ç ï¼š</p><p>â€‹     ä¸»æœåŠ¡å™¨ï¼š</p><blockquote><p>é€šè¿‡ requirepass é€‰é¡¹è®¾ç½®å¯†ç </p></blockquote><p>â€‹     ä»æœåŠ¡å™¨ï¼š</p><p>æ–¹å¼ä¸€ï¼š</p><blockquote><p>æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼Œä½¿ç”¨å®¢æˆ·ç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<br>config set masterauth <password></password></p></blockquote><p>æ–¹å¼äºŒï¼š</p><blockquote><p>å°†å®ƒåŠ å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š<br>masterauth <password></password></p></blockquote><h2 id="5ã€ä¸»æœåŠ¡å™¨é…ç½®"><a href="#5ã€ä¸»æœåŠ¡å™¨é…ç½®" class="headerlink" title="5ã€ä¸»æœåŠ¡å™¨é…ç½®"></a>5ã€ä¸»æœåŠ¡å™¨é…ç½®</h2><p>åªåœ¨æœ‰è‡³å°‘ N  ä¸ªä»æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œæ‰æ‰§è¡Œå†™æ“ä½œ</p><p>ä» Redis 2.8 å¼€å§‹ï¼Œ ä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ï¼Œå¯ä»¥é€šè¿‡é…ç½®ï¼Œ è®©ä¸»æœåŠ¡å™¨åªåœ¨æœ‰è‡³å°‘ N ä¸ªå½“å‰å·²è¿æ¥ä»æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œ æ‰æ‰§è¡Œå†™å‘½ä»¤ã€‚</p><blockquote><p>min-slaves-to-write <number of="" slaves=""><br>min-slaves-max-lag <number of="" seconds=""></number></number></p></blockquote><p>è‡³å°‘æœ‰ min-slaves-to-write ä¸ªä»æœåŠ¡å™¨ï¼Œ å¹¶ä¸”è¿™äº›æœåŠ¡å™¨çš„å»¶è¿Ÿå€¼éƒ½å°‘äº min-slaves-max-lag ç§’ï¼Œ é‚£ä¹ˆä¸»æœåŠ¡å™¨å°±ä¼šæ‰§è¡Œå®¢æˆ·ç«¯è¯·æ±‚çš„å†™æ“ä½œã€‚</p><h1 id="ä¸ƒã€Redis-sentinel-å“¨å…µ"><a href="#ä¸ƒã€Redis-sentinel-å“¨å…µ" class="headerlink" title="ä¸ƒã€Redis-sentinel( å“¨å…µ)"></a>ä¸ƒã€Redis-sentinel( å“¨å…µ)</h1><h2 id="0ã€å‰æƒ…æè¦-2"><a href="#0ã€å‰æƒ…æè¦-2" class="headerlink" title="0ã€å‰æƒ…æè¦"></a>0ã€å‰æƒ…æè¦</h2><p>Redis çš„ Sentinel ç³»ç»Ÿç”¨äºç®¡ç†å¤šä¸ª Redis æœåŠ¡å™¨ï¼Œè¯¥ç³»ç»Ÿæ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªä»»åŠ¡ï¼š</p><ul><li><p>ç›‘æ§ï¼ˆMonitoringï¼‰ï¼š Sentinel ä¼šä¸æ–­åœ°æ£€æŸ¥ä½ çš„ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦è¿ä½œæ­£å¸¸ã€‚</p></li><li><p>æé†’ï¼ˆNotificationï¼‰ï¼š å½“è¢«ç›‘æ§çš„æŸä¸ª Redis æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼ŒSentinel å¯ä»¥é€šè¿‡ API å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥ã€‚</p></li><li><p>è‡ªåŠ¨æ•…éšœè¿ç§»ï¼ˆAutomatic failoverï¼‰ï¼š å½“ä¸€ä¸ªä¸»æœåŠ¡å™¨ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼Œ Sentinel ä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨æ•…éšœè¿ç§»æ“ä½œï¼Œ å®ƒä¼šå°†å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä¸­ä¸€ä¸ªä»æœåŠ¡å™¨å‡çº§ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œ å¹¶è®©å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä»–ä»æœåŠ¡å™¨æ”¹ä¸ºå¤åˆ¶æ–°çš„ä¸»æœåŠ¡å™¨ï¼› å½“å®¢æˆ·ç«¯è¯•å›¾è¿æ¥å¤±æ•ˆçš„ä¸»æœåŠ¡å™¨æ—¶ï¼Œé›†ç¾¤ä¹Ÿä¼šå‘å®¢æˆ·ç«¯è¿”å›æ–°ä¸»æœåŠ¡å™¨çš„åœ°å€ï¼Œ ä½¿å¾—é›†ç¾¤å¯ä»¥ä½¿ç”¨æ–°ä¸»æœåŠ¡å™¨ä»£æ›¿å¤±æ•ˆæœåŠ¡å™¨ã€‚</p></li><li>Redis Sentinel æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªæ¶æ„ä¸­è¿è¡Œå¤šä¸ª Sentinel è¿›ç¨‹ï¼Œ è¿™äº›è¿›ç¨‹ä½¿ç”¨æµè¨€åè®®ï¼ˆgossipprotocols)æ¥æ¥æ”¶å…³äºä¸»æœåŠ¡å™¨æ˜¯å¦ä¸‹çº¿çš„ä¿¡æ¯ï¼Œ å¹¶ä½¿ç”¨æŠ•ç¥¨åè®®ï¼ˆagreement protocolsï¼‰æ¥å†³å®šæ˜¯å¦æ‰§è¡Œè‡ªåŠ¨æ•…éšœè¿ç§»ï¼Œä»¥åŠé€‰æ‹©å“ªä¸ªä»æœåŠ¡å™¨ä½œä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ã€‚</li></ul><h2 id="1ã€å¯åŠ¨-Sentinel"><a href="#1ã€å¯åŠ¨-Sentinel" class="headerlink" title="1ã€å¯åŠ¨ Sentinel"></a>1ã€å¯åŠ¨ Sentinel</h2><p>æ–¹å¼ä¸€ï¼š</p><p>å¯¹äº redis-sentinel ç¨‹åºï¼Œ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨Sentinel ç³»ç»Ÿï¼š</p><blockquote><p>redis-sentinel  /path/to/sentinel.conf</p></blockquote><p>æ–¹å¼äºŒï¼š</p><p>å¯¹äº redis-server ç¨‹åºï¼Œ ä½ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªè¿è¡Œåœ¨ Sentinel æ¨¡å¼ä¸‹çš„ Redis æœåŠ¡å™¨ï¼š</p><blockquote><p>redis- - server /path/to/sentinel.conf  â€“ sentinel</p></blockquote><p><code>æ³¨æ„ï¼š</code></p><blockquote><p>å¯åŠ¨ Sentinel å®ä¾‹å¿…é¡»æŒ‡å®šç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œ ç³»ç»Ÿä¼šä½¿ç”¨é…ç½®æ–‡ä»¶æ¥ä¿å­˜ Sentinel çš„å½“å‰çŠ¶æ€ï¼Œ å¹¶åœ¨ Sentinel é‡å¯æ—¶é€šè¿‡è½½å…¥é…ç½®æ–‡ä»¶æ¥è¿›è¡ŒçŠ¶æ€è¿˜åŸã€‚å¦‚æœå¯åŠ¨ Sentinel æ—¶æ²¡æœ‰æŒ‡å®šç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œ æˆ–è€…æŒ‡å®šçš„é…ç½®æ–‡ä»¶ä¸å¯å†™ï¼ˆnot writableï¼‰ï¼Œ é‚£ä¹ˆ Sentinel ä¼šæ‹’ç»å¯åŠ¨ã€‚</p></blockquote><h2 id="2-ã€é…ç½®-Sentinel"><a href="#2-ã€é…ç½®-Sentinel" class="headerlink" title="2  ã€é…ç½® Sentinel"></a>2  ã€é…ç½® Sentinel</h2><p>Redis æºç ä¸­åŒ…å«äº†ä¸€ä¸ªåä¸º sentinel.conf çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªå¸¦æœ‰è¯¦ç»†æ³¨é‡Šçš„ Sentinel é…ç½®æ–‡ä»¶ç¤ºä¾‹ã€‚<br>è¿è¡Œä¸€ä¸ª Sentinel æ‰€éœ€çš„æœ€å°‘é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sentinel monitor mymaster  192.168.198.128 6379 2 </span><br><span class="line">sentinel down-after-milliseconds mymaster 30000</span><br><span class="line">sentinel failover-timeout mymaster 180000</span><br><span class="line">sentinel parallel-syncs mymaster 1</span><br><span class="line">protected-mode no / bind  æœ¬æœº  IP</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ï¼š</code>ä¸»æœåŠ¡å™¨æ— å¯†ç æ—¶ï¼Œè®°å¾—åœ¨ sentinel é…ç½®é‡Œé…ä¸Šbind æœ¬æœº ip ï¼Œæˆ–è€…å…³æ‰ä¿æŠ¤æ¨¡å¼ protected-mode no</p><p><code>é…ç½®è§£é‡Šï¼š</code></p><blockquote><p>ç¬¬ä¸€è¡Œé…ç½®æŒ‡ç¤º Sentinel å»ç›‘è§†ä¸€ä¸ªåä¸º mymaster çš„ä¸»æœåŠ¡å™¨ï¼Œ è¿™ä¸ªä¸»æœåŠ¡å™¨çš„ IP åœ°å€ä¸º 127.0.0.1 ï¼Œ ç«¯å£å·ä¸º 6379 ï¼Œ è€Œå°†è¿™ä¸ªä¸»æœåŠ¡å™¨åˆ¤æ–­ä¸ºå¤±æ•ˆè‡³å°‘éœ€è¦ 2 ä¸ªSentinel åŒæ„ ï¼ˆåªè¦åŒæ„ Sentinel çš„æ•°é‡ä¸è¾¾æ ‡ï¼Œè‡ªåŠ¨æ•…éšœè¿ç§»å°±ä¸ä¼šæ‰§è¡Œï¼‰ã€‚</p></blockquote><blockquote><p>down-after-milliseconds é€‰é¡¹</p><p>æŒ‡å®šäº† Sentinel è®¤ä¸ºæœåŠ¡å™¨å·²ç»æ–­çº¿æ‰€éœ€çš„æ¯«ç§’æ•°ã€‚</p><p>å¦‚æœæœåŠ¡å™¨åœ¨ç»™å®šçš„æ¯«ç§’æ•°ä¹‹å†…ï¼Œ æ²¡æœ‰è¿”å› Sentinelå‘é€çš„ PING å‘½ä»¤çš„å›å¤ï¼Œ æˆ–è€…è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œ é‚£ä¹ˆ Sentinel å°†è¿™ä¸ªæœåŠ¡å™¨æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿</p></blockquote><blockquote><p>parallel-syncs é€‰é¡¹æŒ‡å®šäº†åœ¨æ‰§è¡Œæ•…éšœè½¬ç§»æ—¶ï¼Œ æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªä»æœåŠ¡å™¨åŒæ—¶å¯¹æ–°çš„ä¸»æœåŠ¡å™¨è¿›è¡ŒåŒæ­¥ï¼Œ è¿™ä¸ªæ•°å­—è¶Šå°ï¼Œ å®Œæˆæ•…éšœè½¬ç§»æ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå€¼è®¾ä¸º 1 æ¥ä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªä»æœåŠ¡å™¨å¤„äºä¸èƒ½å¤„ç†å‘½ä»¤è¯·æ±‚çš„çŠ¶æ€ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å†…å­˜æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linuxç³»ç»Ÿç¯å¢ƒ </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stormå­¦ä¹ </title>
      <link href="/2019/01/29/Storm%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/29/Storm%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€Stormç®€ä»‹"><a href="#ä¸€ã€Stormç®€ä»‹" class="headerlink" title="ä¸€ã€Stormç®€ä»‹"></a>ä¸€ã€Stormç®€ä»‹</h1><p>å®˜ç½‘ï¼š<a href="http://storm.apache.org/" target="_blank" rel="noopener">Storm</a></p><p>1ã€Storm ï¼šæµå¼è®¡ç®—å¤„ç†æ¡†æ¶</p><p>2ã€ ç‰¹ç‚¹ï¼š</p><ul><li>å®æ—¶</li><li>åˆ†å¸ƒå¼</li><li>é«˜å®¹é”™</li><li>stormå¸¸é©»å†…å­˜ï¼ˆ7*24h:æ„å‘³ç€æ°¸ä¹…è¿è¡Œï¼Œéœ€äººä¸ºå…³é—­ï¼‰</li><li>æ•°æ®ä¸ç»è¿‡ç£ç›˜ï¼Œåœ¨å†…å­˜ä¸­å¤„ç†</li><li>é«˜å¯é æ€§ï¼šå¼‚å¸¸å¤„ç†ã€æ¶ˆæ¯å¯é æ€§ä¿éšœæœºåˆ¶</li><li>å¯ç»´æŠ¤æ€§ï¼šStormUIå›¾å½¢åŒ–ç›‘æ§æ¥å£</li></ul><p>3ã€åº”ç”¨</p><p>ï¼ˆ1ï¼‰æµå¼å¤„ç†ï¼šï¼ˆå¼‚æ­¥ï¼‰</p><p>â€‹     å®¢æˆ·ç«¯æäº¤æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œå¹¶ä¸ä¼šç­‰å¾…è®¡ç®—ç»“æœ</p><p>ä¸¾ä¾‹ï¼š</p><ul><li>é€æ¡å¤„ç†ï¼šETLï¼ˆç”¨äºæ•°æ®æ¸…æ´—ï¼‰</li><li>ç»Ÿè®¡åˆ†æ</li></ul><p><img src="images/storm1.jpg" alt=""></p><p>ï¼ˆ2ï¼‰å®æ—¶è¯·æ±‚åº”ç­”æœåŠ¡ï¼šï¼ˆåŒæ­¥ï¼‰</p><p>   å®¢æˆ·ç«¯æäº¤æ•°æ®åï¼Œç«‹åˆ»å–å¾—è®¡ç®—ç»“æœå¹¶è¿”å›ç»™å®¢æˆ·ç«¯</p><p>ä¸¾ä¾‹ï¼š</p><p><img src="images/storm0.jpg" alt=""></p><h1 id="äºŒã€Stormæ¶æ„"><a href="#äºŒã€Stormæ¶æ„" class="headerlink" title="äºŒã€Stormæ¶æ„"></a>äºŒã€Stormæ¶æ„</h1><p>ï¼ˆä»è¿›ç¨‹è§’åº¦ï¼‰</p><p><img src="images/storm5.jpg" alt=""></p><h2 id="1ã€nimbus-ä¸»"><a href="#1ã€nimbus-ä¸»" class="headerlink" title="1ã€nimbus : (ä¸»)"></a>1ã€nimbus : (ä¸»)</h2><p>æ¥æ”¶å®¢æˆ·ç«¯æäº¤çš„è¯·æ±‚ï¼›</p><p>èµ„æºè°ƒåº¦ã€ä»»åŠ¡åˆ†é…ã€æ¥æ”¶jaråŒ…</p><h2 id="2ã€supervisorï¼š-ä»"><a href="#2ã€supervisorï¼š-ä»" class="headerlink" title="2ã€supervisorï¼š(ä»)"></a>2ã€supervisorï¼š(ä»)</h2><p> æ¥æ”¶nimbusåˆ†é…çš„ä»»åŠ¡ã€å¯åœworker</p><h2 id="3ã€worker"><a href="#3ã€worker" class="headerlink" title="3ã€worker"></a>3ã€worker</h2><p>â€“ è¿è¡Œå…·ä½“å¤„ç†è¿ç®—ç»„ä»¶çš„è¿›ç¨‹ï¼ˆæ¯ä¸ªWorkerå¯¹åº”æ‰§è¡Œä¸€ä¸ªTopologyçš„å­é›†ï¼‰<br>â€“ workerä»»åŠ¡ç±»å‹ï¼Œå³spoutä»»åŠ¡ã€boltä»»åŠ¡ä¸¤ç§<br>â€“ å¯åŠ¨executor<br>ï¼ˆexecutorå³worker JVMè¿›ç¨‹ä¸­çš„ä¸€ä¸ªjavaçº¿ç¨‹ï¼Œä¸€èˆ¬é»˜è®¤æ¯ä¸ªexecutorè´Ÿè´£æ‰§è¡Œä¸€ä¸ªtaskä»»åŠ¡ï¼‰</p><h2 id="4ã€zookeeper"><a href="#4ã€zookeeper" class="headerlink" title="4ã€zookeeper"></a>4ã€zookeeper</h2><p>å­˜å‚¨å¿ƒè·³ä¿¡æ¯ã€ä»»åŠ¡ä¿¡æ¯</p><blockquote><p>æ•°æ®ä¼ è¾“</p><p>ZMQ  ï¼šZeroMQå¼€æºçš„æ¶ˆæ¯ä¼ é€’æ¡†æ¶ã€‚å¹¶ä¸æ˜¯æ¶ˆæ¯é˜Ÿåˆ—</p><p>Netty ï¼šåŸºäºNIOçš„ç½‘ç»œæ¡†æ¶ï¼Œé«˜æ•ˆï¼ˆStorm 0.9ä¹‹åä½¿ç”¨ï¼‰</p></blockquote><h1 id="ä¸‰ã€Stormç¼–ç¨‹æ¨¡å‹"><a href="#ä¸‰ã€Stormç¼–ç¨‹æ¨¡å‹" class="headerlink" title="ä¸‰ã€Stormç¼–ç¨‹æ¨¡å‹"></a>ä¸‰ã€Stormç¼–ç¨‹æ¨¡å‹</h1><p><img src="https://upload-images.jianshu.io/upload_images/2826805-0fdf7e8af9608fce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p><img src="images/storm3.jpg" alt=""></p><ul><li><strong>Topology</strong>ï¼ˆDAGæœ‰å‘æ— ç¯å›¾çš„å®ç°ï¼‰</li></ul><blockquote><p>æ˜¯å¯¹Stormå®æ—¶è®¡ç®—é€»è¾‘çš„å°è£…ï¼Œç”±ä¸€ç³»åˆ—é€šè¿‡æ•°æ®æµç›¸äº’å…³è”çš„Spoutã€Boltç»„æˆçš„æ‹“æ‰‘ç»“æ„</p></blockquote><blockquote><p>ç”Ÿå‘½å‘¨æœŸï¼š</p><p>æ­¤æ‹“æ‰‘ç»“æ„åªè¦å¯åŠ¨ï¼Œå°±ä¼šåœ¨é›†ç¾¤ä¸­ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°æ‰‹åŠ¨å°†å…¶killï¼Œå¦åˆ™ä¸ä¼šç»ˆæ­¢ã€‚</p><p>ï¼ˆä¸MapReduceä¸­Jobçš„åŒºåˆ«ï¼ŒMRä¸­Jobåœ¨è®¡ç®—å®Œæˆåå°±ä¼šç»ˆæ­¢ï¼‰</p></blockquote><ul><li><strong>spout</strong>ï¼ˆæ•°æ®æºï¼šå‘é€æ•°æ®ï¼‰</li></ul><blockquote><p>ä¸€èˆ¬ä¼šä»æŒ‡å®šçš„æ•°æ®æºè¯»å–å…ƒç¥–ï¼ˆTupleï¼‰å‘é€åˆ°æ‹“æ‰‘ï¼ˆTopologyï¼‰ä¸­</p><ul><li><p>ä¸€ä¸ªSpoutå¯ä»¥å‘é€å¤šä¸ªStream</p><p>ï¼ˆé€šè¿‡OutputFieldDeclareçš„declareæ–¹æ³•å£°æ˜ä¸åŒçš„æ•°æ®æµï¼Œå‘é€æ•°æ®æ—¶é€šè¿‡SpoutOutputCollectorä¸­çš„emitæ–¹æ³•æŒ‡å®š StreamIdå°†æ•°æ®å‘é€å‡ºå»ï¼‰</p></li><li><p>Spoutä¸­çš„æ ¸å¿ƒæ–¹æ³•æ˜¯nextTupleï¼Œè¯¥æ–¹æ³•ä¼šè¢«Stormçº¿ç¨‹ä¸æ–­è°ƒç”¨ã€ä¸»åŠ¨ä»æ•°æ®æºæ‹‰å–æ•°æ®ã€å†é€šè¿‡emitæ–¹æ³•å°†æ•°æ®ç”Ÿæˆå…ƒç¥–ï¼ˆTupleï¼‰å‘é€ç»™ä¹‹åçš„Boltè®¡ç®—</p></li></ul></blockquote><ul><li><strong>bolt</strong>ï¼ˆæ•°æ®å¤„ç†ç»„ä»¶ï¼šè®¡ç®—æ•°æ®ï¼Œä¸ªæ•°ä¸é™ï¼‰</li></ul><blockquote><p>å•ä¸ªBoltå¯å®ç°ç®€å•çš„ä»»åŠ¡æˆ–æ•°æ®æµè½¬æ¢</p><p>å¤æ‚çš„åœºæ™¯éœ€è¦å¤šä¸ªBoltåˆ†å¤šä¸ªæ­¥éª¤å®Œæˆ</p><ul><li><p>ä¸€ä¸ªBoltå¯ä»¥å‘é€å¤šä¸ªStream</p><p>ï¼ˆé€šè¿‡OutputFieldDeclareçš„declareæ–¹æ³•å£°æ˜ä¸åŒçš„æ•°æ®æµï¼Œå‘é€æ•°æ®æ—¶é€šè¿‡SpoutOutputCollectorä¸­çš„emitæ–¹æ³•æŒ‡å®š StreamIdå°†æ•°æ®å‘é€å‡ºå»ï¼‰</p></li><li><p>Boltä¸­çš„æ ¸å¿ƒæ–¹æ³•æ˜¯executeï¼Œè¯¥æ–¹æ³•é€šè¿‡æ¥æ”¶ä¸€ä¸ªå…ƒç»„æ•°æ®ã€å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</p></li></ul></blockquote><ul><li><strong>tuple</strong>ï¼ˆStreamä¸­æœ€å°çš„æ•°æ®ç»„æˆå•ä½ï¼‰</li><li><strong>Stream</strong>ï¼ˆæ•°æ®æµï¼‰</li></ul><blockquote><ul><li>ä»Spoutä¸­ä¼ é€’æ•°æ®ç»™Boltã€ä¸Šä¸€ä¸ªBoltä¼ é€’æ•°æ®ç»™ä¸‹ä¸€ä¸ªBlotï¼Œè¿™æ ·å½¢æˆçš„æ•°æ®é€šé“å«åšStream</li></ul><ul><li>Streamå£°æ˜æ—¶éœ€è¦ç»™å…¶æŒ‡å®šIdï¼ˆé»˜è®¤ä¸ºDefaultï¼Œå®é™…å¼€å‘ä¸­å¤šä½¿ç”¨å•ä¸€æ•°æ®æµï¼Œæ— éœ€æŒ‡å®šStreamIdï¼‰</li></ul></blockquote><ul><li><strong>Stream Grouping</strong> â€“ æ•°æ®æµåˆ†ç»„ï¼ˆå³æ•°æ®åˆ†å‘ç­–ç•¥ï¼‰</li></ul><h1 id="å››ã€Stormå®‰è£…éƒ¨ç½²"><a href="#å››ã€Stormå®‰è£…éƒ¨ç½²" class="headerlink" title="å››ã€Stormå®‰è£…éƒ¨ç½²"></a>å››ã€Stormå®‰è£…éƒ¨ç½²</h1><p>ï¼ˆå®Œå…¨åˆ†å¸ƒå¼ï¼‰</p><p>ç¯å¢ƒï¼šzookeeperé›†ç¾¤ï¼ˆnode00ï¼Œnode01ï¼Œnode02ï¼‰</p><p>1ã€è§£å‹å®‰è£…</p><p>ç‰ˆæœ¬ï¼šapache-storm-0.10.0.tar.gz</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zvxf apache-storm-0.10.0.tar.gz</span><br></pre></td></tr></table></figure><p>2ã€åœ¨stormç›®å½•ä¸­åˆ›å»ºlogsç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir logs</span><br></pre></td></tr></table></figure><p>3ã€ç¼–è¾‘é…ç½®æ–‡ä»¶è§£å‹è·¯å¾„/config/storm.yaml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">storm.zookeeper.servers:</span><br><span class="line">- &quot;node00&quot;</span><br><span class="line">- &quot;node01&quot;</span><br><span class="line">- &quot;node02&quot;</span><br><span class="line">storm.local.dir: &quot;/opt/storm&quot;</span><br><span class="line">nimbus.host: â€œnode00&quot;</span><br><span class="line">supervisor.slots.ports:</span><br><span class="line">- 6700</span><br><span class="line">- 6701</span><br><span class="line">- 6702</span><br><span class="line">- 6703</span><br></pre></td></tr></table></figure><p>å°†å®‰è£…åŒ…å‘é€åˆ°å…¶ä»–èŠ‚ç‚¹</p><p>4ã€å¯åŠ¨æœåŠ¡</p><p>ï¼ˆ1ï¼‰å¯åŠ¨zookeeperâ€˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh start</span><br></pre></td></tr></table></figure><p>(2)å¯åŠ¨nimbusï¼ˆåœ¨node00ä¸Šï¼šstormå®‰è£…ç›®å½•ä¸‹ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./bin/storm nimbus &gt;&gt; ./logs/nimbus.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p><code>nohup</code>:é˜²æ­¢è¢«æ“ä½œç³»ç»Ÿæ„å¤–æŒ‚èµ·</p><p><code>2&gt;&amp;1</code>ï¼šæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘</p><p><code>&amp;</code>ï¼šåå°è¿è¡Œ</p><p>(3)å¯åŠ¨supervisorï¼ˆåœ¨node01 ï¼Œnode02ä¸Šï¼šstormå®‰è£…ç›®å½•ä¸‹ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/storm supervisor&gt;&gt; ./logs/supervisor.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>(4)æŸ¥çœ‹è¿›ç¨‹ ï¼šjps</p><p>æ˜¾ç¤ºï¼š</p><p>node00ï¼š</p><blockquote><p>[root@node00 apache-storm-0.10.0]# jps<br>8869 QuorumPeerMain<br>9093 Jps<br>9083 config_value</p></blockquote><p>node01 ã€ node02</p><blockquote><p>[root@node01 apache-storm-0.10.0]# jps<br>7280 config_value<br>7290 Jps<br>7230 QuorumPeerMain</p></blockquote><p>ä¸”ä¸‰ä¸ªèŠ‚ç‚¹çš„logsç›®å½•ä¸‹ä¹Ÿç›¸åº”çš„ç”Ÿæˆäº†æŒ‡å®šçš„æ—¥å¿—æ–‡ä»¶</p><p>5ã€Storm UIï¼ˆä»æµè§ˆå™¨è®¿é—®ï¼Œåœ¨å‰å°é¡µé¢ä¸ŠæŸ¥çœ‹è¯¦æƒ…ï¼‰</p><p>ï¼ˆ1ï¼‰å¯åŠ¨æœåŠ¡ï¼ˆå¯åœ¨node00èŠ‚ç‚¹ï¼šstormå®‰è£…ç›®å½•ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/storm ui &gt;&gt; ./logs/ui.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æµè§ˆå™¨è®¿é—®</p><blockquote><p><a href="http://node00:8080" target="_blank" rel="noopener">http://node00:8080</a></p></blockquote><h1 id="äº”ã€Stormé‡ç‚¹æ¦‚å¿µè¯¦è§£"><a href="#äº”ã€Stormé‡ç‚¹æ¦‚å¿µè¯¦è§£" class="headerlink" title="äº”ã€Stormé‡ç‚¹æ¦‚å¿µè¯¦è§£"></a>äº”ã€Stormé‡ç‚¹æ¦‚å¿µè¯¦è§£</h1><h2 id="1ã€grouping"><a href="#1ã€grouping" class="headerlink" title="1ã€grouping"></a>1ã€grouping</h2><p> æ•°æ®æµåˆ†ç»„ï¼ˆå³æ•°æ®åˆ†å‘ç­–ç•¥ï¼‰</p><h2 id="2ã€å¹¶å‘æœºåˆ¶"><a href="#2ã€å¹¶å‘æœºåˆ¶" class="headerlink" title="2ã€å¹¶å‘æœºåˆ¶"></a>2ã€å¹¶å‘æœºåˆ¶</h2><p>topology<br>è´Ÿè½½å‡è¡¡</p><h2 id="3ã€å®¹é”™æœºåˆ¶"><a href="#3ã€å®¹é”™æœºåˆ¶" class="headerlink" title="3ã€å®¹é”™æœºåˆ¶"></a>3ã€å®¹é”™æœºåˆ¶</h2><h2 id="4ã€demoAPI"><a href="#4ã€demoAPI" class="headerlink" title="4ã€demoAPI"></a>4ã€demoAPI</h2><p>Storm WordCountï¼ˆæ•°æ®ç´¯åŠ ï¼‰</p><h2 id="5ã€ä¸MapReduceçš„åŒºåˆ«"><a href="#5ã€ä¸MapReduceçš„åŒºåˆ«" class="headerlink" title="5ã€ä¸MapReduceçš„åŒºåˆ«"></a>5ã€ä¸MapReduceçš„åŒºåˆ«</h2><table><thead><tr><th style="text-align:center">Storm</th><th style="text-align:center">MapReduce</th></tr></thead><tbody><tr><td style="text-align:center">æµå¼å¤„ç†</td><td style="text-align:center">æ‰¹å¤„ç†</td></tr><tr><td style="text-align:center">ï¼ˆæ¯«ï¼‰ç§’çº§</td><td style="text-align:center">åˆ†é’Ÿçº§</td></tr><tr><td style="text-align:center">DAGæ¨¡å‹</td><td style="text-align:center">Map+Reduceæ¨¡å‹</td></tr><tr><td style="text-align:center">å¸¸é©»å†…å­˜è¿è¡Œ</td><td style="text-align:center">åå¤å¯åœ</td></tr></tbody></table><h2 id="6ã€å’ŒSpark-Streamingçš„åŒºåˆ«"><a href="#6ã€å’ŒSpark-Streamingçš„åŒºåˆ«" class="headerlink" title="6ã€å’ŒSpark Streamingçš„åŒºåˆ«"></a>6ã€å’ŒSpark Streamingçš„åŒºåˆ«</h2><table><thead><tr><th style="text-align:center">Storm</th><th style="text-align:center">Spark Streaming</th></tr></thead><tbody><tr><td style="text-align:center">æµå¼å¤„ç†</td><td style="text-align:center">å¾®æ‰¹å¤„ç†</td></tr><tr><td style="text-align:center">ï¼ˆæ¯«ï¼‰ç§’çº§</td><td style="text-align:center">ç§’çº§</td></tr><tr><td style="text-align:center">æˆç†Ÿç¨³å®š</td><td style="text-align:center">ç¨³å®šæ€§æ”¹è¿›ä¸­</td></tr><tr><td style="text-align:center">ç‹¬ç«‹ç³»ç»Ÿ                           ä¸“ä¸ºæµå¼è®¡ç®—è®¾è®¡</td><td style="text-align:center">Sparkæ ¸å¿ƒçš„ä¸€ç§è®¡ç®—æ¨¡å‹èƒ½ä¸å…¶ä»–ç»„ä»¶å¾ˆå¥½çš„ç»“åˆ</td></tr></tbody></table><p><strong>å°è®°</strong></p><p>1ã€stormæºç ä¸­åŒ…å«åç¼€åä¸º<code>.clj</code>çš„æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ç§Clojureç¼–ç¨‹è¯­è¨€ï¼Œå®ƒæ˜¯ä¸€ç§è¿è¡Œåœ¨JVMä¸Šçš„Lispæ–¹è¨€ã€‚è€ŒLispæ˜¯ä¸€ç§ä»¥è¡¨è¾¾æ€§å’ŒåŠŸèƒ½å¼ºå¤§è‘—ç§°çš„ç¼–ç¨‹è¯­è¨€ã€‚</p><p>2ã€é˜¿é‡Œå·´å·´åœ¨Stormçš„åŸºç¡€ä¸Šä½¿ç”¨Javaä»£ç å¹¶åšäº†ç›¸å…³çš„æ”¹è¿›ï¼Œå¼€å‘äº†JStormï¼Œå’ŒStormä¸€æ ·éƒ½æ˜¯å¼€æºçš„ã€‚ï¼ˆåå“ºè¡Œä¸ºï¼ŒåŒ…æ‹¬å°†Flinkâ†’Blinkï¼‰</p><p>$$</p><p><div id="flowchart-0" class="flow-chart"></div><br>$$</p><p><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: Start|past:>http://www.google.com[blank]e=>end: End:>http://www.google.comop1=>operation: My Operation|pastop2=>operation: Stuff|currentsub1=>subroutine: My Subroutine|invalidcond=>condition: Yesor No?|approved:>http://www.google.comc2=>condition: Good idea|rejectedio=>inputoutput: catch something...|requestst->op1(right)->condcond(yes, right)->c2cond(no)->sub1(left)->op1c2(yes)->io->ec2(no)->op2->e</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script></p>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stormï¼Œæµå¼å¤„ç†æ¡†æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flumeå­¦ä¹ </title>
      <link href="/2019/01/18/Flume%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/18/Flume%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€åˆ†ç±»"><a href="#ä¸€ã€åˆ†ç±»" class="headerlink" title="ä¸€ã€åˆ†ç±»"></a>ä¸€ã€åˆ†ç±»</h2><p><code>exec</code>ï¼š</p><blockquote><p> Unixç­‰æ“ä½œç³»ç»Ÿæ‰§è¡Œå‘½ä»¤è¡Œï¼Œå¦‚tail ï¼Œcat ã€‚å¯ç›‘å¬æ–‡ä»¶</p></blockquote><p><code>netcat</code></p><blockquote><p>ç›‘å¬ä¸€ä¸ªæŒ‡å®šç«¯å£ï¼Œå¹¶å°†æ¥æ”¶åˆ°çš„æ•°æ®çš„æ¯ä¸€è¡Œè½¬æ¢ä¸ºä¸€ä¸ªeventäº‹ä»¶</p></blockquote><p><code>avro</code></p><blockquote><p>åºåˆ—åŒ–çš„ä¸€ç§ï¼Œå®ç°RPCï¼ˆä¸€ç§è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ï¼‰ã€‚</p><p>ç›‘å¬AVROç«¯å£æ¥æ¥æ”¶å¤–éƒ¨AVROå®¢æˆ·ç«¯äº‹ä»¶æµ</p></blockquote><blockquote><p>capacityï¼šé»˜è®¤è¯¥é€šé“ä¸­æœ€å¤§çš„å¯ä»¥å­˜å‚¨çš„eventæ•°é‡æ˜¯1000</p><p>Trasaction Capacityï¼šæ¯æ¬¡æœ€å¤§å¯ä»¥sourceä¸­æ‹¿åˆ°æˆ–è€…é€åˆ°sinkä¸­çš„eventæ•°é‡ä¹Ÿæ˜¯100</p></blockquote><div class="github-widget" data-repo="MOxFIVE/hexo-theme-yelee"></div><h2 id="äºŒã€æ“ä½œ"><a href="#äºŒã€æ“ä½œ" class="headerlink" title="äºŒã€æ“ä½œ"></a>äºŒã€æ“ä½œ</h2><h3 id="1ã€-netcatï¼ˆç›‘å¬ç«¯å£ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰"><a href="#1ã€-netcatï¼ˆç›‘å¬ç«¯å£ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰" class="headerlink" title="1ã€ netcatï¼ˆç›‘å¬ç«¯å£ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰"></a>1ã€ netcatï¼ˆç›‘å¬ç«¯å£ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰</h3><h4 id="ï¼ˆ1ï¼‰-vim-netcat-logger"><a href="#ï¼ˆ1ï¼‰-vim-netcat-logger" class="headerlink" title="ï¼ˆ1ï¼‰ vim netcat_logger"></a>ï¼ˆ1ï¼‰ vim netcat_logger</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># example.conf: A single-node Flume configuration</span><br><span class="line"></span><br><span class="line"># Name the components on this agent</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line"># Describe/configure the source</span><br><span class="line">a1.sources.r1.type = netcat</span><br><span class="line">a1.sources.r1.bind = localhost</span><br><span class="line">a1.sources.r1.port = 44444</span><br><span class="line"></span><br><span class="line"># Describe the sink</span><br><span class="line">a1.sinks.k1.type = logger</span><br><span class="line"></span><br><span class="line"># Use a channel which buffers events in memory</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line"># Bind the source and sink to the channel</span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ"><a href="#ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ" class="headerlink" title="ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ"></a>ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ</h4><ul><li>ï¼ˆåœ¨ä¼šè¯1ç«¯ï¼‰</li></ul><blockquote><p>åœ¨node00èŠ‚ç‚¹çš„æ§åˆ¶å°è¾“å…¥<code>å¯åŠ¨</code>å‘½ä»¤ï¼š</p><p>(<code>æ–¹å¼ä¸€</code>ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„+æ–‡ä»¶å)</p><p>flume-ng agent</p><p> â€“conf-file /root/flume/netcat_logger â€“name a1 -Dflume.root.logger=INFO,console</p><p>ï¼ˆ<code>æ–¹å¼äºŒ</code>ï¼šé…ç½®æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼‰</p><p>flume-ng agent â€“conf ./ â€“conf-file netcat_logger â€“name a1 -Dflume.root.logger=INFO,console</p></blockquote><p><code>ç‰¹åˆ«æ³¨æ„</code>ï¼š</p><p>#####<code>å®˜ç½‘æ–¹å¼</code>#########</p><blockquote><p>flume-ng agent</p><p> â€“conf conf â€“conf-file netcat_logger â€“name a1 -Dflume.root.logger=INFO,console</p><p>è§£é‡Šï¼šæ­¤å‘½ä»¤é€‚ç”¨äºå°†é…ç½®æ–‡ä»¶æ”¾åœ¨flumeè§£å‹å®‰è£…ç›®å½•çš„confä¸­ï¼ˆä¸å¸¸ç”¨ï¼‰</p></blockquote><p><code>æ§åˆ¶å°æ˜¾ç¤º</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â€‹`````</span><br></pre></td></tr></table></figure><p>19/01/18 12:27:31 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started<br>19/01/18 12:27:31 INFO node.Application: Starting Sink k1<br>19/01/18 12:27:31 INFO node.Application: Starting Source r1<br>19/01/18 12:27:31 INFO source.NetcatSource: Source starting<br>19/01/18 12:27:31 INFO source.NetcatSource: Created serverSocket:sun.nio.ch.ServerSocketChannelImpl[/127.0.0.1:44444]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* (åœ¨ä¼šè¯2ç«¯)</span><br><span class="line"></span><br><span class="line">&gt; åœ¨node00èŠ‚ç‚¹çš„æ§åˆ¶å°è¾“å…¥å‘½ä»¤ï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; 1ã€åœ¨èŠ‚ç‚¹ä¸Šå®‰è£…telnetï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; yum install -y telnet</span><br><span class="line">&gt;</span><br><span class="line">&gt; yum -y install telnet-server</span><br><span class="line">&gt;</span><br><span class="line">&gt; 2ã€å¯åŠ¨ï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; telnet localhost 44444  </span><br><span class="line">&gt;</span><br><span class="line">&gt; `æ³¨æ„ï¼š`ï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p><blockquote><p>a1.sources.r1.bind = localhost<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;</span><br><span class="line">&gt; å‰ææ˜¯/etc/hostsä¸­å·²ç»é…ç½®</span><br><span class="line">&gt;</span><br><span class="line">&gt; å¦‚æœæ­¤å¤„é…ç½®localhost é‚£ä¹ˆå¯åŠ¨æ—¶ï¼Œlocalhost  æˆ–127.0.0.1éƒ½å¯ä»¥ï¼Œnode00å°±ä¸è¡Œ</span><br><span class="line">&gt;</span><br><span class="line">&gt; å¦‚æœæ­¤å¤„é…ç½®node00é‚£ä¹ˆå¯åŠ¨æ—¶ï¼Œnode00æˆ–ipéƒ½å¯ä»¥ï¼Œlocalhostå°±ä¸è¡Œ</span><br><span class="line">&gt;</span><br><span class="line">&gt; 3ã€åœ¨æ§åˆ¶å°è¾“å…¥ä»»ä½•å†…å®¹;</span><br><span class="line">&gt;</span><br><span class="line">&gt; éƒ½ä¼šåœ¨ä¼šè¯1ç«¯æ˜¾ç¤ºï¼Œä¸”ä¼šè¯1ç«¯ï¼ˆctrl+cï¼‰é€€å‡ºæœåŠ¡ï¼Œä¼šè¯2ç«¯ä¹Ÿè‡ªåŠ¨ç»“æŸ</span><br></pre></td></tr></table></figure></p></blockquote><p>  yum list telnet*   æŸ¥çœ‹telnetç›¸å…³çš„å®‰è£…åŒ…<br>   ç›´æ¥yum â€“y install telnet å°±OK<br>     yum -y install telnet-server å®‰è£…telnetæœåŠ¡<br>     yum -y install telnet-client  å®‰è£…telnetå®¢æˆ·ç«¯(å¤§éƒ¨åˆ†ç³»ç»Ÿé»˜è®¤å®‰è£…)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 2ã€avroï¼ˆç›‘å¬è¿œç¨‹å‘é€æ–‡ä»¶ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ1ï¼‰vim avro_logger</span><br></pre></td></tr></table></figure><p>#test avro sources</p><p>##ä½¿ç”¨avroæ–¹å¼åœ¨æŸèŠ‚ç‚¹ä¸Šå°†æ–‡ä»¶å‘é€åˆ°æœ¬æœåŠ¡å™¨ä¸Šä¸”é€šè¿‡loggeræ–¹å¼æ˜¾ç¤º</p><p>##å½“å‰flumeèŠ‚ç‚¹æ‰§è¡Œï¼š</p><p>#flume-ng agent â€“conf ./ â€“conf-file avro_loggers â€“name a1 -Dflume.root.logger=INFO,console</p><p>##å…¶ä»–flumeèŠ‚ç‚¹æ‰§è¡Œï¼š</p><p>#flume-ng avro-client â€“conf ./ -H 192.168.198.128 -p 55555 -F ./logs</p><p>a1.sources=r1<br>a1.channels=c1<br>a1.sinks=k1</p><p>a1.sources.r1.type = avro<br>a1.sources.r1.bind=192.168.198.128<br>a1.sources.r1.port=55555</p><p>a1.sinks.k1.type=logger</p><p>a1.channels.c1.type = memory<br>a1.channels.c1.capacity=1000<br>a1.channels.c1.transactionCapacity = 100</p><p>a1.sources.r1.channels=c1<br>a1.sinks.k1.channel=c1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å®ç°åŠŸèƒ½ï¼š</span><br><span class="line"></span><br><span class="line">&gt; ä½¿ç”¨avroæ–¹å¼åœ¨æŸèŠ‚ç‚¹ä¸Šå°†æ–‡ä»¶å‘é€åˆ°æœ¬æœåŠ¡å™¨ä¸Šä¸”é€šè¿‡loggeræ–¹å¼æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ2ï¼‰å‘½ä»¤æ“ä½œ</span><br><span class="line"></span><br><span class="line">##### `å¯åŠ¨` </span><br><span class="line"></span><br><span class="line">ï¼ˆåœ¨ä¼šè¯1ç«¯ï¼‰</span><br><span class="line"></span><br><span class="line">åœ¨node00ä¸Š</span><br><span class="line"></span><br><span class="line">*  ##å½“å‰flumeèŠ‚ç‚¹æ‰§è¡Œï¼ˆé…ç½®æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼‰ï¼š</span><br><span class="line"></span><br><span class="line">* &gt;  flume-ng agent --conf ./ --conf-file avro_logger --name a1 -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line">`æ˜¾ç¤ºï¼š`</span><br></pre></td></tr></table></figure></p><p>19/01/18 13:53:16 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started<br>19/01/18 13:53:16 INFO node.Application: Starting Sink k1<br>19/01/18 13:53:16 INFO node.Application: Starting Source r1<br>19/01/18 13:53:16 INFO source.AvroSource: Starting Avro source r1: { bindAddress: 192.168.198.128, port: 55555 }â€¦<br>19/01/18 13:53:17 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SOURCE, name: r1: Successfully registered new MBean.<br>19/01/18 13:53:17 INFO instrumentation.MonitoredCounterGroup: Component type: SOURCE, name: r1 started<br>19/01/18 13:53:17 INFO source.AvroSource: Avro source r1 started.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#####  å‘é€</span><br><span class="line"></span><br><span class="line">(åœ¨ä¼šè¯2ç«¯)</span><br><span class="line"></span><br><span class="line">åœ¨node00ä¸Šå‘é€æ–‡ä»¶åˆ°node00</span><br><span class="line"></span><br><span class="line">`å¯åŠ¨`</span><br><span class="line"></span><br><span class="line">##å¯åœ¨æœ¬åœ°å’Œå…¶ä»–flumeèŠ‚ç‚¹æ‰§è¡Œï¼ˆé…ç½®æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼‰ï¼š</span><br></pre></td></tr></table></figure><p>flume-ng avro-client â€“conf ./ -H 192.168.198.128 -p 55555 -F ./flume.log<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(åœ¨ä¼šè¯1ç«¯)</span><br></pre></td></tr></table></figure></p><p>19/01/18 14:12:57 INFO sink.LoggerSink: Event: { headers:{} body: 68 65 6C 6C 6F 20 62 69 67 64 61 74 61          hello bigdata }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æ—¶åˆ»ç›‘å¬ä¼ è¾“æ–‡ä»¶çš„å†…å®¹</span><br><span class="line"></span><br><span class="line">`æ³¨æ„`</span><br><span class="line"></span><br><span class="line">&gt; è¯¥è¿‡ç¨‹ä¹Ÿå¯åº”ç”¨äºä¸åŒèŠ‚ç‚¹ä¹‹é—´</span><br><span class="line"></span><br><span class="line">### 3ã€execï¼ˆç›‘å¬æŸä¸€å‘½ä»¤ï¼Œåœ¨æœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼‰</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ1ï¼‰vim exec_logger</span><br></pre></td></tr></table></figure></p><p>#å•èŠ‚ç‚¹flumeé…ç½®</p><h1 id="example-conf-A-single-node-Flume-configuration"><a href="#example-conf-A-single-node-Flume-configuration" class="headerlink" title="example.conf: A single-node Flume configuration"></a>example.conf: A single-node Flume configuration</h1><p>#ç»™agentä¸‰å¤§ç»“æ„å‘½å</p><h1 id="Name-the-components-on-this-agent"><a href="#Name-the-components-on-this-agent" class="headerlink" title="Name the components on this agent"></a>Name the components on this agent</h1><p>a1.sources = r1<br>a1.sinks = k1<br>a1.channels = c1</p><p>#æè¿°sourceçš„é…ç½®ï¼šç±»å‹ã€å‘½ä»¤ï¼ˆç›‘å¬/root/flume.logæ–‡ä»¶ï¼‰</p><h1 id="Describe-configure-the-source"><a href="#Describe-configure-the-source" class="headerlink" title="Describe/configure the source"></a>Describe/configure the source</h1><p>a1.sources.r1.type = exec<br>a1.sources.r1.command = tail -F /root/flume.log</p><p>#æè¿°sinkçš„é…ç½®ï¼šç±»å‹</p><h1 id="Describe-the-sink"><a href="#Describe-the-sink" class="headerlink" title="Describe the sink"></a>Describe the sink</h1><p>a1.sinks.k1.type = logger</p><p>#åœ¨å†…å­˜ä¸­ä½¿ç”¨ä¸€ä¸ªchannelç¼“å­˜äº‹ä»¶</p><h1 id="Use-a-channel-which-buffers-events-in-memory"><a href="#Use-a-channel-which-buffers-events-in-memory" class="headerlink" title="Use a channel which buffers events in memory"></a>Use a channel which buffers events in memory</h1><p>a1.channels.c1.type = memory<br>a1.channels.c1.capacity = 1000<br>a1.channels.c1.transactionCapacity = 100</p><p>#å°†sourceå’Œsinkç»‘å®šåˆ°channelä¸Š</p><h1 id="Bind-the-source-and-sink-to-the-channel"><a href="#Bind-the-source-and-sink-to-the-channel" class="headerlink" title="Bind the source and sink to the channel"></a>Bind the source and sink to the channel</h1><p>a1.sources.r1.channels = c1<br>a1.sinks.k1.channel = c1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ï¼ˆxshellä¼šè¯1ï¼šï¼‰</span><br><span class="line"></span><br><span class="line">&gt; åœ¨node00ä¸Šï¼š`å¯åŠ¨`</span><br><span class="line">&gt;</span><br><span class="line">&gt; åœ¨exec_loggeræ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹</span><br><span class="line">&gt;</span><br><span class="line">&gt; å‘½ä»¤ï¼šflume-ng agent  --conf-file exec_logger --name a1 -Dflume.root.logger=INFO,console</span><br><span class="line">&gt;</span><br><span class="line">&gt; r1 å¯åŠ¨</span><br><span class="line"></span><br><span class="line">&gt; ï¼ˆå¤åˆ¶ä¼šè¯ï¼šä¼šè¯2ï¼‰</span><br><span class="line">&gt;</span><br><span class="line">&gt; åœ¨node00ä¸Šï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; åœ¨rootç›®å½•ä¸‹</span><br><span class="line">&gt;</span><br><span class="line">&gt; å‘½ä»¤ï¼šecho hello bigdata &gt;&gt;flume.log</span><br><span class="line"></span><br><span class="line">&gt; ä¹‹ååœ¨ä¼šè¯2ä¸Š</span><br><span class="line">&gt;</span><br><span class="line">&gt; `loggeræœ¬åœ°æ§åˆ¶å°æ‰“å°ï¼š`</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><blockquote><p>19/01/18 12:03:23 INFO sink.LoggerSink:<br>Event:<br>{ headers:{} body: 68 65 6C 6C 6F 20 62 69 67 64 61 74 61  hello bigdata }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 4ã€netcatâ€“hdfs(ç›‘å¬æ•°æ®ï¼Œä¼ åˆ°hdfsä¸Š)</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ1ï¼‰vim netcat_hdfs</span><br></pre></td></tr></table></figure></p></blockquote><h1 id="a1-which-ones-we-want-to-activate"><a href="#a1-which-ones-we-want-to-activate" class="headerlink" title="a1 which ones we want to activate."></a>a1 which ones we want to activate.</h1><p>a1.channels = c1<br>a1.sources = r1<br>a1.sinks = k1</p><p>a1.sources.r1.type = netcat<br>a1.sources.r1.bind = node00<br>a1.sources.r1.port = 41414</p><p>a1.sinks.k1.type = hdfs<br>a1.sinks.k1.hdfs.path = hdfs://Sunrise/myflume/%y-%m-%d<br>a1.sinks.k1.hdfs.useLocalTimeStamp=true</p><h1 id="Define-a-memory-channel-called-c1-on-a1"><a href="#Define-a-memory-channel-called-c1-on-a1" class="headerlink" title="Define a memory channel called c1 on a1"></a>Define a memory channel called c1 on a1</h1><p>a1.channels.c1.type = memory</p><p>#é»˜è®¤å€¼ï¼Œå¯çœ</p><p>#a1.channels.c1.capacity = 1000</p><p>#a1.channels.c1.transactionCapacity = 100</p><h1 id="Define-an-Avro-source-called-r1-on-a1-and-tell-it"><a href="#Define-an-Avro-source-called-r1-on-a1-and-tell-it" class="headerlink" title="Define an Avro source called r1 on a1 and tell it"></a>Define an Avro source called r1 on a1 and tell it</h1><p>a1.sources.r1.channels = c1<br>a1.sinks.k1.channel = c1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### (2)æ“ä½œ</span><br><span class="line"></span><br><span class="line">åœ¨node00çš„ä¼šè¯1ä¸Š</span><br><span class="line"></span><br><span class="line">å¯åŠ¨</span><br><span class="line"></span><br><span class="line">&gt; åœ¨node00ä¸Šï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; åœ¨netcat_hdfsæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹</span><br><span class="line">&gt;</span><br><span class="line">&gt; å‘½ä»¤ï¼šflume-ng agent  --conf-file netcat_hdfs --name a1 -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºï¼š</span><br></pre></td></tr></table></figure></p><p>19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started<br>19/01/18 14:34:44 INFO node.Application: Starting Sink k1<br>19/01/18 14:34:44 INFO node.Application: Starting Source r1<br>19/01/18 14:34:44 INFO source.NetcatSource: Source starting<br>19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SINK, name: k1: Successfully registered new MBean.<br>19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Component type: SINK, name: k1 started<br>19/01/18 14:34:44 INFO source.NetcatSource: Created serverSocket:sun.nio.ch.ServerSocketChannelImpl[/192.168.198.128:41414]</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åœ¨node00çš„ä¼šè¯2ä¸Š</span><br><span class="line"></span><br><span class="line">å¯åŠ¨</span><br><span class="line"></span><br><span class="line">&gt; telnet node00 41414</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤º</span><br></pre></td></tr></table></figure><p>Trying 192.168.198.128â€¦<br>Connected to node00.<br>Escape character is â€˜^]â€™.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è¾“å…¥ä»»æ„å†…å®¹</span><br><span class="line"></span><br><span class="line">åœ¨node00ä¼šè¯1ç«¯ä¼šæ˜¾ç¤º</span><br></pre></td></tr></table></figure><p>19/01/18 14:36:50 INFO hdfs.HDFSSequenceFile: writeFormat = Writable, UseRawLocalFileSystem = false<br>19/01/18 14:36:51 INFO hdfs.BucketWriter: Creating hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp<br>19/01/18 14:37:29 INFO hdfs.BucketWriter: Closing hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp<br>19/01/18 14:37:29 INFO hdfs.BucketWriter: Renaming hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp to hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259<br>19/01/18 14:37:29 INFO hdfs.HDFSEventSink: Writer callback called.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åœ¨HDFåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šä¼šæ˜¾ç¤ºï¼Œç”Ÿæˆçš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">![](https://ws1.sinaimg.cn/large/005zftzDgy1fzb4acaz5fj30u10blmzc.jpg)</span><br><span class="line"></span><br><span class="line">![](https://ws1.sinaimg.cn/large/005zftzDgy1fzb4bsv8d2j30wd08k74i.jpg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">`æ³¨æ„ï¼š`</span><br><span class="line"></span><br><span class="line">è¿™ç§æƒ…å†µä¼šåœ¨hdfsä¸Šç”Ÿæˆå¾ˆå¤šå°æ–‡ä»¶ï¼Œ</span><br><span class="line"></span><br><span class="line">[åœ¨å®˜ç½‘](http://flume.apache.org/releases/content/1.8.0/FlumeUserGuide.html)</span><br><span class="line"></span><br><span class="line">HDFS Sinkï¼š[**](http://flume.apache.org/releases/content/1.8.0/FlumeUserGuide.html#hdfs-sink)</span><br><span class="line"></span><br><span class="line">æœ‰å¾ˆå¤šå…³äºæ–‡ä»¶ç”Ÿæˆè¿‡ç¨‹ä¸­çš„é…ç½®</span><br><span class="line"></span><br><span class="line">| Name                   | Default      | Description                                                  |</span><br><span class="line">| ---------------------- | ------------ | ------------------------------------------------------------ |</span><br><span class="line">| **channel**            | â€“            |                                                              |</span><br><span class="line">| **type**               | â€“            | The component type name, needs to be `hdfs`                  |</span><br><span class="line">| **hdfs.path**          | â€“            | HDFS directory path (eg hdfs://namenode/flume/webdata/)      |</span><br><span class="line">| hdfs.filePrefix        | FlumeData    | Name prefixed to files created by Flume in hdfs directory    |</span><br><span class="line">| hdfs.fileSuffix        | â€“            | Suffix to append to file (eg `.avro` - *NOTE: period is not automatically added*) |</span><br><span class="line">| hdfs.inUsePrefix       | â€“            | Prefix that is used for temporal files that flume actively writes into |</span><br><span class="line">| hdfs.inUseSuffix       | `.tmp`       | Suffix that is used for temporal files that flume actively writes into |</span><br><span class="line">| hdfs.rollInterval      | 30           | Number of seconds to wait before rolling current file (0 = never roll based on time interval) |</span><br><span class="line">| hdfs.rollSize          | 1024         | File size to trigger roll, in bytes (0: never roll based on file size) |</span><br><span class="line">| hdfs.rollCount         | 10           | Number of events written to file before it rolled (0 = never roll based on number of events) |</span><br><span class="line">| hdfs.idleTimeout       | 0            | Timeout after which inactive files get closed (0 = disable automatic closing of idle files) |</span><br><span class="line">| hdfs.batchSize         | 100          | number of events written to file before it is flushed to HDFS |</span><br><span class="line">| hdfs.codeC             | â€“            | Compression codec. one of following : gzip, bzip2, lzo, lzop, snappy |</span><br><span class="line">| hdfs.fileType          | SequenceFile | File format: currently `SequenceFile`, `DataStream` or `CompressedStream` (1)DataStream will not compress output file and please donâ€™t set codeC (2)CompressedStream requires set hdfs.codeC with an available codeC |</span><br><span class="line">| hdfs.maxOpenFiles      | 5000         | Allow only this number of open files. If this number is exceeded, the oldest file is closed. |</span><br><span class="line">| hdfs.minBlockReplicas  | â€“            | Specify minimum number of replicas per HDFS block. If not specified, it comes from the default Hadoop config in the classpath. |</span><br><span class="line">| hdfs.writeFormat       | Writable     | Format for sequence file records. One of `Text` or `Writable`. Set to `Text` before creating data files with Flume, otherwise those files cannot be read by either Apache Impala (incubating) or Apache Hive. |</span><br><span class="line">| hdfs.callTimeout       | 10000        | Number of milliseconds allowed for HDFS operations, such as open, write, flush, close. This number should be increased if many HDFS timeout operations are occurring. |</span><br><span class="line">| hdfs.threadsPoolSize   | 10           | Number of threads per HDFS sink for HDFS IO ops (open, write, etc.) |</span><br><span class="line">| hdfs.rollTimerPoolSize | 1            | Number of threads per HDFS sink for scheduling timed file rolling |</span><br><span class="line">| hdfs.kerberosPrincipal | â€“            | Kerberos user principal for accessing secure HDFS            |</span><br><span class="line">| hdfs.kerberosKeytab    | â€“            | Kerberos keytab for accessing secure HDFS                    |</span><br><span class="line">| hdfs.proxyUser         |              |                                                              |</span><br><span class="line">| hdfs.round             | false        | Should the timestamp be rounded down (if true, affects all time based escape sequences except %t) |</span><br><span class="line">| hdfs.roundValue        | 1            | Rounded down to the highest multiple of this (in the unit configured using `hdfs.roundUnit`), less than current time. |</span><br><span class="line">| hdfs.roundUnit         | second       | The unit of the round down value - `second`, `minute` or `hour`. |</span><br><span class="line">| hdfs.timeZone          | Local Time   | Name of the timezone that should be used for resolving the directory path, e.g. America/Los_Angeles. |</span><br><span class="line">| hdfs.useLocalTimeStamp | false        | Use the local time (instead of the timestamp from the event header) while replacing the escape sequences. |</span><br><span class="line">| hdfs.closeTries        | 0            | Number of times the sink must try renaming a file, after initiating a close attempt. If set to 1, this sink will not re-try a failed rename (due to, for example, NameNode or DataNode failure), and may leave the file in an open state with a .tmp extension. If set to 0, the sink will try to rename the file until the file is eventually renamed (there is no limit on the number of times it would try). The file may still remain open if the close call fails but the data will be intact and in this case, the file will be closed only after a Flume restart. |</span><br><span class="line">| hdfs.retryInterval     | 180          | Time in seconds between consecutive attempts to close a file. Each close call costs multiple RPC round-trips to the Namenode, so setting this too low can cause a lot of load on the name node. If set to 0 or less, the sink will not attempt to close the file if the first attempt fails, and may leave the file open or with a â€.tmpâ€ extension. |</span><br><span class="line">| serializer             | `TEXT`       | Other possible options include `avro_event` or the fully-qualified class name of an implementation of the `EventSerializer.Builder` interface. |</span><br><span class="line"></span><br><span class="line">netcat-hdfs </span><br><span class="line"></span><br><span class="line">ï¼ˆé…ç½®æ–¹å¼äºŒï¼‰</span><br></pre></td></tr></table></figure><h1 id="a1-which-ones-we-want-to-activate-1"><a href="#a1-which-ones-we-want-to-activate-1" class="headerlink" title="a1 which ones we want to activate."></a>a1 which ones we want to activate.</h1><p>a1.channels = c1<br>a1.sources = r1<br>a1.sinks = k1</p><p>a1.sources.r1.type = avro<br>a1.sources.r1.bind=node01<br>a1.sources.r1.port=55555</p><p>a1.sinks.k1.type = hdfs<br>a1.sinks.k1.hdfs.path = hdfs://shsxt/hdfsflume</p><h1 id="Define-a-memory-channel-called-c1-on-a1-1"><a href="#Define-a-memory-channel-called-c1-on-a1-1" class="headerlink" title="Define a memory channel called c1 on a1"></a>Define a memory channel called c1 on a1</h1><p>a1.channels.c1.type = memory<br>a1.channels.c1.capacity=1000<br>a1.channels.c1.transactionCapacity = 100</p><h1 id="Define-an-Avro-source-called-r1-on-a1-and-tell-it-1"><a href="#Define-an-Avro-source-called-r1-on-a1-and-tell-it-1" class="headerlink" title="Define an Avro source called r1 on a1 and tell it"></a>Define an Avro source called r1 on a1 and tell it</h1><p>a1.sources.r1.channels = c1<br>a1.sinks.k1.channel = c1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 5ã€ç»“åˆç‰ˆï¼ˆnetcat-avroï¼‰</span><br><span class="line"></span><br><span class="line">#### ï¼ˆ1ï¼‰vim netcat2_logger</span><br><span class="line"></span><br><span class="line">ï¼ˆnode00ï¼‰</span><br></pre></td></tr></table></figure></p><h1 id="example-conf-A-single-node-Flume-configuration-1"><a href="#example-conf-A-single-node-Flume-configuration-1" class="headerlink" title="example.conf: A single-node Flume configuration"></a>example.conf: A single-node Flume configuration</h1><p>#flume-ng agent â€“conf ./ â€“conf-file netcat2_logger â€“name a1 -Dflume.root.logger=INFO,console</p><p>#flume-ng â€“conf conf â€“conf-file /root/flume_test/netcat_hdfs -n a1 -Dflume.root.logger=INFO,console</p><p>#telnet 192.168.235.15 44444</p><h1 id="Name-the-components-on-this-agent-1"><a href="#Name-the-components-on-this-agent-1" class="headerlink" title="Name the components on this agent"></a>Name the components on this agent</h1><p> a1.sources = r1<br> a1.sinks = k1<br> a1.channels = c1</p><h1 id="Describe-configure-the-source-1"><a href="#Describe-configure-the-source-1" class="headerlink" title="Describe/configure the source"></a>Describe/configure the source</h1><p> a1.sources.r1.type = netcat<br> a1.sources.r1.bind = node00<br> a1.sources.r1.port = 44444</p><h1 id="Describe-the-sink-1"><a href="#Describe-the-sink-1" class="headerlink" title="Describe the sink"></a>Describe the sink</h1><p> a1.sinks.k1.type = avro<br> a1.sinks.k1.hostname = node01<br> a1.sinks.k1.port = 60000</p><h1 id="Use-a-channel-which-buffers-events-in-memory-1"><a href="#Use-a-channel-which-buffers-events-in-memory-1" class="headerlink" title="Use a channel which buffers events in memory"></a>Use a channel which buffers events in memory</h1><p> a1.channels.c1.type = memory<br> a1.channels.c1.capacity = 1000<br> a1.channels.c1.transactionCapacity = 100</p><h1 id="Bind-the-source-and-sink-to-the-channel-1"><a href="#Bind-the-source-and-sink-to-the-channel-1" class="headerlink" title="Bind the source and sink to the channel"></a>Bind the source and sink to the channel</h1><p> a1.sources.r1.channels = c1<br> a1.sinks.k1.channel = c1</p><p>#â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><p>#flume-ng agent â€“conf-file etect2_logger â€“name a1 -#Dflume.root.logger=INFO,console</p><p>#flume-ng agent â€“conf conf â€“conf-file netcat_logger â€“name a1 -#Dflume.root.logger=INFO,console<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ï¼ˆnode01ï¼‰</span><br></pre></td></tr></table></figure></p><p>#flume-ng agent â€“conf ./ â€“conf-file avro2 -n a1<br>a1.sources = r1<br>a1.sinks = k1<br>a1.channels = c1</p><p>a1.sources.r1.type = avro<br>a1.sources.r1.bind = node01<br>a1.sources.r1.port = 60000</p><p>a1.sinks.k1.type = logger</p><h1 id="Use-a-channel-which-buffers-events-in-memory-2"><a href="#Use-a-channel-which-buffers-events-in-memory-2" class="headerlink" title="Use a channel which buffers events in memory"></a>Use a channel which buffers events in memory</h1><p>a1.channels.c1.type = memory<br>a1.channels.c1.capacity = 1000<br>a1.channels.c1.transactionCapacity = 100</p><h1 id="Bind-the-source-and-sink-to-the-channel-2"><a href="#Bind-the-source-and-sink-to-the-channel-2" class="headerlink" title="Bind the source and sink to the channel"></a>Bind the source and sink to the channel</h1><p>a1.sources.r1.channels = c1<br>a1.sinks.k1.channel = c1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(2)æ“ä½œ</span><br><span class="line"></span><br><span class="line">&gt; å…ˆå¯åŠ¨åé¢çš„flumeèŠ‚ç‚¹node01  ï¼Œåœ¨å¯åŠ¨node00ï¼Œæœ€åå¯åŠ¨node02</span><br><span class="line"></span><br><span class="line">åœ¨node01ä¸Š</span><br><span class="line"></span><br><span class="line">`å¯åŠ¨`</span><br><span class="line"></span><br><span class="line">&gt; flume-ng </span><br><span class="line">&gt;</span><br><span class="line">&gt; --conf conf --conf-file avro2 -n a1 -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤º</span><br></pre></td></tr></table></figure><p>19/01/18 23:22:27 INFO node.Application: Starting Channel c1<br>19/01/18 23:22:28 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: CHANNEL, name: c1: Successfully registered new MBean.<br>19/01/18 23:22:28 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started<br>19/01/18 23:22:28 INFO node.Application: Starting Sink k1<br>19/01/18 23:22:28 INFO node.Application: Starting Source r1<br>19/01/18 23:22:28 INFO source.AvroSource: Starting Avro source r1: { bindAddress: node01, port: 60000 }â€¦<br>19/01/18 23:22:30 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SOURCE, name: r1: Successfully registered new MBean.<br>19/01/18 23:22:30 INFO instrumentation.MonitoredCounterGroup: Component type: SOURCE, name: r1 started<br>19/01/18 23:22:30 INFO source.AvroSource: Avro source r1 started.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åœ¨node00ä¸Š</span><br><span class="line"></span><br><span class="line">`å¯åŠ¨`</span><br><span class="line"></span><br><span class="line">&gt; flume-ng agent</span><br><span class="line">&gt;</span><br><span class="line">&gt; --conf ./ --conf-file netcat2_logger --name a1 -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åœ¨node02ä¸Š</span><br><span class="line"></span><br><span class="line">`å¯åŠ¨`</span><br><span class="line"></span><br><span class="line">&gt; telnet node00 44444</span><br><span class="line"></span><br><span class="line">ç„¶åè¾“å…¥æ•°æ®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æœ€ååœ¨</span><br><span class="line"></span><br><span class="line">node01èŠ‚ç‚¹ä¸Š</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯</span><br></pre></td></tr></table></figure><p>19/01/18 23:33:01 INFO sink.LoggerSink: Event: { headers:{} body: 68 65 6C 6C 6F 20 77 6F 72 6C 64 0D             hello world. }</p><p><code>`</code></p><p>flume-ng agent  â€“conf-file flumeproject â€“name a1 -Dflume.root.logger=INFO,console</p>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flume </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HBaseæ€§èƒ½ä¼˜åŒ–</title>
      <link href="/2019/01/17/HBase%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2019/01/17/HBase%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="HBaseæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#HBaseæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="HBaseæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ"></a>HBaseæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</h2><h1 id="ï¼ˆä¸€ï¼‰ã€è¡¨çš„è®¾è®¡"><a href="#ï¼ˆä¸€ï¼‰ã€è¡¨çš„è®¾è®¡" class="headerlink" title="ï¼ˆä¸€ï¼‰ã€è¡¨çš„è®¾è®¡"></a>ï¼ˆä¸€ï¼‰ã€è¡¨çš„è®¾è®¡</h1><p>ä¸€ã€Pre-Creating Regions é¢„åˆ†åŒº</p><a id="more"></a><blockquote><p>è§£å†³æµ·é‡å¯¼å…¥æ•°æ®æ—¶çš„çƒ­ç‚¹é—®é¢˜</p></blockquote><p><code>èƒŒæ™¯ï¼š</code></p><blockquote><p>åœ¨åˆ›å»ºHBaseè¡¨çš„æ—¶å€™é»˜è®¤ä¸€å¼ è¡¨åªæœ‰ä¸€ä¸ªregionï¼Œ</p><p>æ‰€æœ‰çš„putæ“ä½œéƒ½ä¼šå¾€è¿™ä¸€ä¸ªregionä¸­å¡«å……æ•°æ®ï¼Œ</p><p>å½“è¿™ä¸€ä¸ªregionè¿‡å¤§æ—¶å°±ä¼šè¿›è¡Œsplitã€‚</p><p>å¦‚æœåœ¨åˆ›å»ºHBaseçš„æ—¶å€™å°±è¿›è¡Œé¢„åˆ†åŒº</p><p>åˆ™ä¼šå‡å°‘å½“æ•°æ®é‡çŒ›å¢æ—¶ç”±äºregion splitå¸¦æ¥çš„èµ„æºæ¶ˆè€—ã€‚</p></blockquote><p><code>æ³¨æ„ï¼š</code></p><blockquote><p>æ¯ä¸ªregionéƒ½æœ‰ä¸€ä¸ªstartKeyå’Œä¸€ä¸ªendKeyæ¥è¡¨ç¤ºè¯¥regionå­˜å‚¨çš„rowKeyèŒƒå›´ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; create &apos;t1&apos;, &apos;cf&apos;, SPLITS =&gt; [&apos;20150501000000000&apos;, &apos;20150515000000000&apos;, &apos;20150601000000000&apos;]</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; create &apos;t2&apos;, &apos;cf&apos;, SPLITS_FILE =&gt; &apos;/home/hadoop/splitfile.txt&apos; </span><br><span class="line"></span><br><span class="line">/home/hadoop/splitfile.txtä¸­å­˜å‚¨å†…å®¹å¦‚ä¸‹ï¼š </span><br><span class="line">20150501000000000</span><br><span class="line">20150515000000000</span><br><span class="line">20150601000000000</span><br></pre></td></tr></table></figure><p>äºŒã€row key</p><p>HBaseä¸­row keyç”¨æ¥æ£€ç´¢è¡¨ä¸­çš„è®°å½•ï¼Œæ”¯æŒä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><blockquote><p>Â· é€šè¿‡å•ä¸ªrow keyè®¿é—®ï¼šå³æŒ‰ç…§æŸä¸ªrow keyé”®å€¼è¿›è¡Œgetæ“ä½œï¼›</p><p>Â·  é€šè¿‡row keyçš„rangeè¿›è¡Œscanï¼šå³é€šè¿‡è®¾ç½®startRowKeyå’ŒendRowKeyï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†…è¿›è¡Œæ‰«æï¼›è¿‡æ»¤å™¨</p><p>Â·  å…¨è¡¨æ‰«æï¼šå³ç›´æ¥æ‰«ææ•´å¼ è¡¨ä¸­æ‰€æœ‰è¡Œè®°å½•ã€‚</p></blockquote><h1 id="ï¼ˆäºŒï¼‰ã€å†™è¡¨æ“ä½œ"><a href="#ï¼ˆäºŒï¼‰ã€å†™è¡¨æ“ä½œ" class="headerlink" title="ï¼ˆäºŒï¼‰ã€å†™è¡¨æ“ä½œ"></a>ï¼ˆäºŒï¼‰ã€å†™è¡¨æ“ä½œ</h1><p>ä¸€ã€å¤šHTableå®¢æˆ·ç«¯å¹¶å‘å†™</p><p>äºŒã€HTableå‚æ•°è®¾ç½®</p><p>ä¸‰ã€æ‰¹é‡å†™</p><p>å››ã€å¤šçº¿ç¨‹å¹¶å‘å†™</p><h1 id="ï¼ˆä¸‰ï¼‰ã€è¯»è¡¨æ“ä½œ"><a href="#ï¼ˆä¸‰ï¼‰ã€è¯»è¡¨æ“ä½œ" class="headerlink" title="ï¼ˆä¸‰ï¼‰ã€è¯»è¡¨æ“ä½œ"></a>ï¼ˆä¸‰ï¼‰ã€è¯»è¡¨æ“ä½œ</h1><p>ä¸€ã€å¤šHTableå®¢æˆ·ç«¯å¹¶å‘è¯»</p><p>äºŒã€HTableå‚æ•°è®¾ç½®</p><p>ä¸‰ã€æ‰¹é‡è¯»</p><p>å››ã€å¤šçº¿ç¨‹å¹¶å‘è¯»</p><p>äº”ã€ç¼“å­˜æŸ¥è¯¢ç»“æœ</p><p>å…­ã€ Blockcache</p>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HBaseå­¦ä¹ </title>
      <link href="/2019/01/15/HBase%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/15/HBase%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>éå…³ç³»å‹æ•°æ®åº“</p><p><a href="https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration" target="_blank" rel="noopener">å®˜ç½‘</a></p><h2 id="ä¸€ã€å¯¹æ•°æ®åº“çš„-åŸºæœ¬äº†è§£"><a href="#ä¸€ã€å¯¹æ•°æ®åº“çš„-åŸºæœ¬äº†è§£" class="headerlink" title="ä¸€ã€å¯¹æ•°æ®åº“çš„ åŸºæœ¬äº†è§£"></a>ä¸€ã€å¯¹æ•°æ®åº“çš„ åŸºæœ¬äº†è§£</h2><a id="more"></a><h3 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h3><blockquote><p>åŸºäºHadoop çš„åˆ†å¸ƒå¼æ•°æ®åº“</p><p>ç‰¹ç‚¹ï¼š</p><p>1ã€é«˜å¯é æ€§</p><p>2ã€é«˜æ€§èƒ½</p><p>ï¼ˆä»¥ä¸Šä¸¤ç‚¹ï¼šåŸºäºåˆ†å¸ƒå¼çš„ç‰¹ç‚¹ï¼‰</p><p>3ã€é¢å‘åˆ—</p><p>ï¼ˆä»¥ï¼ˆK,Vï¼‰å­˜å‚¨ï¼Œæœ‰å”¯ä¸€æ ‡è®°çš„rowkeyï¼ŒvalueåŒ…å«æ˜¯æ•°æ®åº“ä¸­çš„åˆ—å€¼ï¼‰</p><p>4ã€å¯ä¼¸ç¼©</p><p>ï¼ˆæ­å»ºåœ¨é›†ç¾¤ä¸Šï¼‰</p><p>5ã€å®æ—¶è¯»å†™</p><p>ï¼ˆç”¨æ—¶é—´æˆ³å”¯ä¸€æ ‡è®°æ¯ä¸€ç‰ˆæœ¬çš„æ•°æ®è®°å½•ï¼‰</p></blockquote><h3 id="2ã€å·¥ä½œç»“æ„"><a href="#2ã€å·¥ä½œç»“æ„" class="headerlink" title="2ã€å·¥ä½œç»“æ„"></a>2ã€å·¥ä½œç»“æ„</h3><blockquote><p>1ã€åˆ©ç”¨Hadoopçš„HDFSä½œä¸ºå…¶æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿ</p><p>2,åˆ©ç”¨Hadoopçš„MapReduceæ¥å¤„ç†HBaseä¸­çš„æµ·é‡æ•°æ®</p><p>3,åˆ©ç”¨Zookeeperä½œä¸ºå…¶åˆ†å¸ƒå¼ååŒæœåŠ¡</p><p>4,ä¸»è¦ç”¨æ¥å­˜å‚¨éç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–çš„æ¾æ•£æ•°æ®ï¼ˆNoSQLéå…³ç³»å‹æ•°æ®åº“æœ‰redisã€MongoDBç­‰</p></blockquote><h3 id="3ã€å…³ç³»å‹æ•°æ®åº“"><a href="#3ã€å…³ç³»å‹æ•°æ®åº“" class="headerlink" title="3ã€å…³ç³»å‹æ•°æ®åº“"></a>3ã€å…³ç³»å‹æ•°æ®åº“</h3><blockquote><p>1ã€å®šä¹‰</p><p>å…³ç³»æ¨¡å‹æŒ‡çš„å°±æ˜¯äºŒç»´è¡¨æ ¼æ¨¡å‹ï¼›</p><p>è€Œä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“å°±æ˜¯ç”±äºŒç»´è¡¨åŠå…¶ä¹‹é—´çš„è”ç³»æ‰€ç»„æˆçš„ä¸€ä¸ªæ•°æ®ç»„ç»‡</p><p>2ã€ä¸‰å¤§ä¼˜ç‚¹</p><ul><li>å®¹æ˜“ç†è§£</li><li>ä½¿ç”¨æ–¹ä¾¿</li><li>æ˜“äºç»´æŠ¤</li></ul><p>3ã€ä¸‰å¤§ç“¶é¢ˆ</p><ul><li>é«˜å¹¶å‘è¯»å†™éœ€æ±‚</li></ul><p>ç¡¬ç›˜I/Oæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç“¶é¢ˆï¼Œå¹¶ä¸”å¾ˆéš¾èƒ½åšåˆ°æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚</p><ul><li>æµ·é‡æ•°æ®çš„è¯»å†™æ€§èƒ½ä½</li></ul><p>åœ¨ä¸€å¼ åŒ…å«æµ·é‡æ•°æ®çš„è¡¨ä¸­æŸ¥è¯¢ï¼Œæ•ˆç‡æ˜¯éå¸¸ä½çš„ã€‚</p><ul><li>â€‹    æ‰©å±•æ€§å’Œå¯ç”¨æ€§å·®</li></ul><p>ä¸°å¯Œçš„å®Œæ•´æ€§ä½¿å¾—æ¨ªå‘æ‰©å±•æŠŠéš¾åº¦åŠ å¤§äº†</p></blockquote><h3 id="4ã€éå…³ç³»å‹æ•°æ®åº“"><a href="#4ã€éå…³ç³»å‹æ•°æ®åº“" class="headerlink" title="4ã€éå…³ç³»å‹æ•°æ®åº“"></a>4ã€éå…³ç³»å‹æ•°æ®åº“</h3><blockquote><p>1ã€å­˜å‚¨æ ¼å¼ï¼škey valueé”®å€¼å¯¹ï¼Œæ–‡æ¡£ï¼Œå›¾ç‰‡ç­‰ç­‰ ç»“æ„ä¸å›ºå®š<br>  2ã€å¯ä»¥å‡å°‘ä¸€äº›æ—¶é—´å’Œç©ºé—´çš„å¼€é”€ï¼Œä»…éœ€è¦æ ¹æ®idå–å‡ºç›¸åº”çš„valueå°±å¯ä»¥å®ŒæˆæŸ¥è¯¢ã€‚</p><p>3ã€ä¸€èˆ¬ä¸æ”¯æŒACIDç‰¹æ€§ï¼Œæ— éœ€ç»è¿‡SQLè§£æï¼Œè¯»å†™æ€§èƒ½é«˜</p><p> 4ã€ä¸æä¾›whereå­—æ®µæ¡ä»¶è¿‡æ»¤</p><p>5ã€éš¾ä»¥ä½“ç°è®¾è®¡çš„å®Œæ•´æ€§ï¼Œåªé€‚åˆå­˜å‚¨ä¸€äº›è¾ƒä¸ºç®€å•çš„æ•°æ®</p></blockquote><h2 id="äºŒã€å¯¹HBaseçš„åŸºæœ¬é‡Œäº†è§£"><a href="#äºŒã€å¯¹HBaseçš„åŸºæœ¬é‡Œäº†è§£" class="headerlink" title="äºŒã€å¯¹HBaseçš„åŸºæœ¬é‡Œäº†è§£"></a>äºŒã€å¯¹HBaseçš„åŸºæœ¬é‡Œäº†è§£</h2><h3 id="1ã€æ•°æ®ç»“æ„ç»„æˆ"><a href="#1ã€æ•°æ®ç»“æ„ç»„æˆ" class="headerlink" title="1ã€æ•°æ®ç»“æ„ç»„æˆ"></a>1ã€æ•°æ®ç»“æ„ç»„æˆ</h3><p>ï¼ˆ 1ï¼‰Row key  :</p><blockquote><p>å”¯ä¸€æ ‡è®°å†³å®šä¸€è¡Œæ•°æ®<br>æŒ‰ç…§å­—å…¸æ’åº<br>æœ€å¤§åªèƒ½å­˜å‚¨64KBçš„å­—èŠ‚æ•°æ®<br>è®¾è®¡éå¸¸å…³é”®</p></blockquote><p>ï¼ˆ2ï¼‰Column Familyåˆ—æ— &amp; qualifieråˆ—</p><blockquote><p><code>åˆ—æ—</code>å¿…é¡»ä½œä¸ºè¡¨æ¨¡å¼(schema)å®šä¹‰çš„ä¸€éƒ¨åˆ†é¢„å…ˆç»™å‡ºï¼Œ</p><p>è¡¨ä¸­çš„æ¯ä¸ªåˆ—éƒ½å½’å±äºæŸä¸ªåˆ—æ—ï¼›</p><p>æƒé™æ§åˆ¶ã€å­˜å‚¨ä»¥åŠè°ƒä¼˜éƒ½æ˜¯åœ¨åˆ—æ—å±‚é¢è¿›è¡Œçš„ï¼›</p><p><code>åˆ—å</code>ä»¥åˆ—æ—ä½œä¸ºå‰ç¼€ï¼Œæ¯ä¸ªâ€œåˆ—æ—â€éƒ½å¯ä»¥æœ‰å¤šä¸ªåˆ—æˆå‘˜(column)ï¼› </p><p>æ–°çš„åˆ—å¯ä»¥éšåæŒ‰éœ€ã€åŠ¨æ€åŠ å…¥ï¼›</p></blockquote><p>ï¼ˆ3ï¼‰Cellå•å…ƒæ ¼</p><blockquote><p> ç”±è¡Œå’Œåˆ—çš„åæ ‡äº¤å‰å†³å®šï¼› å•å…ƒæ ¼æ˜¯æœ‰ç‰ˆæœ¬çš„ï¼ˆæœ‰æ—¶é—´æˆ³å†³å®šï¼‰ï¼›</p><p> å•å…ƒæ ¼çš„å†…å®¹æ˜¯æœªè§£æçš„å­—èŠ‚æ•°ç»„ï¼›cellä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œå…¨éƒ¨æ˜¯å­—èŠ‚ç å½¢å¼å­˜è´®ã€‚</p><p>ç”±{rowkeyï¼Œ column( =<family> +<qualifier>)ï¼Œ version} å”¯ä¸€ç¡®å®šçš„å•å…ƒã€‚</qualifier></family></p></blockquote><p>ï¼ˆ4ï¼‰Timestampæ—¶é—´æˆ³</p><blockquote><p>åœ¨HBaseæ¯ä¸ªcellå­˜å‚¨å•å…ƒå¯¹åŒä¸€ä»½æ•°æ®æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œ</p><p>æ ¹æ®å”¯ä¸€çš„æ—¶é—´æˆ³æ¥åŒºåˆ†æ¯ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ï¼Œ</p><p>ä¸åŒç‰ˆæœ¬çš„æ•°æ®æŒ‰ç…§æ—¶é—´å€’åºæ’åºï¼Œæœ€æ–°çš„æ•°æ®ç‰ˆæœ¬æ’åœ¨æœ€å‰é¢</p><p>æ—¶é—´æˆ³çš„ç±»å‹æ˜¯64ä½æ•´å‹ã€‚<br>æ—¶é—´æˆ³å¯ä»¥ç”±HBase(åœ¨æ•°æ®å†™å…¥æ—¶è‡ªåŠ¨)èµ‹å€¼ï¼Œç²¾ç¡®åˆ°æ¯«ç§’</p><p>æ—¶é—´æˆ³ã€‚ä¹Ÿå¯ä»¥ç”±å®¢æˆ·æ˜¾å¼èµ‹å€¼ï¼Œä½†å¿…é¡»å”¯ä¸€æ€§</p></blockquote><p>ï¼ˆ5ï¼‰HLog(WAL log)</p><blockquote><ul><li><p>HLogæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„Hadoop SequenceFile</p></li><li><p>HLog Sequence Fileçš„Keyæ˜¯HLogKeyå¯¹è±¡<br> â€‹         **HLogKeyä¸­è®°å½•äº†å†™å…¥æ•°æ®çš„å½’å±ä¿¡æ¯ï¼ŒåŒ…æ‹¬tableå’Œregionåå­—ï¼Œsequence numberï¼ˆèµ·å§‹å€¼ä¸º0æˆ–æ˜¯æœ€è¿‘ä¸€æ¬¡å­˜å…¥æ–‡ä»¶ç³»ç»Ÿä¸­sequence  numberï¼‰å’Œtimestampï¼ˆå†™å…¥æ—¶é—´ï¼‰</p></li><li><p>HLog SequeceFileçš„Valueæ˜¯HBaseçš„KeyValueå¯¹è±¡ï¼Œå³å¯¹åº”HFileä¸­çš„KeyValue</p></li></ul><p>â€‹               **å­˜å‚¨hbaseè¡¨çš„æ“ä½œè®°å½•ï¼ŒKVæ•°æ®ä¿¡æ¯   </p></blockquote><p>2ã€ä½“ç³»æ¶æ„</p><p>ï¼ˆ1ï¼‰Client</p><blockquote><p>åŒ…å«è®¿é—®HBaseçš„æ¥å£å¹¶ç»´æŠ¤cacheæ¥åŠ å¿«å¯¹HBaseçš„è®¿é—®</p></blockquote><p>ï¼ˆ2ï¼‰Zookeeper</p><blockquote><ul><li><p>ä¿è¯ä»»ä½•æ—¶å€™ï¼Œé›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ªmasterï¼›</p></li><li><p>å­˜è´®æ‰€æœ‰Regionçš„å¯»å€å…¥å£ã€‚</p></li><li><p>å®æ—¶ç›‘æ§Region serverçš„ä¸Šçº¿å’Œä¸‹çº¿ä¿¡æ¯ã€‚å¹¶å®æ—¶é€šçŸ¥Master</p></li><li><p>å­˜å‚¨HBaseçš„schemaå’Œtableå…ƒæ•°æ®</p></li></ul></blockquote><p>ï¼ˆ3ï¼‰Master</p><blockquote><p>ä¸ºRegion serveråˆ†é…regionï¼›</p><ul><li><p>è´Ÿè´£Region serverçš„è´Ÿè½½å‡è¡¡ï¼›</p></li><li><p>å‘ç°å¤±æ•ˆçš„Region serverå¹¶å°†å…¶ä¸Šçš„regioné‡æ–°åˆ†é…ï¼›</p></li><li><p>ç®¡ç†ç”¨æˆ·å¯¹tableçš„å¢åˆ æ”¹æ“ä½œï¼›</p></li></ul></blockquote><p>ï¼ˆ4ï¼‰RegionServer    </p><blockquote><ul><li><p>ç»´æŠ¤regionï¼Œå¤„ç†å¯¹è¿™äº›regionçš„IOè¯·æ±‚</p></li><li><p>è´Ÿè´£åˆ‡åˆ†åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å˜å¾—è¿‡å¤§çš„region</p></li></ul></blockquote><p>ï¼ˆ5ï¼‰Region</p><blockquote><ul><li><p>ä¿å­˜ä¸€ä¸ªè¡¨é‡Œé¢æŸæ®µè¿ç»­çš„æ•°æ®ï¼Œæ¯ä¸ªè¡¨ä¸€å¼€å§‹åªæœ‰ä¸€ä¸ªregionï¼›</p></li><li><p>éšç€æ•°æ®ä¸æ–­æ’å…¥è¡¨ï¼Œregionä¸æ–­å¢å¤§ï¼Œå½“å¢å¤§åˆ°ä¸€ä¸ªé˜€å€¼çš„æ—¶å€™ï¼Œregionå°±ä¼šç­‰åˆ†ä¼šä¸¤ä¸ªæ–°çš„regionï¼ˆè£‚å˜ï¼‰</p><p>ï¼ˆHBaseè‡ªåŠ¨æŠŠè¡¨æ°´å¹³åˆ’åˆ†æˆå¤šä¸ªåŒºåŸŸ(region)ï¼‰</p></li><li><p>å½“tableä¸­çš„è¡Œä¸æ–­å¢å¤šï¼Œå°±ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„regionã€‚è¿™æ ·ä¸€å¼ å®Œæ•´çš„è¡¨è¢«ä¿å­˜åœ¨å¤šä¸ªRegionserverä¸Š</p></li></ul></blockquote><p>ï¼ˆ6ï¼‰Memstoreä¸storefile</p><blockquote><ul><li>ä¸€ä¸ªregionç”±2-3storeç»„æˆï¼Œä¸€ä¸ªstoreå¯¹åº”ä¸€ä¸ªCFï¼ˆåˆ—æ—ï¼‰</li><li>storeåŒ…æ‹¬ä½äºå†…å­˜ä¸­çš„memstoreå’Œä½äºç£ç›˜çš„storefileã€‚</li><li>å†™æ“ä½œå…ˆå†™å…¥memstoreï¼Œå½“memstoreä¸­çš„æ•°æ®è¾¾åˆ°æŸä¸ªé˜ˆå€¼ï¼Œhregionserverä¼šå¯åŠ¨flashcacheè¿›ç¨‹å†™å…¥storefileï¼Œæ¯æ¬¡å†™å…¥å½¢æˆå•ç‹¬çš„ä¸€ä¸ªstorefileï¼›</li><li>å½“storefileæ–‡ä»¶çš„æ•°é‡å¢é•¿åˆ°ä¸€å®šé˜ˆå€¼åï¼Œç³»ç»Ÿä¼šè¿›è¡Œåˆå¹¶ï¼ˆminorã€major<br>compactionï¼‰ï¼Œåœ¨åˆå¹¶è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œç‰ˆæœ¬åˆå¹¶å’Œåˆ é™¤å·¥ä½œï¼ˆmajarï¼‰ï¼Œå½¢æˆæ›´å¤§çš„storefile</li><li>å½“ä¸€ä¸ªregionæ‰€æœ‰storefileçš„å¤§å°å’Œæ•°é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼åï¼Œä¼šæŠŠå½“å‰çš„regionåˆ†å‰²ä¸ºä¸¤ä¸ªï¼Œå¹¶ç”±hmasteråˆ†é…åˆ°ç›¸åº”çš„regionserveræœåŠ¡å™¨ï¼Œå®ç°è´Ÿè½½å‡è¡¡</li><li>å®¢æˆ·ç«¯æ£€ç´¢æ•°æ®ï¼Œå…ˆåœ¨memstoreæ‰¾ï¼Œæ‰¾ä¸åˆ°å†æ‰¾storefile</li><li>HRegionæ˜¯HBaseä¸­åˆ†å¸ƒå¼å­˜å‚¨å’Œè´Ÿè½½å‡è¡¡çš„æœ€å°å•å…ƒã€‚æœ€å°å•å…ƒå°±è¡¨ç¤ºä¸åŒçš„HRegionå¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„HRegion serverä¸Šã€‚</li><li>æ¯ä¸ªStroreåˆç”±ä¸€ä¸ªmemStoreå’Œ0è‡³å¤šä¸ªStoreFileç»„æˆ,StoreFileä»¥HFileæ ¼å¼ä¿å­˜åœ¨HDFSä¸Š(HFile)ã€‚</li></ul></blockquote><h2 id="ä¸‰ã€Hbase-å®‰è£…éƒ¨ç½²"><a href="#ä¸‰ã€Hbase-å®‰è£…éƒ¨ç½²" class="headerlink" title="ä¸‰ã€Hbase å®‰è£…éƒ¨ç½²"></a>ä¸‰ã€Hbase å®‰è£…éƒ¨ç½²</h2><p>å®Œå…¨åˆ†å¸ƒå¼æ­å»º</p><p>1ã€å®‰è£…åŒ…å‡†å¤‡</p><p><a href="http://hbase.apache.org/downloads.html" target="_blank" rel="noopener">Hbase</a>ï¼ˆæœ¬æ–‡ä½¿ç”¨0.98ç‰ˆæœ¬ï¼‰</p><p>å°†tarä¸Šä¼ è‡³Linuxç³»ç»Ÿï¼Œè¿›è¡Œè§£å‹å®‰è£…</p><p>2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶hbase-env.shï¼ˆåœ¨Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­ï¼‰</p><p>ä¿®æ·»åŠ JAVA_HOMEç¯å¢ƒå˜é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># The java implementation to use.  Java 1.7+ required.</span><br><span class="line"># export JAVA_HOME=/usr/java/jdk1.6.0/</span><br><span class="line">export JAVA_HOME=/usr/soft/jdk1.8.0_191</span><br></pre></td></tr></table></figure><p>ä¸ä½¿ç”¨HBaseçš„é»˜è®¤zookeeperé…ç½®ï¼Œï¼ˆä½¿ç”¨è‡ªå·±çš„ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Tell HBase whether it should manage it&apos;s own instance of Zookeeper or not.</span><br><span class="line"> export HBASE_MANAGES_ZK=false</span><br></pre></td></tr></table></figure><p>3ã€ä¿®æ”¹é…ç½®hbase-site.xmlï¼ˆåœ¨Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--Hdfsé…ç½®æ—¶çš„é›†ç¾¤å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://Sunrise:8020/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--zookeeperçš„ä¸‰å°èŠ‚ç‚¹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node00,node01,node02<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®httpè®¿é—®çš„port---&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.master.info.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>60010<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ï¼šï¼ˆä¼šå‡ºbugçš„åœ°æ–¹ï¼‰</code>ï¼š</p><p>1ã€é—®é¢˜æè¿°ï¼š</p><blockquote><p>HBaseå¯åŠ¨æ—¶ï¼Œè­¦å‘Šï¼š<br>Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=128m; support was removed in 8.0 </p></blockquote><p>è§£å†³æ–¹æ¡ˆï¼š</p><p><code>åŸå› ï¼š</code>ç”±äºä½¿ç”¨äº†JDK8 ï¼Œéœ€è¦åœ¨HBaseçš„é…ç½®æ–‡ä»¶ä¸­hbase-env.shï¼Œæ³¨é‡Šæ‰ä¸¤è¡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Configure PermSize. Only needed in JDK7. You can safely remove it for JDK8+</span><br><span class="line">#export HBASE_MASTER_OPTS=&quot;$HBASE_MASTER_OPTS -XX:PermSize=128m -XX:MaxPermSize=128m -XX:ReservedCodeCacheSize=256m&quot;</span><br><span class="line">#export HBASE_REGIONSERVER_OPTS=&quot;$HBASE_REGIONSERVER_OPTS -XX:PermSize=128m -XX:MaxPermSize=128m -XX:ReservedCodeCacheSize=256m&quot;</span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨HBaseã€‚</p><p>2ã€é—®é¢˜æè¿°ï¼š</p><blockquote><p>é…ç½®å¥½HBaseåï¼Œå„é¡¹æœåŠ¡æ­£å¸¸ï¼Œä½†æƒ³ä»æµè§ˆå™¨é€šè¿‡ç«¯å£60010çœ‹ä¸‹èŠ‚ç‚¹æƒ…å†µï¼Œä½†æ˜¯æç¤ºæ‹’ç»è®¿é—®</p></blockquote><p><code>æ£€æµ‹ï¼š</code>åœ¨æœåŠ¡å™¨ä¸Šnetstat -natl|grep 60010 å‘ç°å¹¶æ²¡æœ‰60010ç«¯å£</p><p><code>åŸå› ï¼š</code>HBase 1.0 ä¹‹åçš„ç‰ˆæœ¬éƒ½éœ€è¦åœ¨hbase-site.xmlä¸­é…ç½®ç«¯å£ï¼Œå¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.master.info.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>60010<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨HBase,åœ¨æµè§ˆå™¨å†æ¬¡è®¿é—®ï¼Œå°±okäº†</p><p>4ã€æ·»åŠ é…ç½®regionservers æ–‡ä»¶ï¼ˆåœ¨Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­ï¼‰</p><p>æ·»åŠ é…ç½®çš„regionservers çš„ä¸»æœºå</p><p>regionservers</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node00</span><br><span class="line">node01</span><br><span class="line">node02</span><br></pre></td></tr></table></figure><p>5ã€æ·»åŠ é…ç½®backup-masters</p><p>æ·»åŠ é…ç½®çš„masterå¤‡ä»½çš„ä¸»æœºåï¼ˆåœ¨Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­ï¼‰</p><p>backup-masters</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node02</span><br></pre></td></tr></table></figure><p>6ã€å°†Hadoopå®‰è£…è§£å‹ç›®å½•/etc/hadoopç›®å½•ä¸‹çš„hdfs-site.xmlæ–‡ä»¶ æ‹·è´åˆ°Hbaseçš„è§£å‹ç›®å½•çš„confç›®å½•ä¸­</p><p>7ã€é…ç½®ç¯å¢ƒå˜é‡ ~/.bash_profile</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/soft/jdk1.8.0_191</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">HADOOP_HOME=/usr/soft/hadoop-2.6.5</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span class="line">ZOOKEEPER_HOME=/usr/soft/zookeeper-3.4.13</span><br><span class="line">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br><span class="line">HIVE_HOME=/usr/soft/apache-hive-1.2.1-bin</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br><span class="line">SQOOP_HOME=/usr/soft/sqoop-1.4.6</span><br><span class="line">export PATH=$PATH:$SQOOP_HOME/bin</span><br><span class="line">HBASE_HOME=/usr/soft/hbase-1.2.9</span><br><span class="line">export PATH=$PATH:$HBASE_HOME/bin</span><br></pre></td></tr></table></figure><blockquote><p>source ~/.bash_profile</p></blockquote><p>8ã€å°†å¦‚ä¸Šé…ç½®è¿œç¨‹å‘é€è‡³å…¶ä»–èŠ‚ç‚¹ï¼ˆHbase ã€ ./bash_profileï¼‰</p><p>9ã€å„ä¸ªèŠ‚ç‚¹æ³¨æ„è¦åšæ—¶é—´åŒæ­¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntpdate cn.ntp.org.cn</span><br></pre></td></tr></table></figure><p>10ã€å¯åŠ¨HDFSé›†ç¾¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh start</span><br><span class="line">start-hdfs.sh</span><br></pre></td></tr></table></figure><p>11ã€å¯åŠ¨ï¼šstart-hbase.sh</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">starting master, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-master-node00.out</span><br><span class="line">node02: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node02.out</span><br><span class="line">node01: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node01.out</span><br><span class="line">node00: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node00.out</span><br><span class="line">node02: starting master, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-master-node02.out</span><br></pre></td></tr></table></figure><p>12ã€æŸ¥çœ‹è¿›ç¨‹ï¼šjps</p><p>13ã€æµè§ˆå™¨è®¿é—®ï¼šnode00:60010</p><p>14ã€å…³é—­ï¼šstop-hbase.sh</p><h2 id="å››ã€é€šè¿‡hbase-shellå‘½ä»¤è¿›å…¥HBase-å‘½ä»¤è¡Œæ¥å£"><a href="#å››ã€é€šè¿‡hbase-shellå‘½ä»¤è¿›å…¥HBase-å‘½ä»¤è¡Œæ¥å£" class="headerlink" title="å››ã€é€šè¿‡hbase shellå‘½ä»¤è¿›å…¥HBase å‘½ä»¤è¡Œæ¥å£"></a>å››ã€é€šè¿‡hbase shellå‘½ä»¤è¿›å…¥HBase å‘½ä»¤è¡Œæ¥å£</h2><p>é€šè¿‡<code>help</code>å¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤çš„æ”¯æŒä»¥åŠå¸®åŠ©æ‰‹å†Œ</p><blockquote><p>å¸®åŠ©åˆ›å»º</p><p>hbase(main):007:0&gt;  help create</p></blockquote><table><thead><tr><th style="text-align:center">åç§°</th><th>Shellå‘½ä»¤</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">åˆ›å»ºè¡¨</td><td>create â€˜è¡¨åâ€™, â€˜åˆ—æ—å1â€™[,â€¦]</td><td>create â€˜t1â€™ï¼Œâ€˜cf1â€™</td></tr><tr><td style="text-align:center">åˆ—å‡ºæ‰€æœ‰è¡¨</td><td>list</td><td>list</td></tr><tr><td style="text-align:center">æ·»åŠ è®°å½•</td><td>put â€˜è¡¨åâ€™, â€˜RowKeyâ€™, â€˜åˆ—æ—åç§°:åˆ—åâ€™, â€˜å€¼â€™</td><td>put        â€˜t1â€™,â€˜rk_00101â€™,â€˜cf1:nameâ€™,â€˜zsâ€™</td></tr><tr><td style="text-align:center">æŸ¥çœ‹è®°å½•</td><td>get â€˜è¡¨åâ€™, â€˜RowKeyâ€™, â€˜åˆ—æ—åç§°:åˆ—åâ€™</td><td>get â€˜t1â€™,â€˜rk_00101â€™                         get â€˜t1â€™,â€˜rk_00101â€™,â€˜cf1:nameâ€™</td></tr><tr><td style="text-align:center">æŸ¥çœ‹è¡¨ä¸­                           è®°å½•æ€»æ•°</td><td>count  â€˜è¡¨åâ€™</td><td>count â€˜t1â€™</td></tr><tr><td style="text-align:center">åˆ é™¤è®°å½•</td><td>delete  â€˜è¡¨åâ€™   , â€˜RowKeyâ€™,   â€˜åˆ—æ—åç§°:åˆ—åâ€™</td><td>delete â€˜t1â€™,â€˜rk_00101â€™,â€˜cf1:nameâ€™</td></tr><tr><td style="text-align:center">åˆ é™¤ä¸€å¼ è¡¨</td><td>å…ˆè¦å±è”½è¯¥è¡¨ï¼Œæ‰èƒ½å¯¹è¯¥è¡¨è¿›è¡Œåˆ é™¤ã€‚                                           ç¬¬ä¸€æ­¥ disable   â€˜è¡¨åç§°â€™                                                                         ç¬¬äºŒæ­¥ drop   â€˜è¡¨åç§°â€™</td><td>disable â€˜t1â€™                                                      drop â€˜t1â€™</td></tr><tr><td style="text-align:center">æŸ¥çœ‹æ‰€æœ‰              è®°å½•</td><td>scan   â€˜è¡¨å â€˜</td><td>scan â€˜t1â€™</td></tr><tr><td style="text-align:center"></td><td>create â€˜t2â€™, {NAME =&gt; â€˜cf1â€™, VERSIONS =&gt; 2}, METADATA =&gt; { â€˜mykeyâ€™ =&gt; â€˜myvalueâ€™ }</td><td></td></tr><tr><td style="text-align:center">æŸ¥çœ‹æœªåŠ å·¥çš„æ•°æ®ä¸­æŒ‡å®šç‰ˆæœ¬è®°å½•</td><td>scan â€˜t1â€™, {RAW =&gt; true, VERSIONS =&gt; 3}                           raw  æœªåŠ å·¥çš„</td><td>3</td></tr><tr><td style="text-align:center">æŸ¥çœ‹ä¿å­˜   ç‰ˆæœ¬è®°å½•</td><td>scan â€˜t1â€™, {VERSIONS =&gt; 2}</td><td>2</td></tr><tr><td style="text-align:center"></td><td></td></tr></tbody></table><h2 id="äº”ã€HBaseä¼˜åŒ–"><a href="#äº”ã€HBaseä¼˜åŒ–" class="headerlink" title="äº”ã€HBaseä¼˜åŒ–"></a>äº”ã€HBaseä¼˜åŒ–</h2><p><code>è¯¦è§HBaseæ€§èƒ½ä¼˜åŒ–æ–‡æ¡£</code></p>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hiveä¼˜åŒ–</title>
      <link href="/2019/01/14/Hive%E4%BC%98%E5%8C%96/"/>
      <url>/2019/01/14/Hive%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ ¸å¿ƒæ€æƒ³ï¼š"><a href="#ä¸€ã€æ ¸å¿ƒæ€æƒ³ï¼š" class="headerlink" title="ä¸€ã€æ ¸å¿ƒæ€æƒ³ï¼š"></a>ä¸€ã€æ ¸å¿ƒæ€æƒ³ï¼š</h2><blockquote><p>æŠŠHive SQL å½“åšMapReduceç¨‹åºè¿›è¡Œä¼˜åŒ–</p></blockquote><p><code>æ³¨æ„ï¼š</code>ä»¥ä¸‹ä¸èƒ½HQLè½¬åŒ–ä¸ºMapreduceä»»åŠ¡è¿è¡Œ</p><p>â€”select ä»…æŸ¥è¯¢æœ¬è¡¨å­—æ®µ</p><p>â€”where ä»…å¯¹æœ¬è¡¨å­—æ®µåšæ¡ä»¶è¿‡æ»¤</p><a id="more"></a><h2 id="äºŒã€explain"><a href="#äºŒã€explain" class="headerlink" title="äºŒã€explain"></a>äºŒã€explain</h2><blockquote><p>ç”¨ä»¥æ˜¾ç¤ºä»»åŠ¡æ‰§è¡Œè®¡åˆ’</p><p>æ ¼å¼ï¼š</p><p>EXPLAIN [EXTENDED|DEPENDENCY|AUTHORIZATION] query</p></blockquote><p><code>è¯­æ³•è§£é‡Š</code></p><blockquote><p>ä»è¯­æ³•ç»„æˆå¯ä»¥çœ‹å‡ºæ¥æ˜¯ä¸€ä¸ªâ€œexplain â€+ä¸‰ä¸ªå¯é€‰å‚æ•°+æŸ¥è¯¢è¯­å¥ã€‚å¤§å®¶å¯ä»¥ç§¯æå°è¯•ä¸€ä¸‹ï¼Œåé¢ä¸¤ä¸ªæ˜¾ç¤ºå†…å®¹å¾ˆç®€å•çš„ï¼Œæˆ‘ä»‹ç»ä¸€ä¸‹ç¬¬ä¸€ä¸ª extended è¿™ä¸ªå¯ä»¥æ˜¾ç¤ºhqlè¯­å¥çš„è¯­æ³•æ ‘</p><p>å…¶æ¬¡ï¼Œæ‰§è¡Œè®¡åˆ’ä¸€å…±æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>è¿™ä¸ªè¯­å¥çš„æŠ½è±¡è¯­æ³•æ ‘</li><li><p>è¿™ä¸ªè®¡åˆ’ä¸åŒé˜¶æ®µä¹‹é—´çš„ä¾èµ–å…³ç³»</p></li><li><p>å¯¹äºæ¯ä¸ªé˜¶æ®µçš„è¯¦ç»†æè¿°</p></li></ul></blockquote><p><code>ä¾‹å­ï¼š</code></p><blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; hive&gt; explain select * from log;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p><code>æ‹“å±•</code>è¯¾ä¸‹æŸ¥è¯¢MySQlçš„æ‰§è¡Œè®¡åˆ’ã€‚</p><h2 id="ä¸‰ã€Hiveè¿è¡Œæ–¹å¼"><a href="#ä¸‰ã€Hiveè¿è¡Œæ–¹å¼" class="headerlink" title="ä¸‰ã€Hiveè¿è¡Œæ–¹å¼"></a>ä¸‰ã€Hiveè¿è¡Œæ–¹å¼</h2><h3 id="é›†ç¾¤æ¨¡å¼ï¼š"><a href="#é›†ç¾¤æ¨¡å¼ï¼š" class="headerlink" title="é›†ç¾¤æ¨¡å¼ï¼š"></a>é›†ç¾¤æ¨¡å¼ï¼š</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ‰§è¡Œhqlï¼š</span><br><span class="line">hive&gt; select count(*) from log;</span><br></pre></td></tr></table></figure><p><code>ç»“è®ºï¼š</code></p><blockquote><p>å‡½æ•°ï¼ˆå¦‚countï¼‰æ˜¯åœ¨reduceé˜¶æ®µè¿›è¡Œ<br>é»˜è®¤æäº¤åˆ°yarnæ‰€åœ¨çš„èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œ</p></blockquote><hr><h3 id="ä¼˜åŒ–ä¸€"><a href="#ä¼˜åŒ–ä¸€" class="headerlink" title="ä¼˜åŒ–ä¸€:"></a>ä¼˜åŒ–ä¸€:</h3><p>è®¾ç½®  æœ¬åœ°æ¨¡å¼ï¼ˆè¿è¡Œé€Ÿåº¦åŠ å¿«ã€‚ä½†å¯¹åŠ è½½æ–‡ä»¶æœ‰é™åˆ¶ï¼‰</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;set hive.exec.mode.local.auto=true;</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹ï¼š</span><br><span class="line">hive&gt;set hive.exec.mode.local.auto</span><br></pre></td></tr></table></figure><p><code>ä½†æ˜¯</code>å¦‚æœåŠ è½½æ–‡ä»¶çš„æœ€å¤§å€¼å¤§äºé…ç½®ï¼ˆé»˜è®¤é…ç½®ä¸º100Mï¼‰ï¼Œä»ä¼šä½¿ç”¨é›†ç¾¤æ¨¡å¼è¿è¡Œï¼ˆåœ¨yarnæ‰€åœ¨çš„èŠ‚ç‚¹ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹æœ€å¤§åŠ è½½æ–‡ä»¶</span><br><span class="line">hive&gt; set hive.exec.mode.local.auto.inputbytes.max;</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºï¼š</span><br><span class="line">hive.exec.mode.local.auto.inputbytes.max=134217728</span><br></pre></td></tr></table></figure><hr><h3 id="ä¼˜åŒ–äºŒï¼š"><a href="#ä¼˜åŒ–äºŒï¼š" class="headerlink" title="ä¼˜åŒ–äºŒï¼š"></a>ä¼˜åŒ–äºŒï¼š</h3><p>è®¾ç½® ä¸¥æ ¼æ¨¡å¼</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡è®¾ç½®ä»¥ä¸‹å‚æ•°å¼€å¯ä¸¥æ ¼æ¨¡å¼[é˜²æ­¢è¯¯æ“ä½œ]ï¼š</span><br><span class="line">hive&gt; set hive.mapred.mode=strict;</span><br><span class="line">ï¼ˆé»˜è®¤ä¸ºï¼šnonstrictéä¸¥æ ¼æ¨¡å¼ï¼‰</span><br></pre></td></tr></table></figure><p><code>ä½†æ˜¯</code>å­˜åœ¨æŸ¥è¯¢é™åˆ¶</p><blockquote><p>1ã€å¯¹åˆ†åŒºè¡¨æŸ¥è¯¢æ—¶ï¼Œå¿…é¡»æ·»åŠ whereå¯¹äºåˆ†åŒºå­—æ®µçš„æ¡ä»¶è¿‡æ»¤ï¼›</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; hive&gt; select * from day_table where dt='2019-01-13';</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>2ã€order byè¯­å¥å¿…é¡»åŒ…å«limitè¾“å‡ºé™åˆ¶ï¼›</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; hive&gt; select * from log order by id limit 1;</span><br><span class="line">&gt; è¿™é‡Œçš„1ï¼Œ è¡¨ç¤ºæ˜¾ç¤ºå‰å¤šå°‘æ¡è®°å½•ï¼Œåªèƒ½è®¾ä¸€ä¸ªæ•°å­—</span><br><span class="line">&gt; å’ŒMysqlï¼ˆå¯ä»¥ä»0 å¼€å§‹ï¼‰ä¸åŒçš„æ˜¯ï¼Œå®ƒåªèƒ½ä»1å¼€å§‹</span><br><span class="line">&gt; mysqlå¯ä»¥æœ‰ä¸¤ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºä»ç¬¬å‡ æ¡å¼€å§‹ï¼Œæ˜¾ç¤ºå‡ æ¡</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>3ã€é™åˆ¶æ‰§è¡Œç¬›å¡å°”ç§¯çš„æŸ¥è¯¢</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzhry9ni0xj30m10cjdgp.jpg" alt="imit"><span class="img-alt">imit</span></p><h2 id="å››ã€Hiveæ’åº"><a href="#å››ã€Hiveæ’åº" class="headerlink" title="å››ã€Hiveæ’åº"></a>å››ã€Hiveæ’åº</h2><h3 id="1ã€Order-By"><a href="#1ã€Order-By" class="headerlink" title="1ã€Order By"></a>1ã€Order By</h3><p>â€” å¯¹äºæŸ¥è¯¢ç»“æœåš<code>å…¨å±€</code>æ’åºï¼Œåªå…è®¸æœ‰<code>ä¸€ä¸ª</code>reduceå¤„ç†<br>ï¼ˆå½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œreduceæ•°é‡æœ‰é™ï¼Œåº”æ…ç”¨ã€‚</p><p>â€‹     ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¿…é¡»ç»“åˆlimitæ¥ä½¿ç”¨ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from log order by idï¼›</span><br></pre></td></tr></table></figure><h3 id="2ã€Sort-By"><a href="#2ã€Sort-By" class="headerlink" title="2ã€Sort By"></a>2ã€Sort By</h3><p>â€“ å¯¹äº<code>å•ä¸ª</code>reduceçš„æ•°æ®è¿›è¡Œæ’åº</p><p>â€“å±€éƒ¨ï¼ˆå•ä¸ªreduceï¼‰æœ‰åºï¼Œå…¨å±€æ— åº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥é€šè¿‡è®¾ç½®mapred.reduce.tasksçš„å€¼æ¥æ§åˆ¶reduceçš„æ•°ï¼Œç„¶åå¯¹reduceè¾“å‡ºçš„ç»“æœåšäºŒæ¬¡æ’åº</span><br></pre></td></tr></table></figure><p><code>æ¡ˆä¾‹</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">log</span> <span class="keyword">sort</span> <span class="keyword">by</span> <span class="keyword">id</span>;       (ç»“æœæ— åº)</span><br></pre></td></tr></table></figure><p><code>æ˜¾ç¤º</code></p><blockquote><p>Time taken: 147.077 seconds, Fetched: 7 row(s)</p></blockquote><h3 id="3ã€Distribute-By"><a href="#3ã€Distribute-By" class="headerlink" title="3ã€Distribute By"></a>3ã€Distribute By</h3><p>â€“ åˆ†åŒºæ’åºï¼Œç»å¸¸å’Œ Sort By ç»“åˆä½¿ç”¨ å…¨å±€æœ‰åºï¼Œå±€éƒ¨æ— åº</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">log</span> <span class="keyword">distribute</span> <span class="keyword">by</span> <span class="keyword">id</span>;     ï¼ˆç»“æœæ— åºï¼‰</span><br></pre></td></tr></table></figure><blockquote><p>Time taken: 144.708 seconds, Fetched: 7 row(s)</p></blockquote><p><code>æ³¨æ„ï¼š</code>hiveè¦æ±‚DISTRIBUTE BYè¯­å¥å‡ºç°åœ¨SORT BYè¯­å¥ä¹‹å‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Distribute Byå¯ä»¥å°†Mapé˜¶æ®µè¾“å‡ºçš„æ•°æ®æŒ‰æŒ‡å®šçš„å­—æ®µåˆ’åˆ†åˆ°ä¸åŒçš„reduceæ–‡ä»¶ä¸­ï¼Œç„¶åï¼Œsort by å¯¹reduceé˜¶æ®µçš„è¾“å‡ºæ•°æ®åšæ’åºã€‚</span><br></pre></td></tr></table></figure><p><code>æ¡ˆä¾‹:</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">log</span> <span class="keyword">distribute</span> <span class="keyword">by</span> <span class="keyword">id</span> <span class="keyword">sort</span> <span class="keyword">by</span> <span class="keyword">id</span> <span class="keyword">asc</span>;   ï¼ˆç»“æœæ— åºï¼‰</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from (select * from log distribute by id) a sort by a.id ;s</span><br></pre></td></tr></table></figure><p><code>æ”¹è‰¯</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.* <span class="keyword">from</span> (<span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">log</span> cluster <span class="keyword">by</span> <span class="keyword">id</span> ) a <span class="keyword">order</span> <span class="keyword">by</span> a.id <span class="keyword">limit</span> <span class="number">9</span> ; (ç»“æœæœ‰åº)</span><br><span class="line"></span><br><span class="line">9 åœ¨è¿™é‡Œæ˜¯è¡¨ä¸­æ•°æ®è®°å½•çš„æ€»æ¡æ•°</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºï¼š</p><blockquote><p> Time taken: 234.593 seconds, Fetched: 7 row(s)</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">log</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">id</span> <span class="keyword">limit</span> <span class="number">9</span>;    ï¼ˆç»“æœæœ‰åºï¼‰</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºï¼š</p><blockquote><p> Time taken: 102.065 seconds, Fetched: 7 row(s)</p></blockquote><h3 id="4ã€Cluster-By"><a href="#4ã€Cluster-By" class="headerlink" title="4ã€Cluster By"></a>4ã€Cluster By</h3><p>â€“ ç›¸å½“äº Sort By + Distribute By<br>ï¼ˆCluster Byä¸èƒ½é€šè¿‡ascã€descçš„æ–¹å¼æŒ‡å®šæ’åºè§„åˆ™ï¼›<br>å¯é€šè¿‡ distribute by column sort by column asc|desc çš„æ–¹å¼ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">log</span> cluster <span class="keyword">by</span> <span class="keyword">id</span>ï¼›    ï¼ˆç»“æœæ— åºï¼‰</span><br></pre></td></tr></table></figure><h2 id="äº”ã€Hive-Join-ï¼ˆé‡éš¾ç‚¹ï¼‰"><a href="#äº”ã€Hive-Join-ï¼ˆé‡éš¾ç‚¹ï¼‰" class="headerlink" title="äº”ã€Hive Join  ï¼ˆé‡éš¾ç‚¹ï¼‰"></a>äº”ã€Hive Join  ï¼ˆé‡éš¾ç‚¹ï¼‰</h2><h3 id="1ã€Join-è¿æ¥æ—¶ï¼Œå°†å°è¡¨ï¼ˆé©±åŠ¨è¡¨ï¼‰æ”¾åœ¨joinçš„å·¦è¾¹"><a href="#1ã€Join-è¿æ¥æ—¶ï¼Œå°†å°è¡¨ï¼ˆé©±åŠ¨è¡¨ï¼‰æ”¾åœ¨joinçš„å·¦è¾¹" class="headerlink" title="1ã€Join è¿æ¥æ—¶ï¼Œå°†å°è¡¨ï¼ˆé©±åŠ¨è¡¨ï¼‰æ”¾åœ¨joinçš„å·¦è¾¹"></a>1ã€Join è¿æ¥æ—¶ï¼Œå°†å°è¡¨ï¼ˆé©±åŠ¨è¡¨ï¼‰æ”¾åœ¨joinçš„å·¦è¾¹</h3><h3 id="2ã€Map-Join-ï¼š"><a href="#2ã€Map-Join-ï¼š" class="headerlink" title="2ã€Map Join ï¼š"></a>2ã€Map Join ï¼š</h3><blockquote><p>å› ä¸ºMap Join æ˜¯åœ¨Mapç«¯ä¸”åœ¨å†…å­˜ä¸­è¿›è¡Œçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦å¯åŠ¨Reduceä»»åŠ¡ï¼Œä¹Ÿæ²¡æœ‰shuffleé˜¶æ®µï¼Œä»è€Œåœ¨ä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çœèµ„æºï¼Œæé«˜Joinæ•ˆç‡ã€‚</p></blockquote><h3 id="æ–¹å¼ï¼šï¼ˆä¸¤ç§ï¼‰"><a href="#æ–¹å¼ï¼šï¼ˆä¸¤ç§ï¼‰" class="headerlink" title="æ–¹å¼ï¼šï¼ˆä¸¤ç§ï¼‰"></a>æ–¹å¼ï¼šï¼ˆä¸¤ç§ï¼‰</h3><h4 id="1ã€SQLæ–¹å¼ï¼š"><a href="#1ã€SQLæ–¹å¼ï¼š" class="headerlink" title="1ã€SQLæ–¹å¼ï¼š"></a>1ã€SQLæ–¹å¼ï¼š</h4><p>â€‹     åœ¨HQlè¯­å¥ä¸­æ·»åŠ MapJoinæ ‡è®°ï¼ˆmapjoinï¼‰(å°†å°è¡¨åŠ å…¥åˆ°å†…å­˜ï¼Œæ³¨æ„å°è¡¨çš„å¤§å°)</p><p>â€‹     è¯­æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="comment">/*+ MAPJOIN(smallTable) */</span>  smallTable.key,  bigTable.value </span><br><span class="line"><span class="keyword">FROM</span>  smallTable  <span class="keyword">JOIN</span>  bigTable  <span class="keyword">ON</span>  smallTable.key  = bigTable.key;</span><br></pre></td></tr></table></figure><p><code>æ¡ˆä¾‹ï¼š</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="comment">/*+ MAPJOIN(log1) */</span>  log.id,log1.name </span><br><span class="line"><span class="keyword">FROM</span>  <span class="keyword">log</span>  <span class="keyword">JOIN</span>  log1  <span class="keyword">ON</span>  log.id  = log1.id;</span><br></pre></td></tr></table></figure><h4 id="2ã€è‡ªåŠ¨çš„MapJoin"><a href="#2ã€è‡ªåŠ¨çš„MapJoin" class="headerlink" title="2ã€è‡ªåŠ¨çš„MapJoin"></a>2ã€è‡ªåŠ¨çš„MapJoin</h4><p>â€‹           é€šè¿‡ä¿®æ”¹ä»¥ä¸‹é…ç½®å¯ç”¨è‡ªåŠ¨çš„mapjoinï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; set hive.auto.convert.join = true;</span><br></pre></td></tr></table></figure><p>â€‹    ï¼ˆ  è¯¥å‚æ•°ä¸ºtrueæ—¶ï¼ŒHiveè‡ªåŠ¨å¯¹å·¦è¾¹çš„è¡¨ç»Ÿè®¡æ•°æ®é‡ï¼Œå¦‚æœæ˜¯å°è¡¨å°±åŠ å…¥å†…å­˜ï¼Œå³å¯¹å°è¡¨ä½¿ç”¨Map joinï¼‰<br>å…¶ä»–ç›¸å…³é…ç½®å‚æ•°ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; set hive.mapjoin.smalltable.filesize;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ï¼šå¤§è¡¨å°è¡¨åˆ¤æ–­çš„é˜ˆå€¼25MBå·¦å³ï¼Œå¦‚æœè¡¨çš„å¤§å°å°äºè¯¥å€¼åˆ™ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œï¼Œå¯è‡ªå®šä¹‰ï¼‰</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; set hive.ignore.mapjoin.hint;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤å€¼ï¼štrueï¼›æ˜¯å¦å¿½ç•¥mapjoin hint å³mapjoinæ ‡è®°ï¼›å¦‚æœä¸ºfalseï¼Œè¿™åˆ™éœ€è¦æ·»åŠ -MapJoinæ ‡è®°ï¼Œmapjoinï¼ˆsmalltableï¼‰ï¼‰</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; set hive.auto.convert.join.noconditionaltask;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤å€¼ï¼štrueï¼›å°†æ™®é€šçš„joinè½¬åŒ–ä¸ºæ™®é€šçš„mapjoinæ—¶ï¼Œæ˜¯å¦å°†å¤šä¸ªmapjoinè½¬åŒ–ä¸ºä¸€ä¸ªmapjoinï¼‰</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; set hive.auto.convert.join.noconditionaltask.size;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ï¼š10Mï¼›å°†å¤šä¸ªmapjoinè½¬åŒ–ä¸ºä¸€ä¸ªmapjoinæ—¶ï¼Œå…¶è¡¨çš„æœ€å¤§å€¼ä¸º10Mï¼Œå¯è‡ªå®šä¹‰ï¼‰</p><h2 id="å…­ã€Map-Sideèšåˆ"><a href="#å…­ã€Map-Sideèšåˆ" class="headerlink" title="å…­ã€Map-Sideèšåˆ"></a>å…­ã€Map-Sideèšåˆ</h2><blockquote><p>ç›¸å½“äºèšåˆå‡½æ•°ï¼šcountï¼ˆï¼‰</p></blockquote><p>è®¾ç½®å‚æ•°ï¼Œå¼€å¯åœ¨Mapç«¯çš„èšåˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.map.aggr=<span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>ç›¸å…³é…ç½®å‚æ•°ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.groupby.mapaggr.checkintervalï¼›</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ä¸ºï¼š100000ï¼Œè¡¨ç¤º mapç«¯group byæ‰§è¡Œèšåˆæ—¶å¤„ç†çš„å¤šå°‘è¡Œæ•°æ®ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.map.aggr.hash.min.reductionï¼›</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ä¸ºï¼š0.5ï¼Œè¿›è¡Œèšåˆçš„æœ€å°æ¯”ä¾‹ï¼Œé¢„å…ˆå–100000æ¡æ•°æ®èšåˆ,å¦‚æœèšåˆåçš„æ¡æ•°/100000&gt;0.5ï¼Œåˆ™ä¸å†èšåˆï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.map.aggr.hash.percentmemory;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ï¼š 0.5 ï¼Œmapç«¯èšåˆä½¿ç”¨çš„å†…å­˜çš„æœ€å¤§å€¼ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.map.aggr.hash.force.flush.memory.threshold;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ä¸ºï¼š0.9ï¼Œmapç«¯åšèšåˆæ“ä½œæ˜¯hashè¡¨çš„æœ€å¤§å¯ç”¨å†…å®¹ï¼Œå¤§äºè¯¥å€¼åˆ™ä¼šè§¦å‘flush</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.groupby.skewindataï¼›</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ä¸ºï¼šfalseï¼Œæ˜¯å¦å¯¹GroupByäº§ç”Ÿçš„æ•°æ®å€¾æ–œåšä¼˜åŒ–ï¼‰</p><p><code>é™„åŠ ï¼š</code></p><blockquote><ul><li>æ•°æ®å€¾æ–œé—®é¢˜è§£å†³ï¼šå¤šç§æ–¹å¼ï¼ˆä½¿ç”¨MapJoinã€ä½¿ç”¨MapSideï¼‰</li></ul></blockquote><p><code>å‚è€ƒ</code></p><p><a href="http://www.sohu.com/a/224276626_543508" target="_blank" rel="noopener">http://www.sohu.com/a/224276626_543508</a></p><h2 id="ä¸ƒã€æ§åˆ¶Hiveä¸­Mapå’ŒReduceçš„æ•°é‡"><a href="#ä¸ƒã€æ§åˆ¶Hiveä¸­Mapå’ŒReduceçš„æ•°é‡" class="headerlink" title="ä¸ƒã€æ§åˆ¶Hiveä¸­Mapå’ŒReduceçš„æ•°é‡"></a>ä¸ƒã€æ§åˆ¶Hiveä¸­Mapå’ŒReduceçš„æ•°é‡</h2><h3 id="1ã€Mapæ•°é‡ç›¸å…³çš„å‚æ•°"><a href="#1ã€Mapæ•°é‡ç›¸å…³çš„å‚æ•°" class="headerlink" title="1ã€Mapæ•°é‡ç›¸å…³çš„å‚æ•°"></a>1ã€Mapæ•°é‡ç›¸å…³çš„å‚æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> mapred.max.split.size;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ä¸ºï¼š256Mï¼Œä¸€ä¸ªsplitçš„æœ€å¤§å€¼ï¼Œå³æ¯ä¸ªmapå¤„ç†æ–‡ä»¶çš„æœ€å¤§å€¼ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> mapred.min.split.size.per.node;</span><br></pre></td></tr></table></figure><p>(ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæœ€å°splitæ•°ï¼š1ä¸ª)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> mapred.min.split.size.per.rack;</span><br></pre></td></tr></table></figure><p>(ä¸€ä¸ªæœºæ¶ä¸Šæœ€å°splitæ•°ï¼š1ä¸ª)</p><h3 id="2ã€Reduceæ•°é‡ç›¸å…³çš„å‚æ•°"><a href="#2ã€Reduceæ•°é‡ç›¸å…³çš„å‚æ•°" class="headerlink" title="2ã€Reduceæ•°é‡ç›¸å…³çš„å‚æ•°"></a>2ã€Reduceæ•°é‡ç›¸å…³çš„å‚æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> mapred.reduce.tasks;</span><br></pre></td></tr></table></figure><p>(é»˜è®¤ä¸ºï¼š-1ï¼Œå¼ºåˆ¶æŒ‡å®šreduceä»»åŠ¡çš„æ•°é‡ã€‚-1ï¼Œæ˜¯æœªå®šä¹‰ï¼Œä¸å‘æŒ¥ä½œç”¨ã€‚å¦‚æœæŒ‡å®šäº†ï¼Œå°±ä¼šæŒ‰æŒ‡å®šçš„æ•°é‡æ‰§è¡Œ)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ä¸ºï¼š256M ï¼Œæ¯ä¸ªreduceä»»åŠ¡å¤„ç†çš„æ•°æ®é‡ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.exec.reducers.max;</span><br></pre></td></tr></table></figure><p>ï¼ˆé»˜è®¤ä¸ºï¼š1009ä¸ªï¼Œæ¯ä¸ªä»»åŠ¡æœ€å¤§çš„reduceæ•° [Mapæ•°é‡ &gt;= Reduceæ•°é‡ ]ï¼‰</p><h2 id="å…«ã€Hive-JVMé‡ç”¨"><a href="#å…«ã€Hive-JVMé‡ç”¨" class="headerlink" title="å…«ã€Hive - JVMé‡ç”¨"></a>å…«ã€Hive - JVMé‡ç”¨</h2><p><code>é€‚ç”¨åœºæ™¯ï¼š</code><br>1ã€å°æ–‡ä»¶ä¸ªæ•°è¿‡å¤š<br>2ã€taskä¸ªæ•°è¿‡å¤š</p><p><code>åŸç†ï¼š</code></p><p>hadoopé»˜è®¤é…ç½®æ˜¯ä½¿ç”¨æ´¾ç”ŸJVMæ¥æ‰§è¡Œmapå’Œreduceä»»åŠ¡çš„ï¼ŒJVMé‡ç”¨å¯ä»¥ä½¿å¾—JVMå®ä¾‹åœ¨åŒä¸€ä¸ªJOBä¸­é‡æ–°ä½¿ç”¨Næ¬¡</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> mapred.job.reuse.jvm.num.tasks;</span><br></pre></td></tr></table></figure><p>(é»˜è®¤æ˜¯1ï¼Œè¡¨ç¤ºä¸€ä¸ªJVMä¸Šæœ€å¤šå¯ä»¥é¡ºåºæ‰§è¡Œçš„taskæ•°ç›®ï¼ˆå±äºåŒä¸€ä¸ªJobï¼‰æ˜¯1ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªtaskå¯ä¸€ä¸ªJVM)</p><p><code>ç¼ºç‚¹ï¼š</code></p><p>è®¾ç½®å¼€å¯ä¹‹åï¼Œtaskæ’æ§½ä¼šä¸€ç›´å ç”¨èµ„æºï¼Œä¸è®ºæ˜¯å¦æœ‰taskè¿è¡Œï¼Œ<br>ç›´åˆ°æ‰€æœ‰çš„taskå³æ•´ä¸ªjobå…¨éƒ¨æ‰§è¡Œå®Œæˆæ—¶ï¼Œæ‰ä¼šé‡Šæ”¾æ‰€æœ‰çš„taskæ’æ§½èµ„æºï¼</p>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxå…¥é—¨å­¦ä¹ ï¼ˆä¸€ï¼‰</title>
      <link href="/2019/01/12/Nginx%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%B8%80%E5%9B%9E%E5%90%88%EF%BC%89/"/>
      <url>/2019/01/12/Nginx%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%B8%80%E5%9B%9E%E5%90%88%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><p>[^å¼€å‘è€…]: ç”±ä¿„ç½—æ–¯çš„ç¨‹åºè®¾è®¡å¸ˆIgor Sysoevæ‰€å¼€å‘</p><p>[TOC]</p><h2 id="ä¸€ã€äº§ç”ŸèƒŒæ™¯"><a href="#ä¸€ã€äº§ç”ŸèƒŒæ™¯" class="headerlink" title="ä¸€ã€äº§ç”ŸèƒŒæ™¯"></a>ä¸€ã€äº§ç”ŸèƒŒæ™¯</h2><p>1.å·¨å¤§æµé‡â€”æµ·é‡çš„å¹¶å‘è®¿é—®</p><p>2.å•å°æœåŠ¡å™¨èµ„æºå’Œèƒ½åŠ›æœ‰é™</p><p>å¼•å‘æœåŠ¡å™¨å®•æœºè€Œæ— æ³•æä¾›æœåŠ¡</p><h2 id="äºŒã€è´Ÿè½½å‡è¡¡-Load-Balance"><a href="#äºŒã€è´Ÿè½½å‡è¡¡-Load-Balance" class="headerlink" title="äºŒã€è´Ÿè½½å‡è¡¡(Load Balance)"></a>äºŒã€è´Ÿè½½å‡è¡¡(Load Balance)</h2><h3 id="1ã€é«˜å¹¶å‘"><a href="#1ã€é«˜å¹¶å‘" class="headerlink" title="1ã€é«˜å¹¶å‘"></a>1ã€é«˜å¹¶å‘</h3><p>ï¼ˆ1ï¼‰ã€é«˜ï¼ˆå¤§é‡çš„ï¼‰</p><p>ï¼ˆ2ï¼‰ã€å¹¶å‘å°±æ˜¯å¯ä»¥ä½¿ç”¨å¤šä¸ªçº¿ç¨‹æˆ–è€…å¤šä¸ªè¿›ç¨‹ï¼ŒåŒæ—¶å¤„ç†ï¼ˆå°±æ˜¯å¹¶å‘ï¼‰ä¸åŒçš„æ“ä½œ</p><p>ï¼ˆ3ï¼‰ã€ç®€è€Œè¨€ä¹‹å°±æ˜¯æ¯ç§’å†…æœ‰å¤šå°‘ä¸ªè¯·æ±‚åŒæ—¶è®¿é—®ã€‚</p><h3 id="2ã€è´Ÿè½½å‡è¡¡"><a href="#2ã€è´Ÿè½½å‡è¡¡" class="headerlink" title="2ã€è´Ÿè½½å‡è¡¡"></a>2ã€è´Ÿè½½å‡è¡¡</h3><p>ï¼ˆ1ï¼‰ã€å°†è¯·æ±‚/æ•°æ®ã€å‡åŒ€ã€‘åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šæ‰§è¡Œ</p><p>ï¼ˆ2ï¼‰ã€å…³é”®åœ¨äºã€å‡åŒ€ã€‘,ä¹Ÿæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„è®¾è®¡ä¸­å¿…é¡»è€ƒè™‘çš„å› ç´ ä¹‹ä¸€ã€‚</p><h3 id="3ã€äº’è”ç½‘åˆ†å¸ƒå¼æ¶æ„"><a href="#3ã€äº’è”ç½‘åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="3ã€äº’è”ç½‘åˆ†å¸ƒå¼æ¶æ„"></a>3ã€äº’è”ç½‘åˆ†å¸ƒå¼æ¶æ„</h3><p>å¸¸è§ï¼Œåˆ†ä¸ºå®¢æˆ·ç«¯å±‚ã€åå‘ä»£ç†nginxå±‚ã€ç«™ç‚¹å±‚ã€æœåŠ¡å±‚ã€æ•°æ®å±‚ã€‚åªéœ€è¦å®ç°â€œå°†è¯·æ±‚/æ•°æ® å‡åŒ€åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šæ‰§è¡Œâ€ï¼Œå°±èƒ½å®ç°è´Ÿè½½å‡è¡¡ã€‚</p><h2 id="ä¸‰ã€å¯¹Nginxçš„åŸºæœ¬äº†è§£"><a href="#ä¸‰ã€å¯¹Nginxçš„åŸºæœ¬äº†è§£" class="headerlink" title="ä¸‰ã€å¯¹Nginxçš„åŸºæœ¬äº†è§£"></a>ä¸‰ã€å¯¹Nginxçš„åŸºæœ¬äº†è§£</h2><h3 id="1ã€ä»€ä¹ˆæ˜¯Nginxï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯Nginxï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯Nginxï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯Nginxï¼Ÿ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸€æ¬¾è½»é‡çº§çš„Web æœåŠ¡å™¨/åå‘ä»£ç†æœåŠ¡å™¨ã€åé¢æœ‰ä»‹ç»ã€‘åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ã€‚</span><br></pre></td></tr></table></figure><p>â€‹     <code>ç‰¹ç‚¹</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*æ˜¯å æœ‰å†…å­˜å°‘ï¼ŒCPUã€å†…å­˜ç­‰èµ„æºæ¶ˆè€—å´éå¸¸ä½ï¼Œ</span><br><span class="line">*è¿è¡Œéå¸¸ç¨³å®šå¹¶å‘èƒ½åŠ›å¼ºï¼Œnginxçš„å¹¶å‘èƒ½åŠ›ç¡®å®åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°éå¸¸å¥½ã€‚</span><br></pre></td></tr></table></figure><h3 id="2ã€Nginx-VS-Apache"><a href="#2ã€Nginx-VS-Apache" class="headerlink" title="2ã€Nginx   VS   Apache"></a>2ã€Nginx   VS   Apache</h3><h1 id="ï¼ˆ1ï¼‰ã€nginxç›¸å¯¹äºapacheçš„ä¼˜ç‚¹ï¼š"><a href="#ï¼ˆ1ï¼‰ã€nginxç›¸å¯¹äºapacheçš„ä¼˜ç‚¹ï¼š" class="headerlink" title="ï¼ˆ1ï¼‰ã€nginxç›¸å¯¹äºapacheçš„ä¼˜ç‚¹ï¼š"></a>ï¼ˆ1ï¼‰ã€nginxç›¸å¯¹äºapacheçš„ä¼˜ç‚¹ï¼š</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*è½»é‡çº§ï¼ŒåŒæ ·èµ·web æœåŠ¡ï¼Œæ¯”apache å ç”¨æ›´å°‘çš„å†…å­˜åŠèµ„æºé«˜å¹¶å‘ï¼Œ</span><br><span class="line">*nginx å¤„ç†è¯·æ±‚æ˜¯å¼‚æ­¥éé˜»å¡ï¼ˆå¦‚å‰ç«¯ajaxï¼‰çš„ï¼Œè€Œapache åˆ™æ˜¯é˜»å¡å‹çš„ï¼Œ</span><br><span class="line">*åœ¨é«˜å¹¶å‘ä¸‹nginxèƒ½ä¿æŒä½èµ„æºä½æ¶ˆè€—é«˜æ€§èƒ½é«˜åº¦æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œç¼–å†™æ¨¡å—ç›¸å¯¹ç®€å•</span><br><span class="line">*Nginx é…ç½®ç®€æ´, Apache å¤æ‚</span><br></pre></td></tr></table></figure><h1 id="ï¼ˆ2ï¼‰ã€apache-ç›¸å¯¹äºnginx-çš„ä¼˜ç‚¹ï¼š"><a href="#ï¼ˆ2ï¼‰ã€apache-ç›¸å¯¹äºnginx-çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="ï¼ˆ2ï¼‰ã€apache ç›¸å¯¹äºnginx çš„ä¼˜ç‚¹ï¼š"></a>ï¼ˆ2ï¼‰ã€apache ç›¸å¯¹äºnginx çš„ä¼˜ç‚¹ï¼š</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* Rewriteé‡å†™ ï¼Œæ¯”nginx çš„rewrite å¼ºå¤§æ¨¡å—è¶…å¤šï¼Œ</span><br><span class="line">*åŸºæœ¬æƒ³åˆ°çš„éƒ½å¯ä»¥æ‰¾åˆ°å°‘bug ï¼Œnginx çš„bug ç›¸å¯¹è¾ƒå¤šã€‚ï¼ˆå‡ºèº«å¥½èµ·æ­¥é«˜ï¼‰</span><br></pre></td></tr></table></figure><h2 id="å››ã€å®‰è£…Nginx"><a href="#å››ã€å®‰è£…Nginx" class="headerlink" title="å››ã€å®‰è£…Nginx"></a>å››ã€å®‰è£…Nginx</h2><p><code>è¿™é‡Œä»¥å®‰è£…tengineä¸ºä¾‹</code></p><h3 id="1ã€å®‰è£…ä¹‹å‰å‡†å¤‡"><a href="#1ã€å®‰è£…ä¹‹å‰å‡†å¤‡" class="headerlink" title="1ã€å®‰è£…ä¹‹å‰å‡†å¤‡"></a>1ã€å®‰è£…ä¹‹å‰å‡†å¤‡</h3><p>é…ç½®ä¾èµ– gcc openssl-devel pcre-devel zlib-devel</p><p> å®‰è£…ï¼š</p><blockquote><p>yum install gcc openssl-devel pcre-devel zlib-devel -y</p></blockquote><h3 id="2ã€ä¸‹è½½"><a href="#2ã€ä¸‹è½½" class="headerlink" title="2ã€ä¸‹è½½"></a>2ã€ä¸‹è½½</h3><p>ï¼ˆç›®å‰æœ€æ–°ç‰ˆï¼‰ï¼š<a href="http://tengine.taobao.org/download.html" target="_blank" rel="noopener">tengine-2.2.3.tar</a></p><h3 id="3ã€-è§£å‹ç¼©"><a href="#3ã€-è§£å‹ç¼©" class="headerlink" title="3ã€ è§£å‹ç¼©"></a>3ã€ è§£å‹ç¼©</h3><blockquote><p>tar  -zvxf   tengine-2.2.3.tar </p></blockquote><h3 id="4ã€å®‰è£…Nginx"><a href="#4ã€å®‰è£…Nginx" class="headerlink" title="4ã€å®‰è£…Nginx"></a>4ã€å®‰è£…Nginx</h3><blockquote><p>åœ¨Nginxè§£å‹çš„ç›®å½•ä¸‹è¿è¡Œï¼š</p><p>./configure</p><p>make &amp;&amp; make install</p></blockquote><p>é»˜è®¤å®‰è£…ç›®å½•ï¼š<br>/usr/local/nginx</p><h3 id="5ã€é…ç½®Nginxä¸ºç³»ç»ŸæœåŠ¡ï¼Œä»¥æ–¹ä¾¿ç®¡ç†"><a href="#5ã€é…ç½®Nginxä¸ºç³»ç»ŸæœåŠ¡ï¼Œä»¥æ–¹ä¾¿ç®¡ç†" class="headerlink" title="5ã€é…ç½®Nginxä¸ºç³»ç»ŸæœåŠ¡ï¼Œä»¥æ–¹ä¾¿ç®¡ç†"></a>5ã€é…ç½®Nginxä¸ºç³»ç»ŸæœåŠ¡ï¼Œä»¥æ–¹ä¾¿ç®¡ç†</h3><h4 id="ï¼ˆ1ï¼‰ã€åœ¨-etc-rc-d-init-d-ç›®å½•ä¸­å»ºç«‹æ–‡æœ¬æ–‡ä»¶nginx"><a href="#ï¼ˆ1ï¼‰ã€åœ¨-etc-rc-d-init-d-ç›®å½•ä¸­å»ºç«‹æ–‡æœ¬æ–‡ä»¶nginx" class="headerlink" title="ï¼ˆ1ï¼‰ã€åœ¨/etc/rc.d/init.d/ç›®å½•ä¸­å»ºç«‹æ–‡æœ¬æ–‡ä»¶nginx"></a>ï¼ˆ1ï¼‰ã€åœ¨/etc/rc.d/init.d/ç›®å½•ä¸­å»ºç«‹æ–‡æœ¬æ–‡ä»¶nginx</h4><h4 id="ï¼ˆ2ï¼‰ã€åœ¨æ–‡ä»¶ä¸­ç²˜è´´ä¸‹é¢çš„å†…å®¹ï¼š"><a href="#ï¼ˆ2ï¼‰ã€åœ¨æ–‡ä»¶ä¸­ç²˜è´´ä¸‹é¢çš„å†…å®¹ï¼š" class="headerlink" title="ï¼ˆ2ï¼‰ã€åœ¨æ–‡ä»¶ä¸­ç²˜è´´ä¸‹é¢çš„å†…å®¹ï¼š"></a>ï¼ˆ2ï¼‰ã€åœ¨æ–‡ä»¶ä¸­ç²˜è´´ä¸‹é¢çš„å†…å®¹ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">#</span><br><span class="line"># nginx - this script starts and stops the nginx daemon</span><br><span class="line">#</span><br><span class="line"># chkconfig:   - 85 15 </span><br><span class="line"># description:  Nginx is an HTTP(S) server, HTTP(S) reverse \</span><br><span class="line">#               proxy and IMAP/POP3 proxy server</span><br><span class="line"># processname: nginx</span><br><span class="line"># config:      /etc/nginx/nginx.conf</span><br><span class="line"># config:      /etc/sysconfig/nginx</span><br><span class="line"># pidfile:     /var/run/nginx.pid</span><br><span class="line"> </span><br><span class="line"># Source function library.</span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"> </span><br><span class="line"># Source networking configuration.</span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"> </span><br><span class="line"># Check that networking is up.</span><br><span class="line">[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0</span><br><span class="line"> </span><br><span class="line">nginx=&quot;/usr/local/nginx/sbin/nginx&quot;</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line"> </span><br><span class="line">NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot;</span><br><span class="line"> </span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line"> </span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line"> </span><br><span class="line">make_dirs() &#123;</span><br><span class="line">   # make required directories</span><br><span class="line">   user=`nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:&quot; | sed &apos;s/[^*]*--user=\([^ ]*\).*/\1/g&apos; -`</span><br><span class="line">   options=`$nginx -V 2&gt;&amp;1 | grep &apos;configure arguments:&apos;`</span><br><span class="line">   for opt in $options; do</span><br><span class="line">       if [ `echo $opt | grep &apos;.*-temp-path&apos;` ]; then</span><br><span class="line">           value=`echo $opt | cut -d &quot;=&quot; -f 2`</span><br><span class="line">           if [ ! -d &quot;$value&quot; ]; then</span><br><span class="line">               # echo &quot;creating&quot; $value</span><br><span class="line">               mkdir -p $value &amp;&amp; chown -R $user $value</span><br><span class="line">           fi</span><br><span class="line">       fi</span><br><span class="line">   done</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">start() &#123;</span><br><span class="line">    [ -x $nginx ] || exit 5</span><br><span class="line">    [ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">    make_dirs</span><br><span class="line">    echo -n $&quot;Starting $prog: &quot;</span><br><span class="line">    daemon $nginx -c $NGINX_CONF_FILE</span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ $retval -eq 0 ] &amp;&amp; touch $lockfile</span><br><span class="line">    return $retval</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">stop() &#123;</span><br><span class="line">    echo -n $&quot;Stopping $prog: &quot;</span><br><span class="line">    killproc $prog -QUIT</span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">    return $retval</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">restart() &#123;</span><br><span class="line">    configtest || return $?</span><br><span class="line">    stop</span><br><span class="line">    sleep 1</span><br><span class="line">    start</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">reload() &#123;</span><br><span class="line">    configtest || return $?</span><br><span class="line">    echo -n $&quot;Reloading $prog: &quot;</span><br><span class="line">    killproc $nginx -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    echo</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">force_reload() &#123;</span><br><span class="line">    restart</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">configtest() &#123;</span><br><span class="line">  $nginx -t -c $NGINX_CONF_FILE</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">rh_status() &#123;</span><br><span class="line">    status $prog</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">    rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">    start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    restart|configtest)</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">    condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">            ;;</span><br><span class="line">    *)</span><br><span class="line">        echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot;</span><br><span class="line">        exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰ã€ä¿®æ”¹nginxæ–‡ä»¶çš„æ‰§è¡Œæƒé™"><a href="#ï¼ˆ3ï¼‰ã€ä¿®æ”¹nginxæ–‡ä»¶çš„æ‰§è¡Œæƒé™" class="headerlink" title="ï¼ˆ3ï¼‰ã€ä¿®æ”¹nginxæ–‡ä»¶çš„æ‰§è¡Œæƒé™"></a>ï¼ˆ3ï¼‰ã€ä¿®æ”¹nginxæ–‡ä»¶çš„æ‰§è¡Œæƒé™</h4><blockquote><p>chmod +x nginx</p></blockquote><h4 id="ï¼ˆ4ï¼‰ã€æ·»åŠ è¯¥æ–‡ä»¶åˆ°ç³»ç»ŸæœåŠ¡ä¸­å»"><a href="#ï¼ˆ4ï¼‰ã€æ·»åŠ è¯¥æ–‡ä»¶åˆ°ç³»ç»ŸæœåŠ¡ä¸­å»" class="headerlink" title="ï¼ˆ4ï¼‰ã€æ·»åŠ è¯¥æ–‡ä»¶åˆ°ç³»ç»ŸæœåŠ¡ä¸­å»"></a>ï¼ˆ4ï¼‰ã€æ·»åŠ è¯¥æ–‡ä»¶åˆ°ç³»ç»ŸæœåŠ¡ä¸­å»</h4><blockquote><p>chkconfig â€“add nginx</p></blockquote><p>æŸ¥çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸ</p><blockquote><p>chkconfig â€“list nginx</p></blockquote><p>å¯åŠ¨ï¼Œåœæ­¢ï¼Œé‡æ–°è£…è½½</p><blockquote><p>service nginx start|stop</p></blockquote><h2 id="äº”ã€Nginxé…ç½®"><a href="#äº”ã€Nginxé…ç½®" class="headerlink" title="äº”ã€Nginxé…ç½®"></a>äº”ã€Nginxé…ç½®</h2><h3 id="1ã€æŸ¥çœ‹é…ç½®"><a href="#1ã€æŸ¥çœ‹é…ç½®" class="headerlink" title="1ã€æŸ¥çœ‹é…ç½®"></a>1ã€æŸ¥çœ‹é…ç½®</h3><blockquote><p>cd   /usr/local/nginx/conf</p><p>vim   nginx.conf</p></blockquote><h3 id="2ã€é…ç½®è§£æ"><a href="#2ã€é…ç½®è§£æ" class="headerlink" title="2ã€é…ç½®è§£æ"></a>2ã€é…ç½®è§£æ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#è¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®å’ŒCPUä¸ªæ•°ä¸€æ ·æˆ–2å€</span><br><span class="line">worker_processes  2;</span><br><span class="line"></span><br><span class="line">#æ—¥å¿—çº§åˆ«</span><br><span class="line">error_log  logs/error.log  warning;(é»˜è®¤errorçº§åˆ«)</span><br><span class="line"></span><br><span class="line"># nginx å¯åŠ¨åçš„pid å­˜æ”¾ä½ç½®</span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">#é…ç½®æ¯ä¸ªè¿›ç¨‹çš„è¿æ¥æ•°ï¼Œæ€»çš„è¿æ¥æ•°= worker_processes * worker_connections</span><br><span class="line">    #é»˜è®¤1024</span><br><span class="line">    worker_connections  10240;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">#è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’</span><br><span class="line">keepalive_timeout  65;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost                 </span><br><span class="line">        #é»˜è®¤è¯·æ±‚</span><br><span class="line">Â Â location / &#123;</span><br><span class="line">Â Â Â Â Â rootÂ  html;Â Â  #å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½®</span><br><span class="line">Â Â Â Â Â index  index.php index.html index.htm;Â  #å®šä¹‰é¦–é¡µç´¢å¼•æ–‡ä»¶çš„åç§°</span><br><span class="line">        &#125;</span><br><span class="line">    #å®šä¹‰é”™è¯¯æç¤ºé¡µé¢</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€è´Ÿè½½å‡è¡¡é…ç½®"><a href="#3ã€è´Ÿè½½å‡è¡¡é…ç½®" class="headerlink" title="3ã€è´Ÿè½½å‡è¡¡é…ç½®"></a>3ã€è´Ÿè½½å‡è¡¡é…ç½®</h3><p>1ï¼‰å®‰è£…Tomcatï¼Œå‚è€ƒ <code>Tomcaté…ç½®</code></p><h4 id="2ï¼‰å¤šè´Ÿè½½å‡æ‰§è¡Œä¸€ä¸‹æ“ä½œï¼š"><a href="#2ï¼‰å¤šè´Ÿè½½å‡æ‰§è¡Œä¸€ä¸‹æ“ä½œï¼š" class="headerlink" title="2ï¼‰å¤šè´Ÿè½½å‡æ‰§è¡Œä¸€ä¸‹æ“ä½œï¼š"></a>2ï¼‰å¤šè´Ÿè½½å‡æ‰§è¡Œä¸€ä¸‹æ“ä½œï¼š</h4><p> å¤šè´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œæ‰“å¼€æŒ‡å®šè™šæ‹Ÿæœºå™¨</p><blockquote><p>open  node01    </p><p>node01  ä¸ºæŒ‡å®šè™šæ‹Ÿæœºå™¨çš„åˆ«åï¼Œåœ¨hostsæ–‡ä»¶ä¸­é…ç½®çš„</p></blockquote><p>å¯åŠ¨Tomcat</p><blockquote><p>åœ¨Tomcatè§£å‹çš„ç›®å½•ä¸‹       ./startup.sh  </p></blockquote><p>æ³¨æ„ï¼š è®°å¾—å…³é—­è™šæ‹Ÿæœºå™¨çš„é˜²ç«å¢™</p><blockquote><p>service  iptables  stop</p></blockquote><p>æµè§ˆå™¨è®¿é—®</p><blockquote><p>è™šæ‹Ÿæœºå™¨IPåœ°å€ï¼š8080</p></blockquote><p>é»˜è®¤è´Ÿè½½å‡è¡¡é…ç½®</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; http &#123; </span><br><span class="line">&gt;     upstream shsxt&#123;   </span><br><span class="line">&gt;     # ä»¥ä¸‹å‡ä¸ºå®é™…æ‰§è¡ŒæœåŠ¡çš„æœåŠ¡å™¨</span><br><span class="line">&gt;     #åªæœ‰å½“hostsæ–‡ä»¶ä¸­ç»™ipåœ°å€é…ç½®äº†åˆ«åï¼Œè¿™é‡Œserveråé¢æ‰èƒ½ç”¨åˆ«åï¼Œ</span><br><span class="line">&gt;     #å¦åˆ™è·ŸIPåœ°å€</span><br><span class="line">&gt;         server node01; </span><br><span class="line">&gt;         server node02; </span><br><span class="line">&gt;         server node03; </span><br><span class="line">&gt;     &#125; </span><br><span class="line">&gt; </span><br><span class="line">&gt;     server &#123; </span><br><span class="line">&gt;     #æŒ‡å®šè®¿é—®ç«¯å£ä¸º80 ï¼Œé‚£ä¹ˆTomcatæœåŠ¡å™¨ç«¯çš„portä¹Ÿè¦æ”¹ä¸º80</span><br><span class="line">&gt;         listen 80;   </span><br><span class="line">&gt;     server_name  localhost;</span><br><span class="line">&gt;         location / &#123;</span><br><span class="line">&gt;             proxy_pass http://shsxt;    </span><br><span class="line">&gt;             # shsxt  æ˜¯æŒ‡å®šçš„ä»£ç†æœåŠ¡å™¨</span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;     &#125; </span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>æŸ¥çœ‹ä½¿ç”¨ 80ç«¯å£çš„ç¨‹åº</p><blockquote><p>netstat -anp |grep 80</p></blockquote><p>é…ç½®æ–‡ä»¶ç¼–è¾‘ç»“æŸåï¼Œå¯åŠ¨nginxæœåŠ¡</p><blockquote><p>service  nginx  start</p></blockquote><h4 id="ï¼ˆ1ï¼‰ã€è½®è¯¢è´Ÿè½½å‡è¡¡ï¼ˆé»˜è®¤ï¼‰"><a href="#ï¼ˆ1ï¼‰ã€è½®è¯¢è´Ÿè½½å‡è¡¡ï¼ˆé»˜è®¤ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰ã€è½®è¯¢è´Ÿè½½å‡è¡¡ï¼ˆé»˜è®¤ï¼‰"></a>ï¼ˆ1ï¼‰ã€è½®è¯¢è´Ÿè½½å‡è¡¡ï¼ˆé»˜è®¤ï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- å¯¹åº”ç”¨ç¨‹åºæœåŠ¡å™¨çš„è¯·æ±‚ä»¥å¾ªç¯æ–¹å¼åˆ†å‘</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰ã€åŠ æƒè´Ÿè½½å‡è¡¡"><a href="#ï¼ˆ2ï¼‰ã€åŠ æƒè´Ÿè½½å‡è¡¡" class="headerlink" title="ï¼ˆ2ï¼‰ã€åŠ æƒè´Ÿè½½å‡è¡¡"></a>ï¼ˆ2ï¼‰ã€åŠ æƒè´Ÿè½½å‡è¡¡</h4><blockquote><p>é€šè¿‡ä½¿ç”¨æœåŠ¡å™¨æƒé‡ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥å½±å“nginxè´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ</p><p>è°çš„æƒé‡è¶Šå¤§ï¼Œåˆ†å‘åˆ°çš„è¯·æ±‚å°±è¶Šå¤šã€‚</p><p>æƒé‡æ€»æ•°ï¼š10</p></blockquote><p>åœ¨nginx.confæ–‡ä»¶ä¸­ä¿®æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">upstream shsxt &#123;</span><br><span class="line">       server srv1.example.com weight=3;//åŸŸåä¸ºåœ¨/etc/hostsæ–‡ä»¶ä¸­å–çš„åˆ«å</span><br><span class="line">       server srv2.example.com;</span><br><span class="line">       server srv3.example.com;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>é…ç½®ä¿®æ”¹ä¹‹åï¼Œé‡å¯</p><blockquote><p>service  nginx  restart</p></blockquote><h4 id="ï¼ˆ3ï¼‰ã€æœ€å°‘è¿æ¥è´Ÿè½½å¹³è¡¡"><a href="#ï¼ˆ3ï¼‰ã€æœ€å°‘è¿æ¥è´Ÿè½½å¹³è¡¡" class="headerlink" title="ï¼ˆ3ï¼‰ã€æœ€å°‘è¿æ¥è´Ÿè½½å¹³è¡¡"></a>ï¼ˆ3ï¼‰ã€æœ€å°‘è¿æ¥è´Ÿè½½å¹³è¡¡</h4><blockquote><p>åœ¨è¿æ¥è´Ÿè½½æœ€å°‘çš„æƒ…å†µä¸‹ï¼Œnginxä¼šå°½é‡é¿å…å°†è¿‡å¤šçš„è¯·æ±‚åˆ†å‘ç»™ç¹å¿™çš„åº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œ</p><p>è€Œæ˜¯å°†æ–°è¯·æ±‚åˆ†å‘ç»™ä¸å¤ªç¹å¿™çš„æœåŠ¡å™¨ï¼Œé¿å…æœåŠ¡å™¨è¿‡è½½ã€‚</p></blockquote><p>åœ¨nginx.confæ–‡ä»¶ä¸­ä¿®æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">upstream shsxt &#123;</span><br><span class="line">        least_conn;</span><br><span class="line">        server srv1.example.com;</span><br><span class="line">        server srv2.example.com;</span><br><span class="line">        server srv3.example.com;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰ã€ä¼šè¯æŒä¹…æ€§â€”â€”ip-hashè´Ÿè½½å¹³è¡¡æœºåˆ¶"><a href="#ï¼ˆ4ï¼‰ã€ä¼šè¯æŒä¹…æ€§â€”â€”ip-hashè´Ÿè½½å¹³è¡¡æœºåˆ¶" class="headerlink" title="ï¼ˆ4ï¼‰ã€ä¼šè¯æŒä¹…æ€§â€”â€”ip-hashè´Ÿè½½å¹³è¡¡æœºåˆ¶"></a>ï¼ˆ4ï¼‰ã€ä¼šè¯æŒä¹…æ€§â€”â€”ip-hashè´Ÿè½½å¹³è¡¡æœºåˆ¶</h4><p><code>ç‰¹ç‚¹</code>ï¼šä¿è¯ç›¸åŒçš„å®¢æˆ·ç«¯æ€»æ˜¯å®šå‘åˆ°ç›¸åŒçš„æœåŠ¡;</p><p>(æ­¤æ–¹æ³•å¯ç¡®ä¿æ¥è‡ªåŒä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚å°†å§‹ç»ˆå®šå‘åˆ°åŒä¸€å°æœåŠ¡å™¨ï¼Œé™¤éæ­¤æœåŠ¡å™¨ä¸å¯ç”¨ã€‚)</p><p>åœ¨nginx.confæ–‡ä»¶ä¸­ä¿®æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">upstream shsxt&#123;</span><br><span class="line">    ip_hash;</span><br><span class="line">    server ï¼ˆIPåœ°å€|åˆ«åï¼‰;</span><br><span class="line">    server ï¼ˆIPåœ°å€|åˆ«åï¼‰;</span><br><span class="line">    server ï¼ˆIPåœ°å€|åˆ«åï¼‰;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-ã€Nginxçš„è®¿é—®æ§åˆ¶"><a href="#5-ã€Nginxçš„è®¿é—®æ§åˆ¶" class="headerlink" title="(5)ã€Nginxçš„è®¿é—®æ§åˆ¶"></a>(5)ã€Nginxçš„è®¿é—®æ§åˆ¶</h4><blockquote><p>Nginxè¿˜å¯ä»¥å¯¹IPçš„è®¿é—®è¿›è¡Œæ§åˆ¶ï¼Œallowä»£è¡¨å…è®¸ï¼Œdenyä»£è¡¨ç¦æ­¢.</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">deny 192.168.2.180;</span><br><span class="line">allow 192.168.78.0/24;</span><br><span class="line">allow 10.1.1.0/16;</span><br><span class="line">allow 192.168.1.0/32;</span><br><span class="line">deny all;</span><br><span class="line">proxy_pass http://shsxt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼ŒåŒ¹é…åˆ°äº†ä¾¿è·³å‡ºã€‚</span><br><span class="line">å¦‚ä¸Šçš„ä¾‹å­å…ˆç¦æ­¢äº†1ä¸ªï¼Œ</span><br><span class="line">æ¥ä¸‹æ¥å…è®¸äº†3ä¸ªç½‘æ®µï¼Œ</span><br><span class="line">å…¶ä¸­åŒ…å«äº†ä¸€ä¸ªipv6ï¼Œ</span><br><span class="line">æœ€åæœªåŒ¹é…çš„IPå…¨éƒ¨ç¦æ­¢è®¿é—®</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è´Ÿè½½å‡è¡¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å…¥é—¨å­¦ä¹ ï¼ˆä¸€ï¼‰</title>
      <link href="/2019/01/11/Linux%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE+%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0(%E7%AC%AC%E4%B8%80%E5%9B%9E%E5%90%88)/"/>
      <url>/2019/01/11/Linux%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE+%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0(%E7%AC%AC%E4%B8%80%E5%9B%9E%E5%90%88)/</url>
      
        <content type="html"><![CDATA[<h1 id="Linuxç½‘ç»œé…ç½®-å¸¸ç”¨å‘½ä»¤å­¦ä¹ "><a href="#Linuxç½‘ç»œé…ç½®-å¸¸ç”¨å‘½ä»¤å­¦ä¹ " class="headerlink" title="Linuxç½‘ç»œé…ç½®+å¸¸ç”¨å‘½ä»¤å­¦ä¹ "></a>Linuxç½‘ç»œé…ç½®+å¸¸ç”¨å‘½ä»¤å­¦ä¹ </h1><p>[TOC]</p><h2 id="ä¸€ã€-Linuxæ¦‚è¿°"><a href="#ä¸€ã€-Linuxæ¦‚è¿°" class="headerlink" title="ä¸€ã€ Linuxæ¦‚è¿°"></a>ä¸€ã€ <strong>Linux</strong>æ¦‚è¿°</h2><h3 id="1-1-ç®€ä»‹"><a href="#1-1-ç®€ä»‹" class="headerlink" title="1.1. ç®€ä»‹"></a><strong>1.</strong>1. ç®€ä»‹</h3><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB68.tmp.jpg" alt="img"><span class="img-alt">img</span>Linuxæ˜¯ä¸€ä¸ªè‡ªç”±çš„ï¼Œå…è´¹çš„ï¼Œæºç å¼€æ”¾çš„æ“ä½œç³»ç»Ÿã€‚ä¹Ÿæ˜¯å¼€æºè½¯ä»¶ä¸­æœ€è‘—åçš„ä¾‹å­ã€‚å…¶æœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯ä¸ºäº†å»ºç«‹ä¸å—ä»»ä½•å•†å“åŒ–è½¯ä»¶ç‰ˆæƒåˆ¶çº¦çš„ï¼Œå…¨ä¸–ç•Œéƒ½èƒ½ä½¿ç”¨çš„ç±»Unixå…¼å®¹äº§å“.è€Œæˆ‘ä»¬å°†æœåŠ¡å™¨éƒ¨ç½²åœ¨Linuxå°†ä¼šæ›´åŠ çš„ç¨³å®šã€å®‰å…¨ã€é«˜æ•ˆä»¥åŠå‡ºè‰²çš„æ€§èƒ½è¿™æ—¶windowsæ— æ³•æ¯”çš„ã€‚</p><h3 id="1-2-Linuxä½œè€…"><a href="#1-2-Linuxä½œè€…" class="headerlink" title="1.2.Linuxä½œè€…"></a><strong>1.2.L</strong>inuxä½œè€…</h3><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB69.tmp.png" alt="img"><span class="img-alt">img</span> </p><p>æ—çº³æ–¯Â·æœ¬çº³ç¬¬å…‹ç‰¹Â·æ‰˜ç“¦å…¹ï¼ˆLinus Benedict Torvalds, 1969å¹´~ ï¼‰ï¼Œè‘—åçš„ç”µè„‘ç¨‹åºå‘˜ã€é»‘å®¢ã€‚Linuxå†…æ ¸çš„å‘æ˜äººåŠè¯¥è®¡åˆ’çš„åˆä½œè€…ã€‚æ‰˜ç“¦å…¹åˆ©ç”¨ä¸ªäººæ—¶é—´åŠå™¨æåˆ›é€ å‡ºäº†è¿™å¥—å½“ä»Šå…¨çƒæœ€æµè¡Œçš„æ“ä½œç³»ç»Ÿï¼ˆä½œä¸šç³»ç»Ÿï¼‰å†…æ ¸ä¹‹ä¸€ã€‚ç°å—è˜äºå¼€æ”¾æºä»£ç å¼€å‘å®éªŒå®¤ï¼ˆOSDLï¼šOpen Source Development Labs, Incï¼‰ï¼Œå…¨åŠ›å¼€å‘Linuxå†…æ ¸ã€‚</p><h3 id="1-3-Linux-å‘è¡Œç‰ˆ"><a href="#1-3-Linux-å‘è¡Œç‰ˆ" class="headerlink" title="1.3.Linux å‘è¡Œç‰ˆ"></a><strong>1.3.</strong>Linux å‘è¡Œç‰ˆ</h3><p>å‘è¡Œç‰ˆæ˜¯åŸºäº Linux å†…æ ¸çš„ä¸€ä¸ªæ“ä½œç³»ç»Ÿã€‚å®ƒå¸¦æœ‰ç”¨æˆ·å¯ä»¥ä½¿ç”¨çš„è½¯ä»¶é›†åˆã€‚æ›´å¤šçš„ï¼Œå®ƒè¿˜åŒ…å«ç³»ç»Ÿç®¡ç†åŒ…ã€‚ç›®å‰æœ‰è®¸å¤š Linux å‘è¡Œç‰ˆã€‚å› ä¸ºæˆ‘ä»¬ä¸èƒ½æ•°æ¸…ç›®å‰æ‰€æœ‰çš„ Linux å‘è¡Œç‰ˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸€äº›æœ‰åçš„ç‰ˆæœ¬ï¼š Ubuntuã€Fedoraã€Opensuseã€Red hat Linux å’Œ Debian ç­‰æ˜¯å‡ ä¸ªéå¸¸å—æ¬¢è¿çš„ Linux å‘è¡Œç‰ˆã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB6A.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p><strong>C**</strong>entos**</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB6B.tmp.jpg" alt="img"><span class="img-alt">img</span> <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB6C.tmp.jpg" alt="img"><span class="img-alt">img</span></p><p><strong>U</strong>buntu</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB6D.tmp.jpg" alt="img"><span class="img-alt">img</span><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB6E.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p><strong>R</strong>ehat</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB6F.tmp.jpg" alt="img"><span class="img-alt">img</span> <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB80.tmp.jpg" alt="img"><span class="img-alt">img</span></p><h3 id="1-4-Linuxçš„ç‰¹ç‚¹"><a href="#1-4-Linuxçš„ç‰¹ç‚¹" class="headerlink" title="1.4.Linuxçš„ç‰¹ç‚¹"></a><strong>1.4.</strong>Linuxçš„ç‰¹ç‚¹</h3><p>å¼€æ”¾æ€§ï¼Œå¤šç”¨æˆ·ï¼Œå¤šä»»åŠ¡ï¼Œä¸°å¯Œçš„ç½‘ç»œåŠŸèƒ½ï¼Œå¯é çš„ç³»ç»Ÿå®‰å…¨ï¼Œè‰¯å¥½çš„å¯ç§»æ¤æ€§ï¼Œå…·æœ‰æ ‡å‡†å…¼å®¹æ€§</p><h2 id="äºŒã€ç¯å¢ƒå‡†å¤‡"><a href="#äºŒã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="äºŒã€ç¯å¢ƒå‡†å¤‡"></a><strong>äºŒã€ç¯å¢ƒ</strong>å‡†å¤‡</h2><h3 id="2-1-Vmware"><a href="#2-1-Vmware" class="headerlink" title="2.1. Vmware"></a><strong>2.1. Vmware</strong></h3><h4 id="2-1-1-Vmwareç®€ä»‹"><a href="#2-1-1-Vmwareç®€ä»‹" class="headerlink" title="2.1.1 Vmwareç®€ä»‹"></a><strong>2.1.1</strong> <strong>Vmware</strong>ç®€ä»‹</h4><p>å¤§å¤šæ•°æœåŠ¡å™¨çš„å®¹é‡ï¼ˆCPU,å†…å­˜ï¼Œç£ç›˜ç­‰ï¼‰åˆ©ç”¨ç‡ä¸è¶³ 30%ï¼Œè¿™ä¸ä»…å¯¼è‡´äº†èµ„æºæµªè´¹ï¼Œä¹ŸåŠ å¤§äº†æœåŠ¡å™¨çš„æ•°é‡ã€‚å®ç°æœåŠ¡å™¨è™šæ‹ŸåŒ–åï¼Œå¤šä¸ªæ“ä½œç³»ç»Ÿå¯ä»¥ä½œä¸ºè™šæ‹Ÿæœºåœ¨å•å°ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå¹¶ä¸”æ¯ä¸ªæ“ä½œç³»ç»Ÿéƒ½å¯ä»¥è®¿é—®åº•å±‚æœåŠ¡å™¨çš„è®¡ç®—èµ„æºï¼Œä»è€Œè§£å†³æ•ˆç‡ä½ä¸‹é—®é¢˜ã€‚</p><p>Vmwareè™šæ‹ŸæœºåŒ–æŠ€æœ¯ç”±æ­¤è¯ç”Ÿï¼Œå®ƒå¯ä»¥å°†ä¸€å°æœåŠ¡å™¨è™šæ‹ŸåŒ–å‡ºå¤šå°è™šæ‹Ÿæœºï¼Œä¾›å¤šäººåŒæ—¶ä½¿ç”¨ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€‚</p><h4 id="2-1-2-Vmware-workstationå®‰è£…"><a href="#2-1-2-Vmware-workstationå®‰è£…" class="headerlink" title="2.1.2 Vmware workstationå®‰è£…"></a><strong>2.</strong>1<strong>.</strong>2 Vmware workstation<strong>å®‰è£…</strong></h4><p>è¯¦ç»†è§vmwareå®‰è£…æ–‡æ¡£</p><h3 id="2-2-linuxå®‰è£…"><a href="#2-2-linuxå®‰è£…" class="headerlink" title="2.2. linuxå®‰è£…"></a><strong>2.</strong>2. <strong>l</strong>inuxå®‰è£…</h3><p>è¯¦ç»†è§Linuxå®‰è£…æ–‡æ¡£</p><h3 id="2-3-ç½‘ç»œé…ç½®"><a href="#2-3-ç½‘ç»œé…ç½®" class="headerlink" title="2.3.ç½‘ç»œé…ç½®"></a><strong>2.3</strong>.ç½‘ç»œé…ç½®</h3><h4 id="2-3-1-æŸ¥çœ‹ç½‘å…³"><a href="#2-3-1-æŸ¥çœ‹ç½‘å…³" class="headerlink" title="2.3.1 æŸ¥çœ‹ç½‘å…³"></a><strong>2.</strong>3.1 <strong>æŸ¥çœ‹ç½‘å…³</strong></h4><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB81.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB82.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h4 id="2-3-2-é…ç½®é™æ€IP-NATæ¨¡å¼"><a href="#2-3-2-é…ç½®é™æ€IP-NATæ¨¡å¼" class="headerlink" title="2.3.2 é…ç½®é™æ€IP(NATæ¨¡å¼)"></a><strong>2.</strong>3<strong>.2</strong> <strong>é…ç½®é™æ€IP(NATæ¨¡å¼)</strong></h4><p>1.ç¼–è¾‘é…ç½®æ–‡ä»¶,æ·»åŠ ä¿®æ”¹ä»¥ä¸‹å†…å®¹</p><p>vi /etc/sysconfig/network-scripts/ifcfg-eth0</p><p>æŒ‰i è¿›å…¥æ–‡æœ¬ç¼–è¾‘æ¨¡å¼ï¼Œå‡ºç°æ¸¸æ ‡ï¼Œå·¦ä¸‹è§’ä¼šå‡ºç°INSERT,å³å¯ä»¥ç¼–è¾‘</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB83.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>åº”åŒ…å«ä»¥ä¸‹é…ç½®ï¼Œé™¤æ­¤ä¹‹å¤–çš„å¯ä»¥åˆ é™¤æ‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0     #ç½‘å¡è®¾å¤‡å,è¯·å‹¿ä¿®æ”¹åå­—</span><br><span class="line"></span><br><span class="line">TYPE=Ethernet#ç½‘ç»œç±»å‹ï¼Œä»¥å¤ªç½‘</span><br><span class="line"></span><br><span class="line">BOOTPROTO=static   #å¯ç”¨é™æ€IPåœ°å€</span><br><span class="line"></span><br><span class="line">ONBOOT=yes  #å¼€å¯è‡ªåŠ¨å¯ç”¨ç½‘ç»œè¿æ¥</span><br><span class="line"></span><br><span class="line">IPADDR=192.168.78.100  #è®¾ç½®IPåœ°å€</span><br><span class="line"></span><br><span class="line">NETMASK=255.255.255.0  #è®¾ç½®å­ç½‘æ©ç </span><br><span class="line"></span><br><span class="line">GATEWAY=192.168.78.2   #è®¾ç½®ç½‘å…³</span><br><span class="line"></span><br><span class="line">DNS1=114.114.114.114  #è®¾ç½®å¤‡DNS</span><br></pre></td></tr></table></figure><p>æŒ‰ESCé€€å‡ºç¼–è¾‘æ¨¡å¼</p><p>:wq  #ä¿å­˜é€€å‡º</p><p>2.ä¿®æ”¹å®Œåæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><p>service network restart  #é‡å¯ç½‘ç»œè¿æ¥</p><p>ifconfig  #æŸ¥çœ‹IPåœ°å€</p><p>3.éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ:</p><p>è™šæ‹Ÿæœºèƒ½pingé€šè™šæ‹Ÿç½‘å…³</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB84.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>è™šæ‹Ÿæœºä¸ç‰©ç†æœºï¼ˆç¬”è®°æœ¬ï¼‰ç›¸äº’å¯pingé€š</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB95.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>è™šæ‹Ÿæœºä¸å…¬ç½‘ä¸Šçš„ç™¾åº¦ç½‘å€ç›¸äº’å¯pingé€šï¼ˆæ­¤æ­¥pingé€šï¼Œæ‰è¯´æ˜ç½‘ç»œé…ç½®æˆåŠŸï¼ŒCtrlé”®+Cåœæ­¢ï¼‰</p><p>å‘½ä»¤ï¼šping  <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> </p><p><strong>æ³¨æ„ï¼š</strong></p><p>a.ä¿è¯VMwareçš„è™šæ‹Ÿç½‘å¡æ²¡æœ‰è¢«ç¦ç”¨<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEBF3.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>b.ç½‘å…³IPä¸èƒ½è¢«å ç”¨</p><h3 id="2-4-XShellå®‰è£…ä¸ä½¿ç”¨"><a href="#2-4-XShellå®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="2.4.XShellå®‰è£…ä¸ä½¿ç”¨"></a><strong>2.</strong>4.XShellå®‰è£…ä¸ä½¿ç”¨</h3><h4 id="2-4-1å®‰è£…æ­¥éª¤"><a href="#2-4-1å®‰è£…æ­¥éª¤" class="headerlink" title="2.4.1å®‰è£…æ­¥éª¤"></a><strong>2.4.1å®‰è£…æ­¥éª¤</strong></h4><p>é™¤äº†å®‰è£…è·¯å¾„éœ€è¦ä¿®æ”¹ï¼Œå…¶ä»–ä¸€ç›´ä¸‹ä¸€æ­¥ã€‚</p><h4 id="2-4-2-è¿æ¥è™šæ‹Ÿæœº"><a href="#2-4-2-è¿æ¥è™šæ‹Ÿæœº" class="headerlink" title="2.4.2 è¿æ¥è™šæ‹Ÿæœº"></a><strong>2.4.2 è¿æ¥è™šæ‹Ÿæœº</strong></h4><ol><li>æ‰“å¼€xshellè½¯ä»¶æ–°å»ºä¸€ä¸ªä¼šè¯</li></ol><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEBF4.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><ol start="2"><li>å¡«å†™æ‰€è¦è¿æ¥çš„è™šæ‹ŸæœºIPï¼Œä¼šè¯åç§°å¯æ”¹å¯ä¸æ”¹ï¼Œç‚¹å‡»ç¡®å®šã€‚</li></ol><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEBF5.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>3.è¿æ¥è™šæ‹Ÿæœºã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEBF6.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>4ï¼è¾“å…¥rootç”¨æˆ·åï¼Œå¯ä»¥å‹¾é€‰â€è®°ä½ç”¨æˆ·åâ€</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEBF7.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>5.å¡«å†™å¯†ç ï¼Œå¯ä»¥å‹¾é€‰â€œè®°ä½å¯†ç â€</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC08.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>6.ç™»å½•æˆåŠŸã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC09.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="ä¸‰ã€æ–‡ä»¶ç³»ç»Ÿ"><a href="#ä¸‰ã€æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="ä¸‰ã€æ–‡ä»¶ç³»ç»Ÿ"></a><strong>ä¸‰ã€</strong>æ–‡ä»¶ç³»ç»Ÿ</h2><p>Linuxæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶æ˜¯æ•°æ®çš„é›†åˆï¼Œæ–‡ä»¶ç³»ç»Ÿä¸ä»…åŒ…å«ç€æ–‡ä»¶ä¸­çš„æ•°æ®è€Œä¸”è¿˜æœ‰æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ï¼Œæ‰€æœ‰Linux ç”¨æˆ·å’Œç¨‹åºçœ‹åˆ°çš„æ–‡ä»¶ã€ç›®å½•ã€è½¯è¿æ¥åŠæ–‡ä»¶ä¿æŠ¤ä¿¡æ¯ç­‰éƒ½å­˜å‚¨åœ¨å…¶ä¸­ã€‚</p><p>Linuxç›®å½•ç»“æ„ï¼š</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC0A.tmp.png" alt="img"><span class="img-alt">img</span> </p><p>   bin  å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶(ls,cat,mkdirç­‰)                                                           </p><p>  boot  å­˜æ”¾ç”¨äºç³»ç»Ÿå¼•å¯¼æ—¶ä½¿ç”¨çš„å„ç§æ–‡ä»¶</p><p>  dev ç”¨äºå­˜æ”¾è®¾å¤‡æ–‡ä»¶</p><p>  etc  å­˜æ”¾ç³»ç»Ÿé…ç½®æ–‡ä»¶</p><p>  home å­˜æ”¾æ‰€æœ‰ç”¨æˆ·æ–‡ä»¶çš„æ ¹ç›®å½•</p><p>  lib  å­˜æ”¾è·Ÿæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„å…±äº«åº“åŠå†…æ ¸æ¨¡å—</p><p>  mnt  ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿçš„å®‰è£…ç‚¹</p><p>  opt  é¢å¤–å®‰è£…çš„å¯é€‰åº”ç”¨ç¨‹åºåŒ…æ‰€æ”¾ç½®çš„ä½ç½®</p><p>  proc  è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå­˜æ”¾å½“å‰å†…å­˜çš„æ˜ å°„</p><p>  root  è¶…çº§ç”¨æˆ·ç›®å½•</p><p>  sbin  å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªæœ‰rootæ‰èƒ½è®¿é—®</p><p>  tmp  ç”¨äºå­˜æ”¾å„ç§ä¸´æ—¶æ–‡ä»¶</p><p>  usr  ç”¨äºå­˜æ”¾ç³»ç»Ÿåº”ç”¨ç¨‹åºï¼Œæ¯”è¾ƒé‡è¦çš„ç›®å½•/usr/local æœ¬åœ°ç®¡ç†å‘˜è½¯ä»¶å®‰è£…ç›®å½•</p><p>var  ç”¨äºå­˜æ”¾è¿è¡Œæ—¶éœ€è¦æ”¹å˜æ•°æ®çš„æ–‡ä»¶</p><h3 id="3-1ç›®å½•æ“ä½œ"><a href="#3-1ç›®å½•æ“ä½œ" class="headerlink" title="3.1ç›®å½•æ“ä½œ"></a><strong>3</strong>.1ç›®å½•æ“ä½œ</h3><h4 id="3-1-1-åˆ‡æ¢ç›®å½•"><a href="#3-1-1-åˆ‡æ¢ç›®å½•" class="headerlink" title="3.1.1**åˆ‡æ¢ç›®å½•"></a><strong>3.</strong>1<strong><strong>.</strong></strong>1<em>**</em>åˆ‡æ¢ç›®å½•</h4><p>å‘½ä»¤ï¼š<strong>cd</strong> + ç›®å½•çš„è·¯å¾„  </p><p>æŸ¥çœ‹å½“å‰ç›®å½•çš„å®Œæ•´è·¯å¾„ ï¼špwd</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC0B.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å‘½ä»¤ cd  ..   è¿”å›åˆ°çˆ¶ç›®å½•</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC0C.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h4 id="3-1-2-æ–°å»ºç›®å½•"><a href="#3-1-2-æ–°å»ºç›®å½•" class="headerlink" title="3.1.2**æ–°å»ºç›®å½•"></a><strong>3.</strong>1<strong><strong>.</strong></strong>2<em>**</em>æ–°å»ºç›®å½•</h4><p>å‘½ä»¤ï¼š<strong>m</strong>kdir+ ç›®å½•åå­— </p><p>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‹¥æœ‰çš„å­ç›®å½•å’Œæ–‡ä»¶: ls</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC0D.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h4 id="3-1-3-æ‹·è´ç›®å½•"><a href="#3-1-3-æ‹·è´ç›®å½•" class="headerlink" title="3.1.3  æ‹·è´ç›®å½•"></a><strong>3.1.</strong>3  æ‹·è´ç›®å½•</h4><p><strong>cp</strong> source dest  -r</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC1E.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h4 id="3-1-4åˆ é™¤ç›®å½•"><a href="#3-1-4åˆ é™¤ç›®å½•" class="headerlink" title="3.1.4åˆ é™¤ç›®å½•"></a><strong>3.1.4åˆ é™¤ç›®å½•</strong></h4><p><strong>rmdir</strong> directory</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC1F.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>æ³¨æ„ï¼šrmdiråªèƒ½åˆ é™¤ç©ºç›®å½•,è‹¥è¦åˆ é™¤éç©ºç›®å½•åˆ™ç”¨rmå‘½ä»¤</p><p><strong>rm</strong> -rf dir </p><h4 id="3-1-5ç§»åŠ¨-æ›´æ”¹-ç›®å½•"><a href="#3-1-5ç§»åŠ¨-æ›´æ”¹-ç›®å½•" class="headerlink" title="3.1.5ç§»åŠ¨/æ›´æ”¹ ç›®å½•"></a><strong>3.1.5ç§»åŠ¨/æ›´æ”¹ ç›®å½•</strong></h4><p>â€‹            ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•ï¼š<strong>mv</strong> + ç›®å½•/æ–‡ä»¶åå­— + å…¶ä»–è·¯å¾„</p><p>â€‹          <strong>m</strong>v  test  /     å°†testç›®å½•ç§»åŠ¨åˆ° æ ¹ç›®å½•/ ä¸‹</p><p>â€‹    <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC20.tmp.jpg" alt="img"><span class="img-alt">img</span></p><p>â€‹    æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„åå­—ï¼š<strong>m</strong>v + æ—§ç›®å½•åå­— + æ–°ç›®å½•åå­—ã€‚</p><p>â€‹    <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC21.tmp.jpg" alt="img"><span class="img-alt">img</span></p><h3 id="3-2-æ–‡ä»¶æ“ä½œ"><a href="#3-2-æ–‡ä»¶æ“ä½œ" class="headerlink" title="3.2.æ–‡ä»¶æ“ä½œ"></a><strong>3</strong>.2.æ–‡ä»¶æ“ä½œ</h3><h4 id="3-2-1æ–°å»ºæ–‡ä»¶ï¼šï¼ˆä¸€åˆ‡çš†æ–‡ä»¶ï¼‰"><a href="#3-2-1æ–°å»ºæ–‡ä»¶ï¼šï¼ˆä¸€åˆ‡çš†æ–‡ä»¶ï¼‰" class="headerlink" title="3.2.1æ–°å»ºæ–‡ä»¶ï¼šï¼ˆä¸€åˆ‡çš†æ–‡ä»¶ï¼‰"></a><strong>3</strong>.2.1æ–°å»ºæ–‡ä»¶ï¼šï¼ˆä¸€åˆ‡çš†æ–‡ä»¶ï¼‰</h4><p><strong>touch</strong> web.log   åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC22.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h4 id="3-2-2-å¤åˆ¶æ–‡"><a href="#3-2-2-å¤åˆ¶æ–‡" class="headerlink" title="3.2.2 å¤åˆ¶æ–‡"></a><strong>3.</strong>2.2 <strong>å¤åˆ¶æ–‡</strong></h4><p>â€‹     <strong>cp</strong> web.log web_cp.log</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC23.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>  å¤åˆ¶æ–‡ä»¶ï¼ŒåŠ ä¸ª-r å‚æ•°ï¼Œä»£è¡¨éå†å¤åˆ¶ï¼Œæ­¤æ—¶å¯ç”¨äºå¤åˆ¶ä¸€ä¸ªç›®å½•ã€‚</p><h4 id="3-2-3åˆ é™¤æ–‡ä»¶"><a href="#3-2-3åˆ é™¤æ–‡ä»¶" class="headerlink" title="3.2.3åˆ é™¤æ–‡ä»¶"></a><strong>3.</strong>2<strong><strong>.</strong></strong>3åˆ é™¤æ–‡ä»¶</h4><p><strong>r</strong>m web_cp.log</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC24.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>æ­¤æ—¶éœ€è¦æ‰‹åŠ¨è¾“å…¥y ï¼Œä»£è¡¨ç¡®è®¤åˆ é™¤ã€‚å¯åŠ  â€“få‚æ•°ï¼Œç›´æ¥åˆ é™¤ï¼Œæ— éœ€ç¡®è®¤ã€‚å½“éœ€è¦ä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰ä¸œè¥¿æ—¶ï¼ŒåŠ -rå‚æ•°ï¼Œä»£è¡¨éå†åˆ é™¤ã€‚</p><p><strong>rm</strong> -f web.log</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC25.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h4 id="3-2-4-æŸ¥çœ‹"><a href="#3-2-4-æŸ¥çœ‹" class="headerlink" title="3.2.4**æŸ¥çœ‹"></a><strong>3.2</strong>.4<em>**</em>æŸ¥çœ‹</h4><h5 id="3-2-4-1-æŸ¥çœ‹ç›®å½•ä¸‹çš„ä¸œè¥¿"><a href="#3-2-4-1-æŸ¥çœ‹ç›®å½•ä¸‹çš„ä¸œè¥¿" class="headerlink" title="3.2.4.1**æŸ¥çœ‹ç›®å½•ä¸‹çš„ä¸œè¥¿"></a><strong>3.</strong>2<strong><strong>.</strong></strong>4<strong><strong>.</strong></strong>1<em>**</em>æŸ¥çœ‹ç›®å½•ä¸‹çš„ä¸œè¥¿</h5><p>â€‹    ls / ll</p><p>   å‘½ä»¤ ls -l ç­‰ä»·äº ll </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC26.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>   æŸ¥çœ‹ç›®å½•ä¸‹çš„æ‰€æœ‰ä¸œè¥¿ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰ </p><p>å‘½ä»¤ï¼šls â€“al ç­‰ä»·äº  ll â€“a </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC27.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h5 id="3-2-4-2æŸ¥çœ‹æ–‡ä»¶å†…å®¹"><a href="#3-2-4-2æŸ¥çœ‹æ–‡ä»¶å†…å®¹" class="headerlink" title="3.2.4.2æŸ¥çœ‹æ–‡ä»¶å†…å®¹"></a><strong>3.</strong>2<strong><strong>.</strong></strong>4<strong><strong>.</strong></strong>2<strong><strong>æŸ¥çœ‹æ–‡ä»¶</strong></strong>å†…å®¹</h5><p><strong>cat</strong> filename: ä¸€æ¬¡æ€§æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶çš„å†…å®¹</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC37.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>æ³¨æ„ï¼šå½“æ–‡ä»¶è¾ƒå¤§æ—¶ï¼Œæ–‡æœ¬åœ¨å±å¹•ä¸Šè¿…é€Ÿé—ªè¿‡ï¼ˆæ»šå±ï¼‰ï¼Œç”¨æˆ·å¾€å¾€çœ‹ä¸æ¸…æ‰€æ˜¾ç¤ºçš„å†…å®¹ã€‚</p><p>å› æ­¤ï¼Œä¸€èˆ¬ç”¨<a href="http://www.linuxde.net/tag/more" target="_blank" rel="noopener">more</a>ç­‰å‘½ä»¤åˆ†å±æ˜¾ç¤º.</p><p><strong>more</strong> filename è¯¥å‘½ä»¤ä¸€æ¬¡æ˜¾ç¤ºä¸€å±æ–‡æœ¬ï¼Œæ»¡å±ååœä¸‹æ¥ï¼Œå¹¶ä¸”åœ¨å±å¹•çš„åº•éƒ¨å‡ºç°ä¸€ä¸ªæç¤ºä¿¡æ¯ï¼Œç»™å‡ºè‡³ä»Šå·±æ˜¾ç¤ºçš„è¯¥æ–‡ä»¶çš„ç™¾åˆ†æ¯”ã€‚</p><p>æŒ‰Spaceé”®ï¼Œæ˜¾ç¤ºæ–‡æœ¬çš„ä¸‹ä¸€å±å†…å®¹ã€‚<br>æŒ‰Enteré”®ï¼Œåªæ˜¾ç¤ºæ–‡æœ¬çš„ä¸‹ä¸€è¡Œå†…å®¹ã€‚</p><p>æŒ‰Bé”®ï¼Œæ˜¾ç¤ºä¸Šä¸€å±å†…å®¹ã€‚</p><p>æŒ‰Qé”®ï¼Œé€€å‡ºã€‚</p><p><strong>å‘½ä»¤ï¼š</strong>more  /etc/profile</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC38.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>æ˜¾ç¤ºçš„å†…å®¹ï¼š</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC39.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>â€‹        </p><p>lesså‘½ä»¤ ä¸ moreå‘½ä»¤ éå¸¸ç±»ä¼¼</p><p>less filename:</p><p>â€‹    h æ˜¾ç¤ºå¸®åŠ©ç•Œé¢ </p><p>Q é€€å‡ºless å‘½ä»¤ </p><p>u å‘åæ»šåŠ¨åŠé¡µ </p><p>d å‘å‰ç¿»åŠé¡µ </p><p>ç©ºæ ¼é”® æ»šåŠ¨ä¸€é¡µ </p><p>b å‘åç¿»ä¸€é¡µ </p><p>å›è½¦é”® æ»šåŠ¨ä¸€è¡Œ</p><p>[pagedown]ï¼š å‘ä¸‹ç¿»åŠ¨ä¸€é¡µ </p><p>[pageup]ï¼š å‘ä¸Šç¿»åŠ¨ä¸€é¡µ</p><p>ä»¥åŠä¸Šä¸‹é”®ï¼Œå‘ä¸Šä¸€è¡Œï¼Œå‘ä¸‹ä¸€è¡Œ</p><h5 id="3-2-4-3ä»å¤´æ‰“å°-æ–‡ä»¶å†…å®¹"><a href="#3-2-4-3ä»å¤´æ‰“å°-æ–‡ä»¶å†…å®¹" class="headerlink" title="3.2.4.3ä»å¤´æ‰“å°**æ–‡ä»¶å†…å®¹"></a><strong>3.</strong>2<strong><strong>.</strong></strong>4<strong><strong>.</strong></strong>3<strong><strong>ä»</strong></strong>å¤´æ‰“å°<em>**</em>æ–‡ä»¶å†…å®¹</h5><p>â€‹        <strong>head</strong>  -10 filename  æ‰“å°æ–‡ä»¶1åˆ°10è¡Œ</p><p>  <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC3A.tmp.jpg" alt="img"><span class="img-alt">img</span></p><h5 id="3-2-4-4ä»å°¾éƒ¨æ‰“å°æ–‡ä»¶å†…å®¹"><a href="#3-2-4-4ä»å°¾éƒ¨æ‰“å°æ–‡ä»¶å†…å®¹" class="headerlink" title="3.2.4.4ä»å°¾éƒ¨æ‰“å°æ–‡ä»¶å†…å®¹"></a><strong>3</strong>.<strong><strong>2</strong></strong>.<strong><strong>4</strong></strong>.<strong><strong>4</strong></strong>ä»<strong><strong>å°¾éƒ¨æ‰“å°</strong></strong>æ–‡ä»¶å†…å®¹</h5><p>  <strong>tail</strong> -10 filename æ‰“å°æ–‡ä»¶æœ€å10è¡Œ</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC3B.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>   æ³¨æ„ï¼štail è¿˜ç»å¸¸å¯ä»¥æ‹¿æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹å˜åŒ–</p><p>åŠ -få‚æ•°ï¼Œtail â€“f filename</p><h4 id="3-2-5æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•"><a href="#3-2-5æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="3.2.5æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•"></a><strong>3.2.5</strong>æŸ¥æ‰¾<strong><strong>æ–‡ä»¶</strong></strong>æˆ–ç›®å½•</h4><p>â€‹        <strong>f</strong>ind  pathname â€“name filename</p><p>â€‹      ä¾‹å­ï¼šfind / -name profile</p><p>â€‹      è¯¥å‘½ä»¤è¡¨ç¤ºä¸ºï¼Œåœ¨/ç›®å½•ä¸‹æŸ¥æ‰¾ åå­—ä¸ºprofileçš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œæœ€ååˆ—å‡ºå®ƒçš„ç»å¯¹è·¯å¾„</p><p>â€‹      <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC3C.tmp.jpg" alt="img"><span class="img-alt">img</span></p><p>â€‹      æœ€åå‘ç°ï¼Œlinuxç³»ç»Ÿæ ¹ç›®å½•/ ä¸‹ ä¸€å…±æœ‰ä¸¤ä¸ªåå­—ä¸ºprofileï¼Œ</p><p>â€‹      å…¶ä¸­/etc/profileæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œ/etc/lvm/profileä¸ºç›®å½•</p><p>è¿˜å¯ä»¥æŒ‰æ­£åˆ™è¡¨è¾¾å¼æ¥æŸ¥æ‰¾ï¼Œä¸”pathnameè¶Šç²¾ç¡®ï¼ŒæŸ¥æ‰¾çš„èŒƒå›´è¶Šå°ï¼Œé€Ÿåº¦è¶Šå¿«ã€‚</p><p>â€‹      find /etc -name pro*</p><p>  æ³¨æ„ï¼šï¼ˆå‘½ä»¤æ‰§è¡Œæ—¶ï¼Œå…¶æŸ¥æ‰¾çš„ç›®å½•å¿…é¡»æ˜¯æ‰€åœ¨ç›®å½•çš„çˆ¶çº§ç›®å½•ï¼‰</p><p>â€‹      è¯¥å‘½ä»¤è¡¨ç¤ºä¸ºï¼šåœ¨/etcç›®å½•ä¸‹æŸ¥æ‰¾ä»¥proå¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC3D.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="å››ã€æ–‡æœ¬ç¼–è¾‘"><a href="#å››ã€æ–‡æœ¬ç¼–è¾‘" class="headerlink" title="å››ã€æ–‡æœ¬ç¼–è¾‘"></a><strong>å››ã€</strong>æ–‡æœ¬ç¼–è¾‘</h2><h3 id="4-1-vi"><a href="#4-1-vi" class="headerlink" title="4.1.vi"></a><strong>4</strong>.1.vi</h3><p><strong>ç¼–è¾‘</strong>æ¨¡å¼</p><p>vi filename :æ‰“å¼€æˆ–æ–°å»ºæ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€è¡Œé¦– </p><p>vi +n filename ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬nè¡Œé¦– </p><p>vi + filename ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºæœ€åä¸€è¡Œé¦– </p><p>vi +/pattern filenameï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€ä¸ªä¸ patternåŒ¹é…çš„ä¸²å¤„ </p><p>â€¢ q!ï¼šä¸ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºvi </p><p>â€“ åœ¨VIçš„å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥â€œ:set nuâ€ï¼Œå°±æœ‰è¡Œå·äº†ã€‚ </p><p>â€“ åœ¨VIçš„å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥â€œ:set nonuâ€ï¼Œå–æ¶ˆè¡Œå·ã€‚ </p><p><strong>ä¸€èˆ¬æ¨¡å¼</strong></p><p>â€¢ yy å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œ(å¸¸ç”¨) </p><p>â€¢ nyy å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œçš„å‘ä¸‹nè¡Œï¼Œä¾‹å¦‚ï¼Œ 20yyåˆ™æ˜¯å¤åˆ¶20è¡Œ(å¸¸ç”¨) </p><blockquote><p>ï¼ˆä¸åŒï¼šåœ¨æˆ‘çš„xshellä¸­æ˜¯ yynå®ç°å¤åˆ¶æ‰€åœ¨è¡Œçš„å‘ä¸‹nè¡Œï¼‰</p></blockquote><p>â€¢ p,P   pä¸ºå¤åˆ¶çš„æ•°æ®ç²˜è´´åœ¨å…‰æ ‡ä¸‹ä¸€è¡Œï¼Œ Påˆ™ä¸ºç²˜è´´åœ¨å…‰æ ‡ä¸Šä¸€è¡Œ(å¸¸ç”¨)</p><p>G:å…‰æ ‡ç§»è‡³ç¬¬æœ€åä¸€è¡Œ</p><p>nGï¼šå…‰æ ‡ç§»åŠ¨è‡³ç¬¬Nè¡Œè¡Œé¦–</p><p>nï¼ˆshiftï¼‰+ï¼šå…‰æ ‡ä¸‹ç§»nè¡Œ </p><blockquote><p>ï¼ˆnB|nb:å…‰æ ‡å‘ä¸Šç§»åŠ¨nè¡Œï¼‰</p></blockquote><p>n-ï¼šå…‰æ ‡ä¸Šç§»nè¡Œ </p><p>H ï¼šå…‰æ ‡ç§»è‡³å±å¹•é¡¶è¡Œ </p><p>M ï¼šå…‰æ ‡ç§»è‡³å±å¹•ä¸­é—´è¡Œ </p><p>L ï¼šå…‰æ ‡ç§»è‡³å±å¹•æœ€åè¡Œ </p><p>â€¢ ddï¼šåˆ é™¤ è¡Œ </p><p>xæˆ–Xï¼šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œxåˆ é™¤å…‰æ ‡åçš„ï¼Œè€ŒXåˆ é™¤å…‰æ ‡å‰çš„ </p><p>â€¢ u æ¢å¤å‰ä¸€ä¸ªåŠ¨ä½œ(å¸¸ç”¨)</p><p>åˆ é™¤ç¬¬Nè¡Œåˆ°ç¬¬Mè¡Œï¼š</p><p>  :N,Md</p><h3 id="4-2-vim"><a href="#4-2-vim" class="headerlink" title="4.2.vim"></a><strong>4.</strong>2.vim</h3><p>Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€è¯­æ³•é«˜äº®ã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨.</p><p><strong>å®‰è£…vim è½¯ä»¶</strong></p><p><strong>yum</strong>  install  vim </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC4E.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p><strong>æŒ‰yç¡®è®¤, è¿™ä¸­é—´ä¸€å…±è¦æŒ‰ä¸¤æ¬¡ç¡®è®¤</strong></p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC4F.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å¯ä»¥åœ¨ä¹¦å†™å‘½ä»¤æ—¶å°±åŠ y,è¿™æ ·å°±ä¸ç”¨é€ä¸€ç¡®è®¤ã€‚</p><p><strong>yum</strong> install vim  -y</p><p>   ç”¨vim æ‰“å¼€/etc/profile æ–‡ä»¶ï¼Œä¼šå‘ç°ç¼–è¾‘å™¨å¯¹æ–‡æœ¬çš„å†…å®¹è¿›è¡Œäº†é«˜äº®ï¼Œä½¿æ•´ä¸ªæ–‡ä»¶çš„å†…å®¹å¯è¯»æ€§å¤§å¤§åŠ å¼º</p><p>å‘½ä»¤ï¼švim /etc/profile</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC50.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="äº”ã€æ–‡ä»¶ä¼ è¾“"><a href="#äº”ã€æ–‡ä»¶ä¼ è¾“" class="headerlink" title="äº”ã€æ–‡ä»¶ä¼ è¾“"></a><strong>äº”ã€</strong>æ–‡<strong><strong>ä»¶</strong></strong>ä¼ è¾“</h2><h3 id="5-1-è¿œç¨‹æ‹·è´"><a href="#5-1-è¿œç¨‹æ‹·è´" class="headerlink" title="5.1.è¿œç¨‹æ‹·è´"></a><strong>5.</strong>1.è¿œç¨‹æ‹·è´</h3><h4 id="5-1-1å°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨"><a href="#5-1-1å°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨" class="headerlink" title="5.1.1å°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨"></a><strong>5.1.1å°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨</strong></h4><p> <code>ä¸¾ä¾‹ï¼š</code></p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; æ–¹å¼ä¸€ï¼š</span><br><span class="line">&gt;   scp -rf /etc/profile root@192.168.198.128:/etc/</span><br><span class="line">&gt; </span><br><span class="line">&gt; æ–¹å¼äºŒ:</span><br><span class="line">&gt;   scp  -r /etc/profile root@node01 /etc/ </span><br><span class="line">&gt;   </span><br><span class="line">&gt; æ–¹å¼ä¸‰ï¼š</span><br><span class="line">&gt;   scp -r /etc/profile node01:/etc/</span><br><span class="line">&gt;   </span><br><span class="line">&gt; æ–¹å¼å››ï¼š</span><br><span class="line">&gt;   scp -r /ec/profile node01:&apos;pwd&apos;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p><strong>scp</strong> ï¼šè¿œç¨‹ä¼ è¾“æ–‡ä»¶å‘½ä»¤</p><p><strong>-r</strong>  ï¼š- æŒ‡çš„æ˜¯åé¢è·Ÿçš„æ˜¯å‚æ•°    r  æŒ‡çš„æ˜¯éå†æŒ‡å®šæ–‡ä»¶    <strong>f</strong>  æŒ‡çš„æ˜¯ä¸ç”¨è¯¢é—®</p><p><strong>/etc/profile</strong>  : æ˜¯æŒ‡å®šä¼ è¾“çš„æ–‡ä»¶</p><p><strong>root</strong>ï¼š è¿œç¨‹æœºå™¨çš„è´¦æˆ·å      <strong>@</strong>    è¿œç¨‹æœºå™¨çš„IPåœ°å€   <strong>ï¼š</strong>   <strong>/etc/</strong>    è¿œç¨‹æœºå™¨ä¸ŠæŒ‡å®šçš„ç›®å½•</p><p><strong>node01</strong>ï¼šè¿œç¨‹æœºå™¨çš„åˆ«å</p><p><strong>â€˜pwdâ€™</strong>ï¼š æœ¬åœ°è¦è¿œç¨‹ä¼ è¾“æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</p><p><strong>scp</strong> local_file remote_username@remote_ip:remote_folder   </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC51.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>ç¬¬ä¸€æ¬¡è¿œç¨‹æ‹·è´æ—¶ï¼Œéœ€è¦åœ¨ç®­å¤´1åˆè¾“å…¥yesç¡®è®¤ä¸€ä¸‹ï¼ŒéªŒè¯ä¸€ä¸‹è¿œç¨‹ä¸»æœºã€‚ç„¶ååœ¨ç®­å¤´2å¤„è¾“å…¥ä¸€ä¸‹è¿œç¨‹ä¸»æœºçš„å¯†ç ã€‚</p><h4 id="5-1-2å°†æœ¬åœ°ç›®å½•å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨"><a href="#5-1-2å°†æœ¬åœ°ç›®å½•å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨" class="headerlink" title="5.1.2å°†æœ¬åœ°ç›®å½•å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨"></a><strong>5.1.2å°†æœ¬åœ°ç›®å½•å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨</strong></h4><p><strong>scp</strong> -r local_folder remote_username@remote_ip:remote_folder </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC52.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>åœ¨testç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmyfileæ–‡ä»¶ï¼Œç„¶åå°†testç›®å½•è¿œç¨‹æ‹·è´åˆ°192è™šæ‹Ÿæœºçš„æ ¹ç›®å½•ä¸‹ã€‚</p><h3 id="5-2-ä¸Šä¼ "><a href="#5-2-ä¸Šä¼ " class="headerlink" title="5.2.ä¸Šä¼ "></a><strong>5</strong>.2.ä¸Šä¼ </h3><p>â€‹    éœ€å…ˆå®‰è£…å¥½lrzsz :  <strong>yum</strong>  install  lrzsz  -y</p><p>å®‰è£…å¥½åï¼Œè¾“å…¥ä¸Šä¼ çš„å‘½ä»¤rz,å¼¹å‡ºä¸€ä¸‹ç•Œé¢ï¼š</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC53.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>é€‰æ‹©ä¸€ä¸ªwindowsç³»ç»Ÿé‡Œçš„æ–‡ä»¶ä¸Šä¼ è‡³è™šæ‹Ÿæœºçš„å½“å‰ç›®å½•ä¸‹,ç„¶ållå‘½ä»¤ï¼ŒæŸ¥çœ‹ç»“æœ</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC54.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="5-3-ä¸‹è½½"><a href="#5-3-ä¸‹è½½" class="headerlink" title="5.3.ä¸‹è½½"></a><strong>5.</strong>3.ä¸‹è½½</h3><p>  ä¸‹è½½å‘½ä»¤ä¸ºszï¼Œszå‘½ä»¤åªèƒ½ä¸‹è½½æ–‡ä»¶ï¼Œä¸èƒ½æ˜¯ç›®å½•ï¼Œå¯å…ˆå°†ç›®å½•å‹ç¼©æˆä¸€ä¸ªåŒ…ï¼Œå†ä¸‹è½½è‡³windowsç³»ç»Ÿã€‚ä¸‹è½½å®Œä¹‹åï¼ŒæŒ‰ctrl+cç»“æŸã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC65.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="5-4-Xftpçš„å®‰è£…ä¸ä½¿ç”¨"><a href="#5-4-Xftpçš„å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="5.4    Xftpçš„å®‰è£…ä¸ä½¿ç”¨"></a><strong>5.4</strong>    Xftpçš„å®‰è£…ä¸ä½¿ç”¨</h3><p>â€‹    é™¤äº†å¯ä»¥ç”¨rz szå‘½ä»¤è¿›è¡Œæœ¬åœ°windowsç³»ç»Ÿå’Œè™šæ‹Ÿæœºä¹‹é—´çš„æ–‡ä»¶ä¼ è¾“ï¼Œè¿˜å¯ä»¥ä½¿ç”¨XFTPè½¯ä»¶ã€‚</p><h2 id="å…­ã€ç½‘ç»œæŒ‡ä»¤"><a href="#å…­ã€ç½‘ç»œæŒ‡ä»¤" class="headerlink" title="å…­ã€ç½‘ç»œæŒ‡ä»¤"></a><strong>å…­ã€ç½‘ç»œæŒ‡ä»¤</strong></h2><h3 id="6-1-æŸ¥çœ‹ç½‘ç»œé…ç½®ä¿¡æ¯"><a href="#6-1-æŸ¥çœ‹ç½‘ç»œé…ç½®ä¿¡æ¯" class="headerlink" title="6.1.æŸ¥çœ‹ç½‘ç»œé…ç½®ä¿¡æ¯"></a><strong>6.1.æŸ¥çœ‹ç½‘ç»œé…ç½®ä¿¡æ¯</strong></h3><p>å‘½ä»¤:ifconfig</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC66.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>ç®­å¤´1æŒ‡å‘çš„æ˜¯æœ¬æœºIPï¼Œç®­å¤´2ä¸ºå¹¿æ’­åœ°å€ï¼Œç®­å¤´3ä½å­ç½‘æ©ç ã€‚</p><h3 id="6-2-æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºçš„è¿é€šæ€§"><a href="#6-2-æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºçš„è¿é€šæ€§" class="headerlink" title="6.2.æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºçš„è¿é€šæ€§"></a><strong>6.</strong>2.æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºçš„è¿é€šæ€§</h3><p>å‘½ä»¤ï¼šping remote_ipï¼ˆå¯ä»¥pingé€šWindowsç³»ç»Ÿçš„IPï¼‰</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC67.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>è¾“å…¥ping 192.168.78.192ä»£è¡¨æµ‹è¯•æœ¬æœºå’Œ192ä¸»æœºçš„ç½‘ç»œæƒ…å†µï¼Œ</p><p>ç®­å¤´1è¡¨ç¤ºä¸€å…±æ¥æ”¶åˆ°äº†3ä¸ªåŒ…ï¼Œç®­å¤´2è¡¨ç¤ºä¸¢åŒ…ç‡ä¸º0ï¼Œè¡¨ç¤ºä¸¤è€…ä¹‹é—´çš„ç½‘ç»œé¡ºç•…ã€‚</p><p>æ³¨æ„ï¼šlinuxç³»ç»Ÿçš„pingå‘½ä»¤ä¼šä¸€ç›´å‘é€æ•°æ®åŒ…ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œé™¤éè®¤ä¸ºçš„æŒ‰ctrl + cåœæ­¢æ‰ï¼Œ</p><p>â€‹           windowsç³»ç»Ÿé»˜è®¤åªä¼šå‘4ä¸ªåŒ…è¿›è¡Œæµ‹è¯•ï¼Œä»¥ä¸‹ä¸ºwindowsçš„doså‘½ä»¤ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC68.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="6-3-æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯"><a href="#6-3-æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯" class="headerlink" title="6.3.æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯"></a><strong>6.</strong>3.æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯</h3><p>â€‹    å‘½ä»¤ï¼š<strong>n</strong>etstat <strong>â€“a n p t</strong></p><p>-a (all)æ˜¾ç¤ºæ‰€æœ‰é€‰é¡¹ï¼Œé»˜è®¤ä¸æ˜¾ç¤ºLISTENç›¸å…³<br>-t (tcp)ä»…æ˜¾ç¤ºtcpç›¸å…³é€‰é¡¹<br>-u (udp)ä»…æ˜¾ç¤ºudpç›¸å…³é€‰é¡¹<br>-n æ‹’ç»æ˜¾ç¤ºåˆ«åï¼Œèƒ½æ˜¾ç¤ºæ•°å­—çš„å…¨éƒ¨è½¬åŒ–æˆæ•°å­—ã€‚<br>-l ä»…åˆ—å‡ºæœ‰åœ¨ Listen (ç›‘å¬) çš„æœå‹™çŠ¶æ€</p><p>-p æ˜¾ç¤ºå»ºç«‹ç›¸å…³é“¾æ¥çš„ç¨‹åºå<br>-r æ˜¾ç¤ºè·¯ç”±ä¿¡æ¯ï¼Œè·¯ç”±è¡¨<br>-e æ˜¾ç¤ºæ‰©å±•ä¿¡æ¯ï¼Œä¾‹å¦‚uidç­‰<br>-s æŒ‰å„ä¸ªåè®®è¿›è¡Œç»Ÿè®¡<br>-c æ¯éš”ä¸€ä¸ªå›ºå®šæ—¶é—´ï¼Œæ‰§è¡Œè¯¥netstatå‘½ä»¤ã€‚</p><p>æç¤ºï¼šLISTENå’ŒLISTENINGçš„çŠ¶æ€åªæœ‰ç”¨-aæˆ–è€…-læ‰èƒ½çœ‹åˆ°</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC69.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="ä¸ƒã€ç³»ç»Ÿé…ç½®"><a href="#ä¸ƒã€ç³»ç»Ÿé…ç½®" class="headerlink" title="ä¸ƒã€ç³»ç»Ÿé…ç½®"></a><strong>ä¸ƒã€ç³»ç»Ÿé…ç½®</strong></h2><h3 id="7-1-ä¸»æœºåé…ç½®"><a href="#7-1-ä¸»æœºåé…ç½®" class="headerlink" title="7.1 ä¸»æœºåé…ç½®"></a><strong>7.1</strong> <strong>ä¸»æœºåé…ç½®</strong></h3><p>  è‹¥è¦ä¿®æ”¹ä¸»æœºåå­—ï¼Œå¯åœ¨/etc/sysconfig/networkæ–‡ä»¶é‡Œä¿®æ”¹.</p><p>vim /etc/sysconfig/network</p><p>â€‹       <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC6A.tmp.jpg" alt="img"><span class="img-alt">img</span></p><p>   æœºå™¨é‡å¯æ‰èƒ½ç”Ÿæ•ˆ</p><h3 id="7-2-DNSé…ç½®"><a href="#7-2-DNSé…ç½®" class="headerlink" title="7.2 DNSé…ç½®"></a><strong>7.2</strong> <strong>DNSé…ç½®</strong></h3><p> /etc/resolv.conf ä¸ºDNSæœåŠ¡å™¨çš„åœ°å€æ–‡ä»¶</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC7A.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="7-3-ç¯å¢ƒå˜é‡"><a href="#7-3-ç¯å¢ƒå˜é‡" class="headerlink" title="7.3 ç¯å¢ƒå˜é‡"></a><strong>7.3</strong> <strong>ç¯å¢ƒå˜é‡</strong></h3><p>Linuxç³»ç»Ÿçš„ç¯å¢ƒå˜é‡æ˜¯åœ¨/etc/profileæ–‡ä»¶é‡Œé…ç½®ã€‚</p><p>é¦–å…ˆè€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬å…ˆå‰æ•²çš„yum, service,date,useraddç­‰ç­‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç³»ç»Ÿæ€ä¹ˆçŸ¥é“è¿™äº›å‘½ä»¤å¯¹åº”çš„ç¨‹åºæ˜¯æ”¾åœ¨å“ªé‡Œçš„å‘¢ï¼Ÿ</p><p>è¿™æ˜¯ç”±äºæ— è®ºæ˜¯windowsç³»ç»Ÿè¿˜æ˜¯linuxç³»ç»Ÿï¼Œéƒ½æœ‰ä¸€ä¸ªå«åšpathçš„ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œå½“æˆ‘ä»¬åœ¨æ•²å‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šåˆ°pathå¯¹åº”çš„ç›®å½•ä¸‹å¯»æ‰¾ï¼Œæ‰¾åˆ°çš„è¯å°±ä¼šæ‰§è¡Œï¼Œæ‰¾ä¸åˆ°å°±ä¼šæŠ¥æ²¡æœ‰è¿™ä¸ªå‘½ä»¤ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC7B.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ï¼Œç³»ç»Ÿä¸€å…±åœ¨å“ªäº›ç›®å½•é‡Œå¯»æ‰¾å‘½ä»¤å¯¹åº”çš„ç¨‹åºã€‚</p><p>å‘½ä»¤ï¼šecho $PATH</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC7C.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>   å¯ä»¥çœ‹åˆ°pathé‡Œæœ‰å¾ˆå¤šè·¯å¾„ï¼Œè·¯å¾„ä¹‹é—´æœ‰å†’å·éš”å¼€ã€‚å½“ç”¨æˆ·æ•²å‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šä»å·¦å¾€å³ä¾æ¬¡å¯»æ‰¾å¯¹åº”çš„ç¨‹åºï¼Œæœ‰çš„è¯åˆ™è¿è¡Œè¯¥ç¨‹åºï¼Œæ²¡æœ‰çš„å°±æŠ¥é”™ï¼Œcommand not found.</p><p>é‚£å¦‚æœæˆ‘å†™äº†ä¸€ä¸ªè„šæœ¬ï¼ˆè„šæœ¬åé¢ä¼šä¸“é—¨è®²ï¼‰ï¼Œæˆ‘è¯¥æ€æ ·è¿è¡Œå®ƒå‘¢ï¼Ÿ</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC7D.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC7E.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å¯¹test.shæ·»åŠ å¯æ‰§è¡Œæƒé™ï¼Œchmod 700 test.sh</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC7F.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>è¿è¡Œæ–¹æ³•æœ‰ä¸‰ç§ï¼š</p><p>ä¸€ç§æ˜¯åˆ°è„šæœ¬çš„ç›®å½•ä¸‹æ‰§è¡Œï¼š</p><p>è¿è¡Œå‘½ä»¤ ï¼š ./test.sh  ,ä»£è¡¨æ‰§è¡Œå½“å‰ç›®å½•é‡Œçš„è„šæœ¬test.sh</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC80.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>ä¸€ç§æ˜¯æ•²è„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼š/usr/test/test.sh</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC81.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>ä»¥ä¸Šä¸¤ç§è¿è¡Œæ–¹å¼éƒ½ä¸æ˜¯å¾ˆç®€ä¾¿ï¼Œå› ä¸ºå…ˆå‰æˆ‘ä»¬æ‰§è¡Œyum serviceå‘½ä»¤ç­‰ï¼Œéƒ½æ˜¯ç›´æ¥æ•²å¯¹åº”çš„å‘½ä»¤çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å‚ç…§è¿™æ ·å­åšï¼Œåªè¦æˆ‘ä»¬é…ä¸€ä¸ªç¯å¢ƒå˜é‡å°±å¥½ã€‚</p><p>ç¼–è¾‘ï¼š vim /etc/profile å°†test.shæ‰€åœ¨ç›®å½•æ·»åŠ åˆ°PATHé‡Œå°±OKï¼Œæˆ‘è¿™é‡Œtest.shæ˜¯åœ¨/usr/testç›®å½•ï¼ˆé€šè¿‡pwdæŸ¥çœ‹ï¼‰ä¸‹ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC92.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>ç¼–è¾‘å®Œä¹‹åï¼Œæ‰§è¡Œsource /etc/profileå‘½ä»¤ï¼Œé‡æ–°åŠ è½½ç¯å¢ƒå˜é‡ï¼Œæ­¤æ—¶ä¼šå‘ç°PATHè·¯å¾„å¤šäº†ä¸€ä¸ª/usr/testã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC93.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>â€‹       æœ€åéªŒè¯ä¸€ä¸‹ï¼Œç›´æ¥æ‰§è¡Œtest.sh</p><p>â€‹       <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC94.tmp.jpg" alt="img"><span class="img-alt">img</span></p><h2 id="å…«ã€æœåŠ¡æ“ä½œ"><a href="#å…«ã€æœåŠ¡æ“ä½œ" class="headerlink" title="å…«ã€æœåŠ¡æ“ä½œ"></a><strong>å…«ã€æœåŠ¡æ“ä½œ</strong></h2><h3 id="8-1-åˆ—å‡ºæ‰€æœ‰æœåŠ¡"><a href="#8-1-åˆ—å‡ºæ‰€æœ‰æœåŠ¡" class="headerlink" title="8.1 åˆ—å‡ºæ‰€æœ‰æœåŠ¡"></a><strong>8.1 åˆ—å‡ºæ‰€æœ‰æœåŠ¡</strong></h3><p>å‘½ä»¤ï¼šchkconfig</p><p>æŸ¥è¯¢æ“ä½œç³»ç»Ÿåœ¨æ¯ä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­ä¼šæ‰§è¡Œå“ªäº›ç³»ç»ŸæœåŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬å„ç±»å¸¸é©»æœåŠ¡ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC95.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å„æ•°å­—ä»£è¡¨çš„ç³»ç»Ÿåˆå§‹åŒ–çº§åˆ«å«ä¹‰ï¼š</p><p>â€‹     0ï¼šåœæœºçŠ¶æ€</p><p>ã€€ã€€1ï¼šå•ç”¨æˆ·æ¨¡å¼ï¼Œrootè´¦æˆ·è¿›è¡Œæ“ä½œ</p><p>ã€€ã€€2ï¼šå¤šç”¨æˆ·ï¼Œä¸èƒ½ä½¿ç”¨net file systemï¼Œä¸€èˆ¬å¾ˆå°‘ç”¨</p><p>ã€€ã€€3ï¼šå®Œå…¨å¤šç”¨æˆ·ï¼Œä¸€éƒ¨åˆ†å¯åŠ¨ï¼Œä¸€éƒ¨åˆ†ä¸å¯åŠ¨ï¼Œå‘½ä»¤è¡Œç•Œé¢</p><p>ã€€ã€€4ï¼šæœªä½¿ç”¨ã€æœªå®šä¹‰çš„ä¿ç•™æ¨¡å¼</p><p>ã€€ã€€5ï¼šå›¾å½¢åŒ–ï¼Œ3çº§åˆ«ä¸­å¯åŠ¨çš„è¿›ç¨‹éƒ½å¯åŠ¨ï¼Œå¹¶ä¸”ä¼šå¯åŠ¨ä¸€éƒ¨åˆ†å›¾å½¢ç•Œé¢è¿›ç¨‹ã€‚</p><p>ã€€ã€€6ï¼šåœæ­¢æ‰€æœ‰è¿›ç¨‹ï¼Œå¸è½½æ–‡ä»¶ç³»ç»Ÿï¼Œé‡æ–°å¯åŠ¨(reboot)</p><p>ã€€ã€€è¿™äº›çº§åˆ«ä¸­1ã€2ã€4å¾ˆå°‘ç”¨ï¼Œç›¸å¯¹è€Œè¨€0ã€3ã€5ã€6ç”¨çš„ä¼šè¾ƒå¤šã€‚3çº§åˆ«å’Œ5çº§åˆ«é™¤äº†æ¡Œé¢ç›¸å…³çš„è¿›ç¨‹å¤–æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ä¸ºäº†å‡å°‘èµ„æºå ç”¨ï¼Œæ¨èéƒ½ç”¨3çº§åˆ«.</p><p>æ³¨æ„ ï¼šlinuxé»˜è®¤çº§åˆ«ä¸º3ï¼Œä¸è¦æŠŠ/etc/inittab ä¸­initdefault è®¾ç½®ä¸º0 å’Œ 6 </p><h3 id="8-2-æœåŠ¡æ“ä½œ"><a href="#8-2-æœåŠ¡æ“ä½œ" class="headerlink" title="8.2 æœåŠ¡æ“ä½œ"></a><strong>8.2</strong> <strong>æœåŠ¡æ“ä½œ</strong></h3><p>service æœåŠ¡å start/stop/status/restart</p><p>ä¾‹å­ï¼šå¯¹é˜²ç«å¢™æœåŠ¡è¿›è¡Œæ“ä½œï¼Œé˜²ç«å¢™çš„æœåŠ¡åä¸ºï¼šiptables.</p><p>â€‹    æŸ¥çœ‹é˜²ç«å¢™æœåŠ¡è¿è¡ŒçŠ¶æ€ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEC96.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>   å…³é—­é˜²ç«å¢™.  </p><p> <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsECA6.tmp.jpg" alt="img"><span class="img-alt">img</span></p><p>å¼€å¯é˜²ç«å¢™ </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsECA7.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="8-3-å…³é—­é˜²ç«å¢™"><a href="#8-3-å…³é—­é˜²ç«å¢™" class="headerlink" title="8.3 å…³é—­é˜²ç«å¢™"></a><strong>8.3 å…³é—­é˜²ç«å¢™</strong></h3><p>service iptables start/stop/status</p><p>æ³¨ï¼šå­¦ä¹ æœŸé—´ç›´æ¥æŠŠé˜²ç«å¢™å…³æ‰å°±æ˜¯ï¼Œå·¥ä½œæœŸé—´ä¹Ÿæ˜¯è¿ç»´äººå‘˜æ¥è´Ÿè´£é˜²ç«å¢™çš„ã€‚</p><p>æ°¸ä¹…å¼€å¯/å…³é—­é˜²ç«å¢™</p><p>chkconfig iptables on/off</p><h3 id="8-4-æœåŠ¡åˆæ‰§è¡Œç­‰çº§æ›´æ”¹"><a href="#8-4-æœåŠ¡åˆæ‰§è¡Œç­‰çº§æ›´æ”¹" class="headerlink" title="8.4 æœåŠ¡åˆæ‰§è¡Œç­‰çº§æ›´æ”¹"></a><strong>8.4</strong> <strong>æœåŠ¡åˆæ‰§è¡Œç­‰çº§æ›´æ”¹</strong></h3><p>chkconfig â€“level   2345    name      off|on</p><p>â€‹                                        <code>ï¼ˆæœåŠ¡åï¼‰</code></p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDC2.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>è‹¥ä¸åŠ çº§åˆ«ï¼Œé»˜è®¤æ˜¯2345çº§åˆ«</p><p>å‘½ä»¤ï¼šchkconfig name on|off</p><p>â€‹                          <code>ï¼ˆæœåŠ¡åï¼‰</code></p><h2 id="ä¹ã€linuxè¿›ç¨‹æ“ä½œ"><a href="#ä¹ã€linuxè¿›ç¨‹æ“ä½œ" class="headerlink" title="ä¹ã€linuxè¿›ç¨‹æ“ä½œ"></a><strong>ä¹ã€linuxè¿›ç¨‹æ“ä½œ</strong></h2><h3 id="9-1-æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹"><a href="#9-1-æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹" class="headerlink" title="9.1 æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹"></a><strong>9.1 æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹</strong></h3><p>å‘½ä»¤ï¼š ps  -aux</p><p>â€‹    -a åˆ—å‡ºæ‰€æœ‰</p><p>â€‹    -u åˆ—å‡ºç”¨æˆ·</p><p>â€‹    -x è¯¦ç»†åˆ—å‡ºï¼Œå¦‚cpuã€å†…å­˜ç­‰</p><ul><li>e </li></ul><p>â€‹    -f </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDC3.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å‘½ä»¤ï¼š ps  - ef  |  grep ssh</p><p> æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹é‡ŒCMDæ˜¯ssh çš„è¿›ç¨‹ä¿¡æ¯ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDD3.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å…¶ä¸­ç®­å¤´æ‰€æŒ‡çš„æ˜¯sshdæœåŠ¡è¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰</p><h3 id="9-2-æ€æ­»è¿›ç¨‹"><a href="#9-2-æ€æ­»è¿›ç¨‹" class="headerlink" title="9.2 æ€æ­»è¿›ç¨‹"></a><strong>9.2</strong> <strong>æ€æ­»è¿›ç¨‹</strong></h3><p>Kill</p><p>ç”¨æ³• kill pid </p><p>-9ï¼šå¼ºåˆ¶æ€æ­»</p><p>ps å‘½ä»¤å…ˆæŸ¥å‡ºå¯¹åº”ç¨‹åºçš„PIDæˆ–PPID ï¼Œç„¶åæ€æ­»æ‰è¿›ç¨‹ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDD4.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="åã€-å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#åã€-å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="åã€ å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>åã€ <strong>å…¶ä»–å¸¸ç”¨å‘½ä»¤</strong></h2><h3 id="10-1-yum"><a href="#10-1-yum" class="headerlink" title="10.1 yum"></a><strong>10.1</strong> <strong>yum</strong></h3><p>yumæ˜¯ä¸€ä¸ªåœ¨Fedoraå’ŒRedHatä»¥åŠCentOSä¸­çš„<a href="https://baike.baidu.com/item/Shell" target="_blank" rel="noopener">Shell</a>å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚åŸºäº<a href="https://baike.baidu.com/item/RPM" target="_blank" rel="noopener">RPM</a>åŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ã€å®‰è£…ã€‚</p><p>ç”±äºcentosç³»ç»Ÿçš„yumé»˜è®¤æ˜¯åˆ°å›½å¤–ç½‘ç«™ä¸‹è½½ï¼Œæœ‰æ—¶ä¸‹è½½é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œæ•…æˆ‘ä»¬å¯ä»¥æ¢ä¸€ä¸ªyumçš„ä¸‹è½½æºï¼Œè¿™é‡Œæˆ‘ä»¬æ¢ä¸€ä¸ªå›½å†…çš„ä¸‹è½½æº é˜¿é‡Œäº‘é•œåƒã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šå¤‡ä»½ä½ çš„åŸé•œåƒæ–‡ä»¶ï¼Œä»¥å…å‡ºé”™åå¯ä»¥æ¢å¤ã€‚</p><p>cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDD5.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>ç¬¬äºŒæ­¥ï¼šä¸‹è½½æ–°çš„CentOS-Base.repåˆ°/etc/yum.repos.d/</p><p>wget -O /etc/yum.repos.d/CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-6.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/Centos-6.repo</a></p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDD6.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>ä¸‹è½½å®Œä¹‹åï¼Œvim /etc/yum.repos.d/CentOS-Base.repo æŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶å†…å®¹ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDD7.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œyum makecacheç”Ÿæˆç¼“å­˜</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDD8.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>æŸ¥çœ‹å½“å‰æº</p><p>yum list | head -50</p><h3 id="10-2-wget"><a href="#10-2-wget" class="headerlink" title="10.2 wget"></a>10.2 <strong>wget</strong></h3><p>wget æ˜¯ä¸€ä¸ªä»ç½‘ç»œä¸Šè‡ªåŠ¨ä¸‹è½½æ–‡ä»¶çš„è‡ªç”±å·¥å…·ï¼Œæ”¯æŒé€šè¿‡ HTTPã€HTTPSã€FTP ä¸‰ä¸ªæœ€å¸¸è§çš„ <a href="https://baike.baidu.com/item/TCP%2FIP%E5%8D%8F%E8%AE%AE" target="_blank" rel="noopener">TCP/IPåè®®</a> ä¸‹è½½ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ HTTP ä»£ç†</p><p>éœ€å…ˆå®‰è£… yum install wget  â€“y </p><p>wgetç”¨æ³•:wget [option] ç½‘å€  -O    æŒ‡å®šä¸‹è½½ä¿å­˜çš„è·¯å¾„    </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDD9.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDEA.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>wget å·¥å…·è¿˜å¯ä»¥ç”¨æ¥åšä¸€äº›ç®€å•çš„çˆ¬è™«ï¼Œè¿™é‡Œä¸æ˜¯æˆ‘ä»¬çš„å­¦ä¹ é‡ç‚¹ï¼Œå¦‚æœæƒ³åšçˆ¬è™«ï¼Œå¯ä»¥ç”¨javaæˆ–pythonè¯­è¨€æ¥åšã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDEB.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="10-3-tar"><a href="#10-3-tar" class="headerlink" title="10.3 tar"></a><strong>10.3 tar</strong></h3><p>tar </p><p>â€‹    -z    gzipè¿›è¡Œè§£å‹æˆ–å‹ç¼©ï¼Œå¸¦.gzéœ€è¦åŠ ï¼Œå‹ç¼©å‡ºæ¥.gzä¹Ÿéœ€è¦åŠ </p><p>â€‹    -x    è§£å‹</p><p>â€‹    -c    å‹ç¼©</p><p>â€‹    -f    ç›®æ ‡æ–‡ä»¶ï¼Œå‹ç¼©æ–‡ä»¶æ–°å‘½åæˆ–è§£å‹æ–‡ä»¶å</p><p>â€‹    -v    è§£å‹ç¼©è¿‡ç¨‹ä¿¡æ¯æ‰“å°</p><p>è§£å‹å‘½ä»¤ï¼štar  -zvxf  xxxx.tar.gz</p><p>ä¾‹å­ï¼šå…ˆç”¨rzå‘½ä»¤æˆ–wscpä¸Šä¼ ä¸€ä¸ªtaråŒ…ï¼Œç„¶åè§£å‹ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDEC.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDED.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>è§£å‹åï¼š</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDEE.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å‹ç¼©å‘½ä»¤ï¼štar -zcf å‹ç¼©åŒ…å‘½å å‹ç¼©ç›®æ ‡</p><p>ä¾‹å­ï¼štar -zcf tomcat.tar.gz apache-tomcat-7.0.61 </p><p>å°† apache-tomcat-7.0.61 ç›®å½•å‹ç¼©æˆtomcat.tar.gzåŒ…ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEDEF.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="åä¸€ã€JDKéƒ¨ç½²"><a href="#åä¸€ã€JDKéƒ¨ç½²" class="headerlink" title="åä¸€ã€JDKéƒ¨ç½²"></a><strong>åä¸€ã€JDKéƒ¨ç½²</strong></h2><h3 id="11-1-å®˜ç½‘ä¸‹è½½"><a href="#11-1-å®˜ç½‘ä¸‹è½½" class="headerlink" title="11.1 å®˜ç½‘ä¸‹è½½"></a><strong>11.1 å®˜ç½‘ä¸‹è½½</strong></h3><p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE00.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE01.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="11-2-ä¸Šä¼ å¹¶è§£å‹"><a href="#11-2-ä¸Šä¼ å¹¶è§£å‹" class="headerlink" title="11.2 ä¸Šä¼ å¹¶è§£å‹"></a><strong>11.2 ä¸Šä¼ å¹¶è§£å‹</strong></h3><p>ç”¨xftpå°†jdkåŒ…ä¸Šä¼ åˆ°linuxç³»ç»Ÿé‡Œï¼Œæˆ‘è¿™é‡Œä¸Šä¼ åˆ°/usr/softç›®å½•ä¸‹ã€‚</p><p>ç„¶åè§£å‹: tar -zxf jdk-7u80-linux-x64.tar.gz</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE02.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="11-3é…ç½®ç¯å¢ƒå˜é‡"><a href="#11-3é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="11.3é…ç½®ç¯å¢ƒå˜é‡"></a><strong>11.</strong>3<strong>é…ç½®ç¯å¢ƒå˜é‡</strong></h3><p>é…ç½®å…¨å±€JAVA_HOMEï¼Œå¹¶åœ¨PATHè·¯å¾„é‡ŒåŠ å…¥java_home/bin.</p><p>æ³¨æ„ï¼šæ–°çš„pathè·¯å¾„å¿…é¡»è¦åŒ…å«æ—§çš„PATHè·¯å¾„ï¼Œä¸”æ¯ä¸ªè·¯å¾„ä¹‹é—´ä»¥å†’å·éš”å¼€ï¼Œè€Œä¸æ˜¯åˆ†å·</p><p>vim /etc/profile</p><p>JAVA_HOME= /usr/soft/jdk1.7.0_75</p><p>PATH=$PATH:$JAVA_HOME/bin</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE03.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡ï¼šsource  /etc/profile</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE04.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="11-4-éªŒè¯"><a href="#11-4-éªŒè¯" class="headerlink" title="11.4 éªŒè¯"></a><strong>11.4 </strong>éªŒè¯</h3><p>java  -version</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE05.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å¦‚å‡ºç°ä¸Šå›¾ï¼Œåˆ™è¡¨ç¤ºjavaç¯å¢ƒå˜é‡é…ç½®æˆåŠŸã€‚</p><h2 id="åäºŒã€éƒ¨ç½²Tomcat"><a href="#åäºŒã€éƒ¨ç½²Tomcat" class="headerlink" title="åäºŒã€éƒ¨ç½²Tomcat"></a><strong>åäºŒã€éƒ¨ç½²Tomcat</strong></h2><h3 id="12-1-å®˜ç½‘ä¸‹è½½"><a href="#12-1-å®˜ç½‘ä¸‹è½½" class="headerlink" title="12.1 å®˜ç½‘ä¸‹è½½"></a><strong>1</strong>2<strong><strong>.</strong></strong>1 å®˜ç½‘ä¸‹è½½</h3><p>ä¸‹è½½tomcat</p><p><a href="http://tomcat.apache.org/" target="_blank" rel="noopener">http://tomcat.apache.org/</a></p><h3 id="12-2-ä¸Šä¼ å¹¶è§£å‹"><a href="#12-2-ä¸Šä¼ å¹¶è§£å‹" class="headerlink" title="12**.2 ä¸Šä¼ å¹¶è§£å‹**"></a><strong>1</strong>2<strong>**.2 </strong>ä¸Šä¼ å¹¶è§£å‹**</h3><p>æˆ‘è¿™é‡Œä¸Šä¼ è‡³/usr/softç›®å½•ä¸‹ï¼Œç„¶åè§£å‹ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE06.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h3 id="12-3-å¯åŠ¨tomcat"><a href="#12-3-å¯åŠ¨tomcat" class="headerlink" title="12.3 å¯åŠ¨tomcat"></a><strong>12.3 å¯åŠ¨tomcat</strong></h3><p>åœ¨tomcatçš„binç›®å½•ä¸‹æœ‰ä¸ªstartup.sh è„šæœ¬å¯ä»¥ç›´æ¥å¯åŠ¨tomcatæœåŠ¡</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE16.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å…³é—­tomcatæœåŠ¡ï¼Œå¯ä»¥ç”¨shutdown.shå‘½ä»¤ã€‚</p><p>æˆ–è€…ps -ef | grep tomcat æŸ¥çœ‹å‡ºtomcatè¿›ç¨‹å·åï¼Œç”¨killå‘½ä»¤ã€‚</p><h3 id="12-4-jps"><a href="#12-4-jps" class="headerlink" title="12.4 jps"></a><strong>12.4</strong> <strong>jps</strong></h3><p>jpsæ˜¯JDK 1.5æä¾›çš„ä¸€ä¸ªæ˜¾ç¤ºå½“å‰æ‰€æœ‰javaè¿›ç¨‹pidçš„å‘½ä»¤ï¼Œç®€å•å®ç”¨ï¼Œéå¸¸é€‚åˆåœ¨linux/unixå¹³å°ä¸Šç®€å•å¯Ÿçœ‹å½“å‰javaè¿›ç¨‹çš„ä¸€äº›ç®€å•æƒ…å†µã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE17.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œjpså‘½ä»¤æ˜¾ç¤ºå‡ºäº†ï¼Œç³»ç»Ÿå½“å‰è¿è¡Œåœ¨jvmä¸Šçš„è¿›ç¨‹æƒ…å†µã€‚å…¶ä¸­Bootstrapæ˜¯tomcatçš„è¿›ç¨‹åå­—ï¼Œ1996æ˜¯tomcatçš„PID</p><h3 id="13-5éªŒè¯"><a href="#13-5éªŒè¯" class="headerlink" title="13.5éªŒè¯"></a><strong>13.</strong>5éªŒè¯</h3><p>å…ˆæŠŠé˜²ç«å¢™å…³äº†ï¼ˆservice iptables stopï¼‰ï¼Œç„¶åè®¿é—®è™šæ‹ŸæœºIPçš„8080ç«¯å£</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEE18.tmp.jpg" alt="img"><span class="img-alt">img</span> </p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç³»ç»Ÿå­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å…¥é—¨å­¦ä¹ ï¼ˆäºŒï¼‰</title>
      <link href="/2019/01/11/Linux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%BA%8C%E5%9B%9E%E5%90%88%EF%BC%89/"/>
      <url>/2019/01/11/Linux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%BA%8C%E5%9B%9E%E5%90%88%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><code>2018å¹´12æœˆ18æ—¥  å‘¨äºŒ  æ™´</code></p><p><strong>ä»Šæ—¥å­¦ä¹ è¦ç‚¹ï¼š</strong></p><p>[TOC]</p><h2 id="LinuxååŠç¨‹"><a href="#LinuxååŠç¨‹" class="headerlink" title="LinuxååŠç¨‹"></a>LinuxååŠç¨‹</h2><h3 id="ä¸€ã€Linuxç³»ç»Ÿé…ç½®"><a href="#ä¸€ã€Linuxç³»ç»Ÿé…ç½®" class="headerlink" title="ä¸€ã€Linuxç³»ç»Ÿé…ç½®"></a>ä¸€ã€Linuxç³»ç»Ÿé…ç½®</h3><h4 id="1-ä¸»æœºåé…ç½®ï¼š"><a href="#1-ä¸»æœºåé…ç½®ï¼š" class="headerlink" title="1.ä¸»æœºåé…ç½®ï¼š"></a>1.ä¸»æœºåé…ç½®ï¼š</h4><blockquote><p>vim  /etc/sysconfig/network</p></blockquote><p><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1545214876278.png" alt="1545214876278"><span class="img-alt">1545214876278</span></p><p>é…ç½®å®Œæˆä¹‹åéœ€è¦é‡å¯æœºå™¨æ‰èƒ½ç”Ÿæ•ˆ</p><blockquote><p>reboot</p></blockquote><h4 id="2-DNSé…ç½®"><a href="#2-DNSé…ç½®" class="headerlink" title="2.DNSé…ç½®"></a>2.DNSé…ç½®</h4><blockquote><h1 id="æŸ¥çœ‹DNSæœåŠ¡å™¨çš„åœ°å€"><a href="#æŸ¥çœ‹DNSæœåŠ¡å™¨çš„åœ°å€" class="headerlink" title="æŸ¥çœ‹DNSæœåŠ¡å™¨çš„åœ°å€"></a>æŸ¥çœ‹DNSæœåŠ¡å™¨çš„åœ°å€</h1><p>cat  /etc/resolv.conf</p><h1 id="ä¿®æ”¹DNSæœåŠ¡å™¨åœ°å€"><a href="#ä¿®æ”¹DNSæœåŠ¡å™¨åœ°å€" class="headerlink" title="ä¿®æ”¹DNSæœåŠ¡å™¨åœ°å€"></a>ä¿®æ”¹DNSæœåŠ¡å™¨åœ°å€</h1><p>æ–¹å¼ä¸€ï¼švim  /etc/sysconfig/network.scripts/ifconfig-eth0</p><p>â€‹             åœ¨é…ç½®ç½‘å…³æ—¶ï¼Œé…ç½®DNS1=114.114.114.114ï¼ˆä¸æ¨èï¼Œæ±Ÿè‹å—äº¬çš„IPï¼‰</p><p>æ–¹å¼äºŒï¼švim   /etc/resolv.conf    ï¼ˆç”¨æœ¬åœ°ç½‘å…³è§£æï¼‰</p><p>â€‹              nameserver   192.168.198.0   ( æ­¤ä¸ºè™šæ‹Ÿæœºä¸­çš„ç½‘å…³åœ°å€)</p></blockquote><h4 id="3-ç¯å¢ƒå˜é‡"><a href="#3-ç¯å¢ƒå˜é‡" class="headerlink" title="3.ç¯å¢ƒå˜é‡"></a>3.ç¯å¢ƒå˜é‡</h4><blockquote><p>é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œä½¿å¾—æŸäº›å‘½ä»¤åœ¨æ‰§è¡Œæ—¶ï¼Œç³»ç»Ÿå¯ä»¥æ‰¾åˆ°å‘½ä»¤å¯¹åº”çš„æ‰§è¡Œç¨‹åºï¼Œå‘½ä»¤æ‰èƒ½æ­£å¸¸æ‰§è¡Œã€‚</p></blockquote><p>æŸ¥çœ‹ç³»ç»Ÿä¸€å…±åœ¨å“ªäº›ç›®å½•é‡Œå¯»æ‰¾å‘½ä»¤å¯¹åº”çš„ç¨‹åº</p><blockquote><p>å‘½ä»¤ï¼šecho $PATH</p></blockquote><p><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1545215894631.png" alt="1545215894631"><span class="img-alt">1545215894631</span></p><p><code>æ³¨æ„</code>ï¼šè·¯å¾„ä¹‹é—´æœ‰å†’å·éš”å¼€ï¼Œç³»ç»Ÿä¼šä»å·¦å¾€å³ä¾æ¬¡å¯»æ‰¾å¯¹åº”çš„ç¨‹åº</p><p>â€‹             ä¸€èˆ¬å‘½ä»¤ä¼šå­˜æ”¾åœ¨  binç›®å½•ï¼Œæˆ–sbinç›®å½•</p><p>é…ç½®å…¨å±€ç¯å¢ƒå˜é‡ï¼š</p><blockquote><p>vim  /etc/profile</p><p>åœ¨æ–‡ä»¶ä¸­ï¼š</p><p>PATH=$PATH:(å‘½ä»¤æ‰€åœ¨ç›®å½•)</p><p>é€€å‡ºæ–‡ä»¶ç¼–è¾‘åï¼š</p><p>source  /etc/profile  </p><p> (é‡æ–°åŠ è½½èµ„æºï¼Œæœ‰çš„å¯èƒ½éœ€è¦é‡å¯æœºå™¨ï¼Œè¿™ä¸é€‚ç”¨äºå®é™…çŠ¶å†µ)</p></blockquote><p>é…ç½®å±€éƒ¨ç¯å¢ƒå˜é‡ï¼šï¼ˆæ¨èï¼Œé™å½“å‰ç™»å½•ç”¨æˆ·ä½¿ç”¨ï¼‰</p><blockquote><p>æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶(rootç›®å½•ä¸‹)</p><p>ls  -a    (å‘ç°éšè—æ–‡ä»¶    .bash.profile)</p><p>vim  ~/ bash_profile</p><p>åœ¨æ–‡ä»¶ä¸­ï¼š</p><p>export  PATH =$PATH:(å‘½ä»¤æ‰€åœ¨ç›®å½•)</p></blockquote><h4 id="4-æ‹å¿«ç…§"><a href="#4-æ‹å¿«ç…§" class="headerlink" title="4.æ‹å¿«ç…§"></a>4.æ‹å¿«ç…§</h4><p>ï¼ˆä¿å­˜å½“æ—¶è®¡ç®—æœºæ‰€å‡ºçŠ¶æ€çš„å„ç§é…ç½®å’Œèµ„æºï¼Œé€‚åº¦ä½¿ç”¨ï¼‰</p><blockquote><p>é€‰ä¸­æŒ‡å®šè™šæ‹Ÿè®¡ç®—æœºâ€”â€”é¼ æ ‡å³å‡»â€”â€“é€‰ä¸­â€œå¿«ç…§â€ â€”â€”â€œæ‹æ‘„å¿«ç…§â€˜â€”-åœ¨é¡µé¢ä¸­æ‰¾åˆ°â€æ‹æ‘„å¿«ç…§â€œï¼Œå¹¶æ·»åŠ åç§°å’Œæè¿°</p><p>ä¹Ÿå¯ä»¥åˆ é™¤ï¼Œæ‰¾åˆ°é¡µé¢ä¸­çš„åˆ é™¤æŒ‰é’®</p></blockquote><h3 id="äºŒã€æœåŠ¡æ“ä½œ"><a href="#äºŒã€æœåŠ¡æ“ä½œ" class="headerlink" title="äºŒã€æœåŠ¡æ“ä½œ"></a>äºŒã€æœåŠ¡æ“ä½œ</h3><h4 id="1ã€æŸ¥è¯¢æ“ä½œç³»ç»Ÿ"><a href="#1ã€æŸ¥è¯¢æ“ä½œç³»ç»Ÿ" class="headerlink" title="1ã€æŸ¥è¯¢æ“ä½œç³»ç»Ÿ"></a>1ã€æŸ¥è¯¢æ“ä½œç³»ç»Ÿ</h4><p>åœ¨æ¯ä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­ä¼šæ‰§è¡Œå“ªäº›ç³»ç»ŸæœåŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬å„ç±»å¸¸é©»æœåŠ¡ã€‚</p><blockquote><p>å‘½ä»¤ï¼šchkconfig</p></blockquote><p><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1545219619458.png" alt="1545219619458"><span class="img-alt">1545219619458</span></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å„æ•°å­—ä»£è¡¨çš„ç³»ç»Ÿåˆå§‹åŒ–çº§åˆ«ï¼š</span><br><span class="line">    0ï¼šåœæœºçŠ¶æ€</span><br><span class="line">ã€€ã€€1ï¼šå•ç”¨æˆ·æ¨¡å¼ï¼Œrootè´¦æˆ·è¿›è¡Œæ“ä½œ</span><br><span class="line">ã€€ã€€2ï¼šå¤šç”¨æˆ·ï¼Œä¸èƒ½ä½¿ç”¨net file systemï¼Œä¸€èˆ¬å¾ˆå°‘ç”¨</span><br><span class="line">ã€€ã€€3ï¼šå®Œå…¨å¤šç”¨æˆ·ï¼Œä¸€éƒ¨åˆ†å¯åŠ¨ï¼Œä¸€éƒ¨åˆ†ä¸å¯åŠ¨ï¼Œå‘½ä»¤è¡Œç•Œé¢</span><br><span class="line">ã€€ã€€4ï¼šæœªä½¿ç”¨ã€æœªå®šä¹‰çš„ä¿ç•™æ¨¡å¼</span><br><span class="line">ã€€ã€€5ï¼šå›¾å½¢åŒ–ï¼Œ3çº§åˆ«ä¸­å¯åŠ¨çš„è¿›ç¨‹éƒ½å¯åŠ¨ï¼Œå¹¶ä¸”ä¼šå¯åŠ¨ä¸€éƒ¨åˆ†å›¾å½¢ç•Œé¢è¿›ç¨‹ã€‚</span><br><span class="line">ã€€ã€€6ï¼šåœæ­¢æ‰€æœ‰è¿›ç¨‹ï¼Œå¸è½½æ–‡ä»¶ç³»ç»Ÿï¼Œé‡æ–°å¯åŠ¨(reboot)</span><br></pre></td></tr></table></figure><blockquote><p>1ã€2ã€4å¾ˆå°‘ç”¨ï¼Œ0ã€3ã€5ã€6å¸¸ç”¨ï¼Œ3çº§åˆ«å’Œ5çº§åˆ«é™¤äº†æ¡Œé¢ç›¸å…³çš„è¿›ç¨‹å¤–æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ¨èéƒ½ç”¨3çº§åˆ«ï¼›</p><p>linuxé»˜è®¤çº§åˆ«ä¸º3ï¼›</p><p>ä¸è¦æŠŠ /etc/inittab  ä¸­ initdefault è®¾ç½®ä¸º0 å’Œ 6ï¼› </p></blockquote><h4 id="2ã€æœåŠ¡æ“ä½œ"><a href="#2ã€æœåŠ¡æ“ä½œ" class="headerlink" title="2ã€æœåŠ¡æ“ä½œ"></a>2ã€æœåŠ¡æ“ä½œ</h4><blockquote><p>service æœåŠ¡å start/stop/status/restart</p></blockquote><p>ä¸¾ä¾‹ï¼šå¯¹é˜²ç«å¢™æœåŠ¡è¿›è¡Œæ“ä½œ</p><blockquote><p>é˜²ç«å¢™çš„æœåŠ¡åä¸ºï¼šiptables</p></blockquote><p>æŸ¥çœ‹é˜²ç«å¢™æœåŠ¡è¿è¡ŒçŠ¶æ€</p><blockquote><p>service  iptables status</p></blockquote><p>å…³é—­é˜²ç«å¢™</p><blockquote><p>service  iptables stop</p></blockquote><p>å¼€å¯é˜²ç«å¢™</p><blockquote><p>service  iptables start</p></blockquote><p>æ°¸ä¹…å¼€å¯/å…³é—­é˜²ç«å¢™</p><blockquote><p>chkconfig iptables on/off</p></blockquote><h4 id="3ã€æœåŠ¡åˆæ‰§è¡Œç­‰çº§æ›´æ”¹"><a href="#3ã€æœåŠ¡åˆæ‰§è¡Œç­‰çº§æ›´æ”¹" class="headerlink" title="3ã€æœåŠ¡åˆæ‰§è¡Œç­‰çº§æ›´æ”¹"></a>3ã€æœåŠ¡åˆæ‰§è¡Œç­‰çº§æ›´æ”¹</h4><blockquote><p>chkconfig â€“level 2345 <code>name</code> off|on<br>â€‹                                   ï¼ˆ <code>æœåŠ¡å</code>ï¼‰</p><p>ä¸¾ä¾‹ï¼šé˜²ç«å¢™</p><p>chkconfig â€“level 2345 iptables   off</p></blockquote><p>è‹¥ä¸åŠ çº§åˆ«ï¼Œé»˜è®¤æ˜¯2345çº§åˆ«</p><blockquote><p>å‘½ä»¤ï¼šchkconfig <code>name</code> on|off<br>â€‹                         ï¼ˆ<code>æœåŠ¡å</code>ï¼‰</p></blockquote><h3 id="ä¸‰ã€linuxè¿›ç¨‹æ“ä½œ"><a href="#ä¸‰ã€linuxè¿›ç¨‹æ“ä½œ" class="headerlink" title="ä¸‰ã€linuxè¿›ç¨‹æ“ä½œ"></a>ä¸‰ã€linuxè¿›ç¨‹æ“ä½œ</h3><h4 id="1ã€æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹"><a href="#1ã€æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹" class="headerlink" title="1ã€æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹"></a>1ã€æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹</h4><blockquote><p>å‘½ä»¤ï¼š ps  -aux</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   -a åˆ—å‡ºæ‰€æœ‰</span><br><span class="line">-u åˆ—å‡ºç”¨æˆ·</span><br><span class="line">-x è¯¦ç»†åˆ—å‡ºï¼Œå¦‚cpuã€å†…å­˜ç­‰</span><br><span class="line">    -e select all processes    ç›¸å½“äº-a</span><br><span class="line">    -f does full-format listing   å°†æ‰€æœ‰æ ¼å¼è¯¦ç»†åˆ—å‡ºæ¥</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹é‡ŒCMDæ˜¯ssh çš„è¿›ç¨‹ä¿¡æ¯ï¼ˆåŒ…æ‹¬pid è¿›ç¨‹å·ï¼‰</p><blockquote><p>å‘½ä»¤ï¼š ps  - ef | grep ssh      </p><p>ï¼ˆ|  ç®¡é“ç¬¦  ï¼šå‰ä¸€ä¸ªè¾“å‡ºï¼Œå˜ä¸ºåä¸€ä¸ªçš„è¾“å…¥ï¼‰</p><p>ä¸¾ä¾‹ï¼š</p><p>ps -ef | grep redis</p></blockquote><h4 id="2ã€æ€æ­»è¿›ç¨‹"><a href="#2ã€æ€æ­»è¿›ç¨‹" class="headerlink" title="2ã€æ€æ­»è¿›ç¨‹"></a>2ã€æ€æ­»è¿›ç¨‹</h4><p><code>kill</code></p><blockquote><p>å‘½ä»¤ï¼škill pid </p><p>-9    å¼ºåˆ¶æ€æ­»</p><p>ç”¨æ³•ï¼šç”¨ps å‘½ä»¤å…ˆæŸ¥å‡ºå¯¹åº”ç¨‹åºçš„PIDæˆ–PPID ï¼Œç„¶åç”¨killæ€æ­»æ‰è¿›ç¨‹ã€‚</p></blockquote><h3 id="å››ã€å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#å››ã€å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å››ã€å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>å››ã€å…¶ä»–å¸¸ç”¨å‘½ä»¤</h3><h4 id="1ã€yum"><a href="#1ã€yum" class="headerlink" title="1ã€yum"></a>1ã€<strong>yum</strong></h4><table><thead><tr><th>åŸºäº<a href="https://baike.baidu.com/item/RPM" target="_blank" rel="noopener">RPM</a>åŒ…ç®¡ç†</th></tr></thead><tbody><tr><td>èƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ã€å®‰è£…</td></tr></tbody></table><p>è·Ÿæ¢yumä¸‹è½½æºï¼ˆé»˜è®¤æ˜¯åˆ°å›½å¤–ç½‘ç«™ä¸‹è½½ï¼‰</p><p>ç¬¬ä¸€æ­¥ï¼šå¤‡ä»½ä½ çš„åŸé•œåƒæ–‡ä»¶ï¼Œä»¥å…å‡ºé”™åå¯ä»¥æ¢å¤</p><blockquote><p>cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</p></blockquote><p>ç¬¬äºŒæ­¥ï¼šä¸‹è½½æ–°çš„CentOS-Base.repåˆ°/etc/yum.repos.d/</p><blockquote><p>wget -O /etc/yum.repos.d/CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-6.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/Centos-6.repo</a></p></blockquote><p>ä¸‹è½½å®Œä¹‹åï¼ŒæŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶å†…å®¹</p><blockquote><p>vim  /etc/yum.repos.d/CentOS-Base.repo</p></blockquote><p>ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆç¼“å­˜</p><blockquote><p>è¿è¡Œyum makecache</p></blockquote><p>æŸ¥çœ‹å½“å‰æº</p><blockquote><p>yum list | head -50</p></blockquote><h4 id="2ã€-wget"><a href="#2ã€-wget" class="headerlink" title="2ã€ wget"></a>2ã€ <strong>wget</strong></h4><table><thead><tr><th>ä¸€ä¸ªä»ç½‘ç»œä¸Šè‡ªåŠ¨ä¸‹è½½æ–‡ä»¶çš„è‡ªç”±å·¥å…·</th></tr></thead><tbody><tr><td>æ”¯æŒé€šè¿‡ HTTPã€HTTPSã€FTP ä¸‰ä¸ªæœ€å¸¸è§çš„ TCP/IPåè®®ï¼Œå¯ä»¥ä½¿ç”¨ HTTP ä»£ç†</td></tr></tbody></table><p>å®‰è£…ï¼š</p><blockquote><p>yum install wget  â€“y</p></blockquote><p>ç”¨æ³•ï¼š</p><blockquote><p>wget  [option] ç½‘å€  -O    æŒ‡å®šä¸‹è½½ä¿å­˜çš„è·¯å¾„</p><p>ä¸¾ä¾‹ï¼š</p><p>wget  <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>  -O baidu.html</p></blockquote><h4 id="3ã€tar"><a href="#3ã€tar" class="headerlink" title="3ã€tar"></a>3ã€<strong>tar</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   -zgzipè¿›è¡Œè§£å‹æˆ–å‹ç¼©ï¼Œå¸¦.gzéœ€è¦åŠ ï¼Œå‹ç¼©å‡ºæ¥.gzä¹Ÿéœ€è¦åŠ </span><br><span class="line">-xè§£å‹</span><br><span class="line">-cå‹ç¼©</span><br><span class="line">-fç›®æ ‡æ–‡ä»¶ï¼Œå‹ç¼©æ–‡ä»¶æ–°å‘½åæˆ–è§£å‹æ–‡ä»¶å</span><br><span class="line">-vè§£å‹ç¼©è¿‡ç¨‹ä¿¡æ¯æ‰“å°</span><br></pre></td></tr></table></figure><blockquote><p>è§£å‹å‘½ä»¤ï¼štar  -zvxf  xxxx.tar.gz</p></blockquote><blockquote><p>å‹ç¼©å‘½ä»¤ï¼štar -zcf å‹ç¼©åŒ…å‘½å å‹ç¼©ç›®æ ‡<br>ä¸¾ä¾‹ï¼š</p><p>tar -zcf  tomcat.tar.gz  apache-tomcat-7.0.61<br>å°† apache-tomcat-7.0.61 ç›®å½•å‹ç¼©æˆtomcat.tar.gzåŒ…</p></blockquote><h4 id="4ã€man"><a href="#4ã€man" class="headerlink" title="4ã€man"></a>4ã€<strong>man</strong></h4><p>ä½œç”¨ï¼šç”¨äºæŸ¥çœ‹æŒ‡å®šå‘½ä»¤çš„å…·ä½“è§£é‡Š</p><p>å®‰è£…</p><blockquote><p>yum install  man  -y</p><p>(ä¸‹è½½å¹¶å®‰è£…man  å¹¶ç¡®è®¤)</p></blockquote><p>ä½¿ç”¨</p><blockquote><p>man  ps</p></blockquote><h3 id="äº”ã€JDKéƒ¨ç½²"><a href="#äº”ã€JDKéƒ¨ç½²" class="headerlink" title="äº”ã€JDKéƒ¨ç½²"></a>äº”ã€JDKéƒ¨ç½²</h3><h4 id="1ã€å‡†å¤‡JDKå®‰è£…åŒ…ï¼š"><a href="#1ã€å‡†å¤‡JDKå®‰è£…åŒ…ï¼š" class="headerlink" title="1ã€å‡†å¤‡JDKå®‰è£…åŒ…ï¼š"></a>1ã€å‡†å¤‡JDKå®‰è£…åŒ…ï¼š</h4><p>ï¼ˆè¿™æ˜¯ä½¿ç”¨   .rpm  æ ¼å¼çš„å®‰è£…åŒ…ï¼‰</p><p>å®˜ç½‘ä¸‹è½½ï¼š<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p><p>äº‘ç›˜èµ„æºï¼š  <a href="https://pan.baidu.com/s/1LzeQbOnG9PROZrtlbYHlDg" target="_blank" rel="noopener">jdk-8u191-linux-x64.rpm</a>  ï¼š</p><p>â€‹     æ ¹æ®ç”¨æˆ·å–œå¥½æ”¾åˆ°è™šæ‹Ÿæœºå™¨çš„æ–‡ä»¶ç›®å½•ä¸­</p><h4 id="2ã€è§£å‹å¹¶å®‰è£…ï¼Œå±•ç¤ºç¼–è¯‘è¿‡ç¨‹"><a href="#2ã€è§£å‹å¹¶å®‰è£…ï¼Œå±•ç¤ºç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="2ã€è§£å‹å¹¶å®‰è£…ï¼Œå±•ç¤ºç¼–è¯‘è¿‡ç¨‹"></a>2ã€è§£å‹å¹¶å®‰è£…ï¼Œå±•ç¤ºç¼–è¯‘è¿‡ç¨‹</h4><blockquote><p>rpm   -ivh  jdk-8u191-linux-x64.rpm</p></blockquote><p>å®‰è£…æ”¾åˆ°äº† /usr ç›®å½•ä¸‹ï¼Œæœ‰/javaç›®å½•</p><h4 id="3ã€é…ç½®ç¯å¢ƒå˜é‡"><a href="#3ã€é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3ã€é…ç½®ç¯å¢ƒå˜é‡"></a>3ã€é…ç½®ç¯å¢ƒå˜é‡</h4><blockquote><p>vim  ~/.bash_profile</p><p>åœ¨æ–‡ä»¶ä¸­ï¼š</p><p>JAVA_HOME=(jdkæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„+jdkæ–‡ä»¶å)</p><p>export  PATH=$PATH:$JAVA_HOME/bin</p></blockquote><p>æ³¨æ„ï¼š</p><p>æ–°çš„pathè·¯å¾„å¿…é¡»è¦åŒ…å«æ—§çš„PATHè·¯å¾„ï¼Œä¸”æ¯ä¸ªè·¯å¾„ä¹‹é—´ä»¥å†’å·éš”å¼€ï¼Œè€Œä¸æ˜¯åˆ†å·</p><blockquote><p>é…ç½®å®Œæˆï¼Œé€€å‡ºç¼–è¾‘æ¡†å</p><p>source  ~/.hash_profile</p></blockquote><h4 id="4ã€æµ‹è¯•ï¼š"><a href="#4ã€æµ‹è¯•ï¼š" class="headerlink" title="4ã€æµ‹è¯•ï¼š"></a>4ã€æµ‹è¯•ï¼š</h4><blockquote><p>java  -version</p><p>æˆ–</p><p>echo  $JAVA_HOME</p></blockquote><p><code>echo   æ ‡å‡†è¾“å‡ºï¼Œæ‰“å°</code></p><h3 id="å…­ã€Tomcatéƒ¨ç½²"><a href="#å…­ã€Tomcatéƒ¨ç½²" class="headerlink" title="å…­ã€Tomcatéƒ¨ç½²"></a>å…­ã€Tomcatéƒ¨ç½²</h3><h4 id="1ã€å®˜ç½‘ä¸‹è½½"><a href="#1ã€å®˜ç½‘ä¸‹è½½" class="headerlink" title="1ã€å®˜ç½‘ä¸‹è½½"></a>1ã€å®˜ç½‘ä¸‹è½½</h4><p><a href="http://tomcat.apache.org/" target="_blank" rel="noopener">http://tomcat.apache.org/</a></p><p>äº‘ç›˜èµ„æºï¼š<a href="https://pan.baidu.com/s/1e7OSIf3K9YpFCzXncMj_9Q" target="_blank" rel="noopener">apache-tomcat-7.0.61.tar</a></p><h4 id="2ã€ä¸Šä¼ å¹¶è§£å‹"><a href="#2ã€ä¸Šä¼ å¹¶è§£å‹" class="headerlink" title="2ã€ä¸Šä¼ å¹¶è§£å‹"></a>2ã€ä¸Šä¼ å¹¶è§£å‹</h4><blockquote><p>tar -zvxf  apache-tomcat-7.0.61.tar</p></blockquote><h4 id="3ã€å¯åŠ¨tomcat"><a href="#3ã€å¯åŠ¨tomcat" class="headerlink" title="3ã€å¯åŠ¨tomcat"></a>3ã€å¯åŠ¨tomcat</h4><p>åœ¨tomcatçš„binç›®å½•ä¸‹æœ‰ä¸ªstartup.sh è„šæœ¬å¯ä»¥ç›´æ¥å¯åŠ¨tomcatæœåŠ¡</p><blockquote><p>./startup.sh</p></blockquote><h4 id="4ã€å…³é—­tomcatæœåŠ¡"><a href="#4ã€å…³é—­tomcatæœåŠ¡" class="headerlink" title="4ã€å…³é—­tomcatæœåŠ¡"></a>4ã€å…³é—­tomcatæœåŠ¡</h4><p>æ–¹å¼ä¸€ï¼šå¯ä»¥ç”¨shutdown.shå‘½ä»¤</p><p>æ–¹å¼äºŒï¼šps -ef | grep tomcat æŸ¥çœ‹å‡ºtomcatè¿›ç¨‹å·åï¼Œç”¨killå‘½ä»¤</p><h4 id="5ã€éªŒè¯"><a href="#5ã€éªŒè¯" class="headerlink" title="5ã€éªŒè¯"></a>5ã€éªŒè¯</h4><p>å…ˆæŠŠé˜²ç«å¢™å…³äº†ï¼ˆservice iptables stopï¼‰ï¼Œç„¶åè®¿é—®è™šæ‹ŸæœºIPçš„8080ç«¯å£</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç³»ç»Ÿå­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxç³»ç»ŸCentOS 6</title>
      <link href="/2019/01/11/Linux%E7%B3%BB%E7%BB%9FCentOS%206%E5%AE%89%E8%A3%85/"/>
      <url>/2019/01/11/Linux%E7%B3%BB%E7%BB%9FCentOS%206%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å®‰è£…"><a href="#ä¸€ã€å®‰è£…" class="headerlink" title="ä¸€ã€å®‰è£…"></a>ä¸€ã€å®‰è£…</h1><p> èµ„æºå‡†å¤‡ï¼š</p><p>CentOS-6.6-x86_64-minimal.isoï¼ˆç®€æ˜“è¿·ä½ ç‰ˆï¼‰ ï¼š</p><p>CentOS-6.7-x86_64-bin-DVD1.isoï¼ˆå®Œæ•´ç‰ˆï¼‰ï¼š</p><h2 id="1ã€ç‚¹å‡»æ–°å»ºè™šæ‹Ÿæœº"><a href="#1ã€ç‚¹å‡»æ–°å»ºè™šæ‹Ÿæœº" class="headerlink" title="1ã€ç‚¹å‡»æ–°å»ºè™šæ‹Ÿæœº"></a>1ã€ç‚¹å‡»æ–°å»ºè™šæ‹Ÿæœº</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps46F1.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="2ã€é€‰æ‹©å…¸å‹ã€‚ï¼ˆä¸“ä¸šäººå£«ä½¿ç”¨çš„è¯å»ºè®®é€‰æ‹©é«˜çº§ï¼‰"><a href="#2ã€é€‰æ‹©å…¸å‹ã€‚ï¼ˆä¸“ä¸šäººå£«ä½¿ç”¨çš„è¯å»ºè®®é€‰æ‹©é«˜çº§ï¼‰" class="headerlink" title="2ã€é€‰æ‹©å…¸å‹ã€‚ï¼ˆä¸“ä¸šäººå£«ä½¿ç”¨çš„è¯å»ºè®®é€‰æ‹©é«˜çº§ï¼‰"></a>2ã€é€‰æ‹©å…¸å‹ã€‚ï¼ˆä¸“ä¸šäººå£«ä½¿ç”¨çš„è¯å»ºè®®é€‰æ‹©é«˜çº§ï¼‰</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps46F2.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="3-é€‰æ‹©ç¨åå®‰è£…æ“ä½œç³»ç»Ÿ"><a href="#3-é€‰æ‹©ç¨åå®‰è£…æ“ä½œç³»ç»Ÿ" class="headerlink" title="3. é€‰æ‹©ç¨åå®‰è£…æ“ä½œç³»ç»Ÿ"></a>3. é€‰æ‹©ç¨åå®‰è£…æ“ä½œç³»ç»Ÿ</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps46F3.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="4-é€‰æ‹©æ“ä½œç³»ç»Ÿç±»å‹ï¼Œé€‰æ‹©linux-centos-64ä½"><a href="#4-é€‰æ‹©æ“ä½œç³»ç»Ÿç±»å‹ï¼Œé€‰æ‹©linux-centos-64ä½" class="headerlink" title="4. é€‰æ‹©æ“ä½œç³»ç»Ÿç±»å‹ï¼Œé€‰æ‹©linux,centos 64ä½"></a>4. é€‰æ‹©æ“ä½œç³»ç»Ÿç±»å‹ï¼Œé€‰æ‹©linux,centos 64ä½</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps46F4.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="5-é€‰æ‹©è™šæ‹Ÿæœºå®‰è£…ä½ç½®å’Œåç§°ã€‚"><a href="#5-é€‰æ‹©è™šæ‹Ÿæœºå®‰è£…ä½ç½®å’Œåç§°ã€‚" class="headerlink" title="5. é€‰æ‹©è™šæ‹Ÿæœºå®‰è£…ä½ç½®å’Œåç§°ã€‚"></a>5. é€‰æ‹©è™šæ‹Ÿæœºå®‰è£…ä½ç½®å’Œåç§°ã€‚</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps46F5.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="6-æŒ‡å®šç£ç›˜å®¹é‡ï¼Œé»˜è®¤20GBã€‚"><a href="#6-æŒ‡å®šç£ç›˜å®¹é‡ï¼Œé»˜è®¤20GBã€‚" class="headerlink" title="6. æŒ‡å®šç£ç›˜å®¹é‡ï¼Œé»˜è®¤20GBã€‚"></a>6. æŒ‡å®šç£ç›˜å®¹é‡ï¼Œé»˜è®¤20GBã€‚</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4706.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="7-é€‰æ‹©è‡ªå®šä¹‰ç¡¬ä»¶"><a href="#7-é€‰æ‹©è‡ªå®šä¹‰ç¡¬ä»¶" class="headerlink" title="7. é€‰æ‹©è‡ªå®šä¹‰ç¡¬ä»¶"></a>7. é€‰æ‹©è‡ªå®šä¹‰ç¡¬ä»¶</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4707.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="8-ç‚¹å‡»CD-DVD-ç„¶åé€‰æ‹©æ“ä½œç³»ç»Ÿçš„ISOæ˜ åƒæ–‡ä»¶ï¼Œé€‰æ‹©å®Œåï¼Œç‚¹å‡»å…³é—­ã€‚"><a href="#8-ç‚¹å‡»CD-DVD-ç„¶åé€‰æ‹©æ“ä½œç³»ç»Ÿçš„ISOæ˜ åƒæ–‡ä»¶ï¼Œé€‰æ‹©å®Œåï¼Œç‚¹å‡»å…³é—­ã€‚" class="headerlink" title="8. ç‚¹å‡»CD/DVD,ç„¶åé€‰æ‹©æ“ä½œç³»ç»Ÿçš„ISOæ˜ åƒæ–‡ä»¶ï¼Œé€‰æ‹©å®Œåï¼Œç‚¹å‡»å…³é—­ã€‚"></a>8. ç‚¹å‡»CD/DVD,ç„¶åé€‰æ‹©æ“ä½œç³»ç»Ÿçš„ISOæ˜ åƒæ–‡ä»¶ï¼Œé€‰æ‹©å®Œåï¼Œç‚¹å‡»å…³é—­ã€‚</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4708.tmp.jpg" alt="img"><span class="img-alt">img</span>  </p><h2 id="9-ç‚¹å‡»å®Œæˆã€‚"><a href="#9-ç‚¹å‡»å®Œæˆã€‚" class="headerlink" title="9.ç‚¹å‡»å®Œæˆã€‚"></a>9.ç‚¹å‡»å®Œæˆã€‚</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4709.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h1 id="äºŒã€é…ç½®è™šæ‹Ÿæœº"><a href="#äºŒã€é…ç½®è™šæ‹Ÿæœº" class="headerlink" title="äºŒã€é…ç½®è™šæ‹Ÿæœº"></a>äºŒã€<strong>é…ç½®è™šæ‹Ÿæœº</strong></h1><h2 id="1-å¯åŠ¨è™šæ‹Ÿæœºã€‚"><a href="#1-å¯åŠ¨è™šæ‹Ÿæœºã€‚" class="headerlink" title="1. å¯åŠ¨è™šæ‹Ÿæœºã€‚"></a>1. å¯åŠ¨è™šæ‹Ÿæœºã€‚<img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps470A.tmp.jpg" alt="img"><span class="img-alt">img</span></h2><p>æ³¨æ„ï¼šå¦‚æœå¯åŠ¨è™šæ‹Ÿæœºæ—¶ï¼Œå‘ç”Ÿä»¥ä¸‹é—®é¢˜ï¼Œè¯´æ˜æ˜¯ä½ çš„ç”µè„‘é»˜è®¤æœªå¼€å¯è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps470B.tmp.png" alt="img"><span class="img-alt">img</span> </p><p>æ­¤æ—¶ä½ åº”è¯¥æŠŠæœºå™¨é‡å¯å¹¶è¿›å…¥biosç•Œé¢ï¼ˆä¸åŒçš„æœºå™¨è¿›å…¥biosç•Œé¢çš„å¿«æ·é”®ä¸åŒï¼Œä¸€èˆ¬ä¸ºF1~F10é”®ä¸­çš„æŸä¸ªé”®ï¼Œå¦‚æœéƒ½ä¸è¡Œï¼Œå°±å¾—è‡ªå·±ç™¾åº¦ä¸€ä¸‹ä½ çš„æœºå™¨å‹å·è¿›å…¥biosç•Œé¢çš„å¿«æ·æ–¹å¼ï¼‰ã€‚</p><p>â€‹    å½“è¿›å…¥biosç•Œé¢åï¼ŒæŠŠè™šæ‹ŸæœºåŒ–é€‰é¡¹ï¼ˆvirtualization technologyï¼‰æ‰“å¼€,é€šè¿‡å›è½¦é”®ï¼ŒæŠŠdisabledæ”¹æˆenabled,ç„¶åä¿å­˜å¹¶é‡å¯æœºå™¨ã€‚æˆ‘è¿™è¾¹æ˜¯æŒ‰F10ï¼Œä¸åŒæœºå™¨å¯èƒ½ä¸ä¸€æ ·ï¼Œçœ‹å³ä¸‹è§’çš„æç¤ºä¿¡æ¯ã€‚</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps470C.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="2-Test-Media-å¦‚æœä¸éœ€è¦çš„è¯ï¼Œç‚¹Skip"><a href="#2-Test-Media-å¦‚æœä¸éœ€è¦çš„è¯ï¼Œç‚¹Skip" class="headerlink" title="2.Test Media, å¦‚æœä¸éœ€è¦çš„è¯ï¼Œç‚¹Skip"></a>2.Test Media, å¦‚æœä¸éœ€è¦çš„è¯ï¼Œç‚¹Skip</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps471C.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="3ã€å•å‡»NextæŒ‰é’®ç»§ç»­"><a href="#3ã€å•å‡»NextæŒ‰é’®ç»§ç»­" class="headerlink" title="3ã€å•å‡»NextæŒ‰é’®ç»§ç»­"></a>3ã€å•å‡»NextæŒ‰é’®ç»§ç»­</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps471D.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="4-é€‰æ‹©å®‰è£…æœŸé—´æ˜¾ç¤ºçš„è¯­è¨€"><a href="#4-é€‰æ‹©å®‰è£…æœŸé—´æ˜¾ç¤ºçš„è¯­è¨€" class="headerlink" title="4. é€‰æ‹©å®‰è£…æœŸé—´æ˜¾ç¤ºçš„è¯­è¨€"></a>4. é€‰æ‹©å®‰è£…æœŸé—´æ˜¾ç¤ºçš„è¯­è¨€</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps471E.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="5ã€é€‰æ‹©é”®ç›˜è¯­è¨€"><a href="#5ã€é€‰æ‹©é”®ç›˜è¯­è¨€" class="headerlink" title="5ã€é€‰æ‹©é”®ç›˜è¯­è¨€"></a>5ã€é€‰æ‹©é”®ç›˜è¯­è¨€</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps471F.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="6ã€é€‰æ‹©å­˜å‚¨ä»‹è´¨çš„ç±»åˆ«ã€‚"><a href="#6ã€é€‰æ‹©å­˜å‚¨ä»‹è´¨çš„ç±»åˆ«ã€‚" class="headerlink" title="6ã€é€‰æ‹©å­˜å‚¨ä»‹è´¨çš„ç±»åˆ«ã€‚"></a>6ã€é€‰æ‹©å­˜å‚¨ä»‹è´¨çš„ç±»åˆ«ã€‚</h2><p>å¦‚æœæ˜¯å°†CentOS 6å®‰è£…åˆ°æœ¬åœ°ç¡¬ç›˜ä¸Šï¼Œé€‰æ‹© Basic Storage Devicesï¼Œå¦‚æœå®‰è£…åˆ°ç½‘ç»œå­˜å‚¨ä»‹è´¨å¦‚SANsä¸Šï¼Œé€‰æ‹© Specialized Storage Devices</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4720.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="7-é€‰æ‹©-yes-discard-any-data"><a href="#7-é€‰æ‹©-yes-discard-any-data" class="headerlink" title="7.é€‰æ‹© yes,discard any data"></a>7.é€‰æ‹© yes,discard any data</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4721.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="8-è®¾å®šä¸»æœºåç§°ï¼ˆhostnameï¼‰"><a href="#8-è®¾å®šä¸»æœºåç§°ï¼ˆhostnameï¼‰" class="headerlink" title="8. è®¾å®šä¸»æœºåç§°ï¼ˆhostnameï¼‰"></a>8. è®¾å®šä¸»æœºåç§°ï¼ˆhostnameï¼‰</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4722.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="9-è®¾å®šæ—¶åŒºï¼Œé€‰æ‹©-Asia-Shanghai"><a href="#9-è®¾å®šæ—¶åŒºï¼Œé€‰æ‹©-Asia-Shanghai" class="headerlink" title="9. è®¾å®šæ—¶åŒºï¼Œé€‰æ‹© Asia/Shanghai"></a>9. è®¾å®šæ—¶åŒºï¼Œé€‰æ‹© Asia/Shanghai</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4723.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="10-è®¾å®šrootå¸æˆ·çš„å¯†ç "><a href="#10-è®¾å®šrootå¸æˆ·çš„å¯†ç " class="headerlink" title="10. è®¾å®šrootå¸æˆ·çš„å¯†ç "></a>10. è®¾å®šrootå¸æˆ·çš„å¯†ç </h2><p>å°½é‡ä½¿ç”¨è¾ƒå¤æ‚çš„å¯†ç å®‰è£…ï¼ˆæ ¹æ®å®é™…æƒ…å†µï¼Œå¯†ç ç®€å•æ—¶ï¼Œä¼šæœ‰æç¤ºï¼Œç‚¹å‡»user anyway å°±è¡Œï¼‰</p><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4734.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="11-é€‰æ‹©å®‰è£…ç±»å‹ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©-â€œUse-All-Spaceâ€"><a href="#11-é€‰æ‹©å®‰è£…ç±»å‹ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©-â€œUse-All-Spaceâ€" class="headerlink" title="11. é€‰æ‹©å®‰è£…ç±»å‹ï¼Œè¿™é‡Œæˆ‘é€‰æ‹© â€œUse All Spaceâ€"></a>11. é€‰æ‹©å®‰è£…ç±»å‹ï¼Œè¿™é‡Œæˆ‘é€‰æ‹© â€œUse All Spaceâ€</h2><p> <img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4735.tmp.jpg" alt="img"><span class="img-alt">img</span></p><h2 id="12-é€‰æ‹©-â€œWrite-changes-to-diskâ€ï¼Œå°†åˆ†åŒºæ•°æ®å†™å…¥ç¡¬ç›˜"><a href="#12-é€‰æ‹©-â€œWrite-changes-to-diskâ€ï¼Œå°†åˆ†åŒºæ•°æ®å†™å…¥ç¡¬ç›˜" class="headerlink" title="12. é€‰æ‹© â€œWrite changes to diskâ€ï¼Œå°†åˆ†åŒºæ•°æ®å†™å…¥ç¡¬ç›˜"></a>12. é€‰æ‹© â€œWrite changes to diskâ€ï¼Œå°†åˆ†åŒºæ•°æ®å†™å…¥ç¡¬ç›˜</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4736.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="13-å¼€å§‹å®‰è£…ï¼Œæ­¤æ—¶åªéœ€ç­‰å¾…å³å¯"><a href="#13-å¼€å§‹å®‰è£…ï¼Œæ­¤æ—¶åªéœ€ç­‰å¾…å³å¯" class="headerlink" title="13. å¼€å§‹å®‰è£…ï¼Œæ­¤æ—¶åªéœ€ç­‰å¾…å³å¯"></a>13. å¼€å§‹å®‰è£…ï¼Œæ­¤æ—¶åªéœ€ç­‰å¾…å³å¯</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4737.tmp.jpg" alt="img"><span class="img-alt">img</span> </p><h2 id="14-å®‰è£…å®Œç»“åï¼Œç‚¹å‡»RebootæŒ‰é’®"><a href="#14-å®‰è£…å®Œç»“åï¼Œç‚¹å‡»RebootæŒ‰é’®" class="headerlink" title="14. å®‰è£…å®Œç»“åï¼Œç‚¹å‡»RebootæŒ‰é’®"></a>14. å®‰è£…å®Œç»“åï¼Œç‚¹å‡»RebootæŒ‰é’®</h2><p><img src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps4738.tmp.jpg" alt="img"><span class="img-alt">img</span> </p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS 6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hiveå­¦ä¹ </title>
      <link href="/2019/01/11/Hive%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/11/Hive%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Hiveæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€Hiveæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€Hiveæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€Hiveæ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="1ã€åŸºäº-Hadoop-çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·"><a href="#1ã€åŸºäº-Hadoop-çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·" class="headerlink" title="1ã€åŸºäº Hadoop çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·"></a>1ã€åŸºäº Hadoop çš„ä¸€ä¸ª<code>æ•°æ®ä»“åº“å·¥å…·</code></h3><ul><li>å¯ä»¥å°†<code>ç»“æ„åŒ–</code>çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ <code>hiveæ•°æ®åº“è¡¨</code>ï¼›</li><li>è¿™å¼ Hiveæ•°æ®åº“è¡¨ä¿å­˜ä¸äº†metadataå…ƒæ•°æ®ä¿¡æ¯ï¼Œè€Œæ˜¯å°†metadataå­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜ä¸Šçš„MySQLï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰ä¸­</li><li>å¹¶æä¾›ç®€å•çš„ sql æŸ¥è¯¢åŠŸèƒ½ï¼›</li><li>å¯ä»¥å°† sql è¯­å¥è½¬æ¢ä¸º MapReduce ä»»åŠ¡è¿›è¡Œè¿è¡Œã€‚</li></ul><h3 id="2ã€å¿«é€Ÿå®ç°ç®€å•çš„MapReduce-ç»Ÿè®¡çš„å·¥å…·"><a href="#2ã€å¿«é€Ÿå®ç°ç®€å•çš„MapReduce-ç»Ÿè®¡çš„å·¥å…·" class="headerlink" title="2ã€å¿«é€Ÿå®ç°ç®€å•çš„MapReduce ç»Ÿè®¡çš„å·¥å…·"></a>2ã€å¿«é€Ÿå®ç°ç®€å•çš„MapReduce ç»Ÿè®¡çš„å·¥å…·</h3><ul><li>æ–¹ä¾¿éJavaç¼–ç¨‹è€…å¯¹HDFSçš„æ•°æ®åšmapreduceæ“ä½œï¼›</li><li>å­¦ä¹ æˆæœ¬ä½ï¼Œååˆ†é€‚åˆæ•°æ®ä»“åº“çš„ç»Ÿè®¡åˆ†æã€‚</li></ul><h3 id="3ã€ä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“ï¼Ÿ"><a href="#3ã€ä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“ï¼Ÿ" class="headerlink" title="3ã€ä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“ï¼Ÿ"></a>3ã€ä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“ï¼Ÿ</h3><ul><li>Data Warehouse(DW æˆ–DWHï¼‰æ˜¯ä¸ºä¼ä¸šæ‰€æœ‰çº§åˆ«çš„å†³ç­–åˆ¶å®šè¿‡ç¨‹ï¼Œæä¾›æ‰€æœ‰ç±»å‹æ•°æ®æ”¯æŒçš„æˆ˜ç•¥é›†åˆã€‚</li><li>å•ä¸ªæ•°æ®å­˜å‚¨ï¼Œå‡ºäºåˆ†ææ€§æŠ¥å‘Šå’Œå†³ç­–æ”¯æŒç›®çš„è€Œåˆ›å»ºã€‚</li><li>ä¸ºéœ€è¦ä¸šåŠ¡æ™ºèƒ½çš„ä¼ä¸šï¼Œæä¾›æŒ‡å¯¼ä¸šåŠ¡æµç¨‹æ”¹è¿›ã€ç›‘è§†æ—¶é—´ã€æˆæœ¬ã€è´¨é‡ä»¥åŠæ§åˆ¶.</li><li><strong>æ•°æ®ä»“åº“</strong>æ˜¯ç”¨æ¥åš<strong>æŸ¥è¯¢åˆ†æçš„æ•°æ®åº“</strong>ï¼Œ<strong>åŸºæœ¬ä¸ç”¨æ¥åšæ’å…¥ï¼Œä¿®æ”¹ï¼Œåˆ é™¤æ“ä½œ</strong>ã€‚</li></ul><h3 id="4ã€æ•°æ®å¤„ç†çš„ä¸¤å¤§åˆ†ç±»"><a href="#4ã€æ•°æ®å¤„ç†çš„ä¸¤å¤§åˆ†ç±»" class="headerlink" title="4ã€æ•°æ®å¤„ç†çš„ä¸¤å¤§åˆ†ç±»"></a>4ã€æ•°æ®å¤„ç†çš„ä¸¤å¤§åˆ†ç±»</h3><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz2wawi0ujj30h106c0tg.jpg" alt="oltp+olap"><span class="img-alt">oltp+olap</span></p><ul><li><h4 id="è”æœºäº‹åŠ¡å¤„ç†OLTPï¼ˆon-line-transaction-processingï¼‰"><a href="#è”æœºäº‹åŠ¡å¤„ç†OLTPï¼ˆon-line-transaction-processingï¼‰" class="headerlink" title="è”æœºäº‹åŠ¡å¤„ç†OLTPï¼ˆon-line transaction processingï¼‰"></a>è”æœºäº‹åŠ¡å¤„ç†OLTPï¼ˆon-line transaction processingï¼‰</h4></li></ul><blockquote><p>OLTPæ˜¯ä¼ ç»Ÿçš„å…³ç³»å‹<a href="http://lib.csdn.net/base/mysql" target="_blank" rel="noopener">æ•°æ®åº“</a>çš„ä¸»è¦åº”ç”¨ï¼Œä¸»è¦æ˜¯åŸºæœ¬çš„ã€æ—¥å¸¸çš„äº‹åŠ¡å¤„ç†ï¼Œä¾‹å¦‚é“¶è¡Œäº¤æ˜“ã€‚</p><p>OLTPç³»ç»Ÿå¼ºè°ƒæ•°æ®åº“å†…å­˜æ•ˆç‡ï¼Œå¼ºè°ƒå†…å­˜å„ç§æŒ‡æ ‡çš„å‘½ä»¤ç‡ï¼Œå¼ºè°ƒç»‘å®šå˜é‡ï¼Œå¼ºè°ƒå¹¶å‘æ“ä½œï¼›</p></blockquote><ul><li><h4 id="è”æœºåˆ†æå¤„ç†OLAPï¼ˆOn-Line-Analytical-Processingï¼‰"><a href="#è”æœºåˆ†æå¤„ç†OLAPï¼ˆOn-Line-Analytical-Processingï¼‰" class="headerlink" title="è”æœºåˆ†æå¤„ç†OLAPï¼ˆOn-Line Analytical Processingï¼‰"></a>è”æœºåˆ†æå¤„ç†OLAPï¼ˆOn-Line Analytical Processingï¼‰</h4></li></ul><blockquote><p>OLAPæ˜¯æ•°æ®ä»“åº“ç³»ç»Ÿçš„ä¸»è¦åº”ç”¨ï¼Œæ”¯æŒå¤æ‚çš„åˆ†ææ“ä½œï¼Œä¾§é‡å†³ç­–æ”¯æŒï¼Œå¹¶ä¸”æä¾›ç›´è§‚æ˜“æ‡‚çš„æŸ¥è¯¢ç»“æœã€‚</p><p>OLAPç³»ç»Ÿåˆ™å¼ºè°ƒæ•°æ®åˆ†æï¼Œå¼ºè°ƒSQLæ‰§è¡Œå¸‚åœºï¼Œå¼ºè°ƒç£ç›˜I/Oï¼Œå¼ºè°ƒåˆ†åŒºç­‰ã€‚</p></blockquote><ul><li>æ•°æ®æ–‡ä»¶æŒ‰ç»“æ„çš„åˆ†ç±»</li></ul><blockquote><p>ç»“æ„åŒ–æ•°æ®ï¼šå…³ç³»å‹</p><p>åŠç»“æ„åŒ–æ•°æ®ï¼šK-V</p><p>æ¾æ•£å‹ï¼š</p></blockquote><h2 id="äºŒã€Hiveæ¶æ„åŸç†"><a href="#äºŒã€Hiveæ¶æ„åŸç†" class="headerlink" title="äºŒã€Hiveæ¶æ„åŸç†"></a>äºŒã€Hiveæ¶æ„åŸç†</h2><p>ç”¨æˆ·æ¥å£ä¸»è¦æœ‰ä¸‰ä¸ªï¼šCLIï¼ŒClient å’Œ WUIã€‚</p><h2 id="ä¸‰ã€Hiveæ­å»ºåŠä¸‰ç§æ¨¡å¼"><a href="#ä¸‰ã€Hiveæ­å»ºåŠä¸‰ç§æ¨¡å¼" class="headerlink" title="ä¸‰ã€Hiveæ­å»ºåŠä¸‰ç§æ¨¡å¼"></a>ä¸‰ã€Hiveæ­å»ºåŠä¸‰ç§æ¨¡å¼</h2><h3 id="1ã€Hiveçš„å®‰è£…é…ç½®ï¼š"><a href="#1ã€Hiveçš„å®‰è£…é…ç½®ï¼š" class="headerlink" title="1ã€Hiveçš„å®‰è£…é…ç½®ï¼š"></a>1ã€Hiveçš„å®‰è£…é…ç½®ï¼š</h3><h4 id="ï¼ˆ1ï¼‰åŸºæœ¬ç¯å¢ƒï¼šHadoopé›†ç¾¤ç¯å¢ƒï¼ˆè‡³å°‘3ä¸ªèŠ‚ç‚¹ï¼‰"><a href="#ï¼ˆ1ï¼‰åŸºæœ¬ç¯å¢ƒï¼šHadoopé›†ç¾¤ç¯å¢ƒï¼ˆè‡³å°‘3ä¸ªèŠ‚ç‚¹ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰åŸºæœ¬ç¯å¢ƒï¼šHadoopé›†ç¾¤ç¯å¢ƒï¼ˆè‡³å°‘3ä¸ªèŠ‚ç‚¹ï¼‰"></a>ï¼ˆ1ï¼‰åŸºæœ¬ç¯å¢ƒï¼šHadoopé›†ç¾¤ç¯å¢ƒï¼ˆè‡³å°‘3ä¸ªèŠ‚ç‚¹ï¼‰</h4><blockquote><p><strong>Hive</strong>æ˜¯ä¾èµ–äºhadoopç³»ç»Ÿçš„ï¼Œå› æ­¤åœ¨è¿è¡ŒHiveä¹‹å‰éœ€è¦ä¿è¯å·²ç»æ­å»ºå¥½hadoopé›†ç¾¤ç¯å¢ƒã€‚</p></blockquote><h4 id="ï¼ˆ2ï¼‰å®‰è£…ä¸€ä¸ªå…³ç³»å‹æ•°æ®mysql"><a href="#ï¼ˆ2ï¼‰å®‰è£…ä¸€ä¸ªå…³ç³»å‹æ•°æ®mysql" class="headerlink" title="ï¼ˆ2ï¼‰å®‰è£…ä¸€ä¸ªå…³ç³»å‹æ•°æ®mysql"></a>ï¼ˆ2ï¼‰å®‰è£…ä¸€ä¸ªå…³ç³»å‹æ•°æ®mysql</h4><blockquote><p>å› ä¸ºHiveæ•°æ®ä»“åº“çš„å…ƒæ•°æ®ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨æœ¬åœ°ç£ç›˜çš„å…³ç³»æ•°æ®åº“ä¸Šçš„</p></blockquote><p><code>å®‰è£…æ­¥éª¤</code>ï¼šè¯¦è§  â€œLinuxç³»ç»Ÿæ•°æ®åº“MySQLå®‰è£….mdâ€</p><h4 id="ï¼ˆ3ï¼‰è§£å‹å®‰è£…ï¼ˆæŒ‰éœ€åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šï¼‰"><a href="#ï¼ˆ3ï¼‰è§£å‹å®‰è£…ï¼ˆæŒ‰éœ€åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰è§£å‹å®‰è£…ï¼ˆæŒ‰éœ€åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šï¼‰"></a>ï¼ˆ3ï¼‰è§£å‹å®‰è£…ï¼ˆæŒ‰éœ€åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šï¼‰</h4><blockquote><p>è§£å‹apache-hive-1.2.1-bin.tar.gz</p></blockquote><h4 id="ï¼ˆ4ï¼‰è¿½åŠ é…ç½®ç¯å¢ƒå˜é‡"><a href="#ï¼ˆ4ï¼‰è¿½åŠ é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="ï¼ˆ4ï¼‰è¿½åŠ é…ç½®ç¯å¢ƒå˜é‡"></a>ï¼ˆ4ï¼‰è¿½åŠ é…ç½®ç¯å¢ƒå˜é‡</h4><blockquote><p>vim ~/.bash_profile</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HIVE_HOME=Hiveçš„è§£å‹è·¯å¾„</span><br><span class="line"></span><br><span class="line">HIVE_HOME=/usr/soft/apache-hive-1.2.1-bin</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰æ›¿æ¢å’Œæ·»åŠ ç›¸å…³jaråŒ…"><a href="#ï¼ˆ5ï¼‰æ›¿æ¢å’Œæ·»åŠ ç›¸å…³jaråŒ…" class="headerlink" title="ï¼ˆ5ï¼‰æ›¿æ¢å’Œæ·»åŠ ç›¸å…³jaråŒ…"></a>ï¼ˆ5ï¼‰æ›¿æ¢å’Œæ·»åŠ ç›¸å…³jaråŒ…</h4><blockquote><ul><li><p>ä¿®æ”¹HADOOP_HOME/share/hadoop/yarn/libç›®å½•ä¸‹çš„jline-*.jar </p><p>å°†å…¶æ›¿æ¢æˆHIVE_HOME/libä¸‹çš„jline-2.12.jarã€‚ </p></li></ul></blockquote><blockquote><ul><li><p>â€“å°†å¦‚ä¸‹(<code>hiveè¿æ¥mysql)</code>çš„jaråŒ…æ‹·è´åˆ°hiveè§£å‹ç›®å½•çš„libç›®å½•ä¸‹</p><p>mysql-connector-java-5.1.32-bin.jar</p></li></ul></blockquote><h4 id="ï¼ˆ6ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆé€‰æ‹©3ç§æ¨¡å¼é‡Œå“ªä¸€ç§ï¼‰"><a href="#ï¼ˆ6ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆé€‰æ‹©3ç§æ¨¡å¼é‡Œå“ªä¸€ç§ï¼‰" class="headerlink" title="ï¼ˆ6ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆé€‰æ‹©3ç§æ¨¡å¼é‡Œå“ªä¸€ç§ï¼‰"></a>ï¼ˆ6ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆé€‰æ‹©3ç§æ¨¡å¼é‡Œå“ªä¸€ç§ï¼‰</h4><p><code>è§ä¸‰ç§å®‰è£…æ¨¡å¼</code></p><h4 id="ï¼ˆ7ï¼‰å¯åŠ¨"><a href="#ï¼ˆ7ï¼‰å¯åŠ¨" class="headerlink" title="ï¼ˆ7ï¼‰å¯åŠ¨"></a>ï¼ˆ7ï¼‰å¯åŠ¨</h4><blockquote><p>hive </p></blockquote><h3 id="2ã€ä¸‰ç§æ¨¡å¼"><a href="#2ã€ä¸‰ç§æ¨¡å¼" class="headerlink" title="2ã€ä¸‰ç§æ¨¡å¼"></a>2ã€ä¸‰ç§æ¨¡å¼</h3><table><thead><tr><th>ä¸‰ç§æ¨¡å¼</th></tr></thead><tbody><tr><td>Aã€å†…åµŒæ¨¡å¼ï¼ˆå…ƒæ•°æ®ä¿å­˜åœ¨å†…åµŒçš„derbyä¸­ï¼Œå…è®¸ä¸€ä¸ªä¼šè¯é“¾æ¥ï¼Œå°è¯•å¤šä¸ªä¼šè¯é“¾æ¥æ—¶ä¼šæŠ¥é”™ï¼‰ã€äº†è§£ã€‘                                                                                                        Bã€æœ¬åœ°æ¨¡å¼ï¼ˆæœ¬åœ°å®‰è£…mysql æ›¿ä»£derbyå­˜å‚¨å…ƒæ•°æ®ï¼‰ã€é‡è¦ã€‘                                                                                  Cã€è¿œç¨‹æ¨¡å¼ï¼ˆè¿œç¨‹å®‰è£…mysql æ›¿ä»£derbyå­˜å‚¨å…ƒæ•°æ®ï¼‰ã€é‡è¦ã€‘</td></tr></tbody></table><h4 id="ï¼ˆ1ï¼‰å†…åµŒDerbyå•ç”¨æˆ·æ¨¡å¼ï¼ˆäº†è§£ï¼‰"><a href="#ï¼ˆ1ï¼‰å†…åµŒDerbyå•ç”¨æˆ·æ¨¡å¼ï¼ˆäº†è§£ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰å†…åµŒDerbyå•ç”¨æˆ·æ¨¡å¼ï¼ˆäº†è§£ï¼‰"></a>ï¼ˆ1ï¼‰å†…åµŒDerbyå•ç”¨æˆ·æ¨¡å¼ï¼ˆäº†è§£ï¼‰</h4><ul><li>å…ƒæ•°æ®æ˜¯å†…åµŒåœ¨Derbyæ•°æ®åº“ä¸­çš„ï¼Œåªèƒ½å…è®¸ä¸€ä¸ªä¼šè¯è¿æ¥ï¼Œæ•°æ®ä¼šå­˜æ”¾åˆ°HDFSä¸Šã€‚</li><li>å­˜å‚¨æ–¹å¼ç®€å•ï¼Œåªéœ€è¦hive-site.xml </li><li>æ³¨ï¼šä½¿ç”¨ derby<br>å­˜å‚¨æ–¹å¼æ—¶ï¼Œè¿è¡Œ hive ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ª derby æ–‡ä»¶å’Œä¸€ä¸ª<br>metastore_db</li></ul><p>hive-site.xml ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:derby:;databaseName=metastore_db;create=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.derby.jdbc.EmbeddedDriver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.local<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰æœ¬åœ°ç”¨æˆ·æ¨¡å¼ï¼ˆé‡è¦ï¼Œå¤šç”¨äºæœ¬åœ°å¼€å‘æµ‹è¯•ï¼‰"><a href="#ï¼ˆ2ï¼‰æœ¬åœ°ç”¨æˆ·æ¨¡å¼ï¼ˆé‡è¦ï¼Œå¤šç”¨äºæœ¬åœ°å¼€å‘æµ‹è¯•ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰æœ¬åœ°ç”¨æˆ·æ¨¡å¼ï¼ˆé‡è¦ï¼Œå¤šç”¨äºæœ¬åœ°å¼€å‘æµ‹è¯•ï¼‰"></a>ï¼ˆ2ï¼‰æœ¬åœ°ç”¨æˆ·æ¨¡å¼ï¼ˆ<code>é‡è¦</code>ï¼Œå¤šç”¨äºæœ¬åœ°å¼€å‘æµ‹è¯•ï¼‰</h4><table><thead><tr><th>ä¸åµŒå…¥å¼çš„åŒºåˆ«</th></tr></thead><tbody><tr><td><em> ä¸å†ä½¿ç”¨å†…åµŒçš„Derbyä½œä¸ºå…ƒæ•°æ®çš„å­˜å‚¨ä»‹è´¨ï¼Œè€Œæ˜¯ä½¿ç”¨å…¶ä»–æ•°æ®åº“æ¯”å¦‚MySQLæ¥å­˜å‚¨å…ƒæ•°æ®ä¸”æ˜¯ä¸€ä¸ªå¤šç”¨æˆ·çš„æ¨¡å¼ï¼Œè¿è¡Œå¤šä¸ªç”¨æˆ·clientè¿æ¥åˆ°ä¸€ä¸ªæ•°æ®åº“ä¸­ã€‚è¿™ç§æ–¹å¼ä¸€èˆ¬ä½œä¸ºå…¬å¸å†…éƒ¨åŒæ—¶ä½¿ç”¨Hiveã€‚                                                                                                                                                                               </em> è¿™é‡Œæœ‰ä¸€ä¸ªå‰æï¼Œæ¯ä¸€ä¸ªç”¨æˆ·å¿…é¡»è¦æœ‰å¯¹MySQLçš„è®¿é—®æƒåˆ©ï¼Œå³æ¯ä¸€ä¸ªå®¢æˆ·ç«¯ä½¿ç”¨è€…éœ€è¦çŸ¥é“MySQLçš„ç”¨æˆ·åå’Œå¯†ç æ‰è¡Œã€‚</td></tr></tbody></table><ul><li>éœ€è¦åœ¨æœ¬åœ°è¿è¡Œä¸€ä¸ª mysql æœåŠ¡å™¨</li><li>åœ¨node00ä¸Šï¼ˆä¸MySQLåœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼‰è§£å‹å®‰è£…Hive</li></ul><blockquote><p>MySQL      Hive      :  node00</p></blockquote><ul><li>éœ€è¦å°† mysql çš„ jar åŒ…ï¼ˆmysql-connector-java-5.1.32-bin.jarï¼‰æ‹·è´åˆ°$HIVE_HOME/lib ç›®å½•ä¸‹</li></ul><p>hive-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive_local/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.local<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://node00/hive_remote?createDatabaseIfNotExist=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰è¿œç¨‹æ¨¡å¼ï¼ˆé‡è¦ï¼‰"><a href="#ï¼ˆ3ï¼‰è¿œç¨‹æ¨¡å¼ï¼ˆé‡è¦ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰è¿œç¨‹æ¨¡å¼ï¼ˆé‡è¦ï¼‰"></a>ï¼ˆ3ï¼‰è¿œç¨‹æ¨¡å¼ï¼ˆé‡è¦ï¼‰</h4><ul><li><h5 id="remote-ä¸€ä½“"><a href="#remote-ä¸€ä½“" class="headerlink" title="remote ä¸€ä½“"></a>remote ä¸€ä½“</h5></li></ul><blockquote><p>å°†Hiveè§£å‹å®‰è£…ä¸MySQLä¸åŒçš„èŠ‚ç‚¹ä¸Š</p><p>MySQL  ï¼šnode00</p><p>Hive  ï¼š node02</p><p>éœ€è¦åœ¨ HiveæœåŠ¡å™¨å¯åŠ¨ metaæœåŠ¡</p></blockquote><p>hive-site.xml</p><p>(hadoop 2.6.5)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive1/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://node02:3306/hive?createDatabaseIfNotExist=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.local<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨hadoop5.Xç¯å¢ƒä¸‹è¿˜éœ€è¦æ·»åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://node01:9083<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>æ³¨</code><strong>ï¼š</strong>è¿™é‡ŒæŠŠhiveçš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ”¾åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šäº†ã€‚æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å¯ä»¥æ‹†å¼€</p><ul><li><h5 id="Remote-åˆ†å¼€-å…¬å¸ä¼ä¸šç»å¸¸ç”¨"><a href="#Remote-åˆ†å¼€-å…¬å¸ä¼ä¸šç»å¸¸ç”¨" class="headerlink" title="Remote åˆ†å¼€(å…¬å¸ä¼ä¸šç»å¸¸ç”¨)"></a>Remote åˆ†å¼€(å…¬å¸ä¼ä¸šç»å¸¸ç”¨)</h5></li></ul><p>å°† hive-site.xml é…ç½®æ–‡ä»¶æ‹†ä¸ºå¦‚ä¸‹ä¸¤éƒ¨åˆ†ï¼ˆæ­¤æ—¶ä¸ä¸MySQLåœ¨åŒä¸€å°èŠ‚ç‚¹ä¸Šï¼‰</p><blockquote><p>MySql  ï¼š   node00</p><p>æœåŠ¡ç«¯ ï¼š   node02</p><p>å®¢æˆ·ç«¯ ï¼š    node01</p></blockquote><p><strong>1</strong>ï¼‰ã€æœåŠ¡ç«¯é…ç½®æ–‡ä»¶ï¼ˆnode02ï¼‰</p><p>hive-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive2/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://node00:3306/hive?createDatabaseIfNotExist=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2</strong>ï¼‰ã€å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼ˆnode01ï¼‰</p><p> hive-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive2/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ³¨æ„è¿™é‡Œçš„è·¯å¾„è¦å’ŒæœåŠ¡ç«¯ä¸€è‡´---&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.local<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://node02:9083<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æœåŠ¡ç«¯å¯åŠ¨ hive ç¨‹åº hive â€“service metastore</strong></p><p><strong>å®¢æˆ·ç«¯ç›´æ¥ä½¿ç”¨ hive å‘½ä»¤å³å¯</strong></p><p>Hiveå¸¸è§é—®é¢˜æ€»æ±‡ï¼š<a href="http://blog.csdn.net/freedomboy319/article/details/44828337" target="_blank" rel="noopener">http://blog.csdn.net/freedomboy319/article/details/44828337</a></p><h2 id="å››ã€HQLè¯¦è§£"><a href="#å››ã€HQLè¯¦è§£" class="headerlink" title="å››ã€HQLè¯¦è§£"></a>å››ã€HQLè¯¦è§£</h2><p><code>Hql å°±æ˜¯HiveQlè¯­å¥</code></p><h3 id="1ã€DDLè¯­å¥ï¼ˆæ•°æ®åº“å®šä¹‰è¯­è¨€ï¼‰"><a href="#1ã€DDLè¯­å¥ï¼ˆæ•°æ®åº“å®šä¹‰è¯­è¨€ï¼‰" class="headerlink" title="1ã€DDLè¯­å¥ï¼ˆæ•°æ®åº“å®šä¹‰è¯­è¨€ï¼‰"></a>1ã€DDLè¯­å¥ï¼ˆæ•°æ®åº“å®šä¹‰è¯­è¨€ï¼‰</h3><h4 id="ï¼ˆ1ï¼‰å…·ä½“å‚è§ï¼šhttps-cwiki-apache-org-confluence-display-Hive-LanguageManual-DDL"><a href="#ï¼ˆ1ï¼‰å…·ä½“å‚è§ï¼šhttps-cwiki-apache-org-confluence-display-Hive-LanguageManual-DDL" class="headerlink" title="ï¼ˆ1ï¼‰å…·ä½“å‚è§ï¼šhttps://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL"></a>ï¼ˆ1ï¼‰å…·ä½“å‚è§ï¼š<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL</a></h4><p><code>Hiveçš„æ•°æ®å®šä¹‰è¯­è¨€</code> ï¼ˆ<a href="javascript:changelink(&#39;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL&#39;,&#39;EN2ZH_CN&#39;" target="_blank" rel="noopener">LanguageManual DDL</a>;)ï¼‰</p><p><strong><code>é‡ç‚¹</code> hive çš„å»ºè¡¨è¯­å¥å’Œåˆ†åŒºã€‚</strong></p><h4 id="ï¼ˆ2ï¼‰åˆ›å»º-åˆ é™¤-ä¿®æ”¹-ä½¿ç”¨æ•°æ®åº“"><a href="#ï¼ˆ2ï¼‰åˆ›å»º-åˆ é™¤-ä¿®æ”¹-ä½¿ç”¨æ•°æ®åº“" class="headerlink" title="ï¼ˆ2ï¼‰åˆ›å»º/åˆ é™¤/ä¿®æ”¹/ä½¿ç”¨æ•°æ®åº“"></a>ï¼ˆ2ï¼‰åˆ›å»º/åˆ é™¤/ä¿®æ”¹/ä½¿ç”¨æ•°æ®åº“</h4><ul><li><h5 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h5></li></ul><p>ï¼ˆHiveæ­å»ºå®Œæ¯•åï¼Œä¼šåˆ›å»ºä¸€ä¸ªé»˜è®¤çš„æ•°æ®åº“ï¼‰</p><blockquote><p>æŸ¥çœ‹    show databasesï¼›</p></blockquote><blockquote><p>CREATE (DATABASE|SCHEMA) [IF NOT EXISTS] database_name [COMMENT database_comment];</p><p>ä¸¾ä¾‹ï¼š</p><p>create database attribute;</p><p>create database attr;</p></blockquote><p><code>æ³¨æ„ï¼š</code>åˆ›å»ºæ•°æ®æ—¶ï¼Œæ•°æ®åº“åä¸è¦å’Œç³»ç»Ÿå…³é”®å­—å†²çªï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›</p><p>å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ï¼š</span><br><span class="line">hive&gt; create database out;</span><br><span class="line"></span><br><span class="line">æŠ¥é”™ï¼š</span><br><span class="line">FAILED: ParseException line 1:16 Failed to recognize predicate 'out'. Failed rule: 'identifier' in create database statement</span><br><span class="line"></span><br><span class="line">åŸå› ï¼š</span><br><span class="line">åœ¨Hive1.2.0ç‰ˆæœ¬å¼€å§‹å¢åŠ äº†å¦‚ä¸‹é…ç½®é€‰é¡¹ï¼Œé»˜è®¤å€¼ä¸ºtrueï¼š</span><br><span class="line"></span><br><span class="line">hive.support.sql11.reserved.keywords</span><br><span class="line"></span><br><span class="line">è¯¥é€‰é¡¹çš„ç›®çš„æ˜¯ï¼šæ˜¯å¦å¯ç”¨å¯¹SQL2011ä¿ç•™å…³é”®å­—çš„æ”¯æŒã€‚ å¯ç”¨åï¼Œå°†æ”¯æŒéƒ¨åˆ†SQL2011ä¿ç•™å…³é”®å­—ã€‚</span><br><span class="line"></span><br><span class="line">è§£å†³ï¼š</span><br><span class="line">æ³•ä¸€ï¼šå¼ƒç”¨è¿™ä¸ªå…³é”®å­—ï¼Œæ¢ä¸ªåå­—</span><br><span class="line">æ³•äºŒï¼šå¼ƒç”¨å¯¹ä¿ç•™å…³é”®å­—çš„æ”¯æŒ</span><br><span class="line">åœ¨confä¸‹çš„hive-site.xmlé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹é…ç½®é€‰é¡¹ï¼š</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.support.sql11.reserved.keywords<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><h5 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h5><blockquote><p>DROP (DATABASE|SCHEMA) [IF EXISTS] database_name;</p><p>ä¸¾ä¾‹ï¼š</p><p>drop database attribute;</p></blockquote></li></ul><ul><li>ä¿®æ”¹æ•°æ®åº“(äº†è§£)</li></ul><blockquote><p>ALTER (DATABASE|SCHEMA) database_name SET DBPROPERTIES (property_name=property_value, â€¦);</p><p>ALTER (DATABASE|SCHEMA) database_name SET OWNER [USER|ROLE] user_or_role; </p></blockquote><ul><li><h5 id="ä½¿ç”¨æ•°æ®åº“-ï¼ˆè¿›å…¥æŸä¸€æ•°æ®åº“ã€‚å¦‚æœæ²¡æœ‰è¿™æ­¥æ“ä½œï¼Œä¼šè¿›å…¥é»˜è®¤defaultæ•°æ®åº“ï¼‰"><a href="#ä½¿ç”¨æ•°æ®åº“-ï¼ˆè¿›å…¥æŸä¸€æ•°æ®åº“ã€‚å¦‚æœæ²¡æœ‰è¿™æ­¥æ“ä½œï¼Œä¼šè¿›å…¥é»˜è®¤defaultæ•°æ®åº“ï¼‰" class="headerlink" title="ä½¿ç”¨æ•°æ®åº“ ï¼ˆè¿›å…¥æŸä¸€æ•°æ®åº“ã€‚å¦‚æœæ²¡æœ‰è¿™æ­¥æ“ä½œï¼Œä¼šè¿›å…¥é»˜è®¤defaultæ•°æ®åº“ï¼‰"></a>ä½¿ç”¨æ•°æ®åº“ ï¼ˆè¿›å…¥æŸä¸€æ•°æ®åº“ã€‚å¦‚æœæ²¡æœ‰è¿™æ­¥æ“ä½œï¼Œä¼šè¿›å…¥é»˜è®¤defaultæ•°æ®åº“ï¼‰</h5></li></ul><blockquote><p>USE database_name;</p><p>ä¸¾ä¾‹ï¼š</p><p>use attrï¼›</p></blockquote><h4 id="ï¼ˆ3ï¼‰åˆ›å»º-åˆ é™¤-è¡¨ï¼ˆé‡ç‚¹ï¼‰"><a href="#ï¼ˆ3ï¼‰åˆ›å»º-åˆ é™¤-è¡¨ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰åˆ›å»º/åˆ é™¤/è¡¨ï¼ˆé‡ç‚¹ï¼‰"></a>ï¼ˆ3ï¼‰åˆ›å»º/åˆ é™¤/è¡¨ï¼ˆé‡ç‚¹ï¼‰</h4><ul><li><h5 id="åˆ›å»ºè¡¨ï¼ˆé‡è¦ï¼ï¼‰"><a href="#åˆ›å»ºè¡¨ï¼ˆé‡è¦ï¼ï¼‰" class="headerlink" title="åˆ›å»ºè¡¨ï¼ˆé‡è¦ï¼ï¼‰"></a>åˆ›å»ºè¡¨ï¼ˆé‡è¦ï¼ï¼‰</h5></li></ul><p>æ•°æ®ç±»å‹ï¼š</p><blockquote><p>data_type<br>  : <code>primitive_type  åŸå§‹æ•°æ®ç±»å‹</code><br>  | <code>array_type        æ•°ç»„</code><br>  | <code>map_type        map</code><br>  | struct_type<br>  | union_type  â€“ (Note: Available in Hive 0.7.0 and later)</p><p><em>primitive_type</em><br>  : TINYINT<br>  | SMALLINT<br>  | <code>INT</code><br>  | <code>BIGINT</code><br>  | BOOLEAN<br>  | FLOAT<br>  | <code>DOUBLE</code><br>  | DOUBLE PRECISION<br>  | <strong>STRING  åŸºæœ¬å¯ä»¥æå®šä¸€åˆ‡</strong><br>  | BINARY<br>  | TIMESTAMP<br>  | DECIMAL<br>  | DECIMAL(precision, scale)<br>  | <code>DATE</code><br>  | VARCHAR<br>  | CHAR  </p><p><em>array_type</em><br>  : <code>ARRAY &lt; data_type &gt;</code></p><p><em>map_type</em><br>  : <code>MAP &lt; primitive_type, data_type &gt;</code></p><p><em>struct_type</em><br>  : STRUCT &lt; col_name : data_type [COMMENT col_comment], â€¦&gt;</p><p><em>union_type</em><br>  : UNIONTYPE &lt; data_type, data_type, â€¦ &gt;  </p></blockquote><ul><li><h5 id="1ã€å‡†å¤‡æ•°æ®"><a href="#1ã€å‡†å¤‡æ•°æ®" class="headerlink" title="1ã€å‡†å¤‡æ•°æ®"></a>1ã€å‡†å¤‡æ•°æ®</h5></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1,zshang,18,game-girl-book,stu_addr:beijing-work_addr:shanghai</span><br><span class="line">2,lishi,16,shop-boy-book,stu_addr:hunan-work_addr:shanghai</span><br><span class="line">3,wang2mazi,20,fangniu-eat,stu_addr:shanghai-work_addr:tianjing</span><br></pre></td></tr></table></figure><ul><li><h5 id="2ã€åˆ›å»ºè¡¨"><a href="#2ã€åˆ›å»ºè¡¨" class="headerlink" title="2ã€åˆ›å»ºè¡¨"></a>2ã€åˆ›å»ºè¡¨</h5></li></ul><p>(å¦‚æœæ²¡æœ‰æŒ‡å®šè¿›å…¥æŸä¸€æ•°æ®åº“ï¼Œå°±ä¼šåœ¨é»˜è®¤æ•°æ®åº“ä¸­åˆ›å»º)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table log(</span><br><span class="line"> id int,</span><br><span class="line"> name string,</span><br><span class="line"> age int,</span><br><span class="line"> likes array&lt;string&gt;,</span><br><span class="line"> address map&lt;string,string&gt;</span><br><span class="line"> )</span><br><span class="line"> row format delimited fields terminated by &apos;,&apos;</span><br><span class="line"> COLLECTION ITEMS TERMINATED by &apos;-&apos;</span><br><span class="line"> map keys terminated by &apos;:&apos;</span><br><span class="line"> lines terminated by &apos;\n&apos;;</span><br></pre></td></tr></table></figure><ul><li><strong>å¯¼å…¥æ•°æ®</strong>ï¼ˆå±äºDMLä½†æ˜¯ä¸ºäº†æ¼”ç¤ºéœ€è¦åœ¨æ­¤åº”ç”¨ï¼‰</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA [LOCAL] INPATH &apos;filepath&apos; [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)]</span><br><span class="line"></span><br><span class="line"> [LOCAL]:ä»æœ¬åœ°  |  è‹¥æ— ï¼Œåˆ™ä¸ºä»HDFS</span><br><span class="line"> [OVERWRITE]  ï¼š ä¼šè¦†ç›–Hiveè¡¨ä¸­çš„æ•°æ®   | è‹¥æ— åˆ™ä¼šè¿½åŠ </span><br><span class="line"> </span><br><span class="line"> [PARTITION....] ï¼š åˆ›å»ºåˆ†åŒº</span><br></pre></td></tr></table></figure><blockquote><p>å°†log1æ–‡ä»¶ä¸­çš„æ•°æ®å¡«åŠ åˆ°logè¡¨ä¸­</p><p>ï¼ˆlog1ä¸­æ•°æ®çš„æ ¼å¼è¦å’Œlogè¡¨æ ¼å¼ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¼šä¹±ï¼›è‹¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨é‡å‘½åï¼‰</p><ul><li>æœ¬åœ°åŠ è½½ï¼ˆç›¸å½“äºå¤åˆ¶ï¼‰æ•°æ®åˆ°Hiveçš„åˆ¶å®šè¡¨ä¸­</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LOAD DATA LOCAL INPATH &apos;/root/su/log1&apos; INTO TABLE log;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><ul><li>HDFSåŠ è½½ï¼ˆç›¸å½“äºå‰ªåˆ‡ï¼‰æ•°æ®åˆ°Hiveçš„åˆ¶å®šè¡¨ä¸­</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; LOAD DATA INPATH &apos;/root/su/log1&apos; INTO TABLE log ;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote></blockquote><ul><li>æŸ¥çœ‹è¡¨ä¸­æ•°æ®</li></ul><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; å¯¹æœ¬è¡¨æŸ¥è¯¢ä¸ä¼šäº§ç”ŸMapReduceä»»åŠ¡</span><br><span class="line">&gt; hive&gt; select * from log;</span><br><span class="line">&gt; ä½¿ç”¨å‡½æ•°æŸ¥è¯¢ä¼šäº§ç”ŸMapReduceä»»åŠ¡</span><br><span class="line">&gt; hive&gt; select count(*) from log;</span><br><span class="line">&gt; æŸ¥è¯¢è¡¨çš„å­—æ®µä¿¡æ¯</span><br><span class="line">&gt; hive&gt; desc log;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>ç¬¬ä¸€ä¸ªæŸ¥è¯¢ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1zshang18[&quot;game&quot;,&quot;girl&quot;,&quot;book&quot;]&#123;&quot;stu_addr&quot;:&quot;beijing&quot;,&quot;work_addr&quot;:&quot;shanghai&quot;&#125;</span><br><span class="line">1zhaoliu18[&quot;game&quot;,&quot;girl&quot;,&quot;book&quot;]&#123;&quot;stu_addr&quot;:&quot;beijing&quot;,&quot;work_addr&quot;:&quot;shanghai&quot;&#125;</span><br><span class="line">2lishi16[&quot;shop&quot;,&quot;boy&quot;,&quot;book&quot;]&#123;&quot;stu_addr&quot;:&quot;hunan&quot;,&quot;work_addr&quot;:&quot;shanghai&quot;&#125;</span><br><span class="line">3wang2mazi20[&quot;fangniu&quot;,&quot;eat&quot;]&#123;&quot;stu_addr&quot;:&quot;shanghai&quot;,&quot;work_addr&quot;:&quot;tianjing&quot;&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªæŸ¥è¯¢ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><p><code>é™„åŠ é¢˜</code></p><blockquote><p>æŸ¥è¯¢è¡¨ä¸­likeså­—æ®µä¸­æœ‰girlçš„äºº</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select name from log2 where likes[1]=&quot;girl&quot;;</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥è¯¢è¡¨ä¸­addresså­—æ®µæœ‰stu_addrä¸ºbeijingçš„äºº</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;  select name from log2 where address[&quot;stu_addr&quot;]=&quot;beijing&quot;;</span><br></pre></td></tr></table></figure><ul><li><h5 id="3ã€åˆ é™¤è¡¨"><a href="#3ã€åˆ é™¤è¡¨" class="headerlink" title="3ã€åˆ é™¤è¡¨"></a>3ã€åˆ é™¤è¡¨</h5></li></ul><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; DROP TABLE [IF EXISTS] table_name [PURGE];</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ä¸¾ä¾‹ï¼š</p><p>ï¼ˆç”¨dropå‘½ä»¤åˆ é™¤è¡¨ï¼Œä¼šå°†è¡¨ä¸­æ•°æ®ä¸€å¹¶åˆ é™¤ï¼Œå…¶å¯¹åº”åœ¨MySQlä¸­çš„è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ä¹Ÿä¼šéšä¹‹åˆ é™¤ï¼›</p><p>â€‹    ç”¨hdfså‘½ä»¤åˆ é™¤è¡¨å¯¹åº”çš„æ–‡ä»¶ç›®å½•ï¼Œè¡¨ä¸­æ•°æ®ä¹Ÿä¸€å¹¶åˆ é™¤ï¼Œä½†å…¶å…ƒæ•°æ®ä¿¡æ¯ä¾ç„¶ä¿å­˜åœ¨My  SQLä¸Šï¼Œ</p><p>â€‹     å†loadæ•°æ®ï¼Œå¯æ¢å¤è¯¥è¡¨ï¼‰                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </p></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; drop table log1ï¼›</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; hdfs dfs -rmr /user/hive_local/warehouse/attr.db/log1</span><br><span class="line">&gt; </span><br><span class="line">&gt; hive&gt; use attr;</span><br><span class="line">&gt; hive&gt; LOAD DATA LOCAL INPATH &apos;/root/su/log1&apos; INTO TABLE log1;</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote></blockquote><ul><li><h5 id="åˆ›å»ºå¤–éƒ¨è¡¨ï¼ˆé‡è¦ï¼‰"><a href="#åˆ›å»ºå¤–éƒ¨è¡¨ï¼ˆé‡è¦ï¼‰" class="headerlink" title="åˆ›å»ºå¤–éƒ¨è¡¨ï¼ˆé‡è¦ï¼‰"></a>åˆ›å»ºå¤–éƒ¨è¡¨ï¼ˆé‡è¦ï¼‰</h5></li></ul><blockquote><p>å¤–éƒ¨å…³é”®å­—EXTERNALå…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªè¡¨,å¹¶æä¾›ä¸€ä¸ªä½ç½®,ä»¥ä¾¿hiveä¸ä½¿ç”¨è¿™ä¸ªè¡¨çš„é»˜è®¤ä½ç½®ã€‚<strong>è¿™æ–¹ä¾¿å¦‚æœä½ å·²ç»ç”Ÿæˆäº†æ•°æ®ï¼Œå½“åˆ é™¤ä¸€ä¸ªå¤–éƒ¨è¡¨</strong>,<strong>è¡¨ä¸­çš„æ•°æ®ä¸ä¼šä»æ–‡ä»¶ç³»ç»Ÿä¸­åˆ é™¤</strong>ã€‚å¤–éƒ¨è¡¨æŒ‡å‘ä»»ä½•HDFSçš„å­˜å‚¨ä½ç½®,è€Œä¸æ˜¯å­˜å‚¨åœ¨é…ç½®å±æ€§æŒ‡å®šçš„æ–‡ä»¶å¤¹<a href="javascript:changelink(&#39;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.metastore.warehouse.dir&#39;,&#39;EN2ZH_CN&#39;" target="_blank" rel="noopener">â€‚hive.metastore.warehouse.dir</a>;).ä¸­</p></blockquote><p>åˆ›å»ºè¡¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create EXTERNAL table log1(</span><br><span class="line"> id int,</span><br><span class="line"> name string,</span><br><span class="line"> age int,</span><br><span class="line"> likes array&lt;string&gt;,</span><br><span class="line"> address map&lt;string,string&gt;</span><br><span class="line"> )</span><br><span class="line"> row format delimited fields terminated by &apos;,&apos;</span><br><span class="line"> COLLECTION ITEMS TERMINATED by &apos;-&apos;</span><br><span class="line"> map keys terminated by &apos;:&apos;</span><br><span class="line"> lines terminated by &apos;\n&apos;;</span><br></pre></td></tr></table></figure><p>åŠ è½½æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA LOCAL INPATH &apos;/root/su/log1&apos; INTO TABLE log1;</span><br></pre></td></tr></table></figure><p>åˆ é™¤å¤–éƒ¨è¡¨ï¼ˆ<code>ç›¸å½“äºåˆ é™¤çš„æ˜¯è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œè€Œè¡¨ä¸­çš„æ•°æ®è¿˜ä¿å­˜</code>ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table log1ï¼›</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><blockquote><p>hive&gt; show tables;</p><p>æ— log1</p><p>MySQlä¸­ä¹Ÿæ— æ­¤è¡¨å…ƒæ•°æ®ä¿¡æ¯</p><p>ä½†æ˜¯ï¼Œ</p><p>åœ¨HDFSæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ­¤è¡¨æ•°æ®ä¾ç„¶å­˜åœ¨</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯è¡¨è¿˜å¯ä»¥æ¢å¤</p></blockquote><p>æ¢å¤è¡¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é‡æ–°åˆ›å»ºlog1è¡¨ï¼Œè¯¥è¡¨å³å¯æ¢å¤</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰ä¿®æ”¹è¡¨-æ›´æ–°ï¼Œåˆ é™¤æ•°æ®-è¿™äº›å¾ˆå°‘ç”¨"><a href="#ï¼ˆ4ï¼‰ä¿®æ”¹è¡¨-æ›´æ–°ï¼Œåˆ é™¤æ•°æ®-è¿™äº›å¾ˆå°‘ç”¨" class="headerlink" title="ï¼ˆ4ï¼‰ä¿®æ”¹è¡¨,æ›´æ–°ï¼Œåˆ é™¤æ•°æ®(è¿™äº›å¾ˆå°‘ç”¨)"></a>ï¼ˆ4ï¼‰ä¿®æ”¹è¡¨,æ›´æ–°ï¼Œåˆ é™¤æ•°æ®(è¿™äº›å¾ˆå°‘ç”¨)</h4><p>é‡å‘½åè¡¨</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; ALTER TABLE table_name RENAME TO new_table_name;</span><br><span class="line">&gt; </span><br><span class="line">&gt; Eg: alter table meninem rename to jacke;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote></blockquote><p>æ›´æ–°æ•°æ®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE tablename SET column = value [, column = value ...][WHERE expression]</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ•°æ®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM tablename [WHERE expression]</span><br></pre></td></tr></table></figure><h3 id="2ã€DMLè¯­å¥ï¼ˆæ•°æ®åº“ç®¡ç†è¯­è¨€ï¼‰"><a href="#2ã€DMLè¯­å¥ï¼ˆæ•°æ®åº“ç®¡ç†è¯­è¨€ï¼‰" class="headerlink" title="2ã€DMLè¯­å¥ï¼ˆæ•°æ®åº“ç®¡ç†è¯­è¨€ï¼‰"></a>2ã€DMLè¯­å¥ï¼ˆæ•°æ®åº“ç®¡ç†è¯­è¨€ï¼‰</h3><h4 id="ï¼ˆ1ï¼‰å…·ä½“å‚è§ï¼š"><a href="#ï¼ˆ1ï¼‰å…·ä½“å‚è§ï¼š" class="headerlink" title="ï¼ˆ1ï¼‰å…·ä½“å‚è§ï¼š"></a>ï¼ˆ1ï¼‰å…·ä½“å‚è§ï¼š</h4><p><a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML</a></p><p>   <strong>é‡ç‚¹æ˜¯æ•°æ®åŠ è½½å’ŒæŸ¥è¯¢æ’å…¥è¯­æ³•</strong></p><p>Hiveæ•°æ®æ“ä½œè¯­è¨€ï¼ˆ<a href="javascript:changelink(&#39;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML&#39;,&#39;EN2ZH_CN&#39;" target="_blank" rel="noopener">LanguageManual DML</a>;)ï¼‰</p><h4 id="ï¼ˆ2ï¼‰å››ç§æ’å…¥-å¯¼å…¥æ•°æ®-é‡è¦"><a href="#ï¼ˆ2ï¼‰å››ç§æ’å…¥-å¯¼å…¥æ•°æ®-é‡è¦" class="headerlink" title="ï¼ˆ2ï¼‰å››ç§æ’å…¥/å¯¼å…¥æ•°æ®(é‡è¦)"></a>ï¼ˆ2ï¼‰å››ç§æ’å…¥/å¯¼å…¥æ•°æ®(é‡è¦)</h4><blockquote><p>Hiveä¸èƒ½å¾ˆå¥½çš„æ”¯æŒç”¨<code>insert</code>è¯­å¥ä¸€æ¡ä¸€æ¡çš„è¿›è¡Œæ’å…¥æ“ä½œï¼Œä¸æ”¯æŒ<code>update</code>æ“ä½œã€‚æ•°æ®æ˜¯ä»¥<code>load</code>çš„æ–¹å¼åŠ è½½åˆ°å»ºç«‹å¥½çš„è¡¨ä¸­ã€‚æ•°æ®ä¸€æ—¦å¯¼å…¥å°±ä¸å¯ä»¥ä¿®æ”¹ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table log3(</span><br><span class="line"> id int,</span><br><span class="line"> name string,</span><br><span class="line"> age int</span><br><span class="line"> )</span><br><span class="line"> row format delimited fields terminated by &apos;,&apos;</span><br><span class="line"> lines terminated by &apos;\n&apos;;</span><br></pre></td></tr></table></figure><h5 id="1-ç›´æ¥åŠ è½½æ•°æ®"><a href="#1-ç›´æ¥åŠ è½½æ•°æ®" class="headerlink" title="1.ç›´æ¥åŠ è½½æ•°æ®"></a>1.ç›´æ¥åŠ è½½æ•°æ®</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA [LOCAL] INPATH &apos;filepath&apos; [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)]</span><br><span class="line">load data local inpath &apos;/root/su/log1&apos; into table log1;</span><br></pre></td></tr></table></figure><h5 id="2-å°†è¡¨1æŸ¥è¯¢ç»“æœæ’å…¥è¡¨2"><a href="#2-å°†è¡¨1æŸ¥è¯¢ç»“æœæ’å…¥è¡¨2" class="headerlink" title="2.å°†è¡¨1æŸ¥è¯¢ç»“æœæ’å…¥è¡¨2"></a>2.å°†è¡¨1æŸ¥è¯¢ç»“æœæ’å…¥è¡¨2</h5><p><code>æ³¨æ„ï¼šæŸ¥è¯¢ç»“æœçš„å­—æ®µä¸ªæ•°ã€ç±»å‹ è¦ä¸æ’å…¥çš„è¡¨çš„å­—æ®µä¸€ ä¸€åŒ¹é…å¯¹åº”</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºperson2è¡¨ï¼Œç„¶åä»è¡¨person1æŸ¥è¯¢æ•°æ®å¯¼å…¥ï¼š</span><br><span class="line">è¦†ç›–ï¼š</span><br><span class="line">INSERT OVERWRITE TABLE person2 [PARTITION(dt=&apos;2008-06-08&apos;, country)]</span><br><span class="line">       SELECT id,name, age From ppt;</span><br><span class="line">è¿½åŠ ï¼š</span><br><span class="line">INSERT INTO TABLE log3 </span><br><span class="line">       SELECT id,name, age From log;</span><br></pre></td></tr></table></figure><h5 id="3-å°†è¡¨1ã€è¡¨2æŸ¥è¯¢ç»“æœæ’å…¥è¡¨3ã€è¡¨4"><a href="#3-å°†è¡¨1ã€è¡¨2æŸ¥è¯¢ç»“æœæ’å…¥è¡¨3ã€è¡¨4" class="headerlink" title="3.å°†è¡¨1ã€è¡¨2æŸ¥è¯¢ç»“æœæ’å…¥è¡¨3ã€è¡¨4"></a>3.å°†è¡¨1ã€è¡¨2æŸ¥è¯¢ç»“æœæ’å…¥è¡¨3ã€è¡¨4</h5><p><code>æ³¨æ„ï¼šæŸ¥è¯¢ç»“æœçš„å­—æ®µä¸ªæ•°ã€ç±»å‹ è¦ä¸æ’å…¥çš„è¡¨çš„å­—æ®µä¸€ ä¸€åŒ¹é…å¯¹åº”</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">FROM person t1</span><br><span class="line">INSERT OVERWRITE | INTO TABLE person1 [PARTITION(dt=&apos;2008-06-08&apos;, country)]</span><br><span class="line">       SELECT t1.id, t1.name, t1.age ;</span><br><span class="line">       </span><br><span class="line">FROM log t1,log1 t2 </span><br><span class="line">INSERT OVERWRITE TABLE log4  </span><br><span class="line"> SELECT t1.id,t1.name,t2.age ;</span><br><span class="line"> </span><br><span class="line"> æ˜¯å¦å­˜åœ¨ç¬›å¡å°”ç§¯ï¼šï¼Ÿï¼Ÿï¼Ÿï¼Ÿå­˜åœ¨ã€‚</span><br><span class="line"> </span><br><span class="line"> ä¸ºäº†é˜²æ­¢ç¬›å¡å°”ç§¯ï¼š</span><br><span class="line"> FROM log t1,log1 t2 </span><br><span class="line">INSERT OVERWRITE TABLE log4  </span><br><span class="line"> SELECT t1.id,t1.name,t2.age where t1.id =t2.id;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ã€fromæ”¾å‰é¢å¥½å¤„å°±æ˜¯åé¢å¯ä»¥æ’å…¥å¤šæ¡è¯­å¥ ã€‘</span><br><span class="line">FROM abc t1,sufei t2 </span><br><span class="line">INSERT OVERWRITE TABLE qidu  </span><br><span class="line"> SELECT t1.id,t1.name,t1.age,t2.likes,t2.address ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM abc t1,sufei t2 </span><br><span class="line">INSERT OVERWRITE TABLE qidu  </span><br><span class="line"> SELECT t1.id,t1.name,t1.age,t1.likes,t1.address whereâ€¦</span><br><span class="line">INSERT OVERWRITE TABLE wbb</span><br><span class="line"> SELECT t2.id,t2.name,t2.age,t2.likes,t2.address whereâ€¦;</span><br></pre></td></tr></table></figure><h5 id="4-ç›´æ¥åˆ—å‡ºæ•°æ®æ’å…¥è¡¨ä¸­ï¼ˆå¤§é‡æ•°æ®æ—¶ä¸æ¨èï¼‰"><a href="#4-ç›´æ¥åˆ—å‡ºæ•°æ®æ’å…¥è¡¨ä¸­ï¼ˆå¤§é‡æ•°æ®æ—¶ä¸æ¨èï¼‰" class="headerlink" title="4.ç›´æ¥åˆ—å‡ºæ•°æ®æ’å…¥è¡¨ä¸­ï¼ˆå¤§é‡æ•°æ®æ—¶ä¸æ¨èï¼‰"></a>4.ç›´æ¥åˆ—å‡ºæ•°æ®æ’å…¥è¡¨ä¸­ï¼ˆå¤§é‡æ•°æ®æ—¶ä¸æ¨èï¼‰</h5><p><code>æ³¨æ„ï¼šæŸ¥è¯¢ç»“æœçš„å­—æ®µä¸ªæ•°ã€ç±»å‹ è¦ä¸æ’å…¥çš„è¡¨çš„å­—æ®µä¸€ ä¸€åŒ¹é…å¯¹åº”</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO TABLE students</span><br><span class="line">   VALUES (1,&apos;zs&apos;,18,&apos;boy&apos;,&apos;beijng&apos;),(2,&apos;wh&apos;,&apos;girl&apos;,&apos;stu_addr&apos;:shanghai&apos;);</span><br></pre></td></tr></table></figure><blockquote><p>æœ¬åœ°loadæ•°æ®å’Œä»HDFSä¸ŠloadåŠ è½½æ•°æ®çš„è¿‡ç¨‹æœ‰ä»€ä¹ˆ<code>åŒºåˆ«</code>ï¼Ÿ</p><ul><li><p>æœ¬åœ°ï¼š local ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°HDFSä¸Šçš„hiveçš„**ç›®å½•ä¸‹</p></li><li><p>Hdfså¯¼å…¥ åç§»åŠ¨åˆ°hiveçš„**ç›®å½•ä¸‹</p></li></ul></blockquote><h4 id="ï¼ˆ3ï¼‰æŸ¥è¯¢æ•°æ®å¹¶ä¿å­˜"><a href="#ï¼ˆ3ï¼‰æŸ¥è¯¢æ•°æ®å¹¶ä¿å­˜" class="headerlink" title="ï¼ˆ3ï¼‰æŸ¥è¯¢æ•°æ®å¹¶ä¿å­˜"></a>ï¼ˆ3ï¼‰æŸ¥è¯¢æ•°æ®å¹¶ä¿å­˜</h4><ol><li><ul><li><h5 id="ä¿å­˜æ•°æ®åˆ°æœ¬åœ°ï¼š"><a href="#ä¿å­˜æ•°æ®åˆ°æœ¬åœ°ï¼š" class="headerlink" title="ä¿å­˜æ•°æ®åˆ°æœ¬åœ°ï¼š"></a>ä¿å­˜æ•°æ®åˆ°æœ¬åœ°ï¼š</h5></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">insert overwrite local directory &apos;/opt/datas/hive_exp_emp2&apos;</span><br><span class="line">     ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;</span><br><span class="line">         select * from db_1128.emp ;</span><br><span class="line">ç•™æ„ä¸¤ç§çš„åŒºåˆ«ï¼šä¿å­˜çš„æ•°æ®æ ¼å¼</span><br><span class="line"></span><br><span class="line">insert overwrite local directory &apos;/sun/temp/hive_save1&apos;</span><br><span class="line">     row format delimited fields terminated by &apos;,&apos;</span><br><span class="line">      COLLECTION ITEMS TERMINATED by &apos;-&apos;</span><br><span class="line">      map keys terminated by &apos;:&apos;      </span><br><span class="line">          select * from log2 ;</span><br><span class="line">          </span><br><span class="line">è¿™é‡Œå¦‚æœå°† overwrite  æ”¹ä¸ºinto ä¼šæŠ¥é”™ã€‚</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥çœ‹æ•°æ®</span><br><span class="line">!cat /sun/temp/hive_save1/000000_0;</span><br></pre></td></tr></table></figure><ol start="2"><li><ul><li><h5 id="ä¿å­˜æ•°æ®åˆ°HDFSä¸Šï¼š"><a href="#ä¿å­˜æ•°æ®åˆ°HDFSä¸Šï¼š" class="headerlink" title="ä¿å­˜æ•°æ®åˆ°HDFSä¸Šï¼š"></a>ä¿å­˜æ•°æ®åˆ°HDFSä¸Šï¼š</h5></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">insert overwrite directory &apos;/user/beifeng/hive/hive_exp_emp&apos;</span><br><span class="line">     select * from db_1128.emp ;</span><br><span class="line"></span><br><span class="line">insert overwrite directory &apos;/sun/hive/temp/hive_save1&apos;</span><br><span class="line">      row format delimited fields terminated by &apos;,&apos;</span><br><span class="line">      COLLECTION ITEMS TERMINATED by &apos;-&apos;</span><br><span class="line">      map keys terminated by &apos;:&apos;</span><br><span class="line">      select * from log2 ;</span><br><span class="line">     </span><br><span class="line">è¿™é‡Œå¦‚æœå°† overwrite  æ”¹ä¸ºinto ä¼šæŠ¥é”™ã€‚</span><br></pre></td></tr></table></figure></li><li><ul><li><h5 id="åœ¨å¤–éƒ¨shellä¸­å°†æ•°æ®é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼š"><a href="#åœ¨å¤–éƒ¨shellä¸­å°†æ•°æ®é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼š" class="headerlink" title="åœ¨å¤–éƒ¨shellä¸­å°†æ•°æ®é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼š"></a>åœ¨å¤–éƒ¨shellä¸­å°†æ•°æ®é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼š</h5></li></ul></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(æ³¨æ„ï¼šéœ€è¦æŒ‡æ˜æ˜¯å“ªä¸ªæ•°æ®åº“çš„è¡¨)</span><br><span class="line"># hive -e &quot;select * from attr.log;&quot; &gt; /sun/hive/temp/hive_save2</span><br><span class="line"># cat /sun/hive/temp/hive_save2</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰å¤‡ä»½æ•°æ®æˆ–è¿˜åŸæ•°æ®ï¼ˆåœ¨HDFSä¸Šï¼‰"><a href="#ï¼ˆ4ï¼‰å¤‡ä»½æ•°æ®æˆ–è¿˜åŸæ•°æ®ï¼ˆåœ¨HDFSä¸Šï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰å¤‡ä»½æ•°æ®æˆ–è¿˜åŸæ•°æ®ï¼ˆåœ¨HDFSä¸Šï¼‰"></a>ï¼ˆ4ï¼‰å¤‡ä»½æ•°æ®æˆ–è¿˜åŸæ•°æ®ï¼ˆåœ¨HDFSä¸Šï¼‰</h4><ol><li><ul><li>å¤‡ä»½æ•°æ®ï¼ˆåŒ…æ‹¬è¡¨çš„å…ƒæ•°æ®å’Œè¡¨ä¸­çš„æ•°æ®ï¼‰ï¼š</li></ul></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPORT TABLE log to &apos;/sun/hive/datas/export/cp1&apos;</span><br></pre></td></tr></table></figure><ol start="2"><li><ul><li>åˆ é™¤å†è¿˜åŸæ•°æ®ï¼š</li></ul></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å…ˆåˆ é™¤è¡¨ã€‚</span><br><span class="line">drop table log;</span><br><span class="line">show tables ;</span><br><span class="line">å†è¿˜åŸæ•°æ®ï¼š</span><br><span class="line">IMPORT FROM &apos;/sun/hive/datas/export/cp1&apos; ;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰å…¶ä»–Hqlæ“ä½œ"><a href="#ï¼ˆ5ï¼‰å…¶ä»–Hqlæ“ä½œ" class="headerlink" title="ï¼ˆ5ï¼‰å…¶ä»–Hqlæ“ä½œ"></a>ï¼ˆ5ï¼‰å…¶ä»–Hqlæ“ä½œ</h4><h5 id="Hiveçš„group-by-join-left-join-right-joinç­‰-having-sort-by-order-byç­‰æ“ä½œå’ŒMySQLæ²¡æœ‰ä»€ä¹ˆå¤§çš„åŒºåˆ«ï¼š"><a href="#Hiveçš„group-by-join-left-join-right-joinç­‰-having-sort-by-order-byç­‰æ“ä½œå’ŒMySQLæ²¡æœ‰ä»€ä¹ˆå¤§çš„åŒºåˆ«ï¼š" class="headerlink" title="Hiveçš„group by\join(left join right joinç­‰)\having\sort by \order byç­‰æ“ä½œå’ŒMySQLæ²¡æœ‰ä»€ä¹ˆå¤§çš„åŒºåˆ«ï¼š"></a>Hiveçš„group by\join(left join right joinç­‰)\having\sort by \order byç­‰æ“ä½œå’ŒMySQLæ²¡æœ‰ä»€ä¹ˆå¤§çš„åŒºåˆ«ï¼š</h5><p><a href="http://www.2cto.com/kf/201609/545560.html" target="_blank" rel="noopener">http://www.2cto.com/kf/201609/545560.html</a></p><h3 id="3ã€Hive-SerDeï¼ˆåºåˆ—åŒ–ã€ååºåˆ—åŒ–ï¼‰"><a href="#3ã€Hive-SerDeï¼ˆåºåˆ—åŒ–ã€ååºåˆ—åŒ–ï¼‰" class="headerlink" title="3ã€Hive SerDeï¼ˆåºåˆ—åŒ–ã€ååºåˆ—åŒ–ï¼‰"></a>3ã€Hive SerDeï¼ˆåºåˆ—åŒ–ã€ååºåˆ—åŒ–ï¼‰</h3><h4 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="(1)å®šä¹‰"></a>(1)å®šä¹‰</h4><p><strong><code>Hive SerDe</code></strong> - Serializer and Deserializer  SerDe ç”¨äºåšåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><p>æ„å»ºåœ¨æ•°æ®å­˜å‚¨å’Œæ‰§è¡Œå¼•æ“ä¹‹é—´ï¼Œå¯¹ä¸¤è€…å®ç°è§£è€¦ã€‚</p><p>å¯¹æ•°æ®å®ç°åºåˆ—åŒ–ï¼Œæ¸…æ´—æ•°æ®ï¼Œä½¿ä¹‹æˆä¸ºæœ‰æ•ˆæ•°æ®å¹¶åŠ è½½ã€‚</p><p>Hiveé€šè¿‡ROW FORMAT DELIMITEDä»¥åŠSERDEè¿›è¡Œå†…å®¹çš„è¯»å†™ã€‚</p><h4 id="ï¼ˆ2ï¼‰å®ç°"><a href="#ï¼ˆ2ï¼‰å®ç°" class="headerlink" title="ï¼ˆ2ï¼‰å®ç°"></a>ï¼ˆ2ï¼‰å®ç°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">row_format</span><br><span class="line">: DELIMITED </span><br><span class="line">          [FIELDS TERMINATED BY char [ESCAPED BY char]] </span><br><span class="line">          [COLLECTION ITEMS TERMINATED BY char] </span><br><span class="line">          [MAP KEYS TERMINATED BY char] </span><br><span class="line">          [LINES TERMINATED BY char] </span><br><span class="line">: SERDE serde_name [WITH SERDEPROPERTIES (property_name=property_value, property_name=property_value, ...)]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Hiveæ­£åˆ™åŒ¹é…ï¼ˆå®ç°æ•°æ®æ¸…æ´—ï¼‰</span><br><span class="line">åˆ›å»ºè¡¨ logtblï¼š</span><br><span class="line"></span><br><span class="line"> CREATE TABLE logtbl (</span><br><span class="line">    host STRING,</span><br><span class="line">    identity STRING,</span><br><span class="line">    t_user STRING,</span><br><span class="line">    time STRING,</span><br><span class="line">    request STRING,</span><br><span class="line">    referer STRING,</span><br><span class="line">    agent STRING)</span><br><span class="line">  ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.RegexSerDe&apos;</span><br><span class="line">  WITH SERDEPROPERTIES (</span><br><span class="line"> &quot;input.regex&quot;=&quot;([^ ]*) ([^ ]*) ([^ ]*) \\[(.*)\\] \&quot;(.*)\&quot; (-|[0-9]*) (-|[0-9]*)&quot;) </span><br><span class="line">  STORED AS TEXTFILE;</span><br><span class="line">  </span><br><span class="line">åŠ è½½æ•°æ®:</span><br><span class="line"></span><br><span class="line">load data local inpath &apos;/root/su/localhost_access_log.2016-02-29&apos; into table logtbl;</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹æ•°æ®ï¼š</span><br><span class="line"></span><br><span class="line">select * from logtbl;</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºï¼š</span><br><span class="line">192.168.57.4--29/Feb/2016:18:14:35 +0800GET /bg-upper.png HTTP/1.1304    -</span><br><span class="line">192.168.57.4--29/Feb/2016:18:14:35 +0800GET /bg-nav.png HTTP/1.1304    -</span><br><span class="line">192.168.57.4--29/Feb/2016:18:14:35 +0800GET /asf-logo.png HTTP/1.1304    -</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">(çœç•¥ã€‚ã€‚ã€‚)</span><br></pre></td></tr></table></figure><p><code>è¡¨æ•°æ®è§æ•°æ®æ–‡ä»¶ï¼šlocalhost_access_log.2016-02-29.txt</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /bg-upper.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /bg-nav.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /asf-logo.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /bg-button.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /bg-middle.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11217</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11217</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.css HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /asf-logo.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-middle.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-button.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-nav.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-upper.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11217</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.css HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11217</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.css HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-button.png HTTP/1.1&quot; 304 -</span><br><span class="line">192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-upper.png HTTP/1.1&quot; 304 -</span><br></pre></td></tr></table></figure><h2 id="äº”ã€Beelineå’ŒHiveserver2ï¼ˆHiveçš„å‡çº§ï¼‰"><a href="#äº”ã€Beelineå’ŒHiveserver2ï¼ˆHiveçš„å‡çº§ï¼‰" class="headerlink" title="äº”ã€Beelineå’ŒHiveserver2ï¼ˆHiveçš„å‡çº§ï¼‰"></a>äº”ã€Beelineå’ŒHiveserver2ï¼ˆHiveçš„å‡çº§ï¼‰</h2><h4 id="1ã€Hiveserver2ç›´æ¥å¯åŠ¨ï¼ˆåªèƒ½åœ¨æœåŠ¡ç«¯å¯åŠ¨ï¼Œç›¸å½“äºæœåŠ¡ç«¯ï¼‰"><a href="#1ã€Hiveserver2ç›´æ¥å¯åŠ¨ï¼ˆåªèƒ½åœ¨æœåŠ¡ç«¯å¯åŠ¨ï¼Œç›¸å½“äºæœåŠ¡ç«¯ï¼‰" class="headerlink" title="1ã€Hiveserver2ç›´æ¥å¯åŠ¨ï¼ˆåªèƒ½åœ¨æœåŠ¡ç«¯å¯åŠ¨ï¼Œç›¸å½“äºæœåŠ¡ç«¯ï¼‰"></a>1ã€Hiveserver2ç›´æ¥å¯åŠ¨ï¼ˆåªèƒ½åœ¨æœåŠ¡ç«¯å¯åŠ¨ï¼Œç›¸å½“äºæœåŠ¡ç«¯ï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ./hiveserver2</span><br></pre></td></tr></table></figure><p>è‹¥å·²ç»é…ç½®ç¯å¢ƒå˜é‡åˆ™å¯åŠ¨æ–¹å¼ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># hivesever2</span><br></pre></td></tr></table></figure><h4 id="2ã€å¯åŠ¨-beelineï¼ˆå¯åœ¨æœåŠ¡ç«¯-å®¢æˆ·ç«¯å¯åŠ¨ï¼Œç›¸å½“äºå®¢æˆ·ç«¯ï¼‰"><a href="#2ã€å¯åŠ¨-beelineï¼ˆå¯åœ¨æœåŠ¡ç«¯-å®¢æˆ·ç«¯å¯åŠ¨ï¼Œç›¸å½“äºå®¢æˆ·ç«¯ï¼‰" class="headerlink" title="2ã€å¯åŠ¨ beelineï¼ˆå¯åœ¨æœåŠ¡ç«¯|å®¢æˆ·ç«¯å¯åŠ¨ï¼Œç›¸å½“äºå®¢æˆ·ç«¯ï¼‰"></a>2ã€å¯åŠ¨ beelineï¼ˆå¯åœ¨æœåŠ¡ç«¯|å®¢æˆ·ç«¯å¯åŠ¨ï¼Œç›¸å½“äºå®¢æˆ·ç«¯ï¼‰</h4><blockquote><p>å› ä¸ºbeelineæ˜¯åœ¨Hiveå®‰è£…ç›®å½•çš„/binä¸‹ï¼Œæ‰€ä»¥åªè¦æœ‰hiveåŒ…éƒ½å¯ä»¥å¯åŠ¨</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># ./beeline</span><br><span class="line">beeline&gt; !connect jdbc:hive2://node00:10000 root 123456</span><br><span class="line">æ˜¾ç¤ºï¼š</span><br><span class="line">Connecting to jdbc:hive2://node00:10000</span><br><span class="line">Connected to: Apache Hive (version 1.2.1)</span><br><span class="line">Driver: Hive JDBC (version 1.2.1)</span><br><span class="line">Transaction isolation: TRANSACTION_REPEATABLE_READ</span><br><span class="line">0: jdbc:hive2://node00:10000&gt;</span><br><span class="line">ä½¿ç”¨ï¼šåˆ—å‡ºæ•°æ®åº“</span><br><span class="line">0: jdbc:hive2://node00:10000&gt; show databases;</span><br><span class="line">+----------------+--+</span><br><span class="line">| database_name  |</span><br><span class="line">+----------------+--+</span><br><span class="line">| attr           |</span><br><span class="line">| attribute      |</span><br><span class="line">| default        |</span><br><span class="line">+----------------+--+</span><br><span class="line">3 rows selected (7.493 seconds)</span><br><span class="line">0: jdbc:hive2://node00:10000&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è€Œåœ¨æœåŠ¡ç«¯ï¼š</span><br><span class="line">æ˜¾ç¤ºï¼š</span><br><span class="line"></span><br><span class="line">[root@node00 ~]# hiveserver2</span><br><span class="line">19/01/07 08:52:09 WARN conf.HiveConf: HiveConf of name hive.metastore.local does not exist</span><br><span class="line">OK</span><br><span class="line">OK</span><br><span class="line">OK</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">é€€å‡ºï¼š</span><br><span class="line">æœåŠ¡ç«¯ï¼šctrl + c</span><br><span class="line">å®¢æˆ·ç«¯ï¼šï¼quitï¼›  æˆ– ctrl + c</span><br><span class="line"></span><br><span class="line">ä½œç”¨ï¼š</span><br><span class="line">å¯¹æ“ä½œç»“æœæ·»åŠ äº†ç¾åŒ–ã€‚ä¸è¿‡ä¸å¤ªå¸¸ç”¨ï¼Œè€—å†…å­˜ï¼Œæ•°æ®å¤§çš„æ—¶å€™ï¼Œè¿˜å½±å“é¡µé¢ã€‚</span><br></pre></td></tr></table></figure><h2 id="å…­ã€Hiveçš„JDBC"><a href="#å…­ã€Hiveçš„JDBC" class="headerlink" title="å…­ã€Hiveçš„JDBC"></a>å…­ã€Hiveçš„JDBC</h2><blockquote><p>ä¸€èˆ¬æ˜¯å¹³å°ä½¿ç”¨å±•ç¤ºæˆ–æ¥å£ï¼ŒæœåŠ¡ç«¯å¯åŠ¨hiveserver2åï¼Œåœ¨javaä»£ç ä¸­é€šè¿‡è°ƒç”¨hiveçš„jdbcè®¿é—®é»˜è®¤ç«¯å£10000è¿›è¡Œè¿æ¥ã€è®¿é—®</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HivejdbcClient</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driverName = <span class="string">"org.apache.hive.jdbc.HiveDriver"</span>;   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;        </span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class.forName(driverName);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (ClassNotFoundException)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// repalace "hive" here with the name of user the queries should run as</span></span><br><span class="line">        Connection con = DriverManager.getConnection(<span class="string">"jdbc:hive2://node00:10000/default"</span>,<span class="string">"root"</span>,<span class="string">"123456"</span>);</span><br><span class="line">        Statement stmt = con.createStatement();</span><br><span class="line">        String sql = <span class="string">"select * from log limit 0"</span>;</span><br><span class="line">        ResultSet rs = stmt.executeQuery(sql);</span><br><span class="line">        <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">            System.out.println(rs.getInt(<span class="number">1</span>)+<span class="string">"-"</span>+rs.getString(<span class="string">"name"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€Hiveåˆ†åŒºä¸è‡ªå®šä¹‰å‡½æ•°UDF-UDAF-UDTF"><a href="#ä¸ƒã€Hiveåˆ†åŒºä¸è‡ªå®šä¹‰å‡½æ•°UDF-UDAF-UDTF" class="headerlink" title="ä¸ƒã€Hiveåˆ†åŒºä¸è‡ªå®šä¹‰å‡½æ•°UDF  UDAF UDTF"></a>ä¸ƒã€Hiveåˆ†åŒºä¸è‡ªå®šä¹‰å‡½æ•°UDF  UDAF UDTF</h2><h3 id="1ã€Hiveçš„åˆ†åŒºpartitionï¼ˆé‡è¦ï¼‰"><a href="#1ã€Hiveçš„åˆ†åŒºpartitionï¼ˆé‡è¦ï¼‰" class="headerlink" title="1ã€Hiveçš„åˆ†åŒºpartitionï¼ˆé‡è¦ï¼‰"></a>1ã€Hiveçš„åˆ†åŒºpartitionï¼ˆé‡è¦ï¼‰</h3><blockquote><p><code>åŠŸèƒ½ï¼š</code></p><p>ä¸ºäº†æ–¹ä¾¿æµ·é‡æ•°æ®çš„ç®¡ç†å’ŒæŸ¥è¯¢ï¼Œå¯ä»¥å¯¹æ•°æ®å»ºç«‹åˆ†åŒºï¼ˆå¯æŒ‰æ—¥æœŸã€éƒ¨é—¨ã€ç±»å‹ç­‰å…·ä½“ä¸šåŠ¡ï¼‰ã€‚è¿›è¡Œåˆ†é—¨åˆ«ç±»çš„ç®¡ç†ã€‚</p></blockquote><blockquote><p><code>æ³¨æ„ï¼š</code></p><ul><li><p>å¿…é¡»åœ¨å®šä¹‰è¡¨çš„æ—¶å€™åˆ›å»ºpartitionåˆ†åŒº</p></li><li><p>å­˜å‚¨æ•°æ®æ—¶ï¼Œæ·»åŠ åˆ†åŒºå­—æ®µçš„æ•°æ®ï¼Œç›´æ¥å°†æ•°æ®æŒ‰åˆ†åŒºè¿›è¡Œå­˜å‚¨ã€‚<br>   æ·»åŠ åˆ†åŒºæ—¶ï¼š</p><p>   â€‹             æ—¶é—´çš„æ ¼å¼ï¼š/   ï¼š å­˜å‚¨æ—¶ä¼šä¹±ç ï¼Œç”¨ -  ä¸ä¼šã€‚<br>   â€‹             éœ€è¦æŒ‡å®šåˆ†åŒº<br>   â€‹             å¤šä¸ªåˆ†åŒºæ—¶ï¼Œå­˜åœ¨çˆ¶å­ç›®å½•å…³ç³»ï¼ŒæŒ‰é¡ºåºå¯¹åº”ï¼Œå¯¹åº”çˆ¶å­<br>   â€‹             åˆ›å»ºè¡¨æ—¶ï¼Œå·²ç»æŒ‡å®šåˆ†åŒºä¸ªæ•°ï¼Œå°±åªèƒ½å¡«åŠ æŒ‡å®šä¸ªæ•°çš„å­—æ®µæ•°æ®</p></li></ul><pre><code>   åˆ é™¤åˆ†åŒºæ—¶ï¼šâ€‹            è‹¥è¯¥åˆ†åŒºæ˜¯çˆ¶åˆ†åŒºçš„æœ€åä¸€ä¸ªå­åŒºï¼Œåˆ™çˆ¶åˆ†åŒºä¹Ÿä¼šè¢«åˆ é™¤â€‹            è‹¥åˆ é™¤çˆ¶åˆ†åŒºï¼Œå…¶æ‰€æœ‰å­åˆ†åŒºä¹Ÿéƒ½ä¼šå¤‡åˆ é™¤â€‹            è‹¥åˆ é™¤çš„åˆ†åŒºï¼Œåˆ†åˆ«åœ¨å¤šä¸ªä¸åŒçˆ¶åˆ†åŒºä¸­å­˜åœ¨ï¼Œåˆ™éƒ½ä¼šè¢«åˆ é™¤   é‡å‘½ååˆ†åŒºæ—¶ï¼šâ€‹            ä¿®æ”¹ä¹‹åçš„åå­—ä¸èƒ½æ˜¯å·²ç»å­˜åœ¨çš„</code></pre><ul><li><strong>æ³¨æ„ï¼šåœ¨åˆ›å»º åˆ é™¤å¤šåˆ†åŒºç­‰æ“ä½œæ—¶ä¸€å®šè¦æ³¨æ„åˆ†åŒºçš„å…ˆåé¡ºåºï¼Œä»–ä»¬æ˜¯çˆ¶å­èŠ‚ç‚¹çš„å…³ç³»ã€‚åˆ†åŒºå­—æ®µä¸è¦å’Œè¡¨å­—æ®µç›¸åŒ</strong></li></ul></blockquote><blockquote><p><code>ç±»åˆ«ï¼š</code></p><ul><li>å•åˆ†åŒºå’Œå¤šåˆ†åŒº</li><li>é™æ€åˆ†åŒºå’ŒåŠ¨æ€åˆ†åŒº</li></ul></blockquote><h4 id="ï¼ˆ1ï¼‰åˆ›å»ºåˆ†åŒº"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºåˆ†åŒº" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºåˆ†åŒº"></a>ï¼ˆ1ï¼‰åˆ›å»ºåˆ†åŒº</h4><ul><li><h5 id="å•åˆ†åŒºå»ºè¡¨"><a href="#å•åˆ†åŒºå»ºè¡¨" class="headerlink" title="å•åˆ†åŒºå»ºè¡¨"></a>å•åˆ†åŒºå»ºè¡¨</h5></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table day_table(</span><br><span class="line">id int, </span><br><span class="line">content string</span><br><span class="line">) </span><br><span class="line">partitioned by (dt string) </span><br><span class="line">row format delimited fields terminated by &apos;,&apos;;</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ï¼š</code>ã€å•åˆ†åŒºè¡¨ï¼ŒæŒ‰å¤©åˆ†åŒºï¼Œåœ¨è¡¨ç»“æ„ä¸­å­˜åœ¨idï¼Œcontentï¼Œdtä¸‰åˆ—ï¼›ä»¥dtä¸ºæ–‡ä»¶å¤¹åŒºåˆ†ã€‘</p><ul><li><h5 id="åŒåˆ†åŒºå»ºè¡¨"><a href="#åŒåˆ†åŒºå»ºè¡¨" class="headerlink" title="åŒåˆ†åŒºå»ºè¡¨"></a>åŒåˆ†åŒºå»ºè¡¨</h5></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table day_hour_table (</span><br><span class="line">id int,</span><br><span class="line">content string</span><br><span class="line">) </span><br><span class="line">partitioned by (dt string, hour string) </span><br><span class="line">row format delimited fields terminated by &apos;,&apos;;</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ï¼š</code></p><p>ã€åŒåˆ†åŒºè¡¨ï¼ŒæŒ‰å¤©å’Œå°æ—¶åˆ†åŒºï¼Œåœ¨è¡¨ç»“æ„ä¸­æ–°å¢åŠ äº†dtå’Œhourä¸¤åˆ—ï¼›å…ˆä»¥dtä¸ºæ–‡ä»¶å¤¹ï¼Œå†ä»¥hourå­æ–‡ä»¶å¤¹åŒºåˆ†ã€‘</p><h4 id="ï¼ˆ2ï¼‰æ·»åŠ åˆ†åŒºè¡¨çš„åˆ†åŒº"><a href="#ï¼ˆ2ï¼‰æ·»åŠ åˆ†åŒºè¡¨çš„åˆ†åŒº" class="headerlink" title="ï¼ˆ2ï¼‰æ·»åŠ åˆ†åŒºè¡¨çš„åˆ†åŒº"></a>ï¼ˆ2ï¼‰æ·»åŠ åˆ†åŒºè¡¨çš„åˆ†åŒº</h4><p>ï¼ˆè¡¨å·²åˆ›å»ºï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ åˆ†åŒºï¼šæŒ‰ä»€ä¹ˆåˆ†åŒºï¼‰ï¼š</p><p><code>æ³¨æ„ï¼šæŠ¥é”™</code>ï¼šæ­¤æ—¶æ·»åŠ ï¼Œè¦æ³¨æ„åˆ†åŒºçš„ä¸ªæ•°ç›¸å¯¹åº”ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FAILED: ValidationFailureSemanticException Partition spec &#123;dt=2008-08-08, hour=08&#125; contains non-partition columns</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ï¼šæŠ¥é”™</code>æ­¤æ—¶æ·»åŠ ï¼Œè¦æ³¨æ„åˆ†åŒºçš„å­—æ®µåè¦å¯¹åº”æ·»åŠ ï¼Œå¦åˆ™ä¼šä¿å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FAILED: ValidationFailureSemanticException Partition spec &#123;d=2008-08-08&#125; contains non-partition columns</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ï¼š</code>ä¸€å®šæ˜¯å­˜åœ¨åˆ†åŒºï¼Œæ‰å¯æ·»åŠ </p><p> æ·»åŠ åˆ†åŒºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">ADD partition_spec [ LOCATION &apos;location1&apos; ] partition_spec [ LOCATION &apos;location2&apos; ] ...</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹ï¼š </span><br><span class="line">ALTER TABLE day_table ADD PARTITION (dt=&apos;2028-08-08&apos;, hour=&apos;08&apos;);</span><br><span class="line">ALTER TABLE day_table ADD PARTITION (dt=&apos;2028-08-08&apos;);</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰åˆ é™¤åˆ†åŒº"><a href="#ï¼ˆ3ï¼‰åˆ é™¤åˆ†åŒº" class="headerlink" title="ï¼ˆ3ï¼‰åˆ é™¤åˆ†åŒº"></a>ï¼ˆ3ï¼‰åˆ é™¤åˆ†åŒº</h4><p>è¯­æ³•ï¼šï¼ˆâ€“ ç”¨æˆ·å¯ä»¥ç”¨ ALTER TABLE DROP PARTITION æ¥åˆ é™¤åˆ†åŒºã€‚åˆ†åŒºçš„å…ƒæ•°æ®å’Œæ•°æ®å°†è¢«ä¸€å¹¶åˆ é™¤ã€‚ï¼‰</p><p>åˆ é™¤å¦‚åŒåˆ†åŒºä¸­çš„å­çº§åˆ†åŒºæ—¶ï¼Œå¦‚æœä»…å‰©ä¸€ä¸ªå­åˆ†åŒºï¼Œé‚£ä¹ˆçˆ¶çº§åˆ†åŒºä¹Ÿä¼šè¢«åˆ é™¤ã€‚ï¼ˆè¿åï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name DROP partition_spec, partition_spec,...</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹ï¼š</span><br><span class="line">ALTER TABLE day_hour_table DROP PARTITION (dt=&apos;2008-08-08&apos;, hour=&apos;08&apos;);</span><br><span class="line"></span><br><span class="line">ALTER TABLE day_hour_table DROP PARTITION (dt=&apos;2008-08-08&apos;);</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰æ•°æ®åŠ è½½è¿›åˆ†åŒºè¡¨ä¸­"><a href="#ï¼ˆ4ï¼‰æ•°æ®åŠ è½½è¿›åˆ†åŒºè¡¨ä¸­" class="headerlink" title="ï¼ˆ4ï¼‰æ•°æ®åŠ è½½è¿›åˆ†åŒºè¡¨ä¸­"></a>ï¼ˆ4ï¼‰æ•°æ®åŠ è½½è¿›åˆ†åŒºè¡¨ä¸­</h4><p>è¯­æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA [LOCAL] INPATH &apos;filepath&apos; [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1,partcol2=val2 ...)]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HDFSï¼š</span><br><span class="line">LOAD DATA INPATH &apos;/user/pv.txt&apos; INTO TABLE day_hour_table PARTITION(dt=&apos;2008-08-08&apos;, hour=&apos;08&apos;);</span><br><span class="line"></span><br><span class="line">æœ¬åœ°ï¼š</span><br><span class="line">LOAD DATA local INPATH &apos;/user/hua/*&apos; INTO TABLE day_hour partition(dt=&apos;2010-07-07&apos;);</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰æŸ¥çœ‹è¡¨çš„æ‰€æœ‰åˆ†åŒº"><a href="#ï¼ˆ5ï¼‰æŸ¥çœ‹è¡¨çš„æ‰€æœ‰åˆ†åŒº" class="headerlink" title="ï¼ˆ5ï¼‰æŸ¥çœ‹è¡¨çš„æ‰€æœ‰åˆ†åŒº"></a>ï¼ˆ5ï¼‰æŸ¥çœ‹è¡¨çš„æ‰€æœ‰åˆ†åŒº</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; show partitions day_hour_table;</span><br><span class="line"></span><br><span class="line">show partitions day_table;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ6ï¼‰é‡å‘½ååˆ†åŒº"><a href="#ï¼ˆ6ï¼‰é‡å‘½ååˆ†åŒº" class="headerlink" title="ï¼ˆ6ï¼‰é‡å‘½ååˆ†åŒº"></a>ï¼ˆ6ï¼‰é‡å‘½ååˆ†åŒº</h4><p>è¯­æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name PARTITION partition_spec RENAME TO PARTITION partition_spec;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹ï¼š</span><br><span class="line">ALTER TABLE day_table PARTITION (tian=&apos;2018-05-01&apos;) RENAME TO PARTITION (tain=&apos;2018-06-01&apos;);</span><br></pre></td></tr></table></figure><blockquote><p>Hiveçš„å‡½æ•°è¯¾å‚è€ƒå®˜ç½‘ï¼Œç”¨æ—¶æŸ¥é˜…å³å¯ï¼š <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF</a></p></blockquote><h4 id="ï¼ˆ7ï¼‰åŠ¨æ€åˆ†åŒº-é‡è¦-â€“æ³¨æ„å¤–éƒ¨è¡¨"><a href="#ï¼ˆ7ï¼‰åŠ¨æ€åˆ†åŒº-é‡è¦-â€“æ³¨æ„å¤–éƒ¨è¡¨" class="headerlink" title="ï¼ˆ7ï¼‰åŠ¨æ€åˆ†åŒº(é‡è¦)â€“æ³¨æ„å¤–éƒ¨è¡¨"></a>ï¼ˆ7ï¼‰åŠ¨æ€åˆ†åŒº(é‡è¦)â€“æ³¨æ„å¤–éƒ¨è¡¨</h4><ol><li><p>åœ¨æœ¬åœ°æ–‡ä»¶/home/grid/a.txtä¸­å†™å…¥ä»¥ä¸‹4è¡Œæ•°æ®</p><blockquote><p> aaa,US,CA<br> aaa,US,CB<br> bbb,CA,BB<br> bbb,CA,BC</p></blockquote></li><li><p>å»ºç«‹éåˆ†åŒºè¡¨å¹¶åŠ è½½æ•°æ® </p></li></ol><blockquote><p>åˆ›å»ºè¡¨</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE info1 (</span><br><span class="line">      name STRING, </span><br><span class="line">      cty STRING, </span><br><span class="line">      st STRING</span><br><span class="line">) </span><br><span class="line">ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;;</span><br></pre></td></tr></table></figure><blockquote><p>åŠ è½½æ•°æ®</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA LOCAL INPATH &apos;/root/su/a&apos; INTO TABLE info1;</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM info1;</span><br></pre></td></tr></table></figure><ol start="3"><li>å»ºç«‹å¤–éƒ¨åˆ†åŒºè¡¨å¹¶åŠ¨æ€åŠ è½½æ•°æ®  ï¼ˆæ³¨æ„åˆ é™¤å¤–éƒ¨è¡¨çš„ç›¸å…³äº‹é¡¹ï¼‰</li></ol><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; CREATE EXTERNAL TABLE info2 (</span><br><span class="line">&gt; name STRING</span><br><span class="line">&gt; ) </span><br><span class="line">&gt; PARTITIONED BY (country STRING, state STRING);   </span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote></blockquote><ol start="4"><li>è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨åŠ¨æ€åˆ†åŒºæ¥å®ç°ï¼Œä½¿ç”¨åŠ¨æ€åˆ†åŒºéœ€è¦æ³¨æ„è®¾å®šä»¥ä¸‹å‚æ•°ï¼š</li></ol><blockquote><p> <strong>hive.exec.dynamic.partition</strong></p><p>é»˜è®¤å€¼ï¼šfalse</p><p>æ˜¯å¦å¼€å¯åŠ¨æ€åˆ†åŒºåŠŸèƒ½ï¼Œé»˜è®¤falseå…³é—­ã€‚</p><p>ä½¿ç”¨åŠ¨æ€åˆ†åŒºæ—¶å€™ï¼Œè¯¥å‚æ•°å¿…é¡»è®¾ç½®æˆtrue;</p></blockquote><blockquote><p><strong>hive.exec.dynamic.partition.mode</strong></p><p>é»˜è®¤å€¼ï¼šstrict</p><p>åŠ¨æ€åˆ†åŒºçš„æ¨¡å¼ï¼Œé»˜è®¤strictï¼Œè¡¨ç¤ºå¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ªåˆ†åŒºä¸ºé™æ€åˆ†åŒºï¼Œnonstrictæ¨¡å¼è¡¨ç¤ºå…è®¸æ‰€æœ‰çš„åˆ†åŒºå­—æ®µéƒ½å¯ä»¥ä½¿ç”¨åŠ¨æ€åˆ†åŒºã€‚</p><p>ä¸€èˆ¬éœ€è¦è®¾ç½®ä¸ºnonstrict</p></blockquote><blockquote><p> <strong>hive.exec.max.dynamic.partitions.pernode</strong></p><p>é»˜è®¤å€¼ï¼š100</p><p>åœ¨æ¯ä¸ªæ‰§è¡ŒMRçš„èŠ‚ç‚¹ä¸Šï¼Œæœ€å¤§å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªåŠ¨æ€åˆ†åŒºã€‚</p><p>è¯¥å‚æ•°éœ€è¦æ ¹æ®å®é™…çš„æ•°æ®æ¥è®¾å®šã€‚</p><p>æ¯”å¦‚ï¼šæºæ•°æ®ä¸­åŒ…å«äº†ä¸€å¹´çš„æ•°æ®ï¼Œå³dayå­—æ®µæœ‰365ä¸ªå€¼ï¼Œé‚£ä¹ˆè¯¥å‚æ•°å°±éœ€è¦è®¾ç½®æˆå¤§äº365ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤å€¼100ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p></blockquote><blockquote><p><strong>hive.exec.max.dynamic.partitions</strong></p><p>é»˜è®¤å€¼ï¼š1000</p><p>åœ¨æ‰€æœ‰æ‰§è¡ŒMRçš„èŠ‚ç‚¹ä¸Šï¼Œæœ€å¤§ä¸€å…±å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªåŠ¨æ€åˆ†åŒºã€‚</p><p>åŒä¸Šå‚æ•°è§£é‡Šã€‚</p></blockquote><blockquote><p> <strong>hive.exec.max.created.files</strong></p><p>é»˜è®¤å€¼ï¼š100000</p><p>æ•´ä¸ªMR Jobä¸­ï¼Œæœ€å¤§å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªHDFSæ–‡ä»¶ã€‚</p><p>ä¸€èˆ¬é»˜è®¤å€¼è¶³å¤Ÿäº†ï¼Œé™¤éä½ çš„æ•°æ®é‡éå¸¸å¤§ï¼Œéœ€è¦åˆ›å»ºçš„æ–‡ä»¶æ•°å¤§äº100000ï¼Œå¯æ ¹æ®å®é™…æƒ…å†µåŠ ä»¥è°ƒæ•´ã€‚</p></blockquote><blockquote><p> <strong>hive.error.on.empty.partition</strong></p><p>é»˜è®¤å€¼ï¼šfalse</p><p>å½“æœ‰ç©ºåˆ†åŒºç”Ÿæˆæ—¶ï¼Œæ˜¯å¦æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>ä¸€èˆ¬ä¸éœ€è¦è®¾ç½®ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">set hive.exec.dynamic.partition=true;  </span><br><span class="line"></span><br><span class="line">set hive.exec.dynamic.partition.mode=nonstrict;  </span><br><span class="line"></span><br><span class="line">set hive.exec.max.dynamic.partitions.pernode=1000;  </span><br><span class="line"></span><br><span class="line">INSERT INTO TABLE info2 PARTITION (country, state) SELECT name, cty, st FROM info1; </span><br><span class="line"></span><br><span class="line">INSERT INTO TABLE info2 PARTITION (country, state) SELECT name, cty, st FROM info1; </span><br><span class="line"></span><br><span class="line">SELECT * FROM info2;</span><br></pre></td></tr></table></figure><h3 id="2ã€è‡ªå®šä¹‰å‡½æ•°UDF-UDAF-UDTF"><a href="#2ã€è‡ªå®šä¹‰å‡½æ•°UDF-UDAF-UDTF" class="headerlink" title="2ã€è‡ªå®šä¹‰å‡½æ•°UDF  UDAF UDTF"></a>2ã€è‡ªå®šä¹‰å‡½æ•°UDF  UDAF UDTF</h3><blockquote><p>è‡ªå®šä¹‰å‡½æ•°åŒ…æ‹¬ä¸‰ç§ UDFã€UDAFã€UDTF</p><p>UDFï¼šä¸€è¿›ä¸€å‡º</p><p>UDAFï¼šèšé›†å‡½æ•°ï¼Œå¤šè¿›ä¸€å‡ºã€‚å¦‚ï¼šCount/max/min</p><p>UDTFï¼šä¸€è¿›å¤šå‡ºï¼Œå¦‚ lateralview  explore()ï¼Œï¼ˆç±»ä¼¼äºmysqlä¸­çš„è§†å›¾ï¼‰</p><p><strong>ä½¿ç”¨æ–¹å¼</strong> ï¼šåœ¨HIVEä¼šè¯ä¸­addè‡ªå®šä¹‰å‡½æ•°çš„jar æ–‡ä»¶ï¼Œç„¶ååˆ›å»º function ç»§è€Œä½¿ç”¨å‡½æ•°</p></blockquote><h4 id="ï¼ˆ1ï¼‰UDF-å¼€å‘ï¼ˆç”¨çš„å¤šä¸€ç‚¹ï¼‰"><a href="#ï¼ˆ1ï¼‰UDF-å¼€å‘ï¼ˆç”¨çš„å¤šä¸€ç‚¹ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰UDF å¼€å‘ï¼ˆç”¨çš„å¤šä¸€ç‚¹ï¼‰"></a>ï¼ˆ1ï¼‰UDF å¼€å‘ï¼ˆç”¨çš„å¤šä¸€ç‚¹ï¼‰</h4><p><strong>1ã€</strong>UDFå‡½æ•°å¯ä»¥ç›´æ¥åº”ç”¨äº select è¯­å¥ï¼Œå¯¹æŸ¥è¯¢ç»“æ„åšæ ¼å¼åŒ–å¤„ç†åï¼Œå†è¾“å‡ºå†…å®¹ã€‚</p><p><strong>2ã€</strong>ç¼–å†™ UDF å‡½æ•°çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><p>  aï¼‰è‡ªå®šä¹‰ UDF éœ€è¦<code>ç»§æ‰¿</code> org.apache.hadoop.hive.ql.<code>UDF</code>ã€‚</p><p>  bï¼‰éœ€è¦<code>å®ç°</code> <code>evaluate</code> å‡½æ•°ï¼Œevaluate å‡½æ•°æ”¯æŒé‡è½½ã€‚</p><p><strong>3ã€</strong>æ­¥éª¤</p><p>  aï¼‰æŠŠç¨‹åºæ‰“åŒ…æ”¾åˆ°ç›®æ ‡æœºå™¨ä¸Šå»ï¼›</p><p>ï¼ˆéœ€è¦hiveå’Œhadoopï¼Œjdk çš„ç›¸å…³jaråŒ…ï¼‰</p><p>å‡½æ•°ä¸€ï¼šè„±æ•å¤„ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bigdata.hive.udf;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.exec.UDF;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TuoMing</span> <span class="keyword">extends</span> <span class="title">UDF</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> Text res = <span class="keyword">new</span> Text();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Text <span class="title">evaluate</span><span class="params">(String string)</span> </span>&#123;</span><br><span class="line"><span class="comment">// æ ¡éªŒå‚æ•°æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(string==<span class="keyword">null</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">// è‹¥ä¸ºå•ä¸ªå­—ç¬¦        </span></span><br><span class="line"><span class="keyword">if</span>(string.length()==<span class="number">1</span>)&#123;</span><br><span class="line">res.set(<span class="string">"*"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  String str1 = string.substring(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">  String str2 = string.substring(string.length()-<span class="number">1</span>,string.length());</span><br><span class="line">  res.set(str1+<span class="string">"***"</span>+str2);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°äºŒï¼šaddå‡½æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bigdata.hive.udf;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.exec.UDF;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Add</span> <span class="keyword">extends</span> <span class="title">UDF</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> Text res = <span class="keyword">new</span> Text();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Text <span class="title">evaluate</span><span class="params">(String num1,String num2)</span> </span>&#123;</span><br><span class="line"><span class="comment">// æ ¡éªŒå‚æ•°æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(num1==<span class="keyword">null</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(num2==<span class="keyword">null</span>)&#123;</span><br><span class="line">res.set(num1);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n = Integer.parseInt(num1)+Integer.parseInt(num2);</span><br><span class="line">    String str =n+<span class="string">""</span>;</span><br><span class="line">    res.set(str);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  bï¼‰è¿›å…¥ hive å®¢æˆ·ç«¯ï¼Œæ·»åŠ  jar åŒ…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;add jar /root/su/TuoMing.jar;</span><br><span class="line">(ç›¸å½“äºæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­)</span><br><span class="line">(æ¸…é™¤ç¼“å­˜æ—¶è®°å¾—åˆ é™¤jaråŒ…ï¼š delete jar /*)</span><br><span class="line">delete jar /jar/udf_test.jar;</span><br></pre></td></tr></table></figure><p>  cï¼‰åˆ›å»ºä¸´æ—¶å‡½æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;CREATE TEMPORARY FUNCTION add_example AS &apos;hive.udf.add&apos;;</span><br><span class="line">CREATE TEMPORARY FUNCTION tm_example AS &apos;com.bigdata.hive.udf.TuoMing&apos;;</span><br><span class="line">ï¼ˆas åé¢æ·»åŠ çš„æ˜¯ï¼šåŒ…å+ç±»åï¼‰</span><br></pre></td></tr></table></figure><p>  dï¼‰æŸ¥è¯¢ HQL è¯­å¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT  add_example(8,  9)  FROM  scores;</span><br><span class="line"></span><br><span class="line">SELECT  add_example(scores.math,  scores.art)  FROM  scores;</span><br><span class="line"></span><br><span class="line">SELECT  tm_example(id)  FROM  log;</span><br></pre></td></tr></table></figure><p>  eï¼‰é”€æ¯ä¸´æ—¶å‡½æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;  DROP  TEMPORARY  FUNCTION  tm_example;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰UDAFè‡ªå®šä¹‰é›†å‡½æ•°-ç”¨çš„å°‘"><a href="#ï¼ˆ2ï¼‰UDAFè‡ªå®šä¹‰é›†å‡½æ•°-ç”¨çš„å°‘" class="headerlink" title="ï¼ˆ2ï¼‰UDAFè‡ªå®šä¹‰é›†å‡½æ•°(ç”¨çš„å°‘)"></a>ï¼ˆ2ï¼‰UDAFè‡ªå®šä¹‰é›†å‡½æ•°(ç”¨çš„å°‘)</h4><blockquote><p>å¤šè¡Œè¿›ä¸€è¡Œå‡ºï¼Œå¦‚ sum()ã€min()ï¼Œç”¨åœ¨ group  by æ—¶</p></blockquote><p><strong>1.</strong>å¿…é¡»<code>ç»§æ‰¿</code>org.apache.hadoop.hive.ql.exec.<code>UDAF</code>(å‡½æ•°ç±»ç»§æ‰¿)</p><p>org.apache.hadoop.hive.ql.exec.<code>UDAFEvaluator</code>(å†…éƒ¨ç±» Eval uator å®ç° UDAFEvaluator æ¥å£)</p><p><strong>2.</strong>Evaluator éœ€è¦å®ç° <code>initã€iterateã€terminatePartialã€mergeã€terminate</code> è¿™å‡ ä¸ªå‡½æ•°</p><blockquote><ul><li><p>init():ç±»ä¼¼äºæ„é€ å‡½æ•°ï¼Œç”¨äº UDAF çš„åˆå§‹åŒ–</p></li><li><p>iterate():æ¥æ”¶ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶è¿›è¡Œå†…éƒ¨çš„è½®è½¬ï¼Œè¿”å› boolean</p></li><li><p>terminatePartial():æ— å‚æ•°ï¼Œå…¶ä¸º iterate å‡½æ•°è½®è½¬ç»“æŸåï¼Œè¿”å›è½®è½¬æ•°æ®ï¼Œ</p></li></ul><p>ç±»ä¼¼äº hadoop çš„Combinermerge():æ¥æ”¶ terminatePartial çš„è¿”å›ç»“æœï¼Œè¿›è¡Œæ•°æ® merge æ“ä½œï¼Œ</p><p>â€‹                                                                  å…¶è¿”å›ç±»å‹ä¸º boolean </p><ul><li>terminate():è¿”å›æœ€ç»ˆçš„èšé›†å‡½æ•°ç»“æœ</li></ul></blockquote><p>å¼€å‘ä¸€ä¸ªåŠŸèƒ½åŒï¼š</p><blockquote><p>Oracle çš„ wm_concat()å‡½æ•°</p><p>Mysql çš„ group_concat()</p></blockquote><blockquote><p>Hive  UDF çš„æ•°æ®ç±»å‹ï¼š</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz53mse6n1j30fe0c3jxm.jpg" alt="Hive  UDF çš„æ•°æ®ç±»å‹ï¼š"><span class="img-alt">Hive  UDF çš„æ•°æ®ç±»å‹ï¼š</span></p><h4 id="ï¼ˆ3ï¼‰UDTFï¼ˆç”¨çš„å°‘ä¸€ç‚¹ï¼‰"><a href="#ï¼ˆ3ï¼‰UDTFï¼ˆç”¨çš„å°‘ä¸€ç‚¹ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰UDTFï¼ˆç”¨çš„å°‘ä¸€ç‚¹ï¼‰"></a>ï¼ˆ3ï¼‰UDTFï¼ˆç”¨çš„å°‘ä¸€ç‚¹ï¼‰</h4><p>UDTFï¼šä¸€è¿›å¤šå‡ºï¼Œå¦‚ lateral  view  explode( )  è¿”å›ä¸€ä¸ªæ•°ç»„è¡¨</p><blockquote><p><strong>Hive Lateral View</strong>   è§†å›¾</p><p>Lateral Viewç”¨äºå’ŒUDTFå‡½æ•°ï¼ˆexplodeã€splitï¼‰ç»“åˆæ¥ä½¿ç”¨ã€‚</p><p>é¦–å…ˆé€šè¿‡UDTFå‡½æ•°æ‹†åˆ†æˆå¤šè¡Œï¼Œå†å°†å¤šè¡Œç»“æœç»„åˆæˆä¸€ä¸ªæ”¯æŒåˆ«åçš„è™šæ‹Ÿè¡¨ã€‚</p><p><code>ä¸»è¦è§£å†³</code></p><p>åœ¨selectä½¿ç”¨UDTFåšæŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼ŒæŸ¥è¯¢åªèƒ½åŒ…å«å•ä¸ªUDTFï¼Œä¸èƒ½åŒ…å«å…¶ä»–å­—æ®µã€ä»¥åŠå¤šä¸ªUDTFçš„é—®é¢˜</p></blockquote><blockquote><p><code>è¯­æ³•ï¼š</code></p><p>LATERAL VIEW udtf(expression) tableAlias AS columnAlias (â€˜,â€™ columnAlias)</p></blockquote><blockquote><p><code>ä¾‹ï¼š</code></p><p>ç»Ÿè®¡äººå‘˜è¡¨ä¸­å…±æœ‰å¤šå°‘ç§çˆ±å¥½ã€å¤šå°‘ä¸ªåŸå¸‚?</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; select count(distinct(myCol1)), count(distinct(myCol2))ï¼Œcount(distinct(myCol3))from log2 </span><br><span class="line">&gt;       LATERAL VIEW explode(likes) myTable1 AS myCol1 </span><br><span class="line">&gt;       LATERAL VIEW explode(address) myTable2 AS myCol2, myCol3;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select myCol1, myCol2 from log2 </span><br><span class="line">      LATERAL VIEW explode(likes) myTable1 AS myCol1 </span><br><span class="line">      LATERAL VIEW explode(address) myTable2 AS myCol2, myCol3;</span><br></pre></td></tr></table></figure><blockquote><p>distinct(myCol1) è¡¨ç¤ºå»é‡</p></blockquote><blockquote><p>LATERAL VIEW explode(likes) myTable1   AS myCol1   </p><p>å°†likesæŸ¥è¯¢ç»“æœæ”¾åˆ°mytable1è¡¨ä¸­ï¼Œä½œä¸ºå­—æ®µmyCol1     </p></blockquote><blockquote><p> LATERAL VIEW explode(address) myTable2 AS myCol2, myCol3;</p><p>å°†addressæŸ¥è¯¢ç»“æœæ”¾åˆ°myTable2 è¡¨ä¸­ï¼Œä½œä¸ºå­—æ®µmyCol2ï¼ŒmyCol3ï¼Œå› ä¸ºaddressæ˜¯åŒ…å«K-Vçš„ï¼ˆä¸¤ä¸ªï¼‰</p></blockquote><h2 id="å…«ã€Hiveç´¢å¼•-çŸ¥é“"><a href="#å…«ã€Hiveç´¢å¼•-çŸ¥é“" class="headerlink" title="å…«ã€Hiveç´¢å¼•(çŸ¥é“)"></a>å…«ã€Hiveç´¢å¼•(çŸ¥é“)</h2><blockquote><p>ä¸€ä¸ªè¡¨ä¸Šåˆ›å»ºç´¢å¼•ï¼š</p><p>ä½¿ç”¨ç»™å®šçš„åˆ—è¡¨çš„åˆ—ä½œä¸ºé”®åˆ›å»ºä¸€ä¸ªç´¢å¼•ã€‚</p><p>è¯¦è§åˆ›å»º<a href="javascript:changelink(&#39;https://cwiki.apache.org/confluence/display/Hive/IndexDev#IndexDev-CREATEINDEX&#39;,&#39;EN2ZH_CN&#39;" target="_blank" rel="noopener">ç´¢å¼•</a>;)è®¾è®¡æ–‡æ¡£ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX index_name</span><br><span class="line">  ON TABLE base_table_name (col_name, ...)</span><br><span class="line">  AS index_type</span><br><span class="line">  [WITH DEFERRED REBUILD]</span><br><span class="line">  [IDXPROPERTIES (property_name=property_value, ...)]</span><br><span class="line">  [IN TABLE index_table_name]</span><br><span class="line">  [</span><br><span class="line">     [ ROW FORMAT ...] STORED AS ...</span><br><span class="line">     | STORED BY ...</span><br><span class="line">  ]</span><br><span class="line">  [LOCATION hdfs_path]</span><br><span class="line">  [TBLPROPERTIES (...)]</span><br><span class="line">  [COMMENT &quot;index comment&quot;];</span><br></pre></td></tr></table></figure><h2 id="ä¹ã€æ¡ˆä¾‹å®è·µ"><a href="#ä¹ã€æ¡ˆä¾‹å®è·µ" class="headerlink" title="ä¹ã€æ¡ˆä¾‹å®è·µ"></a>ä¹ã€æ¡ˆä¾‹å®è·µ</h2><h3 id="æ¡ˆä¾‹ä¸€ï¼š-åŸºç«™æ‰è¯ç‡"><a href="#æ¡ˆä¾‹ä¸€ï¼š-åŸºç«™æ‰è¯ç‡" class="headerlink" title="æ¡ˆä¾‹ä¸€ï¼š(åŸºç«™æ‰è¯ç‡)"></a>æ¡ˆä¾‹ä¸€ï¼š(åŸºç«™æ‰è¯ç‡)</h3><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz53p74gyrj30fe07sab1.jpg" alt="åŸºç«™æ‰è¯ç‡"><span class="img-alt">åŸºç«™æ‰è¯ç‡</span></p><h4 id="1ã€åˆ›å»ºè¡¨"><a href="#1ã€åˆ›å»ºè¡¨" class="headerlink" title="1ã€åˆ›å»ºè¡¨"></a>1ã€åˆ›å»ºè¡¨</h4><p>cell_monitorè¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">create table cell_monitor(</span><br><span class="line">        record_time string,</span><br><span class="line">        imei string,</span><br><span class="line">        cell string,</span><br><span class="line">        ph_num int,</span><br><span class="line">        call_num int,</span><br><span class="line">        drop_num int,</span><br><span class="line">        duration int,</span><br><span class="line">        drop_rate DOUBLE,</span><br><span class="line">        net_type string,</span><br><span class="line">        erl string</span><br><span class="line">)</span><br><span class="line">ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;</span><br><span class="line">STORED AS TEXTFILE;</span><br></pre></td></tr></table></figure><p> ç»“æœè¡¨cell_drop_monitor</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table cell_drop_monitor(</span><br><span class="line">imei string,</span><br><span class="line">total_call_num int,</span><br><span class="line">total_drop_num int,</span><br><span class="line">d_rate DOUBLE</span><br><span class="line">) </span><br><span class="line">ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;\t&apos;</span><br><span class="line">STORED AS TEXTFILE;</span><br></pre></td></tr></table></figure><h4 id="2ã€loadæ•°æ®"><a href="#2ã€loadæ•°æ®" class="headerlink" title="2ã€loadæ•°æ®"></a><strong>2</strong>ã€load<strong>æ•°æ®</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA LOCAL INPATH &apos;/root/su/cdr_summ_imei_cell_info.csv&apos; OVERWRITE INTO TABLE cell_monitor;</span><br></pre></td></tr></table></figure><h4 id="3ã€æ‰¾å‡ºæ‰çº¿ç‡æœ€é«˜çš„åŸºç«™"><a href="#3ã€æ‰¾å‡ºæ‰çº¿ç‡æœ€é«˜çš„åŸºç«™" class="headerlink" title="3ã€æ‰¾å‡ºæ‰çº¿ç‡æœ€é«˜çš„åŸºç«™"></a><strong>3</strong>ã€æ‰¾å‡ºæ‰çº¿ç‡æœ€é«˜çš„åŸºç«™</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from cell_monitor cm </span><br><span class="line">insert overwrite table cell_drop_monitor  </span><br><span class="line">select cm.imei ,sum(cm.drop_num),sum(cm.duration),sum(cm.drop_num)/sum(cm.duration) d_rate </span><br><span class="line">group by cm.imei </span><br><span class="line">sort by d_rate desc;</span><br></pre></td></tr></table></figure><h3 id="æ¡ˆä¾‹äºŒï¼šï¼ˆå•è¯ç»Ÿè®¡ï¼‰"><a href="#æ¡ˆä¾‹äºŒï¼šï¼ˆå•è¯ç»Ÿè®¡ï¼‰" class="headerlink" title="æ¡ˆä¾‹äºŒï¼šï¼ˆå•è¯ç»Ÿè®¡ï¼‰"></a>æ¡ˆä¾‹äºŒï¼šï¼ˆå•è¯ç»Ÿè®¡ï¼‰</h3><h4 id="1ã€å»ºè¡¨"><a href="#1ã€å»ºè¡¨" class="headerlink" title="1ã€å»ºè¡¨"></a><strong>1</strong>ã€å»ºè¡¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create table docs(line string);</span><br><span class="line">create table wc(word string, totalword int);</span><br></pre></td></tr></table></figure><h4 id="2ã€åŠ è½½æ•°æ®"><a href="#2ã€åŠ è½½æ•°æ®" class="headerlink" title="2ã€åŠ è½½æ•°æ®"></a>2ã€åŠ è½½æ•°æ®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">load data local inpath &apos;/tmp/wc&apos; into table docs;</span><br></pre></td></tr></table></figure><h4 id="3ã€ç»Ÿè®¡"><a href="#3ã€ç»Ÿè®¡" class="headerlink" title="3ã€ç»Ÿè®¡"></a>3ã€ç»Ÿè®¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from (select explode(split(line, &apos; &apos;)) as word from docs) w </span><br><span class="line">insert into table wc </span><br><span class="line">  select word, count(1) as totalword </span><br><span class="line">  group by word </span><br><span class="line">  order by word;</span><br></pre></td></tr></table></figure><h4 id="4ã€æŸ¥è¯¢ç»“æœ"><a href="#4ã€æŸ¥è¯¢ç»“æœ" class="headerlink" title="4ã€æŸ¥è¯¢ç»“æœ"></a><strong>4</strong>ã€æŸ¥è¯¢ç»“æœ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from wc;</span><br></pre></td></tr></table></figure><h2 id="åã€åˆ†æ¡¶ï¼ˆé‡è¦ï¼‰"><a href="#åã€åˆ†æ¡¶ï¼ˆé‡è¦ï¼‰" class="headerlink" title="åã€åˆ†æ¡¶ï¼ˆé‡è¦ï¼‰"></a>åã€åˆ†æ¡¶ï¼ˆé‡è¦ï¼‰</h2><h3 id="1ã€æ¦‚å¿µ"><a href="#1ã€æ¦‚å¿µ" class="headerlink" title="1ã€æ¦‚å¿µ"></a>1ã€æ¦‚å¿µ</h3><blockquote><ul><li><p>ä¸»è¦åº”ç”¨äº<code>æ•°æ®æŠ½æ ·</code>ã€‚</p></li><li><p>é€šè¿‡å¯¹<code>åˆ—å€¼å–å“ˆå¸Œ</code>å€¼çš„æ–¹å¼ï¼Œå°†ä¸åŒæ•°æ®æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­å­˜å‚¨ã€‚</p></li><li><p>å¯¹Hiveä¸­æ¯ä¸ª<code>è¡¨</code>ã€<code>åˆ†åŒº</code>éƒ½å¯ä»¥è¿›è¡Œåˆ†æ¡¶ã€‚</p></li><li><p>åˆ—çš„å“ˆå¸Œå€¼ /æ¡¶çš„ä¸ªæ•°â†’<code>å†³å®š</code>æ¯æ¡æ•°æ®åˆ’åˆ†åˆ°å“ªä¸ªæ¡¶ä¸­</p></li></ul></blockquote><h3 id="2ã€å¼€å¯æ”¯æŒåˆ†æ¡¶"><a href="#2ã€å¼€å¯æ”¯æŒåˆ†æ¡¶" class="headerlink" title="2ã€å¼€å¯æ”¯æŒåˆ†æ¡¶"></a>2ã€å¼€å¯æ”¯æŒåˆ†æ¡¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; set hive.enforce.bucketing=true;</span><br></pre></td></tr></table></figure><blockquote><p>é»˜è®¤ï¼šfalseï¼›</p><p>è®¾ç½®ä¸ºtrueä¹‹åï¼Œmrè¿è¡Œæ—¶ä¼šæ ¹æ®bucketçš„ä¸ªæ•°è‡ªåŠ¨åˆ†é…reduce taskä¸ªæ•°ã€‚</p><p>ï¼ˆç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡mapred.reduce.tasksè‡ªå·±è®¾ç½®reduceä»»åŠ¡ä¸ªæ•°ï¼Œä½†åˆ†æ¡¶æ—¶ä¸æ¨èä½¿ç”¨ï¼‰</p><p><strong>ä¸€æ¬¡ä½œä¸šäº§ç”Ÿçš„æ¡¶æ•° = reducde taskæ•°</strong></p></blockquote><h3 id="3ã€å¾€åˆ†æ¡¶è¡¨ä¸­åŠ è½½æ•°æ®"><a href="#3ã€å¾€åˆ†æ¡¶è¡¨ä¸­åŠ è½½æ•°æ®" class="headerlink" title="3ã€å¾€åˆ†æ¡¶è¡¨ä¸­åŠ è½½æ•°æ®"></a>3ã€å¾€åˆ†æ¡¶è¡¨ä¸­åŠ è½½æ•°æ®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into table bucket_table select columns from tbl;</span><br><span class="line">insert overwrite table bucket_table select columns from tbl;</span><br></pre></td></tr></table></figure><h3 id="4ã€æ¡¶è¡¨"><a href="#4ã€æ¡¶è¡¨" class="headerlink" title="4ã€æ¡¶è¡¨"></a>4ã€æ¡¶è¡¨</h3><h3 id="æŠ½æ ·æŸ¥è¯¢"><a href="#æŠ½æ ·æŸ¥è¯¢" class="headerlink" title="æŠ½æ ·æŸ¥è¯¢"></a>æŠ½æ ·æŸ¥è¯¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from bucket_table tablesample(bucket 1 out of 4 on columns);</span><br></pre></td></tr></table></figure><blockquote><p>TABLESAMPLEè¯­æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; TABLESAMPLE(BUCKET x OUT OF y)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>xï¼šè¡¨ç¤ºä»å“ªä¸ªbucketå¼€å§‹æŠ½å–æ•°æ®ï¼Œ<code>x&lt;=y</code></p><p>yï¼šå¿…é¡»ä¸ºè¯¥è¡¨æ€»bucketæ•°çš„<code>å€æ•°</code>æˆ–<code>å› å­</code></p><p>ç†è§£ï¼š</p><p>åˆ†æ¡¶è¡¨å·²ç»æŒ‰ageåˆ†ä¸º4æ¡¶ï¼Œç„¶åï¼Œæœ‰yä¸ªäººå»æŠ½ï¼Œä»ç¬¬(x å–æ¨¡ æ¡¶æ•°)æ¡¶ä¸­æŠ½</p></blockquote><h3 id="5ã€å®æˆ˜"><a href="#5ã€å®æˆ˜" class="headerlink" title="5ã€å®æˆ˜"></a>5ã€å®æˆ˜</h3><p>åˆ›å»ºæ™®é€šè¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mm( </span><br><span class="line">id INT, </span><br><span class="line">name STRING, </span><br><span class="line">age INT</span><br><span class="line">)</span><br><span class="line">ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ•°æ®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1,tom,11</span><br><span class="line">2,cat,22</span><br><span class="line">3,dog,33</span><br><span class="line">4,hive,44</span><br><span class="line">5,hbase,55</span><br><span class="line">6,mr,66</span><br><span class="line">7,alice,77</span><br><span class="line">8,scala,88</span><br></pre></td></tr></table></figure><p>åŠ è½½æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">load data local inpath &apos;/root/su/mm&apos; into table mm;</span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºåˆ†æ¡¶è¡¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE psnbucket( </span><br><span class="line">id INT, </span><br><span class="line">name STRING, </span><br><span class="line">age INT</span><br><span class="line">)</span><br><span class="line">CLUSTERED BY (age) INTO 4 BUCKETS </span><br><span class="line">ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;;</span><br></pre></td></tr></table></figure><p><strong>åŠ è½½æ•°æ®ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into table psnbucket select id, name, age from mm;</span><br></pre></td></tr></table></figure><p><strong>æŠ½æ ·</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select id, name, age from psnbucket tablesample(bucket 2 out of 4 on age);</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ï¼š</code></p><blockquote><p> hive&gt; select id, name, age from psnbucket tablesample(bucket 4 out of 2 on age);<br>FAILED: SemanticException [Error 10061]: Numerator should not be bigger than denominator in sample clause for table psnbucket</p><p>denominator  : åˆ†æ¯</p></blockquote><h2 id="åä¸€ã€è¿è¡Œæ–¹å¼"><a href="#åä¸€ã€è¿è¡Œæ–¹å¼" class="headerlink" title="åä¸€ã€è¿è¡Œæ–¹å¼"></a>åä¸€ã€è¿è¡Œæ–¹å¼</h2><h3 id="1ã€Hiveè¿è¡Œæ¨¡å¼"><a href="#1ã€Hiveè¿è¡Œæ¨¡å¼" class="headerlink" title="1ã€Hiveè¿è¡Œæ¨¡å¼"></a>1ã€Hiveè¿è¡Œæ¨¡å¼</h3><blockquote><h4 id="â€“-å‘½ä»¤è¡Œæ–¹å¼cliï¼šæ§åˆ¶å°æ¨¡å¼"><a href="#â€“-å‘½ä»¤è¡Œæ–¹å¼cliï¼šæ§åˆ¶å°æ¨¡å¼" class="headerlink" title="â€“ å‘½ä»¤è¡Œæ–¹å¼cliï¼šæ§åˆ¶å°æ¨¡å¼"></a>â€“ å‘½ä»¤è¡Œæ–¹å¼cliï¼šæ§åˆ¶å°æ¨¡å¼</h4></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">--ä¸hdfsäº¤äº’</span><br><span class="line">  * æ‰§è¡Œdfså‘½ä»¤</span><br><span class="line">  * ä¾‹ ï¼šhive&gt; dfs -ls /</span><br><span class="line">  </span><br><span class="line">--ä¸Linuxäº¤äº’</span><br><span class="line">   *  ï¼ å¼€å¤´</span><br><span class="line">   *  hive&gt; !pwd</span><br></pre></td></tr></table></figure><blockquote><h4 id="â€“è„šæœ¬è¿è¡Œæ–¹å¼ï¼šï¼ˆç”Ÿäº§ä¸­å¸¸ç”¨ï¼‰"><a href="#â€“è„šæœ¬è¿è¡Œæ–¹å¼ï¼šï¼ˆç”Ÿäº§ä¸­å¸¸ç”¨ï¼‰" class="headerlink" title="â€“è„šæœ¬è¿è¡Œæ–¹å¼ï¼šï¼ˆç”Ÿäº§ä¸­å¸¸ç”¨ï¼‰"></a>â€“è„šæœ¬è¿è¡Œæ–¹å¼ï¼šï¼ˆç”Ÿäº§ä¸­å¸¸ç”¨ï¼‰</h4></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">åœ¨å¤–éƒ¨shellä¸­æ‰§è¡Œ,æŒ‡å®šæ•°æ®åº“,åˆ†å·å¯åŠ å¯ä¸åŠ </span><br><span class="line"># hive -e &quot;select * from attr.log &quot;</span><br><span class="line"># hive -e &quot;select * from attr.logï¼›select * from default.log2&quot;</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">å°†æ‰§è¡Œç»“æœé‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶ï¼š</span><br><span class="line"># hive -e &quot;select * from attr.log &quot; &gt;&gt;log1</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">é™é»˜æ¨¡å¼æ‰§è¡Œï¼Œä¸æ‰“å°logæ—¥å¿—</span><br><span class="line"># hive -S -e &quot;select * from attr.log &quot; &gt;&gt;log1</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">è„šæœ¬æ‰§è¡Œ</span><br><span class="line">å…ˆç¼–è¾‘è„šæœ¬é—®ä»·</span><br><span class="line"># vim file1</span><br><span class="line">ç¼–è¾‘å†…å®¹</span><br><span class="line">select * from attr.log where id = 1;</span><br><span class="line">select * from attr.log where id &lt; 3;</span><br><span class="line">æ‰§è¡Œè„šæœ¬</span><br><span class="line"># hive -f file1</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">?? ä½¿ç”¨å‘½ä»¤æ–‡ä»¶æ‰§è¡Œhive-init.sql</span><br><span class="line">?? # hive -i /home/hive-init.sql</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">åœ¨hive cliä¸­æ‰§è¡Œè„šæœ¬æ–‡ä»¶</span><br><span class="line">hive&gt; source file1</span><br></pre></td></tr></table></figure><h3 id="ï¼Ÿæœªè§£å†³ï¼Ÿ"><a href="#ï¼Ÿæœªè§£å†³ï¼Ÿ" class="headerlink" title="ï¼Ÿæœªè§£å†³ï¼Ÿ"></a>ï¼Ÿæœªè§£å†³ï¼Ÿ</h3><blockquote><p>?? ä½¿ç”¨å‘½ä»¤æ–‡ä»¶æ‰§è¡Œhive-init.sql<br>?? # hive -i /home/hive-init.sql</p></blockquote><h2 id="åäºŒã€hiveçš„GUIæ¥å£ï¼ˆwebé¡µé¢ï¼‰"><a href="#åäºŒã€hiveçš„GUIæ¥å£ï¼ˆwebé¡µé¢ï¼‰" class="headerlink" title="åäºŒã€hiveçš„GUIæ¥å£ï¼ˆwebé¡µé¢ï¼‰"></a>åäºŒã€hiveçš„GUIæ¥å£ï¼ˆwebé¡µé¢ï¼‰</h2><p>Hive Web GUIæ¥å£</p><h3 id="webç•Œé¢å®‰è£…ï¼š"><a href="#webç•Œé¢å®‰è£…ï¼š" class="headerlink" title="webç•Œé¢å®‰è£…ï¼š"></a>webç•Œé¢å®‰è£…ï¼š</h3><p><strong>1ã€</strong>ä¸‹è½½æºç åŒ…apache-hive-1.2.1-src.tar.gz,</p><p><strong>2ã€</strong>åœ¨æœ¬åœ°Windowsç³»ç»Ÿä¸­è§£å‹</p><p>å¹¶å°†\apache-hive-1.2.1-src\hwi\webè·¯å¾„ä¸­æ‰€æœ‰çš„æ–‡ä»¶æ‰“æˆwaråŒ…</p><p><code>åˆ¶ä½œæ–¹æ³•ï¼š</code></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz5b7di85fj30rn0eodhm.jpg" alt="waråŒ…"><span class="img-alt">waråŒ…</span></p><blockquote><p>1ã€åˆ°\apache-hive-1.2.1-src\hwi\webè·¯å¾„ä¸‹</p><p>2ã€åœ¨è·¯å¾„æ è¾“å…¥å‘½ä»¤ï¼šjar -cvf hive-hwi.war *</p><p>3ã€å³å¯ç”Ÿæˆæ–‡ä»¶ï¼šhive-hwi.war</p></blockquote><p><strong>3ã€</strong>å°†hwi-waråŒ…æ”¾åœ¨$HIVE_HOME/lib/ä¸­ï¼ˆLinuxç³»ç»Ÿï¼‰</p><p><strong>4ã€</strong>å¤åˆ¶tools.jar(åœ¨jdkçš„libç›®å½•ä¸‹)åˆ°$HIVE_HOME/libä¸‹</p><p><strong>5ã€</strong>ä¿®æ”¹hive-site.xml</p><p>è·¯å¾„ï¼š/usr/soft/apache-hive-1.2.1-bin/conf/hive-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.hwi.listen.host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.hwi.listen.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>9999<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.hwi.war.file<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>lib/hive-hwi.war<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>6ã€</strong>å¯åŠ¨hwiæœåŠ¡(ç«¯å£å·9999)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive --service hwi</span><br></pre></td></tr></table></figure><p><strong>7ã€</strong>æµè§ˆå™¨é€šè¿‡ä»¥ä¸‹é“¾æ¥æ¥è®¿é—®</p><p><a href="http://node00:9999/hwi/" target="_blank" rel="noopener">http://node00:9999/hwi/</a></p><p><strong>8ã€</strong>ç™»å½•é¡µé¢ï¼š</p><p>USER:</p><p>GROUPS:</p><p>è‡ªå·²å®šä¹‰</p><h2 id="åä¸‰ã€æƒé™ç®¡ç†"><a href="#åä¸‰ã€æƒé™ç®¡ç†" class="headerlink" title="åä¸‰ã€æƒé™ç®¡ç†"></a>åä¸‰ã€æƒé™ç®¡ç†</h2><p>Hive - SQL Standards Based Authorization in  HiveServer2</p><h3 id="ï¼ˆ1ï¼‰ä¸‰ç§æˆæƒæ¨¡å‹"><a href="#ï¼ˆ1ï¼‰ä¸‰ç§æˆæƒæ¨¡å‹" class="headerlink" title="ï¼ˆ1ï¼‰ä¸‰ç§æˆæƒæ¨¡å‹"></a>ï¼ˆ1ï¼‰ä¸‰ç§æˆæƒæ¨¡å‹</h3><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz5bus4ks8j30kb08o3zp.jpg" alt=""></p><h3 id="ï¼ˆ2ï¼‰å¸¸ç”¨ï¼šåŸºäºSQLæ ‡å‡†çš„å®Œå…¨å…¼å®¹SQLçš„æˆæƒæ¨¡å‹"><a href="#ï¼ˆ2ï¼‰å¸¸ç”¨ï¼šåŸºäºSQLæ ‡å‡†çš„å®Œå…¨å…¼å®¹SQLçš„æˆæƒæ¨¡å‹" class="headerlink" title="ï¼ˆ2ï¼‰å¸¸ç”¨ï¼šåŸºäºSQLæ ‡å‡†çš„å®Œå…¨å…¼å®¹SQLçš„æˆæƒæ¨¡å‹"></a>ï¼ˆ2ï¼‰å¸¸ç”¨ï¼šåŸºäºSQLæ ‡å‡†çš„å®Œå…¨å…¼å®¹SQLçš„æˆæƒæ¨¡å‹</h3><p>ç‰¹ç‚¹ï¼š</p><ul><li><p>æ”¯æŒå¯¹äºç”¨æˆ·çš„æˆæƒè®¤è¯</p></li><li><p>æ”¯æŒè§’è‰²roleçš„æˆæƒè®¤è¯</p></li><li><p>roleå¯ç†è§£ä¸ºæ˜¯ä¸€ç»„æƒé™çš„é›†åˆï¼Œé€šè¿‡roleä¸ºç”¨æˆ·æˆæƒ</p><p> ä¸€ä¸ªç”¨æˆ·å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè§’è‰²</p><p>â€‹    é»˜è®¤åŒ…å«ä¿©ç§è§’è‰²ï¼špublicã€admin</p></li></ul><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz5c0cf550j30k406tjtk.jpg" alt="é™åˆ¶"><span class="img-alt">é™åˆ¶</span></p><h3 id="ï¼ˆ3ï¼‰æ“ä½œ"><a href="#ï¼ˆ3ï¼‰æ“ä½œ" class="headerlink" title="ï¼ˆ3ï¼‰æ“ä½œ"></a>ï¼ˆ3ï¼‰æ“ä½œ</h3><p>åœ¨<code>hiveæœåŠ¡ç«¯</code>ä¿®æ”¹é…ç½®æ–‡ä»¶hive-site.xmlæ·»åŠ ä»¥ä¸‹é…ç½®å†…å®¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.security.authorization.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.enable.doAs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.users.in.admin.role<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.security.authorization.manager<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdHiveAuthorizerFactory<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.security.authenticator.manager<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hive.ql.security.SessionStateUserAuthenticator<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æœåŠ¡ç«¯å¯åŠ¨hiveserver2ï¼›å®¢æˆ·ç«¯é€šè¿‡beelineè¿›è¡Œè¿æ¥</strong></p><p>è§’è‰²çš„æ·»åŠ ã€åˆ é™¤ã€æŸ¥çœ‹ã€è®¾ç½®ï¼š</p><p>ç¬¬ä¸€æ¬¡æ“ä½œæ— æƒé™ï¼š</p><p>éœ€è¦ï¼šCREATE ROLE  adminï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE ROLE role_name;   -- åˆ›å»ºè§’è‰²</span><br><span class="line">DROP ROLE role_name;   -- åˆ é™¤è§’è‰²</span><br><span class="line">SET ROLE (role_name|ALL|NONE);  -- è®¾ç½®è§’è‰²</span><br><span class="line">SHOW CURRENT ROLES;     -- æŸ¥çœ‹å½“å‰å…·æœ‰çš„è§’è‰²</span><br><span class="line">SHOW ROLES;             -- æŸ¥çœ‹æ‰€æœ‰å­˜åœ¨çš„è§’è‰²</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz5c6wynhnj30hs07kgmv.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz5c8bvsjkj30im077wft.jpg" alt=""></p><p>ã€å®˜ç½‘ï¼šæƒé™ã€‘</p><table><thead><tr><th>Action</th><th>Select</th><th>Insert</th><th>Update</th><th>Delete</th><th>Owership</th><th>Admin</th><th>URL Privilege(RWX   Permission + Ownership)</th></tr></thead><tbody><tr><td>ALTER DATABASE</td><td></td><td></td><td></td><td></td><td></td><td>Y</td><td></td></tr><tr><td>ALTER INDEX PROPERTIES</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>ALTER INDEX REBUILD</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>ALTER PARTITION LOCATION</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td>Y (for new partition   location)</td></tr><tr><td>ALTER TABLE (all of them   except the ones above)</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>ALTER TABLE ADD PARTITION</td><td></td><td>Y</td><td></td><td></td><td></td><td></td><td>Y (for partition location)</td></tr><tr><td>ALTER TABLE DROP PARTITION</td><td></td><td></td><td></td><td>Y</td><td></td><td></td><td></td></tr><tr><td>ALTER TABLE LOCATION</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td>Y (for new location)</td></tr><tr><td>ALTER VIEW PROPERTIES</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>ALTER VIEW RENAME</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>ANALYZE TABLE</td><td>Y</td><td>Y</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>CREATE DATABASE</td><td></td><td></td><td></td><td></td><td></td><td></td><td>Y (if custom location   specified)</td></tr><tr><td>CREATE FUNCTION</td><td></td><td></td><td></td><td></td><td></td><td>Y</td><td></td></tr><tr><td>CREATE INDEX</td><td></td><td></td><td></td><td></td><td>Y (of table)</td><td></td><td></td></tr><tr><td>CREATE MACRO</td><td></td><td></td><td></td><td></td><td></td><td>Y</td><td></td></tr><tr><td>CREATE TABLE</td><td></td><td></td><td></td><td></td><td>Y (of database)</td><td></td><td>Y  (for create   external table â€“ the location)</td></tr><tr><td>CREATE TABLE AS SELECT</td><td>Y (of input)</td><td></td><td></td><td></td><td>Y (of database)</td><td></td><td></td></tr><tr><td>CREATE VIEW</td><td>Y + G</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>DELETE</td><td></td><td></td><td></td><td>Y</td><td></td><td></td><td></td></tr><tr><td>DESCRIBE TABLE</td><td>Y</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>DROP DATABASE</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>DROP FUNCTION</td><td></td><td></td><td></td><td></td><td></td><td>Y</td><td></td></tr><tr><td>DROP INDEX</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>DROP MACRO</td><td></td><td></td><td></td><td></td><td></td><td>Y</td><td></td></tr><tr><td>DROP TABLE</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>DROP VIEW</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>DROP VIEW PROPERTIES</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>EXPLAIN</td><td>Y</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>INSERT</td><td></td><td>Y</td><td></td><td>Y (for OVERWRITE)</td><td></td><td></td><td></td></tr><tr><td>LOAD</td><td></td><td>Y (output)</td><td></td><td>Y (output)</td><td></td><td></td><td>Y (input location)</td></tr><tr><td>MSCK (metastore check)</td><td></td><td></td><td></td><td></td><td></td><td>Y</td><td></td></tr><tr><td>SELECT</td><td>Y</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>SHOW COLUMNS</td><td>Y</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>SHOW CREATE TABLE</td><td>Y+G</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>SHOW PARTITIONS</td><td>Y</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>SHOW TABLE PROPERTIES</td><td>Y</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>SHOW TABLE STATUS</td><td>Y</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>TRUNCATE TABLE</td><td></td><td></td><td></td><td></td><td>Y</td><td></td><td></td></tr><tr><td>UPDATE</td><td></td><td></td><td>Y</td><td></td><td></td><td></td></tr></tbody></table><h2 id="åå››ã€Hiveä¼˜åŒ–ï¼ˆé‡ç‚¹ï¼‰"><a href="#åå››ã€Hiveä¼˜åŒ–ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="åå››ã€Hiveä¼˜åŒ–ï¼ˆé‡ç‚¹ï¼‰"></a>åå››ã€Hiveä¼˜åŒ–ï¼ˆé‡ç‚¹ï¼‰</h2><p><code>è¯¦è§Hiveä¼˜åŒ–æ–‡æ¡£</code></p><p>HIveå¸¸ç”¨å‡½æ•°ï¼š</p><p><a href="https://www.cnblogs.com/kimbo/p/6288516.html" target="_blank" rel="noopener">https://www.cnblogs.com/kimbo/p/6288516.html</a></p><p><a href="https://www.iteblog.com/archives/2258.html#3_avg" target="_blank" rel="noopener">https://www.iteblog.com/archives/2258.html#3_avg</a></p><p><a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-Built-inFunctions" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-Built-inFunctions</a></p><p>MapReducdeåº•å±‚æºç ï¼š</p><ol><li><a href="http://note.youdao.com/noteshare?id=212e4a69d7bf8fc30979f1e4fc39ff0f&amp;sub=EA7C15DC72DF45248721CE2AD3F93CDD" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=212e4a69d7bf8fc30979f1e4fc39ff0f&amp;sub=EA7C15DC72DF45248721CE2AD3F93CDD</a></li><li><a href="http://note.youdao.com/noteshare?id=86ca5c96d13413f789164ff92f9ab4f9&amp;sub=7F20006D1D714D77AEDE5242603786C1" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=86ca5c96d13413f789164ff92f9ab4f9&amp;sub=7F20006D1D714D77AEDE5242603786C1</a></li><li><a href="http://note.youdao.com/noteshare?id=a518dfed10d824b0995380669ddd28c9&amp;sub=3526F532CDAA49628FEA1FE3A61239F3" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=a518dfed10d824b0995380669ddd28c9&amp;sub=3526F532CDAA49628FEA1FE3A61239F3</a></li><li><a href="http://note.youdao.com/noteshare?id=95d458d779f8e9f391d6ea06b6c6d122&amp;sub=0A13B59E10D94C96ABF5388CE4EB89D4" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=95d458d779f8e9f391d6ea06b6c6d122&amp;sub=0A13B59E10D94C96ABF5388CE4EB89D4</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxç³»ç»Ÿæ•°æ®åº“MySQLå®‰è£…</title>
      <link href="/2019/01/10/Linux%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93MySQL%E5%AE%89%E8%A3%85/"/>
      <url>/2019/01/10/Linux%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93MySQL%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="Linuxç³»ç»Ÿæ•°æ®åº“MySQLå®‰è£…"><a href="#Linuxç³»ç»Ÿæ•°æ®åº“MySQLå®‰è£…" class="headerlink" title="Linuxç³»ç»Ÿæ•°æ®åº“MySQLå®‰è£…"></a>Linuxç³»ç»Ÿæ•°æ®åº“MySQLå®‰è£…</h1><h2 id="ä¸€ã€ç¬¬ä¸€æ¬¡å®‰è£…MySQL"><a href="#ä¸€ã€ç¬¬ä¸€æ¬¡å®‰è£…MySQL" class="headerlink" title="ä¸€ã€ç¬¬ä¸€æ¬¡å®‰è£…MySQL"></a>ä¸€ã€ç¬¬ä¸€æ¬¡å®‰è£…MySQL</h2><h3 id="1ã€yumå®‰è£…"><a href="#1ã€yumå®‰è£…" class="headerlink" title="1ã€yumå®‰è£…"></a>1ã€yumå®‰è£…</h3><blockquote><p>å‘½ä»¤ ï¼š yum -y install mysql-server mysql-devel</p></blockquote><h3 id="2ã€ç™»å½•"><a href="#2ã€ç™»å½•" class="headerlink" title="2ã€ç™»å½•"></a>2ã€ç™»å½•</h3><blockquote><p>å‘½ä»¤ ï¼š mysql -u -p</p></blockquote><p><code>æ˜¾ç¤ºï¼š</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><h3 id="3ã€æŸ¥çœ‹æ•°æ®åº“-æ³¨æ„ç”¨â€˜-â€™ç»“æŸ"><a href="#3ã€æŸ¥çœ‹æ•°æ®åº“-æ³¨æ„ç”¨â€˜-â€™ç»“æŸ" class="headerlink" title="3ã€æŸ¥çœ‹æ•°æ®åº“(æ³¨æ„ç”¨â€˜ ; â€™ç»“æŸ )"></a>3ã€æŸ¥çœ‹æ•°æ®åº“(æ³¨æ„ç”¨â€˜ ; â€™ç»“æŸ )</h3><blockquote><p>å‘½ä»¤ ï¼š show databases;</p></blockquote><h3 id="4ã€é€€å‡ºï¼š"><a href="#4ã€é€€å‡ºï¼š" class="headerlink" title="4ã€é€€å‡ºï¼š"></a>4ã€é€€å‡ºï¼š</h3><blockquote><p>å‘½ä»¤ï¼š quitï¼›</p></blockquote><h3 id="5ã€åˆ›å»ºç”¨æˆ·ï¼š"><a href="#5ã€åˆ›å»ºç”¨æˆ·ï¼š" class="headerlink" title="5ã€åˆ›å»ºç”¨æˆ·ï¼š"></a>5ã€åˆ›å»ºç”¨æˆ·ï¼š</h3><blockquote><p>å‘½ä»¤ ï¼š mysqladmin -uroot password 123456</p></blockquote><h3 id="6ã€å†ç™»å½•ï¼š"><a href="#6ã€å†ç™»å½•ï¼š" class="headerlink" title="6ã€å†ç™»å½•ï¼š"></a>6ã€å†ç™»å½•ï¼š</h3><blockquote><p>å‘½ä»¤ ï¼šmysql -u root -p</p></blockquote><p><code>æ˜¾ç¤ºï¼š</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>è¯´æ˜æˆåŠŸäº†ï¼</p><h3 id="7ã€æ•°æ®åº“æ“ä½œï¼š"><a href="#7ã€æ•°æ®åº“æ“ä½œï¼š" class="headerlink" title="7ã€æ•°æ®åº“æ“ä½œï¼š"></a>7ã€æ•°æ®åº“æ“ä½œï¼š</h3><blockquote><p>å‘½ä»¤ ï¼š use mysql;</p></blockquote><p><code>æ˜¾ç¤ºï¼š</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br></pre></td></tr></table></figure><h3 id="8ã€æŸ¥çœ‹ç”¨æˆ·æ•°æ®è¡¨ï¼š"><a href="#8ã€æŸ¥çœ‹ç”¨æˆ·æ•°æ®è¡¨ï¼š" class="headerlink" title="8ã€æŸ¥çœ‹ç”¨æˆ·æ•°æ®è¡¨ï¼š"></a>8ã€æŸ¥çœ‹ç”¨æˆ·æ•°æ®è¡¨ï¼š</h3><blockquote><p>å‘½ä»¤ ï¼š show tables;</p></blockquote><h3 id="9ã€æŸ¥è¯¢userè¡¨éƒ¨åˆ†å­—æ®µï¼š"><a href="#9ã€æŸ¥è¯¢userè¡¨éƒ¨åˆ†å­—æ®µï¼š" class="headerlink" title="9ã€æŸ¥è¯¢userè¡¨éƒ¨åˆ†å­—æ®µï¼š"></a>9ã€æŸ¥è¯¢userè¡¨éƒ¨åˆ†å­—æ®µï¼š</h3><blockquote><p>å‘½ä»¤ ï¼š select host,user,password from user;</p></blockquote><h3 id="10ã€é€šè¿‡ä¿®æ”¹userè¡¨çš„hostå­—æ®µï¼Œè®¾ç½®æ•°æ®åº“è®¿é—®æƒé™ï¼Œåªè¦ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®"><a href="#10ã€é€šè¿‡ä¿®æ”¹userè¡¨çš„hostå­—æ®µï¼Œè®¾ç½®æ•°æ®åº“è®¿é—®æƒé™ï¼Œåªè¦ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®" class="headerlink" title="10ã€é€šè¿‡ä¿®æ”¹userè¡¨çš„hostå­—æ®µï¼Œè®¾ç½®æ•°æ®åº“è®¿é—®æƒé™ï¼Œåªè¦ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®"></a>10ã€é€šè¿‡ä¿®æ”¹userè¡¨çš„hostå­—æ®µï¼Œè®¾ç½®æ•°æ®åº“è®¿é—®æƒé™ï¼Œåªè¦ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®</h3><h4 id="ï¼ˆ1ï¼‰æ¨è"><a href="#ï¼ˆ1ï¼‰æ¨è" class="headerlink" title="ï¼ˆ1ï¼‰æ¨è"></a>ï¼ˆ1ï¼‰æ¨è</h4><p>ç°å°†userè¡¨ä¸­å…¶ä»–æ— å¯†ç çš„è®°å½•åˆ é™¤</p><blockquote><p>å‘½ä»¤ ï¼š delete from user where password = â€˜ â€˜;</p></blockquote><h4 id="2-æ›´æ–°æœ‰å¯†ç çš„è®°å½•çš„hostå­—æ®µå€¼"><a href="#2-æ›´æ–°æœ‰å¯†ç çš„è®°å½•çš„hostå­—æ®µå€¼" class="headerlink" title="(2)æ›´æ–°æœ‰å¯†ç çš„è®°å½•çš„hostå­—æ®µå€¼"></a>(2)æ›´æ–°æœ‰å¯†ç çš„è®°å½•çš„hostå­—æ®µå€¼</h4><blockquote><p>å‘½ä»¤ ï¼š update user set host = â€œ%â€;</p></blockquote><h4 id="3-åˆ·æ–°æƒé™"><a href="#3-åˆ·æ–°æƒé™" class="headerlink" title="(3)åˆ·æ–°æƒé™"></a>(3)åˆ·æ–°æƒé™</h4><blockquote><p> å‘½ä»¤ ï¼šflush privileges;</p></blockquote><h4 id="4-é€€å‡º"><a href="#4-é€€å‡º" class="headerlink" title="(4)é€€å‡º"></a>(4)é€€å‡º</h4><blockquote><p>å‘½ä»¤ ï¼šquit;</p></blockquote><h2 id="äºŒã€Linuxç³»ç»Ÿç™»å½•æ•°æ®åº“MySQLæŠ¥é”™"><a href="#äºŒã€Linuxç³»ç»Ÿç™»å½•æ•°æ®åº“MySQLæŠ¥é”™" class="headerlink" title="äºŒã€Linuxç³»ç»Ÿç™»å½•æ•°æ®åº“MySQLæŠ¥é”™"></a>äºŒã€Linuxç³»ç»Ÿç™»å½•æ•°æ®åº“MySQLæŠ¥é”™</h2><h3 id="æŠ¥é”™ä¸€ï¼š"><a href="#æŠ¥é”™ä¸€ï¼š" class="headerlink" title="æŠ¥é”™ä¸€ï¼š"></a>æŠ¥é”™ä¸€ï¼š</h3><p>1ã€ç™»å½• </p><blockquote><p>mysqld -uroot -p123456</p></blockquote><p><code>æŠ¥é”™ï¼š</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can&apos;t connect to local MySQL server through socket &apos;/var/lib/mysql/mysql.sock&apos; (111)</span><br></pre></td></tr></table></figure><p><code>è§£å†³ï¼š</code></p><p>1ï¼‰ã€å…ˆåˆ é™¤mysql.sock</p><blockquote><p>cd /var/lib/mysql</p></blockquote><blockquote><p>mv  mysql.sock  mysql.sock.bak</p></blockquote><p>2ï¼‰ã€å†æ¬¡ç™»é™†</p><blockquote><p>mysql -uroot -p123456</p></blockquote><p><code>æŠ¥é”™ï¼š</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can&apos;t connect to local MySQL server through socket &apos;/var/lib/mysql/mysql.sock&apos; (2)</span><br></pre></td></tr></table></figure><p> 3ï¼‰ã€çœ‹çœ‹mysqlçš„çŠ¶æ€ï¼Œ</p><blockquote><p> /etc/rc.d/init.d/mysqld status</p></blockquote><p> <code>æ˜¾ç¤ºï¼š</code></p><blockquote><p> mysqld is stopped</p></blockquote><p>4ï¼‰ã€çœ‹çœ‹æ˜¯ä¸æ˜¯mysqlçš„æƒé™é—®é¢˜<br>åœ¨/var/libç›®å½•ä¸‹ï¼š</p><blockquote><p>ls -lt|grep mysql</p></blockquote><p><code>æ˜¾ç¤ºï¼š</code></p><blockquote><p>drwxr-xr-x. 4 mysql   mysql 4096 Jan  6 11:09 mysql</p></blockquote><p>5ï¼‰ã€è¯´æ˜mysqlæœåŠ¡æ²¡æœ‰å¯åŠ¨</p><p>2ã€å¯åŠ¨mysqlæœåŠ¡</p><blockquote><p>/etc/init.d/mysqld start</p></blockquote><p><code>æ˜¾ç¤ºï¼š</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Starting mysqld:                                           [  OK  ]</span><br></pre></td></tr></table></figure><p>3ã€å†æ¬¡ç™»å½•ï¼š</p><blockquote><p>mysql -uroot -p123456</p></blockquote><p><code>æ˜¾ç¤ºï¼š</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.1.73 Source distribution</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>4ã€é€€å‡º</p><blockquote><p>quit</p></blockquote><p>5ã€è§£å†³å‡ºç°mysql.sockçš„é—®é¢˜</p><blockquote><p>  ï¼ˆ1ï¼‰ã€vim /etc/mycnf</p></blockquote><p>  ç¼–è¾‘å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip_name_resolve=on innodb_file_per_table=on</span><br></pre></td></tr></table></figure><p>  æŒ‰esc :wq ä¿å­˜å¹¶é€€å‡º<br>  ï¼ˆ2ï¼‰ä½¿ç”¨å‘½ä»¤ï¼š</p><blockquote><p>mysql_secure_installation</p></blockquote><p>  ï¼ˆ3ï¼‰ç›´æ¥[ enter ] é”®ï¼Œè¾“å…¥å¯†ç ï¼Œ</p><p>(å¦æ¨èï¼šJakie_ZHFè€å¸ˆçš„åšå®¢)</p><h3 id="æŠ¥é”™äºŒï¼š"><a href="#æŠ¥é”™äºŒï¼š" class="headerlink" title="æŠ¥é”™äºŒï¼š"></a>æŠ¥é”™äºŒï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1045 (28000): Access denied for user &apos;root&apos;@&apos;localhost&apos; (using password: YES)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linuxç³»ç»Ÿç¯å¢ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§æ•°æ®æ€æƒ³</title>
      <link href="/2019/01/05/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%80%9D%E6%83%B3/"/>
      <url>/2019/01/05/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%80%9D%E6%83%B3/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h3 id="1ã€å¤§æ•°æ®æ ¸å¿ƒé—®é¢˜ï¼š"><a href="#1ã€å¤§æ•°æ®æ ¸å¿ƒé—®é¢˜ï¼š" class="headerlink" title="1ã€å¤§æ•°æ®æ ¸å¿ƒé—®é¢˜ï¼š"></a>1ã€å¤§æ•°æ®æ ¸å¿ƒé—®é¢˜ï¼š</h3><p>==æµ·é‡æ•°æ®ã€å·¥ä¸šæŠ€æœ¯è½åã€ç¡¬ä»¶æŸåå¸¸æ€åŒ–ï¼ˆCtrl+Mï¼‰==</p><h3 id="2ã€å¤§æ•°æ®æ€ç»´"><a href="#2ã€å¤§æ•°æ®æ€ç»´" class="headerlink" title="2ã€å¤§æ•°æ®æ€ç»´"></a>2ã€å¤§æ•°æ®æ€ç»´</h3><p><strong>åˆ†è€Œæ²»ä¹‹</strong></p><blockquote><p>æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜æŒ‰ä¸€å®šçš„â€œåˆ†è§£â€æ–¹æ³•åˆ†ä¸ºç­‰ä»·çš„è§„æ¨¡è¾ƒå°çš„è‹¥å¹²éƒ¨åˆ†ï¼Œç„¶åé€ä¸ªè§£å†³ï¼Œç„¶ååˆ†åˆ«æ‰¾å‡ºå„éƒ¨åˆ†çš„ä¸­é—´ç»“æœï¼Œæœ€åå°†å„ä¸ªéƒ¨åˆ†çš„ä¸­é—´ç»“æœç»„æˆæ•´ä¸ªé—®é¢˜çš„æœ€ç»ˆç»“æœï¼ˆCtrl+Qï¼‰</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fyw9d7pkpij30pr0eut99.jpg" alt="enter description here"><span class="img-alt">enter description here</span></p><h3 id="3ã€ä¸šåŠ¡åœºæ™¯"><a href="#3ã€ä¸šåŠ¡åœºæ™¯" class="headerlink" title="3ã€ä¸šåŠ¡åœºæ™¯"></a>3ã€ä¸šåŠ¡åœºæ™¯</h3><p>ä»“å‚¨ã€æ•°ç‰Œ</p><h4 id="ä¸šåŠ¡ä¸€ï¼šæ‰¾-é‡å¤è¡Œ-chongfuhang"><a href="#ä¸šåŠ¡ä¸€ï¼šæ‰¾-é‡å¤è¡Œ-chongfuhang" class="headerlink" title="ä¸šåŠ¡ä¸€ï¼šæ‰¾{é‡å¤è¡Œ}(chongfuhang)"></a><strong>ä¸šåŠ¡ä¸€ï¼šæ‰¾{é‡å¤è¡Œ}(chongfuhang)</strong></h4><p><em>++ç°æœ‰1TBçš„TXTæ–‡ä»¶ ;<br>æ ¼å¼ï¼šæ•°å­—+å­—ç¬¦ ï¼›<br>ç½‘é€Ÿï¼š500M/s ï¼›<br>æœåŠ¡å™¨å†…å­˜å¤§å°ï¼š128M ï¼›<br>æ¡ä»¶ï¼šä»…æœ‰ä¸¤è¡Œé‡å¤ ï¼Œå†…å­˜ä¸èƒ½æ”¾ä¸‹å…¨é‡æ•°æ®ï¼ˆOMï¼šout of memeryï¼‰ï¼›++</em></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fyw9cu9psdj30ht0a1wf1.jpg" alt="enter description here"><span class="img-alt">enter description here</span></p><p><strong>==æ–¹æ³•==</strong></p><p> ç­”ï¼šå…±éœ€è¦2æ¬¡IOï¼š2*30min=1h</p><p>==ç¬¬ä¸€æ¬¡IO==ï¼š</p><ol><li>ç»™<em><code>æ¯ä¸€è¡Œå†…å®¹åŠ ä¸Šå”¯ä¸€æ ‡è®°ï¼ˆhashcodeï¼ˆå†…å®¹ï¼‰ï¼Œvalueï¼ˆè¡Œå·ï¼‰ï¼‰</code></em>ã€‚<br>å¯¹æ¯ä¸€è¡Œå†…å®¹è¿›è¡Œhashè¿ç®—ï¼Œå¾—åˆ°å”¯ä¸€æ ‡è¯†hashcodeï¼Œä½œä¸ºkeyï¼Œå°†è¡Œå·ä½œä¸ºvalueã€‚ç„¶è€Œï¼Œå¯¹äºå†…å®¹å®Œå…¨é‡å¤çš„ä¸¤è¡Œï¼Œå…¶hashcodeå€¼ä¸€å®šç›¸åŒã€‚</li><li><em>`å¯¹æ¯ä¸€è¡Œçš„hashå€¼è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œå¹¶æ”¾ç½®äºå½’ç±»åˆ†åŒºçš„å°æ–‡ä»¶ä¸­</em>`ã€‚<br>ç”±äºæ•°æ®åŸºæ•°è¿‡å¤§ï¼Œå°±å°†æ¯è¡Œçš„keyå€¼å¯¹å–æ¨¡ï¼Œè½¬åŒ–ä¸ºå°æ–‡ä»¶ï¼Œå¦‚å°†hashå€¼å¯¹100å–æ¨¡ï¼Œåˆ™äº§ç”Ÿ100ä¸ªå°æ–‡ä»¶åˆ†åŒºï¼Œå–æ¨¡åç›¸åŒçš„æ”¾åœ¨åŒä¸€ä¸ªåˆ†åŒºä¸­ã€‚</li></ol><p>==ç¬¬äºŒæ¬¡IO==ï¼š</p><ol start="3"><li>åœ¨æ¯ä¸ªåˆ†åŒºä¸­çš„å°æ–‡ä»¶éå†ï¼Œå¯¹æ¯ä¸€è¡Œè¿›è¡Œæ¯”è¾ƒï¼Œå› ä¸ºé‡å¤è¡Œä¸€å®šä¼šåœ¨åŒä¸€ä¸ªåˆ†åŒºä¸­ã€‚è¿™æ ·å·¥ä½œé‡å°±ä¼šå¤§å¤§å‡å°ã€‚</li></ol><h4 id="ä¸šåŠ¡äºŒï¼šå¿«-æ’åº-paixu"><a href="#ä¸šåŠ¡äºŒï¼šå¿«-æ’åº-paixu" class="headerlink" title="ä¸šåŠ¡äºŒï¼šå¿«{æ’åº}(paixu)"></a><strong>ä¸šåŠ¡äºŒï¼šå¿«{æ’åº}(paixu)</strong></h4><p><em>++ç°æœ‰1TBçš„TXTæ–‡ä»¶ ;<br>æ ¼å¼ï¼šæ•°å­—ï¼›<br>ç½‘é€Ÿï¼š500M/s ï¼›<br>æœåŠ¡å™¨å†…å­˜å¤§å°ï¼š128M ï¼›<br>æ¡ä»¶ï¼šå®ç°å¿«æ’åºï¼Œå†…å­˜ä¸èƒ½æ”¾ä¸‹å…¨é‡æ•°æ®ï¼ˆOMï¼šout of memeryï¼‰ï¼›++</em></p><p>ä¸¤æ¬¡IOï¼Œ2 * 30åˆ†é’Ÿ = 1å°æ—¶</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fyw9dek3xtj30pr0eu758.jpg" alt="enter description here"><span class="img-alt">enter description here</span></p><p><strong>==æ–¹æ³•ä¸€ï¼šå…ˆå…¨å±€æœ‰åºåå±€éƒ¨æœ‰åº==</strong></p><p> 1.å¯¹å…¨å±€æŒ‰åˆ†åŒºæ’åºï¼ˆç”±å¤§åˆ°å°ï¼‰ã€‚<br>â€‹    ç”¨ifã€‚ã€‚elseæ–¹æ³•å¯¹æ•°æ®è¿›è¡ŒæŒ‰èŒƒå›´åˆ†ç±»ï¼Œè½åˆ°ä¸åŒçš„åˆ†åŒºä¸­ï¼ˆ0~1000ã€1001~2000ã€2001~3000Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·ï¼‰<br> 2.å¯¹å±€éƒ¨è¿›è¡Œæ’åºï¼ˆç”±å¤§åˆ°å°ï¼‰ã€‚<br>â€‹    å¯¹æ¯ä¸ªåˆ†åŒºè¿›è¡Œæ’åºã€‚</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fyw9dj82b6j30pr0ewdgm.jpg" alt="enter description here"><span class="img-alt">enter description here</span></p><p><strong>==æ–¹æ³•äºŒï¼šå…ˆå±€éƒ¨æœ‰åºåå…¨å±€æœ‰åº==</strong></p><ol><li>å…ˆå®ç°å±€éƒ¨æœ‰åº(å°â€“&gt;å¤§)ã€‚<br>å°†æ–‡ä»¶åˆ’åˆ†ä¸ºNä¸ªåˆ†åŒºï¼Œåœ¨æ¯ä¸ªåˆ†åŒºå†…éƒ¨è¿›è¡Œæ’åº</li><li>ä½¿ç”¨å½’å¹¶å®ç°å…¨å±€æœ‰åºã€‚<br>æ¯ä¸ªåˆ†åŒºåˆ†åˆ«å„è‡ªå–å‡ºæœ€å°å€¼ï¼Œæ‹¿å‡ºæ¥æ¯”è¾ƒï¼Œæœ€å°å€¼æ”¾åœ¨ä¸€æ—ï¼Œæœ€å°å€¼æ‰€åœ¨çš„é‚£ä¸ªåˆ†åŒºå†æ‹¿å‡ºå‰©ä¸‹æ•°æ®ä¸­çš„æœ€å°å€¼ï¼Œå†è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”è¾ƒå‡ºçš„æœ€å°å€¼ï¼Œæ’åœ¨ä¸Šä¸€æ¬¡çš„æœ€å°å€¼åï¼Œä¾æ¬¡è¿›è¡Œä¸‹å»ï¼Œè¿™æ ·å°±å®ç°äº†å…¨å±€æœ‰åºã€‚</li></ol><p><img src="./images/åšæŒ_1.jpg" alt="çŸ¥å¦"><span class="img-alt">çŸ¥å¦</span></p>]]></content>
      
      
      <categories>
          
          <category> å¤´è„‘é£æš´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†è€Œæ²»ä¹‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapReduceå­¦ä¹ </title>
      <link href="/2019/01/05/MapReduce%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/05/MapReduce%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€MapReduceæ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€MapReduceæ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€MapReduceæ˜¯ä»€ä¹ˆ"></a>ä¸€ã€MapReduceæ˜¯ä»€ä¹ˆ</h2><p>1ã€æ¦‚å¿µ</p><p>MapReduceæ˜¯ä¸€ç§<code>åˆ†å¸ƒå¼ç¦»çº¿è®¡ç®—æ¡†æ¶</code>ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ï¼Œç”¨äºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šå¤§è§„æ¨¡æ•°æ®é›†(å¤§äº1TB)çš„å¹¶è¡Œè¿ç®—ã€‚</p><p>åˆ†å¸ƒå¼ç¼–ç¨‹ï¼š</p><blockquote><p>å€ŸåŠ©ä¸€ä¸ªé›†ç¾¤ï¼Œé€šè¿‡å¤šå°æœºå™¨å»å¹¶è¡Œå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ï¼Œä»è€Œè·å¾—æµ·é‡è®¡ç®—èƒ½åŠ›ã€‚</p></blockquote><p>2ã€ç†è§£</p><p><code>Map</code>(æ˜ å°„)</p><p><code>Reduce</code>(å½’çº¦)</p><blockquote><p>æŒ‡å®šä¸€ä¸ªMap(æ˜ å°„)å‡½æ•°ï¼Œç”¨æ¥æŠŠä¸€ç»„é”®å€¼å¯¹æ˜ å°„æˆä¸€ç»„æ–°çš„é”®å€¼å¯¹ï¼ŒæŒ‡å®šå¹¶å‘çš„Reduce(å½’çº¦)å‡½æ•°ï¼Œç”¨æ¥ä¿è¯æ‰€æœ‰æ˜ å°„çš„é”®å€¼å¯¹ä¸­çš„æ¯ä¸€ä¸ªå…±äº«ç›¸åŒçš„é”®ç»„ã€‚</p></blockquote><h2 id="äºŒã€MapReduceè®¾è®¡ç†å¿µ"><a href="#äºŒã€MapReduceè®¾è®¡ç†å¿µ" class="headerlink" title="äºŒã€MapReduceè®¾è®¡ç†å¿µ"></a>äºŒã€MapReduceè®¾è®¡ç†å¿µ</h2><p>1ã€åˆ†å¸ƒå¼è®¡ç®—</p><blockquote><p>åˆ†å¸ƒå¼è®¡ç®—å°†è¯¥åº”ç”¨åˆ†è§£æˆè®¸å¤šå°çš„éƒ¨åˆ†ï¼Œåˆ†é…ç»™å¤šå°è®¡ç®—æœºèŠ‚ç‚¹è¿›è¡Œå¤„ç†ã€‚è¿™æ ·å¯ä»¥èŠ‚çº¦æ•´ä½“è®¡ç®—æ—¶é—´ï¼Œå¤§å¤§æé«˜è®¡ç®—æ•ˆç‡ã€‚</p></blockquote><p><strong> åˆ†è€Œæ²»ä¹‹ </strong>ç­–ç•¥ï¼š</p><blockquote><p>ä¸€ä¸ªå­˜å‚¨åœ¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„å¤§è§„æ¨¡æ•°æ®é›†ï¼Œ</p><p>ä¼šè¢«åˆ‡åˆ†æˆè®¸å¤šç‹¬ç«‹çš„åˆ†ç‰‡ï¼ˆsplitï¼‰ï¼Œ</p><p>è¿™äº›åˆ†ç‰‡å¯ä»¥è¢«</p><p>å¤šä¸ªMapä»»åŠ¡å¹¶è¡Œå¤„ç†</p></blockquote><p>2ã€ç§»åŠ¨è®¡ç®—ï¼Œè€Œåˆ†ç§»åŠ¨æ•°æ®</p><blockquote><p>å°†è®¡ç®—ç¨‹åºåº”ç”¨ç§»åŠ¨åˆ°å…·æœ‰æ•°æ®çš„é›†ç¾¤è®¡ç®—æœºèŠ‚ç‚¹ä¹‹ä¸Šè¿›è¡Œè®¡ç®—æ“ä½œï¼›</p><p>å°†æœ‰ç”¨ã€å‡†ç¡®ã€åŠæ—¶çš„ä¿¡æ¯æä¾›ç»™ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹çš„ä»»ä½•å®¢æˆ·ã€‚</p></blockquote><p>3ã€Master/Slaveæ¶æ„</p><blockquote><p>åŒ…æ‹¬ä¸€ä¸ªMasterå’Œè‹¥å¹²ä¸ªSlaveã€‚<br>Masterä¸Šè¿è¡ŒJobTrackerï¼ŒSlaveä¸Šè¿è¡ŒTaskTracker</p></blockquote><h2 id="ä¸‰ã€MapReduceè®¡ç®—æ¡†æ¶çš„ç»„æˆ"><a href="#ä¸‰ã€MapReduceè®¡ç®—æ¡†æ¶çš„ç»„æˆ" class="headerlink" title="ä¸‰ã€MapReduceè®¡ç®—æ¡†æ¶çš„ç»„æˆ"></a>ä¸‰ã€MapReduceè®¡ç®—æ¡†æ¶çš„ç»„æˆ</h2><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6guaswsqj30fd06pwgh.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6hucmi5pj30v90exn7e.jpg" alt="MR"><span class="img-alt">MR</span></p><p>1ã€ Mapperè´Ÿè´£â€œ<strong>åˆ†</strong>â€ï¼Œå³æŠŠå¾—åˆ°çš„å¤æ‚çš„ä»»åŠ¡åˆ†è§£ä¸ºè‹¥å¹²ä¸ªâ€œç®€å•çš„ä»»åŠ¡â€æ‰§è¡Œã€‚</p><p>â€‹        â€œç®€å•çš„ä»»åŠ¡â€ï¼š</p><ul><li><p>æ•°æ®æˆ–è®¡ç®—è§„æ¨¡ç›¸å¯¹äºåŸä»»åŠ¡è¦å¤§å¤§ç¼©å°ï¼›</p></li><li><p>å°±è¿‘è®¡ç®—ï¼Œå³ä¼šè¢«åˆ†é…åˆ°å­˜æ”¾äº†æ‰€éœ€æ•°æ®çš„èŠ‚ç‚¹è¿›è¡Œè®¡ç®—ï¼›</p></li><li>æ¯ä¸ªmapä»»åŠ¡ä¹‹é—´å¯ä»¥å¹¶è¡Œè®¡ç®—ï¼Œä¸äº§ç”Ÿä»»ä½•é€šä¿¡ã€‚</li></ul><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6hw158klj30f308eq7e.jpg" alt="split"><span class="img-alt">split</span></p><p>2ã€Splitè§„åˆ™ï¼šï¼ˆå–ä¸‰è€…çš„ä¸­é—´å€¼ï¼‰</p><p>â€“  max.split(100M)</p><p>â€“  min.split(10M)</p><p>â€“  block(64M)</p><p><strong>max(min.split,min(max.split,block))</strong></p><p><strong>splitå®é™…å¤§å°=blockå¤§å°</strong>ï¼ˆ2.Xï¼š128Mï¼‰</p><p>Mapçš„æ•°ç›®é€šå¸¸æ˜¯ç”±è¾“å…¥æ•°æ®çš„å¤§å°å†³å®šçš„ï¼Œä¸€èˆ¬å°±æ˜¯æ‰€æœ‰è¾“å…¥æ–‡ä»¶çš„æ€»å—ï¼ˆblockï¼‰æ•°</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6hz81714j30ea07vmzd.jpg" alt=""></p><p>3ã€Reduceè¯¦è§£ï¼ˆæ€»Â·é‡è¦ï¼‰</p><p>â€“  Reduceçš„ä»»åŠ¡æ˜¯å¯¹mapé˜¶æ®µçš„ç»“æœè¿›è¡Œâ€œ<strong>æ±‡æ€»</strong>â€å¹¶è¾“å‡ºã€‚</p><p>Reducerçš„æ•°ç›®ç”±mapred-site.xmlé…ç½®æ–‡ä»¶é‡Œçš„é¡¹ç›®mapred.reduce.taskså†³å®šã€‚ç¼ºçœå€¼ä¸º1ï¼Œç”¨æˆ·å¯è‡ªå®šä¹‰ã€‚</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6i3l3zo1j30fe09mq62.jpg" alt=""></p><p>4ã€Shuffleè¯¦è§£ï¼ˆæ€»Â·æ ¸å¿ƒï¼‰</p><p>â€“ åœ¨mapperå’Œreducerä¸­é—´çš„ä¸€ä¸ªæ­¥éª¤</p><p>   å¯ä»¥æŠŠmapperçš„è¾“å‡ºæŒ‰ç…§æŸç§keyå€¼é‡æ–°åˆ‡åˆ†å’Œç»„åˆæˆnä»½ï¼ŒæŠŠkeyå€¼ç¬¦åˆæŸç§èŒƒå›´çš„è¾“å‡ºé€åˆ°ç‰¹å®šçš„reduceré‚£é‡Œå»å¤„ç†ã€‚</p><p>â€“  å¯ä»¥ç®€åŒ–reducerè¿‡ç¨‹</p><p>Partitoner ï¼š hash(key) mod R</p><h2 id="å››ã€MapReduceæ¶æ„"><a href="#å››ã€MapReduceæ¶æ„" class="headerlink" title="å››ã€MapReduceæ¶æ„"></a>å››ã€MapReduceæ¶æ„</h2><h3 id="1ã€éå…±äº«å¼æ¶æ„"><a href="#1ã€éå…±äº«å¼æ¶æ„" class="headerlink" title="1ã€éå…±äº«å¼æ¶æ„"></a>1ã€éå…±äº«å¼æ¶æ„</h3><p>æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è‡ªå·±çš„å†…å­˜ï¼Œå®¹é”™æ€§æ¯”è¾ƒå¥½ã€‚</p><h3 id="2ã€ä¸€ä¸»å¤šä»æ¶æ„"><a href="#2ã€ä¸€ä¸»å¤šä»æ¶æ„" class="headerlink" title="2ã€ä¸€ä¸»å¤šä»æ¶æ„"></a>2ã€ä¸€ä¸»å¤šä»æ¶æ„</h3><p>å¯æ‰©å±•æ€§å¥½ï¼Œç¡¬ä»¶è¦æ±‚æ˜“è¾¾åˆ°ã€‚</p><p>â€“  ä¸» JobTracker:ï¼ˆResourceManagerèµ„æºç®¡ç†ï¼‰</p><blockquote><p>è´Ÿè´£è°ƒåº¦åˆ†é…æ¯ä¸€ä¸ªå­ä»»åŠ¡taskè¿è¡ŒäºTaskTrackerä¸Šï¼Œ</p><p>å¦‚æœå‘ç°æœ‰å¤±è´¥çš„taskå°±é‡æ–°åˆ†é…å…¶ä»»åŠ¡åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚</p><p>æ¯ä¸€ä¸ªhadoopé›†ç¾¤ä¸­åªä¸€ä¸ª JobTracker, ä¸€èˆ¬å®ƒè¿è¡Œåœ¨MasterèŠ‚ç‚¹ä¸Šã€‚</p></blockquote><p>â€“  ä»TaskTracker:ï¼ˆNodeManagerï¼‰</p><blockquote><p>TaskTrackerä¸»åŠ¨ä¸JobTrackeré€šä¿¡ï¼Œæ¥æ”¶ä½œä¸šï¼Œå¹¶è´Ÿè´£ç›´æ¥æ‰§è¡Œæ¯ä¸€ä¸ªä»»åŠ¡ï¼Œ</p><p>ä¸ºäº†å‡å°‘ç½‘ç»œå¸¦å®½TaskTrackeræœ€å¥½è¿è¡Œåœ¨HDFSçš„DataNodeä¸Šã€‚</p></blockquote><h1 id="MapReduceçš„ä½“ç³»ç»“æ„"><a href="#MapReduceçš„ä½“ç³»ç»“æ„" class="headerlink" title="MapReduceçš„ä½“ç³»ç»“æ„"></a>MapReduceçš„ä½“ç³»ç»“æ„</h1><p>MapReduceä¸»è¦æœ‰ä»¥ä¸‹4ä¸ªéƒ¨åˆ†ç»„æˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1 ï¼‰Client</span><br><span class="line">â€¢ç”¨æˆ·ç¼–å†™çš„MapReduceç¨‹åºé€šè¿‡Clientæäº¤åˆ°JobTrackerç«¯</span><br><span class="line">â€¢ç”¨æˆ·å¯é€šè¿‡Clientæä¾›çš„ä¸€äº›æ¥å£æŸ¥çœ‹ä½œä¸šè¿è¡ŒçŠ¶æ€</span><br><span class="line">2 ï¼‰JobTracker</span><br><span class="line">â€¢JobTrackerè´Ÿè´£èµ„æºç›‘æ§å’Œä½œä¸šè°ƒåº¦</span><br><span class="line">â€¢JobTracker ç›‘æ§æ‰€æœ‰TaskTrackerä¸Jobçš„å¥åº·çŠ¶å†µï¼Œä¸€æ—¦å‘ç°å¤±è´¥ï¼Œå°±å°†ç›¸åº”çš„ä»»åŠ¡è½¬ç§»åˆ°å…¶ä»–èŠ‚ç‚¹</span><br><span class="line">â€¢JobTracker ä¼šè·Ÿè¸ªä»»åŠ¡çš„æ‰§è¡Œè¿›åº¦ã€èµ„æºä½¿ç”¨é‡ç­‰ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯å‘Šè¯‰ä»»åŠ¡è°ƒåº¦å™¨</span><br><span class="line">ï¼ˆTaskSchedulerï¼‰ï¼Œè€Œè°ƒåº¦å™¨ä¼šåœ¨èµ„æºå‡ºç°ç©ºé—²æ—¶ï¼Œé€‰æ‹©åˆé€‚çš„ä»»åŠ¡å»ä½¿ç”¨è¿™äº›èµ„æº</span><br><span class="line">3 ï¼‰TaskTracker</span><br><span class="line">â€¢TaskTracker ä¼šå‘¨æœŸæ€§åœ°é€šè¿‡â€œå¿ƒè·³â€å°†æœ¬èŠ‚ç‚¹ä¸Šèµ„æºçš„ä½¿ç”¨æƒ…å†µå’Œä»»åŠ¡çš„è¿è¡Œè¿›åº¦æ±‡æŠ¥</span><br><span class="line">ç»™JobTrackerï¼ŒåŒæ—¶æ¥æ”¶JobTracker å‘é€è¿‡æ¥çš„å‘½ä»¤å¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼ˆå¦‚å¯åŠ¨æ–°ä»»åŠ¡ã€</span><br><span class="line">æ€æ­»ä»»åŠ¡ç­‰ï¼‰</span><br><span class="line">â€¢TaskTracker ä½¿ç”¨â€œslotâ€ç­‰é‡åˆ’åˆ†æœ¬èŠ‚ç‚¹ä¸Šçš„èµ„æºé‡ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰ã€‚ä¸€ä¸ªTask è·å–åˆ°</span><br><span class="line">ä¸€ä¸ªslot åæ‰æœ‰æœºä¼šè¿è¡Œï¼Œè€ŒHadoopè°ƒåº¦å™¨çš„ä½œç”¨å°±æ˜¯å°†å„ä¸ªTaskTrackerä¸Šçš„ç©ºé—²slotåˆ†</span><br><span class="line">é…ç»™Taskä½¿ç”¨ã€‚slot åˆ†ä¸ºMap slot å’ŒReduce slot ä¸¤ç§ï¼Œåˆ†åˆ«ä¾›MapTaskå’ŒReduce Taskä½¿ç”¨</span><br><span class="line">ï¼ˆæ‰€ä»¥æœ€å¥½æ”¾åœ¨DataNodeä¸Šï¼‰</span><br><span class="line">4 ï¼‰Task</span><br><span class="line">Task åˆ†ä¸ºMap Task å’ŒReduce Task ä¸¤ç§ï¼Œå‡ç”±TaskTracker å¯åŠ¨</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6i591yd9j30tp0fqq4x.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6ivspvrcj30y50dujum.jpg" alt=""></p><h2 id="äº”ã€MapReduceæ­å»º"><a href="#äº”ã€MapReduceæ­å»º" class="headerlink" title="äº”ã€MapReduceæ­å»º"></a>äº”ã€MapReduceæ­å»º</h2><h3 id="1ã€èŠ‚ç‚¹åˆ†å¸ƒæƒ…å†µ"><a href="#1ã€èŠ‚ç‚¹åˆ†å¸ƒæƒ…å†µ" class="headerlink" title="1ã€èŠ‚ç‚¹åˆ†å¸ƒæƒ…å†µ"></a>1ã€èŠ‚ç‚¹åˆ†å¸ƒæƒ…å†µ</h3><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">NN</th><th style="text-align:center">DN</th><th style="text-align:center">JN</th><th style="text-align:center">ZK</th><th style="text-align:center">ZKFC</th><th style="text-align:center">RM</th></tr></thead><tbody><tr><td style="text-align:center">node00</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">node01</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">node02</td><td style="text-align:center"></td><td style="text-align:center">âˆš</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><h3 id="2ã€é…ç½®æ–‡ä»¶"><a href="#2ã€é…ç½®æ–‡ä»¶" class="headerlink" title="2ã€é…ç½®æ–‡ä»¶"></a>2ã€é…ç½®æ–‡ä»¶</h3><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6j2l1t72j30fe0begoy.jpg" alt=""></p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><p>(1)<strong>mapred-site.xml:</strong>ï¼ˆé…ç½®mapreudceéœ€è¦çš„æ¡†æ¶ç¯å¢ƒï¼‰</p><p>è·¯å¾„ï¼šF:\hadoop-2.6.5\etc\hadoop\mapred-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰<strong>yarn-site.xml:</strong>ï¼ˆé…ç½®yarnçš„ä»»åŠ¡è°ƒåº¦çš„è®¡ç®—æ¡†æ¶ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å› ä¸º<strong>ResourceManager</strong> <strong>å’ŒNodeManager</strong>ä¸»ä»ç»“æ„ï¼ŒRMå­˜åœ¨å•ç‚¹æ•…éšœï¼Œè¦å¯¹å®ƒåšHAï¼ˆé€šè¿‡ZKï¼‰</p><p>ä¿®æ”¹yarn-site.xmlé…ç½®æ–‡ä»¶,å®Œæ•´çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.ha.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.cluster-id<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>Sunrise<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.ha.rm-ids<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>rm1,rm2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname.rm1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>node03<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname.rm2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>node04<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.zk-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>node01:2181,node02:2181,node03:2181<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å…­ã€ä¸ªäººç†è§£"><a href="#å…­ã€ä¸ªäººç†è§£" class="headerlink" title="å…­ã€ä¸ªäººç†è§£"></a>å…­ã€ä¸ªäººç†è§£</h2><blockquote><p>åŸºäºæºç ï¼Œå¯¹mapreduceçš„å·¥ä½œæµç¨‹çš„æè¿°ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ä¸€ä¸ªåº”ç”¨ç¨‹åºè¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®å¤„ç†åˆ†æ</span><br><span class="line"></span><br><span class="line">æ•°æ®æ–‡ä»¶ä¿å­˜åœ¨HDFSä¸­ï¼Œåˆ†å—å­˜å‚¨åœ¨åˆ†å¸ƒå¼èŠ‚ç‚¹ä¸Š</span><br><span class="line"></span><br><span class="line">é¦–å…ˆæ˜¯å°†æ•°æ®æ–‡ä»¶åˆ‡åˆ†æˆè®¸å¤šsplitåˆ‡ç‰‡</span><br><span class="line"></span><br><span class="line">æ¯ä¸€ä¸ªsplitåˆ‡ç‰‡å•ç‹¬å¯åŠ¨ä¸€ä¸ªmapä»»åŠ¡ï¼Œæ‰€ä»¥ä¼šå¯åŠ¨å¤šä¸ªmapä»»åŠ¡</span><br><span class="line"></span><br><span class="line">mapé˜¶æ®µçš„è¾“å…¥æ˜¯è¯¸å¤š(key,value),è¾“å‡ºæ˜¯æ–°çš„ï¼ˆkey,valueï¼‰,ç„¶åè¢«æ‹‰å»åˆ°ä¸åŒçš„reduceä¸Šå¹¶è¡Œå¤„ç†æ“ä½œ</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥æ¯ä¸ªmapçš„è¾“å‡ºé˜¶æ®µéƒ½æ‰§è¡Œåˆ†åŒºæ“ä½œï¼Œå¹¶å†³å®šreduceä»»åŠ¡çš„ä¸ªæ•°</span><br><span class="line"></span><br><span class="line">ç„¶åå¯¹mapè¾“å‡ºç»“æœè¿›è¡Œæ’åºã€å½’å¹¶ã€åˆå¹¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å«mapé˜¶æ®µçš„shuffle</span><br><span class="line"></span><br><span class="line">shuffleç»“æŸåï¼Œå°†ç›¸åº”çš„ç»“æœåˆ†å‘ç»™reduceï¼Œè®©reduceå®Œæˆåç»­çš„å·¥ä½œ </span><br><span class="line"></span><br><span class="line">ç»“æŸåï¼Œå°†ç»“æœè¾“å‡ºç»™HDFSã€‚</span><br><span class="line"></span><br><span class="line">ä¸åŒçš„mapä¹‹é—´ä¸ä¼šé€šä¿¡ï¼Œä¸åŒçš„reduceä¹Ÿä¸ä¼šé€šä¿¡ï¼Œæ•´ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·é€æ˜ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6zgfpvqnj30tw0fxace.jpg" alt="shuffle"><span class="img-alt">shuffle</span></p><blockquote><p>MapReduceæ‰§è¡Œçš„å„ä¸ªé˜¶æ®µï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1ã€ä»HDFSä¸­åŠ è½½æ–‡ä»¶ï¼ŒåŠ è½½è¯»å–ç”±INputFormatæ¨¡å—æ¥å®Œæˆï¼Œå¯¹è¾“å…¥è´Ÿè´£æ ¼å¼éªŒè¯ï¼ŒåŒæ—¶ï¼Œå¯¹æ•°æ®è¿›è¡Œé€»è¾‘ä¸Šåˆ‡åˆ†æˆsplit</span><br><span class="line"></span><br><span class="line">2ã€ç”±record readå…·ä½“æ ¹æ®åˆ†ç‰‡çš„ä½ç½®é•¿åº¦ä¿¡æ¯å»æ‰¾å„ä¸ªblockï¼Œä»¥ï¼ˆkeyï¼Œvalueï¼‰è¾“å‡ºï¼Œä½œä¸ºmapçš„è¾“å…¥ï¼Œ</span><br><span class="line"></span><br><span class="line">3ã€mapä¸­æœ‰ç”¨æˆ·è‡ªå®šä¹‰çš„mapå‡½æ•°å°±å¯ä»¥è¿›è¡Œç›¸åº”çš„æ•°æ®å¤„ç†ï¼Œå¹¶è¾“å‡ºä¸€å †ï¼ˆkeyï¼Œvalueï¼‰ï¼Œä½œä¸ºä¸­é—´ç»“æœ</span><br><span class="line"></span><br><span class="line">4ã€ä¹‹åï¼Œæ˜¯shuffleï¼ˆæ´—ç‰Œï¼‰è¿‡ç¨‹å¯¹è¿™ä¸­é—´ç»“æœè¿›è¡Œåˆ†åŒºã€æ’åºã€åˆå¹¶ï¼Œå¹¶æº¢å†™åˆ°ç£ç›˜ï¼Œ</span><br><span class="line"></span><br><span class="line">5ã€ç›¸åº”çš„reduceä»»åŠ¡å°±ä¼šæ¥fetchå¯¹åº”çš„åˆ†åŒºï¼ˆkeyï¼Œvalueï¼ˆlistï¼‰ï¼‰</span><br><span class="line"></span><br><span class="line">6ã€reduceä¸­æœ‰ç”¨æˆ·è‡ªå®šä¹‰çš„reduceå‡½æ•°å°±å¯ä»¥å®Œæˆå¯¹æ•°æ®çš„åˆ†æï¼Œç»“æœä»¥æ–°çš„ï¼ˆkeyï¼Œvalueï¼‰è¾“å‡º</span><br><span class="line"></span><br><span class="line">7ã€è¾“å‡ºç»“æœå€ŸåŠ©OutputFormatæ¨¡å—å¯¹è¾“å‡ºæ ¼å¼è¿›è¡Œæ£€æŸ¥ï¼Œä»¥åŠç›¸å…³ç›®å½•æ˜¯å¦å­˜åœ¨ç­‰ï¼Œæœ€åå†™å…¥åˆ°HDFSä¸­ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6zikp8mbj30vh0fldle.jpg" alt="split"><span class="img-alt">split</span></p><blockquote><p>å…³äºsplitçš„åˆ‡åˆ†çš„ç†è§£ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1ã€InputFormatå°†å¤§çš„æ•°æ®æ–‡ä»¶åˆ†æˆå¾ˆå¤šsplit</span><br><span class="line">2ã€æ–‡ä»¶åœ¨HDFSä¸­æ˜¯ä»¥å¾ˆå¤šä¸ªç‰©ç†å—blockåˆ†å¸ƒå¼å­˜å‚¨ä¸åŒçš„èŠ‚ç‚¹ä¸Š</span><br><span class="line">3ã€åˆ‡ç‰‡æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„é€»è¾‘åˆ†ç‰‡</span><br><span class="line">4ã€splitçš„æ•°é‡å†³å®šmapä»»åŠ¡çš„æ•°é‡</span><br><span class="line">5ã€åˆ‡ç‰‡è¿‡å¤šä¼šå¯¼è‡´mapä»»åŠ¡å¯åŠ¨è¿‡å¤šï¼Œmapä»»åŠ¡ä¹‹é—´åˆ‡æ¢çš„æ—¶å€™å°±ä¼šè€—è´¹ç›¸å…³çš„ç®¡ç†èµ„æºï¼Œæ‰€ä»¥åˆ‡ç‰‡è¿‡å¤šä¼šå½±å“æ‰§è¡Œæ•ˆç‡</span><br><span class="line">6ã€ åˆ‡ç‰‡è¿‡å°‘åˆä¼šå½±å“ä»»åŠ¡æ‰§è¡Œçš„å¹¶è¡Œåº¦ï¼Œæ‰€ä»¥ç†æƒ³æƒ…å†µç”¨blockå—çš„å¤§å°ä½œä¸ºåˆ‡ç‰‡çš„å¤§å°ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz6ztmqg0oj30s00dg42p.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz85ufnyj9j30ud0b3mz0.jpg" alt=""></p><blockquote><p>å…³äºshuffleçš„ç†è§£</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mapç«¯shuffle</span><br><span class="line">1ã€ä»HDFSè¾“å…¥æ•°æ®å’Œæ‰§è¡Œmapä»»åŠ¡ï¼Œåœ¨mapä»»åŠ¡æ‰§è¡Œä¹‹å‰ï¼ŒRecordReaderé˜…è¯»å™¨è¿˜å°†æ•°æ®å˜æˆæ»¡è¶³Mapå‡½æ•°æ‰€éœ€çš„ï¼ˆKï¼ŒVï¼‰å½¢å¼ï¼Œç„¶åInputFormatä¼šå°†å…¶åˆ‡åˆ†æˆè‹¥å¹²åˆ‡ç‰‡ï¼ˆä¸€å †ï¼ˆKï¼ŒVï¼‰ï¼‰ã€‚</span><br><span class="line">2ã€æ¯ä¸ªåˆ‡ç‰‡ä¼šåˆ†é…ä¸€ä¸ªmapä»»åŠ¡ï¼Œæ¯ä¸ªmapä»»åŠ¡ä¼šåˆ†é…ä¸€ä¸ªé»˜è®¤çš„ç¼“å­˜ï¼Œä¸€èˆ¬é»˜è®¤ç¼“å­˜ä¸º100M.mapçš„è¾“å‡ºé”®å€¼å¯¹ä½œä¸ºä¸­é—´ç»“æœå…ˆå†™å…¥åˆ°ç¼“å­˜ï¼ˆç›´æ¥å†™å…¥ç£ç›˜ä¼šå¢åŠ å¯»å€å¼€é”€ï¼Œæ‰€ä»¥é›†ä¸­å†™å…¥ç£ç›˜ä¸€æ¬¡å¯»å€å°±å¯ä»¥å®Œæˆæ‰¹é‡å†™å…¥ï¼Œå°±å¯ä»¥å°†å¯»å€å¼€é”€åˆ†æ‘Šåˆ°å¤§é‡æ•°æ®ä¸­ï¼Œè¿™å°±æ˜¯ç¼“å­˜çš„ä½œç”¨ï¼‰ã€‚</span><br><span class="line">3ã€å½“å†™å…¥çš„å†…å®¹è¾¾åˆ°ç¼“å­˜ç©ºé—´çš„ä¸€å®šæ¯”ä¾‹åï¼ˆæº¢å†™æ¯”ï¼Œä¸€èˆ¬ä¸º0.8ï¼Œå°±æ˜¯80Mçš„æ—¶å€™ï¼Œä¸ºäº†ä¸å½±å“mapä»»åŠ¡çš„ç»§ç»­æ‰§è¡Œï¼‰ï¼Œä¼šå¯åŠ¨æº¢å†™è¿›ç¨‹ï¼ŒæŠŠç¼“å­˜ä¸­ç›¸å…³æ•°æ®å†™å…¥ç£ç›˜ã€‚</span><br><span class="line">4ã€åœ¨æº¢å†™è¿‡ç¨‹ä¸­ï¼Œä¼šæ‰§è¡Œåˆ†åŒºï¼ˆpartitionï¼‰ã€æ’åºï¼ˆsortï¼ŒæŒ‰ç…§keyå€¼ï¼‰å’Œå¯èƒ½çš„åˆå¹¶ï¼ˆcombineï¼Œä¸ºäº†å‡å°‘æº¢å†™åˆ°ç£ç›˜çš„æ•°æ®é‡ï¼Œæ…ç”¨ï¼‰æ“ä½œï¼Œå†™å…¥ç£ç›˜ï¼Œç”Ÿæˆç£ç›˜çš„æº¢å†™æ–‡ä»¶ã€‚5ã€åœ¨mapä»»åŠ¡è¿è¡Œç»“æŸå‰ï¼Œç³»ç»Ÿä¼šå¯¹æº¢å†™æ–‡ä»¶è¿›è¡Œå½’å¹¶ï¼ˆmergeï¼‰ï¼Œå½¢æˆå¤§æ–‡ä»¶ï¼ˆé‡Œé¢çš„é”®å€¼å¯¹æ˜¯åˆ†åŒºï¼Œæ’åºçš„ï¼‰,æ–‡ä»¶æ ¼å¼ä¸ºï¼ˆkey,value&lt;list&gt;ï¼‰ï¼Œå½’å¹¶æ—¶å¦‚æœæº¢å†™æ–‡ä»¶å¤§äºé¢„å®šå€¼ï¼ˆé»˜è®¤ä¸º3ï¼‰ï¼Œä¼šå†æ¬¡åˆå¹¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">reduceç«¯shuffle</span><br><span class="line">1ã€reduceä»»åŠ¡ä¼šè¯¢é—®JobTrackerï¼Œå»æ‹‰å–mapæœºå™¨ä¸Šçš„å±äºè‡ªå·±çš„åˆ†åŒºï¼Œå¯¹æ¥è‡ªä¸åŒæœºå™¨çš„æ•°æ®è¿›è¡Œå½’å¹¶ã€åˆå¹¶ï¼Œç„¶åè¾“å…¥åˆ°reduceå‡½æ•°ä¸­è¿›è¡Œæ•°æ®çš„å¤„ç†åˆ†æï¼Œå†å†™å…¥ç£ç›˜</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz87b2w9k0j30vg0fijvo.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz87chuik1j30y50g00wu.jpg" alt=""></p><p>æˆ‘</p><h1 id="MapReduceåº”ç”¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹"><a href="#MapReduceåº”ç”¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="MapReduceåº”ç”¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹"></a>MapReduceåº”ç”¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹</h1><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz87d53czuj30vp0fltap.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MapReduce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoop2.X</title>
      <link href="/2019/01/04/Hadoop2.X/"/>
      <url>/2019/01/04/Hadoop2.X/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="ä¸€ã€Hadoop-2-xäº§ç”ŸèƒŒæ™¯"><a href="#ä¸€ã€Hadoop-2-xäº§ç”ŸèƒŒæ™¯" class="headerlink" title="ä¸€ã€Hadoop 2.xäº§ç”ŸèƒŒæ™¯"></a>ä¸€ã€Hadoop 2.xäº§ç”ŸèƒŒæ™¯</h2><h3 id="1ã€Hadoop-1-0å­˜åœ¨çš„é—®é¢˜"><a href="#1ã€Hadoop-1-0å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="1ã€Hadoop 1.0å­˜åœ¨çš„é—®é¢˜"></a>1ã€Hadoop 1.0å­˜åœ¨çš„é—®é¢˜</h3><h4 id="ï¼ˆ1ï¼‰HDFSå­˜åœ¨çš„é—®é¢˜"><a href="#ï¼ˆ1ï¼‰HDFSå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="ï¼ˆ1ï¼‰HDFSå­˜åœ¨çš„é—®é¢˜"></a>ï¼ˆ1ï¼‰HDFSå­˜åœ¨çš„é—®é¢˜</h4><ul><li>NameNodeå•ç‚¹æ•…éšœï¼Œéš¾ä»¥åº”ç”¨äºåœ¨çº¿åœºæ™¯</li><li>NameNodeï¼ˆä¸€ä¸ªï¼‰å‹åŠ›è¿‡å¤§ï¼Œå†…å­˜å—é™ï¼Œå½±å“ç³»ç»Ÿæ‰©å±•æ€§</li></ul><h4 id="ï¼ˆ2ï¼‰MapReduceå­˜åœ¨çš„é—®é¢˜"><a href="#ï¼ˆ2ï¼‰MapReduceå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="ï¼ˆ2ï¼‰MapReduceå­˜åœ¨çš„é—®é¢˜"></a>ï¼ˆ2ï¼‰MapReduceå­˜åœ¨çš„é—®é¢˜</h4><ul><li>JobTrackerè®¿é—®å‹åŠ›å¤§ï¼Œå½±å“ç³»ç»Ÿæ‰©å±•æ€§</li><li>éš¾ä»¥æ”¯æŒMapReduceä»¥å¤–çš„è®¡ç®—æ¡†æ¶ï¼Œæ¯”å¦‚Sparkã€Storm</li></ul><h3 id="2ã€Hadoop-2-0åˆ†æ”¯"><a href="#2ã€Hadoop-2-0åˆ†æ”¯" class="headerlink" title="2ã€Hadoop 2.0åˆ†æ”¯"></a>2ã€Hadoop 2.0åˆ†æ”¯</h3><p>HDFSï¼šåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿ<br>MapReduceï¼šè®¡ç®—æ¡†æ¶<br>YARNï¼šèµ„æºç®¡ç†ç³»ç»Ÿ</p><h3 id="3ã€ç‰¹ç‚¹"><a href="#3ã€ç‰¹ç‚¹" class="headerlink" title="3ã€ç‰¹ç‚¹"></a>3ã€ç‰¹ç‚¹</h3><p> 1ï¼‰. è§£å†³å•ç‚¹æ•…éšœï¼šHDFS HAï¼ˆé«˜å¯ç”¨ï¼‰</p><blockquote><p>  é€šè¿‡ä¸»å¤‡NameNodeè§£å†³ï¼Œå¦‚æœä¸»NameNodeå‘ç”Ÿæ•…éšœï¼Œå°±åˆ‡æ¢åˆ°å¤‡NameNodeä¸Š   |</p></blockquote><p> 2).è§£å†³å†…å­˜å—é™é—®é¢˜ï¼šHDFS Federationï¼ˆè”é‚¦åˆ¶ï¼‰ã€HA</p><blockquote><p> HAï¼šä¸¤ä¸ªNameNode<br> (3.0å°±å®ç°äº†ä¸€ç»„å¤šä»ï¼šæ°´å¹³æ‰©å±•ï¼Œæ”¯æŒå¤šä¸ªNameNodeï¼›æ¯ä¸ªNameNodeåˆ†ç®¡ä¸€éƒ¨åˆ†ç›®å½•ï¼›æ‰€æœ‰NameNodeå…±äº«æ‰€æœ‰DataNodeèµ„æº)</p></blockquote><p> 3).ä»…æ¶æ„ä¸Šå‘ç”Ÿå˜åŒ–ä½¿ç”¨æ–¹å¼ä¸å˜</p><h2 id="äºŒã€HDFS-HAç»“æ„åŠåŠŸèƒ½"><a href="#äºŒã€HDFS-HAç»“æ„åŠåŠŸèƒ½" class="headerlink" title="äºŒã€HDFS HAç»“æ„åŠåŠŸèƒ½"></a>äºŒã€HDFS HAç»“æ„åŠåŠŸèƒ½</h2><h3 id="HA"><a href="#HA" class="headerlink" title="**HA"></a>**HA</h3><p>DNï¼šDataNodeï¼ˆæ•°æ®èŠ‚ç‚¹ï¼‰</p><blockquote><p>å­˜æ”¾æ•°æ®blockå—ï¼›éµå¾ªå¿ƒè·³æœºåˆ¶å‘NN Activeå’ŒNN Standbyæ±‡æŠ¥blockå—ä¿¡æ¯ï¼Œä½†åªæ‰§è¡Œactiveçš„å‘½ä»¤         </p></blockquote><p>ä¸»å¤‡NNï¼šNameNode Active å’Œ NameNode Standby ï¼ˆä¸»å¤‡åç§°èŠ‚ç‚¹ï¼‰</p><blockquote><p>ä¸»NNå¯¹å¤–æä¾›è¯»å†™æœåŠ¡ï¼Œå¤‡NNåŒæ­¥ä¸»NNå…ƒæ•°æ®ï¼Œä»¥å¾…åˆ‡æ¢ï¼Œæ‰€æœ‰çš„DNåŒæ—¶å‘ä¸¤ä¸ªNNæ±‡æŠ¥æ•°æ®å—ä¿¡æ¯</p><p>å…ƒæ•°æ®ä¿¡æ¯åŠ è½½åˆ°ä¸»NNï¼Œå¹¶å†™å…¥JNï¼ˆè‡³å°‘å†™ä¸¤å°ï¼šè¿‡åŠåŸåˆ™ï¼‰ï¼›</p><p>å¤‡NNå¯ä»¥ä»JNä¸­åŒæ­¥å…ƒæ•°æ®ä¿¡æ¯ï¼›</p><p>è§£å†³å•ç‚¹æ•…éšœï¼›</p><p>â€“ä¸¤ç§åˆ‡æ¢æ–¹å¼ï¼š</p><p>æ‰‹åŠ¨ï¼šé€šè¿‡å‘½ä»¤å®ç°ä¸»å¤‡åˆ‡æ¢</p><p>è‡ªåŠ¨ï¼šåŸºäºZookeeperå®ç°ï¼ˆè¯¦æƒ…è§æ­å»ºæ­¥éª¤ï¼‰</p></blockquote><p>JNï¼šJournalNodeï¼ˆè‡³å°‘3å°ï¼‰</p><blockquote><p>å­˜å‚¨ä¸»NNå…ƒæ•°æ®ä¿¡æ¯ï¼Œå®ç°ä¸»å¤‡NNé—´æ•°æ®å…±äº«ï¼›</p><p>ï¼ˆéµå¾ªè¿‡åŠåŸåˆ™ï¼šè‡³å°‘æœ‰è¿‡åŠçš„æ•°é‡å‚ä¸æŠ•ç¥¨ï¼‰</p></blockquote><p>ZKFCï¼šFailoverControllerï¼ˆç«äº‰é”ï¼‰</p><blockquote><p>è°æ‹¿åˆ°äº†è¿™ä¸ªæ‰€ï¼Œè°å°±æ˜¯active NN</p><p>å¿ƒè·³æœºåˆ¶ç›‘æ§ä¸»å¤‡NNçŠ¶æ€ï¼Œä¸€æ—¦å‡ºç°ä¸€å°æŒ‚æœºï¼Œå°±ä¼šé‡Šæ”¾é”ï¼Œå¦ä¸€ä¸ªNNå°±ä¼šç«‹å³å¯åŠ¨ç«äº‰é”ï¼Œæˆä¸ºactive NN</p></blockquote><p>ZKï¼šZookeeperï¼ˆè‡³å°‘3å°ï¼‰</p><blockquote><p>ï¼ˆå®ç°ä¸»å¤‡NNåˆ‡æ¢ï¼‰</p></blockquote><h3 id="è”é‚¦"><a href="#è”é‚¦" class="headerlink" title="**è”é‚¦"></a>**è”é‚¦</h3><blockquote><p>é€šè¿‡å¤šä¸ªnamenode/namespaceæŠŠå…ƒæ•°æ®çš„å­˜å‚¨å’Œç®¡ç†åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸­ï¼Œä½¿åˆ°namenode/namespaceå¯ä»¥é€šè¿‡å¢åŠ æœºå™¨æ¥è¿›è¡Œæ°´å¹³æ‰©å±•</p></blockquote><blockquote><p>é€šè¿‡å¤šä¸ªnamespaceæ¥éš”ç¦»ä¸åŒç±»å‹çš„åº”ç”¨ï¼ŒæŠŠä¸åŒç±»å‹åº”ç”¨çš„HDFSå…ƒæ•°æ®çš„å­˜å‚¨å’Œç®¡ç†åˆ†æ´¾åˆ°ä¸åŒçš„namenodeä¸­ã€‚</p></blockquote><h2 id="ä¸‰ã€YARN-èµ„æºç®¡ç†"><a href="#ä¸‰ã€YARN-èµ„æºç®¡ç†" class="headerlink" title="ä¸‰ã€YARN(èµ„æºç®¡ç†)???????"></a>ä¸‰ã€YARN(èµ„æºç®¡ç†)???????</h2><p><code>è¯¦è§Yarnå­¦ä¹ .md</code></p><p>1ã€æ ¸å¿ƒæ€æƒ³ï¼šSourceManagerï¼ˆèµ„æºç®¡ç†ï¼‰+ReplicationMasterï¼ˆä»»åŠ¡è°ƒåº¦ï¼‰</p><p>2.yarnçš„å¼•å…¥ä½¿å¾—å¤šä¸ªè®¡ç®—æ¡†æ¶å¯ä»¥åº”ç”¨åˆ°ä¸€ä¸ªé›†ç¾¤ä¸­</p><h2 id="å››ã€Zookeeperå·¥ä½œåŸç†"><a href="#å››ã€Zookeeperå·¥ä½œåŸç†" class="headerlink" title="å››ã€Zookeeperå·¥ä½œåŸç†"></a>å››ã€Zookeeperå·¥ä½œåŸç†</h2><p><code>è¯¦è§Zookeeperå­¦ä¹ .md</code></p><h2 id="äº”ã€Hadoop2-X-é›†ç¾¤æ­å»º"><a href="#äº”ã€Hadoop2-X-é›†ç¾¤æ­å»º" class="headerlink" title="äº”ã€Hadoop2.X é›†ç¾¤æ­å»º"></a>äº”ã€Hadoop2.X é›†ç¾¤æ­å»º</h2><h3 id="1ã€linuxç¯å¢ƒä¸‹æ­å»º"><a href="#1ã€linuxç¯å¢ƒä¸‹æ­å»º" class="headerlink" title="1ã€linuxç¯å¢ƒä¸‹æ­å»º"></a>1ã€linuxç¯å¢ƒä¸‹æ­å»º</h3><table><thead><tr><th></th><th style="text-align:center">NN</th><th style="text-align:center">DN</th><th style="text-align:center">JN</th><th style="text-align:center">ZKFC</th><th style="text-align:center">ZK</th><th style="text-align:center">SM</th><th style="text-align:center">RM</th></tr></thead><tbody><tr><td>node00</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td></tr><tr><td>node01</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center"></td><td style="text-align:center">âˆš</td></tr><tr><td>node02</td><td style="text-align:center"></td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center"></td><td style="text-align:center">âˆš</td><td style="text-align:center"></td><td style="text-align:center">âˆš</td></tr></tbody></table><p>0.åœ¨æ­å»ºç¯å¢ƒä¹‹å‰çš„å‡†å¤‡</p><p>ä¸‰å°è™šæ‹Ÿæœºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å…³é—­é˜²ç«å¢™</span><br><span class="line">å®‰è£…jdk</span><br><span class="line">ç¼–è¾‘/etc/hosts/ç»™å„ä¸ªèŠ‚ç‚¹æœåŠ¡å™¨èµ·åˆ«å</span><br><span class="line">æ—¶é—´æœåŠ¡å™¨ï¼šntpdate</span><br><span class="line">     å®‰è£…ï¼šyum install ntpdate -y</span><br><span class="line">     ç”Ÿæˆï¼šntpdate cn.ntp.org.cn</span><br><span class="line">å…å¯†ç™»å½•ç¯å¢ƒå‡†å¤‡</span><br></pre></td></tr></table></figure><p>åœ¨hadoopå®‰è£…ç›®å½•ä¸‹hadoop-2.6.5/etc/hadoop/</p><ol><li>ç¼–è¾‘hadoop-env.sh</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/soft/jdk1.8.0_191</span><br></pre></td></tr></table></figure><p>   2.ç¼–è¾‘core-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://Sunrise<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="comment">&lt;!--é…ç½®é›†ç¾¤çš„åå­—--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>ha.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>node00:2181,node01:2181,node02:2181<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®zookeeperï¼šä¸‰ä¸ªèŠ‚ç‚¹--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/hadoop<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="comment">&lt;!--é…ç½®hadoopåŸºç¡€é…ç½®å­˜æ”¾çš„è·¯å¾„--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.ç¼–è¾‘hdfs-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.nameservices<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>sxt<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.namenodes.Sunrise<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>nn1,nn2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.rpc-address.Sunrise.nn1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>node00:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.rpc-address.Sunrise.nn2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>node01:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address.Sunrise.nn1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>node00:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address.Sunrise.nn2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>node01:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æŒ‡å®šnamenodeå…ƒæ•°æ®å­˜å‚¨åœ¨journalnodeä¸­çš„è·¯å¾„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.shared.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>qjournal://node00:8485;node01:8485;node02:8485/sxt<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šHDFSå®¢æˆ·ç«¯è¿æ¥active namenodeçš„javaç±» --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.client.failover.proxy.provider.Sunrise<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- é…ç½®éš”ç¦»æœºåˆ¶ä¸ºssh é˜²æ­¢è„‘è£‚ï¼šä¿è¯activeNNä»…æœ‰ä¸€å°--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.fencing.methods<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>sshfence<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šç§˜é’¥çš„ä½ç½® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.fencing.ssh.private-key-files<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/.ssh/id_dsa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å…å¯†ç™»å½•æ˜¯ç”Ÿæˆçš„æ–‡ä»¶ï¼Œæœ‰çš„æ˜¯id_rsa--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- æŒ‡å®šjournalnodeæ—¥å¿—æ–‡ä»¶å­˜å‚¨çš„è·¯å¾„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.journalnode.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/hadoop/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯è‡ªåŠ¨æ•…éšœè½¬ç§» --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.automatic-failover.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>é…ç½®hadoopä¸­çš„slavesï¼ˆä¸»ä»æ¶æ„ï¼šdatanodeï¼‰</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node00</span><br><span class="line">node01</span><br><span class="line">node02</span><br></pre></td></tr></table></figure><p>  5.å‡†å¤‡zookeeper</p><ul><li><p>ä¸‰å°zookeeperï¼šnode00ï¼Œnode01ï¼Œnode02</p></li><li><p>ç¼–è¾‘zookeeper-3.4.13/conf/zoo.cfg</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tickTime=2000</span><br><span class="line">initLimit=10</span><br><span class="line">syncLimit=5</span><br><span class="line">dataDir=/usr/soft/zookeeper-3.4.13/data</span><br><span class="line">dataLogDir=/usr/soft/zookeeper-3.4.13/logs</span><br><span class="line">clientPort=2181</span><br><span class="line">server.1=node00:2888:3888</span><br><span class="line">server.2=node01:2888:3888</span><br><span class="line">server.3=node02:2888:3888</span><br></pre></td></tr></table></figure></li><li><p>åœ¨dataDirç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶myidï¼Œä¸‰å°èŠ‚ç‚¹çš„æ–‡ä»¶å†…å®¹åˆ†åˆ«ä¸º1ï¼Œ2ï¼Œ3</p></li></ul><p>6.é…ç½®ç¯å¢ƒå˜é‡   </p><blockquote><p>vim ~/.bash_profile</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/soft/jdk1.8.0_191</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">HADOOP_HOME=/usr/soft/hadoop-2.6.5</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span class="line">ZOOKEEPER_HOME=/usr/soft/zookeeper-3.4.13</span><br><span class="line">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br></pre></td></tr></table></figure><blockquote><p>source ~/.bash_profile</p><p>ä½¿å…¶æˆä¸ºèµ„æºæ–‡ä»¶ï¼Œå‘é€åˆ°å…¶ä»–èŠ‚ç‚¹åï¼Œä¹Ÿéœ€è¦æ­¤æ“ä½œ</p></blockquote><p>7.å°†ä»¥ä¸Šé…ç½®æ–‡ä»¶è¿œç¨‹å‘é€è‡³å…¶ä»–èŠ‚ç‚¹æœåŠ¡å™¨</p><blockquote><p>scp -r filename nodename:<code>pwd</code></p></blockquote><p>8.å‘½ä»¤æ“ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1. å¯åŠ¨ä¸‰ä¸ªzookeeperï¼š./zkServer.sh start</span><br><span class="line">2. å¯åŠ¨ä¸‰ä¸ªJournalNodeï¼š./hadoop-daemon.sh start journalnode</span><br><span class="line">3. ï¼ˆç”Ÿæˆfsimageæ–‡ä»¶ï¼‰åœ¨å…¶ä¸­ä¸€ä¸ªnamenodeä¸Šæ ¼å¼åŒ–ï¼š</span><br><span class="line">    hdfs namenode -format</span><br><span class="line">4. æŠŠåˆšåˆšæ ¼å¼åŒ–ä¹‹åçš„å…ƒæ•°æ®æ‹·è´åˆ°å¦å¤–ä¸€ä¸ªnamenodeä¸Š</span><br><span class="line"> a)å¯åŠ¨åˆšåˆšæ ¼å¼åŒ–çš„namenode :  hadoop-daemon.sh start namenode</span><br><span class="line"> b)ï¼ˆåŒæ­¥fsimageæ–‡ä»¶ï¼‰åœ¨å¦ä¸€ä¸ªï¼ˆæ²¡æœ‰æ ¼å¼åŒ–çš„ï¼‰namenodeä¸Šæ‰§è¡Œï¼š</span><br><span class="line">    hdfs namenode -bootstrapStandby</span><br><span class="line"> c)å¯åŠ¨æ²¡æ ¼å¼åŒ–çš„namenodeï¼š    hadoop-daemon.sh start namenode</span><br><span class="line">5. ï¼ˆåˆå§‹åŒ–ç«äº‰é”zookeeperï¼‰åœ¨å…¶ä¸­ä¸€ä¸ªnamenodeä¸Šåˆå§‹åŒ–zkfcï¼š</span><br><span class="line">    hdfs zkfc -formatZK</span><br><span class="line">6. åœæ­¢ä¸Šé¢èŠ‚ç‚¹ï¼šstop-dfs.sh</span><br><span class="line">7. å…¨é¢å¯åŠ¨ï¼ˆä¸‰ä¸ªèŠ‚ç‚¹ï¼‰ï¼šstart-dfs.sh</span><br><span class="line">8. å¯åŠ¨yarnèµ„æºç®¡ç†å™¨</span><br><span class="line">   yarn-daemon.sh start resourcemanager </span><br><span class="line">   (yarn resourcemanager  )</span><br></pre></td></tr></table></figure><h3 id="2ã€ä½¿ç”¨"><a href="#2ã€ä½¿ç”¨" class="headerlink" title="2ã€ä½¿ç”¨"></a>2ã€ä½¿ç”¨</h3><p>ï¼ˆå¯åŠ¨æ­¥éª¤ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(1)å…³é—­é˜²ç«å¢™ï¼šservice iptables stop        ï¼ˆ3å°ï¼‰</span><br><span class="line">(2)å¯åŠ¨zookeeper:zkServer.sh start          ï¼ˆ3å°ï¼‰</span><br><span class="line">(3)å¯åŠ¨é›†ç¾¤ï¼šstart-dfs.sh |ï¼ˆstart-all.sh   :  åŒæ—¶å¯åŠ¨hdfså’Œyarn)</span><br><span class="line">(4)å¯åŠ¨yarnï¼šyarn-daemon.sh start resourcemanager ï¼ˆå¯3å°ï¼‰</span><br></pre></td></tr></table></figure><p>ï¼ˆå…³é—­æ­¥éª¤ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1)å…³é—­yarnï¼šyarn-daemon.sh stop resourcemanager  ï¼ˆå¼€å‡ å°å…³å‡ å°ï¼‰</span><br><span class="line">(2)å…³é—­é›†ç¾¤ï¼šstop-dfs.sh   |ï¼ˆstop-all.sh    :åŒæ—¶å…³é—­hdfså’Œyarnï¼‰ ï¼ˆ3å°ï¼‰</span><br><span class="line">(3)å…³é—­zookeeperï¼šzkServer.sh stop                 ï¼ˆ3å°ï¼‰</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æœ‰å¯èƒ½ä¼šå‡ºé”™çš„åœ°æ–¹</span><br><span class="line">1ï¼Œç¡®è®¤æ¯å°æœºå™¨é˜²ç«å¢™å‡å…³æ‰</span><br><span class="line">2ï¼Œç¡®è®¤æ¯å°æœºå™¨çš„æ—¶é—´æ˜¯ä¸€è‡´çš„</span><br><span class="line">3ï¼Œç¡®è®¤é…ç½®æ–‡ä»¶æ— è¯¯ï¼Œå¹¶ä¸”ç¡®è®¤æ¯å°æœºå™¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸€æ ·</span><br><span class="line">4ï¼Œå¦‚æœè¿˜æœ‰é—®é¢˜æƒ³é‡æ–°æ ¼å¼åŒ–ï¼Œé‚£ä¹ˆå…ˆæŠŠæ‰€æœ‰èŠ‚ç‚¹çš„è¿›ç¨‹å…³æ‰</span><br><span class="line">5ï¼Œåˆ é™¤ä¹‹å‰æ ¼å¼åŒ–çš„æ•°æ®ç›®å½•hadoop.tmp.dirå±æ€§å¯¹åº”çš„ç›®å½•ï¼Œæ‰€æœ‰èŠ‚ç‚¹åŒæ­¥éƒ½åˆ æ‰ï¼Œåˆ«å•åˆ æ‰ä¹‹å‰çš„ä¸€ä¸ªï¼Œåˆ æ‰ä¸‰å°JNèŠ‚ç‚¹ä¸­dfs.journalnode.edits.dirå±æ€§æ‰€å¯¹åº”çš„ç›®å½•</span><br><span class="line">6ï¼Œæ¥ä¸Šé¢çš„ç¬¬6æ­¥åˆå¯ä»¥é‡æ–°æ ¼å¼åŒ–å·²ç»å¯åŠ¨äº†</span><br><span class="line">7ï¼Œæœ€ç»ˆActive Namenodeåœæ‰çš„æ—¶å€™ï¼ŒStandByå¯ä»¥è‡ªåŠ¨æ¥ç®¡ï¼</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeperå­¦ä¹ </title>
      <link href="/2019/01/03/Zookeeper%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/03/Zookeeper%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><p>åŠ¨ç‰©å›­ç®¡ç†å‘˜</p><p><code>æ¨èå›¾ä¹¦ï¼š</code>ã€Šä»Paxoåˆ°Zookeeperã€‹</p><h1 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h1><h2 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><blockquote><p>å¼€æºçš„ã€åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºï¼Œæä¾›<strong><code>ä¸€è‡´æ€§</code></strong>æœåŠ¡ï¼Œæ˜¯Haoop ï¼ˆå®ç°HAï¼‰å’ŒHbaseï¼ˆå’Œzookeeperæ˜¯å¼ºä¾èµ–å…³ç³»ï¼‰çš„é‡è¦ç»„ä»¶</p></blockquote><p>æä¾›çš„åŠŸèƒ½ï¼š</p><ul><li>é…ç½®ç»´æŠ¤</li><li>åŸŸåç»´æŠ¤</li><li>åˆ†å¸ƒå¼çš„åŒæ­¥</li><li>ç»„æœåŠ¡</li></ul><p>Zookeeperâ†’æä¾›é€šç”¨åˆ†å¸ƒå¼é”æœåŠ¡ï¼Œç”¨ä»¥åè°ƒåˆ†å¸ƒå¼åº”ç”¨</p><p>Keepalivedâ†’å®ç°èŠ‚ç‚¹å¥åº·æ£€æŸ¥ï¼Œé‡‡ç”¨ä¼˜å…ˆçº§ç›‘æ§ï¼Œæ²¡æœ‰ååŒå·¥ä½œï¼ŒåŠŸèƒ½å•ä¸€ï¼Œå¯æ‰©å±•æ€§å·®ã€‚</p><h2 id="2ã€Zookeepè€Œè§’è‰²"><a href="#2ã€Zookeepè€Œè§’è‰²" class="headerlink" title="2ã€Zookeepè€Œè§’è‰²"></a>2ã€Zookeepè€Œè§’è‰²</h2><p> <img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzd81ntj7tj30fd06pgn1.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzd828tp44j30fo07lwgl.jpg" alt=""></p><p>ï¼ˆä¸€èˆ¬å¾ˆå°‘é…ç½®Observerï¼Œå› ä¸ºç”¨çš„å°‘ï¼Œè€Œä¸”é…ç½®çš„èŠ‚ç‚¹ä¸€èˆ¬ä¸ºå¥‡æ•°ï¼‰</p><blockquote><p>Zookeeperéœ€ä¿è¯é«˜å¯ç”¨å’Œå¼ºä¸€è‡´æ€§ï¼›</p><p>â€‹    ä¸ºäº†æ”¯æŒæ›´å¤šçš„å®¢æˆ·ç«¯ï¼Œéœ€è¦å¢åŠ æ›´å¤šServerï¼›</p><p>â€‹    Serverå¢å¤šï¼ŒæŠ•ç¥¨é˜¶æ®µå»¶è¿Ÿå¢å¤§ï¼Œå½±å“æ€§èƒ½ï¼›</p><p>â€‹    æƒè¡¡ä¼¸ç¼©æ€§å’Œé«˜ååç‡ï¼Œå¼•å…¥Observer</p><p>â€‹    Observerä¸å‚ä¸æŠ•ç¥¨ï¼›</p><p>â€‹    Observersæ¥å—å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå¹¶å°†å†™è¯·æ±‚è½¬å‘ç»™leaderèŠ‚ç‚¹ï¼›</p><p>â€‹    åŠ å…¥æ›´å¤šObserverèŠ‚ç‚¹ï¼Œæé«˜ä¼¸ç¼©æ€§ï¼ŒåŒæ—¶ä¸å½±å“ååç‡ã€‚</p></blockquote><h2 id="3ã€Zookeeperç‰¹ç‚¹"><a href="#3ã€Zookeeperç‰¹ç‚¹" class="headerlink" title="3ã€Zookeeperç‰¹ç‚¹"></a>3ã€Zookeeperç‰¹ç‚¹</h2><table><thead><tr><th style="text-align:center"><strong>ç‰¹ç‚¹</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td style="text-align:center"><strong><em>æœ€ç»ˆ</em>ä¸€è‡´æ€§</strong></td><td>ä¸ºå®¢æˆ·ç«¯å±•ç¤ºåŒä¸€ä¸ªè§†å›¾ï¼Œè¿™æ˜¯zookeeperé‡Œé¢ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½ï¼ˆä¸å¼ºä¸€è‡´æ€§ç›¸å¯¹ï¼‰</td></tr><tr><td style="text-align:center"><strong>å¯é æ€§</strong></td><td>å¦‚æœæ¶ˆæ¯è¢«åˆ°ä¸€å°æœåŠ¡å™¨æ¥å—ï¼Œé‚£ä¹ˆå®ƒå°†è¢«æ‰€æœ‰çš„æœåŠ¡å™¨æ¥å—.</td></tr><tr><td style="text-align:center"><strong>å®æ—¶æ€§</strong></td><td>Zookeeperä¸èƒ½ä¿è¯ä¸¤ä¸ªå®¢æˆ·ç«¯èƒ½åŒæ—¶å¾—åˆ°åˆšæ›´æ–°çš„æ•°æ®ï¼Œå¦‚æœéœ€è¦æœ€æ–°æ•°æ®ï¼Œåº”è¯¥åœ¨è¯»æ•°æ®ä¹‹å‰è°ƒç”¨sync()æ¥å£ã€‚</td></tr><tr><td style="text-align:center"><strong>ç‹¬ç«‹æ€§</strong></td><td>å„ä¸ªClientä¹‹é—´äº’ä¸å¹²é¢„</td></tr><tr><td style="text-align:center"><strong>åŸå­æ€§</strong></td><td>æ›´æ–°åªèƒ½æˆåŠŸæˆ–è€…å¤±è´¥ï¼Œæ²¡æœ‰ä¸­é—´çŠ¶æ€ã€‚</td></tr><tr><td style="text-align:center"><strong>é¡ºåºæ€§</strong></td><td>æ‰€æœ‰Serverï¼ŒåŒä¸€æ¶ˆæ¯å‘å¸ƒé¡ºåºä¸€è‡´ã€‚</td></tr></tbody></table><h3 id="4ã€å®‰è£…éƒ¨ç½²ï¼š"><a href="#4ã€å®‰è£…éƒ¨ç½²ï¼š" class="headerlink" title="4ã€å®‰è£…éƒ¨ç½²ï¼š"></a>4ã€å®‰è£…éƒ¨ç½²ï¼š</h3><p><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener">å®˜ç½‘ï¼š</a></p><p><a href="https://archive.apache.org/dist/zookeeper/" target="_blank" rel="noopener">ä¸‹è½½ï¼š</a></p><p>ï¼ˆ1ï¼‰<code>ä¿®æ”¹</code>é…ç½®æ–‡ä»¶ï¼š</p><p>åœ¨Zokeeperçš„å®‰è£…ç›®å½•ä¸­çš„confç›®å½•ä¸‹ï¼Œå°†zoo_sample.cfgæ–‡ä»¶æ”¹åä¸ºzoo.cfg</p><blockquote><p>mv zoo_sample.cfg zoo.cfg</p></blockquote><p><code>ç¼–è¾‘ï¼š</code></p><blockquote><p>vim /usr/soft/zookeeper-3.4.13/conf/zoo.cfg</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#å‘é€å¿ƒè·³çš„é—´éš”æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’</span><br><span class="line">tickTime=2000  </span><br><span class="line">dataDir=/usr/soft/zookeeper-3.4.13/data</span><br><span class="line">dataLogDir=/usr/soft/zookeeper-3.4.13/logs</span><br><span class="line">dataLogDir=/Users/zdandljb/zookeeper/dataLog</span><br><span class="line">#å®¢æˆ·ç«¯è¿æ¥ Zookeeper æœåŠ¡å™¨çš„ç«¯å£ï¼Œ</span><br><span class="line">clientPort=2181    </span><br><span class="line">#Zookeeper ä¼šç›‘å¬è¿™ä¸ªç«¯å£ï¼Œæ¥å—å®¢æˆ·ç«¯çš„è®¿é—®è¯·æ±‚ã€‚</span><br><span class="line">initLimit=5</span><br><span class="line">syncLimit=2</span><br><span class="line">server.1=node01:2888:3888</span><br><span class="line">server.2=node02:2888:3888</span><br><span class="line">server.3=node03:2888:3888</span><br></pre></td></tr></table></figure><p><code>é…ç½®è§£é‡Š:</code></p><blockquote><p><code>initLimit</code>ï¼š è¿™ä¸ªé…ç½®é¡¹æ˜¯ç”¨æ¥é…ç½® Zookeeper æ¥å—å®¢æˆ·ç«¯ï¼ˆè¿™é‡Œæ‰€è¯´çš„å®¢æˆ·ç«¯æ˜¯ Zookeeper æœåŠ¡å™¨é›†ç¾¤ä¸­è¿æ¥åˆ° Leader çš„ Follower æœåŠ¡å™¨ï¼‰åˆå§‹åŒ–è¿æ¥æ—¶æœ€é•¿èƒ½å¿å—å¤šå°‘ä¸ªå¿ƒè·³æ—¶é—´é—´éš”æ•°ã€‚å½“å·²ç»è¶…è¿‡ 5 ä¸ªå¿ƒè·³çš„æ—¶é—´ï¼ˆä¹Ÿå°±æ˜¯ tickTimeï¼‰é•¿åº¦å Zookeeper æœåŠ¡å™¨è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„è¿”å›ä¿¡æ¯ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™ä¸ªå®¢æˆ·ç«¯è¿æ¥å¤±è´¥ã€‚æ€»çš„æ—¶é—´é•¿åº¦å°±æ˜¯ 5*2000=10 ç§’</p><p>syncLimitï¼šè¿™ä¸ªé…ç½®é¡¹æ ‡è¯† Leader ä¸ Follower ä¹‹é—´å‘é€æ¶ˆæ¯ï¼Œè¯·æ±‚å’Œåº”ç­”æ—¶é—´é•¿åº¦ï¼Œæœ€é•¿ä¸èƒ½è¶…è¿‡å¤šå°‘ä¸ª tickTime çš„å¿ƒè·³æ—¶é—´é•¿åº¦ï¼Œæ€»çš„æ—¶é—´é•¿åº¦å°±æ˜¯ 2*2000=4 ç§’</p><p>server.A=Bï¼šCï¼šDï¼šå…¶ ä¸­ A æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºè¿™ä¸ªæ˜¯ç¬¬å‡ å·æœåŠ¡å™¨ï¼›B æ˜¯è¿™ä¸ªæœåŠ¡å™¨çš„ ip åœ°å€ï¼›C è¡¨ç¤ºçš„æ˜¯è¿™ä¸ªæœåŠ¡å™¨ä¸é›†ç¾¤ä¸­çš„ Leader æœåŠ¡å™¨äº¤æ¢ä¿¡æ¯çš„ç«¯å£ï¼›D è¡¨ç¤ºçš„æ˜¯ä¸‡ä¸€é›†ç¾¤ä¸­çš„ Leader æœåŠ¡å™¨æŒ‚äº†ï¼Œéœ€è¦ä¸€ä¸ªç«¯å£æ¥é‡æ–°è¿›è¡Œé€‰ä¸¾ï¼Œé€‰å‡ºä¸€ä¸ªæ–°çš„ Leaderï¼Œè€Œè¿™ä¸ªç«¯å£å°±æ˜¯ç”¨æ¥æ‰§è¡Œé€‰ä¸¾æ—¶æœåŠ¡å™¨ç›¸äº’é€šä¿¡çš„ç«¯å£ã€‚å¦‚æœæ˜¯ä¼ªé›†ç¾¤çš„é…ç½®æ–¹å¼ï¼Œç”±äº B éƒ½æ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥ä¸åŒçš„ Zookeeper å®ä¾‹é€šä¿¡ç«¯å£å·ä¸èƒ½ä¸€æ ·ï¼Œæ‰€ä»¥è¦ç»™å®ƒä»¬åˆ†é…ä¸åŒçš„ç«¯å£å·</p></blockquote><p>(2)<strong>åˆ›å»ºmyidæ–‡ä»¶</strong>ï¼ˆåœ¨ä¸Šé¢é…ç½®æ–‡ä»¶ä¸­é…ç½®dataDir  çš„ç›®å½•ä¸‹ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server1æœºå™¨çš„å†…å®¹ä¸ºï¼š1ï¼Œ</span><br><span class="line">server2æœºå™¨çš„å†…å®¹ä¸ºï¼š2ï¼Œ</span><br><span class="line">server3æœºå™¨çš„å†…å®¹ä¸ºï¼š3</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰å°†zookeeperåŒ…å‘åˆ°å„ä¸ªèŠ‚ç‚¹ä¸Š</p><h1 id="Paxoç®—æ³•"><a href="#Paxoç®—æ³•" class="headerlink" title="Paxoç®—æ³•"></a>Paxoç®—æ³•</h1><p><a href="http://zh.wikipedia.org/zh-cn/Paxos" target="_blank" rel="noopener">å®˜ç½‘ï¼š</a></p><h2 id="1ã€ç®€ä»‹-1"><a href="#1ã€ç®€ä»‹-1" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><p>ä¸€ä¸ªåŸºäºæ¶ˆæ¯ä¼ é€’çš„ä¸€è‡´æ€§ç®—æ³•ï¼Œå¹¿æ³›åº”ç”¨äºåˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼Œæ˜¯åˆ°ç›®å‰ä¸ºæ­¢å”¯ä¸€çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ã€‚</p><p><code>å‰æï¼š</code></p><p>Paxos æœ‰ä¸€ä¸ªå‰æï¼šæ²¡æœ‰æ‹œå åº­å°†å†›é—®é¢˜ã€‚å°±æ˜¯è¯´ Paxosåªæœ‰åœ¨ä¸€ä¸ªå¯ä¿¡çš„è®¡ç®—ç¯å¢ƒä¸­æ‰èƒ½æˆç«‹ï¼Œè¿™ä¸ªç¯å¢ƒæ˜¯ä¸ä¼šè¢«å…¥ä¾µæ‰€ç ´åçš„ã€‚</p><h2 id="2ã€ç»“åˆæ•…äº‹çš„å¯¹åº”ç†è§£"><a href="#2ã€ç»“åˆæ•…äº‹çš„å¯¹åº”ç†è§£" class="headerlink" title="2ã€ç»“åˆæ•…äº‹çš„å¯¹åº”ç†è§£"></a>2ã€ç»“åˆæ•…äº‹çš„å¯¹åº”ç†è§£</h2><blockquote><p>å°å²›(Island)â€”â€”ZK Server Cluster<br>è®®å‘˜(Senator)â€”â€”ZK Server<br>æè®®(Proposal)â€”â€”ZNode Change(Create/Delete/SetDataâ€¦)<br>æè®®ç¼–å·(PID)â€”â€”Zxid(ZooKeeper Transaction Id)<br>æ­£å¼æ³•ä»¤â€”â€”æ‰€æœ‰ ZNode åŠå…¶æ•°æ®</p><p>æ€»ç»Ÿâ€”â€”ZK Server Leader</p></blockquote><h1 id="zookeeperçš„èŠ‚ç‚¹åŠå·¥ä½œåŸç†"><a href="#zookeeperçš„èŠ‚ç‚¹åŠå·¥ä½œåŸç†" class="headerlink" title="zookeeperçš„èŠ‚ç‚¹åŠå·¥ä½œåŸç†"></a>zookeeperçš„èŠ‚ç‚¹åŠå·¥ä½œåŸç†</h1><h2 id="1ã€å·¥ä½œåŸç†"><a href="#1ã€å·¥ä½œåŸç†" class="headerlink" title="1ã€å·¥ä½œåŸç†"></a>1ã€<strong>å·¥ä½œåŸç†</strong></h2><blockquote><p>1.æ¯ä¸ªServeråœ¨å†…å­˜ä¸­å­˜å‚¨äº†ä¸€ä»½æ•°æ®ï¼›</p><p>2.Zookeeperå¯åŠ¨æ—¶ï¼Œå°†ä»å®ä¾‹ä¸­é€‰ä¸¾ä¸€ä¸ªleaderï¼ˆPaxosåè®®ï¼‰</p><p>3.Leaderè´Ÿè´£å¤„ç†æ•°æ®æ›´æ–°ç­‰æ“ä½œ</p><p>4.ä¸€ä¸ªæ›´æ–°æ“ä½œæˆåŠŸï¼Œå½“ä¸”ä»…å½“å¤§å¤šæ•°Serveråœ¨å†…å­˜ä¸­æˆåŠŸä¿®æ”¹æ•°æ®ã€‚</p></blockquote><p>Zookeeperçš„æ ¸å¿ƒæ˜¯<strong>åŸå­å¹¿æ’­</strong>ï¼Œè¿™ä¸ªæœºåˆ¶ä¿è¯äº†å„ä¸ªserverä¹‹é—´çš„åŒæ­¥ã€‚å®ç°è¿™ä¸ªæœºåˆ¶çš„åè®®å«åš<strong>Zabåè®®</strong>ã€‚</p><p>Zabåè®®æœ‰ä¸¤ç§æ¨¡å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯<strong>æ¢å¤æ¨¡å¼</strong>å’Œ<strong>å¹¿æ’­æ¨¡å¼</strong>ã€‚</p><blockquote><p>å½“æœåŠ¡å¯åŠ¨æˆ–è€…åœ¨é¢†å¯¼è€…å´©æºƒåï¼ŒZabå°±è¿›å…¥äº†<strong>æ¢å¤æ¨¡å¼</strong>ï¼Œå½“é¢†å¯¼è€…è¢«é€‰ä¸¾å‡ºæ¥ï¼Œä¸”å¤§å¤šæ•°serverçš„å®Œæˆäº†å’Œleaderçš„çŠ¶æ€åŒæ­¥ä»¥åï¼Œæ¢å¤æ¨¡å¼å°±ç»“æŸäº†ã€‚çŠ¶æ€åŒæ­¥ä¿è¯äº†leaderå’Œserverå…·æœ‰ç›¸åŒçš„ç³»ç»ŸçŠ¶æ€ã€‚ä¸€æ—¦leaderå·²ç»å’Œå¤šæ•°çš„followerè¿›è¡Œäº†çŠ¶æ€åŒæ­¥åï¼Œä»–å°±å¯ä»¥å¼€å§‹å¹¿æ’­æ¶ˆæ¯äº†ï¼Œå³è¿›å…¥<strong>å¹¿æ’­çŠ¶æ€</strong>ã€‚è¿™æ—¶å€™å½“ä¸€ä¸ªserveråŠ å…¥zookeeperæœåŠ¡ä¸­ï¼Œå®ƒä¼šåœ¨æ¢å¤æ¨¡å¼ä¸‹å¯åŠ¨ï¼Œå‘ç°leaderï¼Œå¹¶å’Œleaderè¿›è¡ŒçŠ¶æ€åŒæ­¥ã€‚å¾…åˆ°åŒæ­¥ç»“æŸï¼Œå®ƒä¹Ÿå‚ä¸æ¶ˆæ¯å¹¿æ’­ã€‚ZookeeperæœåŠ¡ä¸€ç›´ç»´æŒåœ¨BroadcastçŠ¶æ€ï¼Œç›´åˆ°leaderå´©æºƒäº†æˆ–è€…leaderå¤±å»äº†å¤§éƒ¨åˆ†çš„followersæ”¯æŒ.</p><p>å¹¿æ’­æ¨¡å¼éœ€è¦ä¿è¯proposalè¢«æŒ‰é¡ºåºå¤„ç†ï¼Œå› æ­¤zké‡‡ç”¨äº†<strong>é€’å¢çš„äº‹åŠ¡idå·(zxid)</strong>æ¥ä¿è¯ã€‚æ‰€æœ‰çš„æè®®(proposal)éƒ½åœ¨è¢«æå‡ºçš„æ—¶å€™åŠ ä¸Šäº†zxidã€‚å®ç°ä¸­zxidæ˜¯ä¸€ä¸ª64ä½çš„æ•°å­—ï¼Œå®ƒé«˜32ä½æ˜¯epochç”¨æ¥æ ‡è¯†leaderå…³ç³»æ˜¯å¦æ”¹å˜ï¼Œæ¯æ¬¡ä¸€ä¸ªleaderè¢«é€‰å‡ºæ¥ï¼Œå®ƒéƒ½ä¼šæœ‰ä¸€ä¸ªæ–°çš„epochã€‚ä½32ä½æ˜¯ä¸ªé€’å¢è®¡æ•°ã€‚</p><p>å½“leaderå´©æºƒæˆ–è€…leaderå¤±å»å¤§å¤šæ•°çš„followerï¼Œè¿™æ—¶å€™zkè¿›å…¥æ¢å¤æ¨¡å¼ï¼Œæ¢å¤æ¨¡å¼éœ€è¦é‡æ–°é€‰ä¸¾å‡ºä¸€ä¸ªæ–°çš„leaderï¼Œè®©æ‰€æœ‰çš„serveréƒ½æ¢å¤åˆ°ä¸€ä¸ªæ­£ç¡®çš„çŠ¶æ€ã€‚</p></blockquote><h2 id="2ã€ZnodeèŠ‚ç‚¹"><a href="#2ã€ZnodeèŠ‚ç‚¹" class="headerlink" title="2ã€ZnodeèŠ‚ç‚¹"></a>2ã€ZnodeèŠ‚ç‚¹</h2><p>ï¼ˆ1ï¼‰Znodeæœ‰ä¸¤ç§ç±»å‹ï¼Œ<strong>çŸ­æš‚çš„ï¼ˆephemeralï¼‰å’ŒæŒä¹…çš„ï¼ˆpersistentï¼‰</strong></p><p> Znodeçš„ç±»å‹åœ¨åˆ›å»ºæ—¶ç¡®å®šå¹¶ä¸”ä¹‹åä¸èƒ½å†ä¿®æ”¹ã€‚</p><ul><li><p>çŸ­æš‚znodeçš„å®¢æˆ·ç«¯ä¼šè¯ç»“æŸæ—¶ï¼Œzookeeperä¼šå°†è¯¥çŸ­æš‚znodeåˆ é™¤ï¼Œ<strong>çŸ­æš‚znodeä¸å¯ä»¥æœ‰å­èŠ‚ç‚¹</strong></p></li><li><p>æŒä¹…znodeä¸ä¾èµ–äºå®¢æˆ·ç«¯ä¼šè¯ï¼Œåªæœ‰å½“å®¢æˆ·ç«¯æ˜ç¡®è¦åˆ é™¤è¯¥æŒä¹…znodeæ—¶æ‰ä¼šè¢«åˆ é™¤</p></li></ul><p>ï¼ˆ2ï¼‰Znodeæœ‰å››ç§å½¢å¼çš„ç›®å½•èŠ‚ç‚¹</p><ul><li><p>PERSISTENTã€æŒä¹…çš„</p></li><li><p>EPHEMERALã€çŸ­æš‚çš„</p></li><li><p>PERSISTENT_SEQUENTIALã€æŒä¹…ä¸”æœ‰åºçš„</p></li><li><p>EPHEMERAL_SEQUENTIAL   çŸ­æš‚ä¸”æœ‰åºçš„</p></li></ul><h2 id="3ã€shellæ“ä½œ"><a href="#3ã€shellæ“ä½œ" class="headerlink" title="3ã€shellæ“ä½œ"></a>3ã€shellæ“ä½œ</h2><p>å¯åŠ¨æœåŠ¡ç«¯ï¼š./zkServer.sh start</p><p>åœæ­¢æœåŠ¡ï¼š./zkServer.sh stop</p><p>å¯åŠ¨å®¢æˆ·ç«¯ï¼š./zkCli.sh -server 127.0.0.1 : 2081</p><p>â€‹                                                         (localhostã€node01)</p><p>â€‹                     ï¼ˆä¹Ÿå¯è¿æ¥å…¶ä»–èŠ‚ç‚¹ï¼‰</p><p>â€‹                      (porté»˜è®¤2081,å¯çœï¼›ipä¹Ÿå¯çœ)</p><p>é€€å‡ºå®¢æˆ·ç«¯ï¼šquit</p><p>æ“ä½œæŒ‡å—ï¼šhelp</p><p>æŸ¥çœ‹æ ¹ç›®å½•ï¼šll /</p><p>â€‹                   ï¼ˆll  +è·¯å¾„ï¼‰ </p><p>è·å–å…·ä½“æœåŠ¡å†…å®¹ï¼šget /</p><p>â€‹                  (get +è·¯å¾„+æœåŠ¡)å¯æŸ¥çœ‹æ³¨å†ŒzookeeperæœåŠ¡çš„èŠ‚ç‚¹ä¿¡æ¯</p><p>ï¼ˆå¦‚æœä½œä¸ºleaderçš„namenodeæŒ‚äº†ï¼Œæœ€æ–°æ–‡ä»¶ä¼šç›¸åº”çš„æ›´æ¢æ•°æ®ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰nnï¼Œé‚£ä¹ˆå°±æ²¡æœ‰ç›¸åº”çš„æœ€æ–°æ–‡ä»¶ï¼Œåªä¼šæœ‰è®°å½•ä¸Šä¸€ä¸ªé˜¶æ®µæ•°æ®çš„æ–‡ä»¶ï¼‰</p><p>åˆ›å»ºæœåŠ¡ï¼šcreate /sun aabbcc</p><p>â€‹               (create +è·¯å¾„ + æ•°æ®å†…å®¹) </p><p>åœ¨å…¶ä»–èŠ‚ç‚¹ä¹Ÿå¯å¯åŠ¨å®¢æˆ·ç«¯ï¼Œåˆ›å»ºæœåŠ¡</p><p>åˆ é™¤æœåŠ¡ï¼šrmr /sun</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzdcfzkia9j30fd091wgj.jpg" alt=""></p><h2 id="4ã€APIæ“ä½œ"><a href="#4ã€APIæ“ä½œ" class="headerlink" title="4ã€APIæ“ä½œ"></a>4ã€APIæ“ä½œ</h2><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzdcgvx18uj30fe0akwie.jpg" alt=""></p><p><code>è§ä»£ç testzookeeper</code></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><blockquote><p>Zookeeper ä½œä¸º Hadoop é¡¹ç›®ä¸­çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œæ˜¯Hadoop é›†ç¾¤ç®¡ç†çš„ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ¨¡å—ï¼Œå®ƒ<strong>ä¸»è¦ç”¨æ¥æ§åˆ¶é›†ç¾¤ä¸­çš„æ•°æ®</strong>ï¼Œå¦‚å®ƒç®¡ç† Hadoop é›†ç¾¤ä¸­çš„NameNodeï¼Œè¿˜æœ‰ Hbase ä¸­ Masterã€ Server ä¹‹é—´çŠ¶æ€åŒæ­¥ç­‰ã€‚</p><p>â€‹    Zoopkeeper æä¾›äº†ä¸€å¥—å¾ˆå¥½çš„åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†çš„æœºåˆ¶ï¼Œå°±æ˜¯å®ƒè¿™ç§åŸºäºå±‚æ¬¡å‹çš„ç›®å½•æ ‘çš„æ•°æ®ç»“æ„ï¼Œå¹¶å¯¹æ ‘ä¸­çš„èŠ‚ç‚¹è¿›è¡Œæœ‰æ•ˆç®¡ç†ï¼Œä»è€Œå¯ä»¥è®¾è®¡å‡ºå¤šç§å¤šæ ·çš„åˆ†å¸ƒå¼çš„æ•°æ®ç®¡ç†æ¨¡å‹ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YARNçš„å…¥é—¨å­¦ä¹ </title>
      <link href="/2019/01/03/Yarn%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/03/Yarn%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h1><h2 id="yarnï¼ˆèµ„æºç®¡ç†å™¨ï¼‰"><a href="#yarnï¼ˆèµ„æºç®¡ç†å™¨ï¼‰" class="headerlink" title="yarnï¼ˆèµ„æºç®¡ç†å™¨ï¼‰"></a>yarnï¼ˆèµ„æºç®¡ç†å™¨ï¼‰</h2><h3 id="ï¼ˆ1ï¼‰å­˜åœ¨èƒŒæ™¯ï¼š"><a href="#ï¼ˆ1ï¼‰å­˜åœ¨èƒŒæ™¯ï¼š" class="headerlink" title="ï¼ˆ1ï¼‰å­˜åœ¨èƒŒæ™¯ï¼š"></a>ï¼ˆ1ï¼‰å­˜åœ¨èƒŒæ™¯ï¼š</h3><p>MR1.0å­˜åœ¨ç¼ºé™·ï¼š</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzczt4wiysj30x90ftq5v.jpg" alt=""></p><ul><li>å•ç‚¹æ•…éšœï¼š</li></ul><p>ä»…æœ‰ä¸€ä¸ªJobTrackerè´Ÿè´£æ•´ä¸ªä½œä¸šçš„è°ƒåº¦ã€ç®¡ç†ã€ç›‘æ§ã€èµ„æºè°ƒåº¦</p><p>ï¼ˆä¸€ä¸ªä½œä¸šæ‹¿åˆ°åä¼šåˆ†è§£å¤šä¸ªä»»åŠ¡å»æ‰§è¡Œmapduceï¼ŒJobTrackeræŠŠä»»åŠ¡åˆ†é…ç»™TaskTrackeræ¥å…·ä½“è´Ÿè´£æ‰§è¡Œç›¸å…³mapæˆ–reduceä»»åŠ¡ï¼‰</p><ul><li>JobTrackerâ€˜å¤§åŒ…å¤§æ½â€™ï¼Œç®¡ç†äº‹é¡¹è¿‡å¤š</li></ul><p>ï¼ˆä¸Šé™4000ä¸ªèŠ‚ç‚¹ï¼‰</p><ul><li><p>å®¹æ˜“å‡ºç°å†…å­˜æº¢å‡º</p></li><li><p>èµ„æºåˆ’åˆ†ä¸åˆç†</p><p>ï¼ˆå¼ºè¡Œåˆ’åˆ†slotï¼Œmapèµ„æºå’Œreduceèµ„æºä¸èƒ½äº’ç”¨ï¼Œå¯¼è‡´å¿™çš„å¿™æ­»ï¼Œé—²çš„é—²æ­»ï¼‰</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ—¢æ˜¯ä¸€ä¸ªè®¡ç®—æ¡†æ¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªèµ„æºç®¡ç†æ¡†æ¶</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzczujcfrmj30n50ee75d.jpg" alt=""></p><h3 id="ï¼ˆ2ï¼‰yarnäº§ç”Ÿ"><a href="#ï¼ˆ2ï¼‰yarnäº§ç”Ÿ" class="headerlink" title="ï¼ˆ2ï¼‰yarnäº§ç”Ÿ"></a>ï¼ˆ2ï¼‰yarnäº§ç”Ÿ</h3><ul><li>å¯¹JobTrackerè¿›è¡ŒåŠŸèƒ½åˆ†è§£ï¼Œå°†èµ„æºç®¡ç†åŠŸèƒ½åˆ†ç»™ResourceManagerï¼Œå°†ä»»åŠ¡è°ƒåº¦å’Œä»»åŠ¡ç›‘æ§åˆ†ç»™ApplicationMasterï¼Œå°†TaskTrackerçš„ä»»åŠ¡äº¤ç»™NodeManager</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">çº¯ç²¹çš„èµ„æºç®¡ç†æ¡†æ¶</span><br><span class="line">è¢«å‰¥ç¦»èµ„æºç®¡ç†è°ƒåº¦åŠŸèƒ½çš„MapReduceå°±å˜æˆäº†MR2.0ï¼Œä»–å°±æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨YARNä¸Šçš„ä¸€ä¸ªçº¯ç²¹çš„è®¡ç®—æ¡†æ¶ï¼Œç”±YARNä¸ºå…¶æä¾›èµ„æºç®¡ç†è°ƒåº¦æœåŠ¡</span><br></pre></td></tr></table></figure><p><code>ä»€ä¹ˆå«çº¯ç²¹çš„è®¡ç®—æ¡†æ¶ï¼Ÿï¼Ÿ</code></p><p>å®ƒæä¾›ä¸€äº›è®¡ç®—åŸºç±»ï¼Œä½¿ç”¨æ—¶ï¼Œç¼–å†™mapç±»å’Œreduceç±»çš„å­ç±»ï¼Œå»ç»§æ‰¿å®ƒã€‚ç„¶åè®¡ç®—æ¡†æ¶å»åšåå°è‡ªåŠ¨åˆ†ç‰‡ï¼Œshuffleè¿‡ç¨‹ã€‚</p><p><code>èµ„æºç®¡ç†æ¡†æ¶ï¼Ÿï¼Ÿ</code></p><p>å®ƒä¸“é—¨ç®¡ç†CPUå†…å­˜èµ„æºçš„åˆ†é…</p><h1 id="äºŒã€YARNè®¾è®¡æ€è·¯"><a href="#äºŒã€YARNè®¾è®¡æ€è·¯" class="headerlink" title="äºŒã€YARNè®¾è®¡æ€è·¯"></a>äºŒã€YARNè®¾è®¡æ€è·¯</h1><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzczzrit8qj30wm0e6wie.jpg" alt=""></p><h1 id="ä¸‰ã€YARNä½“ç³»ç»“æ„"><a href="#ä¸‰ã€YARNä½“ç³»ç»“æ„" class="headerlink" title="ä¸‰ã€YARNä½“ç³»ç»“æ„"></a>ä¸‰ã€YARNä½“ç³»ç»“æ„</h1><p>ä¸‰å¤§æ ¸å¿ƒï¼š</p><h2 id="1ã€RecourceManagerï¼ˆRMï¼‰"><a href="#1ã€RecourceManagerï¼ˆRMï¼‰" class="headerlink" title="1ã€RecourceManagerï¼ˆRMï¼‰"></a>1ã€RecourceManagerï¼ˆRMï¼‰</h2><blockquote><ul><li><p>ResourceManagerï¼ˆRMï¼‰æ˜¯ä¸€ä¸ªå…¨å±€çš„èµ„æºç®¡ç†å™¨ï¼Œè´Ÿè´£æ•´ä¸ªç³»ç»Ÿçš„èµ„æºç®¡ç†å’Œåˆ†é…ï¼Œä¸»<br>è¦åŒ…æ‹¬ä¸¤ä¸ªç»„ä»¶ï¼Œå³è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰å’Œåº”ç”¨ç¨‹åºç®¡ç†å™¨ï¼ˆApplications Managerï¼‰</p></li><li><p>è°ƒåº¦å™¨æ¥æ”¶æ¥è‡ªApplicationMasterçš„åº”ç”¨ç¨‹åºèµ„æºè¯·æ±‚ï¼ŒæŠŠé›†ç¾¤ä¸­çš„èµ„æºä»¥â€œå®¹å™¨â€çš„å½¢å¼<br>åˆ†é…ç»™æå‡ºç”³è¯·çš„åº”ç”¨ç¨‹åºï¼Œå®¹å™¨çš„é€‰æ‹©é€šå¸¸ä¼šè€ƒè™‘åº”ç”¨ç¨‹åºæ‰€è¦å¤„ç†çš„æ•°æ®çš„ä½ç½®ï¼Œè¿›è¡Œ<br>å°±è¿‘é€‰æ‹©ï¼Œä»è€Œå®ç°â€œè®¡ç®—å‘æ•°æ®é æ‹¢â€</p></li><li><p>å®¹å™¨ï¼ˆContainerï¼‰ä½œä¸ºåŠ¨æ€èµ„æºåˆ†é…å•ä½ï¼Œæ¯ä¸ªå®¹å™¨ä¸­éƒ½å°è£…äº†ä¸€å®šæ•°é‡çš„CPUã€å†…å­˜ã€<br>ç£ç›˜ç­‰èµ„æºï¼Œä»è€Œé™å®šæ¯ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨çš„èµ„æºé‡</p></li><li><p>è°ƒåº¦å™¨è¢«è®¾è®¡æˆæ˜¯ä¸€ä¸ªå¯æ’æ‹”çš„ç»„ä»¶ï¼ŒYARNä¸ä»…è‡ªèº«æä¾›äº†è®¸å¤šç§ç›´æ¥å¯ç”¨çš„è°ƒåº¦å™¨ï¼Œä¹Ÿ<br>å…è®¸ç”¨æˆ·æ ¹æ®è‡ªå·±çš„éœ€æ±‚é‡æ–°è®¾è®¡è°ƒåº¦å™¨</p></li><li><p>åº”ç”¨ç¨‹åºç®¡ç†å™¨ï¼ˆApplications Managerï¼‰è´Ÿè´£ç³»ç»Ÿä¸­æ‰€æœ‰åº”ç”¨ç¨‹åºçš„ç®¡ç†å·¥ä½œï¼Œä¸»è¦åŒ…æ‹¬<br>åº”ç”¨ç¨‹åºæäº¤ã€ä¸è°ƒåº¦å™¨åå•†èµ„æºä»¥å¯åŠ¨ApplicationMasterã€ç›‘æ§ApplicationMasterè¿è¡ŒçŠ¶<br>æ€å¹¶åœ¨å¤±è´¥æ—¶é‡æ–°å¯åŠ¨ç­‰</p></li></ul></blockquote><h2 id="2ã€ApplicationMaster"><a href="#2ã€ApplicationMaster" class="headerlink" title="2ã€ApplicationMaster"></a>2ã€ApplicationMaster</h2><blockquote><p>ResourceManageræ¥æ”¶ç”¨æˆ·æäº¤çš„ä½œä¸šï¼ŒæŒ‰ç…§ä½œä¸šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä»¥åŠä»NodeManageræ”¶é›†<br>æ¥çš„å®¹å™¨çŠ¶æ€ä¿¡æ¯ï¼Œå¯åŠ¨è°ƒåº¦è¿‡ç¨‹ï¼Œä¸ºç”¨æˆ·ä½œä¸šå¯åŠ¨ä¸€ä¸ªApplicationMaster<br>ApplicationMasterçš„ä¸»è¦åŠŸèƒ½æ˜¯ï¼š<br>ï¼ˆ1ï¼‰å½“ç”¨æˆ·ä½œä¸šæäº¤æ—¶ï¼ŒApplicationMasterä¸ResourceManageråå•†è·å–èµ„æºï¼Œ<br>ResourceManagerä¼šä»¥å®¹å™¨çš„å½¢å¼ä¸ºApplicationMasteråˆ†é…èµ„æºï¼›</p><p>ï¼ˆ2ï¼‰æŠŠè·å¾—çš„èµ„æºè¿›ä¸€æ­¥åˆ†é…ç»™å†…éƒ¨çš„å„ä¸ªä»»åŠ¡ï¼ˆMapä»»åŠ¡æˆ–Reduceä»»åŠ¡ï¼‰ï¼Œå®ç°èµ„æº<br>çš„â€œäºŒæ¬¡åˆ†é…â€ï¼›</p><p>ï¼ˆ3ï¼‰ä¸NodeManagerä¿æŒäº¤äº’é€šä¿¡è¿›è¡Œåº”ç”¨ç¨‹åºçš„å¯åŠ¨ã€è¿è¡Œã€ç›‘æ§å’Œåœæ­¢ï¼Œç›‘æ§ç”³è¯·<br>åˆ°çš„èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼Œå¯¹æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œè¿›åº¦å’ŒçŠ¶æ€è¿›è¡Œç›‘æ§ï¼Œå¹¶åœ¨ä»»åŠ¡å‘ç”Ÿå¤±è´¥æ—¶æ‰§è¡Œ<br>å¤±è´¥æ¢å¤ï¼ˆå³é‡æ–°ç”³è¯·èµ„æºé‡å¯ä»»åŠ¡ï¼‰ï¼›</p><p>ï¼ˆ4ï¼‰å®šæ—¶å‘ResourceManagerå‘é€â€œå¿ƒè·³â€æ¶ˆæ¯ï¼ŒæŠ¥å‘Šèµ„æºçš„ä½¿ç”¨æƒ…å†µå’Œåº”ç”¨çš„è¿›åº¦ä¿¡<br>æ¯ï¼›</p><p>ï¼ˆ5ï¼‰å½“ä½œä¸šå®Œæˆæ—¶ï¼ŒApplicationMasterå‘ResourceManageræ³¨é”€å®¹å™¨ï¼Œæ‰§è¡Œå‘¨æœŸå®Œæˆã€‚</p></blockquote><h2 id="3ã€NodeManager"><a href="#3ã€NodeManager" class="headerlink" title="3ã€NodeManager"></a>3ã€NodeManager</h2><blockquote><p>NodeManageræ˜¯é©»ç•™åœ¨ä¸€ä¸ªYARNé›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ä»£ç†ï¼Œæœ‰æ‰€éœ€æ•°æ®çš„èŠ‚ç‚¹ï¼Œä¸»è¦è´Ÿè´£ï¼š</p><ul><li><p>å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</p></li><li><p>ç›‘æ§æ¯ä¸ªå®¹å™¨çš„èµ„æºï¼ˆCPUã€å†…å­˜ç­‰ï¼‰ä½¿ç”¨æƒ…å†µ</p></li><li><p>è·Ÿè¸ªèŠ‚ç‚¹å¥åº·çŠ¶å†µ</p></li><li><p>ä»¥â€œå¿ƒè·³â€çš„æ–¹å¼ä¸ResourceManagerä¿æŒé€šä¿¡</p></li><li><p>å‘ResourceManageræ±‡æŠ¥ä½œä¸šçš„èµ„æºä½¿ç”¨æƒ…å†µå’Œæ¯ä¸ªå®¹å™¨çš„è¿è¡ŒçŠ¶æ€</p></li><li><p>æ¥æ”¶æ¥è‡ªApplicationMasterçš„å¯åŠ¨/åœæ­¢å®¹å™¨çš„å„ç§è¯·æ±‚</p></li></ul><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒNodeManagerä¸»è¦è´Ÿè´£ç®¡ç†æŠ½è±¡çš„å®¹å™¨ï¼Œåªå¤„ç†ä¸å®¹å™¨ç›¸å…³çš„äº‹<br>æƒ…ï¼Œè€Œä¸å…·ä½“è´Ÿè´£æ¯ä¸ªä»»åŠ¡ï¼ˆMapä»»åŠ¡æˆ–Reduceä»»åŠ¡ï¼‰è‡ªèº«çŠ¶æ€çš„ç®¡ç†ï¼Œå› ä¸ºè¿™<br>äº›ç®¡ç†å·¥ä½œæ˜¯ç”±ApplicationMasterå®Œæˆçš„ï¼ŒApplicationMasterä¼šé€šè¿‡ä¸æ–­ä¸<br>NodeManageré€šä¿¡æ¥æŒæ¡å„ä¸ªä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzd1ueqsbmj30xm0fjwgg.jpg" alt=""></p><h1 id="å››ã€YARN-å·¥ä½œæµç¨‹"><a href="#å››ã€YARN-å·¥ä½œæµç¨‹" class="headerlink" title="å››ã€YARN å·¥ä½œæµç¨‹"></a>å››ã€YARN å·¥ä½œæµç¨‹</h1><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzd1x7ksg6j30yl0fqjxh.jpg" alt=""></p><h1 id="äº”ã€YARNæ¡†æ¶ä¸MapReduce1-0æ¡†æ¶çš„å¯¹æ¯”åˆ†æ"><a href="#äº”ã€YARNæ¡†æ¶ä¸MapReduce1-0æ¡†æ¶çš„å¯¹æ¯”åˆ†æ" class="headerlink" title="äº”ã€YARNæ¡†æ¶ä¸MapReduce1.0æ¡†æ¶çš„å¯¹æ¯”åˆ†æ"></a>äº”ã€YARNæ¡†æ¶ä¸MapReduce1.0æ¡†æ¶çš„å¯¹æ¯”åˆ†æ</h1><blockquote><ul><li>ä»MapReduce1.0æ¡†æ¶å‘å±•åˆ°YARNæ¡†æ¶ï¼Œå®¢æˆ·ç«¯å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå…¶å¤§éƒ¨åˆ†è°ƒç”¨APIåŠ<br>æ¥å£éƒ½ä¿æŒå…¼å®¹ï¼Œå› æ­¤ï¼ŒåŸæ¥é’ˆå¯¹Hadoop1.0å¼€å‘çš„ä»£ç ä¸ç”¨åšå¤§çš„æ”¹åŠ¨ï¼Œå°±å¯ä»¥ç›´æ¥æ”¾<br>åˆ°Hadoop2.0å¹³å°ä¸Šè¿è¡Œ</li></ul></blockquote><blockquote><ul><li><p>æ€»ä½“è€Œè¨€ï¼ŒYARNç›¸å¯¹äºMapReduce1.0æ¥è¯´å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><p>å¤§å¤§å‡å°‘äº†æ‰¿æ‹…ä¸­å¿ƒæœåŠ¡åŠŸèƒ½çš„ResourceManagerçš„èµ„æºæ¶ˆè€—</p><ul><li>ApplicationMasteræ¥å®Œæˆéœ€è¦å¤§é‡èµ„æºæ¶ˆè€—çš„ä»»åŠ¡è°ƒåº¦å’Œç›‘æ§</li><li>å¤šä¸ªä½œä¸šå¯¹åº”å¤šä¸ªApplicationMasterï¼Œå®ç°äº†ç›‘æ§åˆ†å¸ƒåŒ–</li></ul></li></ul></blockquote><blockquote><ul><li>MapReduce1.0æ—¢æ˜¯ä¸€ä¸ªè®¡ç®—æ¡†æ¶ï¼Œåˆæ˜¯ä¸€ä¸ªèµ„æºç®¡ç†è°ƒåº¦æ¡†æ¶ï¼Œä½†æ˜¯ï¼Œåªèƒ½æ”¯æŒ<br>MapReduceç¼–ç¨‹æ¨¡å‹ã€‚è€ŒYARNåˆ™æ˜¯ä¸€ä¸ªçº¯ç²¹çš„èµ„æºè°ƒåº¦ç®¡ç†æ¡†æ¶ï¼Œåœ¨å®ƒä¸Šé¢å¯ä»¥è¿è¡ŒåŒ…<br>æ‹¬MapReduceåœ¨å†…çš„ä¸åŒç±»å‹çš„è®¡ç®—æ¡†æ¶ï¼Œåªè¦ç¼–ç¨‹å®ç°ç›¸åº”çš„ApplicationMaster</li></ul></blockquote><blockquote><ul><li>YARNä¸­çš„èµ„æºç®¡ç†æ¯”MapReduce1.0æ›´åŠ é«˜æ•ˆ<ul><li>ä»¥å®¹å™¨ä¸ºå•ä½ï¼Œè€Œä¸æ˜¯ä»¥slotä¸ºå•ä½</li></ul></li></ul></blockquote><h1 id="å…­ã€YARN-çš„å‘å±•ç›®æ ‡"><a href="#å…­ã€YARN-çš„å‘å±•ç›®æ ‡" class="headerlink" title="å…­ã€YARN çš„å‘å±•ç›®æ ‡"></a>å…­ã€YARN çš„å‘å±•ç›®æ ‡</h1><p><strong>YARN çš„ç›®æ ‡å°±æ˜¯å®ç°â€œä¸€ä¸ªé›†ç¾¤å¤šä¸ªæ¡†æ¶â€ï¼Ÿ ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</strong></p><ul><li><p>ä¸€ä¸ªä¼ä¸šå½“ä¸­åŒæ—¶å­˜åœ¨å„ç§ä¸åŒçš„ä¸šåŠ¡åº”ç”¨åœºæ™¯ï¼Œéœ€è¦é‡‡ç”¨ä¸åŒçš„è®¡ç®—æ¡†æ¶</p><ul><li><p>MapReduceå®ç°ç¦»çº¿æ‰¹å¤„ç†</p></li><li><p>ä½¿ç”¨Impalaå®ç°å®æ—¶äº¤äº’å¼æŸ¥è¯¢åˆ†æ</p></li><li><p>ä½¿ç”¨Stormå®ç°æµå¼æ•°æ®å®æ—¶åˆ†æ</p></li><li><p>ä½¿ç”¨Sparkå®ç°è¿­ä»£è®¡ç®—</p></li></ul></li></ul><ul><li><p>è¿™äº›äº§å“é€šå¸¸æ¥è‡ªä¸åŒçš„å¼€å‘å›¢é˜Ÿï¼Œå…·æœ‰å„è‡ªçš„èµ„æºè°ƒåº¦ç®¡ç†æœºåˆ¶</p></li><li><p>ä¸ºäº†é¿å…ä¸åŒç±»å‹åº”ç”¨ä¹‹é—´äº’ç›¸å¹²æ‰°ï¼Œä¼ä¸šå°±éœ€è¦æŠŠå†…éƒ¨çš„æœåŠ¡å™¨æ‹†åˆ†æˆå¤šä¸ªé›†ç¾¤ï¼Œåˆ†<br>åˆ«å®‰è£…è¿è¡Œä¸åŒçš„è®¡ç®—æ¡†æ¶ï¼Œå³â€œä¸€ä¸ªæ¡†æ¶ä¸€ä¸ªé›†ç¾¤â€</p></li></ul><ul><li><p>å¯¼è‡´é—®é¢˜</p><ul><li><p>é›†ç¾¤èµ„æºåˆ©ç”¨ç‡ä½</p></li><li><p>æ•°æ®æ— æ³•å…±äº«</p></li><li><p>ç»´æŠ¤ä»£ä»·é«˜</p></li></ul></li></ul><ul><li><p>YARNçš„ç›®æ ‡å°±æ˜¯å®ç°â€œä¸€ä¸ªé›†ç¾¤å¤šä¸ªæ¡†æ¶â€ï¼Œå³åœ¨ä¸€ä¸ªé›†ç¾¤ä¸Šéƒ¨ç½²ä¸€ä¸ªç»Ÿä¸€çš„èµ„æº<br>è°ƒåº¦ç®¡ç†æ¡†æ¶YARNï¼Œåœ¨YARNä¹‹ä¸Šå¯ä»¥éƒ¨ç½²å…¶ä»–å„ç§è®¡ç®—æ¡†æ¶</p></li><li><p>ç”±YARNä¸ºè¿™äº›è®¡ç®—æ¡†æ¶æä¾›ç»Ÿä¸€çš„èµ„æºè°ƒåº¦ç®¡ç†æœåŠ¡ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ ¹æ®å„ç§è®¡ç®—æ¡†æ¶<br>çš„è´Ÿè½½éœ€æ±‚ï¼Œè°ƒæ•´å„è‡ªå ç”¨çš„èµ„æºï¼Œå®ç°é›†ç¾¤èµ„æºå…±äº«å’Œèµ„æºå¼¹æ€§æ”¶ç¼©</p></li><li><p>å¯ä»¥å®ç°ä¸€ä¸ªé›†ç¾¤ä¸Šçš„ä¸åŒåº”ç”¨è´Ÿè½½æ··æ­ï¼Œæœ‰æ•ˆæé«˜äº†é›†ç¾¤çš„åˆ©ç”¨ç‡</p></li><li><p>ä¸åŒè®¡ç®—æ¡†æ¶å¯ä»¥å…±äº«åº•å±‚å­˜å‚¨ï¼Œé¿å…äº†æ•°æ®é›†è·¨é›†ç¾¤ç§»åŠ¨</p></li></ul><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fzd5qv2p73j30r808tdgv.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yarn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDFSå­¦ä¹ </title>
      <link href="/2019/01/03/HDFS%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/03/HDFS%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="Hadoopå­¦ä¹ "><a href="#Hadoopå­¦ä¹ " class="headerlink" title="Hadoopå­¦ä¹ "></a>Hadoopå­¦ä¹ </h1><h2 id="ä¸€ã€åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»ŸHDFS"><a href="#ä¸€ã€åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»ŸHDFS" class="headerlink" title="ä¸€ã€åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»ŸHDFS"></a>ä¸€ã€åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»ŸHDFS</h2><h3 id="1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ</h3><blockquote><p>å®šä¹‰ï¼šå°†æµ·é‡çš„æ•°æ®ï¼Œå¤æ‚çš„ä¸šåŠ¡åˆ†å‘åˆ°ä¸åŒçš„è®¡ç®—æœºèŠ‚ç‚¹å’ŒæœåŠ¡å™¨ä¸Šåˆ†å¼€å¤„ç†å’Œè®¡ç®—ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¤šå‰¯æœ¬ï¼Œæé«˜æœåŠ¡çš„å®¹é”™ç‡ã€å®‰å…¨æ€§ã€é«˜å¯é æ€§</li><li>é€‚åˆæ‰¹å¤„ç†ï¼Œæé«˜æœåŠ¡çš„æ•ˆç‡å’Œé€Ÿåº¦ï¼Œ</li><li>å‡è½»å•å°æœåŠ¡çš„å‹åŠ›</li><li>å…·æœ‰å¾ˆå¥½çš„å¯æ‰©å±•æ€§</li><li>è®¡ç®—å‘æ•°æ®é æ‹¢ï¼Œå®‰å…¨ï¼Œé«˜æ•ˆ</li></ul></blockquote><p><code>å¤§æ•°æ®ä¸‰é©¾é©¬è½¦ï¼šGFSã€MapReduceã€Bigtable</code></p><h3 id="2ã€ä»€ä¹ˆæ˜¯HDFSï¼Ÿ"><a href="#2ã€ä»€ä¹ˆæ˜¯HDFSï¼Ÿ" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯HDFSï¼Ÿ"></a>2ã€ä»€ä¹ˆæ˜¯HDFSï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰HDFSä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ"><a href="#ï¼ˆ1ï¼‰HDFSä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ" class="headerlink" title="ï¼ˆ1ï¼‰HDFSä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ"></a>ï¼ˆ1ï¼‰HDFSä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ</h4><blockquote><p>ä¸»è¦è§£å†³å¤§é‡ã€pbçº§ä»¥ä¸Šã€‘çš„å¤§æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨é—®é¢˜</p></blockquote><h4 id="ï¼ˆ2ï¼‰HDFSçš„ç‰¹ç‚¹"><a href="#ï¼ˆ2ï¼‰HDFSçš„ç‰¹ç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰HDFSçš„ç‰¹ç‚¹"></a>ï¼ˆ2ï¼‰HDFSçš„ç‰¹ç‚¹</h4><blockquote><p>$$ åˆ†å¸ƒå¼ç‰¹æ€§ï¼š</p><ul><li>é€‚åˆå¤§æ•°æ®å¤„ç†ï¼šGBã€TBã€PBä»¥ä¸Šçš„æ•°æ®</li><li>ç™¾ä¸‡è§„æ¨¡ä»¥ä¸Šçš„æ–‡ä»¶æ•°é‡:10K+ èŠ‚ç‚¹</li><li>é€‚åˆæ‰¹å¤„ç†ï¼šç§»åŠ¨è®¡ç®—è€Œéæ•°æ®(MR),æ•°æ®ä½ç½®æš´éœ²ç»™è®¡ç®—æ¡†æ¶</li></ul><p>$$ è‡ªèº«ç‰¹æ€§ï¼š</p><ul><li>å¯æ„å»ºåœ¨å»‰ä»·æœºå™¨ä¸Š</li><li>é«˜å¯é æ€§ï¼šé€šè¿‡å¤šå‰¯æœ¬ææé«˜</li><li>é«˜å®¹é”™æ€§ï¼šæ•°æ®è‡ªåŠ¨ä¿å­˜å¤šä¸ªå‰¯æœ¬ï¼›å‰¯æœ¬ä¸¢å¤±åï¼Œè‡ªåŠ¨æ¢å¤,æä¾›äº†æ¢å¤æœºåˆ¶</li></ul><p>$$ ç¼ºç‚¹ï¼š</p><p>â€”â€“ä½å»¶è¿Ÿé«˜æ•°æ®ååè®¿é—®é—®é¢˜ï¼ˆä¸é€‚åˆä½å»¶è¿Ÿæ•°æ®è®¿é—®ï¼ŒHbaseé€‚åˆï¼‰</p><ul><li>ä¸æ”¯æŒæ¯«ç§’çº§</li><li>ååé‡å¤§ä½†æœ‰é™åˆ¶äºå…¶å»¶è¿Ÿï¼ˆç“¶é¢ˆï¼šä½å»¶è¿Ÿæ— æ³•çªç ´ï¼‰</li></ul><p>â€”â€“å°æ–‡ä»¶å­˜å–å ç”¨NameNodeå¤§é‡å†…å­˜(å¯»é“æ—¶é—´è¶…è¿‡è¯»å–æ—¶é—´,çº¦å 99%)</p><p>â€”â€”-ä¸æ”¯æŒå¤šç”¨æˆ·å†™å…¥åŠä»»æ„ä¿®æ”¹æ–‡ä»¶</p><ul><li>ä¸æ”¯æŒæ–‡ä»¶ä¿®æ”¹ï¼šä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªå†™è€…</li><li>æ–‡ä»¶ä»…æ”¯æŒappendä¸æ”¯æŒä¿®æ”¹</li><li>ï¼ˆå…¶å®æœ¬èº«æ˜¯æ”¯æŒçš„ï¼Œä¸»è¦ä¸ºäº†ç”¨ç©ºé—´æ¢æ—¶é—´ï¼ŒèŠ‚çº¦æˆæœ¬ï¼‰</li></ul><p>$$ å®ç°ç›®æ ‡ï¼š</p><ul><li>å…¼å®¹å»‰ä»·çš„ç¡¬ä»¶è®¾æ–½</li><li>å®ç°æµæ•°æ®è¯»å†™</li><li>æ”¯æŒå¤§æ•°æ®é›†</li><li>æ”¯æŒç®€å•çš„æ–‡ä»¶æ¨¡å‹</li><li>å¼ºå¤§çš„è·¨å¹³å°å…¼å®¹æ€§</li></ul></blockquote><h4 id="ï¼ˆ3ï¼‰HDFSæ¶æ„å›¾"><a href="#ï¼ˆ3ï¼‰HDFSæ¶æ„å›¾" class="headerlink" title="ï¼ˆ3ï¼‰HDFSæ¶æ„å›¾"></a>ï¼ˆ3ï¼‰HDFSæ¶æ„å›¾</h4><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz0lg96gkqj30hz0dsgmf.jpg" alt="HDFSæ¶æ„å›¾"><span class="img-alt">HDFSæ¶æ„å›¾</span></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz0lq2gmmtj30f009vwfj.jpg" alt="HDFSæ¶æ„å›¾"><span class="img-alt">HDFSæ¶æ„å›¾</span></p><blockquote><p><code>å…³ç³»å‹æ•°æ®åº“ï¼š</code>å®‰å…¨ï¼Œå­˜å‚¨åœ¨ç£ç›˜ä¸­ï¼›å¦‚MySqlã€Oracleã€SQlServer</p><p><code>éå…³ç³»å‹æ•°æ®åº“ï¼š</code>ä¸å®‰å…¨ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼›å¦‚Redisã€MemcacheDBã€mongDBã€Hbase</p></blockquote><h3 id="3ã€HDFSçš„åŠŸèƒ½æ¨¡å—åŠåŸç†è¯¦è§£"><a href="#3ã€HDFSçš„åŠŸèƒ½æ¨¡å—åŠåŸç†è¯¦è§£" class="headerlink" title="3ã€HDFSçš„åŠŸèƒ½æ¨¡å—åŠåŸç†è¯¦è§£"></a>3ã€HDFSçš„åŠŸèƒ½æ¨¡å—åŠåŸç†è¯¦è§£</h3><h4 id="HDFSæ•°æ®å­˜å‚¨æ¨¡å‹ï¼ˆblockï¼‰"><a href="#HDFSæ•°æ®å­˜å‚¨æ¨¡å‹ï¼ˆblockï¼‰" class="headerlink" title=" HDFSæ•°æ®å­˜å‚¨æ¨¡å‹ï¼ˆblockï¼‰"></a><1> HDFSæ•°æ®å­˜å‚¨æ¨¡å‹ï¼ˆblockï¼‰</1></h4><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz0n3j6xvnj30fe09vdh0.jpg" alt="block"><span class="img-alt">block</span></p><h5 id="ï¼ˆ1ï¼‰æ–‡ä»¶è¢«çº¿æ€§åˆ‡åˆ†å›ºå®šå¤§å°çš„æ•°æ®å—ï¼šblock"><a href="#ï¼ˆ1ï¼‰æ–‡ä»¶è¢«çº¿æ€§åˆ‡åˆ†å›ºå®šå¤§å°çš„æ•°æ®å—ï¼šblock" class="headerlink" title="ï¼ˆ1ï¼‰æ–‡ä»¶è¢«çº¿æ€§åˆ‡åˆ†å›ºå®šå¤§å°çš„æ•°æ®å—ï¼šblock"></a>ï¼ˆ1ï¼‰æ–‡ä»¶è¢«<code>çº¿æ€§åˆ‡åˆ†</code>å›ºå®šå¤§å°çš„æ•°æ®å—ï¼šblock</h5><ul><li><p>é€šè¿‡åç§»é‡offsetï¼ˆå•ä½ï¼šbyteï¼‰æ ‡è®°</p></li><li><p>é»˜è®¤æ•°æ®å—å¤§å°ä¸º64MB (hadoop1.xï¼Œhadoop2.xé»˜è®¤ä¸º128Mï¼‰)ï¼Œå¯è‡ªå®šä¹‰é…ç½®</p></li><li><p>è‹¥æ–‡ä»¶å¤§å°ä¸åˆ°64MB ï¼Œåˆ™å•ç‹¬å­˜æˆä¸€ä¸ªblock</p></li></ul><h5 id="ï¼ˆ2ï¼‰ä¸€ä¸ªæ–‡ä»¶å­˜å‚¨æ–¹å¼"><a href="#ï¼ˆ2ï¼‰ä¸€ä¸ªæ–‡ä»¶å­˜å‚¨æ–¹å¼" class="headerlink" title="ï¼ˆ2ï¼‰ä¸€ä¸ªæ–‡ä»¶å­˜å‚¨æ–¹å¼"></a>ï¼ˆ2ï¼‰ä¸€ä¸ªæ–‡ä»¶å­˜å‚¨æ–¹å¼</h5><ul><li><p>æŒ‰å¤§å°è¢«åˆ‡åˆ†æˆè‹¥å¹²ä¸ªblock ï¼Œå­˜å‚¨åˆ°<code>ä¸åŒèŠ‚ç‚¹ä¸Š</code></p></li><li><p>é»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªblockéƒ½æœ‰2ä¸ªå‰¯æœ¬ å…±3ä¸ªå‰¯æœ¬</p></li><li><p>å‰¯æœ¬æ•°ä¸å¤§äºèŠ‚ç‚¹æ•°</p></li></ul><h5 id="ï¼ˆ3ï¼‰Blockå¤§å°å’Œå‰¯æœ¬æ•°é€šè¿‡Clientç«¯ä¸Šä¼ æ–‡ä»¶æ—¶è®¾ç½®ï¼Œ"><a href="#ï¼ˆ3ï¼‰Blockå¤§å°å’Œå‰¯æœ¬æ•°é€šè¿‡Clientç«¯ä¸Šä¼ æ–‡ä»¶æ—¶è®¾ç½®ï¼Œ" class="headerlink" title="ï¼ˆ3ï¼‰Blockå¤§å°å’Œå‰¯æœ¬æ•°é€šè¿‡Clientç«¯ä¸Šä¼ æ–‡ä»¶æ—¶è®¾ç½®ï¼Œ"></a>ï¼ˆ3ï¼‰Blockå¤§å°å’Œå‰¯æœ¬æ•°é€šè¿‡Clientç«¯ä¸Šä¼ æ–‡ä»¶æ—¶è®¾ç½®ï¼Œ</h5><blockquote><p> æ–‡ä»¶ä¸Šä¼ æˆåŠŸåå‰¯æœ¬æ•°å¯ä»¥å˜æ›´ï¼ŒBlock Sizeå¤§å°ä¸å¯å˜æ›´</p><p>å—çš„å¤§å°è¿œè¿œå¤§äºæ™®é€šæ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æœ€å°åŒ–å¯»å€å¼€é”€</p></blockquote><h4 id="NameNodeï¼ˆç®€ç§°NNï¼‰"><a href="#NameNodeï¼ˆç®€ç§°NNï¼‰" class="headerlink" title="NameNodeï¼ˆç®€ç§°NNï¼‰"></a><2>NameNodeï¼ˆç®€ç§°NNï¼‰</2></h4><blockquote><ul><li>å­˜å‚¨<code>å…ƒæ•°æ®</code>ï¼›</li><li>å…ƒæ•°æ®ä¿å­˜åœ¨<code>å†…å­˜ä¸­</code>ï¼›</li><li>ä¿å­˜<code>æ–‡ä»¶</code>ã€<code>blockå—</code>ã€<code>datanode</code>ä¹‹é—´çš„æ˜ å°„å…³ç³»</li></ul></blockquote><h5 id="1-gt-NNä¸»è¦åŠŸèƒ½ï¼š"><a href="#1-gt-NNä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="1&gt; NNä¸»è¦åŠŸèƒ½ï¼š"></a>1&gt; NNä¸»è¦åŠŸèƒ½ï¼š</h5><blockquote><p>æ¥æ”¶å®¢æˆ·ç«¯çš„è¯»å†™æœåŠ¡ï¼›æ¥æ”¶DNæ±‡æŠ¥blockä½ç½®å…³ç³»</p></blockquote><h5 id="2-gt-NNä¿å­˜metadateå…ƒä¿¡æ¯"><a href="#2-gt-NNä¿å­˜metadateå…ƒä¿¡æ¯" class="headerlink" title="2&gt; NNä¿å­˜metadateå…ƒä¿¡æ¯"></a>2&gt; NNä¿å­˜metadateå…ƒä¿¡æ¯</h5><blockquote><p>åŸºäº<code>å†…å­˜</code>å­˜å‚¨ï¼Œ<code>ä¸ä¼š</code>å’Œç£ç›˜å‘ç”Ÿäº¤æ¢</p></blockquote><p>â€‹        <code>metadata</code>å…ƒæ•°æ®ä¿¡æ¯åŒ…æ‹¬ä»¥ä¸‹</p><blockquote><ul><li><p>æ–‡ä»¶çš„å½’å±ï¼ˆownershipï¼‰å’Œæƒé™ï¼ˆpermissionï¼‰</p></li><li><p>æ–‡ä»¶å¤§å°å’Œå†™å…¥æ—¶é—´</p></li><li><p>blockåˆ—è¡¨ã€åç§»é‡ã€‘ï¼šå³ä¸€ä¸ªå®Œæ•´æ–‡ä»¶æœ‰å“ªäº›blockï¼ˆb0+b1+b2+..=fileï¼‰</p></li><li><p>ä½ç½®ä¿¡æ¯ï¼ˆ<code>åŠ¨æ€</code>çš„ï¼‰ï¼šBlockæ¯ä¸ªå‰¯æœ¬ä¿å­˜åœ¨å“ªä¸ªDataNodeä¸­</p><p><code>*æ³¨æ„*</code>ï¼šä½ç½®ä¿¡æ¯æ˜¯ç”±DNå¯åŠ¨æ—¶ä¸ŠæŠ¥ç»™NN ï¼Œå› ä¸ºå®ƒä¼šéšæ—¶å˜åŒ–ï¼Œæ‰€ä»¥ä¸ä¼šä¿å­˜åœ¨å†…å­˜å’Œç£ç›˜ä¸­</p></li></ul></blockquote><h5 id="3-gt-NameNodeçš„metadateä¿¡æ¯åœ¨å¯åŠ¨åä¼šåŠ è½½åˆ°å†…å­˜"><a href="#3-gt-NameNodeçš„metadateä¿¡æ¯åœ¨å¯åŠ¨åä¼šåŠ è½½åˆ°å†…å­˜" class="headerlink" title="3&gt; NameNodeçš„metadateä¿¡æ¯åœ¨å¯åŠ¨åä¼šåŠ è½½åˆ°å†…å­˜"></a>3&gt; NameNodeçš„metadateä¿¡æ¯åœ¨å¯åŠ¨åä¼šåŠ è½½åˆ°å†…å­˜</h5><blockquote><p>åŒæ—¶ï¼š</p><p>metadataä¿¡æ¯ä¹Ÿä¼šä¿å­˜fsimageæ–‡ä»¶ä¸­ï¼ˆfsimageæ–‡ä»¶æ˜¯ä½äºç£ç›˜ä¸Šçš„é•œåƒæ–‡ä»¶ï¼‰</p><p>å¯¹metadataçš„æ“ä½œæ—¥å¿—ä¹Ÿä¼šè®°å½•åœ¨edits æ–‡ä»¶ä¸­ï¼ˆeditsæ–‡ä»¶æ˜¯ä½äºç£ç›˜ä¸Šçš„æ—¥å¿—æ–‡ä»¶ï¼‰</p></blockquote><h4 id="SecondaryNameNodeï¼ˆç®€ç§°SNNï¼‰"><a href="#SecondaryNameNodeï¼ˆç®€ç§°SNNï¼‰" class="headerlink" title="SecondaryNameNodeï¼ˆç®€ç§°SNNï¼‰"></a><3>SecondaryNameNodeï¼ˆç®€ç§°SNNï¼‰</3></h4><h5 id="1-gt-SNNä¸»è¦åŠŸèƒ½"><a href="#1-gt-SNNä¸»è¦åŠŸèƒ½" class="headerlink" title="1&gt;SNNä¸»è¦åŠŸèƒ½"></a>1&gt;SNNä¸»è¦åŠŸèƒ½</h5><blockquote><p>å¸®åŠ©NameNodeåˆå¹¶editså’Œfsimageæ–‡ä»¶ï¼Œå‡å°‘NNå¯åŠ¨æ—¶é—´ï¼›</p><p>SecondaryNameNodeä¸€èˆ¬æ˜¯å•ç‹¬è¿è¡Œåœ¨ä¸€å°æœºå™¨ä¸Šï¼›</p><p>å®ƒä¸æ˜¯NNçš„å¤‡ä»½ï¼ˆä½†å¯ä»¥åšå¤‡ä»½)ã€‚</p></blockquote><h5 id="2-gt-åˆå¹¶æµç¨‹"><a href="#2-gt-åˆå¹¶æµç¨‹" class="headerlink" title="2&gt;åˆå¹¶æµç¨‹"></a>2&gt;åˆå¹¶æµç¨‹</h5><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz0p1lys2zj30f009vwf2.jpg" alt="SNNåˆå¹¶"><span class="img-alt">SNNåˆå¹¶</span></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SecondaryNameNodeçš„å·¥ä½œæƒ…å†µï¼š</span><br><span class="line">ï¼ˆ1ï¼‰SecondaryNameNodeä¼šå®šæœŸå’ŒNameNodeé€šä¿¡ï¼Œè¯·æ±‚å…¶åœæ­¢ä½¿ç”¨EditLogæ–‡ä»¶ï¼Œ</span><br><span class="line">     æš‚æ—¶å°†æ–°çš„å†™æ“ä½œå†™åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶edit.newä¸Šæ¥ï¼Œè¿™ä¸ªæ“ä½œæ˜¯ç¬é—´å®Œæˆï¼Œ</span><br><span class="line">     ä¸Šå±‚å†™æ—¥å¿—çš„å‡½æ•°å®Œå…¨æ„Ÿè§‰ä¸åˆ°å·®åˆ«ï¼›</span><br><span class="line">ï¼ˆ2ï¼‰SecondaryNameNodeé€šè¿‡HTTP GETæ–¹å¼ä»NameNodeä¸Šè·å–åˆ°FsImageå’ŒEditLogæ–‡</span><br><span class="line">    ä»¶ï¼Œå¹¶ä¸‹è½½åˆ°æœ¬åœ°çš„ç›¸åº”ç›®å½•ä¸‹ï¼›</span><br><span class="line">ï¼ˆ3ï¼‰SecondaryNameNodeå°†ä¸‹è½½ä¸‹æ¥çš„FsImageè½½å…¥åˆ°å†…å­˜ï¼Œç„¶åä¸€æ¡ä¸€æ¡åœ°æ‰§è¡ŒEditLogæ–‡ä»¶      ä¸­çš„å„é¡¹æ›´æ–°æ“ä½œï¼Œä½¿å¾—å†…å­˜ä¸­çš„FsImageä¿æŒæœ€æ–°ï¼›</span><br><span class="line">    è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯EditLogå’ŒFsImageæ–‡ä»¶åˆå¹¶ï¼›</span><br><span class="line">ï¼ˆ4ï¼‰SecondaryNameNodeæ‰§è¡Œå®Œï¼ˆ3ï¼‰æ“ä½œä¹‹åï¼Œ</span><br><span class="line">     ä¼šé€šè¿‡postæ–¹å¼å°†æ–°çš„FsImageæ–‡ä»¶å‘é€åˆ°NameNodeèŠ‚ç‚¹ä¸Š</span><br><span class="line">ï¼ˆ5ï¼‰NameNodeå°†ä»SecondaryNameNodeæ¥æ”¶åˆ°çš„æ–°çš„FsImageæ›¿æ¢æ—§çš„FsImageæ–‡ä»¶ï¼Œ</span><br><span class="line">     åŒæ—¶å°†edit.newæ›¿æ¢EditLogæ–‡ä»¶ï¼Œé€šè¿‡è¿™ä¸ªè¿‡ç¨‹EditLogå°±å˜å°äº†</span><br></pre></td></tr></table></figure><h5 id="3-gt-åˆå¹¶æœºåˆ¶"><a href="#3-gt-åˆå¹¶æœºåˆ¶" class="headerlink" title="3&gt;åˆå¹¶æœºåˆ¶"></a>3&gt;åˆå¹¶æœºåˆ¶</h5><blockquote><p> â€”â€”-SNNæ‰§è¡Œåˆå¹¶æ—¶é—´å’Œæœºåˆ¶</p><ul><li><p>Aã€æ ¹æ®é…ç½®æ–‡ä»¶è®¾ç½®çš„æ—¶é—´é—´éš”fs.checkpoint.period é»˜è®¤3600ç§’</p></li><li><p>Bã€æ ¹æ®é…ç½®æ–‡ä»¶è®¾ç½®edits logå¤§å° fs.checkpoint.size </p></li></ul><p>â€‹          è§„å®šeditsæ–‡ä»¶çš„æœ€å¤§å€¼é»˜è®¤æ˜¯64MB</p></blockquote><h4 id="DataNodeï¼ˆç®€ç§°DNï¼‰"><a href="#DataNodeï¼ˆç®€ç§°DNï¼‰" class="headerlink" title="DataNodeï¼ˆç®€ç§°DNï¼‰"></a><4>DataNodeï¼ˆç®€ç§°DNï¼‰</4></h4><h5 id="1-gt-DNä¸»è¦åŠŸèƒ½"><a href="#1-gt-DNä¸»è¦åŠŸèƒ½" class="headerlink" title="1&gt;  DNä¸»è¦åŠŸèƒ½"></a>1&gt;  DNä¸»è¦åŠŸèƒ½</h5><blockquote><ul><li>å­˜å‚¨<code>æ–‡ä»¶å†…å®¹</code>ï¼ˆblockï¼‰ï¼›</li><li>æ–‡ä»¶å†…å®¹ä¿å­˜åœ¨<code>ç£ç›˜</code>ï¼›</li><li>ç»´æŠ¤äº†<code>block id</code> åˆ°<code>datanodeæœ¬åœ°æ–‡ä»¶</code>çš„æ˜ å°„å…³ç³»</li><li>å¯åŠ¨DNçº¿ç¨‹çš„æ—¶å€™ä¼šå‘NameNodeæ±‡æŠ¥blockä½ç½®ä¿¡æ¯</li></ul></blockquote><h5 id="2-gt-DNå·¥ä½œæœºåˆ¶"><a href="#2-gt-DNå·¥ä½œæœºåˆ¶" class="headerlink" title="2&gt;   DNå·¥ä½œæœºåˆ¶"></a>2&gt;   DNå·¥ä½œæœºåˆ¶</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â€¢    æ•°æ®èŠ‚ç‚¹æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSçš„å·¥ä½œèŠ‚ç‚¹ï¼Œè´Ÿè´£æ•°æ®çš„å­˜å‚¨å’Œè¯»å–ï¼Œ</span><br><span class="line">â€¢    ä¼šæ ¹æ®å®¢æˆ·ç«¯æˆ–è€…æ˜¯åç§°èŠ‚ç‚¹çš„è°ƒåº¦æ¥è¿›è¡Œæ•°æ®çš„å­˜å‚¨å’Œæ£€ç´¢ï¼Œ</span><br><span class="line">â€¢    å¹¶ä¸”é€šè¿‡å¿ƒè·³æœºåˆ¶å‘åç§°èŠ‚ç‚¹å®šæœŸå‘é€è‡ªå·±æ‰€å­˜å‚¨çš„å—çš„åˆ—è¡¨ï¼Œä¿æŒä¸å…¶è”ç³»ï¼ˆ3ç§’ä¸€æ¬¡ï¼‰</span><br><span class="line">    ï¼ˆå¦‚æœNN 10åˆ†é’Ÿæ²¡æœ‰æ”¶åˆ°DNçš„å¿ƒè·³ï¼Œåˆ™è®¤ä¸ºå…¶å·²ç»lostï¼Œå¹¶copyå…¶ä¸Šçš„blockåˆ°å…¶å®ƒDNï¼‰</span><br><span class="line">â€¢    æ¯ä¸ªæ•°æ®èŠ‚ç‚¹ä¸­çš„æ•°æ®ä¼šè¢«ä¿å­˜åœ¨å„è‡ªèŠ‚ç‚¹çš„æœ¬åœ°Linuxæ–‡ä»¶ç³»ç»Ÿä¸­</span><br></pre></td></tr></table></figure><h5 id="3-gt-blockçš„å‰¯æœ¬æ”¾ç½®ç­–ç•¥"><a href="#3-gt-blockçš„å‰¯æœ¬æ”¾ç½®ç­–ç•¥" class="headerlink" title="3&gt; blockçš„å‰¯æœ¬æ”¾ç½®ç­–ç•¥"></a>3&gt; blockçš„å‰¯æœ¬æ”¾ç½®ç­–ç•¥</h5><blockquote><p>â€“  ç¬¬ä¸€ä¸ªå‰¯æœ¬ï¼šæ”¾ç½®åœ¨ä¸Šä¼ æ–‡ä»¶çš„DNï¼ˆé›†ç¾¤å†…æäº¤ï¼‰ï¼›</p><p>â€‹                           å¦‚æœæ˜¯é›†ç¾¤å¤–æäº¤ï¼Œåˆ™éšæœºæŒ‘é€‰ä¸€å°ç£ç›˜ä¸å¤ªæ»¡ï¼ŒCPUä¸å¤ªå¿™çš„èŠ‚ç‚¹ã€‚</p><p>â€“  ç¬¬äºŒä¸ªå‰¯æœ¬ï¼šæ”¾ç½®åœ¨äºç¬¬ä¸€ä¸ªå‰¯æœ¬ä¸åŒçš„æœºæ¶çš„èŠ‚ç‚¹ä¸Šã€‚</p><p>â€“  ç¬¬ä¸‰ä¸ªå‰¯æœ¬ï¼šä¸ç¬¬äºŒä¸ªå‰¯æœ¬ç›¸åŒæœºæ¶çš„ä¸åŒèŠ‚ç‚¹ã€‚</p><p>â€“  æ›´å¤šå‰¯æœ¬ï¼šéšæœºèŠ‚ç‚¹</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1ny1tfrjj30f00akaaf.jpg" alt="blockå—å­˜æ”¾ä½ç½®"><span class="img-alt">blockå—å­˜æ”¾ä½ç½®</span></p><h3 id="4ã€HDFSè¯»å†™æµç¨‹"><a href="#4ã€HDFSè¯»å†™æµç¨‹" class="headerlink" title="4ã€HDFSè¯»å†™æµç¨‹"></a>4ã€HDFSè¯»å†™æµç¨‹</h3><h4 id="è¯»æ–‡ä»¶è¿‡ç¨‹"><a href="#è¯»æ–‡ä»¶è¿‡ç¨‹" class="headerlink" title=" è¯»æ–‡ä»¶è¿‡ç¨‹"></a><1> è¯»æ–‡ä»¶è¿‡ç¨‹</1></h4><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1o4z4nmwj30gm09vgmg.jpg" alt="read"><span class="img-alt">read</span></p><blockquote><p>1ã€é¦–å…ˆ<code>clientç«¯</code>è°ƒç”¨FileSystemå¯¹è±¡ï¼ˆ<code>FS</code>ï¼‰çš„<code>openæ–¹æ³•</code>ï¼Œï¼ˆFSï¼šä¸€ä¸ªDistributedFileSystemçš„å®ä¾‹ï¼‰ã€‚<br>2ã€DistributedFileSystemé€šè¿‡<code>rpc</code>åè®®ä»NameNodeï¼ˆ<code>NN</code>ï¼‰è·å¾—æ–‡ä»¶çš„ç¬¬ä¸€æ‰¹blockçš„<code>locations</code>ï¼Œï¼ˆåŒä¸€ä¸ªblockæŒ‰å‰¯æœ¬æ•°ä¼šè¿”å›å¤šä¸ªlocationsï¼Œå› ä¸ºåŒä¸€æ–‡ä»¶çš„block<code>åˆ†å¸ƒå¼å­˜å‚¨</code>åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šï¼‰ï¼Œè¿™äº›locationsæŒ‰ç…§hadoopæ‹“æ‰‘ç»“æ„æ’åºï¼Œè·ç¦»å®¢æˆ·ç«¯è¿‘çš„æ’åœ¨å‰é¢ï¼ˆ<code>å°±è¿‘é€‰æ‹©</code>ï¼‰ã€‚</p><p>3ã€å‰ä¸¤æ­¥ä¼šè¿”å›ä¸€ä¸ªFSDataInputStreamå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šè¢«å°è£…DFSInputStreamå¯¹è±¡ï¼ŒDFSInputStreamå¯ä»¥æ–¹ä¾¿çš„ç®¡ç†DNå’ŒNNçš„æ•°æ®æµã€‚å®¢æˆ·ç«¯è°ƒç”¨<code>readæ–¹æ³•</code>ï¼ŒDFSInputStreamä¼šè¿æ¥ç¦»å®¢æˆ·ç«¯æœ€è¿‘çš„DNï¼Œæ•°æ®ä»DNæºæºä¸æ–­çš„æµå‘å®¢æˆ·ç«¯ï¼ˆå¯¹å®¢æˆ·ç«¯æ˜¯é€æ˜çš„ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªè¯»å…¥çš„Inputæµï¼‰ã€‚</p><p>4ã€å¦‚æœç¬¬ä¸€æ‰¹blockéƒ½è¯»å®Œäº†ï¼Œ DFSInputStreamå°±ä¼šå»NNæ‹¿ä¸‹ä¸€æ‰¹blockçš„locationsï¼Œç„¶åç»§ç»­è¯»ï¼Œå¦‚æœæ‰€æœ‰çš„å—éƒ½è¯»å®Œï¼Œè¿™æ—¶å°±ä¼šå…³é—­æ‰æ‰€æœ‰çš„æµ</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1ptkw9krj30q40gegpp.jpg" alt="è¯»"><span class="img-alt">è¯»</span></p><p><code>æ³¨æ„ï¼š</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœåœ¨è¯»æ•°æ®çš„æ—¶å€™ï¼Œ DFSInputStreamå’ŒDNçš„é€šè®¯å‘ç”Ÿå¼‚å¸¸ï¼Œå°±ä¼šå°è¯•è¿æ¥æ­£åœ¨è¯»çš„blockçš„æ’åºç¬¬äºŒè¿‘çš„DN,å¹¶ä¸”ä¼šè®°å½•å“ªä¸ªDNå‘ç”Ÿé”™è¯¯ï¼Œå‰©ä½™çš„blocksè¯»çš„æ—¶å€™å°±ä¼šç›´æ¥è·³è¿‡è¯¥DNã€‚ DFSInputStreamä¹Ÿä¼šæ£€æŸ¥blockæ•°æ®æ ¡éªŒå’Œï¼Œå¦‚æœå‘ç°ä¸€ä¸ªåçš„block,å°±ä¼šå…ˆæŠ¥å‘Šåˆ°NNï¼Œç„¶åDFSInputStreamåœ¨å…¶ä»–çš„DNä¸Šè¯»è¯¥blockçš„é•œåƒã€‚</span><br><span class="line">è¯¥è®¾è®¡å°±æ˜¯å®¢æˆ·ç«¯ç›´æ¥è¿æ¥DNæ¥æ£€ç´¢æ•°æ®ï¼Œå¹¶ä¸”NNæ¥è´Ÿè´£ä¸ºæ¯ä¸€ä¸ªblockæä¾›æœ€ä¼˜çš„DNï¼ŒNNä»…ä»…å¤„ç†block locationçš„è¯·æ±‚ï¼Œè¿™äº›ä¿¡æ¯éƒ½åŠ è½½åœ¨NNçš„å†…å­˜ä¸­ï¼Œhdfsé€šè¿‡DNé›†ç¾¤å¯ä»¥æ‰¿å—å¤§é‡å®¢æˆ·ç«¯çš„å¹¶å‘è®¿é—®ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* RPC *ï¼ˆRemote Procedure Call Protocolï¼‰â€”â€”è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ï¼Œå®ƒæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œä»è¿œç¨‹è®¡ç®—æœºç¨‹åºä¸Šè¯·æ±‚æœåŠ¡ï¼Œè€Œä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œæŠ€æœ¯çš„åè®®ã€‚RPCåè®®å‡å®šæŸäº›ä¼ è¾“åè®®çš„å­˜åœ¨ï¼Œå¦‚TCPæˆ–UDPï¼Œä¸ºé€šä¿¡ç¨‹åºä¹‹é—´æºå¸¦ä¿¡æ¯æ•°æ®ã€‚åœ¨OSIç½‘ç»œé€šä¿¡æ¨¡å‹ä¸­ï¼ŒRPCè·¨è¶Šäº†ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚RPCä½¿å¾—å¼€å‘åŒ…æ‹¬ç½‘ç»œåˆ†å¸ƒå¼å¤šç¨‹åºåœ¨å†…çš„åº”ç”¨ç¨‹åºæ›´åŠ å®¹æ˜“ã€‚</span><br><span class="line">RPCé‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å¼ã€‚è¯·æ±‚ç¨‹åºå°±æ˜¯ä¸€ä¸ªå®¢æˆ·æœºï¼Œè€ŒæœåŠ¡æä¾›ç¨‹åºå°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ã€‚é¦–å…ˆï¼Œå®¢æˆ·æœºè°ƒç”¨è¿›ç¨‹å‘é€ä¸€ä¸ªæœ‰è¿›ç¨‹å‚æ•°çš„è°ƒç”¨ä¿¡æ¯åˆ°æœåŠ¡è¿›ç¨‹ï¼Œç„¶åç­‰å¾…åº”ç­”ä¿¡æ¯ã€‚åœ¨æœåŠ¡å™¨ç«¯ï¼Œè¿›ç¨‹ä¿æŒç¡çœ çŠ¶æ€ç›´åˆ°è°ƒç”¨ä¿¡æ¯åˆ°è¾¾ä¸ºæ­¢ã€‚å½“ä¸€ä¸ªè°ƒç”¨ä¿¡æ¯åˆ°è¾¾ï¼ŒæœåŠ¡å™¨è·å¾—è¿›ç¨‹å‚æ•°ï¼Œè®¡ç®—ç»“æœï¼Œå‘é€ç­”å¤ä¿¡æ¯ï¼Œç„¶åç­‰å¾…ä¸‹ä¸€ä¸ªè°ƒç”¨ä¿¡æ¯ï¼Œæœ€åï¼Œå®¢æˆ·ç«¯è°ƒç”¨è¿›ç¨‹æ¥æ”¶ç­”å¤ä¿¡æ¯ï¼Œè·å¾—è¿›ç¨‹ç»“æœï¼Œç„¶åè°ƒç”¨æ‰§è¡Œç»§ç»­è¿›è¡Œã€‚</span><br></pre></td></tr></table></figure><h4 id="å†™æ–‡ä»¶è¿‡ç¨‹"><a href="#å†™æ–‡ä»¶è¿‡ç¨‹" class="headerlink" title="å†™æ–‡ä»¶è¿‡ç¨‹"></a><2>å†™æ–‡ä»¶è¿‡ç¨‹</2></h4><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1o6wamv3j30ga0aawfd.jpg" alt="write"><span class="img-alt">write</span></p><blockquote><p><strong>1.</strong>å®¢æˆ·ç«¯é€šè¿‡è°ƒç”¨DistributedFileSystemçš„<code>createæ–¹æ³•</code>åˆ›å»ºæ–°æ–‡ä»¶ã€‚</p><p><strong>2.</strong>DistributedFileSystemé€šè¿‡<code>RPC</code>è°ƒç”¨NNå»åˆ›å»ºä¸€ä¸ªæ²¡æœ‰blockså…³è”çš„æ–°æ–‡ä»¶ï¼Œåˆ›å»ºå‰ï¼ŒNNä¼šåšå„ç§æ ¡éªŒï¼Œæ¯”å¦‚æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå®¢æˆ·ç«¯æœ‰æ— æƒé™å»åˆ›å»ºç­‰ã€‚å¦‚æœæ ¡éªŒé€šè¿‡ï¼ŒNNå°±ä¼šè®°å½•ä¸‹æ–°æ–‡ä»¶ï¼Œå¦åˆ™å°±ä¼šæŠ›å‡ºIOå¼‚å¸¸ã€‚</p><p><strong>3.</strong>å‰ä¸¤æ­¥ç»“æŸåï¼Œä¼šè¿”å›FSDataOutputStreamçš„å¯¹è±¡ï¼Œå°è£…åœ¨DFSOutputStreamï¼Œå®¢æˆ·ç«¯å¼€å§‹å†™æ•°æ®åˆ°DFSOutputStreamï¼ŒDFSOutputStreamä¼šæŠŠæ•°æ®åˆ‡æˆä¸€ä¸ªä¸ªå°çš„<code>packet</code>ï¼Œç„¶åæ’æˆé˜Ÿåˆ—dataQueneã€‚</p><p><strong>4.</strong>NNä¼šç»™è¿™ä¸ªæ–°çš„blockåˆ†é…æœ€é€‚åˆå­˜å‚¨çš„å‡ ä¸ªdatanodeï¼ŒDFSOutputStreamæŠŠpacketåŒ…æ’æˆä¸€ä¸ª<code>ç®¡é“pipeline</code>è¾“å‡ºã€‚å…ˆæŒ‰é˜Ÿåˆ—è¾“å‡ºåˆ°ç®¡é“çš„ç¬¬ä¸€ä¸ªdatanodeä¸­ï¼Œå¹¶å°†è¯¥Packetä»dataQueueé˜Ÿåˆ—ä¸­ç§»åˆ°ackQueueé˜Ÿåˆ—ä¸­ï¼Œç¬¬ä¸€ä¸ªdatanodeåˆæŠŠpacketè¾“å‡ºåˆ°ç¬¬äºŒä¸ªdatanodeä¸­ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p><strong>5.</strong>DFSOutputStreamä¸­çš„<code>ackQuene</code>ï¼Œä¹Ÿæ˜¯ç”±packetç»„æˆï¼Œç­‰å¾…DNçš„æ”¶åˆ°å“åº”ï¼Œå½“pipelineä¸­çš„DNéƒ½è¡¨ç¤ºå·²ç»æ”¶åˆ°æ•°æ®çš„æ—¶å€™ï¼Œè¿™æ—¶ackQueneæ‰ä¼šæŠŠå¯¹åº”çš„packetåŒ…ç§»é™¤æ‰ã€‚ å¦‚æœåœ¨å†™çš„è¿‡ç¨‹ä¸­æŸä¸ªDNå‘ç”Ÿé”™è¯¯ï¼Œä¼šé‡‡å–ä»¥ä¸‹å‡ æ­¥ï¼š</p><p>â€‹      1) pipelineè¢«å…³é—­æ‰ï¼›  </p><p>â€‹      2)ä¸ºäº†é˜²æ­¢ä¸¢åŒ…ï¼ŒackQueneé‡Œçš„packetä¼š<code>åŒæ­¥</code>åˆ°dataQueneé‡Œ;æ–°å»ºpipelineç®¡é“æ¥åˆ°å…¶ä»–æ­£å¸¸DNä¸Š</p><p>â€‹     4)å‰©ä¸‹çš„éƒ¨åˆ†è¢«å†™åˆ°å‰©ä¸‹çš„æ­£å¸¸çš„datanodeä¸­ï¼› </p><p>â€‹     5)NNæ‰¾åˆ°å¦å¤–çš„DNå»åˆ›å»ºè¿™ä¸ªå—çš„å¤åˆ¶ã€‚ï¼ˆå¯¹å®¢æˆ·ç«¯é€æ˜ï¼‰</p><p><strong>6.</strong>å®¢æˆ·ç«¯å®Œæˆå†™æ•°æ®åè°ƒç”¨<code>closeæ–¹æ³•</code>å…³é—­å†™å…¥æµ</p></blockquote><p><code>æ³¨æ„ï¼š</code>å®¢æˆ·ç«¯æ‰§è¡Œwriteæ“ä½œåï¼Œå†™å®Œçš„blockæ‰æ˜¯å¯è§çš„ï¼Œæ­£åœ¨å†™çš„blockå¯¹å®¢æˆ·ç«¯æ˜¯ä¸å¯è§çš„</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1ptp2xlej30on0gf78r.jpg" alt="å†™"><span class="img-alt">å†™</span></p><h3 id="5-HDFSæ–‡ä»¶æƒé™å’Œå®‰å…¨æ¨¡å¼"><a href="#5-HDFSæ–‡ä»¶æƒé™å’Œå®‰å…¨æ¨¡å¼" class="headerlink" title="5.HDFSæ–‡ä»¶æƒé™å’Œå®‰å…¨æ¨¡å¼"></a>5.HDFSæ–‡ä»¶æƒé™å’Œå®‰å…¨æ¨¡å¼</h3><h4 id="ï¼Ÿï¼ŸHDFSæ–‡ä»¶æƒé™ï¼Ÿï¼Ÿ"><a href="#ï¼Ÿï¼ŸHDFSæ–‡ä»¶æƒé™ï¼Ÿï¼Ÿ" class="headerlink" title="ï¼Ÿï¼ŸHDFSæ–‡ä»¶æƒé™ï¼Ÿï¼Ÿ"></a><1>ï¼Ÿï¼ŸHDFSæ–‡ä»¶æƒé™ï¼Ÿï¼Ÿ</1></h4><p>â€“ ä¸Linuxæ–‡ä»¶æƒé™ç±»ä¼¼ </p><blockquote><p>   â€¢ r: read;    w:write;    x:executeï¼Œæƒé™xå¯¹äºæ–‡ä»¶å¿½ç•¥ï¼Œå¯¹äºæ–‡ä»¶å¤¹è¡¨ç¤ºæ˜¯å¦å…è®¸è®¿é—®å…¶å†…å®¹ </p></blockquote><p>â€“ å¦‚æœLinuxç³»ç»Ÿç”¨æˆ·zsä½¿ç”¨hadoopå‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ª æ–‡ä»¶åœ¨HDFSä¸­ownerå°±æ˜¯zsã€‚ </p><p>â€“ HDFSçš„æƒé™ç›®çš„ï¼šé˜»æ­¢å¥½äººåšé”™äº‹ï¼Œè€Œä¸æ˜¯é˜»æ­¢åäººåšåäº‹ã€‚</p><h4 id="ï¼Ÿï¼Ÿå®‰å…¨æ¨¡å¼ï¼Ÿï¼Ÿ"><a href="#ï¼Ÿï¼Ÿå®‰å…¨æ¨¡å¼ï¼Ÿï¼Ÿ" class="headerlink" title="ï¼Ÿï¼Ÿå®‰å…¨æ¨¡å¼ï¼Ÿï¼Ÿ"></a><2>ï¼Ÿï¼Ÿå®‰å…¨æ¨¡å¼ï¼Ÿï¼Ÿ</2></h4><blockquote><ul><li>NNå¯åŠ¨çš„æ—¶å€™ï¼Œé¦–å…ˆå°†æ˜ åƒæ–‡ä»¶(fsimage)è½½å…¥å†…å­˜ï¼Œå¹¶æ‰§è¡Œç¼–è¾‘æ—¥å¿—(edits)ä¸­çš„å„é¡¹æ“ä½œã€‚ </li></ul></blockquote><blockquote><ul><li>ä¸€æ—¦åœ¨å†…å­˜ä¸­æˆåŠŸå»ºç«‹æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„æ˜ å°„ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„fsimageæ–‡ä»¶(è¿™ä¸ªæ“ä½œä¸éœ€è¦SecondaryNameNode)å’Œä¸€ä¸ªç©ºçš„ç¼–è¾‘æ—¥å¿—ã€‚ </li></ul></blockquote><blockquote><ul><li>æ­¤åˆ»namenodeè¿è¡Œåœ¨å®‰å…¨æ¨¡å¼ã€‚å³namenodeçš„æ–‡ä»¶ç³»ç»Ÿå¯¹äºå®¢æœç«¯æ¥è¯´æ˜¯åªè¯»çš„ã€‚(æ˜¾ç¤ºç›®å½•ï¼Œæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ç­‰ã€‚å†™ã€åˆ é™¤ã€é‡å‘½åéƒ½ä¼šå¤±è´¥)ã€‚ </li></ul></blockquote><blockquote><ul><li>åœ¨æ­¤é˜¶æ®µNamenodeæ”¶é›†å„ä¸ªdatanodeçš„æŠ¥å‘Šï¼Œå½“æ•°æ®å—è¾¾åˆ°æœ€å°å‰¯æœ¬æ•°ä»¥ä¸Šæ—¶ï¼Œä¼šè¢«è®¤ä¸ºæ˜¯â€œå®‰å…¨â€çš„ï¼Œ åœ¨ä¸€å®šæ¯”ä¾‹ï¼ˆå¯è®¾ç½®ï¼‰çš„æ•°æ®å—è¢«ç¡®å®šä¸ºâ€œå®‰å…¨â€åï¼Œå†è¿‡è‹¥å¹²æ—¶é—´ï¼Œå®‰å…¨æ¨¡å¼ç»“æŸ </li></ul></blockquote><blockquote><ul><li>å½“æ£€æµ‹åˆ°å‰¯æœ¬æ•°ä¸è¶³çš„æ•°æ®å—æ—¶ï¼Œè¯¥å—ä¼šè¢«å¤åˆ¶ç›´åˆ°è¾¾åˆ°æœ€å°å‰¯æœ¬æ•°ï¼Œç³»ç»Ÿä¸­æ•°æ®å—çš„ä½ç½®å¹¶ä¸æ˜¯ç”±namenodeç»´æŠ¤çš„ï¼Œè€Œæ˜¯ä»¥å—åˆ—è¡¨å½¢å¼å­˜å‚¨åœ¨datanodeä¸­ã€‚</li></ul></blockquote><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1s32tmr2j30hj04ggmr.jpg" alt="å¼‚å¸¸"><span class="img-alt">å¼‚å¸¸</span></p><h2 id="äºŒã€å®Œå…¨åˆ†å¸ƒå¼æ­å»ºåŠeclipseæ’ä»¶"><a href="#äºŒã€å®Œå…¨åˆ†å¸ƒå¼æ­å»ºåŠeclipseæ’ä»¶" class="headerlink" title="äºŒã€å®Œå…¨åˆ†å¸ƒå¼æ­å»ºåŠeclipseæ’ä»¶"></a>äºŒã€å®Œå…¨åˆ†å¸ƒå¼æ­å»ºåŠeclipseæ’ä»¶</h2><h3 id="1ã€å®Œå…¨åˆ†å¸ƒå¼æ­å»ºï¼ˆå¿…å¤‡ï¼‰"><a href="#1ã€å®Œå…¨åˆ†å¸ƒå¼æ­å»ºï¼ˆå¿…å¤‡ï¼‰" class="headerlink" title="1ã€å®Œå…¨åˆ†å¸ƒå¼æ­å»ºï¼ˆå¿…å¤‡ï¼‰"></a>1ã€å®Œå…¨åˆ†å¸ƒå¼æ­å»ºï¼ˆå¿…å¤‡ï¼‰</h3><h4 id="1-ç¯å¢ƒçš„å‡†å¤‡"><a href="#1-ç¯å¢ƒçš„å‡†å¤‡" class="headerlink" title="(1)ç¯å¢ƒçš„å‡†å¤‡"></a>(1)ç¯å¢ƒçš„å‡†å¤‡</h4><blockquote><ul><li>Linux (å‰é¢å·²ç»å®‰è£…å¥½äº†)</li></ul><ul><li><p>JDKï¼ˆå‰é¢å·²ç»å®‰è£…å¥½äº†ï¼‰</p></li><li><p>å‡†å¤‡è‡³å°‘3å°æœºå™¨ï¼ˆé€šè¿‡å…‹éš†è™šæ‹Ÿæœºï¼›)</p></li><li><p>(ç½‘ç»œé…ç½®ã€JDKæ­å»ºã€hostsé…ç½®ï¼Œä¿è¯èŠ‚ç‚¹é—´èƒ½äº’pingé€šï¼‰</p></li><li><p>æ—¶é—´åŒæ­¥  (ntpdate time.nist.gov)</p></li><li><p>sshå…ç§˜é’¥ç™»å½•   (ä¸¤ä¸¤äº’é€šå…ç§˜é’¥)</p></li></ul></blockquote><h4 id="ï¼ˆ2ï¼‰å®Œå…¨åˆ†å¸ƒå¼æ­å»ºæ­¥éª¤"><a href="#ï¼ˆ2ï¼‰å®Œå…¨åˆ†å¸ƒå¼æ­å»ºæ­¥éª¤" class="headerlink" title="ï¼ˆ2ï¼‰å®Œå…¨åˆ†å¸ƒå¼æ­å»ºæ­¥éª¤"></a>ï¼ˆ2ï¼‰å®Œå…¨åˆ†å¸ƒå¼æ­å»ºæ­¥éª¤</h4><p><code>è¯¦æƒ…è§Hadoop2.X.mdæ–‡ä»¶</code></p><h3 id="2ã€HDFSå‘½ä»¤"><a href="#2ã€HDFSå‘½ä»¤" class="headerlink" title="2ã€HDFSå‘½ä»¤"></a>2ã€HDFSå‘½ä»¤</h3><h4 id="0-å‘½ä»¤-ï¼šhdfs-dfs"><a href="#0-å‘½ä»¤-ï¼šhdfs-dfs" class="headerlink" title="(0)  å‘½ä»¤ ï¼šhdfs dfs"></a>(0)  å‘½ä»¤ ï¼šhdfs dfs</h4><h4 id="1-ä¸Šä¼ æ–‡ä»¶åˆ°HDFSï¼š"><a href="#1-ä¸Šä¼ æ–‡ä»¶åˆ°HDFSï¼š" class="headerlink" title="(1)ä¸Šä¼ æ–‡ä»¶åˆ°HDFSï¼š"></a>(1)ä¸Šä¼ æ–‡ä»¶åˆ°HDFSï¼š</h4><blockquote><p> <strong>hdfs dfs -put fileName[</strong>æœ¬åœ°æ–‡ä»¶å] <strong>PATH</strong>ã€hdfsçš„æ–‡ä»¶è·¯åŠ²ã€‘</p></blockquote><blockquote><p>ä¸Šä¼ æœ¬åœ°æ–‡ä»¶install.logåˆ°/myhdfsç›®å½•ä¸‹</p><p><strong>hdfs dfs -put install.log /myhdfs</strong></p><p>â€‹                       ï¼ˆæ–‡ä»¶è·¯å¾„) (ä¸Šä¼ ç›®å½•ï¼‰    </p></blockquote><h4 id="2-åˆ›å»ºæ–‡ä»¶å¤¹"><a href="#2-åˆ›å»ºæ–‡ä»¶å¤¹" class="headerlink" title="(2)åˆ›å»ºæ–‡ä»¶å¤¹"></a>(2)åˆ›å»ºæ–‡ä»¶å¤¹</h4><blockquote><p><strong>hdfs dfs -mkdir[-p] <paths></paths></strong> </p></blockquote><h4 id="3-åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹"><a href="#3-åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹" class="headerlink" title="(3)åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹"></a>(3)<strong>åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</strong></h4><blockquote><p><strong>hdfs dfs -rm -r /myhadoop1.0</strong>  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -du -s URI[URI ...] æ˜¾ç¤ºæ–‡ä»¶(å¤¹)å¤§å°. </span><br><span class="line"></span><br><span class="line">hdfs dfs -cp -f]URI[URI...]&lt;dest&gt;    å¤åˆ¶æ–‡ä»¶(å¤¹)ï¼Œå¯ä»¥è¦†ç›–ï¼Œå¯ä»¥ä¿ç•™åŸæœ‰æƒé™ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">hdfs dfs -count -q&lt;paths&gt;åˆ—å‡ºæ–‡ä»¶å¤¹æ•°é‡ã€æ–‡ä»¶æ•°é‡ã€å†…å®¹å¤§å°.</span><br><span class="line"></span><br><span class="line">hdfs dfs -chown -R[:[GROUP]]URI[URI] ä¿®æ”¹æ‰€æœ‰è€….</span><br><span class="line"></span><br><span class="line">hdfs dfs -chmod [-R]&lt;MODE[,MODE]...|OCTALMODE&gt;URI[URI ...] ä¿®æ”¹æƒé™.</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰æŒ‡å®šblockå¤§å°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">äº§ç”Ÿ100000æ¡æ•°æ®ï¼š</span><br><span class="line"></span><br><span class="line">for i in `seq 100000`;do  echo &quot;hello sxt $i&quot; &gt;&gt; test.txt;done</span><br><span class="line"></span><br><span class="line">ä¸Šä¼ æ–‡ä»¶test.txtåˆ°æŒ‡å®šçš„Java22ç›®å½•ä¸‹ï¼Œå¹¶æŒ‡å®šblockå—çš„å¤§å°1Mï¼š</span><br><span class="line"></span><br><span class="line">hdfs dfs -D dfs.blocksize=1048576-put test.txt /java22</span><br><span class="line"></span><br><span class="line">-D   ----è®¾ç½®å±æ€§</span><br></pre></td></tr></table></figure><h3 id="3ã€eclipseæ’ä»¶å®‰è£…é…ç½®"><a href="#3ã€eclipseæ’ä»¶å®‰è£…é…ç½®" class="headerlink" title="3ã€eclipseæ’ä»¶å®‰è£…é…ç½®"></a>3ã€eclipseæ’ä»¶å®‰è£…é…ç½®</h3><h4 id="ï¼ˆ1ï¼‰ã€å¯¼å…¥æ’ä»¶"><a href="#ï¼ˆ1ï¼‰ã€å¯¼å…¥æ’ä»¶" class="headerlink" title="ï¼ˆ1ï¼‰ã€å¯¼å…¥æ’ä»¶"></a>ï¼ˆ1ï¼‰ã€å¯¼å…¥æ’ä»¶</h4><blockquote><p>å°†ä»¥ä¸‹jaråŒ…æ”¾å…¥eclipseçš„pluginsæ–‡ä»¶å¤¹ä¸­</p><p>â€‹         hadoop-eclipse-plugin-2.6.0.jar</p></blockquote><p>å¯åŠ¨eclipseï¼šå‡ºç°ç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1uhqzg9oj30fe09nt9c.jpg" alt="æ’ä»¶åº”ç”¨"><span class="img-alt">æ’ä»¶åº”ç”¨</span></p><h4 id="ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡"><a href="#ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡"></a>ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡</h4><p><strong>Eclipse</strong>æ’ä»¶å®‰è£…å®Œåä¿®æ”¹windowsä¸‹çš„ç”¨æˆ·åï¼Œç„¶åé‡å¯Eclipseï¼š</p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1uk49nbrj30fe0770tj.jpg" alt="ç¯å¢ƒå˜é‡"><span class="img-alt">ç¯å¢ƒå˜é‡</span></p><h4 id="ï¼ˆ3ï¼‰æ–°å»ºJavaé¡¹ç›®"><a href="#ï¼ˆ3ï¼‰æ–°å»ºJavaé¡¹ç›®" class="headerlink" title="ï¼ˆ3ï¼‰æ–°å»ºJavaé¡¹ç›®"></a>ï¼ˆ3ï¼‰æ–°å»ºJavaé¡¹ç›®</h4><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1ut3z3r2j30et0ah0tw.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1ut7fj9xj30fe09kq3i.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1utb5r5tj30fe0brgmt.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz1uw9a82yj30g508qmxh.jpg" alt=""></p><h2 id="ä¸‰ã€ç½‘ç›˜"><a href="#ä¸‰ã€ç½‘ç›˜" class="headerlink" title="ä¸‰ã€ç½‘ç›˜"></a>ä¸‰ã€ç½‘ç›˜</h2><p><strong>1ã€ä»£ç ç¼–å†™</strong></p><p><strong>æ–°å»ºJavaé¡¹ç›®ï¼Œå¯¼å…¥æ‰€éœ€è¦çš„jaråŒ…</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hadoopä¸­çš„share\hadoop\hdfs</span><br><span class="line"></span><br><span class="line">hadoopä¸­çš„share\hadoop\hdfs\lib</span><br><span class="line"></span><br><span class="line">hadoopä¸­çš„share\hadoop\common</span><br><span class="line"></span><br><span class="line">hadoopä¸­çš„share\hadoop\common\libä¸‹çš„jaråŒ…ã€‚</span><br></pre></td></tr></table></figure><p><strong>block</strong>åº•å±‚â€”offsetåç§»é‡æ¥è¯»å–å­—èŠ‚æ•°ç»„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">blk</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">Path ifile = <span class="keyword">new</span> Path(<span class="string">""</span>);</span><br><span class="line">FileStatus file = fs.getFileStatus(ifile );</span><br><span class="line"><span class="comment">//      è·å–blockçš„locationä¿¡æ¯HDFSåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿæ ¹æ®å…¶åç§»é‡çš„ä½ç½®ä¿¡æ¯æ¥è¯»å–å…¶å†…å®¹</span></span><br><span class="line">BlockLocation[] blk = fs.getFileBlockLocations(file,<span class="number">0</span>, file.getLen());</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (BlockLocation bb : blk) &#123;</span><br><span class="line">System.out.println(bb);</span><br><span class="line">&#125;</span><br><span class="line">FSDataInputStream input = fs.open(ifile);</span><br><span class="line">System.out.println((<span class="keyword">char</span>)input.readByte());</span><br><span class="line">System.out.println((<span class="keyword">char</span>)input.readByte());</span><br><span class="line"><span class="comment">//æŒ‡å®šä»å“ªä¸ªoffsetçš„ä½ç½®åç§»é‡æ¥è¯»</span></span><br><span class="line">input.seek(<span class="number">1048576</span>);</span><br><span class="line">System.out.println((<span class="keyword">char</span>)input.readByte());</span><br><span class="line">input.seek(<span class="number">1048576</span>);</span><br><span class="line">System.out.println((<span class="keyword">char</span>)input.readByte());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>   private   static void blk() throws Exception {           Path ifile = new Path(â€œâ€);           FileStatus file =   fs.getFileStatus(ifile );   //      è·å–blockçš„locationä¿¡æ¯    HDFSåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿæ ¹æ®å…¶åç§»é‡çš„ä½ç½®ä¿¡æ¯æ¥è¯»å–å…¶å†…å®¹           BlockLocation[] blk =   fs.getFileBlockLocations(file , 0, file.getLen());                      for (BlockLocation bb : blk) {               System.out.println(bb);           }           FSDataInputStream input =   fs.open(ifile);           System.out.println((char)input.readByte());           System.out.println((char)input.readByte());          //      æŒ‡å®šä»å“ªä¸ªoffsetçš„ä½ç½®åç§»é‡æ¥è¯»           input.seek(1048576);           System.out.println((char)input.readByte());           input.seek(1048576);           System.out.println((char)input.readByte());       }   </p>]]></content>
      
      
      <categories>
          
          <category> HDFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HDFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxå­¦ä¹ (æ€»)</title>
      <link href="/2019/01/02/Nginx%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/01/02/Nginx%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="Nginxå­¦ä¹ ï¼šå¤§å‹ç½‘ç«™é«˜å¹¶å‘è¿è¡Œå¤„ç†"><a href="#Nginxå­¦ä¹ ï¼šå¤§å‹ç½‘ç«™é«˜å¹¶å‘è¿è¡Œå¤„ç†" class="headerlink" title="Nginxå­¦ä¹ ï¼šå¤§å‹ç½‘ç«™é«˜å¹¶å‘è¿è¡Œå¤„ç†"></a>Nginxå­¦ä¹ ï¼šå¤§å‹ç½‘ç«™é«˜å¹¶å‘è¿è¡Œå¤„ç†</h1><h2 id="ä¸€ã€Nginxä½¿ç”¨èƒŒæ™¯"><a href="#ä¸€ã€Nginxä½¿ç”¨èƒŒæ™¯" class="headerlink" title="ä¸€ã€Nginxä½¿ç”¨èƒŒæ™¯"></a>ä¸€ã€Nginxä½¿ç”¨èƒŒæ™¯</h2><p>1ã€èƒŒæ™¯</p><p>1ï¼‰é«˜å¹¶å‘ï¼ˆæµ·é‡æ•°æ®ï¼Œå¤æ‚ä¸šåŠ¡ï¼Œå¤§é‡çº¿ç¨‹ï¼‰é›†ä¸­è®¿é—®æœåŠ¡å™¨</p><p>2)æœåŠ¡å™¨èµ„æºå’Œèƒ½åŠ›æœ‰é™</p><p>ä½¿å¾—æœåŠ¡å™¨å®•æœºï¼Œæ— æ³•æä¾›æœåŠ¡</p><p>2ã€æ¦‚å¿µç†è§£</p><p>1)é«˜å¹¶å‘</p><blockquote><p>æµ·é‡æ•°æ®è®¿é—®ï¼Œå¤šä¸ªè¿›ç¨‹åŒæ—¶å¤„ç†ä¸åŒæ“ä½œ</p></blockquote><p>2ï¼‰è´Ÿè½½å‡è¡¡</p><blockquote><p>å‡åŒ€åˆ†é…è¯·æ±‚|æ•°æ®åˆ°ä¸åŒæ“ä½œå•å…ƒä¸Š</p></blockquote><p>3ï¼‰å¸¸è§äº’è”ç½‘æ¶æ„</p><blockquote><p>å®¢æˆ·ç«¯å±‚â†’åå‘ä»£ç†å±‚â†’ç«™ç‚¹å±‚â†’æœåŠ¡å±‚â†’æ•°æ®å±‚</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/005zftzDgy1fz0gr7u5zoj31740hb42u.jpg" alt=""></p><h2 id="äºŒã€Nginxå…¥é—¨"><a href="#äºŒã€Nginxå…¥é—¨" class="headerlink" title="äºŒã€Nginxå…¥é—¨"></a>äºŒã€Nginxå…¥é—¨</h2><h3 id="1ã€äº†è§£nginxæ˜¯ä»€ä¹ˆ"><a href="#1ã€äº†è§£nginxæ˜¯ä»€ä¹ˆ" class="headerlink" title="1ã€äº†è§£nginxæ˜¯ä»€ä¹ˆ"></a>1ã€äº†è§£nginxæ˜¯ä»€ä¹ˆ</h3><blockquote><p>nginxæ˜¯ä¸€æ¬¾è½»é‡çº§ï¼ˆå¼€å‘æ–¹ä¾¿ï¼Œé…ç½®ç®€æ·ï¼‰çš„Web æœåŠ¡å™¨/<strong>åå‘ä»£ç†</strong>æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨</p></blockquote><h3 id="2ã€ç‰¹ç‚¹"><a href="#2ã€ç‰¹ç‚¹" class="headerlink" title="2ã€ç‰¹ç‚¹"></a>2ã€ç‰¹ç‚¹</h3><blockquote><p>å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œnginxçš„å¹¶å‘èƒ½åŠ›ç¡®å®åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°éå¸¸å¥½ã€‚</p><p>ï¼ˆä½¿ç”¨Cè¯­è¨€ç¼–å†™ï¼‰</p></blockquote><h3 id="3ã€é…ç½®æ­å»ºNginxï¼ˆLinuxç³»ç»Ÿç¯å¢ƒä¸‹ï¼‰"><a href="#3ã€é…ç½®æ­å»ºNginxï¼ˆLinuxç³»ç»Ÿç¯å¢ƒä¸‹ï¼‰" class="headerlink" title="3ã€é…ç½®æ­å»ºNginxï¼ˆLinuxç³»ç»Ÿç¯å¢ƒä¸‹ï¼‰"></a>3ã€é…ç½®æ­å»ºNginxï¼ˆLinuxç³»ç»Ÿç¯å¢ƒä¸‹ï¼‰</h3><p><code>èµ„æº</code>ï¼š</p><p>Tengineï¼ˆæ¨èï¼‰ï¼š<a href="http://tengine.taobao.org/download/tengine-2.2.3.tar.gz" target="_blank" rel="noopener">Tengine-2.2.3.tar.gz</a> </p><p>â€‹                                 <a href="http://tengine.taobao.org/download.html" target="_blank" rel="noopener">å…¶ä»–ç‰ˆæœ¬</a></p><p>nginxï¼š<a href="http://nginx.org/download/nginx-1.8.1.zip" target="_blank" rel="noopener">nginx/Windows-1.8.1</a></p><p>1ï¼‰å®‰è£…ä¾èµ–</p><blockquote><p>å‘½ä»¤ï¼šyum -y install gcc openssl-devel pcre-devel zlib-devel</p></blockquote><p>2ï¼‰è§£å‹taråŒ…</p><blockquote><p>å‘½ä»¤ï¼štar -zxvf Tengine-2.2.3.tar.gz</p></blockquote><p>3ï¼‰configureé…ç½®ï¼šåœ¨è§£å‹åçš„æºç ç›®å½•ä¸­</p><p>ä¸¤ç§æ–¹æ¡ˆï¼š</p><blockquote><ul><li>å‘½ä»¤ï¼š ./configure</li></ul><p>é»˜è®¤é…ç½®/usr/soft/nginx</p></blockquote><blockquote><ul><li>å‘½ä»¤ : ./configure â€“profix==/usr/soft/nginx</li></ul><p>é…ç½®åœ¨æŒ‡å®šè·¯å¾„</p></blockquote><p>4ï¼‰ç¼–è¯‘å¹¶å®‰è£…(é»˜è®¤ä¼šåœ¨/usr/localä¸‹ç”Ÿæˆnginxç›®å½•)</p><blockquote><p>make &amp;&amp; make install</p></blockquote><p>5ï¼‰é…ç½®nginxæœåŠ¡</p><p>åœ¨/etc/rc.d/init.d/ç›®å½•ä¸­å»ºç«‹æ–‡æœ¬æ–‡ä»¶nginx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">#</span><br><span class="line"># nginx - this script starts and stops the nginx daemon</span><br><span class="line">#</span><br><span class="line"># chkconfig:   - 85 15 </span><br><span class="line"># description:  Nginx is an HTTP(S) server, HTTP(S) reverse \</span><br><span class="line">#               proxy and IMAP/POP3 proxy server</span><br><span class="line"># processname: nginx</span><br><span class="line"># config:      /etc/nginx/nginx.conf</span><br><span class="line"># config:      /etc/sysconfig/nginx</span><br><span class="line"># pidfile:     /var/run/nginx.pid</span><br><span class="line"> </span><br><span class="line"># Source function library.</span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"> </span><br><span class="line"># Source networking configuration.</span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"> </span><br><span class="line"># Check that networking is up.</span><br><span class="line">[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0</span><br><span class="line"> </span><br><span class="line">nginx=&quot;/usr/local/nginx/sbin/nginx&quot;</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line"> </span><br><span class="line">NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot;</span><br><span class="line"> </span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line"> </span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line"> </span><br><span class="line">make_dirs() &#123;</span><br><span class="line">   # make required directories</span><br><span class="line">   user=`nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:&quot; | sed &apos;s/[^*]*--user=\([^ ]*\).*/\1/g&apos; -`</span><br><span class="line">   options=`$nginx -V 2&gt;&amp;1 | grep &apos;configure arguments:&apos;`</span><br><span class="line">   for opt in $options; do</span><br><span class="line">       if [ `echo $opt | grep &apos;.*-temp-path&apos;` ]; then</span><br><span class="line">           value=`echo $opt | cut -d &quot;=&quot; -f 2`</span><br><span class="line">           if [ ! -d &quot;$value&quot; ]; then</span><br><span class="line">               # echo &quot;creating&quot; $value</span><br><span class="line">               mkdir -p $value &amp;&amp; chown -R $user $value</span><br><span class="line">           fi</span><br><span class="line">       fi</span><br><span class="line">   done</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">start() &#123;</span><br><span class="line">    [ -x $nginx ] || exit 5</span><br><span class="line">    [ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">    make_dirs</span><br><span class="line">    echo -n $&quot;Starting $prog: &quot;</span><br><span class="line">    daemon $nginx -c $NGINX_CONF_FILE</span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ $retval -eq 0 ] &amp;&amp; touch $lockfile</span><br><span class="line">    return $retval</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">stop() &#123;</span><br><span class="line">    echo -n $&quot;Stopping $prog: &quot;</span><br><span class="line">    killproc $prog -QUIT</span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">    return $retval</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">restart() &#123;</span><br><span class="line">    configtest || return $?</span><br><span class="line">    stop</span><br><span class="line">    sleep 1</span><br><span class="line">    start</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">reload() &#123;</span><br><span class="line">    configtest || return $?</span><br><span class="line">    echo -n $&quot;Reloading $prog: &quot;</span><br><span class="line">    killproc $nginx -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    echo</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">force_reload() &#123;</span><br><span class="line">    restart</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">configtest() &#123;</span><br><span class="line">  $nginx -t -c $NGINX_CONF_FILE</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">rh_status() &#123;</span><br><span class="line">    status $prog</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">    rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">    start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    restart|configtest)</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">    condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">            ;;</span><br><span class="line">    *)</span><br><span class="line">        echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot;</span><br><span class="line">        exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>6ï¼‰ä¿®æ”¹nginxæ–‡ä»¶çš„æƒé™</p><blockquote><p>å‘½ä»¤ ï¼š chmod +x nginx</p></blockquote><p>7ï¼‰å°†æ–‡ä»¶æ·»åŠ åˆ°ç³»ç»ŸæœåŠ¡ä¸­</p><blockquote><p>chkconfig â€“add nginx</p></blockquote><p>8ï¼‰éªŒè¯</p><blockquote><p>chkconfig â€“list nginx</p></blockquote><p>9ï¼‰å¯åŠ¨|åœæ­¢æœåŠ¡</p><blockquote><p>service nginx start|stop</p></blockquote><h3 id="4ã€è´Ÿè½½å‡è¡¡é…ç½®"><a href="#4ã€è´Ÿè½½å‡è¡¡é…ç½®" class="headerlink" title="4ã€è´Ÿè½½å‡è¡¡é…ç½®"></a>4ã€è´Ÿè½½å‡è¡¡é…ç½®</h3><p>1ï¼‰ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p><blockquote><p>å‘½ä»¤ ï¼š vim /usr/local/nginx/conf/nginx.conf</p></blockquote><p>å…·ä½“è´Ÿè½½é…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰ï¼ˆé»˜è®¤ï¼‰è½®è¯¢è´Ÿè½½</span><br><span class="line">http &#123; </span><br><span class="line">    upstream shsxt&#123; </span><br><span class="line">        server node01; </span><br><span class="line">        server node02; </span><br><span class="line">         &#125; </span><br><span class="line">    server &#123; </span><br><span class="line">        listen 80; </span><br><span class="line">server_name  localhost;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://shsxt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line">ï¼ˆ2ï¼‰åŠ æƒè´Ÿè½½</span><br><span class="line">upstream shsxt&#123;</span><br><span class="line">     server sxt1.com weight=3;</span><br><span class="line">     server sxt2.com;</span><br><span class="line">&#125;</span><br><span class="line">(3)æœ€å°‘è¿æ¥è´Ÿè½½</span><br><span class="line">upstream shsxt&#123;</span><br><span class="line">     least_conn;</span><br><span class="line">     servcer node01;</span><br><span class="line">     server node02;</span><br><span class="line">&#125;</span><br><span class="line">(4)ip_hashè´Ÿè½½ï¼ˆä¿æŒå›è¯æŒä¹…æ€§ï¼‰</span><br><span class="line">upstream shsxt&#123;</span><br><span class="line">     ip_hash;</span><br><span class="line">     server node01;</span><br><span class="line">     server node02;</span><br><span class="line">&#125;</span><br><span class="line">3. è®¿é—®æ§åˆ¶ï¼ˆallow ä»£è¡¨å…è®¸å…¶è®¿é—®ï¼Œdeny ç¦æ­¢å…¶è®¿é—®ï¼‰</span><br><span class="line">location / &#123;</span><br><span class="line">     deny 192.168.4.29;</span><br><span class="line">     allow 192.168.198.0/24;</span><br><span class="line">     deny all;</span><br><span class="line">     proxy_pass http://shsxt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5ã€sessionä¸€è‡´æ€§é—®é¢˜"><a href="#5ã€sessionä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="5ã€sessionä¸€è‡´æ€§é—®é¢˜"></a>5ã€sessionä¸€è‡´æ€§é—®é¢˜</h3><blockquote><p>å®ç°sessionå…±äº«å³å¯è§£å†³è¿™ä¸ªé—®é¢˜</p><p>å®ç°å·¥å…·ï¼šmemcached</p><p>ä½œç”¨ï¼šä¸“é—¨ç®¡ç†sessionçš„å·¥å…·</p></blockquote><p>1ï¼‰åœ¨tomcatçš„libç›®å½•ä¸‹å¯¼å…¥è¿æ¥memcachedæ‰€éœ€çš„jaråŒ…</p><blockquote><p>asm-3.2.jar</p><p>kryo-1.04.jar</p><p>kryo-serializers-0.11.jar</p><p>memcached-session-manager-1.7.0.jar</p><p>memcached-session-manager-tc7-1.8.1.jar</p><p>minlog-1.2.jar</p><p>msm-kryo-serializer-1.7.0.jar</p><p>reflectasm-1.01.jar</p><p>spymemcached-2.7.3.jar</p></blockquote><p>2ï¼‰åœ¨tomcatçš„confç›®å½•ä¸‹ç¼–è¾‘context.xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Manager</span> <span class="attr">className</span>=<span class="string">"de.javakaffee.web.msm.MemcachedBackupSessionManager"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">memcachedNodes</span>=<span class="string">"n1:192.168.17.9:11211"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">sticky</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">lockingMode</span>=<span class="string">"auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">sessionBackupAsync</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">requestUriIgnorePattern</span>=<span class="string">".*\.(ico|png|gif|jpg|css|js)$"</span></span></span><br><span class="line"><span class="tag"><span class="attr">sessionBackupTimeout</span>=<span class="string">"1000"</span> <span class="attr">transcoderFactoryClass</span>=<span class="string">"de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory"</span> /&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ï¼ˆæ³¨æ„ï¼šé…ç½®memcachedNodeså±æ€§æ—¶ï¼Œé…ç½®å…¶ipå’Œç«¯å£ï¼Œé»˜è®¤ä¸º11211ï¼Œå­˜åœ¨å¤šä¸ªmemecacahedæ•°æ®åº“æ—¶ï¼Œç”¨éƒ½é€—å·éš”å¼€ï¼‰</p></blockquote><p>3ï¼‰éªŒè¯sessionï¼šä¿®æ”¹index.jspï¼ˆåœ¨/usr/soft/apache-tomcat-8.5.24/webapps/ROOT/index.jspï¼‰ï¼Œå–sessionidçœ‹ä¸€çœ‹</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SessionID:&lt;%=session.getId()%&gt;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">SessionIP:&lt;%=request.getServerName()%&gt;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">&lt;h1&gt;tomcat1&lt;/h1&gt;</span><br></pre></td></tr></table></figure><p>4)å®‰è£…ï¼š memcached</p><blockquote><p>å‘½ä»¤ ï¼šyum install memcached â€“y</p></blockquote><p>5ï¼‰å¯åŠ¨memcached (IPåœ°å€ä¸ºmemcachedå®‰è£…çš„èŠ‚ç‚¹çš„IPåœ°å€)</p><blockquote><p>memcached -d -m 128m -p 11211 -l 192.168.198.128 -u root -P /tmp/</p></blockquote><p>6ï¼‰åœ¨æµè§ˆå™¨æ®µè®¿é—®æœåŠ¡å™¨ï¼Œé»˜è®¤ç«¯å£ ï¼š 80 ï¼Œå¯¹æ­¤æµ‹éªŒï¼Œå°±ä¼šå‘ç°sessionIDä¸ä¼šæ”¹å˜</p><h2 id="ä¸‰ã€è™šæ‹Ÿä¸»æœº"><a href="#ä¸‰ã€è™šæ‹Ÿä¸»æœº" class="headerlink" title="ä¸‰ã€è™šæ‹Ÿä¸»æœº"></a>ä¸‰ã€è™šæ‹Ÿä¸»æœº</h2><h3 id="1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿä¸»æœºï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿä¸»æœºï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿä¸»æœºï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿä¸»æœºï¼Ÿ</h3><p>ï¼ˆ1ï¼‰æ˜¯æŒ‡åœ¨ç½‘ç»œæœåŠ¡å™¨ä¸Šåˆ†å‡ºä¸€å®šçš„ç£ç›˜ç©ºé—´ï¼Œç§Ÿç»™ç”¨æˆ·ä»¥æ”¾ç½®ç«™ç‚¹ä»¥åŠåº”ç”¨ç©ºé—´ï¼Œå¹¶æä¾›å¿…è¦çš„å­˜å‚¨å’Œä¼ è¾“åŠŸèƒ½ã€‚</p><p>ï¼ˆ2ï¼‰æ˜¯è¢«è™šæ‹ŸåŒ–çš„é€»è¾‘ä¸»æœºï¼Œä¹Ÿå¯ç†è§£ä¸ºå°±æ˜¯æŠŠä¸€å°ç‰©ç†æœåŠ¡å™¨åˆ’åˆ†æˆå¤šä¸ªâ€œè™šæ‹Ÿâ€œçš„æœåŠ¡å™¨ï¼Œå„ä¸ªè™šæ‹Ÿä¸»æœºä¹‹é—´å®Œå…¨ç‹¬ç«‹ï¼Œå¯¹å¤–ç•Œå‘ˆç°çš„çŠ¶æ€ä¹ŸåŒå•ç‹¬ç‰©ç†ä¸»æœºè¡¨ç°å®Œå…¨ç›¸åŒã€‚</p><h3 id="2ã€è™šæ‹Ÿä¸»æœ‰å•¥ç‰¹ç‚¹ï¼Ÿ"><a href="#2ã€è™šæ‹Ÿä¸»æœ‰å•¥ç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="2ã€è™šæ‹Ÿä¸»æœ‰å•¥ç‰¹ç‚¹ï¼Ÿ"></a>2ã€è™šæ‹Ÿä¸»æœ‰å•¥ç‰¹ç‚¹ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰å¤šå°è™šæ‹Ÿä¸»æœºå…±äº«ä¸€å°çœŸå®ä¸»æœºèµ„æºï¼Œå¤§å¹…åº¦é™ä½äº†ç¡¬ä»¶ã€ç½‘ç»œç»´æŠ¤ã€é€šä¿¡çº¿è·¯ç­‰çš„è´¹ç”¨</p><p>ï¼ˆ2ï¼‰ä¹Ÿå¤§å¤§ç®€åŒ–äº†æœåŠ¡å™¨ç®¡ç†çš„å¤æ‚æ€§ï¼›</p><h3 id="3ã€è™šæ‹Ÿä¸»æœºæœ‰å“ªäº›ç±»åˆ«ï¼Ÿ"><a href="#3ã€è™šæ‹Ÿä¸»æœºæœ‰å“ªäº›ç±»åˆ«ï¼Ÿ" class="headerlink" title="3ã€è™šæ‹Ÿä¸»æœºæœ‰å“ªäº›ç±»åˆ«ï¼Ÿ"></a>3ã€è™šæ‹Ÿä¸»æœºæœ‰å“ªäº›ç±»åˆ«ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰åŸºäºåŸŸå</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">http &#123; </span><br><span class="line">    upstream shsxt&#123; </span><br><span class="line">        server node01; </span><br><span class="line">        server node02; </span><br><span class="line">     &#125; </span><br><span class="line">upstream bjsxt&#123; </span><br><span class="line">        server node03; </span><br><span class="line">     &#125; </span><br><span class="line">     </span><br><span class="line">     server &#123;    </span><br><span class="line">            listen 80; </span><br><span class="line">            //è®¿é—®sxt2.comçš„æ—¶å€™ï¼Œä¼šæŠŠè¯·æ±‚å¯¼åˆ°bjsxtçš„æœåŠ¡å™¨ç»„é‡Œ</span><br><span class="line">            server_name  sxt2.com;</span><br><span class="line">            location / &#123;</span><br><span class="line">                proxy_pass http://bjsxt;</span><br><span class="line">            &#125;</span><br><span class="line">      &#125; </span><br><span class="line">      server &#123; </span><br><span class="line">            listen 80; </span><br><span class="line">           //è®¿é—®sxt1.comçš„æ—¶å€™ï¼Œä¼šæŠŠè¯·æ±‚å¯¼åˆ°shsxtçš„æœåŠ¡å™¨ç»„é‡Œ</span><br><span class="line">            server_name  sxt1.com; </span><br><span class="line">            location / &#123;</span><br><span class="line">                proxy_pass http://shsxt;</span><br><span class="line">            &#125;</span><br><span class="line">      &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p></blockquote><blockquote><p>ï¼ˆ1ï¼‰åŸºäºåŸŸåçš„è™šæ‹Ÿæœºä¸»æœº åœ¨æ¨¡æ‹Ÿåº”ç”¨åœºæ™¯æ—¶ï¼Œéœ€è¦åœ¨windowsç³»ç»Ÿçš„hostsæ–‡ä»¶é‡Œé…ç½®åŸŸåæ˜ å°„ã€‚</p><p>ï¼ˆC:\Windows\System32\drivers\etc\hosts     ç»™IPå–åˆ«åï¼‰</p><p>å¦‚ï¼š192.168.198.130   sxt1.com</p></blockquote><blockquote><p>ï¼ˆ2ï¼‰æ¯å°æœåŠ¡å™¨çš„Tomcatçš„ç«¯å£ä¸ä¸é…ç½®ä¸­çš„listenä¸€è‡´ï¼Œé‚£ä¹ˆwindowsç³»ç»Ÿæµè§ˆå™¨è®¿é—®æ—¶ï¼Œéœ€è¦åŠ ä¸ŠTomcatçš„ç«¯å£ï¼Œï¼ˆ192.168.198.128ï¼š8080ï¼‰</p><p>â€‹         å¦‚æœä¸€è‡´ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¸åŠ Tomcatçš„ç«¯å£å› ä¸ºNginxæœåŠ¡å™¨é»˜è®¤ç«¯å£ä¸º80</p></blockquote><p>ï¼ˆ2ï¼‰åŸºäºç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">http &#123; </span><br><span class="line">    upstream shsxt&#123; </span><br><span class="line">        server node01; </span><br><span class="line">        server node02; </span><br><span class="line">     &#125; </span><br><span class="line">upstream bjsxt&#123; </span><br><span class="line">        server node03</span><br><span class="line">    &#125; </span><br><span class="line"> server &#123; </span><br><span class="line">       //å½“è®¿é—®nginxçš„80ç«¯å£æ—¶ï¼Œå°†è¯·æ±‚å¯¼ç»™bjsxtç»„</span><br><span class="line">        listen 8080; </span><br><span class="line">        server_name 192.168.198.128;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://bjsxt;</span><br><span class="line">        &#125;</span><br><span class="line">&#125; </span><br><span class="line">  server &#123; </span><br><span class="line">           //å½“è®¿é—®nginxçš„81ç«¯å£æ—¶ï¼Œå°†è¯·æ±‚å¯¼ç»™shsxtç»„</span><br><span class="line">            listen 81; </span><br><span class="line">            server_name 192.168.198.128;  //nginxæœåŠ¡å™¨çš„IP</span><br><span class="line">            location / &#123;</span><br><span class="line">                proxy_pass http://shsxt;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰åŸºäºIP  ï¼šï¼ˆä¸å¸¸ç”¨ï¼‰</p><h2 id="å››ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><a href="#å››ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="headerlink" title="å››ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"></a>å››ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h2><h3 id="1ã€æ­£å‘ä»£ç†"><a href="#1ã€æ­£å‘ä»£ç†" class="headerlink" title="1ã€æ­£å‘ä»£ç†"></a>1ã€æ­£å‘ä»£ç†</h3><p>ç†è§£ï¼š</p><blockquote><p>ä»£ç†å®¢æˆ·ç«¯ï¼Œå¦‚é€šè¿‡VPN ï¼Œéšè—å®¢æˆ·ç«¯ï¼Œè®¿é—®ç›®æ ‡æœåŠ¡å™¨ï¼ˆæœåŠ¡ç«¯å¯è§ï¼‰</p></blockquote><p>ä¸¾ä¾‹ï¼š</p><blockquote><p>å›½å†…ä¸èƒ½ç›´æ¥è®¿é—®è°·æ­Œï¼Œä½†æ˜¯å¯ä»¥è®¿é—®ä»£ç†æœåŠ¡å™¨ï¼Œé€šè¿‡ä»£ç†æœåŠ¡å™¨å¯ä»¥è®¿é—®è°·æ­Œã€‚ï¼ˆå°±æ˜¯ç¿»å¢™ï¼‰</p><p>ä½†æ˜¯ï¼Œéœ€è¦å®¢æˆ·ç«¯å¿…é¡»è®¾ç½®æ­£å‘ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶ä¸”è¦çŸ¥é“æ­£å‘ä»£ç†æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£</p></blockquote><h3 id="2ã€åå‘ä»£ç†"><a href="#2ã€åå‘ä»£ç†" class="headerlink" title="2ã€åå‘ä»£ç†"></a>2ã€åå‘ä»£ç†</h3><p>ç†è§£ï¼š</p><blockquote><p>ä»£ç†æœåŠ¡ç«¯ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼ˆå¦‚Nginxï¼‰ï¼Œéšè—æœåŠ¡ç«¯ï¼Œåˆ†å‘å®¢æˆ·ç«¯çš„ä¸åŒè¯·æ±‚ï¼ˆå®¢æˆ·ç«¯å¯è§ï¼‰åˆ°å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨</p></blockquote><p>ä¸¾ä¾‹ï¼š</p><blockquote><p>å¦‚æˆ‘ä»¬è®¿é—®<a href="http://www.baidu.comçš„æ—¶å€™ï¼Œå®ƒèƒŒåæœ‰å¾ˆå¤šå°æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªä¸€å°æœåŠ¡å™¨ç»™ä½ æä¾›çš„æœåŠ¡ï¼Œåªè¦çŸ¥é“åå‘ä»£ç†æœåŠ¡å™¨æ˜¯è°å°±å¥½äº†ï¼Œåå‘ä»£ç†æœåŠ¡å™¨å°±ä¼šæŠŠæˆ‘ä»¬çš„è¯·æ±‚è½¬å‘åˆ°çœŸå®æœåŠ¡å™¨ä¸Šã€‚" target="_blank" rel="noopener">www.baidu.comçš„æ—¶å€™ï¼Œå®ƒèƒŒåæœ‰å¾ˆå¤šå°æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªä¸€å°æœåŠ¡å™¨ç»™ä½ æä¾›çš„æœåŠ¡ï¼Œåªè¦çŸ¥é“åå‘ä»£ç†æœåŠ¡å™¨æ˜¯è°å°±å¥½äº†ï¼Œåå‘ä»£ç†æœåŠ¡å™¨å°±ä¼šæŠŠæˆ‘ä»¬çš„è¯·æ±‚è½¬å‘åˆ°çœŸå®æœåŠ¡å™¨ä¸Šã€‚</a></p></blockquote><p>Nginxå°±æ˜¯æ€§èƒ½å¾ˆå¥½çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”¨æ¥ä½œè´Ÿè½½å‡è¡¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´Ÿè½½å‡è¡¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹åŠ¨å®‰è£…mavenåæ ‡ä¾èµ–</title>
      <link href="/2018/12/28/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85maven%E5%9D%90%E6%A0%87%E4%BE%9D%E8%B5%96/"/>
      <url>/2018/12/28/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85maven%E5%9D%90%E6%A0%87%E4%BE%9D%E8%B5%96/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€äº‹ä»¶åŸå› ï¼š"><a href="#ä¸€ã€äº‹ä»¶åŸå› ï¼š" class="headerlink" title="ä¸€ã€äº‹ä»¶åŸå› ï¼š"></a>ä¸€ã€äº‹ä»¶åŸå› ï¼š</h2><p>å­¦ä¹ quartzæ¡†æ¶æ—¶ï¼Œåœ¨mavené¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ quartzæ‰€éœ€è¦çš„åæ ‡ä¾èµ–æ—¶ï¼Œæ˜¾ç¤ºjaråŒ…ä¸å­˜åœ¨ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æç¤ºï¼š"Dependency 'xxxxâ€˜ not found"ï¼Œ</span><br><span class="line">å¹¶ä¸”æ·»åŠ çš„å¦‚ä¸‹ä¸¤ä¸ªåæ ‡ä¾èµ–å‡æŠ¥çº¢ã€‚</span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz-scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        Â <span class="comment">&lt;!-- å·¥å…· --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz-scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz-jobs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><table><thead><tr><th>1ã€mavené¡¹ç›®æ‰€éœ€è¦çš„jaråŒ…å‡å­˜æ”¾åœ¨mavençš„F:\m2\repository(é¡¹ç›®æ‰€éœ€çš„jaråŒ…ä»“åº“)æ–‡ä»¶å¤¹ä¸­</th></tr></thead><tbody><tr><td>2ã€åœ¨F:\apache-maven-3.5.4\confçš„settings.xmlæ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹è®¾ç½®ï¼šï¼ˆç”±äºä½¿ç”¨è¿œç¨‹ä»“åº“å¤ªæ…¢ï¼Œé˜¿é‡Œäº‘ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé•œåƒä»“åº“ï¼Œä¾¿äºæˆ‘ä»¬ä½¿ç”¨ï¼Œä¸”åªåŒ…å«centralä»“åº“ä¸­çš„jarï¼‰</td></tr></tbody></table><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–‡ä»¶ä¸­åŸæœ‰çš„é…ç½®ï¼šè¿œç¨‹ä»“åº“---&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>mirrorId<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>repositoryId<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Human Readable Name for this Mirror.<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://my.repository.com/repo/path<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–‡ä»¶ä¸­è‡ªå·±æ‰‹åŠ¨é…ç½®ï¼šé˜¿é‡Œé•œåƒä»“åº“---&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\Administrator\Desktop\1.jpg" alt=""></p><table><thead><tr><th>3.å¯æ˜¯æˆ‘ä»¬åœ¨<a href="https://mvnrepository.com/ï¼ˆmavenä»“åº“ï¼‰ä¸­å‘ç°æœ‰æˆ‘ä»¬è¦çš„jaråŒ…ï¼Œè€Œä¸”å°±åœ¨Centralä»“åº“é‡Œï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¾ˆå¥‡æ€ªäº†ï¼Œåæ¥å°±é€‰æ‹©è¿˜æ˜¯æ‰‹åŠ¨å®‰è£…jaråŒ…å§" target="_blank" rel="noopener">https://mvnrepository.com/ï¼ˆmavenä»“åº“ï¼‰ä¸­å‘ç°æœ‰æˆ‘ä»¬è¦çš„jaråŒ…ï¼Œè€Œä¸”å°±åœ¨Centralä»“åº“é‡Œï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¾ˆå¥‡æ€ªäº†ï¼Œåæ¥å°±é€‰æ‹©è¿˜æ˜¯æ‰‹åŠ¨å®‰è£…jaråŒ…å§</a></th></tr></thead><tbody><tr><td>ï¼ˆå¦‚æœæœ‰å°ä¼™ä¼´æœ‰åˆ«çš„è§£å†³æ–¹æ¡ˆï¼Œè¿˜è¯·æŒ‡ç‚¹ä¸€äºŒã€‚ï¼‰</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€è§£å†³æ–¹æ¡ˆ"><a href="#äºŒã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="äºŒã€è§£å†³æ–¹æ¡ˆ"></a>äºŒã€è§£å†³æ–¹æ¡ˆ</h2><p>1ã€é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä»maven  Repositoryä¸­ä¸‹è½½æˆ‘ä»¬éœ€è¦çš„jaråŒ…ï¼ˆéœ€è¦çš„ä¸¤ä¸ªjaråŒ…ï¼Œä¸‹è½½åŸç†ç›¸åŒï¼‰</p><p><img src="C:\Users\Administrator\Desktop\2.jpg" alt=""></p><p>2ã€æ³¨æ„æˆ‘ä»¬çš„mavenå®‰è£…ï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œæ‰èƒ½åœ¨dosçª—å£ï¼ŒæŒ‡ä»¤å®‰è£…jaråŒ…</p><p><img src="C:\Users\Administrator\Desktop\4.jpg" alt=""></p><p>å› ä¸ºæˆ‘ä¹‹å‰æŸ¥èµ„æ–™æ—¶ï¼Œæœ‰å°ä¼™ä¼´è¯´ï¼Œjavaçš„ç¯å¢ƒå˜é‡é…ç½®ä¹Ÿä¼šå½±å“ï¼Œæ‰€ä»¥ï¼Œæˆ‘åœ¨è¿™é‡Œä¹ŸæŠŠjavaçš„ç¯å¢ƒå˜é‡é…ç½®ä¹Ÿè´´å‡ºæ¥</p><p><img src="C:\Users\Administrator\Desktop\5.jpg" alt="1"><span class="img-alt">1</span></p><p><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1544699916763.png" alt="1544699916763"><span class="img-alt">1544699916763</span></p><p><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1544699989775.png" alt="1544699989775"><span class="img-alt">1544699989775</span></p><table><thead><tr><th>JAVA_HOME</th></tr></thead><tbody><tr><td>F:\Java\jdk1.8.0_131ï¼ˆ  æ ¹æ®è‡ªå·±çš„jdkå®‰è£…ç›®å½•ï¼‰</td></tr><tr><td><strong>CLASSPATH</strong></td></tr><tr><td>.;%JAVA_HOME%\lib;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar</td></tr><tr><td><strong>MAVEN_HOME</strong></td></tr><tr><td>F:\apache-maven-3.5.4ï¼ˆ æ ¹æ®è‡ªå·±mavenå®‰è£…ç›®å½•ï¼‰</td></tr><tr><td><strong>Path</strong>ï¼ˆæ³¨æ„é…ç½®çš„æ—¶å€™ï¼Œä¸€å®šè¦å’Œé…ç½®homeæ—¶çš„å˜é‡åä¸€è‡´ï¼Œå¦‚MAVEN_HOME,æˆ‘é…ç½®æˆäº†%MVN_HOME%\bin;ï¼‰</td></tr><tr><td>%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;%MYSQL_HOME%\bin;%MAVEN_HOME%\bin;</td></tr></tbody></table><p>é…ç½®è¿™äº›ç¯å¢ƒå˜é‡ï¼Œåœ¨dosçª—å£æ‰èƒ½ä½¿java  ï¼Œmvn  ä¹‹ç±»çš„æŒ‡ä»¤å¯ä»¥ç”¨ï¼›</p><p>å¦åˆ™ä¼šå‡ºç°å¦‚ä¸‹æ˜¾ç¤ºã€‚</p><table><thead><tr><th>â€˜mvnâ€™ ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åº</th></tr></thead><tbody><tr><td>(è¿™å°±æ˜¯ç¯å¢ƒå˜é‡æ²¡æœ‰é…æˆåŠŸçš„ç»“æœ)</td></tr></tbody></table><p>3.å®‰è£…</p><table><thead><tr><th>C:\Users\Administrator&gt;mvn -v</th></tr></thead><tbody><tr><td><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1544701045091.png" alt="1544701045091"><span class="img-alt">1544701045091</span></td></tr><tr><td>C:\Users\Administrator&gt;mvn install:install-file -Dfile=F:/apache-maven-3.5.4/m2/quartz-2.3.0.jarï¼ˆjaråŒ…æ‰€åœ¨è·¯å¾„ï¼‰ -DgroupId=org.quartz-scheduler -DartifactId=quartz -Dversion=2.3.0 -Dpackaging=jar</td></tr><tr><td>ï¼ˆæ ¹æ®ä¸‹é¢æ‰€ç¤ºçš„é…ç½®groupIdã€artifactIdã€versionï¼‰</td></tr></tbody></table><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz-scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1544702128551.png" alt="1544702128551"><span class="img-alt">1544702128551</span></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œå®‰è£…æˆåŠŸã€‚</p><p><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1544702179172.png" alt="1544702179172"><span class="img-alt">1544702179172</span></p>]]></content>
      
      
      <categories>
          
          <category> maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨Linuxå‘½ä»¤çš„å­¦ä¹ ï¼ˆäºŒï¼‰</title>
      <link href="/2018/12/28/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2018/12/28/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>â€‹<br>â€‹ </p><p>[TOC]</p><h2 id="ä¸€ã€ç£ç›˜æŒ‡ä»¤"><a href="#ä¸€ã€ç£ç›˜æŒ‡ä»¤" class="headerlink" title="ä¸€ã€ç£ç›˜æŒ‡ä»¤"></a>ä¸€ã€ç£ç›˜æŒ‡ä»¤</h2><ol><li>æŸ¥çœ‹ç¡¬ç›˜ä¿¡æ¯</li></ol><blockquote><p>å‘½ä»¤ï¼šdf</p></blockquote><p><code>ï¼ˆé»˜è®¤å¤§å°ä»¥kbæ˜¾ç¤ºï¼‰ df -kï¼ˆä»¥kbä¸ºå•ä½ï¼‰ df -mï¼ˆ ä»¥mbä¸ºå•ä½ï¼‰ df â€“h ï¼ˆæ˜“äºé˜…è¯»ï¼‰</code></p><ol start="2"><li>æŸ¥çœ‹æ–‡ä»¶/ç›®å½•çš„å¤§å°</li></ol><blockquote><p>å‘½ä»¤ï¼šdu filename|foldername</p></blockquote><p><code>ï¼ˆé»˜è®¤å•ä½ä¸ºkbï¼‰-k    kbå•ä½ -m    mbå•ä½ -a æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•  -h æ›´æ˜“äºé˜…è¯»â€‹    --max-depth=0    ç›®å½•æ·±åº¦</code></p><h2 id="äºŒã€ç½‘ç»œæŒ‡ä»¤"><a href="#äºŒã€ç½‘ç»œæŒ‡ä»¤" class="headerlink" title="äºŒã€ç½‘ç»œæŒ‡ä»¤"></a>äºŒã€ç½‘ç»œæŒ‡ä»¤</h2><ol><li>æŸ¥çœ‹ç½‘ç»œé…ç½®ä¿¡æ¯</li></ol><blockquote><p>å‘½ä»¤:ifconfig</p></blockquote><ol start="2"><li>æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºçš„è¿é€šæ€§</li></ol><blockquote><p>å‘½ä»¤ï¼šping remote_ip     </p></blockquote><p><code>ctrl + c :ç»“æŸpingè¿›ç¨‹</code></p><ol start="3"><li>æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯</li></ol><blockquote><p>å‘½ä»¤ï¼šnetstat</p></blockquote><p><code>æŸ¥çœ‹ç«¯å£å·ï¼ˆæ˜¯å¦è¢«å ç”¨ï¼‰(1)ã€lsof -i:ç«¯å£å·  ï¼ˆéœ€è¦å…ˆå®‰è£…lsofï¼‰(2)ã€netstat -tunlp|grep ç«¯å£å·</code></p><ol start="4"><li>æµ‹è¯•è¿œç¨‹ä¸»æœºçš„ç½‘ç»œç«¯å£</li></ol><blockquote><p>å‘½ä»¤ï¼š telnet ip  port   ï¼ˆéœ€è¦å…ˆå®‰è£…telnetï¼‰</p></blockquote><p><code>æµ‹è¯•æˆåŠŸåï¼ŒæŒ‰ctrl + ] é”®ï¼Œç„¶åå¼¹å‡ºtelnet&gt;æ—¶ï¼Œå†æŒ‰qé€€å‡º</code></p><ol start="5"><li>httpè¯·æ±‚æ¨¡æ‹Ÿ</li></ol><blockquote><p>curl -X get <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>   æ¨¡æ‹Ÿè¯·æ±‚ç™¾åº¦</p></blockquote><h2 id="ä¸‰ã€ç³»ç»Ÿç®¡ç†æŒ‡ä»¤"><a href="#ä¸‰ã€ç³»ç»Ÿç®¡ç†æŒ‡ä»¤" class="headerlink" title="ä¸‰ã€ç³»ç»Ÿç®¡ç†æŒ‡ä»¤"></a>ä¸‰ã€ç³»ç»Ÿç®¡ç†æŒ‡ä»¤</h2><ol><li>ç”¨æˆ·æ“ä½œ</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    æ“ä½œ            å‘½ä»¤</span><br><span class="line">åˆ›å»ºç”¨æˆ·       useradd|adduser username</span><br><span class="line">ä¿®æ”¹å¯†ç        passwd username</span><br><span class="line">åˆ é™¤ç”¨æˆ·       userdel â€“r username</span><br><span class="line">ä¿®æ”¹ç”¨æˆ·ï¼ˆå·²ä¸‹çº¿ï¼‰ï¼š</span><br><span class="line">                 ä¿®æ”¹ç”¨æˆ·å: usermod â€“l new_name oldname</span><br><span class="line">                    é”å®šè´¦æˆ·: usermod â€“L username</span><br><span class="line">                    è§£é™¤è´¦æˆ·ï¼š usermod â€“U username</span><br><span class="line">æŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·ä»…root ç”¨æˆ·ï¼šwhoami   | cat /etc/shadow</span><br><span class="line">                 æ™®é€šç”¨æˆ·ï¼šcat /etc/pqsswd</span><br></pre></td></tr></table></figure><ol start="2"><li>ç”¨æˆ·ç»„æ“ä½œ</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   æ“ä½œ            å‘½ä»¤</span><br><span class="line">   åˆ›å»ºç”¨æˆ·ç»„         groupadd groupname</span><br><span class="line">åˆ é™¤ç”¨æˆ·ç»„         groupdel groupname</span><br><span class="line">ä¿®æ”¹ç”¨æˆ·ç»„         groupmod â€“n new_name old_name</span><br><span class="line">æŸ¥çœ‹ç”¨æˆ·ç»„         groups  ï¼ˆæŸ¥çœ‹çš„æ˜¯å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç”¨æˆ·ç»„ï¼‰</span><br></pre></td></tr></table></figure><ol start="3"><li>ç”¨æˆ·+ç”¨æˆ·ç»„    </li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">     æ“ä½œ                å‘½ä»¤</span><br><span class="line">   ä¿®æ”¹ç”¨æˆ·çš„ä¸»ç»„         usermod â€“g groupname username</span><br><span class="line">ç»™ç”¨æˆ·è¿½åŠ é™„åŠ ç»„    usermod â€“G groupname username</span><br><span class="line">æŸ¥çœ‹ç”¨æˆ·ç»„ä¸­ç”¨æˆ·æ•°   cat /etc/group</span><br><span class="line">æ³¨æ„ï¼šåˆ›å»ºç”¨æˆ·æ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªå’Œç”¨æˆ·åå­—ä¸€æ ·çš„ä¸»ç»„</span><br></pre></td></tr></table></figure><ol start="4"><li>ç³»ç»Ÿæƒé™</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    æ“ä½œ                     å‘½ä»¤</span><br><span class="line"> æŸ¥çœ‹/usrä¸‹æ‰€æœ‰æƒé™   ll /usr</span><br><span class="line">                       æƒé™ç±»åˆ«rï¼ˆè¯»å–ï¼š4ï¼‰ wï¼ˆå†™å…¥ï¼š2ï¼‰ xï¼ˆæ‰§è¡Œï¼š1ï¼‰ </span><br><span class="line">                       ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œæ— æƒé™ç”¨ â€”ä»£æ›¿</span><br><span class="line">                    UGOæ¨¡å‹Uï¼ˆUserï¼‰ G(Group)  O(å…¶ä»–)</span><br><span class="line">æƒé™ä¿®æ”¹    </span><br><span class="line">                       ä¿®æ”¹æ‰€æœ‰è€…ï¼šchown username file|folder</span><br><span class="line">                (é€’å½’)ä¿®æ”¹æ‰€æœ‰è€…å’Œæ‰€å±ç»„ï¼š chown -r usernameï¼šgroupname file|folder </span><br><span class="line">                 ä¿®æ”¹æ‰€å±ç»„ï¼šchgrp groupname file|folder</span><br><span class="line">                 ä¿®æ”¹æƒé™ï¼šchmod ugo+rwx file|folder</span><br></pre></td></tr></table></figure><h2 id="å››ã€ç³»ç»Ÿé…ç½®æŒ‡ä»¤"><a href="#å››ã€ç³»ç»Ÿé…ç½®æŒ‡ä»¤" class="headerlink" title="å››ã€ç³»ç»Ÿé…ç½®æŒ‡ä»¤"></a>å››ã€ç³»ç»Ÿé…ç½®æŒ‡ä»¤</h2><p> 1.ä¿®æ”¹ä¸»æœºå</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  ç¼–è¾‘æ–‡ä»¶ï¼š      å‘½ä»¤ï¼š vim /etc/sysconfig/network</span><br><span class="line">  æ–‡ä»¶å†…å®¹ï¼š      HOSTNAME=node00</span><br><span class="line">ï¼ˆé‡å¯ç”Ÿæ•ˆ)reboot</span><br></pre></td></tr></table></figure><p> 2.DNSé…ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¼–è¾‘æ–‡ä»¶ï¼š     å‘½ä»¤ï¼švim /etc/resolv.conf</span><br><span class="line">æ–‡ä»¶å†…å®¹ï¼š     nameserver 192.168.198.0</span><br></pre></td></tr></table></figure><p> 3.sudoæƒé™é…ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">   æ“ä½œ            å‘½ä»¤</span><br><span class="line">ç¼–è¾‘æƒé™é…ç½®æ–‡ä»¶ï¼š    vim /etc/sudoers</span><br><span class="line">æ ¼å¼ï¼š</span><br><span class="line">        æˆæƒç”¨æˆ· ä¸»æœº=[(åˆ‡æ¢åˆ°å“ªäº›ç”¨æˆ·æˆ–ç”¨æˆ·ç»„)] [æ˜¯å¦éœ€è¦å¯†ç éªŒè¯] è·¯å¾„/å‘½ä»¤</span><br><span class="line">ä¸¾ä¾‹ï¼š</span><br><span class="line">        test  ALL=(root)  /usr/bin/yum,/sbin/service</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">        testç”¨æˆ·å°±å¯ä»¥ç”¨yumå’Œservieå‘½ä»¤ï¼Œ</span><br><span class="line">   ä½†æ˜¯ï¼Œä½¿ç”¨æ—¶éœ€è¦åœ¨å‰é¢åŠ ä¸Šsudoå†æ•²å‘½ä»¤ã€‚</span><br><span class="line">   ç¬¬ä¸€æ¬¡ä½¿ç”¨éœ€è¦è¾“å…¥ç”¨æˆ·å¯†ç ,ä¸”æ¯ä¸ªåäº”åˆ†é’Ÿéœ€è¦ä¸€æ¬¡å¯†ç éªŒè¯</span><br><span class="line">ä¿®æ”¹ï¼š</span><br><span class="line">       test ALL=(root) NOPASSWD: /usr/bin/yum,/sbin/service</span><br><span class="line">è¿™æ ·å°±ä¸éœ€è¦å¯†ç äº†</span><br><span class="line">å°†æƒé™èµ‹äºˆæŸä¸ªç»„ï¼Œ%+ç»„å</span><br><span class="line">%group ALL=(root) NOPASSWD: /usr/bin/yum,/sbin/service</span><br><span class="line"></span><br><span class="line">åˆ—å‡ºç”¨æˆ·æ‰€æœ‰çš„sudoæƒé™       sudo â€“l</span><br></pre></td></tr></table></figure><p> 4.ç³»ç»Ÿæ—¶é—´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ“ä½œ                 å‘½ä»¤</span><br><span class="line">æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´          date           ---æŸ¥çœ‹å½“å‰æ—¶é—´è¯¦æƒ…</span><br><span class="line">                    cal            ---æŸ¥çœ‹å½“å‰æœˆæ—¥å†</span><br><span class="line">                    cal 2018       ---æŸ¥çœ‹2018å¹´å®Œæ•´æ—¥å†</span><br><span class="line">                    cal 12 2018    ---æŸ¥çœ‹æŒ‡å®šå¹´æœˆçš„æ—¥å†       </span><br><span class="line"></span><br><span class="line">æ›´æ–°ç³»ç»Ÿæ—¶é—´ï¼ˆæ¨èï¼‰   yum install ntpdate â€“y    ---å®‰è£…ntpæœåŠ¡</span><br><span class="line">                    ntpdate cn.ntp.org.cn     ---åˆ°åŸŸåä¸ºcn.ntp.org.cnçš„æ—¶é—´æœåŠ¡å™¨ä¸ŠåŒæ­¥æ—¶é—´</span><br></pre></td></tr></table></figure><p> 5.å…³äºhostsé…ç½®</p><p>ç›¸å½“äºç»™IPåœ°å€å…¶åˆ«åï¼Œå¯ä»¥é€šè¿‡åˆ«åè®¿é—®</p><table><thead><tr><th></th><th>è·¯å¾„ï¼š</th></tr></thead><tbody><tr><td>Windowsç³»ç»Ÿ</td><td><strong>C:/Windows/System32/drivers/etc/hosts</strong> <strong>æ–‡ä»¶</strong></td></tr><tr><td>Linuxç³»ç»Ÿ</td><td><strong>/etc/hosts</strong>æ–‡ä»¶ï¼š<strong>vim</strong>  +è·¯å¾„</td></tr><tr><td>ç»Ÿä¸€ ç¼–è¾‘æ ¼å¼</td><td><strong>IP</strong>åœ°å€  åˆ«åï¼š192.168.198.128    node00</td></tr></tbody></table><p> 6.å…³äºhostnameé…ç½®</p><p>ç›¸å½“äºç»™å¯¹åº”çš„è™šæ‹Ÿæœºå™¨èµ·åˆ«å</p><table><thead><tr><th>Linuxç³»ç»Ÿï¼š</th><th><strong>vi /etc/sysconfig/network</strong></th></tr></thead><tbody><tr><td>ç¼–è¾‘å†…å®¹ï¼š</td><td><strong>HOSTNAME=node01</strong></td></tr></tbody></table><p>äº”ã€é‡å®šå‘ä¸ç®¡é“ç¬¦</p><table><thead><tr><th>è¾“å‡ºé‡å®šå‘</th><th>è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶æˆ–è®¾å¤‡ï¼š                                                                                     &gt;   è¦†ç›–åŸæ¥çš„æ–‡ä»¶                                                                                                            &gt;&gt;   è¿½åŠ åŸæ¥çš„æ–‡ä»¶                                                                                                              ä¸¾ä¾‹ï¼š                                                                                                                               ls &gt; log                           â€” åœ¨logæ–‡ä»¶ä¸­åˆ—å‡ºæ‰€æœ‰é¡¹ï¼Œå¹¶è¦†ç›–åŸæ–‡ä»¶                                                         echo   â€œhelloâ€&gt;&gt;log     â€”å°†helloè¿½åŠ åˆ°logæ–‡ä»¶ä¸­</th></tr></thead><tbody><tr><td>è¾“å…¥é‡å®šå‘</td><td><strong>&lt;</strong>         è¾“å…¥é‡å®šå‘åˆ°ä¸€ä¸ªç¨‹åº                                                                                            ä¸¾ä¾‹ï¼šcat <strong>&lt;</strong> log             â€”å°†logæ–‡ä»¶ä½œä¸ºcatå‘½ä»¤çš„è¾“å…¥ï¼ŒæŸ¥çœ‹logæ–‡ä»¶çš„å†…å®¹</td></tr><tr><td>æ ‡å‡†   è¾“å‡º  é‡å®šå‘</td><td><strong>1 &gt;</strong> æˆ–   <strong>&gt;</strong>                                                                                                                         å«ä¹‰ï¼š                                                                                                                             è¾“å‡ºé‡å®šå‘æ—¶ï¼Œåªç”¨æ­£ç¡®çš„è¾“å‡ºæ‰ä¼šé‡å®šå‘åˆ°æŒ‡çš„æ–‡ä»¶ä¸­                                        é”™è¯¯çš„åˆ™ä¼šç›´æ¥æ‰“å°åˆ°å±å¹•ä¸Š</td></tr><tr><td>é”™è¯¯   è¾“å‡º  é‡å®šå‘</td><td><strong>2 &gt;</strong>                                                                                                                                å«ä¹‰ï¼š                                                                                                                              é”™è¯¯çš„è¾“å‡ºä¼šé‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶é‡Œï¼Œæ­£ç¡®çš„æ—¥å¿—åˆ™ç›´æ¥æ‰“å°åˆ°å±å¹•ä¸Šã€‚</td></tr><tr><td>ç»“åˆ  ä½¿ç”¨</td><td><strong>2&gt;&amp;1</strong>                                                                                                                            å«ä¹‰ï¼š                                                                                                                               å°†æ— è®ºæ˜¯æ­£ç¡®çš„è¾“å‡ºè¿˜æ˜¯é”™è¯¯çš„è¾“å‡ºéƒ½é‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶</td></tr><tr><td>ç®¡é“</td><td>**\</td><td>**                                                                                                                                      å«ä¹‰ï¼š                                                                                                                                  æŠŠå‰ä¸€ä¸ªè¾“å‡ºå½“åšåä¸€ä¸ªè¾“å…¥                                                                                       grep é€šè¿‡æ­£åˆ™æœç´¢æ–‡æœ¬ï¼Œå¹¶å°†åŒ¹é…çš„è¡Œæ‰“å°å‡ºæ¥                                                         netstat -anp \</td><td>grep 22   æŠŠnetstat â€“anp å‘½ä»¤çš„è¾“å‡º å½“åšæ˜¯grep å‘½ä»¤çš„è¾“å…¥</td></tr><tr><td>å‘½ä»¤  æ‰§è¡Œ  æ§åˆ¶</td><td><strong>&amp;&amp;</strong>   å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡ŒæˆåŠŸæ‰ä¼šæ‰§è¡Œåä¸€ä¸ªå‘½ä»¤                                                              **\</td><td>\</td><td>**      å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥æ‰ä¼šæ‰§è¡Œåä¸€ä¸ªå‘½ä»¤</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linuxå‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨Linuxå‘½ä»¤çš„å­¦ä¹ ï¼ˆä¸€ï¼‰</title>
      <link href="/2018/12/27/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2018/12/27/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="ä¸€ã€å‘½ä»¤æŒ‡å—ï¼ˆmanualï¼‰ï¼šman"><a href="#ä¸€ã€å‘½ä»¤æŒ‡å—ï¼ˆmanualï¼‰ï¼šman" class="headerlink" title="ä¸€ã€å‘½ä»¤æŒ‡å—ï¼ˆmanualï¼‰ï¼šman"></a>ä¸€ã€å‘½ä»¤æŒ‡å—ï¼ˆmanualï¼‰ï¼šman</h2><blockquote><p>å®‰è£…ï¼šyum install man â€“y</p></blockquote><p>ï¼ˆ-y è¡¨ç¤ºè·å¾—å…è®¸ï¼Œæ— éœ€ç¡®è®¤ï¼‰</p><blockquote><p>æŸ¥çœ‹lså‘½ä»¤æŒ‡å—ï¼š man ls</p></blockquote><h2 id="äºŒã€ç›®å½•å‘½ä»¤"><a href="#äºŒã€ç›®å½•å‘½ä»¤" class="headerlink" title="äºŒã€ç›®å½•å‘½ä»¤"></a>äºŒã€ç›®å½•å‘½ä»¤</h2><p><strong>åˆ‡æ¢</strong>ç›®å½•ï¼šcd + ç›®å½•çš„è·¯å¾„</p><p>æŸ¥çœ‹å½“å‰ç›®å½•æ‰€åœ¨çš„å®Œæ•´è·¯å¾„ï¼špwd</p><p><strong>æ–°å»º</strong>ç›®å½•ï¼šmkdir +ç›®å½•åå­—</p><p><strong>æŸ¥çœ‹</strong>å½“å‰ç›®å½•æ‰€ç”¨æœ‰çš„å­ç›®å½•å’Œæ–‡ä»¶ï¼šls   ï¼Œllç­‰ä»·äº  ls â€“l</p><p>â€‹        æŸ¥çœ‹ç›®å½•ä¸‹çš„æ‰€æœ‰ä¸œè¥¿ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰ï¼š  ls â€“al   ç­‰ä»·äº ll -a<br>â€‹<br><strong>æ‹·è´</strong>ç›®å½•æˆ–æ–‡ä»¶ï¼šcp â€“r install.log  install2.log</p><p><strong>åˆ é™¤</strong>ç›®å½•æˆ–æ–‡ä»¶ï¼šrm  -r install.log</p><blockquote><p>(rmdiråªèƒ½åˆ é™¤ç©ºç›®å½•)</p></blockquote><p><strong>ç§»åŠ¨</strong>ç›®å½•æˆ–æ–‡ä»¶ï¼šmv + ç›®å½•/æ–‡ä»¶åå­— + å…¶ä»–è·¯å¾„</p><p>â€‹         å°†testç›®å½•ç§»åŠ¨åˆ°  æ ¹ç›®å½•/ ä¸‹ :   mv test / </p><blockquote><p>ï¼ˆå¦‚æœç§»åŠ¨åˆ°å½“å‰ç›®å½•ï¼Œç”¨å¦å¤–ä¸€ä¸ªåç§°ï¼Œåˆ™å¯ä»¥å®ç°é‡å‘½åçš„æ•ˆæœï¼‰</p></blockquote><p><strong>æ›´æ”¹</strong>æ–‡ä»¶æˆ–ç›®å½•çš„åå­—ï¼šmv + æ—§ç›®å½•åå­— + æ–°ç›®å½•å</p><blockquote><p>(     -r ç”¨äºé€’å½’çš„æ‹·è´ï¼Œåˆ é™¤ï¼Œç§»åŠ¨ç›®å½•)</p></blockquote><h2 id="ä¸‰ã€æ–‡ä»¶å‘½ä»¤"><a href="#ä¸‰ã€æ–‡ä»¶å‘½ä»¤" class="headerlink" title="ä¸‰ã€æ–‡ä»¶å‘½ä»¤"></a>ä¸‰ã€æ–‡ä»¶å‘½ä»¤</h2><h3 id="1ã€ä¸€èˆ¬æ–‡ä»¶æ“ä½œ"><a href="#1ã€ä¸€èˆ¬æ–‡ä»¶æ“ä½œ" class="headerlink" title="1ã€ä¸€èˆ¬æ–‡ä»¶æ“ä½œ"></a>1ã€ä¸€èˆ¬æ–‡ä»¶æ“ä½œ</h3><p><strong>æ–°å»º</strong>æ–‡ä»¶ï¼štouch  install.log<br>â€‹        (vim install.log   ç¼–è¾‘æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±ä¼šæ–°å»ºä¸€ä¸ªå¯¹åº”çš„æ–‡ä»¶ï¼Œå¹¶è¿›å…¥æ–‡ä»¶çš„ç¼–è¾‘æ¨¡å¼ï¼Œå¦‚æœæŒ‰ :wq ä¼šä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºï¼Œå¦‚æœæŒ‰ :q åˆ™ä¸ä¿å­˜é€€å‡º)<br>â€‹<br><strong>æŸ¥çœ‹</strong>æ–‡ä»¶å†…å®¹ï¼šcat +ï¼ˆæ–‡ä»¶åï¼‰<br>ï¼ˆä¸€æ¬¡æ€§æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæ–‡ä»¶å†…å®¹è¿‡å¤šæ—¶ç”¨æˆ·ä½“éªŒä¸å¥½ï¼‰</p><p>ä¸€æ¬¡å‘½ä»¤æ˜¾ç¤ºä¸€å±æ–‡æœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  more +ï¼ˆæ–‡ä»¶åï¼‰</span><br><span class="line">  </span><br><span class="line">  æŒ‰é”®         æ•ˆæœ  </span><br><span class="line">Space         æ˜¾ç¤ºä¸‹ä¸€å±æ–‡æœ¬å†…å®¹</span><br><span class="line">B             æ˜¾ç¤ºä¸Šä¸€å±æ–‡æœ¬å†…å®¹</span><br><span class="line">Enter         æ˜¾ç¤ºä¸‹ä¸€è¡Œæ–‡æœ¬å†…å®¹</span><br><span class="line">Q             é€€å‡ºæŸ¥çœ‹</span><br></pre></td></tr></table></figure><pre><code>  less+ï¼ˆæ–‡ä»¶åï¼‰æŒ‰é”®            æ•ˆæœ h             æ˜¾ç¤ºå¸®åŠ©ç•Œé¢ u             å‘åæ»šåŠ¨åŠé¡µ  d             å‘å‰ç¿»åŠé¡µ  e | Enter     å‘åç¿»ä¸€è¡Œæ–‡æœ¬ space         æ»šåŠ¨ä¸€é¡µ  b             å‘åç¿»ä¸€é¡µ  [pagedown]ï¼š  å‘ä¸‹ç¿»åŠ¨ä¸€é¡µ  [pageup]ï¼š    å‘ä¸Šç¿»åŠ¨ä¸€é¡µ  ä¸Šä¸‹é”®ï¼Œå‘ä¸Šä¸€è¡Œï¼Œå‘ä¸‹ä¸€è¡Œ</code></pre><p>ä»å¤´æ‰“å°æ–‡ä»¶å†…å®¹ï¼š<br>â€‹        head  -10 +ï¼ˆæ–‡ä»¶åï¼‰  æ‰“å°æ–‡ä»¶1åˆ°10è¡Œ</p><p>ä»å°¾éƒ¨æ‰“å°æ–‡ä»¶å†…å®¹<br>â€‹        tail -10 +ï¼ˆæ–‡ä»¶åï¼‰æ‰“å°æ–‡ä»¶æœ€å10è¡Œ</p><blockquote><p>tail -f (æ–‡ä»¶å)  å¸¸ç”¨äºæŸ¥çœ‹æ–‡ä»¶å†…å®¹çš„æ›´æ–°å˜åŒ–</p></blockquote><p><strong>æŸ¥æ‰¾</strong>æ–‡ä»¶æˆ–ç›®å½•<br>â€‹        find +ï¼ˆè·¯å¾„åï¼‰ â€“name +ï¼ˆæ–‡ä»¶åï¼‰<br>â€‹        ä¸¾ä¾‹ï¼šfind / -name profile<br>â€‹             åœ¨/(æ ¹ç›®å½•)ç›®å½•ä¸‹æŸ¥æ‰¾ åå­—ä¸ºprofileçš„æ–‡ä»¶æˆ–ç›®å½•</p><p>â€‹        ä¹Ÿå¯åˆ©ç”¨æ­£åˆ™ï¼š<br>â€‹             ä¸¾ä¾‹ï¼š find /etc -name pro*<br>â€‹                     åœ¨/etcç›®å½•ä¸‹æŸ¥æ‰¾ä»¥proå¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•</p><blockquote><p>è·¯å¾„è¶Šç²¾ç¡®ï¼ŒæŸ¥æ‰¾çš„èŒƒå›´è¶Šå°ï¼Œé€Ÿåº¦è¶Šå¿« i</p></blockquote><h3 id="2ã€æ–‡ä»¶ç¼–è¾‘"><a href="#2ã€æ–‡ä»¶ç¼–è¾‘" class="headerlink" title="2ã€æ–‡ä»¶ç¼–è¾‘"></a>2ã€æ–‡ä»¶ç¼–è¾‘</h3><h4 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h4><p>ï¼ˆ1ï¼‰ vi    è¿›å…¥ç¼–è¾‘æ¨¡å¼ â€”â€“&gt;æŒ‰i   è¿›å…¥æ’å…¥æ¨¡å¼ â€”â€”-&gt;  æŒ‰Esc é€€å‡ºç¼–è¾‘æ¨¡å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi  filename   :æ‰“å¼€æˆ–æ–°å»ºæ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€è¡Œé¦– </span><br><span class="line">vi +n filename ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬nè¡Œé¦– </span><br><span class="line">vi + filename  ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºæœ€åä¸€è¡Œé¦– </span><br><span class="line">vi +/pattern filenameï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€ä¸ªä¸ patternåŒ¹é…çš„å­—ç¬¦ä¸²æ‰€åœ¨çš„è¡Œé¦–</span><br></pre></td></tr></table></figure><blockquote><p> filename  ä¸ºæ–‡ä»¶å</p></blockquote><p>ï¼ˆ2ï¼‰åœ¨æ–‡ä»¶viï¼ˆæ–‡ä»¶ç¼–è¾‘ï¼‰æ¨¡å¼ä¸‹</p><ul><li><strong>å‘½ä»¤è¡Œæ¨¡å¼</strong> </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">:w      ä¿å­˜</span><br><span class="line">:q      é€€å‡º</span><br><span class="line">:wq     ä¿å­˜å¹¶é€€å‡º</span><br><span class="line">:q!     å¼ºåˆ¶é€€å‡º</span><br><span class="line">:set nu |ctrl+g    æ˜¾ç¤ºæ–‡æœ¬è¡Œæ•°</span><br><span class="line">:set nonu          å»é™¤æ˜¾ç¤ºçš„è¡Œæ•°</span><br><span class="line">:s/p1/p2/g         å°†å½“å‰è¡Œä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿ä»£ </span><br><span class="line">:n1,n2s/p1/p2/g    å°†ç¬¬n1è‡³n2è¡Œä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿ä»£ </span><br><span class="line">:g/p1/s//p2/g      å°†æ–‡ä»¶ä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿æ¢</span><br></pre></td></tr></table></figure><ul><li><strong>ä¸€èˆ¬æ¨¡å¼</strong> </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">æŒ‰é”®ï¼š</span><br><span class="line">yy    å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œ(å¸¸ç”¨) </span><br><span class="line">nyy   å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œçš„å‘ä¸‹nè¡Œï¼Œä¾‹å¦‚ï¼Œ 20yyåˆ™æ˜¯å¤åˆ¶20è¡Œ(å¸¸ç”¨) </span><br><span class="line">p|P   pä¸ºå¤åˆ¶çš„æ•°æ®ç²˜è´´åœ¨å…‰æ ‡ä¸‹ä¸€è¡Œï¼Œ Påˆ™ä¸ºç²˜è´´åœ¨å…‰æ ‡ä¸Šä¸€è¡Œ(å¸¸ç”¨)</span><br><span class="line">G     å…‰æ ‡ç§»è‡³ç¬¬æœ€åä¸€è¡Œ</span><br><span class="line">nG    å…‰æ ‡ç§»åŠ¨è‡³ç¬¬Nè¡Œè¡Œé¦–</span><br><span class="line">n+    å…‰æ ‡ä¸‹ç§»nè¡Œ </span><br><span class="line">n-    å…‰æ ‡ä¸Šç§»nè¡Œ </span><br><span class="line">H     å…‰æ ‡ç§»è‡³å±å¹•é¡¶è¡Œ </span><br><span class="line">M     å…‰æ ‡ç§»è‡³å±å¹•ä¸­é—´è¡Œ </span><br><span class="line">L     å…‰æ ‡ç§»è‡³å±å¹•æœ€åè¡Œ </span><br><span class="line"></span><br><span class="line">dd    åˆ é™¤æ‰€åœ¨è¡Œ </span><br><span class="line">xæˆ–X  åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œxåˆ é™¤å…‰æ ‡åçš„ï¼Œè€ŒXåˆ é™¤å…‰æ ‡å‰çš„ </span><br><span class="line">u     æ’¤é”€(å¸¸ç”¨)</span><br><span class="line"></span><br><span class="line">åˆ é™¤ç¬¬Nè¡Œåˆ°ç¬¬Mè¡Œï¼šN,Md</span><br><span class="line">ï¼š,$-1d   åˆ é™¤å½“å‰å…‰æ ‡åˆ°åˆ°æ•°ç¬¬ä¸€è¡Œæ•°æ®</span><br><span class="line"></span><br><span class="line">æŒ‰é”®ï¼š</span><br><span class="line">    i: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„å‰é¢ï¼Œè½¬ä¸ºè¾“å…¥æ¨¡å¼ï¼›</span><br><span class="line">    a: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„åé¢ï¼Œè½¬ä¸ºè¾“å…¥æ¨¡å¼ï¼›</span><br><span class="line">    o: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹æ–¹ï¼Œæ–°å»ºä¸€è¡Œï¼Œå¹¶è½¬ä¸ºè¾“å…¥æ¨¡å¼ï¼›</span><br><span class="line">    Iï¼šåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–ï¼Œè½¬æ¢ä¸ºè¾“å…¥æ¨¡å¼</span><br><span class="line">    Aï¼šåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œå°¾ï¼Œè½¬æ¢ä¸ºè¾“å…¥æ¨¡å¼</span><br><span class="line">    Oï¼šåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šæ–¹ï¼Œæ–°å»ºä¸€è¡Œï¼Œå¹¶è½¬ä¸ºè¾“å…¥æ¨¡å¼ï¼›</span><br><span class="line"></span><br><span class="line">---é€å­—ç¬¦ç§»åŠ¨ï¼š</span><br><span class="line">h: å·¦    l: å³</span><br><span class="line"></span><br><span class="line">j: ä¸‹k: ä¸Š</span><br></pre></td></tr></table></figure><h4 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h4><blockquote><p>å®‰è£…ï¼šyum install vim -y</p></blockquote><ul><li><em>ç”¨vim æ‰“å¼€/etc/profile æ–‡ä»¶ï¼Œ</em></li><li><em>ç‰¹ç‚¹ï¼šç¼–è¾‘å™¨å¯¹æ–‡æœ¬çš„å†…å®¹è¿›è¡Œäº†é«˜äº®ï¼Œä½¿æ•´ä¸ªæ–‡ä»¶çš„å†…å®¹å¯è¯»æ€§å¤§å¤§åŠ å¼º</em> ï¼Œå…¶ä»–å‡ä¸viç›¸åŒ</li></ul><h3 id="3ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½"><a href="#3ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½" class="headerlink" title="3ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½"></a>3ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</h3><blockquote><p>å®‰è£…ä¸Šä¼ ä¸‹è½½å‘½ä»¤ï¼šyum install lrzsz -y</p></blockquote><p>ä¸Šä¼ æ–‡ä»¶ï¼šï¼ˆwindowsâ€”&gt;linuxï¼‰</p><blockquote><p>å‘½ä»¤ ï¼šrz  </p><p>å¼¹å‡ºwindowsä¸Šä¼ æ–‡ä»¶çª—å£</p></blockquote><p>ä¸‹è½½æ–‡ä»¶ï¼š(linuxâ€”&gt;windows)</p><p><code>æ³¨æ„</code>ï¼šszå‘½ä»¤åªèƒ½ä¸‹è½½æ–‡ä»¶ï¼Œä¸èƒ½ä¸‹è½½ç›®å½•ï¼Œæ¨èå°†ç›®å½•å‹ç¼©æˆtaråŒ…æˆ–ä½¿ç”¨å·¥å…·è½¯ä»¶ï¼šWinscpã€Xftpã€‘</p><blockquote><p>å‘½ä»¤ï¼šsz  ï¼ˆæ–‡ä»¶åï¼‰</p><p>å¼¹å‡ºwindowsä¸‹è½½çª—å£,ä¸‹è½½æ–‡ä»¶åˆ°æŒ‡å®šæ–‡ä»¶ç›®å½•</p></blockquote><h3 id="4ã€æ–‡ä»¶ä¼ è¾“"><a href="#4ã€æ–‡ä»¶ä¼ è¾“" class="headerlink" title="4ã€æ–‡ä»¶ä¼ è¾“"></a>4ã€æ–‡ä»¶ä¼ è¾“</h3><h4 id="1-ã€æœ¬åœ°â†’è¿œç¨‹"><a href="#1-ã€æœ¬åœ°â†’è¿œç¨‹" class="headerlink" title="(1)ã€æœ¬åœ°â†’è¿œç¨‹"></a>(1)ã€æœ¬åœ°â†’è¿œç¨‹</h4><blockquote><p>æ–‡ä»¶  ï¼š  scp local_file remote_username@remote_ip:remote_folder   </p><p>ç›®å½• ï¼š  scp -r local_folder remote_username@remote_ip:remote_folder</p></blockquote><h4 id="2ï¼‰ã€è¿œç¨‹â†’æœ¬åœ°"><a href="#2ï¼‰ã€è¿œç¨‹â†’æœ¬åœ°" class="headerlink" title="(2ï¼‰ã€è¿œç¨‹â†’æœ¬åœ°"></a>(2ï¼‰ã€è¿œç¨‹â†’æœ¬åœ°</h4><blockquote><p>æ–‡ä»¶ ï¼š scp remote_username@remote_ip:remote_file local_folder</p><p>ç›®å½• ï¼š scp remote_username@remote_ip:remote_folder local_folder   </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linuxå‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨Linuxå‘½ä»¤çš„å­¦ä¹ ï¼ˆä¸‰ï¼‰</title>
      <link href="/2018/12/27/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2018/12/27/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="ä¸€ã€æœåŠ¡æ“ä½œ"><a href="#ä¸€ã€æœåŠ¡æ“ä½œ" class="headerlink" title="ä¸€ã€æœåŠ¡æ“ä½œ"></a>ä¸€ã€æœåŠ¡æ“ä½œ</h2><table><thead><tr><th>åˆ—å‡º  æ‰€æœ‰  æœåŠ¡</th><th>chkconfig</th></tr></thead><tbody><tr><td>æœåŠ¡  æ“ä½œ</td><td>service æœåŠ¡å start\</td><td>stop\</td><td>status\</td><td>restart                                                                 æ°¸ä¹…å…³é—­\</td><td>æ‰“å¼€ ï¼ˆå¯åŠ¨åç”Ÿæ•ˆï¼‰ chkconfig iptables on\</td><td>off</td></tr><tr><td>æ·»åŠ   æœåŠ¡</td><td>1)    ç¼–è¾‘è„šæœ¬ï¼švim myservice.sh                                                                                                                  ç¼–è¾‘å†…å®¹ï¼š                                                                                                                                     ï¼ˆåœ¨æœ€å‰é¢åŠ ä¸€ä¸‹ä¸¤å¥ï¼‰                                                                                                #chkconfig:   2345 80 90                                                            #description:auto_run                                                                                                (è‡ªå·±çš„æœåŠ¡è„šæœ¬ï¼šå¼€æœºæ—¶åŒæ­¥æ—¶é—´ï¼‰                                                      result=â€™ntpdate cn.ntp.org.cnâ€™                                                                                      é€€å‡ºç¼–è¾‘å¹¶ä¿å­˜ï¼šæŒ‰escé”® æŒ‰ ï¼šwq                                                                                     åœ¨ntpdate.logæ–‡ä»¶ä¸­è¾“å‡ºæ‰“å°ï¼šecho $result &gt; /usr/ntpdate.log                                                                                   2)    ä¿®æ”¹æƒé™ï¼Œä½¿å…¶æ‹¥æœ‰å¯æ‰§è¡Œæƒé™:   chmod 700 myservice.sh                            3)    å°†è„šæœ¬æ‹·è´åˆ°/etc/init.dç›®å½•ï¼š                                                                              4)    åŠ å…¥æœåŠ¡ï¼šchkconfig â€“add myservice.sh                                                             5)    é‡å¯æœåŠ¡å™¨ï¼ŒéªŒè¯æœåŠ¡æ˜¯å¦æ·»åŠ æˆåŠŸï¼šdate                                                     6ï¼‰/usrç›®å½•ä¸‹äº§ç”Ÿntpdate.log</td></tr><tr><td>åˆ é™¤  æœåŠ¡</td><td>chkconfig â€“del name</td></tr><tr><td>æ›´æ”¹  æœåŠ¡åˆ   æ‰§è¡Œ  ç­‰çº§</td><td>chkconfig â€“level 2345 æœåŠ¡å off\</td><td>on                                                                     chkconfig æœåŠ¡å on\</td><td>of f</td></tr></tbody></table><h2 id="äºŒã€å®šæ—¶è°ƒåº¦"><a href="#äºŒã€å®šæ—¶è°ƒåº¦" class="headerlink" title="äºŒã€å®šæ—¶è°ƒåº¦"></a>äºŒã€å®šæ—¶è°ƒåº¦</h2><table><thead><tr><th>ç¼–è¾‘å®šæ—¶ä»»åŠ¡</th><th>crontab â€“e                                                                                                                    æ ¼å¼ï¼šminute hour day month dayofweek command</th></tr></thead><tbody><tr><td>ä¸¾ä¾‹</td><td><em> </em> <em> </em> *  echo  â€œhelloâ€                                                                                                     æ¯åˆ†é’Ÿæ‰“å°â€œhelloâ€</td></tr><tr><td>æ—¶é—´ä¸€åˆ°ï¼Œæ‰§è¡Œæ“ä½œå‘½ä»¤å</td><td>ä¼šå‡ºç°ï¼šYou have new mail in /var/spool/mail/root</td></tr><tr><td>æŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œæƒ…å†µ</td><td>vim /var/spool/mail/root</td></tr><tr><td>æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡</td><td>ll /var/spool/cron</td></tr><tr><td>æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡</td><td>contab â€“l</td></tr><tr><td><em>æ³¨æ„</em></td><td>â€œ<em>â€ä»£è¡¨ä»»æ„çš„æ•°å­—, â€œ/â€ä»£è¡¨â€æ¯éš”å¤šä¹…â€,                                                                                â€œ-â€ä»£è¡¨ä»æŸä¸ªæ•°å­—åˆ°æŸä¸ªæ•°å­—, â€œ,â€åˆ†å¼€å‡ ä¸ªç¦»æ•£çš„æ•°å­—                                                                                                                    å¦‚ï¼š                                                                                                                                       30-40 12 </em> <em> </em> echo â€œhelloâ€                                                                                                           â€”â€”â€“æ¯å¤©12ç‚¹30åˆ†è‡³40åˆ†æœŸé—´ï¼Œæ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤                                                                                      30,40                                                                                                                                                â€”â€”â€“æ¯å¤©12ç‚¹30åˆ†å’Œ12ç‚¹40åˆ†                                                                                           0/5                                                                                                                                               â€”â€”â€“æ¯å¤©çš„12ç‚¹æ•´è‡³12ç‚¹55åˆ†æœŸé—´ï¼Œæ¯éš”5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤</td></tr></tbody></table><h2 id="ä¸‰ã€è¿›ç¨‹æ“ä½œ"><a href="#ä¸‰ã€è¿›ç¨‹æ“ä½œ" class="headerlink" title="ä¸‰ã€è¿›ç¨‹æ“ä½œ"></a>ä¸‰ã€è¿›ç¨‹æ“ä½œ</h2><table><thead><tr><th>æŸ¥çœ‹  è¿›ç¨‹</th><th>ps  -aux                                                                                                                                -a åˆ—å‡ºæ‰€æœ‰           -u åˆ—å‡ºç”¨æˆ·   -x è¯¦ç»†åˆ—å‡ºï¼Œå¦‚cpuã€å†…å­˜ç­‰                                                            -e æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹    -f å…¨æ ¼å¼                                                                                                              ps  - ef  \</th><th>grep ssh   æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹é‡ŒCMDæ˜¯ssh çš„è¿›ç¨‹ä¿¡æ¯                                                       ps -aux â€“sort â€“pcpu   æ ¹æ® CPU ä½¿ç”¨æ¥å‡åºæ’åº</th></tr></thead><tbody><tr><td>ä½¿ç¨‹åº   åå°è¿è¡Œ</td><td>åªéœ€è¦åœ¨å‘½ä»¤åæ·»åŠ   &amp; ç¬¦å·                                                                                                                            echo â€œhelloâ€ &amp;   jobs â€“l      â€“åˆ—å‡ºå½“å‰è¿æ¥çš„æ‰€æœ‰åå°è¿›ç¨‹ï¼ˆjobsä»…é€‚ç”¨äºå½“å‰ç«¯ï¼‰   ps  -ef \</td><td>grep è¿›ç¨‹å          â€”-ï¼ˆæ¨èï¼‰åˆ—å‡ºåå°è¿›ç¨‹</td></tr><tr><td>æ€æ­»è¿›ç¨‹</td><td>ï¼ˆå¼ºåˆ¶ï¼‰kill -9 pid   â€”-pidä¸ºè¿›ç¨‹å·</td></tr></tbody></table><h2 id="å››ã€å…¶ä»–å‘½ä»¤"><a href="#å››ã€å…¶ä»–å‘½ä»¤" class="headerlink" title="å››ã€å…¶ä»–å‘½ä»¤"></a>å››ã€å…¶ä»–å‘½ä»¤</h2><table><thead><tr><th>wget</th><th>1ï¼‰   å®‰è£…ï¼šyum install wget  â€“y                                                                                                        2ï¼‰   ç”¨æ³•ï¼šwget [option] ç½‘å€  -O  æŒ‡å®šä¸‹è½½ä¿å­˜çš„è·¯å¾„                                               3ï¼‰   ä¹Ÿå¯ç”¨äºåšçˆ¬è™«</th></tr></thead><tbody><tr><td>yum</td><td>1ï¼‰   å¤‡ä»½åŸé•œåƒï¼š                                                                                                                   cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOSBase.repo.backup                                                                                 2ï¼‰   ä¸‹è½½æ–°é•œåƒï¼š                                                                                                                  <strong>wget</strong> -O /etc/yum.repos.d/CentOS-Base.repo      <a href="http://mirrors.aliyun.com/repo/Centos-6.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/Centos-6.repo</a>                                                               3ï¼‰  æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼švim /etc/yum.repos.d/CentOS-Base.repo                                            4ï¼‰  ç”Ÿæˆç¼“å­˜ï¼šyum makecache</td></tr><tr><td>rpm</td><td>1ï¼‰   å®‰è£… rpm â€“ivh rpmåŒ…                                                                                                              2ï¼‰   æŸ¥æ‰¾å·²å®‰è£…çš„rpmåŒ…ï¼šrpm â€“q ntp                                                                                      3ï¼‰   å¸è½½ï¼šrpm â€“e ntp-4.2.6p5-10.el6.centos.2.x86_64ï¼ˆå…¨åï¼‰</td></tr><tr><td>tar</td><td>1ï¼‰   è§£å‹ï¼štar  -zvxf  xxxx.tar.gz                                                                                               2ï¼‰   å‹ç¼©ï¼štar -zcf å‹ç¼©åŒ…å‘½å å‹ç¼©ç›®æ ‡                                                                                           3ï¼‰   ä¾‹å­ï¼štar -zcf tomcat.tar.gz apache-tomcat-7.0.61                                                       4ï¼‰   -z   gzipè¿›è¡Œè§£å‹æˆ–å‹ç¼©ï¼Œå¸¦.gzéœ€è¦åŠ ï¼Œå‹ç¼©å‡ºæ¥.gzä¹Ÿéœ€è¦åŠ                                                    -x  è§£å‹                            -c  å‹ç¼©   -f   ç›®æ ‡æ–‡ä»¶ï¼Œå‹ç¼©æ–‡ä»¶æ–°å‘½åæˆ–è§£å‹æ–‡ä»¶å                                               -v  è§£å‹ç¼©è¿‡ç¨‹ä¿¡æ¯æ‰“å°</td></tr><tr><td>zip</td><td>1ï¼‰å®‰è£…zipï¼šyum install zip â€“y                                                                                        2ï¼‰å‹ç¼©å‘½ä»¤ï¼šzip   -r åŒ…å ç›®æ ‡ç›®å½•                                                                                          3ï¼‰å®‰è£… ï¼šunzip,yum   install unzip â€“y                                                                                   4ï¼‰è§£å‹  ï¼šunzip   filename</td></tr></tbody></table><h2 id="äº”ã€å®‰è£…éƒ¨ç½²"><a href="#äº”ã€å®‰è£…éƒ¨ç½²" class="headerlink" title="äº”ã€å®‰è£…éƒ¨ç½²"></a>äº”ã€å®‰è£…éƒ¨ç½²</h2><table><thead><tr><th>JDK   éƒ¨ç½²</th><th>1)     è§£å‹: tar -zxf jdk-7u80-linux-x64.tar.gz                                                                                         2)     é…ç½®ç¯å¢ƒå˜é‡                                                                                                                                                                  ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼švim /etc/profile                                                                                                                                                   ç¼–è¾‘å†…å®¹ ï¼š                                                                                                                                                          JAVA_HOME= /usr/soft/jdk1.7.0_75                                                                                                 PATH=$PATH:$JAVA_HOME/bin                                                                                                           3) é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡ï¼šsource  /etc/profile                                                                                                   4) éªŒè¯: java  -version</th></tr></thead><tbody><tr><td>mysqléƒ¨ç½²</td><td>yumå®‰è£… mysql                                                                                                                                         1) yum install mysql-server -y                                                                                                                2) yum install mysql-devel -y                                                                                                                                  3) service mysqld start                                                                                                                              4) mysql -uroot -p                                                                                                                                      5) mysqladmin -u root    password 123456</td></tr></tbody></table><h2 id="å…­ã€å…å¯†ç™»å½•"><a href="#å…­ã€å…å¯†ç™»å½•" class="headerlink" title="å…­ã€å…å¯†ç™»å½•"></a>å…­ã€å…å¯†ç™»å½•</h2><p>| æ³•ä¸€                                                     </p><p>| 1ï¼‰   ç”Ÿæˆå…¬é’¥å’Œå¯†é’¥ï¼šssh-keygen -t rsa ï¼Œå¹¶ä¸”å›è½¦3æ¬¡                                                                                                    ï¼ˆåœ¨ç”¨æˆ·çš„æ ¹ç›®å½•ç”Ÿæˆä¸€ä¸ª â€œ.sshâ€çš„æ–‡ä»¶å¤¹ï¼‰                                                                                                                           2ï¼‰   æŸ¥çœ‹å…¬é’¥å’Œç§é’¥ï¼šll ~/.ssh                                                                                                                                                                    ï¼ˆç›®å½•ä¸­ä¼šæœ‰ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼‰                                                                                                                         <code>authorized_keys</code>:å­˜æ”¾è¿œç¨‹å…å¯†ç™»å½•çš„å…¬é’¥,ä¸»è¦é€šè¿‡è¿™ä¸ªæ–‡ä»¶è®°å½•å¤šå°æœºå™¨çš„å…¬é’¥                                                 <code>id_rsa</code> : ç”Ÿæˆçš„ç§é’¥æ–‡ä»¶                                                                                                                              <code>id_rsa.pub</code> ï¼š ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶                                                                                                                                        <code>know_hosts</code> : å·²çŸ¥çš„ä¸»æœºå…¬é’¥æ¸…å•                                                                                                                                                       <em>                        å¦‚æœå¸Œæœ›sshå…¬é’¥ç”Ÿæ•ˆéœ€æ»¡è¶³è‡³å°‘ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š                                                                                                  </em>                        1&gt; .sshç›®å½•çš„æƒé™å¿…é¡»æ˜¯700                                                                                                                                *                         2&gt; .ssh/authorized_keysæ–‡ä»¶æƒé™å¿…é¡»æ˜¯600                                                                                                                 3ï¼‰   å°†Açš„.sshç›®å½•ä¸‹çš„å…¬é’¥è¿½åŠ æ‹·è´åˆ°Bçš„authorized_keysæ–‡ä»¶é‡Œ                                                                         scp -p ~/.ssh/id_rsa.pub root@&lt;remote_ip&gt;:/root/.ssh/authorized_keys                                                                4)     éªŒè¯ï¼šå°†æ–‡ä»¶è¿œç¨‹æ‹·è´åˆ°è¿œç¨‹ä¸»æœºä¸Šï¼Œçœ‹æ˜¯å¦éœ€è¦å¯†ç  |</p><table><thead><tr><th>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</th><th>:â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“</th></tr></thead><tbody><tr><td></td><td></td></tr><tr><td>ï¼ˆ<strong>æ­¤æ–¹æ³•æœ‰å¾…è€ƒç©¶ï¼‰</strong>æ³•äºŒï¼šé€šè¿‡Ansibleå®ç°   æ‰¹é‡   å…å¯†</td><td>1ï¼‰ã€ <strong>å°†éœ€è¦åšå…å¯†æ“ä½œçš„æœºå™¨hostsæ·»åŠ åˆ°/etc/ansible/hostsä¸‹ï¼š</strong>                                                                                             <h3>[&nbsp;Avoid close]<br>ã€€ã€€192.168.91.132</h3></td></tr></tbody></table><p>ã€€ã€€192.168.91.133<br>ã€€ã€€192.168.91.134    <br>      2ï¼‰ã€ <strong>æ‰§è¡Œå‘½ä»¤è¿›è¡Œå…å¯†æ“ä½œ</strong>  ï¼šâ€‹                 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible &lt;groupname&gt; -m authorized_key -a &quot;user=root key=&apos;&#123;&#123; lookup(&apos;file&apos;,&apos;/root/.ssh/id_rsa.pub&apos;) &#125;&#125;&apos;&quot; -k</span><br></pre></td></tr></table></figure><p>â€‹                                                                                                                                                                                                                                                                                                                                             |</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linuxå‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxå…¥é—¨å­¦ä¹ ï¼ˆäºŒï¼‰</title>
      <link href="/2018/12/20/Nginx%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%BA%8C%E5%9B%9E%E5%90%88%EF%BC%89/"/>
      <url>/2018/12/20/Nginx%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%BA%8C%E5%9B%9E%E5%90%88%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><code>2018å¹´12æœˆ20æ—¥  å‘¨å››  é˜´</code></p><h2 id="ä¸€ã€è™šæ‹Ÿä¸»æœº"><a href="#ä¸€ã€è™šæ‹Ÿä¸»æœº" class="headerlink" title="ä¸€ã€è™šæ‹Ÿä¸»æœº"></a>ä¸€ã€è™šæ‹Ÿä¸»æœº</h2><h3 id="1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿä¸»æœºï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿä¸»æœºï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿä¸»æœºï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿä¸»æœºï¼Ÿ</h3><p>ï¼ˆ1ï¼‰æ˜¯æŒ‡åœ¨ç½‘ç»œæœåŠ¡å™¨ä¸Šåˆ†å‡ºä¸€å®šçš„ç£ç›˜ç©ºé—´ï¼Œç§Ÿç»™ç”¨æˆ·ä»¥æ”¾ç½®ç«™ç‚¹ä»¥åŠåº”ç”¨ç©ºé—´ï¼Œå¹¶æä¾›å¿…è¦çš„å­˜å‚¨å’Œä¼ è¾“åŠŸèƒ½ã€‚</p><p>ï¼ˆ2ï¼‰æ˜¯è¢«è™šæ‹ŸåŒ–çš„é€»è¾‘ä¸»æœºï¼Œä¹Ÿå¯ç†è§£ä¸ºå°±æ˜¯æŠŠä¸€å°ç‰©ç†æœåŠ¡å™¨åˆ’åˆ†æˆå¤šä¸ªâ€œè™šæ‹Ÿâ€œçš„æœåŠ¡å™¨ï¼Œå„ä¸ªè™šæ‹Ÿä¸»æœºä¹‹é—´å®Œå…¨ç‹¬ç«‹ï¼Œå¯¹å¤–ç•Œå‘ˆç°çš„çŠ¶æ€ä¹ŸåŒå•ç‹¬ç‰©ç†ä¸»æœºè¡¨ç°å®Œå…¨ç›¸åŒã€‚</p><h3 id="2ã€è™šæ‹Ÿä¸»æœ‰å•¥ç‰¹ç‚¹ï¼Ÿ"><a href="#2ã€è™šæ‹Ÿä¸»æœ‰å•¥ç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="2ã€è™šæ‹Ÿä¸»æœ‰å•¥ç‰¹ç‚¹ï¼Ÿ"></a>2ã€è™šæ‹Ÿä¸»æœ‰å•¥ç‰¹ç‚¹ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰å¤šå°è™šæ‹Ÿä¸»æœºå…±äº«ä¸€å°çœŸå®ä¸»æœºèµ„æºï¼Œå¤§å¹…åº¦é™ä½äº†ç¡¬ä»¶ã€ç½‘ç»œç»´æŠ¤ã€é€šä¿¡çº¿è·¯ç­‰çš„è´¹ç”¨</p><p>ï¼ˆ2ï¼‰ä¹Ÿå¤§å¤§ç®€åŒ–äº†æœåŠ¡å™¨ç®¡ç†çš„å¤æ‚æ€§ï¼›</p><h3 id="3ã€è™šæ‹Ÿä¸»æœºæœ‰å“ªäº›ç±»åˆ«ï¼Ÿ"><a href="#3ã€è™šæ‹Ÿä¸»æœºæœ‰å“ªäº›ç±»åˆ«ï¼Ÿ" class="headerlink" title="3ã€è™šæ‹Ÿä¸»æœºæœ‰å“ªäº›ç±»åˆ«ï¼Ÿ"></a>3ã€è™šæ‹Ÿä¸»æœºæœ‰å“ªäº›ç±»åˆ«ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰åŸºäºåŸŸå</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">http &#123; </span><br><span class="line">    upstream shsxt&#123; </span><br><span class="line">        server node01; </span><br><span class="line">        server node02; </span><br><span class="line">     &#125; </span><br><span class="line">upstream bjsxt&#123; </span><br><span class="line">        server node03; </span><br><span class="line">     &#125; </span><br><span class="line">     </span><br><span class="line">     server &#123;    </span><br><span class="line">            listen 80; </span><br><span class="line">            //è®¿é—®sxt2.comçš„æ—¶å€™ï¼Œä¼šæŠŠè¯·æ±‚å¯¼åˆ°bjsxtçš„æœåŠ¡å™¨ç»„é‡Œ</span><br><span class="line">            server_name  sxt2.com;</span><br><span class="line">            location / &#123;</span><br><span class="line">                proxy_pass http://bjsxt;</span><br><span class="line">            &#125;</span><br><span class="line">      &#125; </span><br><span class="line">      server &#123; </span><br><span class="line">            listen 80; </span><br><span class="line">           //è®¿é—®sxt1.comçš„æ—¶å€™ï¼Œä¼šæŠŠè¯·æ±‚å¯¼åˆ°shsxtçš„æœåŠ¡å™¨ç»„é‡Œ</span><br><span class="line">            server_name  sxt1.com; </span><br><span class="line">            location / &#123;</span><br><span class="line">                proxy_pass http://shsxt;</span><br><span class="line">            &#125;</span><br><span class="line">      &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p></blockquote><blockquote><p>ï¼ˆ1ï¼‰åŸºäºåŸŸåçš„è™šæ‹Ÿæœºä¸»æœº åœ¨æ¨¡æ‹Ÿåº”ç”¨åœºæ™¯æ—¶ï¼Œéœ€è¦åœ¨windowsç³»ç»Ÿçš„hostsæ–‡ä»¶é‡Œé…ç½®åŸŸåæ˜ å°„ã€‚</p><p>ï¼ˆC:\Windows\System32\drivers\etc\hosts     ç»™IPå–åˆ«åï¼‰</p><p>å¦‚ï¼š192.168.198.130   sxt1.com</p></blockquote><blockquote><p>ï¼ˆ2ï¼‰æ¯å°æœåŠ¡å™¨çš„Tomcatçš„ç«¯å£ä¸ä¸é…ç½®çš„listenä¸€è‡´ï¼Œé‚£ä¹ˆwindowsç³»ç»Ÿæµè§ˆå™¨è®¿é—®æ—¶ï¼Œéœ€è¦åŠ ä¸ŠTOmcatçš„ç«¯å£ï¼Œï¼ˆ192.168.198.128ï¼š8080ï¼‰</p><p>â€‹         å¦‚æœä¸€è‡´ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¸åŠ Tomcatçš„ç«¯å£å› ä¸ºNginxæœåŠ¡å™¨é»˜è®¤ç«¯å£ä¸º80</p></blockquote><p>ï¼ˆ2ï¼‰åŸºäºç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">http &#123; </span><br><span class="line">    upstream shsxt&#123; </span><br><span class="line">        server node01; </span><br><span class="line">        server node02; </span><br><span class="line">     &#125; </span><br><span class="line">upstream bjsxt&#123; </span><br><span class="line">        server node03</span><br><span class="line">    &#125; </span><br><span class="line"> server &#123; </span><br><span class="line">       //å½“è®¿é—®nginxçš„80ç«¯å£æ—¶ï¼Œå°†è¯·æ±‚å¯¼ç»™bjsxtç»„</span><br><span class="line">        listen 8080; </span><br><span class="line">        server_name 192.168.198.128;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://bjsxt;</span><br><span class="line">        &#125;</span><br><span class="line">&#125; </span><br><span class="line">  server &#123; </span><br><span class="line">           //å½“è®¿é—®nginxçš„81ç«¯å£æ—¶ï¼Œå°†è¯·æ±‚å¯¼ç»™shsxtç»„</span><br><span class="line">            listen 81; </span><br><span class="line">            server_name 192.168.198.128;  //nginxæœåŠ¡å™¨çš„IP</span><br><span class="line">            location / &#123;</span><br><span class="line">                proxy_pass http://shsxt;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰åŸºäºIP  ï¼šï¼ˆä¸å¸¸ç”¨ï¼‰</p><h2 id="äºŒã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><a href="#äºŒã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="headerlink" title="äºŒã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"></a>äºŒã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h2><h3 id="1ã€æ­£å‘ä»£ç†"><a href="#1ã€æ­£å‘ä»£ç†" class="headerlink" title="1ã€æ­£å‘ä»£ç†"></a>1ã€æ­£å‘ä»£ç†</h3><p>ç†è§£ï¼š</p><blockquote><p>ä»£ç†å®¢æˆ·ç«¯ï¼Œå¦‚é€šè¿‡VPN ï¼Œéšè—å®¢æˆ·ç«¯ï¼Œè®¿é—®ç›®æ ‡æœåŠ¡å™¨ï¼ˆæœåŠ¡ç«¯å¯è§ï¼‰</p></blockquote><p>ä¸¾ä¾‹ï¼š</p><blockquote><p>å›½å†…ä¸èƒ½ç›´æ¥è®¿é—®è°·æ­Œï¼Œä½†æ˜¯å¯ä»¥è®¿é—®ä»£ç†æœåŠ¡å™¨ï¼Œé€šè¿‡ä»£ç†æœåŠ¡å™¨å¯ä»¥è®¿é—®è°·æ­Œã€‚ï¼ˆå°±æ˜¯ç¿»å¢™ï¼‰</p><p>ä½†æ˜¯ï¼Œéœ€è¦å®¢æˆ·ç«¯å¿…é¡»è®¾ç½®æ­£å‘ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶ä¸”è¦çŸ¥é“æ­£å‘ä»£ç†æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£</p></blockquote><h3 id="2ã€åå‘ä»£ç†"><a href="#2ã€åå‘ä»£ç†" class="headerlink" title="2ã€åå‘ä»£ç†"></a>2ã€åå‘ä»£ç†</h3><p>ç†è§£ï¼š</p><blockquote><p>ä»£ç†æœåŠ¡ç«¯ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼ˆå¦‚Nginxï¼‰ï¼Œéšè—æœåŠ¡ç«¯ï¼Œåˆ†å‘å®¢æˆ·ç«¯çš„ä¸åŒè¯·æ±‚ï¼ˆå®¢æˆ·ç«¯å¯è§ï¼‰åˆ°å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨</p></blockquote><p>ä¸¾ä¾‹ï¼š</p><blockquote><p>å¦‚æˆ‘ä»¬è®¿é—®<a href="http://www.baidu.comçš„æ—¶å€™ï¼Œå®ƒèƒŒåæœ‰å¾ˆå¤šå°æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªä¸€å°æœåŠ¡å™¨ç»™ä½ æä¾›çš„æœåŠ¡ï¼Œåªè¦çŸ¥é“åå‘ä»£ç†æœåŠ¡å™¨æ˜¯è°å°±å¥½äº†ï¼Œåå‘ä»£ç†æœåŠ¡å™¨å°±ä¼šæŠŠæˆ‘ä»¬çš„è¯·æ±‚è½¬å‘åˆ°çœŸå®æœåŠ¡å™¨ä¸Šã€‚" target="_blank" rel="noopener">www.baidu.comçš„æ—¶å€™ï¼Œå®ƒèƒŒåæœ‰å¾ˆå¤šå°æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªä¸€å°æœåŠ¡å™¨ç»™ä½ æä¾›çš„æœåŠ¡ï¼Œåªè¦çŸ¥é“åå‘ä»£ç†æœåŠ¡å™¨æ˜¯è°å°±å¥½äº†ï¼Œåå‘ä»£ç†æœåŠ¡å™¨å°±ä¼šæŠŠæˆ‘ä»¬çš„è¯·æ±‚è½¬å‘åˆ°çœŸå®æœåŠ¡å™¨ä¸Šã€‚</a></p></blockquote><p>Nginxå°±æ˜¯æ€§èƒ½å¾ˆå¥½çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”¨æ¥ä½œè´Ÿè½½å‡è¡¡ã€‚</p><h2 id="ä¸‰ã€Nginxçš„sessionä¸€è‡´æ€§é—®é¢˜"><a href="#ä¸‰ã€Nginxçš„sessionä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="ä¸‰ã€Nginxçš„sessionä¸€è‡´æ€§é—®é¢˜"></a>ä¸‰ã€Nginxçš„sessionä¸€è‡´æ€§é—®é¢˜</h2><h4 id="1ã€èƒŒæ™¯ï¼š"><a href="#1ã€èƒŒæ™¯ï¼š" class="headerlink" title="1ã€èƒŒæ™¯ï¼š"></a>1ã€èƒŒæ™¯ï¼š</h4><p>httpåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œå¤šæ¬¡è®¿é—®å¦‚æœæ˜¯ä¸åŒæœåŠ¡å™¨å“åº”è¯·æ±‚ï¼Œå°±ä¼šå‡ºç°ä¸Šæ¬¡è®¿é—®ç•™ä¸‹çš„sessionæˆ–cookieå¤±æ•ˆã€‚è¿™å°±å¼•å‘äº†sessionå…±äº«çš„é—®é¢˜ã€‚</p><h4 id="2ã€Sessionä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ"><a href="#2ã€Sessionä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2ã€Sessionä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ"></a>2ã€Sessionä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ</h4><p>ï¼ˆ1ï¼‰â€“sessionå¤åˆ¶<br>   tomcat æœ¬èº«å¸¦æœ‰å¤åˆ¶sessionçš„åŠŸèƒ½ã€‚</p><p>ï¼ˆ2ï¼‰-å…±äº«session</p><p>  éœ€è¦ä¸“é—¨ç®¡ç†sessionçš„è½¯ä»¶ï¼Œ<br>   memcached ç¼“å­˜æœåŠ¡ï¼Œå¯ä»¥å’Œtomcatæ•´åˆï¼Œå¸®åŠ©tomcatå…±äº«ç®¡ç†sessionã€‚</p><h4 id="3ã€å®‰è£…memcached"><a href="#3ã€å®‰è£…memcached" class="headerlink" title="3ã€å®‰è£…memcached"></a>3ã€å®‰è£…memcached</h4><p>memcached ï¼ˆåŒredisä¸€æ ·ï¼‰æ˜¯åŸºäºå†…å­˜çš„æ•°æ®åº“</p><p>1ã€å®‰è£…</p><blockquote><p>  yum â€“y install memcached</p></blockquote><blockquote><p>   å¯ä»¥ç”¨telnet localhost 11211</p></blockquote><blockquote><p>   å¯åŠ¨ï¼š memcached -d -m 128m -p 11211 -l 192.168.235.113 -u root -P /tmp/</p></blockquote><p>2.webæœåŠ¡å™¨è¿æ¥memcachedçš„jaråŒ…æ‹·è´åˆ°tomcatçš„libç›®å½•ä¸‹</p><p><code>è®¿é—®TomcatæœåŠ¡å™¨æœŸé—´äº§ç”Ÿçš„sessioné€šè¿‡ç›¸å…³jaråŒ…ï¼Œæ‰èƒ½å†™å…¥åˆ°memcachedæ•°æ®åº“ä¸­</code></p><blockquote><p>memcached-session-manager-1.7.0.jar</p><p>memcached-session-manager-tc7-1.8.1.jar</p></blockquote><p>3.é…ç½®tomcatçš„confç›®å½•ä¸‹çš„context.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Manager</span> <span class="attr">className</span>=<span class="string">"de.javakaffee.web.msm.MemcachedBackupSessionManager"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">memcachedNodes</span>=<span class="string">"n1:192.168.198.128:11211"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">sticky</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">lockingMode</span>=<span class="string">"auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">sessionBackupAsync</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">requestUriIgnorePattern</span>=<span class="string">".*\.(ico|png|gif|jpg|css|js)$"</span></span></span><br><span class="line"><span class="tag"><span class="attr">sessionBackupTimeout</span>=<span class="string">"1000"</span> <span class="attr">transcoderFactoryClass</span>=<span class="string">"de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®memcachedNodeså±æ€§ï¼Œ</p><blockquote><p>é…ç½®memcachedæ•°æ®åº“çš„ipå’Œç«¯å£ï¼Œé»˜è®¤11211ï¼Œå¤šä¸ªçš„è¯ç”¨é€—å·éš”å¼€.</p><p>ç›®çš„æ˜¯ä¸ºäº†è®©tomcatæœåŠ¡å™¨ä»memcachedç¼“å­˜é‡Œé¢æ‹¿sessionæˆ–è€…æ˜¯æ”¾session</p></blockquote><p>å°†é…ç½®å®Œæˆçš„context.xmlå‘é€åˆ°å…¶ä»–è™šæ‹Ÿæœºå™¨ä¸Š</p><blockquote><p>scp -r context.xml root@node01:<code>pwd</code></p><p>æˆ–</p><p>scp -r context.xml node01:<code>pwd</code></p><p>æˆ–</p><p>scp -r context.xml <a href="mailto:root@192.168.198.130" target="_blank" rel="noopener">root@192.168.198.130</a>:<code>pwd</code></p></blockquote><p>4.ä¿®æ”¹tomcatç›®å½•ä¸­webapps/ROOTä¸‹çš„ index.jspï¼Œå–sessionidçœ‹ä¸€çœ‹</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span>  pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">SessionID:&lt;%=session.getId()%&gt;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">SessionIP:&lt;%=request.getServerName()%&gt;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">&lt;h1&gt;tomcat1&lt;/h1&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è´Ÿè½½å‡è¡¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/12/19/hello-world/"/>
      <url>/2018/12/19/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
