<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[SparkÂ≠¶‰π†(‰∫å)]]></title>
    <url>%2F2019%2F02%2F17%2FSpark%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[[TOC] ‰∏Ä„ÄÅÊéßÂà∂ÁÆóÂ≠ê1„ÄÅÊ¶ÇÂøµÔºö ÊéßÂà∂ÁÆóÂ≠êÊúâ‰∏âÁßçÔºåcache„ÄÅpersist„ÄÅcheckpoint ‰ª•‰∏äÁÆóÂ≠êÈÉΩÂèØ‰ª•Â∞ÜRDD ÊåÅ‰πÖÂåñÔºåÊåÅ‰πÖÂåñÁöÑÂçï‰ΩçÊòØ partition„ÄÇ cache Âíå persist ÈÉΩÊòØÊáí ÊâßË°åÁöÑ„ÄÇ ÂøÖÈ°ªÊúâ‰∏Ä‰∏™ action Á±ªÁÆóÂ≠êËß¶ÂèëÊâßË°å„ÄÇ cache Âíå persist ÁÆóÂ≠êÁöÑËøîÂõûÂÄºÂèØËµãÂÄºÁªô‰∏Ä‰∏™ÂèòÈáèÔºåÂú®ÂÖ∂‰ªñ job ‰∏≠Áõ¥Êé•‰ΩøÁî®Ëøô‰∏™ÂèòÈáèÂ∞±ÊòØ‰ΩøÁî®ÊåÅ‰πÖÂåñÁöÑÊï∞ÊçÆ‰∫Ü checkpoint ÁÆóÂ≠ê‰∏ç‰ªÖËÉΩÂ∞Ü RDD ÊåÅ‰πÖÂåñÂà∞Á£ÅÁõòÔºåËøòËÉΩÂàáÊñ≠ RDD ‰πãÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ªÔºàÊâÄÊúâÁà∂RDDÔºâ„ÄÇ ÈîôËØØÔºördd.cache().count() ËøîÂõûÁöÑ‰∏çÊòØÊåÅ‰πÖÂåñÁöÑ RDDÔºåËÄåÊòØ‰∏Ä‰∏™Êï∞ÂÄº‰∫Ü„ÄÇ 2„ÄÅËØ¶Ëß£ :one:‚Äã cacheÈªòËÆ§Â∞Ü RDD ÁöÑÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇcache ÊòØÊáíÊâßË°å„ÄÇ ÔÇ¨ Ê≥®ÊÑèÔºö chche () =persist()=persist(StorageLevel.Memory_Only) :two: persist ÊîØÊåÅÊåáÂÆöÊåÅ‰πÖÂåñÁ∫ßÂà´ useOffHeap ‰ΩøÁî®Â†ÜÂ§ñÂÜÖÂ≠ò disk„ÄÅmemory„ÄÅoffheap„ÄÅdeserializedÔºà‰∏çÂ∫èÂàóÂåñÔºâ„ÄÅreplicationÔºàÂâØÊú¨Êï∞ÔºåÈªòËÆ§‰∏∫1Ôºâ Â∫èÂàóÂåñÔºöÂéãÁº©Êï∞ÊçÆÔºàËäÇÁúÅÁ©∫Èó¥Ôºå‰ΩøÁî®Êï∞ÊçÆÊó∂Ë¶ÅÂèçÂ∫èÂàóÂåñÔºå‰ºöÈ¢ùÂ§ñÊ∂àËÄóCPUÊÄßËÉΩÔºâ none „ÄÅdisk_only„ÄÅdisk_only_2„ÄÅmemeory_only „ÄÅmemeory_only _ser „ÄÅ memory_and_disk „ÄÅ memory_and_disk_2 :three: checkpoint checkpoint Â∞Ü RDD ÊåÅ‰πÖÂåñÂà∞Á£ÅÁõòÔºåËøòÂèØ‰ª•ÂàáÊñ≠ RDD ‰πãÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ª„ÄÇ checkpoint ÁöÑÊâßË°åÂéüÁêÜÔºö ÂΩì RDD ÁöÑ job ÊâßË°åÂÆåÊØïÂêéÔºå‰ºö‰ªé finalRDD ‰ªéÂêéÂæÄÂâçÂõûÊ∫Ø„ÄÇ ÂΩìÂõûÊ∫ØÂà∞Êüê‰∏Ä‰∏™ RDD Ë∞ÉÁî®‰∫Ü checkpoint ÊñπÊ≥ïÔºå‰ºöÂØπÂΩìÂâçÁöÑRDD ÂÅö‰∏Ä‰∏™Ê†áËÆ∞„ÄÇ Spark Ê°ÜÊû∂‰ºöËá™Âä®ÂêØÂä®‰∏Ä‰∏™Êñ∞ÁöÑ jobÔºåÈáçÊñ∞ËÆ°ÁÆóËøô‰∏™ RDD ÁöÑÊï∞ÊçÆÔºåÂ∞ÜÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞ HDFS ‰∏ä„ÄÇ ‰ºòÂåñÔºö ÂØπ RDD ÊâßË°å checkpoint ‰πãÂâçÔºåÊúÄÂ•ΩÂØπËøô‰∏™ RDD ÂÖàÊâßË°åcacheÔºåËøôÊ†∑Êñ∞ÂêØÂä®ÁöÑ job Âè™ÈúÄË¶ÅÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÊã∑Ë¥ùÂà∞ HDFS‰∏äÂ∞±ÂèØ‰ª•ÔºåÁúÅÂéª‰∫ÜÈáçÊñ∞ËÆ°ÁÆóËøô‰∏ÄÊ≠•„ÄÇ ÊåÅ‰πÖÂåñÁ∫ßÂà´ÔºöÂ¶Ç‰∏ã 1234567891011121314151617181920212223242526val cocnf = new SparkConf()conf.setMaster("local").setAppname("count")val context = new SparkContext()//ËÆæÁΩÆCPÂú®HDFS‰∏äÁöÑË∑ØÂæÑcontext.setCheckPointDir("")val lineADD = context.textFile("./countword.txt")val time1 = System.currentTimeMillis()val c = lineADD.count()val time2 = System.currentTimeMillis()val t1 = time2 - time1//ÂÅöÁºìÂ≠ò(persisitÔºàm_oÔºâ)linelineADD = lineADD.cache()//ÂÅöÊåÅ‰πÖÂåñlineADD.persisit(StorageLevel.memory_only)//checkpoint ÂÆπÈîô,ÊúÄÂ•ΩËøòÊúâcachelineADD.checkpoint()val time3 = System.currentTimeMillis()val c = lineADD.count()val time4 = System.currentTimeMillis()val t2 = time4 - time3//t1 ËøúÂ§ß‰∫é t2 ‰∫å„ÄÅÁÆóÂ≠êË°•ÂÖÖtransformationËΩ¨Êç¢ÁÆóÂ≠ê 12&gt; join,leftOuterJoin,rightOuterJoin,fullOuterJoin&gt; ‰ΩúÁî®Âú® K,V Ê†ºÂºèÁöÑ RDD ‰∏ä„ÄÇÊ†πÊçÆ K ËøõË°åËøûÊé•ÔºåÂØπÔºàK,VÔºâjoin(K,W)ËøîÂõûÔºàK,(V,W)Ôºâ join ÂêéÁöÑÂàÜÂå∫Êï∞‰∏éÁà∂ RDD ÂàÜÂå∫Êï∞Â§öÁöÑÈÇ£‰∏Ä‰∏™Áõ∏Âêå 12&gt; union&gt; ÂêàÂπ∂‰∏§‰∏™Êï∞ÊçÆÈõÜ„ÄÇ‰∏§‰∏™Êï∞ÊçÆÈõÜÁöÑÁ±ªÂûãË¶Å‰∏ÄËá¥„ÄÇ ËøîÂõûÊñ∞ÁöÑ RDD ÁöÑÂàÜÂå∫Êï∞ÊòØÂêàÂπ∂ RDD ÂàÜÂå∫Êï∞ÁöÑÊÄªÂíå„ÄÇ 12&gt; intersection&gt; Âèñ‰∏§‰∏™Êï∞ÊçÆÈõÜÁöÑ‰∫§ÈõÜ 12&gt; subtract&gt; Âèñ‰∏§‰∏™Êï∞ÊçÆÈõÜÁöÑÂ∑ÆÈõÜ 12&gt; mapPartition&gt; ‰∏é map Á±ª‰ººÔºåÈÅçÂéÜÁöÑÂçï‰ΩçÊòØÊØè‰∏™ partition ‰∏äÁöÑÊï∞ÊçÆ„ÄÇ 12&gt; distinct(map+reduceByKey+map)&gt; 12&gt; cogroup&gt; ÂΩìË∞ÉÁî®Á±ªÂûãÔºàK,VÔºâÂíåÔºàKÔºåWÔºâÁöÑÊï∞ÊçÆ‰∏äÊó∂ÔºåËøîÂõû‰∏Ä‰∏™Êï∞ÊçÆÈõÜÔºàKÔºåÔºàIterable,IterableÔºâÔºâ actionËß¶ÂèëÁÆóÂ≠ê 12&gt; foreachPartition&gt; ÈÅçÂéÜÁöÑÊï∞ÊçÆÊòØÊØè‰∏™ partition ÁöÑÊï∞ÊçÆ„ÄÇ ‰∏â„ÄÅÈõÜÁæ§Êê≠Âª∫ÂèäÊµãËØïStandalone1„ÄÅ‰∏ãËΩΩÂÆâË£ÖÂåÖ„ÄÅËß£ÂéãSparkÂéÜÂè≤ÁâàÊú¨‰∏ãËΩΩ Ê≥®ÊÑèÔºö ‰∏éHadoopÁöÑÁâàÊú¨‰øùÊåÅÂØπÂ∫î„ÄÇ Ê≠§Â§Ñ‰ΩøÁî®Ôºö spark-1.6.0-bin-hadoop2.6.tgz 1tar -zvxf spark-1.6.0-bin-hadoop2.6.tgz 2„ÄÅÊîπÂêç1mv spark-1.6.0-bin-hadoop2.6 spark-1.6.0 3„ÄÅ‰øÆÊîπslavesËøõÂÖ•ÂÆâË£ÖÂåÖÁöÑconfÁõÆÂΩï‰∏ãÔºå‰øÆÊîπslaves.templateÊñá‰ª∂ÔºåÊ∑ªÂä†‰ªéËäÇÁÇπ„ÄÇÂπ∂‰øùÂ≠ò„ÄÇ 123#Â§á‰ªΩcp slaves.template slavesvim slaves Â∏∏È©ªËøõÁ®ãÔºömaster„ÄÅworker ÈÖçÁΩÆslavesÔºà‰∏éworkerÂØπÂ∫îÔºâ 12node01node02 4„ÄÅ‰øÆÊîπ spark-env.shÊîπÂêçÔºàÂ§á‰ªΩÔºâ 1cp spark-env.sh.template spark-env.sh ÈÖçÁΩÆspark-env.shÔºàÊ≥®ÊÑè‰∏éËôöÊãüÊú∫ÂÆûÈôÖÈÖçÁΩÆÂØπÂ∫îÔºâ 1234567891011121314151617#locally#cluster#YARN client#standalone deploy#ÈÖçÁΩÆ java_home Ë∑ØÂæÑJAVA_HOME=/usr/soft/jdk1.8.0_191#master ÁöÑ ipSPARK_MASTER_IP=192.168.198.128#Êèê‰∫§‰ªªÂä°ÁöÑÁ´ØÂè£ÔºåÈªòËÆ§ÊòØ 7077SPARK_MASTER_PORT=7077#ÊØè‰∏™ worker ‰ªéËäÇÁÇπËÉΩÂ§üÊîØÈÖçÁöÑ core ÁöÑ‰∏™Êï∞SPARK_WORKER_CORES=2#ÊØè‰∏™ worker ‰ªéËäÇÁÇπËÉΩÂ§üÊîØÈÖçÁöÑÂÜÖÂ≠òÊï∞SPARK_WORKER_MEMORY=1024m#ÈÖçÁΩÆyarnHADOOP_CONF_DIR=/usr/soft/hadoop-2.6.5/etc/hadoop 5„ÄÅÂÖ∂‰ªñËäÇÁÇπÂ∞ÜsparkËß£ÂéãÊñá‰ª∂ÂèëÈÄÅÂà∞ÂÖ∂‰ªñ‰∏§‰∏™ËäÇÁÇπ 12[root@node00 soft]# scp -r spark-1.6.0-bin-hadoop2.6 node01:`pwd`[root@node00 soft]# scp -r spark-1.6.0-bin-hadoop2.6 node02:`pwd` 6„ÄÅÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèÔºàÂèØ‰∏çÈÖçÔºåÂõ†‰∏∫binË∑ØÂæÑ‰∏≠ÂåÖÂê´start-all ÔºåËØ•ÂëΩ‰ª§‰∏éhdfs‰∏≠ÁöÑÂëΩ‰ª§‰ºöÂÜ≤Á™ÅÔºâ 7„ÄÅÂêØÂä®Ôºö(node00)Âú®sparkÁöÑËß£ÂéãÊñá‰ª∂ÁöÑ/sbin ÁõÆÂΩï‰∏ã 1./start-all.sh ÂÅúÊ≠¢ 1./stop-all.sh ÊòæÁ§∫Ôºö [root@node00 sbin]# ./start-all.shstarting org.apache.spark.deploy.master.Master, logging to /usr/soft/spark-1.6.0-bin-hadoop2.6/logs/spark-root-org.apache.spark.deploymaster.Master-1-node00.out node01: starting org.apache.spark.deploy.worker.Worker, logging to /usr/soft/spark-1.6.0-bin-hadoop2.6/logs/spark-root-org.apache.spar.deploy.worker.Worker-1-node01.out node02: starting org.apache.spark.deploy.worker.Worker, logging to /usr/soft/spark-1.6.0-bin-hadoop2.6/logs/spark-root-org.apache.spar.deploy.worker.Worker-1-node02.out Êü•Áúã‰∏âÂè∞ËäÇÁÇπÁöÑËøõÁ®ã node00ÔºàÂëΩ‰ª§ÂêØÂä®ÁöÑËäÇÁÇπÔºâ 12&gt; [root@node00 sbin]# jps&gt; 2343 Master2408 Jps nose01(ÈÖçÁΩÆÁöÑ‰ªéËäÇÁÇπ) 12&gt; [root@node01 ~]# jps&gt; 2292 Jps2229 Worker node02(‰ªéËäÇÁÇπ) 12&gt; [root@node02 ~]# jps&gt; 6216 Worker6266 Jps Ê≥®ÊÑèÔºö WorkerÂú®ËøôÈáå‰∏çÊòØÁúüÊ≠£Âπ≤Ê¥ªÁöÑËøõÁ®ãÔºåËÄåÊòØÁõ∏ÂΩì‰∫éYarn‰∏≠ÁöÑNM„ÄÇ ÂÆÉÊòØË¥üË¥£ÁÆ°ÁêÜÊâÄÂú®ËäÇÁÇπËµÑÊ∫êÁöÑ„ÄÅÂêëMasterÊ±áÊä•ÊâÄÂú®ËäÇÁÇπÁöÑ‰ø°ÊÅØÔºàÂ¶ÇÊ†∏Êï∞„ÄÅÂÜÖÂ≠òÊï∞Ôºâ MasterÔºö ÁõëÊéß‰ªªÂä°„ÄÅÂàÜÂèë‰ªªÂä°„ÄÅÂõûÊî∂ËÆ°ÁÆóÁªìÊûú 8„ÄÅÊê≠Âª∫ÂÆ¢Êà∑Á´Ø Â∞Ü spark ÂÆâË£ÖÂåÖÂéüÂ∞Å‰∏çÂä®ÁöÑÊã∑Ë¥ùÂà∞‰∏Ä‰∏™Êñ∞ÁöÑËäÇÁÇπ‰∏äÔºåÁÑ∂ÂêéÔºåÂú®Êñ∞ÁöÑËäÇÁÇπ‰∏äÊèê‰∫§‰ªªÂä°Âç≥ÂèØ„ÄÇ Ê≥®ÊÑèÔºö8080 ÊòØSpark WEBUIÈ°µÈù¢ÁöÑÁ´ØÂè£ Ôºõ 7077 ÊòØSpark‰ªªÂä°Êèê‰∫§ÁöÑÁ´ØÂè£ webÈ°µÈù¢ËÆøÈóÆÔºöip:8080 ‰øÆÊîπmasterÁöÑWEBUIÁ´ØÂè£Ôºå ÊñπÊ≥ï‰∏ÄÔºàÊ∞∏‰πÖÔºâÔºöÈÄöËøá‰øÆÊîπstart-master.sh Êñá‰ª∂ÔºàÂú®/sbinÁõÆÂΩï‰∏ãÔºâ 1vim start-master.sh ÊâæÂà∞Êñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÁöÑÈÉ®ÂàÜÔºö 123if [ &quot;$SPARK_MASTER_WEBUI_PORT&quot; = &quot;&quot; ]; then SPARK_MASTER_WEBUI_PORT=8080fi ÊñπÊ≥ï‰∫åÔºöÂú® Master ËäÇÁÇπ‰∏äÂØºÂÖ•‰∏¥Êó∂ÁéØÂ¢ÉÂèòÈáèÔºåÂè™‰ΩúÁî®‰∫éÂΩìÂâçËøõÁ®ãÔºåÈáçÂêØÂ∞±Êó†Êïà‰∫Ü„ÄÇ 1[root@node00 sbin]# export SPARK_MASTER_WEBUI_PORT=8080 Âà†Èô§‰∏¥Êó∂ÂèòÈáè 1[root@node00 sbin]# export -n SPARK_MASTER_WEBUI_PORT Yarn1„ÄÅÊ≠•È™§1„ÄÇ2„ÄÇ3„ÄÇ4„ÄÇ5„ÄÇ8„ÄÇÂêåstandalone ‰∏çÁî®MasterÂíåWorkerÔºåÊâÄ‰ª•‰∏çÁî®Á¨¨7Ê≠•ÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØyarn‰∏≠ÁöÑRMÂíåNM 2„ÄÅÈÖçÁΩÆÊ∑ªÂä† HADOOP_CONF_DIRÈÖçÁΩÆ ÔºàÂú®‰ΩøÁî®YarnÊó∂ÔºåÂ∞±ËÉΩÊâæÂà∞ÂÖ≥‰∫éhdfsÁöÑÊâÄÊúâÈÖçÁΩÆÔºåÂÖ∂‰∏≠Â∞±ÂåÖÊã¨IP ÂíåPortÔºâ ÊñπÂºè‰∏ÄÔºö ÁºñËæëspark-env.shÊñá‰ª∂ ÊñπÂºè‰∫åÔºö 1export HADOOP_CONF_DIR=/usr/soft/hadoop-2.6.5/etc/hadoop ÊµãËØïÔºöÊ±ÇœÄÂÄºPiÊ°à‰æãÔºö Ê∫êÁ†ÅÊ°à‰æãÔºöË∑ØÂæÑÔºöÂú®sparkËß£ÂéãË∑ØÂæÑspark-1.6.0-bin-hadoop2.6‰∏≠ spark-1.6.0-bin-hadoop2.6/examples/src/main/scala/org/apache/spark/examples/SparkPi.scala ÂéüÁêÜÔºöÈöèÊú∫‰∫ßÁîüÊó†Á©∑Â§ö‰∏™ÁÇπËêΩÂÖ•Â¶Ç‰∏äÂõæÂΩ¢‰∏≠ÔºåÊ±ÇËêΩÂÖ•ÂúÜ‰∏≠ÁöÑÊ¶ÇÁéáÔºö$$Ê¶ÇÁéá p = œÄrr/(2r*2r)=œÄ$$ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */// scalastyle:off printlnpackage org.apache.spark.examplesimport scala.math.randomimport org.apache.spark._/** Computes an approximation to pi */object SparkPi &#123; def main(args: Array[String]) &#123; val conf = new SparkConf("local").setAppName("Spark Pi") val spark = new SparkContext(conf) // args ËøêË°åÊó∂‰º†ÂÖ•ÁöÑÂèÇÊï∞ slices ÂàÜÂå∫Êï∞Èáè (ÂÜ≥ÂÆötaskÊï∞Èáè) val slices = if (args.length &gt; 0) args(0).toInt else 2 //MaxValue ‰∏Ä‰∏™Êó†ÈôêÂ§ßÁöÑÊï∞ n ÈöèÊú∫‰∫ßÁîüÁöÑÂçÅ‰∏á‰∏™ÁöÑÊï∞ val n = math.min(100000L * slices, Int.MaxValue).toInt // avoid overflow //parallelizeÂèØ‰ª•Ëé∑ÂæóRDD ÔºåÂ∞Ü1~n‰∏™Êï∞Â≠óÊîæÂà∞RDD‰∏≠ //val count :[Int] = spark.parallelize(1 until n, slices) val count = spark.parallelize(1 until n, slices).map &#123; i =&gt; val x = random * 2 - 1 val y = random * 2 - 1 if (x*x + y*y &lt; 1) 1 else 0 &#125;.reduce(_ + _) println("Pi is roughly " + 4.0 * count / n) spark.stop() &#125;&#125;// scalastyle:on println ÊâÄÈúÄ‰ΩøÁî®ÁöÑjarÂåÖÔºöspark-examples-1.6.0-hadoop2.6.0.jar ‰ΩçÁΩÆÔºöËß£ÂéãÁõÆÂΩïÁöÑlibË∑ØÂæÑ‰∏ã Âú®‰ªª‰∏ÄËäÇÁÇπÁöÑ/binË∑ØÂæÑ‰∏ã‰∏äÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ÔºöÔºànode00Ôºâ Standalone Êèê‰∫§ÂëΩ‰ª§:12345./spark-submit #Êèê‰∫§spark --master spark://node1:7077 #spark‰∏ªËäÇÁÇπÁöÑÂú∞ÂùÄÂíåÁ´ØÂè£ --class org.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar 100 # ÊåáÊòéËøêË°åÁöÑjarÂåÖ+Ë∑ØÂæÑ Âíå jarÂåÖ‰∏≠ÊâßË°åÁöÑÂåÖÂêç+Á±ªÂêç 100 ‰∏∫‰º†ÂÖ•ÁöÑÂèÇÊï∞./spark-submit --master spark://node00:7077 --class org.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar 1000 ÊòæÁ§∫Ôºö Êèê‰∫§ÂëΩ‰ª§ÁöÑËäÇÁÇπÔºànode00‰∏ªËäÇÁÇπÔºâ ‰ºöÊòæÁ§∫ÊâßË°åÊó•Âøó„ÄÅËøêÁÆóÁªìÊûú 12345678910111213141516171819202122232425262728293031323334&gt; 19/02/13 23:27:31 INFO scheduler.TaskSetManager: Starting task 999.0 in stage 0.0 (TID 999, node02, partition 999,PROCESS_LOCAL, 2158 bytes)&gt; 19/02/13 23:27:31 INFO scheduler.TaskSetManager: Finished task 995.0 in stage 0.0 (TID 995) in 68 ms on node02 (996/1000)&gt; 19/02/13 23:27:31 INFO scheduler.TaskSetManager: Finished task 997.0 in stage 0.0 (TID 997) in 131 ms on node01 (997/1000)&gt; 19/02/13 23:27:31 INFO scheduler.TaskSetManager: Finished task 996.0 in stage 0.0 (TID 996) in 147 ms on node01 (998/1000)&gt; 19/02/13 23:27:31 INFO scheduler.TaskSetManager: Finished task 999.0 in stage 0.0 (TID 999) in 112 ms on node02 (999/1000)&gt; 19/02/13 23:27:31 INFO scheduler.TaskSetManager: Finished task 998.0 in stage 0.0 (TID 998) in 115 ms on node02 (1000/1000)&gt; 19/02/13 23:27:31 INFO scheduler.DAGScheduler: ResultStage 0 (reduce at SparkPi.scala:36) finished in 79.202 s&gt; 19/02/13 23:27:31 INFO scheduler.TaskSchedulerImpl: Removed TaskSet 0.0, whose tasks have all completed, from pool &gt; 19/02/13 23:27:31 INFO scheduler.DAGScheduler: Job 0 finished: reduce at SparkPi.scala:36, took 82.641779 s&gt; &gt; Pi is roughly 3.14148344 #ËøêÁÆóÁªìÊûú&gt; &gt; 19/02/13 23:27:32 INFO handler.ContextHandler: stopped o.s.j.s.ServletContextHandler&#123;/metrics/json,null&#125;&gt; 19/02/13 23:27:32 INFO handler.ContextHandler: stopped o.s.j.s.ServletContextHandler&#123;/stages/stage/kill,null&#125;&gt; 19/02/13 23:27:32 INFO handler.ContextHandler: stopped o.s.j.s.ServletContextHandler&#123;/api,null&#125;&gt; „ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ&gt; 19/02/13 23:27:32 INFO handler.ContextHandler: stopped o.s.j.s.ServletContextHandler&#123;/jobs/json,null&#125;&gt; 19/02/13 23:27:32 INFO handler.ContextHandler: stopped o.s.j.s.ServletContextHandler&#123;/jobs,null&#125;&gt; 19/02/13 23:27:32 INFO ui.SparkUI: Stopped Spark web UI at http://192.168.198.128:4040&gt; 19/02/13 23:27:32 INFO cluster.SparkDeploySchedulerBackend: Shutting down all executors&gt; 19/02/13 23:27:32 INFO cluster.SparkDeploySchedulerBackend: Asking each executor to shut down&gt; 19/02/13 23:27:32 INFO spark.MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!&gt; 19/02/13 23:27:33 INFO storage.MemoryStore: MemoryStore cleared&gt; 19/02/13 23:27:33 INFO storage.BlockManager: BlockManager stopped&gt; 19/02/13 23:27:33 INFO storage.BlockManagerMaster: BlockManagerMaster stopped&gt; 19/02/13 23:27:33 INFO scheduler.OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!&gt; 19/02/13 23:27:33 INFO remote.RemoteActorRefProvider$RemotingTerminator: Shutting down remote daemon.&gt; 19/02/13 23:27:33 INFO remote.RemoteActorRefProvider$RemotingTerminator: Remote daemon shut down; proceeding with flushing remote transports.&gt; 19/02/13 23:27:34 INFO spark.SparkContext: Successfully stopped SparkContext&gt; 19/02/13 23:27:34 INFO util.ShutdownHookManager: Shutdown hook called&gt; 19/02/13 23:27:34 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-f7c2019e-10f4-4b31-9308-5a94603de113&gt; 19/02/13 23:27:35 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-f7c2019e-10f4-4b31-9308-5a94603de113/httpd-39b8b4b3-9b80-4247-9c7e-ed6bd2dc389f&gt; &gt; Âú®ÂëΩ‰ª§ÊâßË°åÊúüÈó¥Ôºö Âú®‰∏â‰∏™ËäÇÁÇπÊï≤Â¶Ç‰∏ãÂëΩ‰ª§ÔºöjpsÔºå‰ºöÊòæÁ§∫Ôºö node00Ôºö 123456&gt; [root@node00 ~]# jps&gt; 4903 Jps&gt; 2343 Master&gt; 4764 SparkSubmit #‰ª£Ë°®ÊòØÊèê‰∫§sparkÁöÑËäÇÁÇπ (‰∏é‰∏ª‰ªéÊó†ÂÖ≥)&gt; &gt; node01Âíånode02Ôºö 12345&gt; [root@node01 bin]# jps&gt; 2229 Worker&gt; 5096 CoarseGrainedExecutorBackend #‰ª£Ë°®ÊòØÂπ≤Ê¥ªÁöÑËäÇÁÇπ Ôºà‰ªÖ‰∏∫‰ªéËäÇÁÇπËøõÁ®ãÔºâ&gt; 5167 Jps&gt; Â¶ÇÊûúÊèê‰∫§ÂëΩ‰ª§ÁöÑËäÇÁÇπÊòØ‰ªéËäÇÁÇπÔºànode01ÔºâÔºåÂàôÂú®ËØ•ËäÇÁÇπ‰∏ä‰ºöÊòæÁ§∫ÊâßË°åÊó•Âøó„ÄÅËøêÁÆóÁªìÊûú ÂàôÂú®Êèê‰∫§ËøáÁ®ã‰∏≠ÔºåÊï≤ÂëΩ‰ª§Ôºöjps ËØ•ËäÇÁÇπ‰ºöÊòæÁ§∫ 1234567&gt; [root@node01 ~]# jps&gt; 5298 CoarseGrainedExecutorBackend #‰ª£Ë°®ÊòØÂπ≤Ê¥ªÁöÑËäÇÁÇπ Ôºà‰ªÖ‰∏∫‰ªéËäÇÁÇπËøõÁ®ãÔºâ&gt; 2229 Worker&gt; 5323 Jps&gt; 5213 SparkSubmit #‰ª£Ë°®ÊòØÊèê‰∫§sparkÁöÑËäÇÁÇπ (‰∏é‰∏ª‰ªéÊó†ÂÖ≥)&gt; &gt; YARN Êèê‰∫§ÂëΩ‰ª§ÔºöÂü∫‰∫éHadoop Ôºö NN DN JN ZKFC ZK RM RM node00 ‚àö ‚àö ‚àö ‚àö ‚àö ‚àö node01 ‚àö ‚àö ‚àö ‚àö ‚àö ‚àö ‚àö node02 ‚àö ‚àö ‚àö ‚àö ‚àö ÂêØÂä®zookeeper ÔºöÔºà3Âè∞Ôºâ 1zkServer.sh start ÂêØÂä®hdfs ÔºöÔºà1Âè∞Ôºâ 1start-all.sh Áõ∏ÂΩì‰∫éÔºöInstead use start-dfs.sh and start-yarn.sh ÂêØÂä®resourcemanager Ôºö(Âú®RMÁöÑ‰∏ªËäÇÁÇπ‰∏äÂêØÂä® Ôºö1Âè∞) 1yarn-daemon.sh start resourcemanager Âú®‰ªª‰∏ÄËäÇÁÇπÁöÑ/binË∑ØÂæÑ‰∏ãÊâßË°åÔºöÔºànode01Ôºâ 12345./spark-submit--master yarn #HADOOP_CONF_DIRÈÖçÁΩÆ‰ΩøÂæóÂú®‰ΩøÁî®YarnÊó∂ËÉΩÊâæÂà∞hdfsÁöÑÊâÄÊúâÈÖçÁΩÆÔºåÂÖ∂‰∏≠Â∞±ÊúâIP ÂíåPort--class org.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar 100./spark-submit --master yarn --class org.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar 1000 ÊòæÁ§∫ ÊâßË°åÊó•Âøó„ÄÅËÆ°ÁÆóÁªìÊûú‰ºöÂú®ÊâßË°åÊèê‰∫§ÂëΩ‰ª§ÁöÑËäÇÁÇπ‰∏äÊòæÁ§∫ Âú®ÂëΩ‰ª§Êèê‰∫§ËøáÁ®ã‰∏≠Âú®‰∏âÂè∞ËäÇÁÇπ‰∏äÊï≤ÂëΩ‰ª§Ôºöjps ‰ºöÊòæÁ§∫ node02Ôºö [root@node02 ~]# jps3406 DataNode3491 JournalNode1681 QuorumPeerMain4133 CoarseGrainedExecutorBackend # ÁúüÊ≠£Âπ≤Ê¥ªÁöÑËøõÁ®ã4092 ExecutorLauncher # ÂêØÂä®executor3585 NodeManager3942 SparkSubmit #Êèê‰∫§sparkÁöÑËøõÁ®ã4217 Jps Âõõ„ÄÅStandalone Ê®°Âºè‰∏§ÁßçÊèê‰∫§‰ªªÂä°ÊñπÂºè1„ÄÅStandalone-client Êèê‰∫§‰ªªÂä°ÊñπÂºè(1)ÂëΩ‰ª§Êèê‰∫§ Âú®/sbinË∑ØÂæÑ‰∏ãÔºö 1./start-all.sh Êèê‰∫§spark ÊñπÂºè‰∏ÄÔºö 12345./spark-submit--master spark://node00:7077--class org.apache.spark.examples.SparkPi../lib/spark-examples-1.6.0-hadoop2.6.0.jar1000 ÊñπÂºè‰∫åÔºö 123456./spark-submit--master spark://node1:7077--deploy-mode client--class org.apache.spark.examples.SparkPi../lib/spark-examples-1.6.0-hadoop2.6.0.jar1000 (2)ÊâßË°åÂéüÁêÜÂõæ Ôºà3ÔºâÊâßË°åÊµÅÁ®ã client Ê®°ÂºèÊèê‰∫§‰ªªÂä°ÂêéÔºå‰ºöÂú®ÂÆ¢Êà∑Á´ØÂêØÂä® Driver ËøõÁ®ã„ÄÇ Driver ‰ºöÂêë Master Áî≥ËØ∑ÂêØÂä® Application ÂêØÂä®ÁöÑËµÑÊ∫ê„ÄÇ client Ê®°ÂºèÊèê‰∫§‰ªªÂä°ÂêéÔºå‰ºöÂú®ÂÆ¢Êà∑Á´ØÂêØÂä® Driver ËøõÁ®ã„ÄÇ Driver ‰ºöÂêë Master Áî≥ËØ∑ÂêØÂä® Application ÂêØÂä®ÁöÑËµÑÊ∫ê„ÄÇ Ôºà4ÔºâÊÄªÁªì client Ê®°ÂºèÈÄÇÁî®‰∫éÊµãËØïË∞ÉËØïÁ®ãÂ∫è„ÄÇ Driver ËøõÁ®ãÊòØÂú®ÂÆ¢Êà∑Á´ØÂêØÂä®ÁöÑÔºåËøôÈáåÁöÑÂÆ¢Êà∑Á´ØÂ∞±ÊòØÊåáÊèê‰∫§Â∫îÁî®Á®ãÂ∫èÁöÑÂΩìÂâçËäÇÁÇπ„ÄÇ Âú® Driver Á´ØÂèØ‰ª•ÁúãÂà∞ task ÊâßË°åÁöÑÊÉÖÂÜµ„ÄÇÁîü‰∫ßÁéØÂ¢É‰∏ã‰∏çËÉΩ‰ΩøÁî® client Ê®°ÂºèÔºå ÊòØÂõ†‰∏∫Ôºö ÂÅáËÆæË¶ÅÊèê‰∫§ 100 ‰∏™ application Âà∞ÈõÜÁæ§ËøêË°åÔºåDriver ÊØèÊ¨°ÈÉΩ‰ºöÂú®client Á´ØÂêØÂä®ÔºåÈÇ£‰πàÂ∞±‰ºöÂØºËá¥ÂÆ¢Êà∑Á´Ø 100 Ê¨°ÁΩëÂç°ÊµÅÈáèÊö¥Â¢ûÁöÑÈóÆÈ¢ò„ÄÇ 2„ÄÅStandalone-cluster Êèê‰∫§‰ªªÂä°ÊñπÂºèÔºà1ÔºâÂëΩ‰ª§Êèê‰∫§ Âú®/sbinË∑ØÂæÑ‰∏ãÔºö 1./start-all.sh Êèê‰∫§spark 123456./spark-submit--master spark://node00:7077--deploy-mode cluster--class org.apache.spark.examples.SparkPi../lib/spark-examples-1.6.0-hadoop2.6.0.jar1000 Ê≥®ÊÑèÔºö ‚Äã Standalone-cluster Êèê‰∫§ÊñπÂºèÔºåÂ∫îÁî®Á®ãÂ∫è‰ΩøÁî®ÁöÑÊâÄÊúâ jar ÂåÖÂíåÊñá‰ª∂ÔºåÂøÖÈ°ª‰øùËØÅÊâÄÊúâÁöÑ worker ËäÇÁÇπÈÉΩË¶ÅÊúâÔºåÂõ†‰∏∫Ê≠§ÁßçÊñπÂºèÔºåspark ‰∏ç‰ºöËá™Âä®‰∏ä‰º†ÂåÖ„ÄÇ Ëß£ÂÜ≥ÊñπÂºèÔºö Â∞ÜÊâÄÊúâÁöÑ‰æùËµñÂåÖÂíåÊñá‰ª∂ÊâìÂà∞Âêå‰∏Ä‰∏™ÂåÖ‰∏≠ÔºåÁÑ∂ÂêéÊîæÂú® hdfs ‰∏ä„ÄÇ Â∞ÜÊâÄÊúâÁöÑ‰æùËµñÂåÖÂíåÊñá‰ª∂ÂêÑÊîæ‰∏Ä‰ªΩÂú® worker ËäÇÁÇπ‰∏ä„ÄÇ Ôºà2ÔºâÊâßË°åÂéüÁêÜÂõæ Ôºà3ÔºâÊâßË°åÊµÅÁ®ã cluster Ê®°ÂºèÊèê‰∫§Â∫îÁî®Á®ãÂ∫èÂêéÔºå‰ºöÂêë Master ËØ∑Ê±ÇÂêØÂä® Driver. Master Êé•ÂèóËØ∑Ê±ÇÔºåÈöèÊú∫Âú®ÈõÜÁæ§‰∏ÄÂè∞ËäÇÁÇπÂêØÂä® Driver ËøõÁ®ã„ÄÇ Driver ÂêØÂä®Âêé‰∏∫ÂΩìÂâçÁöÑÂ∫îÁî®Á®ãÂ∫èÁî≥ËØ∑ËµÑÊ∫ê„ÄÇ Driver Á´ØÂèëÈÄÅ task Âà∞ worker ËäÇÁÇπ‰∏äÊâßË°å„ÄÇ worker Â∞ÜÊâßË°åÊÉÖÂÜµÂíåÊâßË°åÁªìÊûúËøîÂõûÁªô Driver Á´Ø„ÄÇ Ôºà4ÔºâÊÄªÁªì Driver ËøõÁ®ãÊòØÂú®ÈõÜÁæ§Êüê‰∏ÄÂè∞ Worker ‰∏äÂêØÂä®ÁöÑÔºåÂú®ÂÆ¢Êà∑Á´ØÊòØÊó†Ê≥ïÊü•Áúã task ÁöÑÊâßË°åÊÉÖÂÜµÁöÑ„ÄÇÂÅáËÆæË¶ÅÊèê‰∫§ 100‰∏™ application Âà∞ÈõÜÁæ§ËøêË°å,ÊØèÊ¨° Driver ‰ºöÈöèÊú∫Âú®ÈõÜÁæ§‰∏≠Êüê‰∏ÄÂè∞ Worker ‰∏äÂêØÂä®ÔºåÈÇ£‰πàËøô 100 Ê¨°ÁΩëÂç°ÊµÅÈáèÊö¥Â¢ûÁöÑÈóÆÈ¢òÂ∞±Êï£Â∏ÉÂú®ÈõÜÁæ§‰∏ä ÊÄªÁªì StandaloneStandalone ‰∏§ÁßçÊñπÂºèÊèê‰∫§‰ªªÂä°ÔºåDriver ‰∏éÈõÜÁæ§ÁöÑÈÄö‰ø°ÂåÖÊã¨Ôºö Driver Ë¥üË¥£Â∫îÁî®Á®ãÂ∫èËµÑÊ∫êÁöÑÁî≥ËØ∑ ‰ªªÂä°ÁöÑÂàÜÂèë„ÄÇ ÁªìÊûúÁöÑÂõûÊî∂„ÄÇ ÁõëÊéß task ÊâßË°åÊÉÖÂÜµ„ÄÇ ‰∫î„ÄÅYarn Ê®°Âºè‰∏§ÁßçÊèê‰∫§‰ªªÂä°ÊñπÂºè1„ÄÅyarn-client Êèê‰∫§‰ªªÂä°ÊñπÂºèÔºà1ÔºâÂëΩ‰ª§Êèê‰∫§ Êèê‰∫§spark ÊñπÂºè‰∏ÄÔºö 12345./spark-submit--master yarn--classorg.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar100 ÊñπÂºè‰∫åÔºö 12345./spark-submit--master yarn‚Äìclient--classorg.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar100 ÊñπÂºè‰∏âÔºö 123456./spark-submit--master yarn--deploy-mode client--classorg.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar100 Ôºà2ÔºâÊâßË°åÂéüÁêÜÂõæ Ôºà3ÔºâÊâßË°åÊµÅÁ®ã ÂÆ¢Êà∑Á´ØÊèê‰∫§‰∏Ä‰∏™ ApplicationÔºåÂú®ÂÆ¢Êà∑Á´ØÂêØÂä®‰∏Ä‰∏™ Driver ËøõÁ®ã„ÄÇ Â∫îÁî®Á®ãÂ∫èÂêØÂä®Âêé‰ºöÂêë RS(ResourceManager)ÂèëÈÄÅËØ∑Ê±ÇÔºåÂêØÂä®AM(ApplicationMaster)ÁöÑËµÑÊ∫ê„ÄÇ RS Êî∂Âà∞ËØ∑Ê±ÇÔºåÈöèÊú∫ÈÄâÊã©‰∏ÄÂè∞ NM(NodeManager)ÂêØÂä® AM„ÄÇËøôÈáåÁöÑ NM Áõ∏ÂΩì‰∫é Standalone ‰∏≠ÁöÑ Worker ËäÇÁÇπ„ÄÇ AMÂêØÂä®ÂêéÔºå‰ºöÂêëRSËØ∑Ê±Ç‰∏ÄÊâπcontainerËµÑÊ∫êÔºåÁî®‰∫éÂêØÂä®Executor. RS ‰ºöÊâæÂà∞‰∏ÄÊâπ NM ËøîÂõûÁªô AM,Áî®‰∫éÂêØÂä® Executor„ÄÇ AM ‰ºöÂêë NM ÂèëÈÄÅÂëΩ‰ª§ÂêØÂä® Executor„ÄÇ Executor ÂêØÂä®ÂêéÔºå‰ºöÂèçÂêëÊ≥®ÂÜåÁªô DriverÔºåDriver ÂèëÈÄÅ task Âà∞Executor,ÊâßË°åÊÉÖÂÜµÂíåÁªìÊûúËøîÂõûÁªô Driver Á´Ø„ÄÇ Ôºà4ÔºâÊÄªÁªì Yarn-client Ê®°ÂºèÂêåÊ†∑ÊòØÈÄÇÁî®‰∫éÊµãËØïÔºåÂõ†‰∏∫ Driver ËøêË°åÂú®Êú¨Âú∞ÔºåDriver‰ºö‰∏é yarn ÈõÜÁæ§‰∏≠ÁöÑ Executor ËøõË°åÂ§ßÈáèÁöÑÈÄö‰ø°Ôºå‰ºöÈÄ†ÊàêÂÆ¢Êà∑Êú∫ÁΩëÂç°ÊµÅÈáèÁöÑÂ§ßÈáèÂ¢ûÂä†. ApplicationMaster ÁöÑ‰ΩúÁî®Ôºö ‰∏∫ÂΩìÂâçÁöÑ Application Áî≥ËØ∑ËµÑÊ∫ê Áªô NodeManager ÂèëÈÄÅÊ∂àÊÅØÂêØÂä® Executor„ÄÇ Ê≥®ÊÑèÔºö ApplicationMaster Êúâ launchExecutor ÂíåÁî≥ËØ∑ËµÑÊ∫êÁöÑÂäüËÉΩÔºåÂπ∂Ê≤°Êúâ‰Ωú‰∏öË∞ÉÂ∫¶ÁöÑÂäüËÉΩ 2„ÄÅyarn-cluster Êèê‰∫§‰ªªÂä°ÊñπÂºèÔºà1ÔºâÂëΩ‰ª§Êèê‰∫§ Êèê‰∫§spark ÊñπÂºè‰∏ÄÔºö 123456./spark-submit--master yarn--deploy-mode cluster--classorg.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar1000 ÊñπÂºè‰∫å: 12345./spark-submit--master yarn-cluster--classorg.apache.spark.examples.SparkPi ../lib/spark-examples-1.6.0-hadoop2.6.0.jar1000 Ôºà2ÔºâÊâßË°åÂéüÁêÜÂõæ Ôºà3ÔºâÊâßË°åÊµÅÁ®ã ÂÆ¢Êà∑Êú∫Êèê‰∫§ Application Â∫îÁî®Á®ãÂ∫èÔºåÂèëÈÄÅËØ∑Ê±ÇÂà∞RS(ResourceManager),ËØ∑Ê±ÇÂêØÂä® AM(ApplicationMaster)„ÄÇ RS Êî∂Âà∞ËØ∑Ê±ÇÂêéÈöèÊú∫Âú®‰∏ÄÂè∞ NM(NodeManager)‰∏äÂêØÂä® AMÔºàÁõ∏ÂΩì‰∫é Driver Á´ØÔºâ„ÄÇ AM ÂêØÂä®ÔºåAM ÂèëÈÄÅËØ∑Ê±ÇÂà∞ RSÔºåËØ∑Ê±Ç‰∏ÄÊâπ container Áî®‰∫éÂêØÂä®Excutor„ÄÇ RS ËøîÂõû‰∏ÄÊâπ NM ËäÇÁÇπÁªô AM„ÄÇ AM ËøûÊé•Âà∞ NM,ÂèëÈÄÅËØ∑Ê±ÇÂà∞ NM ÂêØÂä® Excutor„ÄÇ Excutor ÂèçÂêëÊ≥®ÂÜåÂà∞ AM ÊâÄÂú®ÁöÑËäÇÁÇπÁöÑ Driver„ÄÇDriver ÂèëÈÄÅ taskÂà∞ Excutor„ÄÇ Ôºà4ÔºâÊÄªÁªì Yarn-Cluster ‰∏ªË¶ÅÁî®‰∫éÁîü‰∫ßÁéØÂ¢É‰∏≠ÔºåÂõ†‰∏∫ Driver ËøêË°åÂú® Yarn ÈõÜÁæ§‰∏≠Êüê‰∏ÄÂè∞ nodeManager ‰∏≠ÔºåÊØèÊ¨°Êèê‰∫§‰ªªÂä°ÁöÑ Driver ÊâÄÂú®ÁöÑÊú∫Âô®ÈÉΩÊòØÈöèÊú∫ÁöÑÔºå‰∏ç‰ºö‰∫ßÁîüÊüê‰∏ÄÂè∞Êú∫Âô®ÁΩëÂç°ÊµÅÈáèÊøÄÂ¢ûÁöÑÁé∞Ë±°ÔºåÁº∫ÁÇπÊòØ‰ªªÂä°Êèê‰∫§Âêé‰∏çËÉΩÁúãÂà∞Êó•Âøó„ÄÇÂè™ËÉΩÈÄöËøá yarn Êü•ÁúãÊó•Âøó„ÄÇ ApplicationMaster ÁöÑ‰ΩúÁî®Ôºö ‰∏∫ÂΩìÂâçÁöÑ Application Áî≥ËØ∑ËµÑÊ∫ê Áªô NodeManger ÂèëÈÄÅÊ∂àÊÅØÂêØÂä® Excutor„ÄÇ ‰ªªÂä°Ë∞ÉÂ∫¶„ÄÇ ÂÅúÊ≠¢ÈõÜÁæ§‰ªªÂä°ÂëΩ‰ª§Ôºöyarn application -kill applicationID ÊÄªÁªìyarn]]></content>
      <categories>
        <category>Spark</category>
      </categories>
      <tags>
        <tag>ÁÆóÂ≠ê</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SparkÂ≠¶‰π†]]></title>
    <url>%2F2019%2F02%2F16%2FSpark%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅSparkÁÆÄ‰ªã1„ÄÅ‰ªÄ‰πàÊòØSparkÔºü Apache Spark ÊòØ‰∏ì‰∏∫Â§ßËßÑÊ®°Êï∞ÊçÆÂ§ÑÁêÜËÄåËÆæËÆ°ÁöÑÂø´ÈÄüÈÄöÁî®ÁöÑËÆ°ÁÆóÂºïÊìé„ÄÇ Â§ßÊï∞ÊçÆÂàÜÊûêÂºïÊìéÔºöËÆ°ÁÆóÊ°ÜÊû∂ JobÁöÑ‰∏≠Èó¥ÁªìÊûúÂèØ‰ª•‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅËØªÂèñHDFS ËÉΩÊõ¥Â•ΩÁöÑÁöÑÈÄÇÁî®‰∫éÊï∞ÊçÆÊåñÊéò‰∏éÊú∫Âô®Â≠¶‰π†Á≠âÈúÄË¶ÅËø≠‰ª£ÁöÑÁÆóÊ≥ï Âø´ÈÄüÔºà100ÂÄçÔºâ:Áî®‰∫éÈÄªËæëÂõûÂΩíÁÆóÊ≥ïÔºàÊú∫Âô®Â≠¶‰π†Ôºâ,Ëø≠‰ª£ÁÆóÊ≥ïÔºàÂú®ËÆ°ÁÆóÁªìÊûúÁöÑÂü∫Á°Ä‰∏äÂÜçËÆ°ÁÆóÔºâÊó∂Ôºö‰∏≠Èó¥ÁªìÊûúÂÄºÂú®ÂÜÖÂ≠ò‰∏≠ÊµÅËΩ¨ÔºåÂ±èËîΩÁ£ÅÁõòÂºÄÈîÄÔºõDAGË∞ÉÂ∫¶ mrÔºöÁ¶ªÁ∫øÔºåÔºàËø≠‰ª£Êó∂ÔºöÁ£ÅÁõòIOÔºåËæÉÊÖ¢Ôºâ stormÔºöÊµÅÂºè SparkÊòØÁî®ScalaÁºñÂÜôÁöÑÔºåÊñπ‰æøÂø´ÈÄüÁºñÁ®ã 2„ÄÅ‰∏éMapReduceÁöÑÂå∫Âà´ MapReduce Spark Âå∫Âà´Ôºö ÂêåÔºöÂàÜÂ∏ÉÂºèËÆ°ÁÆóÊ°ÜÊû∂ ‰∏çÂêåÔºö SparkÂü∫‰∫éÂÜÖÂ≠òÔºåMRÂü∫‰∫éHDFS SparkÂ§ÑÁêÜÊï∞ÊçÆÁöÑËÉΩÂäõÊòØMRÁöÑÂçÅÂÄç‰ª•‰∏ä SparkÈô§‰∫ÜÂü∫‰∫éÂÜÖÂ≠òËÆ°ÁÆó‰πãÂ§ñÔºåËøòÊúâDAGÊúâÂêëÊó†ÁéØÂõæÊù•ÂàáÂàÜ‰ªªÂä°ÁöÑÊâßË°åÈ°∫Â∫è Spark API ÁöÑ‰ΩøÁî®ËØ≠Ë®Ä ScalaÔºàÂæàÂ•ΩÔºâPython(‰∏çÈîô)Java(‚Ä¶) 3„ÄÅSparkËøêË°åÊ®°Âºè local Â§öÁî®‰∫éÊú¨Âú∞ÊµãËØïÔºåÂ¶ÇÂú® eclipseÔºåidea ‰∏≠ÂÜôÁ®ãÂ∫èÊµãËØï standalone standaloneÊòØSparkËá™Â∏¶ÁöÑËµÑÊ∫êË∞ÉÂ∫¶Ê°ÜÊû∂ÔºåÂÆÉÊîØÊåÅÂÆåÂÖ®ÂàÜÂ∏ÉÂºè yarn HadoopÁîüÊÄÅÂúàÁöÑËµÑÊ∫êË∞ÉÂ∫¶Ê°ÜÊû∂ÔºåSpark‰πüÊòØÂèØ‰ª•Âü∫‰∫éyarnÊù•ËÆ°ÁÆóÁöÑ Âü∫‰∫éyarnÊù•ËøõË°åËµÑÊ∫êË∞ÉÂ∫¶ÔºåÂøÖÈ°ªÂÆûÁé∞ApplicationMasterÊé•Âè£ÔºåSparkÂÆûÁé∞ÁöÑËøô‰∏™Êé•Âè£ÔºåÊâÄ‰ª•ÂèØ‰ª•‰ΩøÁî® mesos ËµÑÊ∫êË∞ÉÂ∫¶Ê°ÜÊû∂ ‰∫å„ÄÅSparkcore1„ÄÅRDDÔºà1ÔºâÊ¶ÇÂøµÔºöRDD(Resilient Distributed Dateset)ÂºπÊÄßÂàÜÂ∏ÉÂºèÊï∞ÊçÆÈõÜ Ôºà2Ôºâ‰∫îÂ§ßÁâπÊÄß RDD ÊòØÁî±‰∏ÄÁ≥ªÂàóÁöÑ partition ÁªÑÊàêÁöÑ„ÄÇ ÂáΩÊï∞ÊòØ‰ΩúÁî®Âú®ÊØè‰∏Ä‰∏™ partitionÔºàsplitÔºâ‰∏äÁöÑ„ÄÇ RDD ‰πãÈó¥Êúâ‰∏ÄÁ≥ªÂàóÁöÑ‰æùËµñÂÖ≥Á≥ª„ÄÇ ÂàÜÂå∫Âô®ÊòØ‰ΩúÁî®Âú® K,V Ê†ºÂºèÁöÑ RDD ‰∏ä„ÄÇ RDD Êèê‰æõ‰∏ÄÁ≥ªÂàóÊúÄ‰Ω≥ÁöÑËÆ°ÁÆó‰ΩçÁΩÆ„ÄÇ Ôºà3ÔºâRDDÁêÜËß£Âõæ ÁêÜËÆ∫Ê≥®Ëß£ RDD ÂÆûÈôÖ‰∏ä‰∏çÂ≠òÂÇ®Êï∞ÊçÆÔºåËøôÈáåÊñπ‰æøÁêÜËß£ÔºåÊöÇÊó∂ÁêÜËß£‰∏∫Â≠òÂÇ®Êï∞ÊçÆ„ÄÇ textFile ÊñπÊ≥ïÂ∫ïÂ±ÇÂ∞ÅË£ÖÁöÑÊòØMR ËØªÂèñÊñá‰ª∂ÁöÑÊñπÂºèÔºåËØªÂèñÊñá‰ª∂‰πãÂâçÂÖà splitÔºåÈªòËÆ§ split Â§ßÂ∞èÊòØ‰∏Ä‰∏™ block Â§ßÂ∞è„ÄÇ ‚Äã RDD Êèê‰æõËÆ°ÁÆóÊúÄ‰Ω≥‰ΩçÁΩÆÔºå‰ΩìÁé∞‰∫ÜÊï∞ÊçÆÊú¨Âú∞Âåñ„ÄÇ‰ΩìÁé∞‰∫ÜÂ§ßÊï∞ÊçÆ‰∏≠‚ÄúËÆ°ÁÆóÁßªÂä®Êï∞ÊçÆ‰∏çÁßªÂä®‚ÄùÁöÑÁêÜÂøµ„ÄÇ ‚ùî Âì™Èáå‰ΩìÁé∞ RDD ÁöÑÂàÜÂ∏ÉÂºèÔºü üëÜ RDD ÊòØÁî± Partition ÁªÑÊàêÔºåpartition ÊòØÂàÜÂ∏ÉÂú®‰∏çÂêåËäÇÁÇπ‰∏äÁöÑ„ÄÇ ‚ùî Âì™Èáå‰ΩìÁé∞ RDD ÁöÑÂºπÊÄßÔºàÂÆπÈîôÔºâÔºü üëÜ partition Êï∞ÈáèÔºåÂ§ßÂ∞èÊ≤°ÊúâÈôêÂà∂,ÈªòËÆ§ÂíåsplitÔºàblockÔºâ‰∏ÄËá¥Ôºå‰ΩìÁé∞‰∫Ü RDD ÁöÑÂºπÊÄß„ÄÇüëÜ RDD ‰πãÈó¥‰æùËµñÂÖ≥Á≥ªÔºåÂèØ‰ª•Âü∫‰∫é‰∏ä‰∏Ä‰∏™ RDD ÈáçÊñ∞ËÆ°ÁÆóÂá∫ RDD„ÄÇ ‚ùî ‰ªÄ‰πàÊòØ K,V Ê†ºÂºèÁöÑ RDD? üëÜ Â¶ÇÊûú RDD ÈáåÈù¢Â≠òÂÇ®ÁöÑÊï∞ÊçÆÈÉΩÊòØ‰∫åÂÖÉÁªÑÂØπË±°ÔºåÈÇ£‰πàËøô‰∏™ RDD Êàë‰ª¨Â∞±Âè´ÂÅö K,V Ê†ºÂºèÁöÑ RDD„ÄÇ üëÜ MRÊúâÂàÜÂå∫Âô®ÔºàÊ†πÊçÆkeyÂÄºÊ±ÇhashÔºåÊù•ÂÜ≥ÂÆöÊï∞ÊçÆÂ≠òÊîæÂú®Âì™‰∏™ÂàÜÂå∫‰∏≠ÔºåÊâÄ‰ª•ÂàÜÂå∫Âô®ÂøÖÈ°ª‰ΩúÁî®Âú®KÔºåVÊ†ºÂºèÁöÑRDD‰∏äÔºâ 2„ÄÅSpark‰ªªÂä°ÊâßË°åÂéüÁêÜ DriverÔºöÔºàÁõ∏ÂΩì‰∫éApplicationMasterÔºâ WorkerÔºöÔºàÁõ∏ÂΩì‰∫éNodeManagerÔºâ ‰ª•‰∏äÂõæ‰∏≠ÊúâÂõõ‰∏™Êú∫Âô®ËäÇÁÇπÔºå Driver Âíå Worker ÊòØÂêØÂä®Âú®ËäÇÁÇπ‰∏äÁöÑËøõÁ®ãÔºåËøêË°åÂú® JVM ‰∏≠ÁöÑËøõÁ®ã„ÄÇÔÉò Driver ‰∏éÈõÜÁæ§ËäÇÁÇπ‰πãÈó¥ÊúâÈ¢ëÁπÅÁöÑÈÄö‰ø°„ÄÇÔÉò DriverÔºö‰ªªÂä°ÁöÑË∞ÉÂ∫¶ÔºàÁõëÊéß‰ªªÂä°„ÄÅ Ë¥üË¥£‰ªªÂä°(tasks)ÁöÑÂàÜÂèëÂíåÁªìÊûúÁöÑÂõûÊî∂Ôºâ„ÄÇÂ¶ÇÊûú taskÁöÑËÆ°ÁÆóÁªìÊûúÈùûÂ∏∏Â§ßÂ∞±‰∏çË¶ÅÂõûÊî∂‰∫Ü„ÄÇ‰ºöÈÄ†Êàê oom„ÄÇÔÉò Worker ÊòØ Standalone ËµÑÊ∫êË∞ÉÂ∫¶Ê°ÜÊû∂ÈáåÈù¢ËµÑÊ∫êÁÆ°ÁêÜÁöÑ‰ªéËäÇÁÇπ„ÄÇ‰πüÊòØJVM ËøõÁ®ã„ÄÇÔÉò Master ÊòØ Standalone ËµÑÊ∫êË∞ÉÂ∫¶Ê°ÜÊû∂ÈáåÈù¢ËµÑÊ∫êÁÆ°ÁêÜÁöÑ‰∏ªËäÇÁÇπ„ÄÇ‰πüÊòØJVM ËøõÁ®ã„ÄÇ 3„ÄÅSpark‰ª£Á†ÅÊµÅÁ®ã‰ª•Áî®ScalaÁºñÂÜôWordCount‰∏∫‰æã1„ÄÅÂàõÂª∫ SparkConf ÂØπË±°ÔÉò ÂèØ‰ª•ËÆæÁΩÆ Application name„ÄÇÔÉò ÂèØ‰ª•ËÆæÁΩÆËøêË°åÊ®°ÂºèÂèäËµÑÊ∫êÈúÄÊ±Ç„ÄÇ 123456789val conf = new SparkConf() /** * Âá†ÁßçËøêË°åÊñπÂºèÔºö * 1.Êú¨Âú∞ËøêË°å * 2.yarn * 3.standalone * 4.mesos */ conf.setMaster("local").setAppName("wc") 2„ÄÅÂàõÂª∫ SparkContext ÂØπË±° 1val context = new SparkContext(conf) 3„ÄÅÂü∫‰∫é Spark ÁöÑ‰∏ä‰∏ãÊñáÂàõÂª∫‰∏Ä‰∏™ RDDÔºåÂØπ RDD ËøõË°åÂ§ÑÁêÜ„ÄÇ 12345678910//Ëé∑ÂèñÊñá‰ª∂‰∏≠ÊØè‰∏ÄË°åÊï∞ÊçÆÁöÑADD val lineADD = context.textFile("./wc.txt")//Ëé∑ÂèñÊØè‰∏ÄË°åÊï∞ÊçÆÊåâÁ©∫Ê†ºÂàáÂàÜÂêéÁöÑADD val wordADD = lineADD.flatMap(x=&gt;&#123;x.split(" ")&#125;)//Ëé∑ÂèñÊØè‰∏™ÂçïËØçÂä†‰∏ä,1 ÂêéÁöÑADDÔºàK,VÊ†ºÂºèÔºâ val KVADD = wordADD.map(x=&gt;&#123;(x,1)&#125;)//Ëé∑ÂèñÂ∞ÜÁõ∏ÂêåkeyÁöÑvalueÁõ∏Âä†ÂêéÁöÑADDÔºàK,VÊ†ºÂºèÔºâÔºåÁõ∏ÂΩì‰∫éTuple2 val resultADD = KVADD.reduceByKey((x,y)=&gt;&#123;x+y&#125;)//ÈôçÂ∫èÊéíÂ∫è val sortADD = resultADD.sortBy(_._2,false) 4„ÄÅÂ∫îÁî®Á®ãÂ∫è‰∏≠Ë¶ÅÊúâ Action Á±ªÁÆóÂ≠êÊù•Ëß¶Âèë Transformation Á±ªÁÆóÂ≠êÊâßË°å„ÄÇ 1sortADD.foreach(println) 5„ÄÅÂÖ≥Èó≠ Spark ‰∏ä‰∏ãÊñáÂØπË±° SparkContext„ÄÇ 1context.stop() 4„ÄÅTransformations ËΩ¨Êç¢ÁÆóÂ≠êÔºà1ÔºâÊ¶ÇÂøµTransformations Á±ªÁÆóÂ≠êÊòØ‰∏ÄÁ±ªÁÆóÂ≠êÔºàÂáΩÊï∞ÔºâÂè´ÂÅöËΩ¨Êç¢ÁÆóÂ≠êÔºåÂ¶Çmap,flatMap,reduceByKey Á≠â„ÄÇTransformations ÁÆóÂ≠êÊòØÂª∂ËøüÊâßË°åÔºå‰πüÂè´ÊáíÂä†ËΩΩÊâßË°å„ÄÇ ÊúâactionËß¶ÂèëÁÆóÂ≠ê‰ªªÂä°ÊâçËÉΩÊèê‰∫§ÔºåÊâç‰ºöÊâßË°årunjob ÁÆóÂ≠êÂøÖÈ°ª‰ΩúÁî®Âú®RDD‰∏ä Ôºà2ÔºâTransformation Á±ªÁÆóÂ≠ê :arrow_up_small: filterËøáÊª§Á¨¶ÂêàÊù°‰ª∂ÁöÑËÆ∞ÂΩïÊï∞Ôºåtrue ‰øùÁïôÔºåfalse ËøáÊª§Êéâ„ÄÇ üîº contains ‰Ωú‰∏∫Êù°‰ª∂ÔºåÊòØÂê¶ÂåÖÂê´ÔºåËøîÂõûtrue|false :arrow_up_small:mapÂ∞Ü‰∏Ä‰∏™ RDD ‰∏≠ÁöÑÊØè‰∏™Êï∞ÊçÆÈ°πÔºåÈÄöËøá map ‰∏≠ÁöÑÂáΩÊï∞Êò†Â∞ÑÂèò‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑÂÖÉÁ¥†„ÄÇÁâπÁÇπÔºöËæìÂÖ•‰∏ÄÊù°ÔºåËæìÂá∫‰∏ÄÊù°Êï∞ÊçÆ„ÄÇ :arrow_up_small: flatMapÂÖà map Âêé flat„ÄÇ‰∏é map Á±ª‰ººÔºåÊØè‰∏™ËæìÂÖ•È°πÂèØ‰ª•Êò†Â∞Ñ‰∏∫ 0 Âà∞Â§ö‰∏™ËæìÂá∫È°π„ÄÇ :arrow_up_small:sampleÈöèÊú∫ÊäΩÊ†∑ÁÆóÂ≠êÔºåÊ†πÊçÆ‰º†ËøõÂéªÁöÑÂ∞èÊï∞ÊåâÊØî‰æãËøõË°åÔºåÊúâÊîæÂõûÊàñËÄÖÊó†ÊîæÂõûÁöÑÊäΩÊ†∑„ÄÇ :arrow_up_small:reduceByKeyÂ∞ÜÁõ∏ÂêåÁöÑ Key Ê†πÊçÆÁõ∏Â∫îÁöÑÈÄªËæëËøõË°åÂ§ÑÁêÜ„ÄÇ :arrow_up_small:sortByKey/sortBy‰ΩúÁî®Âú® K,V Ê†ºÂºèÁöÑ RDD ‰∏äÔºåÂØπ key ËøõË°åÂçáÂ∫èÊàñËÄÖÈôçÂ∫èÊéíÂ∫è„ÄÇ 1234567891011121314151617181920212223242526272829303132object WordCount &#123; def main(args: Array[String]): Unit = &#123; val conf = new SparkConf() conf.setMaster("local").setAppName("WC") val context = new SparkContext(conf) //Áî®‰∫é‰∫ÜËß£ÈõÜÁæ§ val linesRDD :RDD[String] = sc.textFile("./words.txt") // lineRDD.filter(x=&gt;&#123;// x.contains("sh")// &#125;).foreach(println)// lineRDD.sample(true,0.2).foreach(println) // lineRDD.map((_,1)).reduceByKey(_ + _).sortBy(_._2,false).foreach(println)// lineRDD.map((_,1)).sortByKey().foreach(println) val wordRDD :RDD[String] = linesRDD.flatMap&#123;lines =&gt; &#123; lines.split(" ") //ÂåøÂêçÂáΩÊï∞ &#125;&#125; val KVRDD:RDD[(String,Int)] = wordRDD.map&#123; x =&gt; (x,1) &#125; val result:RDD[(String,Int)] = KVRDD.reduceByKey&#123;(a,b)=&gt; &#123; println("a:"+a+",b:"+b) a+b &#125;&#125; Ë°•ÂÖÖ parallelizePairs join Ôºö‰øùÁïôÂÖ¨ÂÖ±ÂÖÉÁ¥† ÔºàK,VÔºâ leftOutJoin Ôºö‰øùÁïôÂ∑¶ËæπÁöÑÂÖÉÁ¥† rightOutJoin Ôºö‰øùÁïôÂè≥ËæπÂÖÉÁ¥† fullOutJoin ÔºöÂéªÈáç‰øùÁïô Ôºà‰øùÁïôÊúÄÂ§ßÂàÜÂå∫Êï∞Ôºâ union ÔºöÈÉΩ‰øùÁïô Ôºà‰øùÁïôÊÄªÂàÜÂå∫Êï∞Ôºâ intersection ÔºöÂèñ‰∫§ÈõÜ subtract Ôºö ÂèñÂ∑ÆÈõÜ distinct Ôºö ÂéªÈáç cogroup Ôºö ÂàÜÁªÑ mapPartition Ôºö ‰∏émapÁ±ª‰ººÔºåËΩ¨Êç¢ÁÆóÂ≠êÔºå‰∏ÄËøõ‰∏ÄÂá∫ foreachPartition 123456789101112 val conf = new SparkConf() conf.setMaster("local").setAppName("WC") val context = new SparkContext(conf) //Áî®‰∫é‰∫ÜËß£ÈõÜÁæ§ //parallelizePairs //joinOptional.absent(0)optional.isPresent()optinal.get() 5„ÄÅAction Ë°åÂä®ÁÆóÂ≠êÔºà1ÔºâÊ¶ÇÂøµAction Á±ªÁÆóÂ≠ê‰πüÊòØ‰∏ÄÁ±ªÁÆóÂ≠êÔºàÂáΩÊï∞ÔºâÂè´ÂÅöË°åÂä®ÁÆóÂ≠êÔºåÂ¶Çforeach,collectÔºåcount Á≠â„ÄÇ Transformations Á±ªÁÆóÂ≠êÊòØÂª∂ËøüÊâßË°åÔºåAction Á±ªÁÆóÂ≠êÊòØËß¶ÂèëÊâßË°åÔºàÁ´ãÂç≥Ôºâ„ÄÇ ‰∏Ä‰∏™ application Â∫îÁî®Á®ãÂ∫è‰∏≠ÊúâÂá†‰∏™ Action Á±ªÁÆóÂ≠êÊâßË°åÔºåÂ∞±ÊúâÂá†‰∏™ job ËøêË°å„ÄÇ Ôºà2ÔºâAction Á±ªÁÆóÂ≠ê :arrow_up_small: countËøîÂõûÊï∞ÊçÆÈõÜ‰∏≠ÁöÑÂÖÉÁ¥†Êï∞„ÄÇ‰ºöÂú®ÁªìÊûúËÆ°ÁÆóÂÆåÊàêÂêéÂõûÊî∂Âà∞ Driver Á´Ø„ÄÇ:arrow_up_small: take(n)ËøîÂõû‰∏Ä‰∏™ÂåÖÂê´Êï∞ÊçÆÈõÜÂâç n ‰∏™ÂÖÉÁ¥†ÁöÑÈõÜÂêà„ÄÇ:arrow_up_small: firstfirst=take(1),ËøîÂõûÊï∞ÊçÆÈõÜ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥† :arrow_up_small: foreachÂæ™ÁéØÈÅçÂéÜÊï∞ÊçÆÈõÜ‰∏≠ÁöÑÊØè‰∏™ÂÖÉÁ¥†ÔºåËøêË°åÁõ∏Â∫îÁöÑÈÄªËæë„ÄÇ:arrow_up_small: collectÂ∞ÜËÆ°ÁÆóÁªìÊûúÂõûÊî∂Âà∞ Driver Á´Ø„ÄÇ 12345678910111213141516171819 val conf = new SparkConf() conf.setMaster("local").setAppName("transf") val context = new SparkContext(conf) val lineADD = context.textFile("./wc.txt") val wordADD = lineADD.flatMap(x=&gt;&#123;x.split(" ")&#125;) // println(wordADD.count())//lineADD‰∏≠Êï∞ÊçÆÂõûÊî∂ val arr= lineADD.collect() arr.foreach(println)// val takes: Array[String] = lineRDD.take(5)// takes.foreach(println)// val str: String = lineRDD.first()// println(str) WordCount‰ª•Áî®JavaÁºñÂÜô‰∏∫‰æã12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697package com.shsxt.spark.java;import org.apache.spark.SparkConf;import org.apache.spark.api.java.JavaPairRDD;import org.apache.spark.api.java.JavaRDD;import org.apache.spark.api.java.JavaSparkContext;import org.apache.spark.api.java.function.*;import scala.Tuple2;import java.util.Arrays;import java.util.List;public class WordCount &#123; public static void main(String[] args) &#123; SparkConf conf = new SparkConf(); conf.setMaster("local").setAppName("wc"); JavaSparkContext context = new JavaSparkContext(conf); JavaRDD&lt;String&gt; rdd = context.textFile("./wc.txt"); long count = rdd.count(); List&lt;String&gt; collect = rdd.collect(); List&lt;String&gt; take = rdd.take(5); String first = rdd.first(); JavaRDD&lt;String&gt; wordRDD = rdd.flatMap(new FlatMapFunction&lt;String, String&gt;() &#123; @Override public Iterable&lt;String&gt; call(String line) throws Exception &#123; String[] split = line.split(" "); List&lt;String&gt; list = Arrays.asList(split); return list; &#125; &#125;);// wordRDD.map(new Function&lt;String&gt;() &#123;// @Override// public String call(String v1) throws Exception &#123;// return null;// &#125;// &#125;) JavaPairRDD&lt;String, Integer&gt; pairRDD = wordRDD.mapToPair(new PairFunction&lt;String, String, Integer&gt;() &#123; @Override public Tuple2&lt;String, Integer&gt; call(String word) throws Exception &#123; return new Tuple2(word, 1); &#125; &#125;); JavaPairRDD&lt;String, Integer&gt; resultRDD = pairRDD.reduceByKey(new Function2&lt;Integer, Integer, Integer&gt;() &#123; @Override public Integer call(Integer v1, Integer v2) throws Exception &#123; return v1 + v2; &#125; &#125;); JavaPairRDD&lt;Integer, String&gt; reverseRDD = resultRDD.mapToPair(new PairFunction&lt;Tuple2&lt;String, Integer&gt;, Integer, String&gt;() &#123; @Override public Tuple2&lt;Integer, String&gt; call(Tuple2&lt;String, Integer&gt; tuple2) throws Exception &#123; return new Tuple2&lt;&gt;(tuple2._2, tuple2._1); &#125; &#125;); JavaPairRDD&lt;Integer, String&gt; sortByKey = reverseRDD.sortByKey(false); JavaPairRDD&lt;String, Integer&gt; result = sortByKey.mapToPair(new PairFunction&lt;Tuple2&lt;Integer, String&gt;, String, Integer&gt;() &#123; @Override public Tuple2&lt;String, Integer&gt; call(Tuple2&lt;Integer, String&gt; tuple2) throws Exception &#123; return new Tuple2&lt;&gt;(tuple2._2, tuple2._1); &#125; &#125;); result.foreach(new VoidFunction&lt;Tuple2&lt;String, Integer&gt;&gt;() &#123; @Override public void call(Tuple2&lt;String, Integer&gt; tuple2) throws Exception &#123; System.out.println(tuple2); &#125; &#125;); &#125;&#125;]]></content>
      <categories>
        <category>Spark</category>
      </categories>
      <tags>
        <tag>ËÆ°ÁÆóÂºïÊìé</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ListÊñπÊ≥ï]]></title>
    <url>%2F2019%2F02%2F16%2FList%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137def +(elem: A): List[A]ÂâçÁΩÆ‰∏Ä‰∏™ÂÖÉÁ¥†ÂàóË°®def ::(x: A): List[A]Âú®Ëøô‰∏™ÂàóË°®ÁöÑÂºÄÂ§¥Ê∑ªÂä†ÁöÑÂÖÉÁ¥†„ÄÇdef :::(prefix: List[A]): List[A]Â¢ûÂä†‰∫Ü‰∏Ä‰∏™ÁªôÂÆöÂàóË°®‰∏≠ËØ•ÂàóË°®ÂâçÈù¢ÁöÑÂÖÉÁ¥†„ÄÇdef ::(x: A): List[A]Â¢ûÂä†‰∫Ü‰∏Ä‰∏™ÂÖÉÁ¥†xÂú®ÂàóË°®ÁöÑÂºÄÂ§¥def addString(b: StringBuilder): StringBuilderËøΩÂä†ÂàóË°®ÁöÑ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÁîüÊàêÂô®ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇdef addString(b: StringBuilder, sep: String): StringBuilderËøΩÂä†ÂàóË°®ÁöÑ‰ΩøÁî®ÂàÜÈöîÂ≠óÁ¨¶‰∏≤‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÁîüÊàêÂô®ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇdef apply(n: Int): AÈÄâÊã©ÈÄöËøáÂÖ∂Âú®ÂàóË°®‰∏≠Á¥¢ÂºïÁöÑÂÖÉÁ¥†def contains(elem: Any): BooleanÊµãËØïËØ•ÂàóË°®‰∏≠ÊòØÂê¶ÂåÖÂê´‰∏Ä‰∏™ÁªôÂÆöÂÄº‰Ωú‰∏∫ÂÖÉÁ¥†„ÄÇdef copyToArray(xs: Array[A], start: Int, len: Int): UnitÂàóË°®ÁöÑÂâØÊú¨ÂÖÉ‰ª∂ÈòµÂàó„ÄÇÂ°´ÂÖÖÁªôÂÆöÁöÑÊï∞ÁªÑxs‰∏éÊ≠§ÂàóË°®‰∏≠ÊúÄÂ§ölen‰∏™ÂÖÉÁ¥†ÔºåÂú®‰ΩçÁΩÆÂºÄÂßã„ÄÇdef distinct: List[A]Âª∫Á´ã‰ªéÂàóË°®‰∏≠Ê≤°Êúâ‰ªª‰ΩïÈáçÂ§çÁöÑÂÖÉÁ¥†ÁöÑÊñ∞ÂàóË°®„ÄÇdef drop(n: Int): List[A]ËøîÂõûÈô§‰∫ÜÁ¨¨n‰∏™ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇdef dropRight(n: Int): List[A]ËøîÂõûÈô§‰∫ÜÊúÄÂêéÁöÑn‰∏™ÁöÑÂÖÉÁ¥†def dropWhile(p: (A) =&gt; Boolean): List[A]‰∏¢ÂºÉÊª°Ë∂≥Ë∞ìËØçÁöÑÂÖÉÁ¥†ÊúÄÈïøÂâçÁºÄ„ÄÇdef endsWith[B](that: Seq[B]): BooleanÊµãËØïÂàóË°®ÊòØÂê¶‰ΩøÁî®ÁªôÂÆöÂ∫èÂàóÁªìÊùü„ÄÇdef equals(that: Any): BooleanequalsÊñπÊ≥ïÁöÑ‰ªªÊÑèÂ∫èÂàó„ÄÇÊØîËæÉËØ•Â∫èÂàóÂà∞Êüê‰∫õÂÖ∂‰ªñÂØπË±°„ÄÇdef exists(p: (A) =&gt; Boolean): BooleanÊµãËØïË∞ìËØçÊòØÂê¶ÊåÅÊúâ‰∏Ä‰∫õÂàóË°®ÁöÑÂÖÉÁ¥†„ÄÇdef filter(p: (A) =&gt; Boolean): List[A]ËøîÂõûÂàóË°®Êª°Ë∂≥Ë∞ìËØçÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇdef forall(p: (A) =&gt; Boolean): BooleanÊµãËØïË∞ìËØçÊòØÂê¶ÊåÅÊúâËØ•ÂàóË°®‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇdef foreach(f: (A) =&gt; Unit): UnitÂ∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞f‰ª•ÂàóË°®ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇdef head: AÈÄâÊã©ÂàóË°®ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†def indexOf(elem: A, from: Int): IntÁªèËøáÊàñÂú®Êüê‰∫õËµ∑ÂßãÁ¥¢ÂºïÊü•ÊâæÂàóË°®‰∏≠ÁöÑ‰∏Ä‰∫õÂÄºÁ¨¨‰∏ÄÊ¨°Âá∫Áé∞ÁöÑÁ¥¢Âºï„ÄÇdef init: List[A]ËøîÂõûÈô§‰∫ÜÊúÄÂêéÁöÑÊâÄÊúâÂÖÉÁ¥†def intersect(that: Seq[A]): List[A]ËÆ°ÁÆóÂàóË°®ÂíåÂè¶‰∏ÄÂ∫èÂàó‰πãÈó¥ÁöÑÂ§öÈáçÈõÜ‰∫§ÈõÜ„ÄÇdef isEmpty: BooleanÊµãËØïÂàóË°®ÊòØÂê¶‰∏∫Á©∫def iterator: Iterator[A]ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑËø≠‰ª£Âô®‰∏≠ÂåÖÂê´ÁöÑÂèØËø≠‰ª£ÂØπË±°‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†def last: AËøîÂõûÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†def lastIndexOf(elem: A, end: Int): Int‰πãÂâçÊàñÂú®‰∏Ä‰∏™ÁªôÂÆöÁöÑÊúÄÁªàÊåáÊï∞Êü•ÊâæÁöÑÂàóË°®‰∏≠ÁöÑ‰∏Ä‰∫õÂÄºÊúÄÂêé‰∏ÄÊ¨°Âá∫Áé∞ÁöÑÁ¥¢Âºïdef length: IntËøîÂõûÂàóË°®ÁöÑÈïøÂ∫¶def map[B](f: (A) =&gt; B): List[B]ÈÄöËøáÂ∫îÁî®ÂáΩÊï∞‰ª•gËøô‰∏™ÂàóË°®‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÊûÑÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÈõÜÂêàdef max: AÊü•ÊâæÊúÄÂ§ßÁöÑÂÖÉÁ¥†def min: AÊü•ÊâæÊúÄÂ∞èÂÖÉÁ¥†def mkString: StringÊòæÁ§∫ÂàóË°®ÁöÑÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†def mkString(sep: String): StringÊòæÁ§∫ÁöÑÂàóË°®‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤‰∏≠‰ΩøÁî®ÂàÜÈöî‰∏≤ÁöÑÊâÄÊúâÂÖÉÁ¥†def reverse: List[A]ËøîÂõûÊñ∞ÂàóË°®ÔºåÂú®Áõ∏ÂèçÁöÑÈ°∫Â∫èÂÖÉÁ¥†def sorted[B &gt;: A]: List[A]Ê†πÊçÆÊéíÂ∫èÂØπÂàóË°®ËøõË°åÊéíÂ∫èdef startsWith[B](that: Seq[B], offset: Int): BooleanÊµãËØïËØ•ÂàóË°®‰∏≠ÊòØÂê¶ÂåÖÂê´ÁªôÂÆöÁöÑÁ¥¢ÂºïÂ§ÑÁöÑÁªôÂÆöÁöÑÂ∫èÂàódef sum: AÊ¶ÇÊã¨Ëøô‰∏™ÈõÜÂêàÁöÑÂÖÉÁ¥†def tail: List[A]ËøîÂõûÈô§‰∫ÜÁ¨¨‰∏ÄÁöÑÊâÄÊúâÂÖÉÁ¥†def take(n: Int): List[A]ËøîÂõûÂâçn‰∏™ÂÖÉÁ¥†def takeRight(n: Int): List[A]ËøîÂõûÊúÄÂêén‰∏™ÂÖÉÁ¥†def toArray: Array[A]ÂàóË°®‰ª•‰∏Ä‰∏™Êï∞ÁªÑÂèòÊç¢def toBuffer[B &gt;: A]: Buffer[B]ÂàóË°®‰ª•‰∏Ä‰∏™ÂèØÂèòÁºìÂÜ≤Âô®ËΩ¨Êç¢def toMap[T, U]: Map[T, U]Ê≠§ÂàóË°®ÁöÑÊò†Â∞ÑËΩ¨Êç¢def toSeq: Seq[A]ÂàóË°®ÁöÑÂ∫èÂàóËΩ¨Êç¢def toSet[B &gt;: A]: Set[B]ÂàóË°®Âà∞ÈõÜÂêàÂèòÊç¢def toString(): StringÂàóË°®ËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤]]></content>
      <categories>
        <category>Scala</category>
      </categories>
      <tags>
        <tag>List</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MapÊñπÊ≥ï]]></title>
    <url>%2F2019%2F02%2F16%2FMap%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138Scala Map ÊñπÊ≥ï‰∏ãË°®ÂàóÂá∫‰∫Ü Scala Map Â∏∏Áî®ÁöÑÊñπÊ≥ïÔºöÂ∫èÂè∑ ÊñπÊ≥ïÂèäÊèèËø∞def ++(xs: Map[(A, B)]): Map[A, B]ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ MapÔºåÊñ∞ÁöÑ Map xs ÁªÑÊàêdef -(elem1: A, elem2: A, elems: A*): Map[A, B]ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ Map, ÁßªÈô§ key ‰∏∫ elem1, elem2 ÊàñÂÖ∂‰ªñ elems„ÄÇ def --(xs: GTO[A]): Map[A, B]ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ Map, ÁßªÈô§ xs ÂØπË±°‰∏≠ÂØπÂ∫îÁöÑ keydef get(key: A): Option[B]ËøîÂõûÊåáÂÆö key ÁöÑÂÄºdef iterator: Iterator[(A, B)]ÂàõÂª∫Êñ∞ÁöÑËø≠‰ª£Âô®ÔºåÂπ∂ËæìÂá∫ key/value ÂØπdef addString(b: StringBuilder): StringBuilderÂ∞Ü Map ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÈôÑÂä†Âà∞StringBuilderÔºåÂèØÂä†ÂÖ•ÂàÜÈöîÁ¨¶def addString(b: StringBuilder, sep: String): StringBuilderÂ∞Ü Map ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÈôÑÂä†Âà∞StringBuilderÔºåÂèØÂä†ÂÖ•ÂàÜÈöîÁ¨¶ def apply(key: A): BËøîÂõûÊåáÂÆöÈîÆÁöÑÂÄºÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ËøîÂõû Map ÁöÑÈªòËÆ§ÊñπÊ≥ïdef clone(): Map[A, B]‰ªé‰∏Ä‰∏™ Map Â§çÂà∂Âà∞Âè¶‰∏Ä‰∏™ Mapdef contains(key: A): BooleanÂ¶ÇÊûú Map ‰∏≠Â≠òÂú®ÊåáÂÆö keyÔºåËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇdef copyToArray(xs: Array[(A, B)]): UnitÂ§çÂà∂ÈõÜÂêàÂà∞Êï∞ÁªÑdef count(p: ((A, B)) =&gt; Boolean): IntËÆ°ÁÆóÊª°Ë∂≥ÊåáÂÆöÊù°‰ª∂ÁöÑÈõÜÂêàÂÖÉÁ¥†Êï∞Èáèdef default(key: A): BÂÆö‰πâ Map ÁöÑÈªòËÆ§ÂÄºÔºåÂú® key ‰∏çÂ≠òÂú®Êó∂ËøîÂõû„ÄÇdef drop(n: Int): Map[A, B]ËøîÂõû‰∏¢ÂºÉÂâçn‰∏™ÂÖÉÁ¥†Êñ∞ÈõÜÂêàdef dropRight(n: Int): Map[A, B]ËøîÂõû‰∏¢ÂºÉÊúÄÂêén‰∏™ÂÖÉÁ¥†Êñ∞ÈõÜÂêàdef dropWhile(p: ((A, B)) =&gt; Boolean): Map[A, B]‰ªéÂ∑¶ÂêëÂè≥‰∏¢ÂºÉÂÖÉÁ¥†ÔºåÁõ¥Âà∞Êù°‰ª∂p‰∏çÊàêÁ´ãdef empty: Map[A, B]ËøîÂõûÁõ∏ÂêåÁ±ªÂûãÁöÑÁ©∫ Mapdef equals(that: Any): BooleanÂ¶ÇÊûú‰∏§‰∏™ Map Áõ∏Á≠â(key/value ÂùáÁõ∏Á≠â)ÔºåËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalsedef exists(p: ((A, B)) =&gt; Boolean): BooleanÂà§Êñ≠ÈõÜÂêà‰∏≠ÊåáÂÆöÊù°‰ª∂ÁöÑÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®def filter(p: ((A, B))=&gt; Boolean): Map[A, B]ËøîÂõûÊª°Ë∂≥ÊåáÂÆöÊù°‰ª∂ÁöÑÊâÄÊúâÈõÜÂêàdef filterKeys(p: (A) =&gt; Boolean): Map[A, B]ËøîÂõûÁ¨¶ÂêàÊåáÂÆöÊù°‰ª∂ÁöÑÁöÑ‰∏çÂèØÂèò Mapdef find(p: ((A, B)) =&gt; Boolean): Option[(A, B)]Êü•ÊâæÈõÜÂêà‰∏≠Êª°Ë∂≥ÊåáÂÆöÊù°‰ª∂ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†def foreach(f: ((A, B)) =&gt; Unit): UnitÂ∞ÜÂáΩÊï∞Â∫îÁî®Âà∞ÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥†def init: Map[A, B]ËøîÂõûÊâÄÊúâÂÖÉÁ¥†ÔºåÈô§‰∫ÜÊúÄÂêé‰∏Ä‰∏™def isEmpty: BooleanÊ£ÄÊµã Map ÊòØÂê¶‰∏∫Á©∫ def keys: Iterable[A]ËøîÂõûÊâÄÊúâÁöÑkey/p&gt;def last: (A, B)ËøîÂõûÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†def max: (A, B)Êü•ÊâæÊúÄÂ§ßÂÖÉÁ¥†def min: (A, B)Êü•ÊâæÊúÄÂ∞èÂÖÉÁ¥†def mkString: StringÈõÜÂêàÊâÄÊúâÂÖÉÁ¥†‰Ωú‰∏∫Â≠óÁ¨¶‰∏≤ÊòæÁ§∫def product: (A, B)ËøîÂõûÈõÜÂêà‰∏≠Êï∞Â≠óÂÖÉÁ¥†ÁöÑÁßØ„ÄÇdef remove(key: A): Option[B]ÁßªÈô§ÊåáÂÆö keydef retain(p: (A, B) =&gt; Boolean): Map.this.typeÂ¶ÇÊûúÁ¨¶ÂêàÊª°Ë∂≥Êù°‰ª∂ÁöÑËøîÂõû truedef size: IntËøîÂõû Map ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞def sum: (A, B)ËøîÂõûÈõÜÂêà‰∏≠ÊâÄÊúâÊï∞Â≠óÂÖÉÁ¥†‰πãÂíådef tail: Map[A, B]ËøîÂõû‰∏Ä‰∏™ÈõÜÂêà‰∏≠Èô§‰∫ÜÁ¨¨‰∏ÄÂÖÉÁ¥†‰πãÂ§ñÁöÑÂÖ∂‰ªñÂÖÉÁ¥†def take(n: Int): Map[A, B]ËøîÂõûÂâç n ‰∏™ÂÖÉÁ¥†def takeRight(n: Int): Map[A, B]ËøîÂõûÂêé n ‰∏™ÂÖÉÁ¥†def takeWhile(p: ((A, B)) =&gt; Boolean): Map[A, B]ËøîÂõûÊª°Ë∂≥ÊåáÂÆöÊù°‰ª∂ÁöÑÂÖÉÁ¥†def toArray: Array[(A, B)]ÈõÜÂêàËΩ¨Êï∞ÁªÑdef toBuffer[B &gt;: A]: Buffer[B]ËøîÂõûÁºìÂÜ≤Âå∫ÔºåÂåÖÂê´‰∫Ü Map ÁöÑÊâÄÊúâÂÖÉÁ¥†def toList: List[A]ËøîÂõû ListÔºåÂåÖÂê´‰∫Ü Map ÁöÑÊâÄÊúâÂÖÉÁ¥†def toSeq: Seq[A]ËøîÂõû SeqÔºåÂåÖÂê´‰∫Ü Map ÁöÑÊâÄÊúâÂÖÉÁ¥†def toSet: Set[A]ËøîÂõû SetÔºåÂåÖÂê´‰∫Ü Map ÁöÑÊâÄÊúâÂÖÉÁ¥†def toString(): StringËøîÂõûÂ≠óÁ¨¶‰∏≤ÂØπË±°]]></content>
      <categories>
        <category>Scala</category>
      </categories>
      <tags>
        <tag>Map</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÁªÑÊñπÊ≥ï]]></title>
    <url>%2F2019%2F02%2F16%2F%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%20%2F</url>
    <content type="text"><![CDATA[12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849Â∫èÂè∑ ÊñπÊ≥ïÂíåÊèèËø∞def apply( x: T, xs: T* ): Array[T]ÂàõÂª∫ÊåáÂÆöÂØπË±° T ÁöÑÊï∞ÁªÑ, T ÁöÑÂÄºÂèØ‰ª•ÊòØ Unit, Double, Float, Long, Int, Char, Short, Byte, Boolean„ÄÇdef concat[T]( xss: Array[T]* ): Array[T]ÂêàÂπ∂Êï∞ÁªÑdef copy( src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int ): UnitÂ§çÂà∂‰∏Ä‰∏™Êï∞ÁªÑÂà∞Âè¶‰∏Ä‰∏™Êï∞ÁªÑ‰∏ä„ÄÇÁõ∏Á≠â‰∫é Java's System.arraycopy(src, srcPos, dest, destPos, length)„ÄÇdef empty[T]: Array[T]ËøîÂõûÈïøÂ∫¶‰∏∫ 0 ÁöÑÊï∞ÁªÑdef iterate[T]( start: T, len: Int )( f: (T) =&gt; T ): Array[T]ËøîÂõûÊåáÂÆöÈïøÂ∫¶Êï∞ÁªÑÔºåÊØè‰∏™Êï∞ÁªÑÂÖÉÁ¥†‰∏∫ÊåáÂÆöÂáΩÊï∞ÁöÑËøîÂõûÂÄº„ÄÇ‰ª•‰∏äÂÆû‰æãÊï∞ÁªÑÂàùÂßãÂÄº‰∏∫ 0ÔºåÈïøÂ∫¶‰∏∫ 3ÔºåËÆ°ÁÆóÂáΩÊï∞‰∏∫a=&gt;a+1Ôºöscala&gt; Array.iterate(0,3)(a=&gt;a+1)res1: Array[Int] = Array(0, 1, 2) def fill[T]( n: Int )(elem: =&gt; T): Array[T]ËøîÂõûÊï∞ÁªÑÔºåÈïøÂ∫¶‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊåáÂÆöÔºåÂêåÊó∂ÊØè‰∏™ÂÖÉÁ¥†‰ΩøÁî®Á¨¨‰∫å‰∏™ÂèÇÊï∞ËøõË°åÂ°´ÂÖÖ„ÄÇ def fill[T]( n1: Int, n2: Int )( elem: =&gt; T ): Array[Array[T]]ËøîÂõû‰∫åÊï∞ÁªÑÔºåÈïøÂ∫¶‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊåáÂÆöÔºåÂêåÊó∂ÊØè‰∏™ÂÖÉÁ¥†‰ΩøÁî®Á¨¨‰∫å‰∏™ÂèÇÊï∞ËøõË°åÂ°´ÂÖÖ„ÄÇdef ofDim[T]( n1: Int ): Array[T]ÂàõÂª∫ÊåáÂÆöÈïøÂ∫¶ÁöÑÊï∞ÁªÑdef ofDim[T]( n1: Int, n2: Int ): Array[Array[T]]ÂàõÂª∫‰∫åÁª¥Êï∞ÁªÑdef ofDim[T]( n1: Int, n2: Int, n3: Int ): Array[Array[Array[T]]]ÂàõÂª∫‰∏âÁª¥Êï∞ÁªÑ def range( start: Int, end: Int, step: Int ): Array[Int]ÂàõÂª∫ÊåáÂÆöÂå∫Èó¥ÂÜÖÁöÑÊï∞ÁªÑÔºåstep ‰∏∫ÊØè‰∏™ÂÖÉÁ¥†Èó¥ÁöÑÊ≠•Èïødef range( start: Int, end: Int ): Array[Int]ÂàõÂª∫ÊåáÂÆöÂå∫Èó¥ÂÜÖÁöÑÊï∞ÁªÑdef tabulate[T]( n: Int )(f: (Int)=&gt; T): Array[T]ËøîÂõûÊåáÂÆöÈïøÂ∫¶Êï∞ÁªÑÔºåÊØè‰∏™Êï∞ÁªÑÂÖÉÁ¥†‰∏∫ÊåáÂÆöÂáΩÊï∞ÁöÑËøîÂõûÂÄºÔºåÈªòËÆ§‰ªé 0 ÂºÄÂßã„ÄÇ‰ª•‰∏äÂÆû‰æãËøîÂõû 3 ‰∏™ÂÖÉÁ¥†Ôºöscala&gt; Array.tabulate(3)(a =&gt; a + 5)res0: Array[Int] = Array(5, 6, 7)def tabulate[T]( n1: Int, n2: Int )( f: (Int, Int ) =&gt; T): Array[Array[T]]ËøîÂõûÊåáÂÆöÈïøÂ∫¶ÁöÑ‰∫åÁª¥Êï∞ÁªÑÔºåÊØè‰∏™Êï∞ÁªÑÂÖÉÁ¥†‰∏∫ÊåáÂÆöÂáΩÊï∞ÁöÑËøîÂõûÂÄºÔºåÈªòËÆ§‰ªé 0 ÂºÄÂßã„ÄÇ]]></content>
      <categories>
        <category>Scala</category>
      </categories>
      <tags>
        <tag>Array</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SetÊñπÊ≥ï]]></title>
    <url>%2F2019%2F02%2F16%2FSet%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147Scala Set Â∏∏Áî®ÊñπÊ≥ï‰∏ãË°®ÂàóÂá∫‰∫Ü Scala Set Â∏∏Áî®ÁöÑÊñπÊ≥ïÔºöÂ∫èÂè∑ ÊñπÊ≥ïÂèäÊèèËø∞def +(elem: A): Set[A]‰∏∫ÈõÜÂêàÊ∑ªÂä†Êñ∞ÂÖÉÁ¥†ÔºåxÂπ∂ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÈõÜÂêàÔºåÈô§ÈùûÂÖÉÁ¥†Â∑≤Â≠òÂú® def -(elem: A): Set[A]ÁßªÈô§ÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÂπ∂ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÈõÜÂêà def contains(elem: A): BooleanÂ¶ÇÊûúÂÖÉÁ¥†Âú®ÈõÜÂêà‰∏≠Â≠òÂú®ÔºåËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇdef &amp;(that: Set[A]): Set[A]ËøîÂõû‰∏§‰∏™ÈõÜÂêàÁöÑ‰∫§ÈõÜ def &amp;~(that: Set[A]): Set[A]ËøîÂõû‰∏§‰∏™ÈõÜÂêàÁöÑÂ∑ÆÈõÜdef +(elem1: A, elem2: A, elems: A*): Set[A]ÈÄöËøáÊ∑ªÂä†‰º†ÂÖ•ÊåáÂÆöÈõÜÂêàÁöÑÂÖÉÁ¥†ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ‰∏çÂèØÂèòÈõÜÂêà def ++(elems: A): Set[A]ÂêàÂπ∂‰∏§‰∏™ÈõÜÂêàdef -(elem1: A, elem2: A, elems: A*): Set[A]ÈÄöËøáÁßªÈô§‰º†ÂÖ•ÊåáÂÆöÈõÜÂêàÁöÑÂÖÉÁ¥†ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ‰∏çÂèØÂèòÈõÜÂêàdef addString(b: StringBuilder): StringBuilderÂ∞Ü‰∏çÂèØÂèòÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥†Ê∑ªÂä†Âà∞Â≠óÁ¨¶‰∏≤ÁºìÂÜ≤Âå∫def addString(b: StringBuilder, sep: String): StringBuilderÂ∞Ü‰∏çÂèØÂèòÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥†Ê∑ªÂä†Âà∞Â≠óÁ¨¶‰∏≤ÁºìÂÜ≤Âå∫ÔºåÂπ∂‰ΩøÁî®ÊåáÂÆöÁöÑÂàÜÈöîÁ¨¶def apply(elem: A)Ê£ÄÊµãÈõÜÂêà‰∏≠ÊòØÂê¶ÂåÖÂê´ÊåáÂÆöÂÖÉÁ¥†def count(p: (A) =&gt; Boolean): IntËÆ°ÁÆóÊª°Ë∂≥ÊåáÂÆöÊù°‰ª∂ÁöÑÈõÜÂêàÂÖÉÁ¥†‰∏™Êï∞def copyToArray(xs: Array[A], start: Int, len: Int): UnitÂ§çÂà∂‰∏çÂèØÂèòÈõÜÂêàÂÖÉÁ¥†Âà∞Êï∞ÁªÑdef diff(that: Set[A]): Set[A]ÊØîËæÉ‰∏§‰∏™ÈõÜÂêàÁöÑÂ∑ÆÈõÜdef drop(n: Int): Set[A]]ËøîÂõû‰∏¢ÂºÉÂâçn‰∏™ÂÖÉÁ¥†Êñ∞ÈõÜÂêà def dropRight(n: Int): Set[A]ËøîÂõû‰∏¢ÂºÉÊúÄÂêén‰∏™ÂÖÉÁ¥†Êñ∞ÈõÜÂêàdef dropWhile(p: (A) =&gt; Boolean): Set[A]‰ªéÂ∑¶ÂêëÂè≥‰∏¢ÂºÉÂÖÉÁ¥†ÔºåÁõ¥Âà∞Êù°‰ª∂p‰∏çÊàêÁ´ãdef equals(that: Any): Booleanequals ÊñπÊ≥ïÂèØÁî®‰∫é‰ªªÊÑèÂ∫èÂàó„ÄÇÁî®‰∫éÊØîËæÉÁ≥ªÂàóÊòØÂê¶Áõ∏Á≠â„ÄÇdef exists(p: (A) =&gt; Boolean): BooleanÂà§Êñ≠‰∏çÂèØÂèòÈõÜÂêà‰∏≠ÊåáÂÆöÊù°‰ª∂ÁöÑÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®„ÄÇdef filter(p: (A) =&gt; Boolean): Set[A]ËæìÂá∫Á¨¶ÂêàÊåáÂÆöÊù°‰ª∂ÁöÑÊâÄÊúâ‰∏çÂèØÂèòÈõÜÂêàÂÖÉÁ¥†„ÄÇdef find(p: (A) =&gt; Boolean): Option[A]Êü•Êâæ‰∏çÂèØÂèòÈõÜÂêà‰∏≠Êª°Ë∂≥ÊåáÂÆöÊù°‰ª∂ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥† def forall(p: (A) =&gt; Boolean): BooleanÊü•Êâæ‰∏çÂèØÂèòÈõÜÂêà‰∏≠Êª°Ë∂≥ÊåáÂÆöÊù°‰ª∂ÁöÑÊâÄÊúâÂÖÉÁ¥†def foreach(f: (A) =&gt; Unit): UnitÂ∞ÜÂáΩÊï∞Â∫îÁî®Âà∞‰∏çÂèØÂèòÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥† def head: AËé∑Âèñ‰∏çÂèØÂèòÈõÜÂêàÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†def init: Set[A]ËøîÂõûÊâÄÊúâÂÖÉÁ¥†ÔºåÈô§‰∫ÜÊúÄÂêé‰∏Ä‰∏™def intersect(that: Set[A]): Set[A]ËÆ°ÁÆó‰∏§‰∏™ÈõÜÂêàÁöÑ‰∫§ÈõÜdef isEmpty: BooleanÂà§Êñ≠ÈõÜÂêàÊòØÂê¶‰∏∫Á©∫def iterator: Iterator[A]ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑËø≠‰ª£Âô®Êù•Ëø≠‰ª£ÂÖÉÁ¥†def last: AËøîÂõûÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†def map[B](f: (A) =&gt; B): immutable.Set[B]ÈÄöËøáÁªôÂÆöÁöÑÊñπÊ≥ïÂ∞ÜÊâÄÊúâÂÖÉÁ¥†ÈáçÊñ∞ËÆ°ÁÆódef max: AÊü•ÊâæÊúÄÂ§ßÂÖÉÁ¥† def min: AÊü•ÊâæÊúÄÂ∞èÂÖÉÁ¥† def mkString: StringÈõÜÂêàÊâÄÊúâÂÖÉÁ¥†‰Ωú‰∏∫Â≠óÁ¨¶‰∏≤ÊòæÁ§∫def mkString(sep: String): String‰ΩøÁî®ÂàÜÈöîÁ¨¶Â∞ÜÈõÜÂêàÊâÄÊúâÂÖÉÁ¥†‰Ωú‰∏∫Â≠óÁ¨¶‰∏≤ÊòæÁ§∫def product: AËøîÂõû‰∏çÂèØÂèòÈõÜÂêà‰∏≠Êï∞Â≠óÂÖÉÁ¥†ÁöÑÁßØ„ÄÇdef size: IntËøîÂõû‰∏çÂèØÂèòÈõÜÂêàÂÖÉÁ¥†ÁöÑÊï∞Èáèdef splitAt(n: Int): (Set[A], Set[A])Êää‰∏çÂèØÂèòÈõÜÂêàÊãÜÂàÜ‰∏∫‰∏§‰∏™ÂÆπÂô®ÔºåÁ¨¨‰∏Ä‰∏™Áî±Ââç n ‰∏™ÂÖÉÁ¥†ÁªÑÊàêÔºåÁ¨¨‰∫å‰∏™Áî±Ââ©‰∏ãÁöÑÂÖÉÁ¥†ÁªÑÊàêdef subsetOf(that: Set[A]): BooleanÂ¶ÇÊûúÈõÜÂêàA‰∏≠Âê´ÊúâÂ≠êÈõÜBËøîÂõû trueÔºåÂê¶ÂàôËøîÂõûfalsedef sum: AËøîÂõû‰∏çÂèØÂèòÈõÜÂêà‰∏≠ÊâÄÊúâÊï∞Â≠óÂÖÉÁ¥†‰πãÂíå def tail: Set[A]ËøîÂõû‰∏Ä‰∏™‰∏çÂèØÂèòÈõÜÂêà‰∏≠Èô§‰∫ÜÁ¨¨‰∏ÄÂÖÉÁ¥†‰πãÂ§ñÁöÑÂÖ∂‰ªñÂÖÉÁ¥†def take(n: Int): Set[A]ËøîÂõûÂâç n ‰∏™ÂÖÉÁ¥†def takeRight(n: Int):Set[A]ËøîÂõûÂêé n ‰∏™ÂÖÉÁ¥†def toArray: Array[A]Â∞ÜÈõÜÂêàËΩ¨Êç¢‰∏∫Êï∞ÁªÑdef toBuffer[B &gt;: A]: Buffer[B]ËøîÂõûÁºìÂÜ≤Âå∫ÔºåÂåÖÂê´‰∫Ü‰∏çÂèØÂèòÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥†def toList: List[A]ËøîÂõû ListÔºåÂåÖÂê´‰∫Ü‰∏çÂèØÂèòÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥†def toMap[T, U]: Map[T, U]ËøîÂõû MapÔºåÂåÖÂê´‰∫Ü‰∏çÂèØÂèòÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥† def toSeq: Seq[A]ËøîÂõû SeqÔºåÂåÖÂê´‰∫Ü‰∏çÂèØÂèòÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥†def toString(): StringËøîÂõû‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ôºå‰ª•ÂØπË±°Êù•Ë°®Á§∫]]></content>
      <categories>
        <category>Scala</category>
      </categories>
      <tags>
        <tag>Set</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[String ÊñπÊ≥ï]]></title>
    <url>%2F2019%2F02%2F16%2FString%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139String ÊñπÊ≥ï char charAt(int index)ËøîÂõûÊåáÂÆö‰ΩçÁΩÆÁöÑÂ≠óÁ¨¶ ‰ªé0ÂºÄÂßã int compareTo(Object o)ÊØîËæÉÂ≠óÁ¨¶‰∏≤‰∏éÂØπË±° int compareTo(String anotherString)ÊåâÂ≠óÂÖ∏È°∫Â∫èÊØîËæÉ‰∏§‰∏™Â≠óÁ¨¶‰∏≤ int compareToIgnoreCase(String str)ÊåâÂ≠óÂÖ∏È°∫Â∫èÊØîËæÉ‰∏§‰∏™Â≠óÁ¨¶‰∏≤Ôºå‰∏çËÄÉËôëÂ§ßÂ∞èÂÜô String concat(String str)Â∞ÜÊåáÂÆöÂ≠óÁ¨¶‰∏≤ËøûÊé•Âà∞Ê≠§Â≠óÁ¨¶‰∏≤ÁöÑÁªìÂ∞æ boolean contentEquals(StringBuffer sb)Â∞ÜÊ≠§Â≠óÁ¨¶‰∏≤‰∏éÊåáÂÆöÁöÑ StringBuffer ÊØîËæÉ„ÄÇ static String copyValueOf(char[] data)ËøîÂõûÊåáÂÆöÊï∞ÁªÑ‰∏≠Ë°®Á§∫ËØ•Â≠óÁ¨¶Â∫èÂàóÁöÑ String static String copyValueOf(char[] data, int offset, int count)ËøîÂõûÊåáÂÆöÊï∞ÁªÑ‰∏≠Ë°®Á§∫ËØ•Â≠óÁ¨¶Â∫èÂàóÁöÑ String boolean endsWith(String suffix)ÊµãËØïÊ≠§Â≠óÁ¨¶‰∏≤ÊòØÂê¶‰ª•ÊåáÂÆöÁöÑÂêéÁºÄÁªìÊùü boolean equals(Object anObject)Â∞ÜÊ≠§Â≠óÁ¨¶‰∏≤‰∏éÊåáÂÆöÁöÑÂØπË±°ÊØîËæÉ boolean equalsIgnoreCase(String anotherString)Â∞ÜÊ≠§ String ‰∏éÂè¶‰∏Ä‰∏™ String ÊØîËæÉÔºå‰∏çËÄÉËôëÂ§ßÂ∞èÂÜô byte getBytes()‰ΩøÁî®Âπ≥Âè∞ÁöÑÈªòËÆ§Â≠óÁ¨¶ÈõÜÂ∞ÜÊ≠§ String ÁºñÁ†Å‰∏∫ byte Â∫èÂàóÔºåÂπ∂Â∞ÜÁªìÊûúÂ≠òÂÇ®Âà∞‰∏Ä‰∏™Êñ∞ÁöÑ byte Êï∞ÁªÑ‰∏≠ byte[] getBytes(String charsetName‰ΩøÁî®ÊåáÂÆöÁöÑÂ≠óÁ¨¶ÈõÜÂ∞ÜÊ≠§ String ÁºñÁ†Å‰∏∫ byte Â∫èÂàóÔºåÂπ∂Â∞ÜÁªìÊûúÂ≠òÂÇ®Âà∞‰∏Ä‰∏™Êñ∞ÁöÑ byte Êï∞ÁªÑ‰∏≠ void getChars(int srcBegin, int srcEnd, char[] dst, int dstBegin)Â∞ÜÂ≠óÁ¨¶‰ªéÊ≠§Â≠óÁ¨¶‰∏≤Â§çÂà∂Âà∞ÁõÆÊ†áÂ≠óÁ¨¶Êï∞ÁªÑ int hashCode()ËøîÂõûÊ≠§Â≠óÁ¨¶‰∏≤ÁöÑÂìàÂ∏åÁ†Å16 int indexOf(int ch)ËøîÂõûÊåáÂÆöÂ≠óÁ¨¶Âú®Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠Á¨¨‰∏ÄÊ¨°Âá∫Áé∞Â§ÑÁöÑÁ¥¢ÂºïÔºàËæìÂÖ•ÁöÑÊòØasciiÁ†ÅÂÄºÔºâ int indexOf(int ch, int fromIndex)ËøîËøîÂõûÂú®Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠Á¨¨‰∏ÄÊ¨°Âá∫Áé∞ÊåáÂÆöÂ≠óÁ¨¶Â§ÑÁöÑÁ¥¢ÂºïÔºå‰ªéÊåáÂÆöÁöÑÁ¥¢ÂºïÂºÄÂßãÊêúÁ¥¢ int indexOf(String str)ËøîÂõûÊåáÂÆöÂ≠êÂ≠óÁ¨¶‰∏≤Âú®Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠Á¨¨‰∏ÄÊ¨°Âá∫Áé∞Â§ÑÁöÑÁ¥¢Âºï int indexOf(String str, int fromIndex)ËøîÂõûÊåáÂÆöÂ≠êÂ≠óÁ¨¶‰∏≤Âú®Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠Á¨¨‰∏ÄÊ¨°Âá∫Áé∞Â§ÑÁöÑÁ¥¢ÂºïÔºå‰ªéÊåáÂÆöÁöÑÁ¥¢ÂºïÂºÄÂßã String intern()ËøîÂõûÂ≠óÁ¨¶‰∏≤ÂØπË±°ÁöÑËßÑËåÉÂåñË°®Á§∫ÂΩ¢Âºè int lastIndexOf(int ch)ËøîÂõûÊåáÂÆöÂ≠óÁ¨¶Âú®Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠ÊúÄÂêé‰∏ÄÊ¨°Âá∫Áé∞Â§ÑÁöÑÁ¥¢Âºï int lastIndexOf(int ch, int fromIndex)ËøîÂõûÊåáÂÆöÂ≠óÁ¨¶Âú®Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠ÊúÄÂêé‰∏ÄÊ¨°Âá∫Áé∞Â§ÑÁöÑÁ¥¢ÂºïÔºå‰ªéÊåáÂÆöÁöÑÁ¥¢ÂºïÂ§ÑÂºÄÂßãËøõË°åÂèçÂêëÊêúÁ¥¢ int lastIndexOf(String str)ËøîÂõûÊåáÂÆöÂ≠êÂ≠óÁ¨¶‰∏≤Âú®Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠ÊúÄÂè≥ËæπÂá∫Áé∞Â§ÑÁöÑÁ¥¢Âºï int lastIndexOf(String str, int fromIndex)ËøîÂõûÊåáÂÆöÂ≠êÂ≠óÁ¨¶‰∏≤Âú®Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠ÊúÄÂêé‰∏ÄÊ¨°Âá∫Áé∞Â§ÑÁöÑÁ¥¢ÂºïÔºå‰ªéÊåáÂÆöÁöÑÁ¥¢ÂºïÂºÄÂßãÂèçÂêëÊêúÁ¥¢ int length()ËøîÂõûÊ≠§Â≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ boolean matches(String regex)ÂëäÁü•Ê≠§Â≠óÁ¨¶‰∏≤ÊòØÂê¶ÂåπÈÖçÁªôÂÆöÁöÑÊ≠£ÂàôË°®ËææÂºè boolean regionMatches(boolean ignoreCase, int toffset, String other, int ooffset, int len)ÊµãËØï‰∏§‰∏™Â≠óÁ¨¶‰∏≤Âå∫ÂüüÊòØÂê¶Áõ∏Á≠â28 boolean regionMatches(int toffset, String other, int ooffset, int len)ÊµãËØï‰∏§‰∏™Â≠óÁ¨¶‰∏≤Âå∫ÂüüÊòØÂê¶Áõ∏Á≠â String replace(char oldChar, char newChar)ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂÆÉÊòØÈÄöËøáÁî® newChar ÊõøÊç¢Ê≠§Â≠óÁ¨¶‰∏≤‰∏≠Âá∫Áé∞ÁöÑÊâÄÊúâ oldChar ÂæóÂà∞ÁöÑ String replaceAll(String regex, String replacement‰ΩøÁî®ÁªôÂÆöÁöÑ replacement ÊõøÊç¢Ê≠§Â≠óÁ¨¶‰∏≤ÊâÄÊúâÂåπÈÖçÁªôÂÆöÁöÑÊ≠£ÂàôË°®ËææÂºèÁöÑÂ≠êÂ≠óÁ¨¶‰∏≤ String replaceFirst(String regex, String replacement)‰ΩøÁî®ÁªôÂÆöÁöÑ replacement ÊõøÊç¢Ê≠§Â≠óÁ¨¶‰∏≤ÂåπÈÖçÁªôÂÆöÁöÑÊ≠£ÂàôË°®ËææÂºèÁöÑÁ¨¨‰∏Ä‰∏™Â≠êÂ≠óÁ¨¶‰∏≤ String[] split(String regex)Ê†πÊçÆÁªôÂÆöÊ≠£ÂàôË°®ËææÂºèÁöÑÂåπÈÖçÊãÜÂàÜÊ≠§Â≠óÁ¨¶‰∏≤ String[] split(String regex, int limit)Ê†πÊçÆÂåπÈÖçÁªôÂÆöÁöÑÊ≠£ÂàôË°®ËææÂºèÊù•ÊãÜÂàÜÊ≠§Â≠óÁ¨¶‰∏≤ boolean startsWith(String prefix)ÊµãËØïÊ≠§Â≠óÁ¨¶‰∏≤ÊòØÂê¶‰ª•ÊåáÂÆöÁöÑÂâçÁºÄÂºÄÂßã boolean startsWith(String prefix, int toffset)ÊµãËØïÊ≠§Â≠óÁ¨¶‰∏≤‰ªéÊåáÂÆöÁ¥¢ÂºïÂºÄÂßãÁöÑÂ≠êÂ≠óÁ¨¶‰∏≤ÊòØÂê¶‰ª•ÊåáÂÆöÂâçÁºÄÂºÄÂßã„ÄÇ CharSequence subSequence(int beginIndex, int endIndex)ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂ≠óÁ¨¶Â∫èÂàóÔºåÂÆÉÊòØÊ≠§Â∫èÂàóÁöÑ‰∏Ä‰∏™Â≠êÂ∫èÂàó String substring(int beginIndex)ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂÆÉÊòØÊ≠§Â≠óÁ¨¶‰∏≤ÁöÑ‰∏Ä‰∏™Â≠êÂ≠óÁ¨¶‰∏≤ String substring(int beginIndex, int endIndex)ËøîÂõû‰∏Ä‰∏™Êñ∞Â≠óÁ¨¶‰∏≤ÔºåÂÆÉÊòØÊ≠§Â≠óÁ¨¶‰∏≤ÁöÑ‰∏Ä‰∏™Â≠êÂ≠óÁ¨¶‰∏≤ char[] toCharArray()Â∞ÜÊ≠§Â≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑÂ≠óÁ¨¶Êï∞ÁªÑ String toLowerCase()‰ΩøÁî®ÈªòËÆ§ËØ≠Ë®ÄÁéØÂ¢ÉÁöÑËßÑÂàôÂ∞ÜÊ≠§ String ‰∏≠ÁöÑÊâÄÊúâÂ≠óÁ¨¶ÈÉΩËΩ¨Êç¢‰∏∫Â∞èÂÜô String toLowerCase(Locale locale)‰ΩøÁî®ÁªôÂÆö Locale ÁöÑËßÑÂàôÂ∞ÜÊ≠§ String ‰∏≠ÁöÑÊâÄÊúâÂ≠óÁ¨¶ÈÉΩËΩ¨Êç¢‰∏∫Â∞èÂÜô String toString()ËøîÂõûÊ≠§ÂØπË±°Êú¨Ë∫´ÔºàÂÆÉÂ∑≤ÁªèÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºÅÔºâ String toUpperCase()‰ΩøÁî®ÈªòËÆ§ËØ≠Ë®ÄÁéØÂ¢ÉÁöÑËßÑÂàôÂ∞ÜÊ≠§ String ‰∏≠ÁöÑÊâÄÊúâÂ≠óÁ¨¶ÈÉΩËΩ¨Êç¢‰∏∫Â§ßÂÜô String toUpperCase(Locale locale)‰ΩøÁî®ÁªôÂÆö Locale ÁöÑËßÑÂàôÂ∞ÜÊ≠§ String ‰∏≠ÁöÑÊâÄÊúâÂ≠óÁ¨¶ÈÉΩËΩ¨Êç¢‰∏∫Â§ßÂÜô String trim()Âà†Èô§ÊåáÂÆöÂ≠óÁ¨¶‰∏≤ÁöÑÈ¶ñÂ∞æÁ©∫ÁôΩÁ¨¶ static String valueOf(primitive data type x)ËøîÂõûÊåáÂÆöÁ±ªÂûãÂèÇÊï∞ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÂΩ¢Âºè]]></content>
      <categories>
        <category>Scala</category>
      </categories>
      <tags>
        <tag>String</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2019%2F02%2F15%2FScala%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[[TOC] ‰∏Ä„ÄÅScalaÂÆòÁΩë6‰∏™ÁâπÂæÅ„ÄÇÁÆÄÊç∑ÔºåÂø´ÈÄü1„ÄÅJava ‰∏éJavaÊó†ÁºùÊï¥ÂêàÔºåËøêË°åÂú®JVM‰∏äÔºåÁºñËØëÂΩ¢Êàê.classÊñá‰ª∂ 2„ÄÅÁ±ªÂûã Á±ªÂûãËá™Âä®Êé®Êñ≠:var ÂèòÈáèÁ±ªÂûã val Â∏∏ÈáèÁ±ªÂûã Ôºàvar s = 1 Ëá™Âä®Êé®Êñ≠s ‰∏∫intÁ±ªÂûã Ôºâ dosÁ™óÂè£ËøêË°åScalaËØ≠Ë®ÄÔºàcmd - &gt;scalaÔºâ 3„ÄÅÂπ∂Âèë Â∫ïÂ±ÇÊúâactorÔºåÂ§©ÁîüÁî®‰∫éÈ´òÂπ∂ÂèëÂíåÂàÜÂ∏ÉÂºè 4„ÄÅÁªßÊâø trait ÁâπÂæÅÁâπË¥®ÔºàJava‰∏≠Êé•Âè£ÂíåÊäΩË±°Á±ªÁöÑÁªìÂêà‰ΩìÔºüÔºüÔºü‰∏§ËÄÖÂå∫Âà´ÔºüÔºüÂçïÁªßÊâøÂ§öÂÆûÁé∞Ôºâ‚Äã ÈùôÊÄÅËØ≠Ë®Ä ÔºàJavaÈùôÊÄÅËØ≠Ë®Ä shell „ÄÅPythonÂä®ÊÄÅËØ≠Ë®ÄÔºâ 5„ÄÅÂåπÈÖç Ê®°ÂºèÂåπÈÖç:(Java‰∏≠ÁöÑswitch caseÁ±ªÂûãÂøÖÈ°ª‰∏ÄËá¥)ÂèØÂåπÈÖçÂ§öÁßçÁ±ªÂûã 6„ÄÅÈ´òÈò∂ È´òÈò∂ÂáΩÊï∞ÔºàÂáΩÊï∞ÂºèÁºñÁ®ãÔºâÂáΩÊï∞ÂèØ‰ª•‰Ωú‰∏∫ÂèÇÊï∞‰º†ÂÖ•ÊñπÊ≥ï‰∏≠ÔºàJdk 8 streamÊµÅÔºåËé±ÂßÜÂ°îË°®ËææÂºèÔºâ ‚Äã Â∑•ÂÖ∑Á±ª‰∏≠ÊñπÊ≥ï‰∏∫ÈùôÊÄÅÁöÑ ‰∫å„ÄÅScalaÂÆâË£Ö1„ÄÅwindowsÂÆâË£Ö,ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè√ò ÂÆòÁΩë‰∏ãËΩΩscala2.10ÔºöÔºàÂõ†‰∏∫sparkÈúÄË¶ÅÁöÑÊòØËøô‰∏™ÁâàÊú¨ÁöÑScalaÔºâ http://www.scala-lang.org/download/2.10.4.html √ò ‰∏ãËΩΩÂ•ΩÂêéÂÆâË£Ö„ÄÇÂèåÂáªmsiÂåÖÂÆâË£Ö,ËÆ∞‰ΩèÂÆâË£ÖÁöÑË∑ØÂæÑ„ÄÇ √ò ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèÔºàÂíåÈÖçÁΩÆjdk‰∏ÄÊ†∑Ôºâ Êñ∞Âª∫SCALA_HOME ÁºñËæëPathÂèòÈáèÔºåÂú®ÂêéÈù¢ËøΩÂä†Â¶Ç‰∏ãÔºö 1;%SCALA_HOME%\bin √ò ÊâìÂºÄcmd,ËæìÂÖ•Ôºö 1scala - version ÁúãÊòØÂê¶ÊòæÁ§∫ÁâàÊú¨Âè∑ÔºåÁ°ÆÂÆöÊòØÂê¶ÂÆâË£ÖÊàêÂäü 2„ÄÅeclipse ÈÖçÁΩÆscalaÊèí‰ª∂√ò ‰∏ãËΩΩÊèí‰ª∂Ôºà‰∏ÄÂÆöË¶ÅÂØπÂ∫îeclipseÁâàÊú¨‰∏ãËΩΩÔºâ,Âπ∂Ëß£Âéã http://scala-ide.org/download/prev-stable.html √ò Â∞ÜËß£ÂéãÁõÆÂΩï‰∏ãÁöÑfeaturesÂíåplugins‰∏§‰∏™Êñá‰ª∂Â§πÊã∑Ë¥ùÂà∞eclipseÂÆâË£ÖÁõÆÂΩï‰∏≠ÁöÑ‚Äùdropins/scala‚ÄùÁõÆÂΩï‰∏ã„ÄÇ ËøõÂÖ•dropinsÔºåÊñ∞Âª∫scalaÊñá‰ª∂Â§πÔºåÂ∞Ü‰∏§‰∏™Êñá‰ª∂Â§πÊã∑Ë¥ùÂà∞‚Äúdropins/scala‚Äù‰∏ã 3„ÄÅScalaÁºñËæëÂô®Ôºöscala ide‰∏ãËΩΩÁΩëÂùÄÔºöhttp://scala-ide.org/download/sdk.html 4„ÄÅIdea ‰∏≠ÈÖçÁΩÆscalaÊèí‰ª∂√ò ÊâìÂºÄidea,closeÈ°πÁõÆÂêéÔºåÁÇπÂáªConfigure-&gt;Plugins √ò ÊêúÁ¥¢scalaÔºåÁÇπÂáªInstallÂÆâË£Ö √ò ËÆæÁΩÆjdkÔºåÊâìÂºÄProject Structure,ÁÇπÂáªnew ÈÄâÊã©ÂÆâË£ÖÂ•ΩÁöÑjdkË∑ØÂæÑ √ò Êñ∞Âª∫ScalaÈ°πÁõÆ ‰∏â„ÄÅScalaÂü∫Á°ÄËØ≠Ê≥ï1„ÄÅÊï∞ÊçÆÁ±ªÂûã 2„ÄÅÂèòÈáèÂíåÂ∏∏ÈáèÁöÑÂ£∞Êòé123456789101112 /** * ÂÆö‰πâÂèòÈáèÂíåÂ∏∏Èáè * ÂèòÈáè :Áî® var ÂÆö‰πâ ÔºåÂèØ‰øÆÊîπ * Â∏∏Èáè :Áî® val ÂÆö‰πâÔºå‰∏çÂèØ‰øÆÊîπ */ var name = "zhangsan" println(name) name ="lisi" println(name) val gender = "m"// gender = "m"//ÈîôËØØÔºå‰∏çËÉΩÁªôÂ∏∏ÈáèÂÜçËµãÂÄº// ÂÆö‰πâÂèòÈáèÊàñËÄÖÂ∏∏ÈáèÁöÑÊó∂ÂÄôÔºå‰πüÂèØ‰ª•ÂÜô‰∏äËøîÂõûÁöÑÁ±ªÂûãÔºå‰∏ÄËà¨ÁúÅÁï•ÔºåÂ¶ÇÔºöval a:Int = 10 3„ÄÅÁ±ªÂíåÂØπË±°√ò ÂàõÂª∫Á±ª 1234567class Person&#123; val name = "zhangsan" val age = 18 def sayName() = &#123; "my name is "+ name &#125;&#125; √ò ÂàõÂª∫ÂØπË±° 1234567object Lesson_Class &#123; def main(args: Array[String]): Unit = &#123; val person = new Person() println(person.age); println(person.sayName()) &#125;&#125; √ò ‰º¥ÁîüÁ±ªÂíå‰º¥ÁîüÂØπË±° 12345678910111213141516171819202122232425class Person(xname :String , xage :Int)&#123; var name = Person.name val age = xage var gender = "m" def this(name:String,age:Int,g:String)&#123; this(name,age) gender = g &#125; def sayName() = &#123; "my name is "+ name &#125;&#125;object Person &#123; val name = "zhangsanfeng" def main(args: Array[String]): Unit = &#123; val person = new Person("wagnwu",10,"f") println(person.age); println(person.sayName()) println(person.gender) &#125;&#125; Ê≥®ÊÑè Âª∫ËÆÆÁ±ªÂêçÈ¶ñÂ≠óÊØçÂ§ßÂÜô ÔºåÊñπÊ≥ïÈ¶ñÂ≠óÊØçÂ∞èÂÜôÔºåÁ±ªÂíåÊñπÊ≥ïÂëΩÂêçÂª∫ËÆÆÁ¨¶ÂêàÈ©ºÂ≥∞ÂëΩÂêçÊ≥ï„ÄÇ .‰∏ÄË°åÁªìÊùüÔºå‰∏çÈúÄË¶ÅÂàÜÂè∑„ÄÇÂ¶ÇÊûú‰∏ÄË°åÈáåÊúâÂ§ö‰∏™ËØ≠Âè•ÔºåÂàô‰πãÈó¥Áî®ÂàÜÂè∑ÈöîÂºÄ„ÄÇ scala ‰∏≠ÁöÑobjectÊòØÂçï‰æãÂØπË±°ÔºåÁõ∏ÂΩì‰∫éjava‰∏≠ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÂÆÉÈáåÈù¢ÁöÑÊñπÊ≥ïÂèØ‰ª•ÁúãÊàêÈÉΩÊòØstaticÈùôÊÄÅÁöÑ„ÄÇobject‰∏çÂèØ‰ª•‰º†ÂèÇÊï∞„ÄÇÂè¶ÔºöTrait‰∏çÂèØ‰ª•‰º†ÂèÇÊï∞ scala‰∏≠ÁöÑclassÁ±ªÈªòËÆ§ÂèØ‰ª•‰º†ÂèÇÊï∞ÔºåÈªòËÆ§ÁöÑ‰º†ÂèÇÊï∞Â∞±ÊòØÈªòËÆ§ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇ ÈáçÂÜôÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊó∂ÂÄôÔºåÂøÖÈ°ªË¶ÅÂÖàË∞ÉÁî®ÈªòËÆ§ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇ class Á±ªÂ±ûÊÄßËá™Â∏¶getter ÔºåsetterÊñπÊ≥ï„ÄÇ ‰ΩøÁî®objectÊó∂Ôºå‰∏çÁî®newÔºå‰ΩøÁî®classÊó∂Ë¶Ånew ,Âπ∂‰∏înewÁöÑÊó∂ÂÄôÔºåclass‰∏≠Èô§‰∫ÜÊñπÊ≥ï‰∏çÊâßË°åÔºåÂÖ∂‰ªñÈÉΩÊâßË°å„ÄÇ Â¶ÇÊûúÂú®Âêå‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÔºåobjectÂØπË±°ÂíåclassÁ±ªÁöÑÂêçÁß∞Áõ∏ÂêåÔºåÂàôËøô‰∏™ÂØπË±°Â∞±ÊòØËøô‰∏™Á±ªÁöÑ‰º¥ÁîüÂØπË±°ÔºåclassÁß∞‰∏∫objectÂØπË±°ÁöÑ‰º¥ÁîüÁ±ªÔºåobject Áß∞‰∏∫classÁ±ªÁöÑ‰º¥ÁîüÂØπË±°Ôºå‰ªñ‰ª¨ÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÂØπÊñπÁöÑÁßÅÊúâÂèòÈáè„ÄÇ 3. if else1234567891011/** * if else */val age =18 if (age &lt; 18 )&#123; println("no allow")&#125;else if (18&lt;=age&amp;&amp;age&lt;=20)&#123; println("allow with other")&#125;else&#123; println("allow self")&#125; 4. for ,while,do‚Ä¶while toÂíåuntil ÁöÑÁî®Ê≥ïÔºà‰∏çÂ∏¶Ê≠•ÈïøÔºåÂ∏¶Ê≠•ÈïøÂå∫Âà´Ôºâ 123456789101112131415 /** * toÂíåuntil * ‰æãÔºö * 1 to 10 ËøîÂõû1Âà∞10ÁöÑRangeÊï∞ÁªÑÔºåÂåÖÂê´10 * 1 until 10 ËøîÂõû1Âà∞10 RangeÊï∞ÁªÑ Ôºå‰∏çÂåÖÂê´10 */ println(1 to 10 )//ÊâìÂç∞Ôºö Range(1, 2, 3, 4, 5, 6, 7, 8, 9, 10) println(1.to(10))//Âêå‰∏äprintln(1 to (10 ,2))//Ê≠•Èïø‰∏∫2Ôºå‰ªé1ÂºÄÂßãÊâìÂç∞Ôºö Range(1, 3, 5, 7, 9) println(1.to(10, 2)) //Âêå‰∏äprintln(1 until 10 ) //‰∏çÂåÖÂê´ÊúÄÂêé‰∏Ä‰∏™Êï∞ÔºåÊâìÂç∞1,2,3,4,5,6,7,8,9 println(1.until(10))//Âêå‰∏ä println(1 until (10 ,3 ))//Ê≠•Èïø‰∏∫2Ôºå‰ªé1ÂºÄÂßãÊâìÂç∞ÔºåÊâìÂç∞1,4,7 ÂàõÂª∫forÂæ™ÁéØ 1234567/** * for Âæ™ÁéØ * */ for( i &lt;- 1 to 10 )&#123; println(i) &#125; ÂàõÂª∫Â§öÂ±ÇforÂæ™ÁéØ 123456789101112131415161718192021222324252627282930313233343536//ÂèØ‰ª•ÂàÜÂè∑ÈöîÂºÄÔºåÂÜôÂÖ•Â§ö‰∏™listËµãÂÄºÁöÑÂèòÈáèÔºåÊûÑÊàêÂ§öÂ±ÇforÂæ™ÁéØ //scala‰∏≠ ‰∏çËÉΩÂÜôcount++ count-- Âè™ËÉΩÂÜôcount+ var count = 0; for(i &lt;- 1 to 10; j &lt;- 1 until 10)&#123; println("i="+ i +", j="+j) count += 1 &#125; println(count); //‰æãÂ≠êÔºö ÊâìÂç∞Â∞è‰πù‰πù for(i &lt;- 1 until 10 ;j &lt;- 1 until 10)&#123; if(i&gt;=j)&#123; print(i +" * " + j + " = "+ i*j+" ") &#125; if(i==j )&#123; println() &#125; &#125;//‰πù‰πù‰πòÊ≥ïË°® //ÊñπÊ≥ï‰∏Ä// for(i&lt;- 1 to 9 )&#123;// for (j &lt;- 1 to i)&#123;// print(j+"*"+i+"="+i*j+"\t")// &#125;// println()// &#125; //ÊñπÊ≥ï‰∫å// for(i&lt;- 1 to 9 )&#123;// for (j&lt;- 1 to 9)&#123;// if(j&lt;=i)&#123;// print(j+"*"+i+"="+i*j+"\t")// &#125;//// if(i==j)println()// &#125;// &#125; forÂæ™ÁéØ‰∏≠ÂèØ‰ª•Âä†Êù°‰ª∂Âà§Êñ≠ÔºåÂàÜÂè∑ÈöîÂºÄ 1234 //ÂèØ‰ª•Âú®forÂæ™ÁéØ‰∏≠Âä†ÂÖ•Êù°‰ª∂Âà§Êñ≠ for(i&lt;- 1 to 10 ;if (i%2) == 0 ;if (i == 4) )&#123; println(i)&#125; scala‰∏≠‰∏çËÉΩ‰ΩøÁî®count++ÔºåcountÂè™ËÉΩ‰ΩøÁî®count = count+1 Ôºåcount += 1 whileÂæ™ÁéØÔºåwhileÔºàÔºâ{}Ôºådo {}while() 12345678910111213141516171819 //Â∞Üfor‰∏≠ÁöÑÁ¨¶ÂêàÊù°‰ª∂ÁöÑÂÖÉÁ¥†ÈÄöËøáyieldÂÖ≥ÈîÆÂ≠óËøîÂõûÊàê‰∏Ä‰∏™ÈõÜÂêà val list = for(i &lt;- 1 to 10 ; if(i &gt; 5 )) yield i //&lt;- ÂêéÈù¢ÊòØ‰∏Ä‰∏™ÈõÜÂêà for( w &lt;- list )&#123; println(w)&#125; /** * while Âæ™ÁéØ */ var index = 0 while(index &lt; 100 )&#123; println("Á¨¨"+index+"Ê¨°while Âæ™ÁéØ") index += 1 &#125; index = 0 do&#123; index +=1 println("Á¨¨"+index+"Ê¨°do while Âæ™ÁéØ")&#125;while(index &lt;100 ) Âõõ„ÄÅScalaÂáΩÊï∞1„ÄÅÂáΩÊï∞ÂÆö‰πâ1234567def fun (a: Int , b: Int ) : Unit = &#123; println(a+b) &#125;fun(1,1) def fun1 (a : Int , b : Int)= a+b println(fun1(1,2)) ËØ≠Ê≥ïËß£Èáä ÂáΩÊï∞ÂÆö‰πâËØ≠Ê≥ï Áî®defÊù•ÂÆö‰πâ ÂèØ‰ª•ÂÆö‰πâ‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåË¶ÅÊåáÂÆö‰º†ÂÖ•ÂèÇÊï∞ÁöÑÁ±ªÂûã scala‰∏≠ÂáΩÊï∞‰∏≠Â¶ÇÊûúËøîÂõûËøîÂõûÂÄºÁ±ªÂûã‰∏∫Unit ÔºåÂç≥Êó†ËøîÂõûÂÄº 12345&gt; def add(x:Int=10,y:Int=11):Unit =&#123;&gt; x+y&gt; &#125;&gt; //ÂÜôËøîÂõûÂÄºÁ±ªÂûãÊòØ=Êó∂Ôºå‰∏ÄÂÆöË¶ÅËÆ∞ÂæóÂÜô ÔºöÔºàÂÜíÂè∑Ôºâ&gt; scala‰∏≠ÂáΩÊï∞ÊúâËøîÂõûÂÄºÊó∂ÔºåÂèØ‰ª•ÂÜôreturnÔºå‰πüÂèØ‰ª•‰∏çÂÜôreturnÔºö ÁúÅÁï•returnÁöÑÊó∂ÂÄôÔºåÂáΩÊï∞Ëá™Âä®ÂõûÂ∞ÜÊúÄÂêé‰∏ÄË°åÁöÑË°®ËææÂºèÁöÑÂÄºÔºå‰Ωú‰∏∫ËøîÂõûÂÄº 123456789&gt; def max(x:Int,y:Int )=&#123;&gt; if (x&gt;y)&gt; x&gt; else&gt; y&gt; &#125;&gt; println(max(5,7))&gt; ÁªìÊûúÊòæÁ§∫Ôºö7&gt; * * Â¶ÇÊûúÂáΩÊï∞Êúâretrun,ÂàôÂøÖÈ°ªÂÜôËøîÂõûÁ±ªÂûã„ÄÇ 12345678&gt; def min(m:Int,n:Int):Int=&#123;&gt; if(m&gt;n)&gt; return n&gt; else&gt; return m&gt; &#125;&gt; println(min(5,7))&gt; * scala‰∏≠ÂáΩÊï∞ÊúâËøîÂõûÂÄºÊó∂ÔºåÂèØ‰ª•ÂÜôËøîÂõûÂÄºÁöÑÁ±ªÂûãÔºå‰πüÂèØ‰ª•ÁúÅÁï•ÔºåÂõ†‰∏∫scalaÂèØ‰ª•Á±ªÂûãËá™Âä®Êé®Êñ≠ÔºåÊúâÊó∂ÂÄô‰∏çËÉΩÁúÅÁï•ÔºåÂøÖÈ°ªÂÜôÔºå * * ÊØîÂ¶ÇÂú®ÈÄíÂΩíÂáΩÊï∞‰∏≠ÊàñËÄÖÂáΩÊï∞ÁöÑËøîÂõûÂÄºÊòØÂáΩÊï∞Á±ªÂûãÁöÑÊó∂ÂÄô„ÄÇ 12345678&gt; def num(x: Int): Int = &#123;&gt; if (x == 1)&gt; 1&gt; else &#123;&gt; x * num(x - 1)&gt; &#125;&gt; &#125;&gt; * ÂáΩÊï∞ÂÆö‰πâÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂéªÊéâ = ÔºåÈÇ£‰πàËøô‰∏™ÊñπÊ≥ïËøîÂõûÁ±ªÂûãÂøÖÂÆöÊòØUnitÁöÑ„ÄÇ ËøôÁßçËØ¥Ê≥ïÊó†ËÆ∫ÊñπÊ≥ï‰ΩìÈáåÈù¢‰ªÄ‰πàÈÄªËæëÈÉΩÊàêÁ´ãÔºåscalaÂèØ‰ª•Êää‰ªªÊÑèÁ±ªÂûãËΩ¨Êç¢‰∏∫Unit„ÄÇ ÂÅáËÆæÔºåÈáåÈù¢ÁöÑÈÄªËæëÊúÄÂêéËøîÂõû‰∫Ü‰∏Ä‰∏™stringÔºåÈÇ£‰πàËøô‰∏™ËøîÂõûÂÄº‰ºöË¢´ËΩ¨Êç¢ÊàêUnitÔºåÂπ∂‰∏îÂÄº‰ºöË¢´‰∏¢ÂºÉ„ÄÇ ÂàôÁõ∏ÂΩì‰∫éÔºåÂáΩÊï∞Â∞±Â∞ÜËøîÂõûÂÄºÂéªÊéâÔºåÂç≥Êó†ËøîÂõûÂÄº„ÄÇ * {}ÈáåÁöÑ‰ª£Á†ÅÔºåÂ¶ÇÊûúÂè™Êúâ‰∏ÄË°åÔºåÂàôÂèØ‰ª•ÁúÅÁï•{} * ‰º†ÈÄíÁªôÊñπÊ≥ïÁöÑÂèÇÊï∞ÂèØ‰ª•Âú®ÊñπÊ≥ï‰∏≠‰ΩøÁî®ÔºåÂπ∂‰∏îscalaËßÑÂÆöÊñπÊ≥ïÁöÑ‰º†ËøáÊù•ÁöÑÂèÇÊï∞‰∏∫valÁ±ªÂûãÔºå‰∏çËÉΩ‰øÆÊîπÔºå‰∏çÊòØvar„ÄÇ 2„ÄÅÈÄíÂΩíÂáΩÊï∞1234567891011/** * ÈÄíÂΩíÂáΩÊï∞ * 5ÁöÑÈò∂‰πò */ def fun2(num :Int) :Int= &#123; if(num ==1) num else num * fun2(num-1) &#125; print(fun2(5)) 3„ÄÅÂåÖÂê´ÂèÇÊï∞ÈªòËÆ§ÂÄºÁöÑÂáΩÊï∞12345678910/** * ÂåÖÂê´ÈªòËÆ§ÂèÇÊï∞ÂÄºÁöÑÂáΩÊï∞ * Ê≥®ÊÑèÔºö * 1.ÈªòËÆ§ÂÄºÁöÑÂáΩÊï∞‰∏≠ÔºåÂ¶ÇÊûú‰º†ÂÖ•ÁöÑÂèÇÊï∞‰∏™Êï∞‰∏éÂáΩÊï∞ÂÆö‰πâÁõ∏ÂêåÔºåÂàô‰º†ÂÖ•ÁöÑÊï∞ÂÄº‰ºöË¶ÜÁõñÈªòËÆ§ÂÄº * 2.Â¶ÇÊûú‰∏çÊÉ≥Ë¶ÜÁõñÈªòËÆ§ÂÄºÔºå‰º†ÂÖ•ÁöÑÂèÇÊï∞‰∏™Êï∞Â∞è‰∫éÂÆö‰πâÁöÑÂáΩÊï∞ÁöÑÂèÇÊï∞ÔºåÂàôÈúÄË¶ÅÊåáÂÆöÂèÇÊï∞ÂêçÁß∞ */ def fun3(a :Int = 10,b:Int) = &#123; println(a+b) &#125; fun3(b=2) 4„ÄÅÂèØÂèòÂèÇÊï∞‰∏™Êï∞ÁöÑÂáΩÊï∞12345678910111213/** * ÂèØÂèòÂèÇÊï∞‰∏™Êï∞ÁöÑÂáΩÊï∞ * Ê≥®ÊÑèÔºöÂ§ö‰∏™ÂèÇÊï∞ÈÄóÂè∑ÂàÜÂºÄ */def fun4(elem :Int*)=&#123; var sum = 0; for(e &lt;- elem)&#123; sum += e &#125; sum&#125;println(fun4(1,2,3,4)) 5„ÄÅÂåøÂêçÂáΩÊï∞ ÊúâÂèÇÂåøÂêçÂáΩÊï∞ Êó†ÂèÇÂåøÂêçÂáΩÊï∞ ÊúâËøîÂõûÂÄºÁöÑÂåøÂêçÂáΩÊï∞ ÂèØ‰ª•Â∞ÜÂåøÂêçÂáΩÊï∞ËøîÂõûÁªôvalÂÆö‰πâÁöÑÂÄº ÂåøÂêçÂáΩÊï∞‰∏çËÉΩÊòæÂºèÂ£∞ÊòéÂáΩÊï∞ÁöÑËøîÂõûÁ±ªÂûã 123456789101112131415161718//ÊúâÂèÇÊï∞ÂåøÂêçÂáΩÊï∞val fun1 = (a : Int Ôºå b : Int) =&gt; &#123; println(a+b)&#125;value1(1,2)//Êó†ÂèÇÊï∞ÂåøÂêçÂáΩÊï∞val fun2 = ()=&gt;&#123; println("Âï¶Âï¶Âï¶")&#125;fun2()//ÊúâËøîÂõûÂÄºÁöÑÂåøÂêçÂáΩÊï∞val fun3 = (a:Int,b:Int) =&gt;&#123; a+b&#125;println(fun3(4,4)) 6„ÄÅ ÂµåÂ•óÂáΩÊï∞123456789101112131415/** * ÂµåÂ•óÂáΩÊï∞ * ‰æãÂ¶ÇÔºöÂµåÂ•óÂáΩÊï∞Ê±Ç5ÁöÑÈò∂‰πò */ def fun5(num:Int)=&#123; def fun6(a:Int,b:Int):Int=&#123; if(a == 1)&#123; b &#125;else&#123; fun6(a-1,a*b) &#125; &#125; fun6(num,1) &#125; println(fun5(5)) 7„ÄÅÂÅèÂ∫îÁî®ÂáΩÊï∞123456789101112131415161718192021222324import java.util.Date /** * ÂÅèÂ∫îÁî®ÂáΩÊï∞ÊòØ‰∏ÄÁßçË°®ËææÂºè * ‰∏çÈúÄË¶ÅÊèê‰æõÂáΩÊï∞ÈúÄË¶ÅÁöÑÊâÄÊúâÂèÇÊï∞Ôºå * Âè™ÈúÄË¶ÅÊèê‰æõÈÉ®ÂàÜÔºåÊàñ‰∏çÊèê‰æõÊâÄÈúÄÂèÇÊï∞„ÄÇ */ def log(date :Date, s :String)= &#123; println("date is "+ date +",log is "+ s) &#125; val date = new Date() log(date ,"log1") log(date ,"log2") log(date ,"log3") //ÊÉ≥Ë¶ÅË∞ÉÁî®logÔºå‰ª•‰∏äÂèòÂåñÁöÑÊòØÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºåÂèØ‰ª•Áî®ÂÅèÂ∫îÁî®ÂáΩÊï∞Â§ÑÁêÜ,Êù•‰ºòÂåñlogÊñπÊ≥ï /* ÁªëÂÆöÁ¨¨‰∏Ä‰∏™ date ÂèÇÊï∞Ôºå * Á¨¨‰∫å‰∏™ÂèÇÊï∞‰ΩøÁî®‰∏ãÂàíÁ∫ø(_)ÊõøÊç¢Áº∫Â§±ÁöÑÂèÇÊï∞ÂàóË°®Ôºå * Âπ∂ÊääËøô‰∏™Êñ∞ÁöÑÂáΩÊï∞ÂÄºÁöÑÁ¥¢ÂºïÁöÑËµãÁªôÂèòÈáè„ÄÇ */ val logWithDate = log(date,_:String) logWithDate("log11") logWithDate("log22") logWithDate("log33") 8„ÄÅÈ´òÈò∂ÂáΩÊï∞12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970 /** * È´òÈò∂ÂáΩÊï∞:Â∞±ÊòØÊìç‰ΩúÂÖ∂‰ªñÂáΩÊï∞ÁöÑÂáΩÊï∞ * ÂáΩÊï∞ÁöÑÂèÇÊï∞ÊòØÂáΩÊï∞ * ÊàñËÄÖÂáΩÊï∞ÁöÑËøîÂõûÊòØÂáΩÊï∞ * ÊàñËÄÖÂáΩÊï∞ÁöÑÂèÇÊï∞ÂíåËøîÂõûÈÉΩÊòØÂáΩÊï∞ *///ÂáΩÊï∞‰Ωú‰∏∫ÂèÇÊï∞ÊàñËÄÖËøîÂõûÁ¥ØÂøÉÊó∂ÔºåÂè™ÈúÄÊåáÊòéÂáΩÊï∞‰∏≠ÁöÑÁ±ªÂûã //ÂáΩÊï∞ÁöÑÂèÇÊï∞ÊòØÂáΩÊï∞Ôºö //f : (Int,Int) =&gt;Int Ôºà‰∏§‰∏™IntÂûãÂèÇÊï∞„ÄÅIntÂûãËøîÂõûÂÄºÔºâ def hightFun(f : (Int,Int) =&gt;Int, a:Int ) : Int = &#123; f(a,100) &#125; def f(v1 :Int,v2: Int):Int = &#123; v1+v2 &#125; println(hightFun(f, 1)) //*************** def test1(x: Int, f: (Int, Int) =&gt; Int) = &#123; var a = x + 100 a * f(1, 3) &#125; def sum(x: Int, y: Int): Int = &#123; x - y &#125; println(test6(10,sum))//------------------------------------------------ //ÂáΩÊï∞ÁöÑËøîÂõûÂÄºÁ±ªÂûã‰∏∫ÂáΩÊï∞ Ôºö(Int,Int)=&gt;Int f2 //1Ôºå2,3,4Áõ∏Âä† def hightFun2(a : Int,b:Int) : (Int,Int)=&gt;Int = &#123; def f2 (v1: Int,v2:Int) :Int = &#123; v1+v2+a+b &#125; f2 &#125; println(hightFun2(1,2)(3,4)) //*********** def test2(x: Int): (Int) =&gt; String = &#123; def concat(y: Int): String = &#123; x + " !! " + y &#125; concat &#125; val concat: Int =&gt; String = test2(5) println(concat(7))// println(test2(5)(7)) //------------------------------------------------- //ÂáΩÊï∞ÁöÑÂèÇÊï∞ÊòØÂáΩÊï∞: f : (Int ,Int) =&gt; Int) //ÂáΩÊï∞ÁöÑËøîÂõûÊòØÂáΩÊï∞: (Int,Int) =&gt; Int def hightFun3(f : (Int ,Int) =&gt; Int) : (Int,Int) =&gt; Int = &#123; f &#125; println(hightFun3(f)(100,200)) println(hightFun3((a,b) =&gt;&#123;a+b&#125;)(200,200)) //‰ª•‰∏äËøôÂè•ËØùËøòÂèØ‰ª•ÂÜôÊàêËøôÊ†∑ //Â¶ÇÊûúÂáΩÊï∞ÁöÑÂèÇÊï∞Âú®ÊñπÊ≥ï‰Ωì‰∏≠Âè™‰ΩøÁî®‰∫Ü‰∏ÄÊ¨° ÈÇ£‰πàÂèØ‰ª•ÂÜôÊàê_Ë°®Á§∫ println(hightFun3(_+_)(200,200)) //********** def test3(y: Int, f: (Int) =&gt; Int): (Int) =&gt; Int = &#123; var sum = f(1) + y def sum4(x: Int) = &#123; x + sum &#125; sum4 &#125;// def f2 (x: Int) =&#123;// x + 10// &#125; val f = test3(10,(x:Int)=&gt;&#123;x + 10&#125;)// println(f(5)) 9„ÄÅÊüØÈáåÂåñÂáΩÊï∞12345678910111213/** * ÊüØÈáåÂåñÂáΩÊï∞ * ÂèØ‰ª•ÁêÜËß£‰∏∫È´òÈò∂ÂáΩÊï∞ÁöÑÁÆÄÂåñ */ def fun1(a :Int,b:Int)(c:Int,d:Int) = &#123; a+b+c+d &#125; println(fun1(1,2)(3,4)) //******* def fun(a :Int)(c:Int) = &#123; a+c &#125; println(fun(1)(3)) ‰∫î„ÄÅÂ≠óÁ¨¶‰∏≤1„ÄÅstring | stringBuilder (ÂèØÂèò)2„ÄÅÊìç‰ΩúÊñπÊ≥ï√ò ÊØîËæÉ:equals √ò ÊØîËæÉÂøΩÁï•Â§ßÂ∞èÂÜô:equalsIgnoreCase √ò indexOfÔºöÂ¶ÇÊûúÂ≠óÁ¨¶‰∏≤‰∏≠Êúâ‰º†ÂÖ•ÁöÑassciÁ†ÅÂØπÂ∫îÁöÑÂÄºÔºåËøîÂõû‰∏ãÊ†á 12345678910111213141516171819202122232425262728293031323334353637383940 /** * String &amp;&amp; StringBuilder */ val str = "abcd" val str1 = "ABCD" println(str.indexOf(97)) println(str.indexOf("b")) println(str==str1) println(str.equals(str1)) println(str.equalsIgnoreCase(str1)) /** * compareToIgnoreCase * * Â¶ÇÊûúÂèÇÊï∞Â≠óÁ¨¶‰∏≤Á≠â‰∫éÊ≠§Â≠óÁ¨¶‰∏≤ÔºåÂàôËøîÂõûÂÄº 0Ôºõ * Â¶ÇÊûúÊ≠§Â≠óÁ¨¶‰∏≤Â∞è‰∫éÂ≠óÁ¨¶‰∏≤ÂèÇÊï∞ÔºåÂàôËøîÂõû‰∏Ä‰∏™Â∞è‰∫é 0 ÁöÑÂÄºÔºõ * Â¶ÇÊûúÊ≠§Â≠óÁ¨¶‰∏≤Â§ß‰∫éÂ≠óÁ¨¶‰∏≤ÂèÇÊï∞ÔºåÂàôËøîÂõû‰∏Ä‰∏™Â§ß‰∫é 0 ÁöÑÂÄº„ÄÇ * */ println(str.compareToIgnoreCase(str1)) val strBuilder = new StringBuilder() //Êã¨Âè∑ÂèØÁúÅ strBuilder.append("abc")//‰∏Ä‰∏™ + Âè™ËÉΩË∑üÂçï‰∏™Â≠óÁ¨¶‰∏îÂøÖÈ°ªÁî®ÂçïÂºïÂè∑ÔºåÂê¶ÂàôÊó†Êïà // strBuilder.+('d') strBuilder+ 'd'// strBuilder.+=('h') strBuilder+= 'h' //‰∏§‰∏™+ ÂèØË∑üÂ§ö‰∏™Â≠óÁ¨¶‰∏îÂøÖÈ°ªÁî®ÂèåÂºïÂè∑// strBuilder.++=("efg") strBuilder++= "efg"//StringBuilderÂèØ‰ª•ËøΩÂä†ÊµÆÁÇπÊï∞ strBuilder.append(1.0) strBuilder.append(18f) println(strBuilder) println(strBuilder.toString()) ÂÖ≠„ÄÅÈõÜÂêà1„ÄÅÊï∞ÁªÑÔºà1ÔºâÂàõÂª∫‰∏ÄÁª¥Êï∞ÁªÑ1234567891011121314/** * ÂàõÂª∫Êï∞ÁªÑ‰∏§ÁßçÊñπÂºèÔºö * 1.new Array[String](3) * 2.Áõ¥Êé•Array */ //ÂàõÂª∫Á±ªÂûã‰∏∫Int ÈïøÂ∫¶‰∏∫3ÁöÑÊï∞ÁªÑ val arr1 = new Array[Int](3) //ÂàõÂª∫String Á±ªÂûãÁöÑÊï∞ÁªÑÔºåÁõ¥Êé•ËµãÂÄº val arr2 = Array[String]("s100","s200","s300") //ËµãÂÄº arr1(0) = 100 arr1(1) = 200 arr1(2) = 300 Ôºà2ÔºâÊï∞ÁªÑÈÅçÂéÜ123456789101112131415161718/** * ÈÅçÂéÜ‰∏§ÁßçÊñπÂºè * for * foreach */ for(i &lt;- arr1)&#123; println(i) &#125; arr1.foreach(i =&gt; &#123; println(i) &#125;) for(s &lt;- arr2)&#123; println(s) &#125; arr2.foreach &#123; x =&gt; println(x) &#125; Ôºà3ÔºâÊï∞ÁªÑÊìç‰Ωú1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768Array.concatÔºöÂêàÂπ∂Êï∞ÁªÑArray.fill(5)(‚Äúshsxt‚Äù)ÔºöÂàõÂª∫ÂàùÂßãÂÄºÁöÑÂÆöÈïøÊï∞ÁªÑdef main(args: Array[String]): Unit = &#123; val a = new Array[Int](3) a(0) = 1 a(1) = 2 a(2) = 3//Âà§Êñ≠Êï∞ÁªÑ‰∏≠Á¨¶ÂêàÊù°‰ª∂ÁöÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞// val n = a.count(x=&gt;&#123;// if(x&gt;2)// true// else// false// &#125;)//// println(n) val b = Array(4,5,6)//Â∞Ü‰∏§‰∏™Êï∞ÁªÑÁöÑÂÖÉÁ¥†ÂêàÂπ∂Âú®‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÁªÑ‰∏≠ val ints = Array.concat(a,b)//ÈÅçÂéÜÊï∞ÁªÑ ints.foreach(println)//ÂàõÂª∫ÂåÖÂê´5‰∏™ÊåáÂÆöÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ val strings = Array.fill(5)("shsxt") strings.foreach(println)//// for(i &lt;- a)&#123;// println(i)// &#125;//// val b = Array(4,5,6)//// for(i &lt;- b)&#123;// println(i)// &#125;// a.foreach(x=&gt; &#123; println(x) &#125; )// a.foreach(println(_))// a.foreach(println)// val c = new Array[Array[Int]](3)// c(0) = Array(1,2,3)// c(1) = Array(4,5,6)// c(2) = Array(7,8,9)// c.foreach(x=&gt;&#123;// x.foreach(y=&gt;&#123;// print(y + "\t")// &#125;)// println()// &#125;)// for(i&lt;-c)&#123;// for(j &lt;-i)&#123;// print(j + "\t")// &#125;// println()// &#125; &#125; Ôºà4ÔºâÂàõÂª∫‰∫åÁª¥Êï∞ÁªÑ123456789101112131415161718192021222324252627282930313233343536/** * ÂàõÂª∫‰∫åÁª¥Êï∞ÁªÑÂíåÈÅçÂéÜ */ val arr3 = new Array[Array[String]](3) arr3(0)=Array("1","2","3") arr3(1)=Array("4","5","6") arr3(2)=Array("7","8","9") for(i &lt;- 0 until arr3.length)&#123; for(j &lt;- 0 until arr3(i).length)&#123; print(arr3(i)(j)+" ") &#125; println() &#125; var count = 0 for(arr &lt;- arr3 ;i &lt;- arr)&#123; if(count%3 == 0)&#123; println() &#125; print(i+" ") count +=1 &#125; arr3.foreach &#123; arr =&gt; &#123; arr.foreach &#123; println &#125; &#125;&#125; val arr4 = Array[Array[Int]](Array(1,2,3),Array(4,5,6)) arr4.foreach &#123; arr =&gt; &#123; arr.foreach(i =&gt; &#123; println(i) &#125;) &#125;&#125; println("-------") for(arr &lt;- arr4;i &lt;- arr)&#123; println(i) 2„ÄÅlistÔºà1ÔºâÂàõÂª∫list1val list = List(1,2,3,4) Â§áÊ≥® Nil ÈïøÂ∫¶‰∏∫0ÁöÑlist Ôºà2ÔºâlistÈÅçÂéÜ foreach Ôºåfor Ôºà3ÔºâlistÊìç‰Ωú12345678910111213141516171819202122232425262728 //ÂàõÂª∫ val list = List(1,2,3,4,5) //ÈÅçÂéÜ list.foreach &#123; x =&gt; println(x)&#125;// list.foreach &#123; println&#125; //filter ËøáÊª§ÂÖÉÁ¥† val list1 = list.filter &#123; x =&gt; x&gt;3 &#125; list1.foreach &#123; println&#125; //count ËÆ°ÁÆóÁ¨¶ÂêàÊù°‰ª∂ÁöÑÂÖÉÁ¥†‰∏™Êï∞ val value = list1.count &#123; x =&gt; x&gt;3 &#125; println(value) //map ÂØπÂÖÉÁ¥†Êìç‰Ωú Â¶ÇÂàáÂàÜ val nameList = List( "hello shsxt", "hello xasxt", "hello shsxt" ) val mapResult:List[Array[String]] = nameList.map&#123; x =&gt; x.split(" ") &#125; mapResult.foreach&#123;println&#125; //flatmap Â∞ÜÂÖÉÁ¥†ÂéãÊâÅÂπ≥,ÂÖàmapÂÜçflat val flatMapResult : List[String] = nameList.flatMap&#123; x =&gt; x.split(" ") &#125; flatMapResult.foreach &#123; println &#125; 3„ÄÅsetÊ≥®ÊÑèÔºösetÈõÜÂêàËá™Âä®ÂéªÈáç 1234567891011121314151617181920212223242526272829303132val s = Set(1,2,3,3)val s1 = Set(1Ôºå2Ôºå3Ôºå4)//ÈÅçÂéÜÊó∂ÔºåËá™Âä®ÂéªÈáçs.foreach(println) for(x&lt;- s)&#123;println(x)&#125;//‰∫§ÈõÜval inse = s.intersect(s1)val ins = s.&amp;(s1)inse.foreach(println)inse.foreach&#123;println&#125;//Â∑ÆÈõÜval di = s.diff(s1)val de = s.&amp;~(s1)//Â≠êÈõÜ:sÊòØ‰∏çÊòØs1ÁöÑÂ≠êÈõÜval boo: Boolean = s.subsetof(s1)//max ,minval max = s.maxval min = s.minprintln(max + ":" + min)//ËΩ¨ÊàêÊï∞ÁªÑÔºålists.toArray.foreach(println)s.toList.foreach(println)//mkString , ÂÖÉÁ¥†‰ª•ÔºÅÂàÜÈöîÊãºÊàêÂ≠óÁ¨¶‰∏≤println(s.mkString)println(s.mkstring("!")) 4„ÄÅmap1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162//mapÂàõÂª∫Êó∂ÔºåËã•keyÁõ∏ÂêåÔºåÂàôÈÉΩ‰ºöË¢´Âêé‰∏Ä‰∏™keyË¶ÜÁõñval map =MapÔºà"1"-&gt;"a",("3","c"),"2"-&gt;"b"Ôºâ//Ëé∑ÂèñmapÂÄºprintln(map.get("1"))println(map.get("1").get)//Ëé∑ÂèñÊåáÂÆökeyÔºåËã•Ê≤°ÊúâÔºåÂ∞±Áî®Âè¶‰∏Ä‰∏™ÊåáÂÆöÂÄº‰ª£Êõøprintln(map.getOrElse("5","100"))val res = map.get("8").getOrElse("800")println(res)//ÈÅçÂéÜmap//x‰∏∫map‰∏≠ÁöÑ‰∏ÄÁªÑÈîÆÂÄºÂØπfor(x-&gt; map)&#123;println("key:"+x._1+",value:"+ x._2) &#125;map.foreach(x=&gt;&#123; println("key:"+x._1+",value:"+ x._2) &#125;)//ÈÅçÂéÜkeyval keyIteratable = map.keyskeyIteratable.foreach(k=&gt;&#123;println("key"+k+",value"+map.get(k).get)&#125;)//ÈÅçÂéÜvalueval valueIteratable = map.valuesvalueIteratable.foreach&#123;v=&gt;&#123; println("value"+v)&#125;&#125;//ÂêàÂπ∂mapval map1 = MapÔºà(1Ôºå"a"),(2,"b"),(3,"c")Ôºâval map2 = MapÔºà(1,"aa"),(2,"bb"),(3,"cc")Ôºâmap1.++(map2).foreach(println)map1.++:(map2).oreach(println)//mapÊìç‰ΩúÊñπÊ≥ï//filter:ËøáÊª§ÔºåÁïô‰∏ãÁ¨¶ÂêàÊù°‰ª∂ÁöÑÂÖÉÁ¥†val result = map.filter(x=&gt;&#123;if(x._1.equals("1")) trueelse false&#125;)result.foreach(println)map.filter(_._2.equals("a")).foreach(println)//countÔºöÁªüËÆ°Á¨¶ÂêàÊù°‰ª∂ÁöÑÂÖÉÁ¥†‰∏™Êï∞val countResult = map.countÔºàx=&gt;&#123; x._1.equals("1")Ôºâprintln(countResult) //containsÔºöÂà§Êñ≠map‰∏≠ÊòØÂê¶ÂåÖÂê´Êüê‰∏™keymap.contains("3")//existÔºöÂà§Êñ≠Á¨¶ÂêàÊù°‰ª∂ÁöÑÂÖÉÁ¥†ÊòØÂ≠òÂú®//Ëã•ÈÅáÂà∞Êù°‰ª∂ËøîÂõûÁªìÊûú‰∏∫trueÔºåÂ∞±ÂÅúÊ≠¢Ëø≠‰ª£map.exists(x=&gt;&#123;ifÔºàx._1.equals("3"))&#123;println("Â≠òÂú®ÂñΩ")&#125;elseprintln("‰∏çÂ≠òÂú®ÂñΩ")&#125;) 5„ÄÅÂÖÉÁªÑTupleÂêåÔºö‰∏éÂàóË°®Á±ª‰ºº ‰∏çÂêåÔºöÂÖÉÁªÑÂèØ‰ª•ÂåÖÂê´‰∏çÂêåÁ±ªÂûãÁöÑÂÖÉÁ¥†ÔºõÂÖÉÁªÑÁöÑÂÄºÊòØÈÄöËøáÂ∞ÜÂçï‰∏™ÂÄºÂåÖÂê´Âú®ÂúÜÊã¨Âè∑‰∏≠ÊûÑÊàê Ê≥®ÊÑèÔºöTupleÊúÄÂ§öÊîØÊåÅ22‰∏™ÂèÇÊï∞ 1234567891011121314151617181920212223//ÂÖÉÁ¥†‰∏™Êï∞ÂèñÂÜ≥‰∫éTupleÂêéÈù¢ÁöÑÊï∞Â≠óval t1 = new Tuple1(1)val t2 = new Tuple2(1,2)val t3 = Tuple3(1,2,3) val t5 = (1,2,3Ôºå4,5)val t22 = new Tuple22(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22)//Ëé∑ÂèñÂÖÉÁªÑ‰∏≠ÁöÑÂÄº ÔºöÁî® ._XX printlnÔºàt5._4Ôºâval t = Tuple2((1,2),("zhangsan","lisi"))println(t._1._2)//ÂÖÉÁªÑÈÅçÂéÜÔºöÂÖÉÁ¥†Ëø≠‰ª£Âô®val interator = t5.productorInteratorinterator.foreach(println)while(interator.hasNext)&#123; println(intrator.next())&#125;//ÂÖÉÁ¥†ÁøªËΩ¨ swapÔºå Âè™ÈíàÂØπ‰∫åÂÖÉÊï∞ÁªÑprintln(t2.swap)//ËΩ¨Êç¢ÊàêÂ≠óÁ¨¶‰∏≤println(t5.toString()) ‰∏É„ÄÅtraitScalaÔºöÂè™Êúâextends ÔºåÂèØ‰ª•ÁªßÊâøÂ§ö‰∏™Trait Scala Trait(ÁâπÂæÅ) Áõ∏ÂΩì‰∫é Java ÁöÑÊé•Âè£ÂíåÊäΩË±°Á±ªÁöÑÁªìÂêà ÂèØ‰ª•ÂÆö‰πâÂ±ûÊÄßÂíåÊñπÊ≥ï Ê≥®ÊÑèÔºö Ëã•ÁªßÊâøÁöÑÂ§ö‰∏™trait‰∏≠ÂåÖÂê´ÂêåÂêçÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåÂ∞±ÂøÖÈ°ªÂú®Âú®Á±ª‰∏≠‰ΩøÁî®override ÈáçÊñ∞ÂÆö‰πâ Ëã•ÈáçÊñ∞ÂÆö‰πâÁöÑÂ±ûÊÄßÊòØ‰ΩøÁî®varÂÆö‰πâÁöÑÂàô‰ºöÊä•ÈîôÔºåÊâÄ‰ª•ÂøÖÈ°ªÊòØ‰ΩøÁî®valÂÆö‰πâÁöÑÂ±ûÊÄßÊâçÂèØ‰ΩøÁî®override trait‰∏≠‰∏çËÉΩ‰º†ÂèÇÊï∞ ‰∏æ‰æãÔºötrait‰∏≠Â∏¶Â±ûÊÄßÂ∏¶ÊñπÊ≥ïÂÆûÁé∞ 1234567891011121314151617181920212223242526272829303132trait Read&#123; var name = "read" val age = 18 def read():Unit=&#123; println("read---") &#125;&#125;trait Write&#123; var name = "write" val age = 19 def write():Unit=&#123; println("write----") &#125;&#125;class Human extends Read with Write&#123; //ÂâçÊèênameÂøÖÈ°ªÊòØÁî®valÂÆö‰πâÁöÑ // override var name = "person" override val age = 20 name = "person"&#125;object Trait&#123; def main(args:Array[String]):Unit = &#123; val human = new Human() println(human.name) human.read() human.write() &#125;&#125; ‰∏æ‰æãÔºötrait‰∏≠Â∏¶ÊñπÊ≥ï‰∏çÂÆûÁé∞ 12345678910111213141516171819202122232425262728293031trait Equal&#123; //ÊäΩË±°ÊñπÊ≥ï def isEqual(p:Point):Boolean def isNoEqual(p:Point):Boolean=&#123; !isEqual(p) &#125;&#125;class Point(x:Int,y:Int) extends Equal &#123; var xx = x var yy = y override def isEqual (p:Point) = &#123; p.xx == xx &amp; p.yy ==yy &#125; def isEqule(p:Any) = &#123; p.isInstanceOf[Point] &amp;&amp; p.asInstanceOf[Point].xx==xx &#125;&#125;object Trait2&#123; def main(args:Array[String]):Unit = &#123; val p1 = new Point(3,5) val p2 = new Point(4,5) ptintln(p1.isNoEqual(p2)) ptintln(p1.isEqual(p2)) &#125;&#125; ÂÖ´„ÄÅÊ®°ÂºèÂåπÈÖçmatch1„ÄÅÊ¶ÇÂøµÁêÜËß£ ‰∏Ä‰∏™Ê®°ÂºèÂåπÈÖçÂåÖÂê´Â§ö‰∏™Â§áÈÄâÈ°πÔºå‰∏îÊØè‰∏™ÈÉΩ‰ª•ÂÖ≥ÈîÆÂ≠ócaseÂºÄÂßã ÊØè‰∏™Â§áÈÄâÈ°πÈÉΩÂåÖÂê´‰∏Ä‰∏™Ê®°ÂºèÂíåÂ§ö‰∏™Ë°®ËææÂºèÔºå‰∏îÁî®ÁÆ≠Â§¥Á¨¶Âè∑ =&gt; ÈöîÂºÄ‰∫ÜÊ®°ÂºèÂíåË°®ËææÂºè„ÄÇ √ò Ê®°ÂºèÂåπÈÖç‰∏ç‰ªÖÂèØ‰ª•ÂåπÈÖçÂÄºËøòÂèØ‰ª•ÂåπÈÖçÁ±ªÂûã √ò ‰ªé‰∏äÂà∞‰∏ãÈ°∫Â∫èÂåπÈÖçÔºåÂ¶ÇÊûúÂåπÈÖçÂà∞Âàô‰∏çÂÜçÂæÄ‰∏ãÂåπÈÖç √ò ÈÉΩÂåπÈÖç‰∏ç‰∏äÊó∂Ôºå‰ºöÂåπÈÖçÂà∞case_ ,Áõ∏ÂΩì‰∫édefault √ò match ÁöÑÊúÄÂ§ñÈù¢ÁöÑ‚Äù{ }‚ÄùÂèØ‰ª•ÂéªÊéâÁúãÊàê‰∏Ä‰∏™ËØ≠Âè• 123456789101112131415161718192021object Match&#123; def main(args:Array[String]):Unit = &#123; val p1 =(1,2,3f,"4","abc",55d) p1.foreach(x=&gt;&#123; println(mymatch(x)) &#125;) &#125; def mymatch(x:Any)=&#123; x match &#123; case "4" =&gt;println("macth 4--") case x:String =&gt; println("match String") case 1 =&gt; println("1--") case 2 =&gt; println("2--") case 3f =&gt; println("3f--") // case x :Double =&gt; println("type is Double") case _ =&gt; println("no match--") &#125; &#125;&#125; ‰πù„ÄÅÊ†∑‰æãÁ±ª1„ÄÅÊ¶ÇÂøµÁêÜËß£ ‰ΩøÁî®‰∫ÜcaseÂÖ≥ÈîÆÂ≠óÁöÑÁ±ªÂÆö‰πâÂ∞±ÊòØÊ†∑‰æãÁ±ª(case classes) Ê†∑‰æãÁ±ªÊòØÁßçÁâπÊÆäÁöÑÁ±ª„ÄÇÂÆûÁé∞‰∫ÜÁ±ªÊûÑÈÄ†ÂèÇÊï∞ÁöÑgetterÊñπÊ≥ïÔºàÊûÑÈÄ†ÂèÇÊï∞ÈªòËÆ§Ë¢´Â£∞Êòé‰∏∫valÔºâÔºåÂΩìÊûÑÈÄ†ÂèÇÊï∞ÊòØÂ£∞Êòé‰∏∫varÁ±ªÂûãÁöÑÔºåÂÆÉÂ∞ÜÂ∏Æ‰Ω†ÂÆûÁé∞setterÂíågetterÊñπÊ≥ï„ÄÇ √ò Ê†∑‰æãÁ±ªÈªòËÆ§Â∏Æ‰Ω†ÂÆûÁé∞‰∫ÜtoString,equalsÔºåcopyÂíåhashCodeÁ≠âÊñπÊ≥ï„ÄÇ √ò Ê†∑‰æãÁ±ªÂèØ‰ª•new, ‰πüÂèØ‰ª•‰∏çÁî®new 2„ÄÅ‰∏æ‰æãÔºöÁªìÂêàÊ®°ÂºèÂåπÈÖçÁöÑ‰ª£Á†Å 1234567891011121314151617181920212223object Match2&#123; def main(args:Array[String]):Unit = &#123; val zs = new Woman(18,"zs") println(zs.age + " : "+ zs . name) val mm = Woman(19,"meimei") val nn = Woman(19,"meimei") println(mm.equals(zs)) println(mm.equals(nn)) val wo = List(ls,mm) wo.foreach(x=&gt;&#123; x match &#123; case x:Woman =&gt; println("match Woman--") case Woman(18,"ls") =&gt; println("ls") case Woman(19,"mm") =&gt; println("mm") case Woman(19,"zs") =&gt; println("zs") &#125; &#125;) &#125;&#125;case class Woman (age:Int ,name:String) ÂçÅ„ÄÅActor Model\1. Ê¶ÇÂøµÁêÜËß£ Actor ModelÊòØÁî®Êù•ÁºñÂÜôÂπ∂Ë°åËÆ°ÁÆóÊàñÂàÜÂ∏ÉÂºèÁ≥ªÁªüÁöÑÈ´òÂ±ÇÊ¨°ÊäΩË±°ÔºàÁ±ª‰ººjava‰∏≠ÁöÑThreadÔºâËÆ©Á®ãÂ∫èÂëò‰∏çÂøÖ‰∏∫Â§öÁ∫øÁ®ãÊ®°Âºè‰∏ãÂÖ±‰∫´ÈîÅËÄåÁÉ¶ÊÅº,Ë¢´Áî®Âú®Erlang ËØ≠Ë®Ä‰∏ä, È´òÂèØÁî®ÊÄß99.9999999 % ‰∏ÄÂπ¥Âè™Êúâ31ms ÂÆïÊú∫ActorsÂ∞ÜÁä∂ÊÄÅÂíåË°å‰∏∫Â∞ÅË£ÖÂú®‰∏Ä‰∏™ËΩªÈáèÁöÑËøõÁ®ã/Á∫øÁ®ã‰∏≠Ôºå‰ΩÜÊòØ‰∏çÂíåÂÖ∂‰ªñActorsÂàÜ‰∫´Áä∂ÊÄÅÔºåÊØè‰∏™ActorsÊúâËá™Â∑±ÁöÑ‰∏ñÁïåËßÇÔºåÂΩìÈúÄË¶ÅÂíåÂÖ∂‰ªñActors‰∫§‰∫íÊó∂ÔºåÈÄöËøáÂèëÈÄÅ‰∫ã‰ª∂ÂíåÊ∂àÊÅØÔºåÂèëÈÄÅÊòØÂºÇÊ≠•ÁöÑÔºåÈùûÂ†µÂ°ûÁöÑ(fire-andforget)ÔºåÂèëÈÄÅÊ∂àÊÅØÂêé‰∏çÂøÖÁ≠âÂè¶Â§ñActorsÂõûÂ§çÔºå‰πü‰∏çÂøÖÊöÇÂÅúÔºåÊØè‰∏™ActorsÊúâËá™Â∑±ÁöÑÊ∂àÊÅØÈòüÂàóÔºåËøõÊù•ÁöÑÊ∂àÊÅØÊåâÂÖàÊù•ÂêéÂà∞ÊéíÂàóÔºåËøôÂ∞±ÊúâÂæàÂ•ΩÁöÑÂπ∂ÂèëÁ≠ñÁï•ÂíåÂèØ‰º∏Áº©ÊÄßÔºåÂèØ‰ª•Âª∫Á´ãÊÄßËÉΩÂæàÂ•ΩÁöÑ‰∫ã‰ª∂È©±Âä®Á≥ªÁªü„ÄÇ ActorÁöÑÁâπÂæÅÔºö √ò ActorModelÊòØÊ∂àÊÅØ‰º†ÈÄíÊ®°Âûã,Âü∫Êú¨ÁâπÂæÅÂ∞±ÊòØÊ∂àÊÅØ‰º†ÈÄí √ò Ê∂àÊÅØÂèëÈÄÅÊòØÂºÇÊ≠•ÁöÑÔºåÈùûÈòªÂ°ûÁöÑ √ò Ê∂àÊÅØ‰∏ÄÊó¶ÂèëÈÄÅÊàêÂäüÔºå‰∏çËÉΩ‰øÆÊîπ √ò Actor‰πãÈó¥‰º†ÈÄíÊó∂ÔºåËá™Â∑±ÂÜ≥ÂÆöÂÜ≥ÂÆöÂéªÊ£ÄÊü•Ê∂àÊÅØÔºåËÄå‰∏çÊòØ‰∏ÄÁõ¥Á≠âÂæÖÔºåÊòØÂºÇÊ≠•ÈùûÈòªÂ°ûÁöÑ ‰ªÄ‰πàÊòØAkka Akka ÊòØ‰∏Ä‰∏™Áî® Scala ÁºñÂÜôÁöÑÂ∫ìÔºåÁî®‰∫éÁÆÄÂåñÁºñÂÜôÂÆπÈîôÁöÑ„ÄÅÈ´òÂèØ‰º∏Áº©ÊÄßÁöÑ Java ÂíåScala ÁöÑ Actor Ê®°ÂûãÂ∫îÁî®ÔºåÂ∫ïÂ±ÇÂÆûÁé∞Â∞±ÊòØActor,AkkaÊòØ‰∏Ä‰∏™ÂºÄÂèëÂ∫ìÂíåËøêË°åÁéØÂ¢ÉÔºåÂèØ‰ª•Áî®‰∫éÊûÑÂª∫È´òÂπ∂Âèë„ÄÅÂàÜÂ∏ÉÂºè„ÄÅÂèØÂÆπÈîô„ÄÅ‰∫ã‰ª∂È©±Âä®ÁöÑÂü∫‰∫éJVMÁöÑÂ∫îÁî®„ÄÇ‰ΩøÊûÑÂª∫È´òÂπ∂ÂèëÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®Êõ¥Âä†ÂÆπÊòì„ÄÇ spark1.6ÁâàÊú¨‰πãÂâçÔºåsparkÂàÜÂ∏ÉÂºèËäÇÁÇπ‰πãÈó¥ÁöÑÊ∂àÊÅØ‰º†ÈÄí‰ΩøÁî®ÁöÑÂ∞±ÊòØAkkaÔºåÂ∫ïÂ±Ç‰πüÂ∞±ÊòØactorÂÆûÁé∞ÁöÑ„ÄÇ1.6‰πãÂêé‰ΩøÁî®ÁöÑnetty‰º†Ëæì„ÄÇ 12345678910111213141516171819202122class MyActor extends Actor&#123;override def act():Unit=&#123; while(true)&#123; receive &#123; case "hello"=&gt;println("hello") case x:String =&gt; println("save String ="+ x) case x:Int =&gt; println("save Int") case _ =&gt; println("save default") &#125; &#125;&#125;object Actor&#123; def main(args:Array[String]):Unit = &#123; val actor = new MyActor() //ÂêØÂä® actor.start() //ÂèëÈÄÅÊ∂àÊÅØ actor ! "hello" &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445case class Msg(actor)()class WoActor() extends Actor&#123; oevrride def act():Unit =&#123; while(true)&#123; receive &#123; case msg:Msg =&gt;&#123; msg.mes //Êî∂Âà∞ÁöÑÊ∂àÊÅØ msg.actor //ÂõûÂ§çÁöÑÊ∂àÊÅØ println("too") msg.actor ! "hahaha" &#125; &#125; &#125; &#125;&#125;class HuActor(wo:WoActor) extends Actor&#123; oevrride def act():Unit =&#123; while(true)&#123; receive &#123; case "hello" =&gt;&#123; println("too") val msg = Msg(this,"rrr") wo ! msg &#125; case "rrr" =&gt;&#123; println("uuu") val msg = Msg(this,"heheh") wo ! msg &#125; &#125; &#125; &#125;&#125;object Actor2&#123; def main(args:Array[String]):Unit = &#123; val woman = new WoActor() val human = new HuActor(woman) human.start() woman.start() human ! "hello" &#125;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243case class Message(actor:Actor,msg:Any)class Actor1 extends Actor&#123; def act()&#123; while(true)&#123; receive&#123; case msg :Message =&gt; &#123; println("i sava msg! = "+ msg.msg) msg.actor!"i love you too !" &#125; case msg :String =&gt; println(msg) case _ =&gt; println("default msg!") &#125; &#125; &#125;&#125;class Actor2(actor :Actor) extends Actor&#123; actor ! Message(this,"i love you !") def act()&#123; while(true)&#123; receive&#123; case msg :String =&gt; &#123; if(msg.equals("i love you too !"))&#123; println(msg) actor! "could we have a date !" &#125; &#125; case _ =&gt; println("default msg!") &#125; &#125; &#125;&#125;object Lesson_Actor2 &#123; def main(args: Array[String]): Unit = &#123; val actor1 = new Actor1() actor1.start() val actor2 = new Actor2(actor1) actor2.start() &#125;&#125; ÂçÅ‰∏Ä„ÄÅWordCount1234567891011121314151617181920212223242526272829303132333435363738//Âú®libÊñá‰ª∂‰∏≠Ê∑ªÂä†sparkÁöÑjarÂåÖ ÔºåÂπ∂addLibimport org.apache.spark.SparkConfimport org.apache.spark.SparkContextimport org.apache.spark.rdd.RDDimport org.apache.spark.rdd.RDD.rddToPairRDDFunctionsobject WordCount &#123; def main(args: Array[String]): Unit = &#123; val conf = new SparkConf() conf.setMaster("local").setAppName("WC") val sc = new SparkContext(conf) //Áî®‰∫é‰∫ÜËß£ÈõÜÁæ§ //RDD:ÈõÜÂêà ÔºåÊäΩË±°ÁöÑ val lines :RDD[String] = sc.textFile("./words.txt") //ÊñπÂºè‰∏ÄÔºö val word :RDD[String] = lines.flatMap&#123;lines =&gt; &#123; lines.split(" ") //ÂåøÂêçÂáΩÊï∞ &#125;&#125; val pairs:RDD[(String,Int)] = word.map&#123; x =&gt; (x,1) &#125; //map :‰∏ÄËøõ‰∏ÄÂá∫ flatmapÔºö‰∏ÄËøõÂ§öÂá∫ xÔºöÊØè‰∏™ÂçïËØç val result:RDD[(String,Int)] = pairs.reduceByKey&#123;(a,b)=&gt; &#123; println("a:"+a+",b:"+b) a+b //Áõ∏ÂΩì‰∫é a = a + bÁî®‰∫é‰∏ã‰∏Ä‰∏™ÁªüËÆ° &#125;&#125; //‰ºòÂåñÔºöÊéíÂ∫è falseÔºàÈôçÂ∫èÔºâ Á¨¨‰∏Ä‰∏™_ ‰ª£Ë°®ÊØè‰∏™ÂÖÉÁ¥† result.sortBy(_._2,false).foreach(println) //ÊñπÂºè‰∫åÔºöÁÆÄÂåñÂÜôÊ≥ï lines.flatMap &#123; _.split(" ")&#125;.map &#123; (_,1)&#125;.reduceByKey(_+_).foreach(println) &#125;&#125;]]></content>
      <categories>
        <category>Scala</category>
      </categories>
      <tags>
        <tag>ÁºñÁ®ãËØ≠Ë®Ä</tag>
        <tag>ÈùôÊÄÅ</tag>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÂ≠¶‰π†]]></title>
    <url>%2F2019%2F02%2F14%2FRedis%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅRedisÁöÑÁÆÄ‰ªã1„ÄÅÂâçÊÉÖÊèêË¶ÅÁ£ÅÁõòÊï∞ÊçÆÂ∫ìÔºö MySQLÔºàÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºâ Hbase ÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÔºö Redis memcached ÔºàÊàêÊú¨È´ò„ÄÅÊÄßËÉΩÂ•Ω„ÄÅËØªÂÜôÈÄüÂ∫¶Âø´„ÄÅÊï∞ÊçÆÂÆâÂÖ®ÊÄß‰Ωé„ÄÅÁõ¥Êé•ÊääÂÄºÊîæÂà∞ÂÜÖÂ≠òÈáåÈù¢ÔºåÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÂ∞±Áõ¥Êé•ÊääÂÄºÂèñÂà∞Ôºâ 2„ÄÅÁî®‰ΩúÊï∞ÊçÆÂ∫ì„ÄÅÁºìÂ≠òÂíåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ ‰∫åÂÖ´Ê≥ïÂàôÔºö80%ÊòØÁªèÂ∏∏Ë¢´Êü•ËØ¢Ôºå‰ΩøÁî®ÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÂÅöÁºìÂ≠ò‰∏≠Èó¥‰ª∂ÔºåËØªÂèñÊÄßËÉΩÈ´ò ‰∫å„ÄÅRedisÁöÑÁâπÁÇπ1„ÄÅÊï∞ÊçÆÁªìÊûÑ‰∏∞ÂØåRedisËôΩÁÑ∂ÊòØÈîÆÂÄºÂØπÊï∞ÊçÆÂ∫ìÔºå‰ΩÜ‰ªñÊîØÊåÅÂ§öÁßçÁ±ªÂûãÁöÑÊï∞ÊçÆÁªìÊûÑÔºà‰∏ªË¶ÅÊòØ‰∏çÂêåÁ±ªÂûãÁöÑvalueÔºâ Â≠óÁ¨¶‰∏≤„ÄÅÊï£ÂàóÔºàhashesÔºâÔºåÂàóË°®ÔºàlistsÔºâÔºåÈõÜÂêàÔºàsetsÔºâÔºåÊúâÂ∫èÈõÜÂêàÔºàsorted setsÔºâ 2„ÄÅÊï∞ÊçÆÁöÑÊåÅ‰πÖÂåñRedis ÊîØÊåÅÊï∞ÊçÆÁöÑÊåÅ‰πÖÂåñÔºåÂèØ‰ª•Â∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰øùÊåÅÂú®Á£ÅÁõò‰∏≠ÔºåÈáçÂêØÁöÑÊó∂ÂÄôÂèØ‰ª•ÂÜçÊ¨°Âä†ËΩΩÂà∞ÂÜÖÂ≠òËøõË°å‰ΩøÁî® 3„ÄÅÊï∞ÊçÆÁöÑÂ§á‰ªΩRedis ÊîØÊåÅÊï∞ÊçÆÁöÑÂ§á‰ªΩÔºåÂç≥ master-slave Ê®°ÂºèÁöÑÊï∞ÊçÆÂ§á‰ªΩ„ÄÇ ‰∏â„ÄÅRedisÁöÑÂÆâË£Ö1„ÄÅ‰∏ãËΩΩÂÆâË£ÖÂåÖredis-3.2.9.tar.gz ÁΩëÂùÄÔºöhttp://www.redis.cn/download.html 2„ÄÅ‰æùËµñËΩØ‰ª∂ÂÆâË£Ö1yum install gcc tcl -y 3„ÄÅËß£Âéã redisÂπ∂ËøõÂÖ•Ëß£ÂéãÁõÆÂΩï 1tar -zvxf redis-3.2.9.tar.gz 4„ÄÅ ÊâßË°å ÁºñËØëÂëΩ‰ª§ÔºàÊ≥®ÊÑèÔºöÂΩìÂâçË∑ØÂæÑ‰∏ãÈúÄÂåÖÂê´ makefileÊñá‰ª∂ Ôºö Áî®‰∫éÊâãÂä®ÁºñËØëÔºâ 1make &amp;&amp; make install 5„ÄÅ‰øÆÊîπ redis ÁöÑÈÖçÁΩÆÊñá‰ª∂ redis.config ( ÂÖà Â§á‰ªΩ‰∏Ä‰∏™ÂéüÂéÇÈÖçÁΩÆÊñá‰ª∂) 1vim redis.config ‰øÆÊîπËøêË°åÊ®°Âºè‰∏∫ÂêéÂè∞ËøêË°åÔºàÂ¶ÇÊûú‰∏∫noÔºåÂêØÂä®redis-serverÂêéÔºåÊéßÂà∂Âè∞Â∞±‰ºöÂç°Âú®ÂêØÂä®Áä∂ÊÄÅÔºâdaemonizeÂÆàÊä§ËøõÁ®ã daemonize yes ÊåáÂÆöredisÊï∞ÊçÆÊåÅ‰πÖÂåñÁöÑË∑ØÂæÑ(Âú®ÊâßË°åredis-cliÂëΩ‰ª§ÁöÑÂΩìÂâçË∑ØÂæÑÔºå‰ºöÁîüÊàêdump.rdbÊñá‰ª∂) dir ./ ‰ΩøÁî®ÈªòËÆ§ÁöÑ redis.conf Êñá‰ª∂Ôºåredis ÈªòËÆ§Âè™ËÉΩÈÄöËøá 127.0.0.1:6379 Ëøô‰∏™Âú∞ÂùÄËÆøÈóÆÔºåËøôÊ†∑Â∞±Âè™ËÉΩÂú®Êú¨Êú∫‰∏äÊìç‰Ωú‰∫Ü ÊÉ≥Ë¶ÅËøúÁ®ãÊìç‰ΩúÔºåÈúÄË¶Å‰øÆÊîπredis.conf Ëøô‰∏™ÈÖçÁΩÆÊñá‰ª∂ÔºåÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê∑ªÂä†Áõ∏Â∫îÁöÑ ip Âú∞ÂùÄÔºå Âú®bind 127.0.0.1 ÂêéÈù¢ËøΩÂä† bind 127.0.0.1 192.168.198.128 6„ÄÅÂêØÂä®serverÊúçÂä°ÔºàÂ¶ÇÂú®redisÁöÑËß£ÂéãÁõÆÂΩï‰∏ãÔºâ ÂëΩ‰ª§Ôºö redis-server ÈÖçÁΩÆÊñá‰ª∂ÁöÑÂú∞ÂùÄ 1redis-server redis-conf ÁªàÊ≠¢ÊúçÂä°ÔºöÔºàÊü•ËØ¢redisËøõÁ®ãÂè∑ÔºåÁÑ∂ÂêéÔºåkillËØ•ËøõÁ®ãÔºâ 12ps -ef | grep rediskill ËøõÁ®ãÂè∑ 7„ÄÅÂêØÂä®ÂÆ¢Êà∑Á´ØÊúçÂä°1redis-cli ÊòæÁ§∫Ôºö 127.0.0.1:6379&gt; Âõõ„ÄÅRedisÁöÑ‰ΩøÁî®0„ÄÅÂâçÊÉÖÊèêË¶ÅRedisÁöÑkey ÂÄºÊòØ‰∫åËøõÂà∂ÂÆâÂÖ®ÁöÑÔºåËøôÊÑèÂë≥ÁùÄÂèØ‰ª•Áî®‰ªª‰Ωï‰∫åËøõÂà∂Â∫èÂàó‰Ωú‰∏∫ keyÂÄº„ÄÇ 1„ÄÅÂàáÊç¢Êï∞ÊçÆÂ∫ìÔºàÂÆû‰æãÔºâ select databaseid ÈªòËÆ§ÂÖ±Êúâ 16 ‰∏™ÂÆû‰æãÂ∫ìÔºå ÁôªÂΩïÊó∂ÊòØ ID ‰∏∫0 ÁöÑÊï∞ÊçÆÂ∫ìÔºåÊÄªÂÖ±Êúâ 16 ‰∏™ 1select 0 2„ÄÅKeyÊìç‰ΩúÔºöÔºàÂâçÊèêÔºöÊòØÈíàÂØπÂ∑≤ÁªèÂ≠òÂú®keyÔºâ KEYS patternÊü•ÊâæÊâÄÊúâÁ¨¶ÂêàÁªôÂÆöÊ®°Âºè pattern ÁöÑ key „ÄÇ 12&gt; keys * &gt; ÂàóÂá∫ÊâÄÊúâKey EXISTS keyÊ£ÄÊü•ÁªôÂÆö key ÊòØÂê¶Â≠òÂú®„ÄÇ 12&gt; EXISTS name&gt; Ëã•ÊòæÁ§∫0ÔºåÂàô‰∏çÂ≠òÂú®ÔºõËã•ÊòæÁ§∫1ÔºåÂàôÂ≠òÂú® EXPIRE key seconds‰∏∫ÁªôÂÆö key ËÆæÁΩÆÁîüÂ≠òÊó∂Èó¥ÔºåÂΩì key ËøáÊúüÊó∂(ÁîüÂ≠òÊó∂Èó¥‰∏∫ 0 )ÔºåÂÆÉ‰ºöË¢´Ëá™Âä®Âà†Èô§„ÄÇ 12&gt; EXPIRE age 1&gt; Ëã•ËÆæÁΩÆÊàêÂäüÔºåÊòæÁ§∫1ÔºõÊòæÁ§∫0 ÔºåÂàô‰∏∫Â§±Ë¥•ÔºåÂèØËÉΩÊòØËØ•key‰∏çÂ≠òÂú® TTL key‰ª•Áßí‰∏∫Âçï‰ΩçÔºåËøîÂõûÁªôÂÆö key ÁöÑÂâ©‰ΩôÁîüÂ≠òÊó∂Èó¥ MOVE key db Â∞ÜÂΩìÂâçÊï∞ÊçÆÂ∫ìÁöÑ key ÁßªÂä®Âà∞ÁªôÂÆöÁöÑÊï∞ÊçÆÂ∫ì db ÂΩì‰∏≠„ÄÇÂ¶ÇÊûúÂΩìÂâçÊï∞ÊçÆÂ∫ì(Ê∫êÊï∞ÊçÆÂ∫ì)ÂíåÁªôÂÆöÊï∞ÊçÆÂ∫ì(ÁõÆÊ†áÊï∞ÊçÆÂ∫ì)ÊúâÁõ∏ÂêåÂêçÂ≠óÁöÑÁªôÂÆö key ÔºåÊàñËÄÖ key ‰∏çÂ≠òÂú®‰∫éÂΩìÂâçÊï∞ÊçÆÂ∫ìÔºåÈÇ£‰πà MOVE Ê≤°Êúâ‰ªª‰ΩïÊïàÊûú 12&gt; move name 1&gt; name ÊòØÊï∞ÊçÆÂ∫ì0‰∏≠Â∑≤Â≠òÂú®ÁöÑkeyÔºåÁßªÂä®Âà∞Êï∞ÊçÆÂ∫ì1‰∏≠ÂêéÔºå0‰∏≠Â∞±‰∏çÂ≠òÂú®ËØ•key TYPE key ËøîÂõû key ÊâÄÂÇ®Â≠òÁöÑÂÄºÁöÑÁ±ªÂûã„ÄÇ 12&gt; DEL key [key ...]&gt; Âà†Èô§ÁªôÂÆöÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ key „ÄÇ‰∏çÂ≠òÂú®ÁöÑ key ‰ºöË¢´ÂøΩÁï• 3„ÄÅString Êìç‰ΩúÂ≠óÁ¨¶‰∏≤ÊòØ‰∏ÄÁßçÊúÄÂü∫Êú¨ÁöÑ Redis ÂÄºÁ±ªÂûã„ÄÇRedis Â≠óÁ¨¶‰∏≤ÊòØ‰∫åËøõÂà∂ÂÆâÂÖ®ÁöÑÔºåËøôÊÑèÂë≥ÁùÄ‰∏Ä‰∏™ Redis Â≠óÁ¨¶‰∏≤ËÉΩÂåÖÂê´‰ªªÊÑèÁ±ªÂûãÁöÑÊï∞ÊçÆ 12&gt; SET key value [EX seconds][PX milliseconds] [NX|XX]&gt; ÔÅÆ EX ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÔºåÁßíÔºåÁ≠âÂêå‰∫é SETEX key seconds valueÔÅÆ PX ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÔºåÊØ´ÁßíÔºåÁ≠âÂêå‰∫é PSETEX key milliseconds valueÔÅÆ NX ÈîÆ‰∏çÂ≠òÂú®ÔºåÊâçËÉΩËÆæÁΩÆÔºåÁ≠âÂêå‰∫é SETNX key valueÔÅÆ XX ÈîÆÂ≠òÂú®Êó∂ÔºåÊâçËÉΩËÆæÁΩÆ Ê≥®ÊÑè Â∞ÜÂ≠óÁ¨¶‰∏≤ÂÄº value ÂÖ≥ËÅîÂà∞ key „ÄÇÂ¶ÇÊûú key Â∑≤ÁªèÊåÅÊúâÂÖ∂‰ªñÂÄºÔºå SET Â∞±Ë¶ÜÂÜôÊóßÂÄºÔºåÊó†ËßÜÁ±ªÂûã„ÄÇÂØπ‰∫éÊüê‰∏™ÂéüÊú¨Â∏¶ÊúâÁîüÂ≠òÊó∂Èó¥ÔºàTTLÔºâÁöÑÈîÆÊù•ËØ¥Ôºå ÂΩì SET ÂëΩ‰ª§ÊàêÂäüÂú®Ëøô‰∏™ÈîÆ‰∏äÊâßË°åÊó∂Ôºå Ëøô‰∏™ÈîÆÂéüÊúâÁöÑ TTL Â∞ÜË¢´Ê∏ÖÈô§„ÄÇ 12&gt; GET key&gt; ËøîÂõû key ÊâÄÂÖ≥ËÅîÁöÑÂ≠óÁ¨¶‰∏≤ÂÄº„ÄÇÂ¶ÇÊûú key ‰∏çÂ≠òÂú®ÈÇ£‰πàËøîÂõûÁâπÊÆäÂÄº nil „ÄÇÂÅáÂ¶Ç key ÂÇ®Â≠òÁöÑÂÄº‰∏çÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºåËøîÂõû‰∏Ä‰∏™ÈîôËØØÔºåÂõ†‰∏∫ GET Âè™ËÉΩÁî®‰∫éÂ§ÑÁêÜÂ≠óÁ¨¶‰∏≤ÂÄº 12&gt; APPEND key value&gt; Â¶ÇÊûú key Â∑≤ÁªèÂ≠òÂú®Âπ∂‰∏îÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ôºå APPEND ÂëΩ‰ª§Â∞Ü value ËøΩÂä†Âà∞ key ÂéüÊù•ÁöÑÂÄºÁöÑÊú´Â∞æ„ÄÇÂ¶ÇÊûú key ‰∏çÂ≠òÂú®Ôºå APPEND Â∞±ÁÆÄÂçïÂú∞Â∞ÜÁªôÂÆö key ËÆæ‰∏∫ value ÔºåÂ∞±ÂÉèÊâßË°å SET key value ‰∏ÄÊ†∑„ÄÇ 12&gt; STRLEN key&gt; ËøîÂõû key ÊâÄÂÇ®Â≠òÁöÑÂ≠óÁ¨¶‰∏≤ÂÄºÁöÑÈïøÂ∫¶„ÄÇÂΩì key ÂÇ®Â≠òÁöÑ‰∏çÊòØÂ≠óÁ¨¶‰∏≤ÂÄºÊó∂ÔºåËøîÂõû‰∏Ä‰∏™ÈîôËØØ„ÄÇ 12&gt; INCR key&gt; Â∞Ü key ‰∏≠ÂÇ®Â≠òÁöÑÊï∞Â≠óÂÄºÂ¢û‰∏ÄÔºåÂπ∂ÊòæÁ§∫„ÄÇÂ¶ÇÊûú key ‰∏çÂ≠òÂú®ÔºåÈÇ£‰πà key ÁöÑÂÄº‰ºöÂÖàË¢´ÂàùÂßãÂåñ‰∏∫ 0 ÔºåÁÑ∂ÂêéÂÜçÊâßË°åINCR Êìç‰Ωú„ÄÇÂ¶ÇÊûúÂÄºÂåÖÂê´ÈîôËØØÁöÑÁ±ªÂûãÔºåÊàñÂ≠óÁ¨¶‰∏≤Á±ªÂûãÁöÑÂÄº‰∏çËÉΩË°®Á§∫‰∏∫Êï∞Â≠óÔºåÈÇ£‰πàËøîÂõû‰∏Ä‰∏™ÈîôËØØ„ÄÇ ÈîôËØØÔºö (error) ERR value is not an integer or out of range 12&gt; INCRBY key increment&gt; Â∞Ü key ÊâÄÂÇ®Â≠òÁöÑÂÄºÂä†‰∏äÂ¢ûÈáè increment ÔºåÂπ∂ÊòæÁ§∫„ÄÇÂ¶ÇÊûú key ‰∏çÂ≠òÂú®ÔºåÈÇ£‰πà key ÁöÑÂÄº‰ºöÂÖàË¢´ÂàùÂßãÂåñ‰∏∫ 0 ÔºåÁÑ∂ÂêéÂÜçÊâßË°åINCRBY ÂëΩ‰ª§„ÄÇÂ¶ÇÊûúÂÄºÂåÖÂê´ÈîôËØØÁöÑÁ±ªÂûãÔºåÊàñÂ≠óÁ¨¶‰∏≤Á±ªÂûãÁöÑÂÄº‰∏çËÉΩË°®Á§∫‰∏∫Êï∞Â≠óÔºåÈÇ£‰πàËøîÂõû‰∏Ä‰∏™ÈîôËØØ„ÄÇ 12&gt; DECR key&gt; Â∞Ü key ‰∏≠ÂÇ®Â≠òÁöÑÊï∞Â≠óÂÄºÂáè‰∏Ä„ÄÇ 12&gt; DECRBY key decrement&gt; Â∞Ü key ÊâÄÂÇ®Â≠òÁöÑÂÄºÂáèÂéªÂáèÈáè decrement „ÄÇ 12&gt; GETRANGE key start end&gt; ËøîÂõû key ‰∏≠Â≠óÁ¨¶‰∏≤ÂÄºÁöÑÂ≠êÂ≠óÁ¨¶‰∏≤ÔºåÂ≠óÁ¨¶‰∏≤ÁöÑÊà™ÂèñËåÉÂõ¥Áî± start Âíåend ‰∏§‰∏™ÂÅèÁßªÈáèÂÜ≥ÂÆö(ÂåÖÊã¨ start Âíå end Âú®ÂÜÖ)„ÄÇË¥üÊï∞ÂÅèÁßªÈáèË°®Á§∫‰ªéÂ≠óÁ¨¶‰∏≤ÊúÄÂêéÂºÄÂßãËÆ°Êï∞Ôºå -1 Ë°®Á§∫ÊúÄÂêé‰∏Ä‰∏™Â≠óÁ¨¶Ôºå -2 Ë°®Á§∫ÂÄíÊï∞Á¨¨‰∫å‰∏™Ôºå‰ª•Ê≠§Á±ªÊé® 12&gt; SETRANGE key offset value&gt; Áî® value ÂèÇÊï∞Ë¶ÜÂÜô(overwrite)ÁªôÂÆö key ÊâÄÂÇ®Â≠òÁöÑÂ≠óÁ¨¶‰∏≤ÂÄºÔºå‰ªéÂÅèÁßªÈáè offset ÂºÄÂßã„ÄÇ‰∏çÂ≠òÂú®ÁöÑ key ÂΩì‰ΩúÁ©∫ÁôΩÂ≠óÁ¨¶‰∏≤Â§ÑÁêÜ„ÄÇ 12&gt; SETEX key seconds value&gt; Â∞ÜÂÄº value ÂÖ≥ËÅîÂà∞ key ÔºåÂπ∂Â∞Ü key ÁöÑÁîüÂ≠òÊó∂Èó¥ËÆæ‰∏∫ secondsÂ¶ÇÊûú key Â∑≤ÁªèÂ≠òÂú®Ôºå SETEX ÂëΩ‰ª§Â∞ÜË¶ÜÂÜôÊóßÂÄº„ÄÇËøô‰∏™ÂëΩ‰ª§Á±ª‰ºº‰∫é‰ª•‰∏ã‰∏§‰∏™ÂëΩ‰ª§Ôºö 123&gt; SET key value&gt; EXPIRE key seconds # ËÆæÁΩÆÁîüÂ≠òÊó∂Èó¥&gt; ‰∏çÂêå‰πãÂ§ÑÊòØÔºå SETEX ÊòØ‰∏Ä‰∏™ÂéüÂ≠êÊÄß(atomic)Êìç‰ΩúÔºåÂÖ≥ËÅîÂÄºÂíåËÆæÁΩÆÁîüÂ≠òÊó∂Èó¥‰∏§‰∏™Âä®‰Ωú‰ºöÂú®Âêå‰∏ÄÊó∂Èó¥ÂÜÖÂÆåÊàêÔºåËØ•ÂëΩ‰ª§Âú® Redis Áî®‰ΩúÁºìÂ≠òÊó∂ÔºåÈùûÂ∏∏ÂÆûÁî®„ÄÇ 12&gt; SETNX key value&gt; Â∞Ü key ÁöÑÂÄºËÆæ‰∏∫ value ÔºåÂΩì‰∏î‰ªÖÂΩì key ‰∏çÂ≠òÂú®„ÄÇËã•ÁªôÂÆöÁöÑ key Â∑≤ÁªèÂ≠òÂú®ÔºåÂàô SETNX ‰∏çÂÅö‰ªª‰ΩïÂä®‰Ωú„ÄÇSETNX ÊòØ„ÄéSET if Not eXists„Äè(Â¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÂàô SET)ÁöÑÁÆÄÂÜô„ÄÇ 12&gt; MGET key [key ...]&gt; ËøîÂõûÊâÄÊúâ(‰∏Ä‰∏™ÊàñÂ§ö‰∏™)ÁªôÂÆö key ÁöÑÂÄº„ÄÇÂ¶ÇÊûúÁªôÂÆöÁöÑ key ÈáåÈù¢ÔºåÊúâÊüê‰∏™ key ‰∏çÂ≠òÂú®ÔºåÈÇ£‰πàËøô‰∏™ key ËøîÂõûÁâπÊÆäÂÄº nil „ÄÇÂõ†Ê≠§ÔºåËØ•ÂëΩ‰ª§Ê∞∏‰∏çÂ§±Ë¥• 12&gt; MSET key value [key value ...]&gt; ÂêåÊó∂ËÆæÁΩÆ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ key-value ÂØπ„ÄÇÂ¶ÇÊûúÊüê‰∏™ÁªôÂÆö key Â∑≤ÁªèÂ≠òÂú®ÔºåÈÇ£‰πà MSET ‰ºöÁî®Êñ∞ÂÄºË¶ÜÁõñÂéüÊù•ÁöÑÊóßÂÄºÔºåÂ¶ÇÊûúËøô‰∏çÊòØ‰Ω†ÊâÄÂ∏åÊúõÁöÑÊïàÊûúÔºåËØ∑ËÄÉËôë‰ΩøÁî® MSETNX ÂëΩ‰ª§ÔºöÂÆÉÂè™‰ºöÂú®ÊâÄÊúâÁªôÂÆö key ÈÉΩ‰∏çÂ≠òÂú®ÁöÑÊÉÖÂÜµ‰∏ãËøõË°åËÆæÁΩÆÊìç‰Ωú„ÄÇ 12&gt; MSETNX key value [key value ...]&gt; ÂêåÊó∂ËÆæÁΩÆ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ key-value ÂØπÔºåÂΩì‰∏î‰ªÖÂΩìÊâÄÊúâÁªôÂÆö key ÈÉΩ‰∏çÂ≠òÂú®„ÄÇÂç≥‰ΩøÂè™Êúâ‰∏Ä‰∏™ÁªôÂÆö key Â∑≤Â≠òÂú®Ôºå MSETNX ‰πü‰ºöÊãíÁªùÊâßË°åÊâÄÊúâÁªôÂÆö key ÁöÑËÆæÁΩÆÊìç‰Ωú„ÄÇMSETNX ÊòØÂéüÂ≠êÊÄßÁöÑÔºåÂõ†Ê≠§ÂÆÉÂèØ‰ª•Áî®‰ΩúËÆæÁΩÆÂ§ö‰∏™‰∏çÂêå key Ë°®Á§∫‰∏çÂêåÂ≠óÊÆµ(field)ÁöÑÂîØ‰∏ÄÊÄßÈÄªËæëÂØπË±°(unique logic object)ÔºåÊâÄÊúâÂ≠óÊÆµË¶Å‰πàÂÖ®Ë¢´ËÆæÁΩÆÔºåË¶Å‰πàÂÖ®‰∏çË¢´ËÆæÁΩÆ„ÄÇ 4„ÄÅ List Êìç‰Ωú 12&gt; LPUSH key value [value ...]&gt; Â∞Ü‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÄº value ÊèíÂÖ•Âà∞ÂàóË°® key ÁöÑË°®Â§¥„ÄÇÔºà‰ªéÂ∑¶ËæπÊèíÂÖ•ÔºâÂ¶ÇÊûúÊúâÂ§ö‰∏™ value ÂÄºÔºåÈÇ£‰πàÂêÑ‰∏™ value ÂÄºÊåâ‰ªéÂ∑¶Âà∞Âè≥ÁöÑÈ°∫Â∫è‰æùÊ¨° Êèí ÂÖ• Âà∞ Ë°® Â§¥ Ôºö ÊØî Â¶Ç ËØ¥ Ôºå ÂØπ Á©∫ Âàó Ë°® mylist Êâß Ë°å ÂëΩ‰ª§ LPUSH mylist a b c ÔºåÂàóË°®ÁöÑÂÄºÂ∞ÜÊòØ c b a Ôºå ËøôÁ≠âÂêå‰∫éÂéü Â≠ê ÊÄß Âú∞ ÊâßË°å LPUSH mylist a „ÄÅ LPUSH mylist b Âíå LPUSH mylistc ‰∏â‰∏™ÂëΩ‰ª§„ÄÇ 12&gt; RPUSH key value [value ...]&gt; Â∞Ü‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÄº value ÊèíÂÖ•Âà∞ÂàóË°® key ÁöÑË°®Â∞æ„ÄÇÔºà‰ªéÂè≥ËæπÊèíÂÖ•ÔºâÂ¶ÇÊûúÊúâÂ§ö‰∏™ value ÂÄºÔºåÈÇ£‰πàÂêÑ‰∏™ value ÂÄºÊåâ‰ªéÂ∑¶Âà∞Âè≥ÁöÑÈ°∫Â∫è‰æùÊ¨° Êèí ÂÖ• Âà∞ Ë°® Â∞æ Ôºö ÊØî Â¶Ç ÂØπ ‰∏Ä ‰∏™ Á©∫ Âàó Ë°® mylist ÊâßË°å RPUSH mylist a b c ÔºåÂæóÂá∫ÁöÑÁªìÊûúÂàóË°®‰∏∫ a b c Ôºå Á≠âÂêå‰∫é Êâß Ë°å ÂëΩ‰ª§ RPUSH mylist a „ÄÅ RPUSH mylist b „ÄÅ RPUSH mylist c „ÄÇ 12&gt; LRANGE key start stop&gt; Ëøî Âõû Âàó Ë°® key ‰∏≠ Êåá ÂÆö Âå∫ Èó¥ ÂÜÖ ÁöÑ ÂÖÉ Á¥† Ôºå Âå∫ Èó¥ ‰ª• ÂÅè ÁßªÈáè start Âíå stop ÊåáÂÆö„ÄÇÔºà‰ªéÂ∑¶Ëá≥Âè≥Ôºâ‰∏ãÊ†á(index)ÂèÇÊï∞ start Âíå stop ÈÉΩ‰ª• 0 ‰∏∫Â∫ïÔºå‰πüÂ∞±ÊòØËØ¥Ôºå‰ª• 0 Ë°®Á§∫ÂàóË°®ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå‰ª• 1 Ë°®Á§∫ÂàóË°®ÁöÑÁ¨¨‰∫å‰∏™ÂÖÉÁ¥†Ôºå‰ª•Ê≠§Á±ªÊé®„ÄÇ-1 Ë°®Á§∫ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† 12&gt; LPOP key&gt; ÁßªÈô§Âπ∂ËøîÂõûÂàóË°® key ÁöÑÂ§¥ÂÖÉÁ¥†„ÄÇÔºà‰ªéÂàóË°®keyÁöÑÂ∑¶ËæπÂºÄÂßãÂºπÂá∫ÂÖÉÁ¥†Ôºâ 12&gt; RPOP key&gt; ÁßªÈô§Âπ∂ËøîÂõûÂàóË°® key ÁöÑÂ∞æÂÖÉÁ¥†„ÄÇÔºà‰ªéÂàóË°®keyÁöÑÂè≥ËæπÂºÄÂßãÂºπÂá∫ÂÖÉÁ¥†Ôºâ Â§áÊ≥®Ôºö ÂêåÂêë‰∏∫Ê†àÔºåÂºÇÂêë‰∏∫ÈòüÂàóÊ†àÔºàlpush lpop Ôºõ rpush rpopÔºâ ÈòüÂàóÔºàlpush rpop Ôºõ rpush lpop Ôºâ ArrayList : Êï∞ÁªÑÔºàÊü•ÊâæÂø´ÔºåÂ¢ûÂà†ÊÖ¢ÔºâLinkList : ÈìæË°®ÔºàÊü•ÊâæÊÖ¢ÔºåÂ¢ûÂà†Âø´Ôºâ 12&gt; LINDEX key index&gt; ËøîÂõûÂàóË°® key ‰∏≠Ôºå‰∏ãÊ†á‰∏∫ index ÁöÑÂÖÉÁ¥†„ÄÇ‰∏ãÊ†á(index)ÂèÇÊï∞ start Âíå stop ÈÉΩ‰ª• 0 ‰∏∫Â∫ïÔºå‰πüÂ∞±ÊòØËØ¥Ôºå‰ª• 0 Ë°®Á§∫ÂàóË°®ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå‰ª• 1 Ë°®Á§∫ÂàóË°®ÁöÑÁ¨¨‰∫å‰∏™ÂÖÉÁ¥†Ôºå‰ª•Ê≠§Á±ªÊé®„ÄÇ‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®Ë¥üÊï∞‰∏ãÊ†áÔºå‰ª• -1 Ë°®Á§∫ÂàóË°®ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå -2 Ë°®Á§∫ÂàóË°®ÁöÑÂÄíÊï∞Á¨¨‰∫å‰∏™ÂÖÉÁ¥†Ôºå‰ª•Ê≠§Á±ªÊé® 12&gt; LLEN key&gt; ËøîÂõûÂàóË°® key ÁöÑÈïøÂ∫¶„ÄÇÂ¶ÇÊûú key ‰∏çÂ≠òÂú®ÔºåÂàô key Ë¢´Ëß£Èáä‰∏∫‰∏Ä‰∏™Á©∫ÂàóË°®ÔºåËøîÂõû 0 . 12&gt; LREM key count value&gt; Ê†πÊçÆÂèÇÊï∞ count ÁöÑÂÄºÔºåÁßªÈô§ÂàóË°®‰∏≠‰∏éÂèÇÊï∞ value Áõ∏Á≠âÁöÑÂÖÉÁ¥†„ÄÇcount ÁöÑÂÄºÂèØ‰ª•ÊòØ‰ª•‰∏ãÂá†ÁßçÔºöcount &gt; 0 : ‰ªéË°®Â§¥ÂºÄÂßãÂêëË°®Â∞æÊêúÁ¥¢ÔºåÁßªÈô§‰∏é value Áõ∏Á≠âÁöÑÂÖÉÁ¥†ÔºåÊï∞Èáè‰∏∫ count „ÄÇcount &lt; 0 : ‰ªéË°®Â∞æÂºÄÂßãÂêëË°®Â§¥ÊêúÁ¥¢ÔºåÁßªÈô§‰∏é value Áõ∏Á≠âÁöÑÂÖÉÁ¥†ÔºåÊï∞Èáè‰∏∫ count ÁöÑÁªùÂØπÂÄº„ÄÇcount = 0 : ÁßªÈô§Ë°®‰∏≠ÊâÄÊúâ‰∏é value Áõ∏Á≠âÁöÑÂÄº„ÄÇ 12&gt; LTRIM key start stop&gt; ÂØπ‰∏Ä‰∏™ÂàóË°®ËøõË°å‰øÆÂâ™(trim)ÔºåÂ∞±ÊòØËØ¥ÔºåËÆ©ÂàóË°®Âè™‰øùÁïôÊåáÂÆöÂå∫Èó¥ÂÜÖÁöÑÂÖÉÁ¥†Ôºå ‰∏çÂú®ÊåáÂÆöÂå∫Èó¥‰πãÂÜÖÁöÑÂÖÉÁ¥†ÈÉΩÂ∞ÜË¢´Âà†Èô§„ÄÇ‰∏æ ‰∏™ ‰æã Â≠ê Ôºå Êâß Ë°å ÂëΩ ‰ª§ LTRIM list 0 2 Ôºå Ë°® Á§∫ Âè™ ‰øù Áïô ÂàóË°® list ÁöÑÂâç‰∏â‰∏™ÂÖÉÁ¥†ÔºåÂÖ∂‰ΩôÂÖÉÁ¥†ÂÖ®ÈÉ®Âà†Èô§ 12&gt; RPOPLPUSH source destination&gt; ÂëΩ‰ª§ RPOPLPUSH Âú®‰∏Ä‰∏™ÂéüÂ≠êÊó∂Èó¥ÂÜÖÔºåÊâßË°å‰ª•‰∏ã‰∏§‰∏™Âä®‰ΩúÔºöÂ∞ÜÂàóË°® source ‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†(Â∞æÂÖÉÁ¥†)ÂºπÂá∫ÔºåÂπ∂ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇÂ∞Ü source Âºπ Âá∫ ÁöÑ ÂÖÉ Á¥† Êèí ÂÖ• Âà∞ Âàó Ë°® destination Ôºå ‰Ωú‰∏∫ destination ÂàóË°®ÁöÑÁöÑÂ§¥ÂÖÉÁ¥†„ÄÇ‰∏æ ‰∏™ ‰æã Â≠ê Ôºå ‰Ω† Êúâ ‰∏§ ‰∏™ ÂàóË°® source Âíå destination Ôºå source Âàó Ë°® Êúâ ÂÖÉÁ¥† a, b, c Ôºå destination ÂàóË°®ÊúâÂÖÉÁ¥† x, y, z ÔºåÊâßË°å RPOPLPUSH sourcedestination ‰πãÂêéÔºå source ÂàóË°®ÂåÖÂê´ÂÖÉÁ¥† a, b Ôºå destination ÂàóË°®ÂåÖÂê´ÂÖÉÁ¥† c, x, y, z ÔºåÂπ∂‰∏îÂÖÉÁ¥† c ‰ºöË¢´ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ 12&gt; LSET key index value&gt; Â∞ÜÂàóË°® key ‰∏ãÊ†á‰∏∫ index ÁöÑÂÖÉÁ¥†ÁöÑÂÄºËÆæÁΩÆ‰∏∫ value „ÄÇÂΩì index ÂèÇÊï∞Ë∂ÖÂá∫ËåÉÂõ¥ÔºåÊàñÂØπ‰∏Ä‰∏™Á©∫ÂàóË°®( key ‰∏çÂ≠òÂú®)ËøõË°å LSET Êó∂ÔºåËøîÂõû‰∏Ä‰∏™ÈîôËØØ„ÄÇ 12&gt; LINSERT key BEFORE|AFTER pivot value&gt; Â∞ÜÂÄº value ÊèíÂÖ•Âà∞ÂàóË°® key ÂΩì‰∏≠Ôºå‰Ωç‰∫éÂÄº pivot ‰πãÂâçÊàñ‰πãÂêé„ÄÇÂΩì pivot ‰∏çÂ≠òÂú®‰∫éÂàóË°® key Êó∂Ôºå‰∏çÊâßË°å‰ªª‰ΩïÊìç‰Ωú„ÄÇÂΩì key ‰∏çÂ≠òÂú®Êó∂Ôºå key Ë¢´ËßÜ‰∏∫Á©∫ÂàóË°®Ôºå‰∏çÊâßË°å‰ªª‰ΩïÊìç‰Ωú„ÄÇ 5„ÄÅSetÊìç‰Ωú 12&gt; SADD key member [member ...]&gt; Â∞Ü‰∏Ä‰∏™ÊàñÂ§ö‰∏™ member ÂÖÉÁ¥†Âä†ÂÖ•Âà∞ÈõÜÂêà key ÂΩì‰∏≠ÔºàÊó†Â∫èÔºâÔºåÂ∑≤ÁªèÂ≠òÂú®‰∫éÈõÜÂêàÁöÑ member ÂÖÉÁ¥†Â∞ÜË¢´ÂøΩÁï•„ÄÇÂÅáÂ¶Ç key ‰∏çÂ≠òÂú®ÔºåÂàôÂàõÂª∫‰∏Ä‰∏™Âè™ÂåÖÂê´ member ÂÖÉÁ¥†‰ΩúÊàêÂëòÁöÑÈõÜÂêà„ÄÇ 12&gt; SMEMBERS key&gt; ËøîÂõûÈõÜÂêà key ‰∏≠ÁöÑÊâÄÊúâÊàêÂëò„ÄÇ ‰∏çÂ≠òÂú®ÁöÑ key Ë¢´ËßÜ‰∏∫Á©∫ÈõÜÂêà„ÄÇ 12&gt; SISMEMBER key member&gt; Âà§Êñ≠ member ÂÖÉÁ¥†ÊòØÂê¶ÊòØÈõÜÂêà key ÁöÑÊàêÂëò„ÄÇ 12&gt; SCARD key&gt; ËøîÂõûÈõÜÂêà key ÁöÑÂü∫Êï∞(ÈõÜÂêà‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞Èáè)„ÄÇ 12&gt; SREM key member [member ...]&gt; Áßª Èô§ ÈõÜ Âêà key ‰∏≠ ÁöÑ ‰∏Ä ‰∏™ Êàñ Â§ö ‰∏™ member ÂÖÉ Á¥† Ôºå ‰∏ç Â≠ò Âú®ÁöÑ member ÂÖÉÁ¥†‰ºöË¢´ÂøΩÁï•„ÄÇ 12&gt; SPOP key ÔºàÊäΩÂ•ñÂú∫ÊôØÔºâ&gt; ÁßªÈô§Âπ∂ËøîÂõûÈõÜÂêà‰∏≠ÁöÑ‰∏Ä‰∏™ÈöèÊú∫ÂÖÉÁ¥†„ÄÇÂ¶ÇÊûúÂè™ÊÉ≥Ëé∑Âèñ‰∏Ä‰∏™ÈöèÊú∫ÂÖÉÁ¥†Ôºå‰ΩÜ‰∏çÊÉ≥ËØ•ÂÖÉÁ¥†‰ªéÈõÜÂêà‰∏≠Ë¢´ÁßªÈô§ÁöÑËØùÔºåÂèØ‰ª•‰ΩøÁî® SRANDMEMBER ÂëΩ‰ª§„ÄÇ 12&gt; SMOVE source destination member&gt; Â∞Ü member ÂÖÉÁ¥†‰ªé source ÈõÜÂêàÁßªÂä®Âà∞ destination ÈõÜÂêà„ÄÇSMOVE ÊòØÂéüÂ≠êÊÄßÊìç‰Ωú„ÄÇÂ¶ÇÊûú source ÈõÜÂêà‰∏çÂ≠òÂú®Êàñ‰∏çÂåÖÂê´ÊåáÂÆöÁöÑ member ÂÖÉÁ¥†ÔºåÂàô SMOVE ÂëΩ‰ª§‰∏çÊâßË°å‰ªª‰ΩïÊìç‰ΩúÔºå‰ªÖËøîÂõû 0 „ÄÇÂê¶ÂàôÔºå member ÂÖÉÁ¥†‰ªé source ÈõÜÂêà‰∏≠Ë¢´ÁßªÈô§ÔºåÂπ∂Ê∑ªÂä†Âà∞ destination ÈõÜÂêà‰∏≠Âéª„ÄÇÂΩì destination ÈõÜÂêàÂ∑≤ÁªèÂåÖÂê´ member ÂÖÉÁ¥†Êó∂Ôºå SMOVE ÂëΩ‰ª§Âè™ÊòØÁÆÄÂçïÂú∞Â∞Ü source ÈõÜÂêà‰∏≠ÁöÑ member ÂÖÉÁ¥†Âà†Èô§„ÄÇÂΩì source Êàñ destination ‰∏çÊòØÈõÜÂêàÁ±ªÂûãÊó∂ÔºåËøîÂõû‰∏Ä‰∏™ÈîôËØØ„ÄÇ 12&gt; SDIFF key [key ...]&gt; Ê±ÇÂ∑ÆÈõÜÔºö‰ªéÁ¨¨‰∏Ä‰∏™ key ÁöÑÈõÜÂêà‰∏≠ÂéªÈô§ÂÖ∂‰ªñÈõÜÂêàÂíåËá™Â∑±ÁöÑ‰∫§ÈõÜÈÉ®ÂàÜ sdiffÊ±Ç‰∏§‰∏™setÁöÑÂ∑ÆÈõÜÔºåÊúâÂÖàÂêéÈ°∫Â∫èÔºå‰ª•Èù†ÂâçÁöÑ‰∏∫Âü∫ÂáÜÔºåÂàóÂá∫Ââç‰∏Ä‰∏™setÊúâÁöÑÔºåËÄåÂêé‰∏Ä‰∏™setÊ≤°ÊúâÁöÑÂÖÉÁ¥† 12&gt; SINTER key [key ...] ÔºàÂæÆÂçöÊ±ÇÂÖ±ÂêåÂÖ≥Ê≥®Âú∫ÊôØÔºâ&gt; ËøîÂõû‰∏Ä‰∏™ÈõÜÂêàÁöÑÂÖ®ÈÉ®ÊàêÂëòÔºåËØ•ÈõÜÂêàÊòØÊâÄÊúâÁªôÂÆöÈõÜÂêàÁöÑ‰∫§ÈõÜ„ÄÇ‰∏çÂ≠òÂú®ÁöÑ key Ë¢´ËßÜ‰∏∫Á©∫ÈõÜ„ÄÇÂΩìÁªôÂÆöÈõÜÂêàÂΩì‰∏≠Êúâ‰∏Ä‰∏™Á©∫ÈõÜÊó∂ÔºåÁªìÊûú‰πü‰∏∫Á©∫ÈõÜ(Ê†πÊçÆÈõÜÂêàËøêÁÆóÂÆöÂæã)„ÄÇ 12&gt; SUNION key [key ...]&gt; ËøîÂõû‰∏Ä‰∏™ÈõÜÂêàÁöÑÂÖ®ÈÉ®ÊàêÂëòÔºåËØ•ÈõÜÂêàÊòØÊâÄÊúâÁªôÂÆöÈõÜÂêàÁöÑÂπ∂ÈõÜ„ÄÇ‰∏çÂ≠òÂú®ÁöÑ key Ë¢´ËßÜ‰∏∫Á©∫ÈõÜ„ÄÇ 6„ÄÅSorted setÊìç‰ΩúÁ±ª‰ºº Sets,‰ΩÜÊòØÊØè‰∏™Â≠óÁ¨¶‰∏≤ÂÖÉÁ¥†ÈÉΩÂÖ≥ËÅîÂà∞‰∏Ä‰∏™Âè´ score ÊµÆÂä®Êï∞ÂÄº„ÄÇÈáåÈù¢ÁöÑÂÖÉÁ¥†ÊÄªÊòØÈÄöËøá score ËøõË°åÁùÄÊéíÂ∫èÔºåÊâÄ‰ª•‰∏çÂêåÁöÑÊòØÔºåÂÆÉÊòØÂèØ‰ª•Ê£ÄÁ¥¢ÁöÑ‰∏ÄÁ≥ªÂàóÂÖÉÁ¥†„ÄÇ Ê≥®ÊÑèÔºö Âú® set Âü∫Á°Ä‰∏äÔºåÂä†‰∏ä score ÂÄºÔºå ‰πãÂâç set ÊòØkey value1 value2‚Ä¶.Áé∞Âú® Zset ÊòØ key score1 value1 score2 value2 12&gt; ZADD key score member [[score member][score member] ...]&gt; Â∞Ü ‰∏Ä ‰∏™ Êàñ Â§ö ‰∏™ member ÂÖÉ Á¥† Âèä ÂÖ∂ score ÂÄº Âä† ÂÖ• Âà∞ Êúâ Â∫èÈõÜ key ÂΩì‰∏≠„ÄÇ ÊòæÁ§∫ redis&gt; ZADD page_rank 9 baidu.com 8 bing.com 10 google.com(integer) 2redis&gt; ZRANGE page_rank 0 -1 WITHSCORES 1) ‚Äúbing.com‚Äù2) ‚Äú8‚Äù3) ‚Äúbaidu.com‚Äù4) ‚Äú9‚Äù5) ‚Äúgoogle.com‚Äù6) ‚Äú10‚Äù 12&gt; ZRANGE key start stop [WITHSCORES]&gt; ËøîÂõûÊúâÂ∫èÈõÜ key ‰∏≠ÔºåÊåáÂÆöÂå∫Èó¥ÂÜÖÁöÑÊàêÂëò„ÄÇÂÖ∂‰∏≠ÊàêÂëòÁöÑ‰ΩçÁΩÆÊåâ score ÂÄºÈÄíÂ¢û(‰ªéÂ∞èÂà∞Â§ß)Êù•ÊéíÂ∫è„ÄÇÂÖ∑ÊúâÁõ∏Âêå score ÂÄºÁöÑÊàêÂëòÊåâÂ≠óÂÖ∏Â∫è(lexicographical order )Êù•ÊéíÂàó„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊàêÂëòÊåâ score ÂÄºÈÄíÂáè(‰ªéÂ§ßÂà∞Â∞è)Êù•ÊéíÂàóÔºåËØ∑‰ΩøÁî® ZREVRANGE ÂëΩ‰ª§„ÄÇ‰∏ãÊ†áÂèÇÊï∞ start Âíå stop ÈÉΩ‰ª• 0 ‰∏∫Â∫ïÔºå ‰πüÂ∞±ÊòØËØ¥Ôºå‰ª• 0 Ë°®Á§∫ÊúâÂ∫èÈõÜÁ¨¨‰∏Ä‰∏™ÊàêÂëòÔºå‰ª• 1 Ë°®Á§∫ÊúâÂ∫èÈõÜÁ¨¨‰∫å‰∏™ÊàêÂëòÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇ‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®Ë¥üÊï∞‰∏ãÊ†áÔºå‰ª• -1 Ë°®Á§∫ÊúÄÂêé‰∏Ä‰∏™ÊàêÂëòÔºå -2 Ë°®Á§∫ÂÄíÊï∞Á¨¨‰∫å‰∏™ÊàêÂëòÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇË∂ÖÂá∫ËåÉÂõ¥ÁöÑ‰∏ãÊ†áÂπ∂‰∏ç‰ºöÂºïËµ∑ÈîôËØØ„ÄÇÊØî Â¶Ç ËØ¥ Ôºå ÂΩì start ÁöÑ ÂÄº ÊØî Êúâ Â∫è ÈõÜ ÁöÑ ÊúÄ Â§ß ‰∏ã Ê†á Ëøò Ë¶Å Â§ß Ôºå ÊàñÊòØ start &gt; stop Êó∂Ôºå ZRANGE ÂëΩ‰ª§Âè™ÊòØÁÆÄÂçïÂú∞ËøîÂõû‰∏Ä‰∏™Á©∫ÂàóË°®„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÂÅáÂ¶Ç stop ÂèÇÊï∞ÁöÑÂÄºÊØîÊúâÂ∫èÈõÜÁöÑÊúÄÂ§ß‰∏ãÊ†áËøòË¶ÅÂ§ßÔºåÈÇ£‰πàRedis Â∞Ü stop ÂΩì‰ΩúÊúÄÂ§ß‰∏ãÊ†áÊù•Â§ÑÁêÜ„ÄÇÂèØ‰ª•ÈÄöËøá‰ΩøÁî® WITHSCORES ÈÄâÈ°πÔºåÊù•ËÆ©ÊàêÂëòÂíåÂÆÉÁöÑ score ÂÄº‰∏ÄÂπ∂ËøîÂõûÔºå ËøîÂõûÂàóË°®‰ª• value1,score1, ‚Ä¶, valueN,scoreN ÁöÑÊ†ºÂºèË°®Á§∫„ÄÇ 12&gt; ZREVRANGE key start stop [WITHSCORES]( ( Èü≥‰πêÊéíË°åÊ¶úÂú∫ÊôØ) )&gt; ËøîÂõûÊúâÂ∫èÈõÜ key ‰∏≠ÔºåÊåáÂÆöÂå∫Èó¥ÂÜÖÁöÑÊàêÂëò„ÄÇÂÖ∂‰∏≠ÊàêÂëòÁöÑ‰ΩçÁΩÆÊåâ score ÂÄºÈÄíÂáè(‰ªéÂ§ßÂà∞Â∞è)Êù•ÊéíÂàó„ÄÇ 12&gt; ZREM key member [member ...]&gt; ÁßªÈô§ÊúâÂ∫èÈõÜ key ‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊàêÂëòÔºå‰∏çÂ≠òÂú®ÁöÑÊàêÂëòÂ∞ÜË¢´ÂøΩÁï•„ÄÇ 12&gt; ZREMRANGEBYSCORE key min max&gt; ÁßªÈô§ÊúâÂ∫èÈõÜ key ‰∏≠ÔºåÊâÄÊúâ score ÂÄº‰ªã‰∫é min Âíå max ‰πãÈó¥(ÂåÖÊã¨Á≠â‰∫é min Êàñ max )ÁöÑÊàêÂëò„ÄÇ 12&gt; ZSCORE key member&gt; ËøîÂõûÊúâÂ∫èÈõÜ key ‰∏≠ÔºåÊàêÂëò member ÁöÑ score ÂÄº„ÄÇ 12&gt; ZCARD key&gt; ËøîÂõûÊúâÂ∫èÈõÜ key ÁöÑÂü∫Êï∞ÔºàÂåÖÂê´ÁöÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞Ôºâ„ÄÇ 12&gt; ZCOUNT key min max&gt; ËøîÂõûÊúâÂ∫èÈõÜ key ‰∏≠Ôºå score ÂÄºÂú® min Âíå max ‰πãÈó¥(ÈªòËÆ§ÂåÖÊã¨ score ÂÄºÁ≠â‰∫é min Êàñ max )ÁöÑÊàêÂëòÁöÑÊï∞Èáè„ÄÇ 12&gt; ZRANK key member&gt; ËøîÂõûÊúâÂ∫èÈõÜ key ‰∏≠ÔºåÊàêÂëò member ÁöÑ score ÂÄº„ÄÇZCARD keyËøîÂõûÊúâÂ∫èÈõÜ key ÁöÑÂü∫Êï∞ÔºàÂåÖÂê´ÁöÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞Ôºâ„ÄÇZCOUNT key min maxËøîÂõûÊúâÂ∫èÈõÜ key ‰∏≠Ôºå score ÂÄºÂú® min Âíå max ‰πãÈó¥(ÈªòËÆ§ÂåÖÊã¨ score ÂÄºÁ≠â‰∫é min Êàñ max )ÁöÑÊàêÂëòÁöÑÊï∞Èáè„ÄÇZRANK key member ËøîÂõûÊúâÂ∫èÈõÜ key ‰∏≠ÊàêÂëò member ÁöÑÊéíÂêç„ÄÇÂÖ∂‰∏≠ÊúâÂ∫èÈõÜÊàêÂëòÊåâ score ÂÄºÈÄíÂ¢û(‰ªéÂ∞èÂà∞Â§ß)È°∫Â∫èÊéíÂàó„ÄÇ 7„ÄÅ Hash Êìç‰Ωú ÔºàÊï£ÂàóÔºâKV Ê®°Âºè‰∏çÂèòÔºå‰ΩÜÊòØ V ÊòØ‰∏Ä‰∏™ÈîÆÂÄºÂØπ 12&gt; HSET key field value&gt; Â∞ÜÂìàÂ∏åË°® key ‰∏≠ÁöÑÂüü field ÁöÑÂÄºËÆæ‰∏∫ value „ÄÇ 12&gt; HGET key field&gt; ËøîÂõûÂìàÂ∏åË°® key ‰∏≠ÁªôÂÆöÂüü field ÁöÑÂÄº„ÄÇ 12&gt; HMSET key field value [field value ...]&gt; ÂêåÊó∂Â∞ÜÂ§ö‰∏™ field-value (Âüü-ÂÄº)ÂØπËÆæÁΩÆÂà∞ÂìàÂ∏åË°® key ‰∏≠„ÄÇÊ≠§ÂëΩ‰ª§‰ºöË¶ÜÁõñÂìàÂ∏åË°®‰∏≠Â∑≤Â≠òÂú®ÁöÑÂüü„ÄÇ 12&gt; HMGET key field [field ...]&gt; ËøîÂõûÂìàÂ∏åË°® key ‰∏≠Ôºå‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÁªôÂÆöÂüüÁöÑÂÄº„ÄÇ 12&gt; HGETALL key&gt; ËøîÂõûÂìàÂ∏åË°® key ‰∏≠ÔºåÊâÄÊúâÁöÑÂüüÂíåÂÄº„ÄÇ 12&gt; HKEYS key&gt; ËøîÂõûÂìàÂ∏åË°® key ‰∏≠ÁöÑÊâÄÊúâÂüü„ÄÇ 12&gt; HVALS key&gt; ËøîÂõûÂìàÂ∏åË°® key ‰∏≠ÊâÄÊúâÂüüÁöÑÂÄº„ÄÇ 12&gt; HSETNX key field value&gt; Â∞ÜÂìàÂ∏åË°® key ‰∏≠ÁöÑÂüü field ÁöÑÂÄºËÆæÁΩÆ‰∏∫ value ÔºåÂΩì‰∏î‰ªÖÂΩìÂüü field ‰∏çÂ≠òÂú®„ÄÇËã•Âüü field Â∑≤ÁªèÂ≠òÂú®ÔºåËØ•Êìç‰ΩúÊó†Êïà„ÄÇ 12&gt; HEXISTS key field&gt; Êü•ÁúãÂìàÂ∏åË°® key ‰∏≠ÔºåÁªôÂÆöÂüü field ÊòØÂê¶Â≠òÂú®„ÄÇ 12&gt; HDEL key field [field ...]&gt; Âà†Èô§ÂìàÂ∏åË°® key ‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊåáÂÆöÂüüÔºå‰∏çÂ≠òÂú®ÁöÑÂüüÂ∞ÜË¢´ÂøΩÁï•„ÄÇ 12&gt; HINCRBY key field increment&gt; ‰∏∫ÂìàÂ∏åË°® key ‰∏≠ÁöÑÂüü field ÁöÑÂÄºÂä†‰∏äÂ¢ûÈáè increment „ÄÇÂ¢ûÈáè‰πüÂèØ‰ª•‰∏∫Ë¥üÊï∞ÔºåÁõ∏ÂΩì‰∫éÂØπÁªôÂÆöÂüüËøõË°åÂáèÊ≥ïÊìç‰Ωú„ÄÇ 12&gt; HINCRBYFLOAT key field increment&gt; Â¢ûÂä†ÊµÆÁÇπÊï∞Âú∫ÊôØÔºöÁî®Êà∑Áª¥Â∫¶ÁªüËÆ°ÁªüËÆ°Êï∞ÂåÖÊã¨ÔºöÂÖ≥Ê≥®Êï∞„ÄÅÁ≤â‰∏ùÊï∞„ÄÅÂñúÊ¨¢ÂïÜÂìÅÊï∞„ÄÅÂèëÂ∏ñÊï∞Áî®Êà∑‰∏∫ KeyÔºå‰∏çÂêåÁª¥Â∫¶‰∏∫ FieldÔºåValue ‰∏∫ÁªüËÆ°Êï∞ ‰∫î„ÄÅRedis ÁöÑÊåÅ‰πÖÂåñ1„ÄÅRedis ÊåÅ‰πÖÂåñÊñπÂºè RDB ÊåÅ‰πÖÂåñÂèØ‰ª•Âú®ÊåáÂÆöÁöÑÊó∂Èó¥Èó¥ÈöîÂÜÖÁîüÊàêÊï∞ÊçÆÈõÜÁöÑÊó∂Èó¥ÁÇπÂø´ÁÖßÔºàpoint-in-time snapshotÔºâ„ÄÇ AOF ÊåÅ‰πÖÂåñËÆ∞ÂΩïÊúçÂä°Âô®ÊâßË°åÁöÑÊâÄÊúâÂÜôÊìç‰ΩúÂëΩ‰ª§ÔºåÂπ∂Âú®ÊúçÂä°Âô®ÂêØÂä®Êó∂ÔºåÈÄöËøáÈáçÊñ∞ÊâßË°åËøô‰∫õÂëΩ‰ª§Êù•ËøòÂéüÊï∞ÊçÆÈõÜ„ÄÇ AOF Êñá‰ª∂‰∏≠ÁöÑÂëΩ‰ª§ÂÖ®ÈÉ®‰ª• RedisÂçèËÆÆÁöÑÊ†ºÂºèÊù•‰øùÂ≠òÔºåÊñ∞ÂëΩ‰ª§‰ºöË¢´ËøΩÂä†Âà∞Êñá‰ª∂ÁöÑÊú´Â∞æ„ÄÇ Redis ËøòÂèØ‰ª•Âú®ÂêéÂè∞ÂØπ AOF Êñá‰ª∂ËøõË°åÈáçÂÜôÔºàrewriteÔºâÔºå‰ΩøÂæó AOF Êñá‰ª∂ÁöÑ‰ΩìÁßØ‰∏ç‰ºöË∂ÖÂá∫‰øùÂ≠òÊï∞ÊçÆÈõÜÁä∂ÊÄÅÊâÄÈúÄÁöÑÂÆûÈôÖÂ§ßÂ∞è„ÄÇ Redis ËøòÂèØ‰ª•ÂêåÊó∂‰ΩøÁî® AOF ÊåÅ‰πÖÂåñÂíå RDB ÊåÅ‰πÖÂåñ„ÄÇ Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå ÂΩì Redis ÈáçÂêØÊó∂Ôºå ÂÆÉ‰ºö‰ºòÂÖà‰ΩøÁî® AOF Êñá‰ª∂Êù•ËøòÂéüÊï∞ÊçÆÈõÜÔºå Âõ†‰∏∫ AOF Êñá‰ª∂‰øùÂ≠òÁöÑÊï∞ÊçÆÈõÜÈÄöÂ∏∏ÊØî RDB Êñá‰ª∂ÊâÄ‰øùÂ≠òÁöÑÊï∞ÊçÆÈõÜÊõ¥ÂÆåÊï¥„ÄÇ ‰Ω†ÁîöËá≥ÂèØ‰ª•ÂÖ≥Èó≠ÊåÅ‰πÖÂåñÂäüËÉΩÔºåËÆ©Êï∞ÊçÆÂè™Âú®ÊúçÂä°Âô®ËøêË°åÊó∂Â≠òÂú®„ÄÇ 2„ÄÅRdb:Ôºà1ÔºâÂú®ÊåáÂÆöÁöÑÊó∂Èó¥Èó¥ÈöîÂÜÖÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÈõÜÂø´ÁÖßÂÜôÂÖ•Á£ÅÁõòÔºå‰πüÂ∞±ÊòØË°åËØùËÆ≤ÁöÑ snapshot Âø´ÁÖßÔºåÂÆÉÊÅ¢Â§çÊó∂Â∞±ÊòØÂ∞ÜÂø´ÁÖßÊñá‰ª∂Áõ¥Êé•ËØªÂà∞ÂÜÖÂ≠òÈáå„ÄÇ Rdb ‰øùÂ≠òÁöÑÊòØ dump.rdb Êñá‰ª∂ Ôºà2ÔºâÂ¶Ç‰ΩïËß¶Âèë RDB Âø´ÁÖß SaveÔºösave Êó∂Âè™ÁÆ°‰øùÂ≠òÔºåÂÖ∂‰ªñ‰∏çÁÆ°ÔºåÂÖ®ÈÉ®ÈòªÂ°û„ÄÇBgsaveÔºöredis ‰ºöÂú®ÂêéÂè∞ËøõË°åÂø´ÁÖßÊìç‰ΩúÔºåÂø´ÁÖßÊìç‰ΩúÁöÑÂêåÊó∂ËøòÂèØ‰ª•ÂìçÂ∫îÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåÂèØ‰ª•ÈÄöËøá lastsave ÂëΩ‰ª§Ëé∑ÂèñÊúÄÂêé‰∏ÄÊ¨°ÊàêÂäüÊâßË°åÂø´ÁÖßÁöÑÊó∂Èó¥„ÄÇ Ôºà3ÔºâÂ¶Ç‰ΩïÂÅúÊ≠¢ ÈùôÊÄÅÂÅúÊ≠¢ÔºöÂ∞ÜÈÖçÁΩÆÊñá‰ª∂ÈáåÁöÑ RDB ‰øùÂ≠òËßÑÂàôÊîπ‰∏∫ save ‚Äú‚ÄùÂä®ÊÄÅÂÅúÊ≠¢ Ôºö config set save ‚Äú ‚Äù 3„ÄÅAOF(Append Only File) Ôºà1Ôºâ‰ª•Êó•ÂøóÁöÑÂΩ¢ÂºèÊù•ËÆ∞ÂΩïÊØè‰∏™ÂÜôÊìç‰ΩúÔºåÂ∞Ü redis ÊâßË°åËøáÁöÑÊâÄÊúâÂÜôÊåá‰ª§ËÆ∞ÂΩï‰∏ãÊù•(ËØªÊìç‰Ωú‰∏çËÆ∞ÂΩï)„ÄÇÂè™ËÆ∏ËøΩÂä†Êñá‰ª∂‰ΩÜ‰∏çÂèØ‰ª•ÊîπÂÜôÊñá‰ª∂Ôºåredis ÂêØÂä®‰πãÂàù‰ºöËØªÂèñËØ•Êñá‰ª∂ÈáçÊñ∞ÊûÑÂª∫Êï∞ÊçÆÔºåÊç¢Ë®Ä‰πãÔºåredis ÈáçÂêØÁöÑËØùÂ∞±Ê†πÊçÆÊó•ÂøóÊñá‰ª∂ÁöÑÂÜÖÂÆπÂ∞ÜÂÜôÊåá‰ª§‰ªéÂâçÂà∞ÂêéÊâßË°å‰∏ÄÊ¨°‰∏ÄÂÆåÊàêÊï∞ÊçÆÊÅ¢Â§çÂ∑•‰Ωú„ÄÇ======APPEND ONLY MODE======ÂºÄÂêØ aof Ôºöappendonly yes (ÈªòËÆ§ÊòØ no) Ôºà2ÔºâAof Á≠ñÁï• Appendfsync ÂèÇÊï∞Ôºö Always ÔºöÂêåÊ≠•ÊåÅ‰πÖÂåñ ÊØèÊ¨°ÂèëÁîüÊï∞ÊçÆÂèòÊõ¥‰ºöË¢´Á´ãÂç≥ËÆ∞ÂΩïÂà∞Á£ÅÁõòÔºåÊÄßËÉΩËæÉÂ∑Æ‰ΩÜÊï∞ÊçÆÂÆåÊï¥ÊÄßËæÉÂ•Ω„ÄÇEverysecÔºö Âá∫ÂéÇÈªòËÆ§Êé®ËçêÔºåÂºÇÊ≠•Êìç‰ΩúÔºåÊØèÁßíËÆ∞ÂΩïÔºåÂ¶ÇÊûú‰∏ÄÁßíÂÆïÊú∫ÔºåÊúâÊï∞ÊçÆ‰∏¢Â§±NoÔºö‰ªé‰∏ç fsync ÔºöÂ∞ÜÊï∞ÊçÆ‰∫§ÁªôÊìç‰ΩúÁ≥ªÁªüÊù•Â§ÑÁêÜ„ÄÇÊõ¥Âø´Ôºå‰πüÊõ¥‰∏çÂÆâÂÖ®ÁöÑÈÄâÊã©„ÄÇ Ôºà3ÔºâRewrite Ê¶ÇÂøµÔºöAOF ÈááÁî®Êñá‰ª∂ËøΩÂä†ÊñπÂºèÔºåÊñá‰ª∂‰ºöË∂äÊù•Ë∂äÊù•Â§ß‰∏∫ÈÅøÂÖçÂá∫Áé∞Ê≠§ÁßçÊÉÖÂÜµÔºåÊñ∞Â¢û‰∫ÜÈáçÂÜôÊú∫Âà∂Ôºåaof Êñá‰ª∂ÁöÑÂ§ßÂ∞èË∂ÖËøáÊâÄËÆæÂÆöÁöÑÈòàÂÄºÊó∂Ôºåredis Â∞±‰ºöËá™Âä®Â∞Ü aofÊñá‰ª∂ÁöÑÂÜÖÂÆπÂéãÁº©ÔºåÂè™‰øùÁïôÂèØ‰ª•ÊÅ¢Â§çÊï∞ÊçÆÁöÑÊúÄÂ∞èÊåá‰ª§ÈõÜÔºåÂèØ‰ª•‰ΩøÁî®ÂëΩ‰ª§bgrewirteaof„ÄÇ Ëß¶ÂèëÊú∫Âà∂Ôºöredis ‰ºöËÆ∞ÂΩï‰∏äÊ¨°ÈáçÂÜôÁöÑ aof ÁöÑÂ§ßÂ∞èÔºåÈªòËÆ§ÁöÑÈÖçÁΩÆÂΩì aof Êñá‰ª∂Â§ßÂ∞è‰∏∫‰∏äÊ¨° rewrite ÂêéÂ§ßÂ∞èÁöÑ‰∏ÄÂÄç‰∏îÊñá‰ª∂Â§ß‰∫é 64M Ëß¶Âèë„ÄÇ ÈáçÂÜôÂéüÁêÜÔºöaof Êñá‰ª∂ÊåÅÁª≠Â¢ûÈïøËÄåÂ§ßÊó∂Ôºå‰ºö fork Âá∫‰∏ÄÊù°Êñ∞ËøõÁ®ãÊù•Â∞ÜÊñá‰ª∂ÈáçÂÜô(‰πüÂ∞±ÊòØÂÖàÂÜô‰∏¥Êó∂Êñá‰ª∂ÊúÄÂêéÂÜç rename)ÔºåÈÅçÂéÜÊñ∞ËøõÁ®ãÁöÑÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÔºåÊØèÊù°ËÆ∞ÂΩïÊúâ‰∏ÄÊù° set ËØ≠Âè•ÔºåÈáçÂÜô aof Êñá‰ª∂ÁöÑÊìç‰ΩúÔºåÂπ∂Ê≤°ÊúâËØªÂèñÊóßÁöÑÁöÑ aof Êñá‰ª∂ÔºåËÄåÊòØÂ∞ÜÊï¥‰∏™ÂÜÖÂ≠òÁöÑÊï∞ÊçÆÂ∫ìÂÜÖÂÆπÁî®ÂëΩ‰ª§ÁöÑÊñπÂºèÈáçÂÜô‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑ aof Êñá‰ª∂ÔºåËøôÁÇπÂíåÂø´ÁÖßÊúâÁÇπÁ±ª‰ºº„ÄÇ no-appendfsync-on-rewrite no : ÈáçÂÜôÊó∂ÊòØÂê¶ÂèØ‰ª•ËøêÁî® Appendfsync Áî®ÈªòËÆ§ no Âç≥ÂèØÔºå‰øùËØÅÊï∞ÊçÆÂÆâÂÖ® auto-aof-rewrite-percentage ÂÄçÊï∞ ËÆæÁΩÆÂü∫ÂáÜÂÄºauto-aof-rewrite-min-size ËÆæÁΩÆÂü∫ÂáÜÂÄºÂ§ßÂ∞è Ôºà4ÔºâflushallÂà∑Êñ∞ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÔºåÂç≥Ê∏ÖÁ©∫Êï∞ÊçÆÂèØÈÄöËøáÂà†Èô§aofÊñá‰ª∂‰∏≠ËØ•Êìç‰ΩúÁöÑËÆ∞ÂΩïÊù•ÊÅ¢Â§çÊï∞ÊçÆrdbÊñá‰ª∂Êó†Ê≥ïÂÆûÁé∞Êï∞ÊçÆÊÅ¢Â§ç Ôºà5Ôºâaof ÁâπÁÇπ aof‰ºòÁÇπÔºöÂèØÁî®‰∫éÊï∞ÊçÆÊÅ¢Â§çÁº∫ÁÇπÔºö‰ΩìÁßØÂ§ßÔºåÈÄüÂ∫¶ÊÖ¢ aofÊñá‰ª∂‰ΩìÁßØ‰ºöË∂äÊù•Ë∂äÂ§ß Ôºà6ÔºâaofÊñá‰ª∂‰ºòÂåñÈáçÂÜôÔºöÂΩìÊñá‰ª∂Â§ßÂ∞èËææÂà∞‰∏ÄÂÆöÈòàÂÄºÔºåÂêØÂä®ÂéãÁº©Êñá‰ª∂ netstat -anptÊü•ÁúãÊâÄÊúâÁ´ØÂè£ÁöÑ‰ΩøÁî®ÊÉÖÂÜµ 4„ÄÅÂ§á‰ªΩ Redis Êï∞ÊçÆÂª∫ËÆÆÔºöÂàõÂª∫‰∏Ä‰∏™ÂÆöÊúü‰ªªÂä°Ôºàcron jobÔºâÔºå ÊØèÂ∞èÊó∂Â∞Ü‰∏Ä‰∏™ RDB Êñá‰ª∂Â§á‰ªΩÂà∞‰∏Ä‰∏™Êñá‰ª∂Â§πÔºå Âπ∂‰∏îÊØèÂ§©Â∞Ü‰∏Ä‰∏™ RDB Êñá‰ª∂Â§á‰ªΩÂà∞Âè¶‰∏Ä‰∏™Êñá‰ª∂Â§π„ÄÇÁ°Æ‰øùÂø´ÁÖßÁöÑÂ§á‰ªΩÈÉΩÂ∏¶ÊúâÁõ∏Â∫îÁöÑÊó•ÊúüÂíåÊó∂Èó¥‰ø°ÊÅØÔºå ÊØèÊ¨°ÊâßË°åÂÆöÊúü‰ªªÂä°ËÑöÊú¨Êó∂Ôºå ‰ΩøÁî® find ÂëΩ‰ª§Êù•Âà†Èô§ËøáÊúüÁöÑÂø´ÁÖßÔºö ÊØîÂ¶ÇËØ¥Ôºå ‰Ω†ÂèØ‰ª•‰øùÁïôÊúÄËøë 48 Â∞èÊó∂ÂÜÖÁöÑÊØèÂ∞èÊó∂Âø´ÁÖßÔºå ËøòÂèØ‰ª•‰øùÁïôÊúÄËøë‰∏Ä‰∏§‰∏™ÊúàÁöÑÊØèÊó•Âø´ÁÖß„ÄÇËá≥Â∞ëÊØèÂ§©‰∏ÄÊ¨°Ôºå Â∞Ü RDB Â§á‰ªΩÂà∞‰Ω†ÁöÑÊï∞ÊçÆ‰∏≠ÂøÉ‰πãÂ§ñÔºå ÊàñËÄÖËá≥Â∞ëÊòØÂ§á‰ªΩÂà∞‰Ω†ËøêË°å Redis ÊúçÂä°Âô®ÁöÑÁâ©ÁêÜÊú∫Âô®‰πãÂ§ñ„ÄÇ ÂÖ≠„ÄÅRedis ‰∏ª‰ªéÂ§çÂà∂0„ÄÅÂâçÊÉÖÊèêË¶ÅRedis ÊîØÊåÅÁÆÄÂçï‰∏îÊòìÁî®ÁöÑ‰∏ª‰ªéÂ§çÂà∂Ôºàmaster-slave replicationÔºâÂäüËÉΩÔºå ËØ•ÂäüËÉΩÂèØ‰ª•ËÆ©‰ªéÊúçÂä°Âô®(slave server)Êàê‰∏∫‰∏ªÊúçÂä°Âô®(masterserver)ÁöÑÁ≤æÁ°ÆÂ§çÂà∂ÂìÅ „ÄÇ 1„ÄÅÂÖ≥‰∫é Redis Â§çÂà∂ÂäüËÉΩÁöÑÂá†‰∏™ÈáçË¶ÅÊñπÈù¢Ôºö Redis ‰ΩøÁî®ÂºÇÊ≠•Â§çÂà∂„ÄÇ ‰∏Ä‰∏™‰∏ªÊúçÂä°Âô®ÂèØ‰ª•ÊúâÂ§ö‰∏™‰ªéÊúçÂä°Âô®„ÄÇ ‰∏ç‰ªÖ‰∏ªÊúçÂä°Âô®ÂèØ‰ª•Êúâ‰ªéÊúçÂä°Âô®Ôºå ‰ªéÊúçÂä°Âô®‰πüÂèØ‰ª•ÊúâËá™Â∑±ÁöÑ‰ªéÊúçÂä°Âô®ÔºåÂ§ö‰∏™‰ªéÊúçÂä°Âô®‰πãÈó¥ÂèØ‰ª•ÊûÑÊàê‰∏Ä‰∏™ÂõæÁä∂ÁªìÊûÑ„ÄÇ Â§çÂà∂ÂäüËÉΩ‰∏ç‰ºöÈòªÂ°û‰∏ªÊúçÂä°Âô®Ôºö Âç≥‰ΩøÊúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™‰ªéÊúçÂä°Âô®Ê≠£Âú®ËøõË°åÂàùÊ¨°ÂêåÊ≠•Ôºå ‰∏ªÊúçÂä°Âô®‰πüÂèØ‰ª•ÁªßÁª≠Â§ÑÁêÜÂëΩ‰ª§ËØ∑Ê±Ç„ÄÇ‰∏çËøáÔºå Âú®‰ªéÊúçÂä°Âô®Âà†Èô§ÊóßÁâàÊú¨Êï∞ÊçÆÈõÜÂπ∂ËΩΩÂÖ•Êñ∞ÁâàÊú¨Êï∞ÊçÆÈõÜÁöÑÈÇ£ÊÆµÊó∂Èó¥ÂÜÖÔºå ËøûÊé•ËØ∑Ê±Ç‰ºöË¢´ÈòªÂ°û„ÄÇ Â§çÂà∂ÂäüËÉΩÂèØ‰ª•ÂçïÁ∫ØÂú∞Áî®‰∫éÊï∞ÊçÆÂÜó‰ΩôÔºàdata redundancyÔºâÔºå ‰πüÂèØ‰ª•ÈÄöËøáËÆ©Â§ö‰∏™‰ªéÊúçÂä°Âô®Â§ÑÁêÜÂè™ËØªÂëΩ‰ª§ËØ∑Ê±ÇÊù•ÊèêÂçáÊâ©Â±ïÊÄßÔºàscalabilityÔºâÔºö ÊØîÂ¶ÇËØ¥Ôºå ÁπÅÈáçÁöÑ SORT ÂëΩ‰ª§ÂèØ‰ª•‰∫§ÁªôÈôÑÂ±ûËäÇÁÇπÂéªËøêË°å„ÄÇ 2„ÄÅ‰ªéÊúçÂä°Âô®ÈÖçÁΩÆÊñπÂºè‰∏ÄÔºöÁºñËæëÈÖçÁΩÆÊñá‰ª∂ ÔºàÊ∞∏‰πÖÁîüÊïàÔºâ Ê∑ªÂä†‰∏ªÊúçÂä°Âô®ÁöÑIP slaveof 192.168.198.128 6379 ÊñπÂºè‰∫åÔºöË∞ÉÁî® SLAVEOF ÂëΩ‰ª§ÔºåËæìÂÖ•‰∏ªÊúçÂä°Âô®ÁöÑ IP ÂíåÁ´ØÂè£ÔºåÁÑ∂ÂêéÂêåÊ≠•Â∞±‰ºöÂºÄÂßã ÂâçÊèêÔºö‰∏ª‰ªéÊúçÂä°Âô®ÁöÑredis-serverÂùáÂêØÂä®‰∫Ü Ôºà‰ªÖÈÄÇÁî®‰∫éÂΩìÂâçÁ∫øÁ®ãÁöÑÊúçÂä°ÔºåÂêåÊ≠•Êó∂Ôºå‰ºöÂ∞ÜËá™Â∑±ÂéüÊù•ÁöÑkeyÂÄºÊï∞ÊçÆÊ∏ÖÁ©∫ÔºåÂπ∂‰∏îÂú®‰∏ªÊúçÂä°Âô®È°µÈù¢‰ºöÊòæÁ§∫ÂÖ≥‰∫é‰ªéÊúçÂä°Âô®ÁöÑÊó•Âøó‰ø°ÊÅØÔºâ 127.0.0.1:6379&gt; SLAVEOF 192.168.198.128 6379 Ëã•ÊÉ≥ÂèñÊ∂àËØ•ÊúçÂä°Âô®ÁöÑ‰∏ª‰ªéÂÖ≥Á≥ªÔºå‰ΩøÁî®Â¶Ç‰∏ãÂëΩ‰ª§Ôºå‰∏îËøò‰ºö‰øùÂ≠òÂΩìÂâçÊï∞ÊçÆ 127.0.0.1:6379&gt; SLAVEOF no one ËøûÊé•ËøúÁ®ãËäÇÁÇπÁöÑredisÊúçÂä°ÔºàÁ´ØÂè£ÈªòËÆ§‰∏∫6379Ôºâ redis-cli -h 192.168.198.128 3„ÄÅÂè™ËØªÊúçÂä°Âô®‰ªé Redis 2.6 ÂºÄÂßãÔºå ‰ªéÊúçÂä°Âô®ÊîØÊåÅÂè™ËØªÊ®°ÂºèÔºå Âπ∂‰∏îËØ•Ê®°Âºè‰∏∫‰ªéÊúçÂä°Âô®ÁöÑÈªòËÆ§Ê®°Âºè„ÄÇÔÇ∑ Âè™ËØªÊ®°ÂºèÈÖçÁΩÆ ÊñπÂºè‰∏ÄÔºöÁî± redis.conf Êñá‰ª∂‰∏≠ÁöÑ slave-read-only ÈÄâÈ°πÊéßÂà∂ slave-read-only yes ÊñπÂºè‰∫åÔºöÈÄöËøá CONFIG SET ÂëΩ‰ª§Êù•ÂºÄÂêØÊàñÂÖ≥Èó≠Ëøô‰∏™Ê®°Âºè ÔÇ∑ Âè™ËØª‰ªéÊúçÂä°Âô®‰ºöÊãíÁªùÊâßË°å‰ªª‰ΩïÂÜôÂëΩ‰ª§Ôºå ÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞Âõ†‰∏∫Êìç‰ΩúÂ§±ËØØËÄåÂ∞ÜÊï∞ÊçÆ‰∏çÂ∞èÂøÉÂÜôÂÖ•Âà∞‰∫Ü‰ªéÊúçÂä°Âô®ÁöÑÊÉÖÂÜµ„ÄÇ ÔÇ∑ Âè¶Â§ñÔºåÂØπ‰∏Ä‰∏™‰ªéÂ±ûÊúçÂä°Âô®ÊâßË°åÂëΩ‰ª§ SLAVEOF NO ONE Â∞Ü‰ΩøÂæóËøô‰∏™‰ªéÂ±ûÊúçÂä°Âô®ÂÖ≥Èó≠Â§çÂà∂ÂäüËÉΩÔºåÂπ∂‰ªé‰ªéÂ±ûÊúçÂä°Âô®ËΩ¨ÂèòÂõû‰∏ªÊúçÂä°Âô®ÔºåÂéüÊù•ÂêåÊ≠•ÊâÄÂæóÁöÑÊï∞ÊçÆÈõÜ‰∏ç‰ºöË¢´‰∏¢ÂºÉ„ÄÇ ÔÇ∑ Âà©Áî®„Äé SLAVEOF NO ONE ‰∏ç‰ºö‰∏¢ÂºÉÂêåÊ≠•ÊâÄÂæóÊï∞ÊçÆÈõÜ„ÄèËøô‰∏™ÁâπÊÄßÔºåÂèØ‰ª•Âú®‰∏ªÊúçÂä°Âô®Â§±Ë¥•ÁöÑÊó∂ÂÄôÔºåÂ∞Ü‰ªéÂ±ûÊúçÂä°Âô®Áî®‰ΩúÊñ∞ÁöÑ‰∏ªÊúçÂä°Âô®Ôºå‰ªéËÄåÂÆûÁé∞Êó†Èó¥Êñ≠ËøêË°å„ÄÇ 4„ÄÅ‰ªéÊúçÂä°Âô®Áõ∏ÂÖ≥ÈÖçÁΩÆÔºöËÆæÁΩÆÂØÜÁ†ÅÔºö ‚Äã ‰∏ªÊúçÂä°Âô®Ôºö ÈÄöËøá requirepass ÈÄâÈ°πËÆæÁΩÆÂØÜÁ†Å ‚Äã ‰ªéÊúçÂä°Âô®Ôºö ÊñπÂºè‰∏ÄÔºö ÊúçÂä°Âô®Ê≠£Âú®ËøêË°åÔºå‰ΩøÁî®ÂÆ¢Êà∑Á´ØËæìÂÖ•‰ª•‰∏ãÂëΩ‰ª§Ôºöconfig set masterauth ÊñπÂºè‰∫åÔºö Â∞ÜÂÆÉÂä†ÂÖ•Âà∞ÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºömasterauth 5„ÄÅ‰∏ªÊúçÂä°Âô®ÈÖçÁΩÆÂè™Âú®ÊúâËá≥Â∞ë N ‰∏™‰ªéÊúçÂä°Âô®ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâçÊâßË°åÂÜôÊìç‰Ωú ‰ªé Redis 2.8 ÂºÄÂßãÔºå ‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆÁöÑÂÆâÂÖ®ÊÄßÔºåÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÔºå ËÆ©‰∏ªÊúçÂä°Âô®Âè™Âú®ÊúâËá≥Â∞ë N ‰∏™ÂΩìÂâçÂ∑≤ËøûÊé•‰ªéÊúçÂä°Âô®ÁöÑÊÉÖÂÜµ‰∏ãÔºå ÊâçÊâßË°åÂÜôÂëΩ‰ª§„ÄÇ min-slaves-to-write min-slaves-max-lag Ëá≥Â∞ëÊúâ min-slaves-to-write ‰∏™‰ªéÊúçÂä°Âô®Ôºå Âπ∂‰∏îËøô‰∫õÊúçÂä°Âô®ÁöÑÂª∂ËøüÂÄºÈÉΩÂ∞ë‰∫é min-slaves-max-lag ÁßíÔºå ÈÇ£‰πà‰∏ªÊúçÂä°Âô®Â∞±‰ºöÊâßË°åÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁöÑÂÜôÊìç‰Ωú„ÄÇ ‰∏É„ÄÅRedis-sentinel( Âì®ÂÖµ)0„ÄÅÂâçÊÉÖÊèêË¶ÅRedis ÁöÑ Sentinel Á≥ªÁªüÁî®‰∫éÁÆ°ÁêÜÂ§ö‰∏™ Redis ÊúçÂä°Âô®ÔºåËØ•Á≥ªÁªüÊâßË°å‰ª•‰∏ã‰∏â‰∏™‰ªªÂä°Ôºö ÁõëÊéßÔºàMonitoringÔºâÔºö Sentinel ‰ºö‰∏çÊñ≠Âú∞Ê£ÄÊü•‰Ω†ÁöÑ‰∏ªÊúçÂä°Âô®Âíå‰ªéÊúçÂä°Âô®ÊòØÂê¶Ëøê‰ΩúÊ≠£Â∏∏„ÄÇ ÊèêÈÜíÔºàNotificationÔºâÔºö ÂΩìË¢´ÁõëÊéßÁöÑÊüê‰∏™ Redis ÊúçÂä°Âô®Âá∫Áé∞ÈóÆÈ¢òÊó∂ÔºåSentinel ÂèØ‰ª•ÈÄöËøá API ÂêëÁÆ°ÁêÜÂëòÊàñËÄÖÂÖ∂‰ªñÂ∫îÁî®Á®ãÂ∫èÂèëÈÄÅÈÄöÁü•„ÄÇ Ëá™Âä®ÊïÖÈöúËøÅÁßªÔºàAutomatic failoverÔºâÔºö ÂΩì‰∏Ä‰∏™‰∏ªÊúçÂä°Âô®‰∏çËÉΩÊ≠£Â∏∏Â∑•‰ΩúÊó∂Ôºå Sentinel ‰ºöÂºÄÂßã‰∏ÄÊ¨°Ëá™Âä®ÊïÖÈöúËøÅÁßªÊìç‰ΩúÔºå ÂÆÉ‰ºöÂ∞ÜÂ§±Êïà‰∏ªÊúçÂä°Âô®ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™‰ªéÊúçÂä°Âô®ÂçáÁ∫ß‰∏∫Êñ∞ÁöÑ‰∏ªÊúçÂä°Âô®Ôºå Âπ∂ËÆ©Â§±Êïà‰∏ªÊúçÂä°Âô®ÁöÑÂÖ∂‰ªñ‰ªéÊúçÂä°Âô®Êîπ‰∏∫Â§çÂà∂Êñ∞ÁöÑ‰∏ªÊúçÂä°Âô®Ôºõ ÂΩìÂÆ¢Êà∑Á´ØËØïÂõæËøûÊé•Â§±ÊïàÁöÑ‰∏ªÊúçÂä°Âô®Êó∂ÔºåÈõÜÁæ§‰πü‰ºöÂêëÂÆ¢Êà∑Á´ØËøîÂõûÊñ∞‰∏ªÊúçÂä°Âô®ÁöÑÂú∞ÂùÄÔºå ‰ΩøÂæóÈõÜÁæ§ÂèØ‰ª•‰ΩøÁî®Êñ∞‰∏ªÊúçÂä°Âô®‰ª£ÊõøÂ§±ÊïàÊúçÂä°Âô®„ÄÇ Redis Sentinel ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºå‰Ω†ÂèØ‰ª•Âú®‰∏Ä‰∏™Êû∂ÊûÑ‰∏≠ËøêË°åÂ§ö‰∏™ Sentinel ËøõÁ®ãÔºå Ëøô‰∫õËøõÁ®ã‰ΩøÁî®ÊµÅË®ÄÂçèËÆÆÔºàgossipprotocols)Êù•Êé•Êî∂ÂÖ≥‰∫é‰∏ªÊúçÂä°Âô®ÊòØÂê¶‰∏ãÁ∫øÁöÑ‰ø°ÊÅØÔºå Âπ∂‰ΩøÁî®ÊäïÁ•®ÂçèËÆÆÔºàagreement protocolsÔºâÊù•ÂÜ≥ÂÆöÊòØÂê¶ÊâßË°åËá™Âä®ÊïÖÈöúËøÅÁßªÔºå‰ª•ÂèäÈÄâÊã©Âì™‰∏™‰ªéÊúçÂä°Âô®‰Ωú‰∏∫Êñ∞ÁöÑ‰∏ªÊúçÂä°Âô®„ÄÇ 1„ÄÅÂêØÂä® SentinelÊñπÂºè‰∏ÄÔºö ÂØπ‰∫é redis-sentinel Á®ãÂ∫èÔºå ÂèØ‰ª•Áî®‰ª•‰∏ãÂëΩ‰ª§Êù•ÂêØÂä®Sentinel Á≥ªÁªüÔºö redis-sentinel /path/to/sentinel.conf ÊñπÂºè‰∫åÔºö ÂØπ‰∫é redis-server Á®ãÂ∫èÔºå ‰Ω†ÂèØ‰ª•Áî®‰ª•‰∏ãÂëΩ‰ª§Êù•ÂêØÂä®‰∏Ä‰∏™ËøêË°åÂú® Sentinel Ê®°Âºè‰∏ãÁöÑ Redis ÊúçÂä°Âô®Ôºö redis- - server /path/to/sentinel.conf ‚Äì sentinel Ê≥®ÊÑèÔºö ÂêØÂä® Sentinel ÂÆû‰æãÂøÖÈ°ªÊåáÂÆöÁõ∏Â∫îÁöÑÈÖçÁΩÆÊñá‰ª∂Ôºå Á≥ªÁªü‰ºö‰ΩøÁî®ÈÖçÁΩÆÊñá‰ª∂Êù•‰øùÂ≠ò Sentinel ÁöÑÂΩìÂâçÁä∂ÊÄÅÔºå Âπ∂Âú® Sentinel ÈáçÂêØÊó∂ÈÄöËøáËΩΩÂÖ•ÈÖçÁΩÆÊñá‰ª∂Êù•ËøõË°åÁä∂ÊÄÅËøòÂéü„ÄÇÂ¶ÇÊûúÂêØÂä® Sentinel Êó∂Ê≤°ÊúâÊåáÂÆöÁõ∏Â∫îÁöÑÈÖçÁΩÆÊñá‰ª∂Ôºå ÊàñËÄÖÊåáÂÆöÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏çÂèØÂÜôÔºànot writableÔºâÔºå ÈÇ£‰πà Sentinel ‰ºöÊãíÁªùÂêØÂä®„ÄÇ 2 „ÄÅÈÖçÁΩÆ SentinelRedis Ê∫êÁ†Å‰∏≠ÂåÖÂê´‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ sentinel.conf ÁöÑÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂ÊòØ‰∏Ä‰∏™Â∏¶ÊúâËØ¶ÁªÜÊ≥®ÈáäÁöÑ Sentinel ÈÖçÁΩÆÊñá‰ª∂Á§∫‰æã„ÄÇËøêË°å‰∏Ä‰∏™ Sentinel ÊâÄÈúÄÁöÑÊúÄÂ∞ëÈÖçÁΩÆÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 12345sentinel monitor mymaster 192.168.198.128 6379 2 sentinel down-after-milliseconds mymaster 30000sentinel failover-timeout mymaster 180000sentinel parallel-syncs mymaster 1protected-mode no / bind Êú¨Êú∫ IP Ê≥®ÊÑèÔºö‰∏ªÊúçÂä°Âô®Êó†ÂØÜÁ†ÅÊó∂ÔºåËÆ∞ÂæóÂú® sentinel ÈÖçÁΩÆÈáåÈÖç‰∏äbind Êú¨Êú∫ ip ÔºåÊàñËÄÖÂÖ≥Êéâ‰øùÊä§Ê®°Âºè protected-mode no ÈÖçÁΩÆËß£ÈáäÔºö Á¨¨‰∏ÄË°åÈÖçÁΩÆÊåáÁ§∫ Sentinel ÂéªÁõëËßÜ‰∏Ä‰∏™Âêç‰∏∫ mymaster ÁöÑ‰∏ªÊúçÂä°Âô®Ôºå Ëøô‰∏™‰∏ªÊúçÂä°Âô®ÁöÑ IP Âú∞ÂùÄ‰∏∫ 127.0.0.1 Ôºå Á´ØÂè£Âè∑‰∏∫ 6379 Ôºå ËÄåÂ∞ÜËøô‰∏™‰∏ªÊúçÂä°Âô®Âà§Êñ≠‰∏∫Â§±ÊïàËá≥Â∞ëÈúÄË¶Å 2 ‰∏™Sentinel ÂêåÊÑè ÔºàÂè™Ë¶ÅÂêåÊÑè Sentinel ÁöÑÊï∞Èáè‰∏çËææÊ†áÔºåËá™Âä®ÊïÖÈöúËøÅÁßªÂ∞±‰∏ç‰ºöÊâßË°åÔºâ„ÄÇ down-after-milliseconds ÈÄâÈ°π ÊåáÂÆö‰∫Ü Sentinel ËÆ§‰∏∫ÊúçÂä°Âô®Â∑≤ÁªèÊñ≠Á∫øÊâÄÈúÄÁöÑÊØ´ÁßíÊï∞„ÄÇ Â¶ÇÊûúÊúçÂä°Âô®Âú®ÁªôÂÆöÁöÑÊØ´ÁßíÊï∞‰πãÂÜÖÔºå Ê≤°ÊúâËøîÂõû SentinelÂèëÈÄÅÁöÑ PING ÂëΩ‰ª§ÁöÑÂõûÂ§çÔºå ÊàñËÄÖËøîÂõû‰∏Ä‰∏™ÈîôËØØÔºå ÈÇ£‰πà Sentinel Â∞ÜËøô‰∏™ÊúçÂä°Âô®Ê†áËÆ∞‰∏∫‰∏ªËßÇ‰∏ãÁ∫ø parallel-syncs ÈÄâÈ°πÊåáÂÆö‰∫ÜÂú®ÊâßË°åÊïÖÈöúËΩ¨ÁßªÊó∂Ôºå ÊúÄÂ§öÂèØ‰ª•ÊúâÂ§öÂ∞ë‰∏™‰ªéÊúçÂä°Âô®ÂêåÊó∂ÂØπÊñ∞ÁöÑ‰∏ªÊúçÂä°Âô®ËøõË°åÂêåÊ≠•Ôºå Ëøô‰∏™Êï∞Â≠óË∂äÂ∞èÔºå ÂÆåÊàêÊïÖÈöúËΩ¨ÁßªÊâÄÈúÄÁöÑÊó∂Èó¥Â∞±Ë∂äÈïø„ÄÇ ‰Ω†ÂèØ‰ª•ÈÄöËøáÂ∞ÜËøô‰∏™ÂÄºËÆæ‰∏∫ 1 Êù•‰øùËØÅÊØèÊ¨°Âè™Êúâ‰∏Ä‰∏™‰ªéÊúçÂä°Âô®Â§Ñ‰∫é‰∏çËÉΩÂ§ÑÁêÜÂëΩ‰ª§ËØ∑Ê±ÇÁöÑÁä∂ÊÄÅ„ÄÇ]]></content>
      <categories>
        <category>ÂÜÖÂ≠òÊï∞ÊçÆÂ∫ì</category>
      </categories>
      <tags>
        <tag>LinuxÁ≥ªÁªüÁéØÂ¢É</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[StormÂ≠¶‰π†]]></title>
    <url>%2F2019%2F01%2F29%2FStorm%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅStormÁÆÄ‰ªãÂÆòÁΩëÔºöStorm 1„ÄÅStorm ÔºöÊµÅÂºèËÆ°ÁÆóÂ§ÑÁêÜÊ°ÜÊû∂ 2„ÄÅ ÁâπÁÇπÔºö ÂÆûÊó∂ ÂàÜÂ∏ÉÂºè È´òÂÆπÈîô stormÂ∏∏È©ªÂÜÖÂ≠òÔºà7*24h:ÊÑèÂë≥ÁùÄÊ∞∏‰πÖËøêË°åÔºåÈúÄ‰∫∫‰∏∫ÂÖ≥Èó≠Ôºâ Êï∞ÊçÆ‰∏çÁªèËøáÁ£ÅÁõòÔºåÂú®ÂÜÖÂ≠ò‰∏≠Â§ÑÁêÜ È´òÂèØÈù†ÊÄßÔºöÂºÇÂ∏∏Â§ÑÁêÜ„ÄÅÊ∂àÊÅØÂèØÈù†ÊÄß‰øùÈöúÊú∫Âà∂ ÂèØÁª¥Êä§ÊÄßÔºöStormUIÂõæÂΩ¢ÂåñÁõëÊéßÊé•Âè£ 3„ÄÅÂ∫îÁî® Ôºà1ÔºâÊµÅÂºèÂ§ÑÁêÜÔºöÔºàÂºÇÊ≠•Ôºâ ‚Äã ÂÆ¢Êà∑Á´ØÊèê‰∫§Êï∞ÊçÆËøõË°åËÆ°ÁÆóÔºåÂπ∂‰∏ç‰ºöÁ≠âÂæÖËÆ°ÁÆóÁªìÊûú ‰∏æ‰æãÔºö ÈÄêÊù°Â§ÑÁêÜÔºöETLÔºàÁî®‰∫éÊï∞ÊçÆÊ∏ÖÊ¥óÔºâ ÁªüËÆ°ÂàÜÊûê Ôºà2ÔºâÂÆûÊó∂ËØ∑Ê±ÇÂ∫îÁ≠îÊúçÂä°ÔºöÔºàÂêåÊ≠•Ôºâ ÂÆ¢Êà∑Á´ØÊèê‰∫§Êï∞ÊçÆÂêéÔºåÁ´ãÂàªÂèñÂæóËÆ°ÁÆóÁªìÊûúÂπ∂ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø ‰∏æ‰æãÔºö ‰∫å„ÄÅStormÊû∂ÊûÑÔºà‰ªéËøõÁ®ãËßíÂ∫¶Ôºâ 1„ÄÅnimbus : (‰∏ª)Êé•Êî∂ÂÆ¢Êà∑Á´ØÊèê‰∫§ÁöÑËØ∑Ê±ÇÔºõ ËµÑÊ∫êË∞ÉÂ∫¶„ÄÅ‰ªªÂä°ÂàÜÈÖç„ÄÅÊé•Êî∂jarÂåÖ 2„ÄÅsupervisorÔºö(‰ªé) Êé•Êî∂nimbusÂàÜÈÖçÁöÑ‰ªªÂä°„ÄÅÂêØÂÅúworker 3„ÄÅworker‚Äì ËøêË°åÂÖ∑‰ΩìÂ§ÑÁêÜËøêÁÆóÁªÑ‰ª∂ÁöÑËøõÁ®ãÔºàÊØè‰∏™WorkerÂØπÂ∫îÊâßË°å‰∏Ä‰∏™TopologyÁöÑÂ≠êÈõÜÔºâ‚Äì worker‰ªªÂä°Á±ªÂûãÔºåÂç≥spout‰ªªÂä°„ÄÅbolt‰ªªÂä°‰∏§Áßç‚Äì ÂêØÂä®executorÔºàexecutorÂç≥worker JVMËøõÁ®ã‰∏≠ÁöÑ‰∏Ä‰∏™javaÁ∫øÁ®ãÔºå‰∏ÄËà¨ÈªòËÆ§ÊØè‰∏™executorË¥üË¥£ÊâßË°å‰∏Ä‰∏™task‰ªªÂä°Ôºâ 4„ÄÅzookeeperÂ≠òÂÇ®ÂøÉË∑≥‰ø°ÊÅØ„ÄÅ‰ªªÂä°‰ø°ÊÅØ Êï∞ÊçÆ‰º†Ëæì ZMQ ÔºöZeroMQÂºÄÊ∫êÁöÑÊ∂àÊÅØ‰º†ÈÄíÊ°ÜÊû∂„ÄÇÂπ∂‰∏çÊòØÊ∂àÊÅØÈòüÂàó Netty ÔºöÂü∫‰∫éNIOÁöÑÁΩëÁªúÊ°ÜÊû∂ÔºåÈ´òÊïàÔºàStorm 0.9‰πãÂêé‰ΩøÁî®Ôºâ ‰∏â„ÄÅStormÁºñÁ®ãÊ®°Âûã TopologyÔºàDAGÊúâÂêëÊó†ÁéØÂõæÁöÑÂÆûÁé∞Ôºâ ÊòØÂØπStormÂÆûÊó∂ËÆ°ÁÆóÈÄªËæëÁöÑÂ∞ÅË£ÖÔºåÁî±‰∏ÄÁ≥ªÂàóÈÄöËøáÊï∞ÊçÆÊµÅÁõ∏‰∫íÂÖ≥ËÅîÁöÑSpout„ÄÅBoltÁªÑÊàêÁöÑÊãìÊâëÁªìÊûÑ ÁîüÂëΩÂë®ÊúüÔºö Ê≠§ÊãìÊâëÁªìÊûÑÂè™Ë¶ÅÂêØÂä®ÔºåÂ∞±‰ºöÂú®ÈõÜÁæ§‰∏≠‰∏ÄÁõ¥ËøêË°åÔºåÁõ¥Âà∞ÊâãÂä®Â∞ÜÂÖ∂killÔºåÂê¶Âàô‰∏ç‰ºöÁªàÊ≠¢„ÄÇ Ôºà‰∏éMapReduce‰∏≠JobÁöÑÂå∫Âà´ÔºåMR‰∏≠JobÂú®ËÆ°ÁÆóÂÆåÊàêÂêéÂ∞±‰ºöÁªàÊ≠¢Ôºâ spoutÔºàÊï∞ÊçÆÊ∫êÔºöÂèëÈÄÅÊï∞ÊçÆÔºâ ‰∏ÄËà¨‰ºö‰ªéÊåáÂÆöÁöÑÊï∞ÊçÆÊ∫êËØªÂèñÂÖÉÁ•ñÔºàTupleÔºâÂèëÈÄÅÂà∞ÊãìÊâëÔºàTopologyÔºâ‰∏≠ ‰∏Ä‰∏™SpoutÂèØ‰ª•ÂèëÈÄÅÂ§ö‰∏™Stream ÔºàÈÄöËøáOutputFieldDeclareÁöÑdeclareÊñπÊ≥ïÂ£∞Êòé‰∏çÂêåÁöÑÊï∞ÊçÆÊµÅÔºåÂèëÈÄÅÊï∞ÊçÆÊó∂ÈÄöËøáSpoutOutputCollector‰∏≠ÁöÑemitÊñπÊ≥ïÊåáÂÆö StreamIdÂ∞ÜÊï∞ÊçÆÂèëÈÄÅÂá∫ÂéªÔºâ Spout‰∏≠ÁöÑÊ†∏ÂøÉÊñπÊ≥ïÊòØnextTupleÔºåËØ•ÊñπÊ≥ï‰ºöË¢´StormÁ∫øÁ®ã‰∏çÊñ≠Ë∞ÉÁî®„ÄÅ‰∏ªÂä®‰ªéÊï∞ÊçÆÊ∫êÊãâÂèñÊï∞ÊçÆ„ÄÅÂÜçÈÄöËøáemitÊñπÊ≥ïÂ∞ÜÊï∞ÊçÆÁîüÊàêÂÖÉÁ•ñÔºàTupleÔºâÂèëÈÄÅÁªô‰πãÂêéÁöÑBoltËÆ°ÁÆó boltÔºàÊï∞ÊçÆÂ§ÑÁêÜÁªÑ‰ª∂ÔºöËÆ°ÁÆóÊï∞ÊçÆÔºå‰∏™Êï∞‰∏çÈôêÔºâ Âçï‰∏™BoltÂèØÂÆûÁé∞ÁÆÄÂçïÁöÑ‰ªªÂä°ÊàñÊï∞ÊçÆÊµÅËΩ¨Êç¢ Â§çÊùÇÁöÑÂú∫ÊôØÈúÄË¶ÅÂ§ö‰∏™BoltÂàÜÂ§ö‰∏™Ê≠•È™§ÂÆåÊàê ‰∏Ä‰∏™BoltÂèØ‰ª•ÂèëÈÄÅÂ§ö‰∏™Stream ÔºàÈÄöËøáOutputFieldDeclareÁöÑdeclareÊñπÊ≥ïÂ£∞Êòé‰∏çÂêåÁöÑÊï∞ÊçÆÊµÅÔºåÂèëÈÄÅÊï∞ÊçÆÊó∂ÈÄöËøáSpoutOutputCollector‰∏≠ÁöÑemitÊñπÊ≥ïÊåáÂÆö StreamIdÂ∞ÜÊï∞ÊçÆÂèëÈÄÅÂá∫ÂéªÔºâ Bolt‰∏≠ÁöÑÊ†∏ÂøÉÊñπÊ≥ïÊòØexecuteÔºåËØ•ÊñπÊ≥ïÈÄöËøáÊé•Êî∂‰∏Ä‰∏™ÂÖÉÁªÑÊï∞ÊçÆ„ÄÅÂÆûÁé∞Ê†∏ÂøÉ‰∏öÂä°ÈÄªËæë tupleÔºàStream‰∏≠ÊúÄÂ∞èÁöÑÊï∞ÊçÆÁªÑÊàêÂçï‰ΩçÔºâ StreamÔºàÊï∞ÊçÆÊµÅÔºâ ‰ªéSpout‰∏≠‰º†ÈÄíÊï∞ÊçÆÁªôBolt„ÄÅ‰∏ä‰∏Ä‰∏™Bolt‰º†ÈÄíÊï∞ÊçÆÁªô‰∏ã‰∏Ä‰∏™BlotÔºåËøôÊ†∑ÂΩ¢ÊàêÁöÑÊï∞ÊçÆÈÄöÈÅìÂè´ÂÅöStream StreamÂ£∞ÊòéÊó∂ÈúÄË¶ÅÁªôÂÖ∂ÊåáÂÆöIdÔºàÈªòËÆ§‰∏∫DefaultÔºåÂÆûÈôÖÂºÄÂèë‰∏≠Â§ö‰ΩøÁî®Âçï‰∏ÄÊï∞ÊçÆÊµÅÔºåÊó†ÈúÄÊåáÂÆöStreamIdÔºâ Stream Grouping ‚Äì Êï∞ÊçÆÊµÅÂàÜÁªÑÔºàÂç≥Êï∞ÊçÆÂàÜÂèëÁ≠ñÁï•Ôºâ Âõõ„ÄÅStormÂÆâË£ÖÈÉ®ÁΩ≤ÔºàÂÆåÂÖ®ÂàÜÂ∏ÉÂºèÔºâ ÁéØÂ¢ÉÔºözookeeperÈõÜÁæ§Ôºànode00Ôºånode01Ôºånode02Ôºâ 1„ÄÅËß£ÂéãÂÆâË£Ö ÁâàÊú¨Ôºöapache-storm-0.10.0.tar.gz 1tar -zvxf apache-storm-0.10.0.tar.gz 2„ÄÅÂú®stormÁõÆÂΩï‰∏≠ÂàõÂª∫logsÁõÆÂΩï 1mkdir logs 3„ÄÅÁºñËæëÈÖçÁΩÆÊñá‰ª∂Ëß£ÂéãË∑ØÂæÑ/config/storm.yaml 1234567891011storm.zookeeper.servers:- &quot;node00&quot;- &quot;node01&quot;- &quot;node02&quot;storm.local.dir: &quot;/opt/storm&quot;nimbus.host: ‚Äúnode00&quot;supervisor.slots.ports:- 6700- 6701- 6702- 6703 Â∞ÜÂÆâË£ÖÂåÖÂèëÈÄÅÂà∞ÂÖ∂‰ªñËäÇÁÇπ 4„ÄÅÂêØÂä®ÊúçÂä° Ôºà1ÔºâÂêØÂä®zookeeper‚Äò 1zkServer.sh start (2)ÂêØÂä®nimbusÔºàÂú®node00‰∏äÔºöstormÂÆâË£ÖÁõÆÂΩï‰∏ãÔºâ 1nohup ./bin/storm nimbus &gt;&gt; ./logs/nimbus.out 2&gt;&amp;1 &amp; nohup:Èò≤Ê≠¢Ë¢´Êìç‰ΩúÁ≥ªÁªüÊÑèÂ§ñÊåÇËµ∑ 2&gt;&amp;1ÔºöÊ†áÂáÜÈîôËØØËæìÂá∫ÈáçÂÆöÂêë &amp;ÔºöÂêéÂè∞ËøêË°å (3)ÂêØÂä®supervisorÔºàÂú®node01 Ôºånode02‰∏äÔºöstormÂÆâË£ÖÁõÆÂΩï‰∏ãÔºâ 1./bin/storm supervisor&gt;&gt; ./logs/supervisor.out 2&gt;&amp;1 &amp; (4)Êü•ÁúãËøõÁ®ã Ôºöjps ÊòæÁ§∫Ôºö node00Ôºö [root@node00 apache-storm-0.10.0]# jps8869 QuorumPeerMain9093 Jps9083 config_value node01 „ÄÅ node02 [root@node01 apache-storm-0.10.0]# jps7280 config_value7290 Jps7230 QuorumPeerMain ‰∏î‰∏â‰∏™ËäÇÁÇπÁöÑlogsÁõÆÂΩï‰∏ã‰πüÁõ∏Â∫îÁöÑÁîüÊàê‰∫ÜÊåáÂÆöÁöÑÊó•ÂøóÊñá‰ª∂ 5„ÄÅStorm UIÔºà‰ªéÊµèËßàÂô®ËÆøÈóÆÔºåÂú®ÂâçÂè∞È°µÈù¢‰∏äÊü•ÁúãËØ¶ÊÉÖÔºâ Ôºà1ÔºâÂêØÂä®ÊúçÂä°ÔºàÂèØÂú®node00ËäÇÁÇπÔºöstormÂÆâË£ÖÁõÆÂΩïÔºâ 1./bin/storm ui &gt;&gt; ./logs/ui.out 2&gt;&amp;1 &amp; Ôºà2ÔºâÊµèËßàÂô®ËÆøÈóÆ http://node00:8080 ‰∫î„ÄÅStormÈáçÁÇπÊ¶ÇÂøµËØ¶Ëß£1„ÄÅgrouping Êï∞ÊçÆÊµÅÂàÜÁªÑÔºàÂç≥Êï∞ÊçÆÂàÜÂèëÁ≠ñÁï•Ôºâ 2„ÄÅÂπ∂ÂèëÊú∫Âà∂topologyË¥üËΩΩÂùáË°° 3„ÄÅÂÆπÈîôÊú∫Âà∂4„ÄÅdemoAPIStorm WordCountÔºàÊï∞ÊçÆÁ¥ØÂä†Ôºâ 5„ÄÅ‰∏éMapReduceÁöÑÂå∫Âà´ Storm MapReduce ÊµÅÂºèÂ§ÑÁêÜ ÊâπÂ§ÑÁêÜ ÔºàÊØ´ÔºâÁßíÁ∫ß ÂàÜÈíüÁ∫ß DAGÊ®°Âûã Map+ReduceÊ®°Âûã Â∏∏È©ªÂÜÖÂ≠òËøêË°å ÂèçÂ§çÂêØÂÅú 6„ÄÅÂíåSpark StreamingÁöÑÂå∫Âà´ Storm Spark Streaming ÊµÅÂºèÂ§ÑÁêÜ ÂæÆÊâπÂ§ÑÁêÜ ÔºàÊØ´ÔºâÁßíÁ∫ß ÁßíÁ∫ß ÊàêÁÜüÁ®≥ÂÆö Á®≥ÂÆöÊÄßÊîπËøõ‰∏≠ Áã¨Á´ãÁ≥ªÁªü ‰∏ì‰∏∫ÊµÅÂºèËÆ°ÁÆóËÆæËÆ° SparkÊ†∏ÂøÉÁöÑ‰∏ÄÁßçËÆ°ÁÆóÊ®°ÂûãËÉΩ‰∏éÂÖ∂‰ªñÁªÑ‰ª∂ÂæàÂ•ΩÁöÑÁªìÂêà Â∞èËÆ∞ 1„ÄÅstormÊ∫êÁ†Å‰∏≠ÂåÖÂê´ÂêéÁºÄÂêç‰∏∫.cljÁöÑÊñá‰ª∂ÔºåËøôÊòØ‰∏ÄÁßçClojureÁºñÁ®ãËØ≠Ë®ÄÔºåÂÆÉÊòØ‰∏ÄÁßçËøêË°åÂú®JVM‰∏äÁöÑLispÊñπË®Ä„ÄÇËÄåLispÊòØ‰∏ÄÁßç‰ª•Ë°®ËææÊÄßÂíåÂäüËÉΩÂº∫Â§ßËëóÁß∞ÁöÑÁºñÁ®ãËØ≠Ë®Ä„ÄÇ 2„ÄÅÈòøÈáåÂ∑¥Â∑¥Âú®StormÁöÑÂü∫Á°Ä‰∏ä‰ΩøÁî®Java‰ª£Á†ÅÂπ∂ÂÅö‰∫ÜÁõ∏ÂÖ≥ÁöÑÊîπËøõÔºåÂºÄÂèë‰∫ÜJStormÔºåÂíåStorm‰∏ÄÊ†∑ÈÉΩÊòØÂºÄÊ∫êÁöÑ„ÄÇÔºàÂèçÂì∫Ë°å‰∏∫ÔºåÂåÖÊã¨Â∞ÜFlink‚ÜíBlinkÔºâ $$ $$ st=>start: Start|past:>http://www.google.com[blank] e=>end: End:>http://www.google.com op1=>operation: My Operation|past op2=>operation: Stuff|current sub1=>subroutine: My Subroutine|invalid cond=>condition: Yes or No?|approved:>http://www.google.com c2=>condition: Good idea|rejected io=>inputoutput: catch something...|request st->op1(right)->cond cond(yes, right)->c2 cond(no)->sub1(left)->op1 c2(yes)->io->e c2(no)->op2->e{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-0", options);]]></content>
      <categories>
        <category>ÂàÜÂ∏ÉÂºèÊ°ÜÊû∂</category>
      </categories>
      <tags>
        <tag>StormÔºåÊµÅÂºèÂ§ÑÁêÜÊ°ÜÊû∂</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlumeÂ≠¶‰π†]]></title>
    <url>%2F2019%2F01%2F18%2FFlume%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅÂàÜÁ±ªexecÔºö UnixÁ≠âÊìç‰ΩúÁ≥ªÁªüÊâßË°åÂëΩ‰ª§Ë°åÔºåÂ¶Çtail Ôºåcat „ÄÇÂèØÁõëÂê¨Êñá‰ª∂ netcat ÁõëÂê¨‰∏Ä‰∏™ÊåáÂÆöÁ´ØÂè£ÔºåÂπ∂Â∞ÜÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆÁöÑÊØè‰∏ÄË°åËΩ¨Êç¢‰∏∫‰∏Ä‰∏™event‰∫ã‰ª∂ avro Â∫èÂàóÂåñÁöÑ‰∏ÄÁßçÔºåÂÆûÁé∞RPCÔºà‰∏ÄÁßçËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÂçèËÆÆÔºâ„ÄÇ ÁõëÂê¨AVROÁ´ØÂè£Êù•Êé•Êî∂Â§ñÈÉ®AVROÂÆ¢Êà∑Á´Ø‰∫ã‰ª∂ÊµÅ capacityÔºöÈªòËÆ§ËØ•ÈÄöÈÅì‰∏≠ÊúÄÂ§ßÁöÑÂèØ‰ª•Â≠òÂÇ®ÁöÑeventÊï∞ÈáèÊòØ1000 Trasaction CapacityÔºöÊØèÊ¨°ÊúÄÂ§ßÂèØ‰ª•source‰∏≠ÊãøÂà∞ÊàñËÄÖÈÄÅÂà∞sink‰∏≠ÁöÑeventÊï∞Èáè‰πüÊòØ100 ‰∫å„ÄÅÊìç‰Ωú1„ÄÅ netcatÔºàÁõëÂê¨Á´ØÂè£ÔºåÂú®Êú¨Âú∞ÊéßÂà∂Âè∞ÊâìÂç∞ÔºâÔºà1Ôºâ vim netcat_logger1234567891011121314151617181920212223# example.conf: A single-node Flume configuration# Name the components on this agenta1.sources = r1a1.sinks = k1a1.channels = c1# Describe/configure the sourcea1.sources.r1.type = netcata1.sources.r1.bind = localhosta1.sources.r1.port = 44444# Describe the sinka1.sinks.k1.type = logger# Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100# Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1 Ôºà2ÔºâÂëΩ‰ª§Êìç‰Ωú ÔºàÂú®‰ºöËØù1Á´ØÔºâ Âú®node00ËäÇÁÇπÁöÑÊéßÂà∂Âè∞ËæìÂÖ•ÂêØÂä®ÂëΩ‰ª§Ôºö (ÊñπÂºè‰∏ÄÔºöÊåáÂÆöÈÖçÁΩÆÊñá‰ª∂ÁöÑË∑ØÂæÑ+Êñá‰ª∂Âêç) flume-ng agent ‚Äìconf-file /root/flume/netcat_logger ‚Äìname a1 -Dflume.root.logger=INFO,console ÔºàÊñπÂºè‰∫åÔºöÈÖçÁΩÆÊñá‰ª∂Âú®ÂΩìÂâçÁõÆÂΩïÔºâ flume-ng agent ‚Äìconf ./ ‚Äìconf-file netcat_logger ‚Äìname a1 -Dflume.root.logger=INFO,console ÁâπÂà´Ê≥®ÊÑèÔºö #####ÂÆòÁΩëÊñπÂºè######### flume-ng agent ‚Äìconf conf ‚Äìconf-file netcat_logger ‚Äìname a1 -Dflume.root.logger=INFO,console Ëß£ÈáäÔºöÊ≠§ÂëΩ‰ª§ÈÄÇÁî®‰∫éÂ∞ÜÈÖçÁΩÆÊñá‰ª∂ÊîæÂú®flumeËß£ÂéãÂÆâË£ÖÁõÆÂΩïÁöÑconf‰∏≠Ôºà‰∏çÂ∏∏Áî®Ôºâ ÊéßÂà∂Âè∞ÊòæÁ§∫: 1‚Äã````` 19/01/18 12:27:31 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started19/01/18 12:27:31 INFO node.Application: Starting Sink k119/01/18 12:27:31 INFO node.Application: Starting Source r119/01/18 12:27:31 INFO source.NetcatSource: Source starting19/01/18 12:27:31 INFO source.NetcatSource: Created serverSocket:sun.nio.ch.ServerSocketChannelImpl[/127.0.0.1:44444]123456789101112131415161718* (Âú®‰ºöËØù2Á´Ø)&gt; Âú®node00ËäÇÁÇπÁöÑÊéßÂà∂Âè∞ËæìÂÖ•ÂëΩ‰ª§Ôºö&gt;&gt; 1„ÄÅÂú®ËäÇÁÇπ‰∏äÂÆâË£ÖtelnetÔºö&gt;&gt; yum install -y telnet&gt;&gt; yum -y install telnet-server&gt;&gt; 2„ÄÅÂêØÂä®Ôºö&gt;&gt; telnet localhost 44444 &gt;&gt; `Ê≥®ÊÑèÔºö`Ôºö&gt;&gt; a1.sources.r1.bind = localhost12345678910&gt;&gt; ÂâçÊèêÊòØ/etc/hosts‰∏≠Â∑≤ÁªèÈÖçÁΩÆ&gt;&gt; Â¶ÇÊûúÊ≠§Â§ÑÈÖçÁΩÆlocalhost ÈÇ£‰πàÂêØÂä®Êó∂Ôºålocalhost Êàñ127.0.0.1ÈÉΩÂèØ‰ª•Ôºånode00Â∞±‰∏çË°å&gt;&gt; Â¶ÇÊûúÊ≠§Â§ÑÈÖçÁΩÆnode00ÈÇ£‰πàÂêØÂä®Êó∂Ôºånode00ÊàñipÈÉΩÂèØ‰ª•ÔºålocalhostÂ∞±‰∏çË°å&gt;&gt; 3„ÄÅÂú®ÊéßÂà∂Âè∞ËæìÂÖ•‰ªª‰ΩïÂÜÖÂÆπ;&gt;&gt; ÈÉΩ‰ºöÂú®‰ºöËØù1Á´ØÊòæÁ§∫Ôºå‰∏î‰ºöËØù1Á´ØÔºàctrl+cÔºâÈÄÄÂá∫ÊúçÂä°Ôºå‰ºöËØù2Á´Ø‰πüËá™Âä®ÁªìÊùü yum list telnet* Êü•ÁúãtelnetÁõ∏ÂÖ≥ÁöÑÂÆâË£ÖÂåÖ Áõ¥Êé•yum ‚Äìy install telnet Â∞±OK yum -y install telnet-server ÂÆâË£ÖtelnetÊúçÂä° yum -y install telnet-client ÂÆâË£ÖtelnetÂÆ¢Êà∑Á´Ø(Â§ßÈÉ®ÂàÜÁ≥ªÁªüÈªòËÆ§ÂÆâË£Ö) 1234### 2„ÄÅavroÔºàÁõëÂê¨ËøúÁ®ãÂèëÈÄÅÊñá‰ª∂ÔºåÂú®Êú¨Âú∞ÊéßÂà∂Âè∞ÊâìÂç∞Ôºâ#### Ôºà1Ôºâvim avro_logger #test avro sources ##‰ΩøÁî®avroÊñπÂºèÂú®ÊüêËäÇÁÇπ‰∏äÂ∞ÜÊñá‰ª∂ÂèëÈÄÅÂà∞Êú¨ÊúçÂä°Âô®‰∏ä‰∏îÈÄöËøáloggerÊñπÂºèÊòæÁ§∫ ##ÂΩìÂâçflumeËäÇÁÇπÊâßË°åÔºö #flume-ng agent ‚Äìconf ./ ‚Äìconf-file avro_loggers ‚Äìname a1 -Dflume.root.logger=INFO,console ##ÂÖ∂‰ªñflumeËäÇÁÇπÊâßË°åÔºö #flume-ng avro-client ‚Äìconf ./ -H 192.168.198.128 -p 55555 -F ./logs a1.sources=r1a1.channels=c1a1.sinks=k1 a1.sources.r1.type = avroa1.sources.r1.bind=192.168.198.128a1.sources.r1.port=55555 a1.sinks.k1.type=logger a1.channels.c1.type = memorya1.channels.c1.capacity=1000a1.channels.c1.transactionCapacity = 100 a1.sources.r1.channels=c1a1.sinks.k1.channel=c1123456789101112131415161718ÂÆûÁé∞ÂäüËÉΩÔºö&gt; ‰ΩøÁî®avroÊñπÂºèÂú®ÊüêËäÇÁÇπ‰∏äÂ∞ÜÊñá‰ª∂ÂèëÈÄÅÂà∞Êú¨ÊúçÂä°Âô®‰∏ä‰∏îÈÄöËøáloggerÊñπÂºèÊòæÁ§∫#### Ôºà2ÔºâÂëΩ‰ª§Êìç‰Ωú##### `ÂêØÂä®` ÔºàÂú®‰ºöËØù1Á´ØÔºâÂú®node00‰∏ä* ##ÂΩìÂâçflumeËäÇÁÇπÊâßË°åÔºàÈÖçÁΩÆÊñá‰ª∂Âú®ÂΩìÂâçÁõÆÂΩïÔºâÔºö* &gt; flume-ng agent --conf ./ --conf-file avro_logger --name a1 -Dflume.root.logger=INFO,console`ÊòæÁ§∫Ôºö` 19/01/18 13:53:16 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started19/01/18 13:53:16 INFO node.Application: Starting Sink k119/01/18 13:53:16 INFO node.Application: Starting Source r119/01/18 13:53:16 INFO source.AvroSource: Starting Avro source r1: { bindAddress: 192.168.198.128, port: 55555 }‚Ä¶19/01/18 13:53:17 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SOURCE, name: r1: Successfully registered new MBean.19/01/18 13:53:17 INFO instrumentation.MonitoredCounterGroup: Component type: SOURCE, name: r1 started19/01/18 13:53:17 INFO source.AvroSource: Avro source r1 started. 12345678910##### ÂèëÈÄÅ(Âú®‰ºöËØù2Á´Ø)Âú®node00‰∏äÂèëÈÄÅÊñá‰ª∂Âà∞node00`ÂêØÂä®`##ÂèØÂú®Êú¨Âú∞ÂíåÂÖ∂‰ªñflumeËäÇÁÇπÊâßË°åÔºàÈÖçÁΩÆÊñá‰ª∂Âú®ÂΩìÂâçÁõÆÂΩïÔºâÔºö flume-ng avro-client ‚Äìconf ./ -H 192.168.198.128 -p 55555 -F ./flume.log12(Âú®‰ºöËØù1Á´Ø) 19/01/18 14:12:57 INFO sink.LoggerSink: Event: { headers:{} body: 68 65 6C 6C 6F 20 62 69 67 64 61 74 61 hello bigdata }12345678910Êó∂ÂàªÁõëÂê¨‰º†ËæìÊñá‰ª∂ÁöÑÂÜÖÂÆπ`Ê≥®ÊÑè`&gt; ËØ•ËøáÁ®ã‰πüÂèØÂ∫îÁî®‰∫é‰∏çÂêåËäÇÁÇπ‰πãÈó¥### 3„ÄÅexecÔºàÁõëÂê¨Êüê‰∏ÄÂëΩ‰ª§ÔºåÂú®Êú¨Âú∞ÊéßÂà∂Âè∞ÊâìÂç∞Ôºâ#### Ôºà1Ôºâvim exec_logger #ÂçïËäÇÁÇπflumeÈÖçÁΩÆ example.conf: A single-node Flume configuration#Áªôagent‰∏âÂ§ßÁªìÊûÑÂëΩÂêç Name the components on this agenta1.sources = r1a1.sinks = k1a1.channels = c1 #ÊèèËø∞sourceÁöÑÈÖçÁΩÆÔºöÁ±ªÂûã„ÄÅÂëΩ‰ª§ÔºàÁõëÂê¨/root/flume.logÊñá‰ª∂Ôºâ Describe/configure the sourcea1.sources.r1.type = execa1.sources.r1.command = tail -F /root/flume.log #ÊèèËø∞sinkÁöÑÈÖçÁΩÆÔºöÁ±ªÂûã Describe the sinka1.sinks.k1.type = logger #Âú®ÂÜÖÂ≠ò‰∏≠‰ΩøÁî®‰∏Ä‰∏™channelÁºìÂ≠ò‰∫ã‰ª∂ Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100 #Â∞ÜsourceÂíåsinkÁªëÂÆöÂà∞channel‰∏ä Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1 1234567891011121314151617181920212223242526Ôºàxshell‰ºöËØù1ÔºöÔºâ&gt; Âú®node00‰∏äÔºö`ÂêØÂä®`&gt;&gt; Âú®exec_loggerÊñá‰ª∂ÊâÄÂú®ÁöÑÁõÆÂΩï‰∏ã&gt;&gt; ÂëΩ‰ª§Ôºöflume-ng agent --conf-file exec_logger --name a1 -Dflume.root.logger=INFO,console&gt;&gt; r1 ÂêØÂä®&gt; ÔºàÂ§çÂà∂‰ºöËØùÔºö‰ºöËØù2Ôºâ&gt;&gt; Âú®node00‰∏äÔºö&gt;&gt; Âú®rootÁõÆÂΩï‰∏ã&gt;&gt; ÂëΩ‰ª§Ôºöecho hello bigdata &gt;&gt;flume.log&gt; ‰πãÂêéÂú®‰ºöËØù2‰∏ä&gt;&gt; `loggerÊú¨Âú∞ÊéßÂà∂Âè∞ÊâìÂç∞Ôºö`&gt;&gt; 19/01/18 12:03:23 INFO sink.LoggerSink:Event:{ headers:{} body: 68 65 6C 6C 6F 20 62 69 67 64 61 74 61 hello bigdata }123456### 4„ÄÅnetcat‚Äìhdfs(ÁõëÂê¨Êï∞ÊçÆÔºå‰º†Âà∞hdfs‰∏ä)#### Ôºà1Ôºâvim netcat_hdfs a1 which ones we want to activate.a1.channels = c1a1.sources = r1a1.sinks = k1 a1.sources.r1.type = netcata1.sources.r1.bind = node00a1.sources.r1.port = 41414 a1.sinks.k1.type = hdfsa1.sinks.k1.hdfs.path = hdfs://Sunrise/myflume/%y-%m-%da1.sinks.k1.hdfs.useLocalTimeStamp=true Define a memory channel called c1 on a1a1.channels.c1.type = memory #ÈªòËÆ§ÂÄºÔºåÂèØÁúÅ #a1.channels.c1.capacity = 1000 #a1.channels.c1.transactionCapacity = 100 Define an Avro source called r1 on a1 and tell ita1.sources.r1.channels = c1a1.sinks.k1.channel = c112345678910111213141516#### (2)Êìç‰ΩúÂú®node00ÁöÑ‰ºöËØù1‰∏äÂêØÂä®&gt; Âú®node00‰∏äÔºö&gt;&gt; Âú®netcat_hdfsÊñá‰ª∂ÊâÄÂú®ÁöÑÁõÆÂΩï‰∏ã&gt;&gt; ÂëΩ‰ª§Ôºöflume-ng agent --conf-file netcat_hdfs --name a1 -Dflume.root.logger=INFO,consoleÊòæÁ§∫Ôºö 19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started19/01/18 14:34:44 INFO node.Application: Starting Sink k119/01/18 14:34:44 INFO node.Application: Starting Source r119/01/18 14:34:44 INFO source.NetcatSource: Source starting19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SINK, name: k1: Successfully registered new MBean.19/01/18 14:34:44 INFO instrumentation.MonitoredCounterGroup: Component type: SINK, name: k1 started19/01/18 14:34:44 INFO source.NetcatSource: Created serverSocket:sun.nio.ch.ServerSocketChannelImpl[/192.168.198.128:41414] 12345678910Âú®node00ÁöÑ‰ºöËØù2‰∏äÂêØÂä®&gt; telnet node00 41414ÊòæÁ§∫ Trying 192.168.198.128‚Ä¶Connected to node00.Escape character is ‚Äò^]‚Äô. 1234ËæìÂÖ•‰ªªÊÑèÂÜÖÂÆπÂú®node00‰ºöËØù1Á´Ø‰ºöÊòæÁ§∫ 19/01/18 14:36:50 INFO hdfs.HDFSSequenceFile: writeFormat = Writable, UseRawLocalFileSystem = false19/01/18 14:36:51 INFO hdfs.BucketWriter: Creating hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp19/01/18 14:37:29 INFO hdfs.BucketWriter: Closing hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp19/01/18 14:37:29 INFO hdfs.BucketWriter: Renaming hdfs://Sunrise/myflume/19-01-18/FlumeData.1547822210259.tmp to hdfs://Sunrise/myflume/19-01-18/FlumeData.154782221025919/01/18 14:37:29 INFO hdfs.HDFSEventSink: Writer callback called. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758Âú®HDFÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏ä‰ºöÊòæÁ§∫ÔºåÁîüÊàêÁöÑÊñá‰ª∂![](https://ws1.sinaimg.cn/large/005zftzDgy1fzb4acaz5fj30u10blmzc.jpg)![](https://ws1.sinaimg.cn/large/005zftzDgy1fzb4bsv8d2j30wd08k74i.jpg)`Ê≥®ÊÑèÔºö`ËøôÁßçÊÉÖÂÜµ‰ºöÂú®hdfs‰∏äÁîüÊàêÂæàÂ§öÂ∞èÊñá‰ª∂Ôºå[Âú®ÂÆòÁΩë](http://flume.apache.org/releases/content/1.8.0/FlumeUserGuide.html)HDFS SinkÔºö[**](http://flume.apache.org/releases/content/1.8.0/FlumeUserGuide.html#hdfs-sink)ÊúâÂæàÂ§öÂÖ≥‰∫éÊñá‰ª∂ÁîüÊàêËøáÁ®ã‰∏≠ÁöÑÈÖçÁΩÆ| Name | Default | Description || ---------------------- | ------------ | ------------------------------------------------------------ || **channel** | ‚Äì | || **type** | ‚Äì | The component type name, needs to be `hdfs` || **hdfs.path** | ‚Äì | HDFS directory path (eg hdfs://namenode/flume/webdata/) || hdfs.filePrefix | FlumeData | Name prefixed to files created by Flume in hdfs directory || hdfs.fileSuffix | ‚Äì | Suffix to append to file (eg `.avro` - *NOTE: period is not automatically added*) || hdfs.inUsePrefix | ‚Äì | Prefix that is used for temporal files that flume actively writes into || hdfs.inUseSuffix | `.tmp` | Suffix that is used for temporal files that flume actively writes into || hdfs.rollInterval | 30 | Number of seconds to wait before rolling current file (0 = never roll based on time interval) || hdfs.rollSize | 1024 | File size to trigger roll, in bytes (0: never roll based on file size) || hdfs.rollCount | 10 | Number of events written to file before it rolled (0 = never roll based on number of events) || hdfs.idleTimeout | 0 | Timeout after which inactive files get closed (0 = disable automatic closing of idle files) || hdfs.batchSize | 100 | number of events written to file before it is flushed to HDFS || hdfs.codeC | ‚Äì | Compression codec. one of following : gzip, bzip2, lzo, lzop, snappy || hdfs.fileType | SequenceFile | File format: currently `SequenceFile`, `DataStream` or `CompressedStream` (1)DataStream will not compress output file and please don‚Äôt set codeC (2)CompressedStream requires set hdfs.codeC with an available codeC || hdfs.maxOpenFiles | 5000 | Allow only this number of open files. If this number is exceeded, the oldest file is closed. || hdfs.minBlockReplicas | ‚Äì | Specify minimum number of replicas per HDFS block. If not specified, it comes from the default Hadoop config in the classpath. || hdfs.writeFormat | Writable | Format for sequence file records. One of `Text` or `Writable`. Set to `Text` before creating data files with Flume, otherwise those files cannot be read by either Apache Impala (incubating) or Apache Hive. || hdfs.callTimeout | 10000 | Number of milliseconds allowed for HDFS operations, such as open, write, flush, close. This number should be increased if many HDFS timeout operations are occurring. || hdfs.threadsPoolSize | 10 | Number of threads per HDFS sink for HDFS IO ops (open, write, etc.) || hdfs.rollTimerPoolSize | 1 | Number of threads per HDFS sink for scheduling timed file rolling || hdfs.kerberosPrincipal | ‚Äì | Kerberos user principal for accessing secure HDFS || hdfs.kerberosKeytab | ‚Äì | Kerberos keytab for accessing secure HDFS || hdfs.proxyUser | | || hdfs.round | false | Should the timestamp be rounded down (if true, affects all time based escape sequences except %t) || hdfs.roundValue | 1 | Rounded down to the highest multiple of this (in the unit configured using `hdfs.roundUnit`), less than current time. || hdfs.roundUnit | second | The unit of the round down value - `second`, `minute` or `hour`. || hdfs.timeZone | Local Time | Name of the timezone that should be used for resolving the directory path, e.g. America/Los_Angeles. || hdfs.useLocalTimeStamp | false | Use the local time (instead of the timestamp from the event header) while replacing the escape sequences. || hdfs.closeTries | 0 | Number of times the sink must try renaming a file, after initiating a close attempt. If set to 1, this sink will not re-try a failed rename (due to, for example, NameNode or DataNode failure), and may leave the file in an open state with a .tmp extension. If set to 0, the sink will try to rename the file until the file is eventually renamed (there is no limit on the number of times it would try). The file may still remain open if the close call fails but the data will be intact and in this case, the file will be closed only after a Flume restart. || hdfs.retryInterval | 180 | Time in seconds between consecutive attempts to close a file. Each close call costs multiple RPC round-trips to the Namenode, so setting this too low can cause a lot of load on the name node. If set to 0 or less, the sink will not attempt to close the file if the first attempt fails, and may leave the file open or with a ‚Äù.tmp‚Äù extension. || serializer | `TEXT` | Other possible options include `avro_event` or the fully-qualified class name of an implementation of the `EventSerializer.Builder` interface. |netcat-hdfs ÔºàÈÖçÁΩÆÊñπÂºè‰∫åÔºâ a1 which ones we want to activate.a1.channels = c1a1.sources = r1a1.sinks = k1 a1.sources.r1.type = avroa1.sources.r1.bind=node01a1.sources.r1.port=55555 a1.sinks.k1.type = hdfsa1.sinks.k1.hdfs.path = hdfs://shsxt/hdfsflume Define a memory channel called c1 on a1a1.channels.c1.type = memorya1.channels.c1.capacity=1000a1.channels.c1.transactionCapacity = 100 Define an Avro source called r1 on a1 and tell ita1.sources.r1.channels = c1a1.sinks.k1.channel = c1123456### 5„ÄÅÁªìÂêàÁâàÔºànetcat-avroÔºâ#### Ôºà1Ôºâvim netcat2_loggerÔºànode00Ôºâ example.conf: A single-node Flume configuration#flume-ng agent ‚Äìconf ./ ‚Äìconf-file netcat2_logger ‚Äìname a1 -Dflume.root.logger=INFO,console #flume-ng ‚Äìconf conf ‚Äìconf-file /root/flume_test/netcat_hdfs -n a1 -Dflume.root.logger=INFO,console #telnet 192.168.235.15 44444 Name the components on this agent a1.sources = r1 a1.sinks = k1 a1.channels = c1 Describe/configure the source a1.sources.r1.type = netcat a1.sources.r1.bind = node00 a1.sources.r1.port = 44444 Describe the sink a1.sinks.k1.type = avro a1.sinks.k1.hostname = node01 a1.sinks.k1.port = 60000 Use a channel which buffers events in memory a1.channels.c1.type = memory a1.channels.c1.capacity = 1000 a1.channels.c1.transactionCapacity = 100 Bind the source and sink to the channel a1.sources.r1.channels = c1 a1.sinks.k1.channel = c1 #‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî #flume-ng agent ‚Äìconf-file etect2_logger ‚Äìname a1 -#Dflume.root.logger=INFO,console #flume-ng agent ‚Äìconf conf ‚Äìconf-file netcat_logger ‚Äìname a1 -#Dflume.root.logger=INFO,console12Ôºànode01Ôºâ #flume-ng agent ‚Äìconf ./ ‚Äìconf-file avro2 -n a1a1.sources = r1a1.sinks = k1a1.channels = c1 a1.sources.r1.type = avroa1.sources.r1.bind = node01a1.sources.r1.port = 60000 a1.sinks.k1.type = logger Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100 Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1 1234567891011121314(2)Êìç‰Ωú&gt; ÂÖàÂêØÂä®ÂêéÈù¢ÁöÑflumeËäÇÁÇπnode01 ÔºåÂú®ÂêØÂä®node00ÔºåÊúÄÂêéÂêØÂä®node02Âú®node01‰∏ä`ÂêØÂä®`&gt; flume-ng &gt;&gt; --conf conf --conf-file avro2 -n a1 -Dflume.root.logger=INFO,consoleÊòæÁ§∫ 19/01/18 23:22:27 INFO node.Application: Starting Channel c119/01/18 23:22:28 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: CHANNEL, name: c1: Successfully registered new MBean.19/01/18 23:22:28 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: c1 started19/01/18 23:22:28 INFO node.Application: Starting Sink k119/01/18 23:22:28 INFO node.Application: Starting Source r119/01/18 23:22:28 INFO source.AvroSource: Starting Avro source r1: { bindAddress: node01, port: 60000 }‚Ä¶19/01/18 23:22:30 INFO instrumentation.MonitoredCounterGroup: Monitored counter group for type: SOURCE, name: r1: Successfully registered new MBean.19/01/18 23:22:30 INFO instrumentation.MonitoredCounterGroup: Component type: SOURCE, name: r1 started19/01/18 23:22:30 INFO source.AvroSource: Avro source r1 started. 1234567891011121314151617181920212223242526Âú®node00‰∏ä`ÂêØÂä®`&gt; flume-ng agent&gt;&gt; --conf ./ --conf-file netcat2_logger --name a1 -Dflume.root.logger=INFO,consoleÂú®node02‰∏ä`ÂêØÂä®`&gt; telnet node00 44444ÁÑ∂ÂêéËæìÂÖ•Êï∞ÊçÆÊñá‰ª∂ÊúÄÂêéÂú®node01ËäÇÁÇπ‰∏äÊòæÁ§∫Êñá‰ª∂‰ø°ÊÅØ 19/01/18 23:33:01 INFO sink.LoggerSink: Event: { headers:{} body: 68 65 6C 6C 6F 20 77 6F 72 6C 64 0D hello world. } ` flume-ng agent ‚Äìconf-file flumeproject ‚Äìname a1 -Dflume.root.logger=INFO,console]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>flume</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HBaseÊÄßËÉΩ‰ºòÂåñ]]></title>
    <url>%2F2019%2F01%2F17%2FHBase%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[HBaseÊÄßËÉΩ‰ºòÂåñÊñπÊ°àÔºà‰∏ÄÔºâ„ÄÅË°®ÁöÑËÆæËÆ°‰∏Ä„ÄÅPre-Creating Regions È¢ÑÂàÜÂå∫ Ëß£ÂÜ≥Êµ∑ÈáèÂØºÂÖ•Êï∞ÊçÆÊó∂ÁöÑÁÉ≠ÁÇπÈóÆÈ¢ò ËÉåÊôØÔºö Âú®ÂàõÂª∫HBaseË°®ÁöÑÊó∂ÂÄôÈªòËÆ§‰∏ÄÂº†Ë°®Âè™Êúâ‰∏Ä‰∏™regionÔºå ÊâÄÊúâÁöÑputÊìç‰ΩúÈÉΩ‰ºöÂæÄËøô‰∏Ä‰∏™region‰∏≠Â°´ÂÖÖÊï∞ÊçÆÔºå ÂΩìËøô‰∏Ä‰∏™regionËøáÂ§ßÊó∂Â∞±‰ºöËøõË°åsplit„ÄÇ Â¶ÇÊûúÂú®ÂàõÂª∫HBaseÁöÑÊó∂ÂÄôÂ∞±ËøõË°åÈ¢ÑÂàÜÂå∫ Âàô‰ºöÂáèÂ∞ëÂΩìÊï∞ÊçÆÈáèÁåõÂ¢ûÊó∂Áî±‰∫éregion splitÂ∏¶Êù•ÁöÑËµÑÊ∫êÊ∂àËÄó„ÄÇ Ê≥®ÊÑèÔºö ÊØè‰∏™regionÈÉΩÊúâ‰∏Ä‰∏™startKeyÂíå‰∏Ä‰∏™endKeyÊù•Ë°®Á§∫ËØ•regionÂ≠òÂÇ®ÁöÑrowKeyËåÉÂõ¥„ÄÇ 1&gt; create &apos;t1&apos;, &apos;cf&apos;, SPLITS =&gt; [&apos;20150501000000000&apos;, &apos;20150515000000000&apos;, &apos;20150601000000000&apos;] ÊàñËÄÖ 123456&gt; create &apos;t2&apos;, &apos;cf&apos;, SPLITS_FILE =&gt; &apos;/home/hadoop/splitfile.txt&apos; /home/hadoop/splitfile.txt‰∏≠Â≠òÂÇ®ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 201505010000000002015051500000000020150601000000000 ‰∫å„ÄÅrow key HBase‰∏≠row keyÁî®Êù•Ê£ÄÁ¥¢Ë°®‰∏≠ÁöÑËÆ∞ÂΩïÔºåÊîØÊåÅ‰ª•‰∏ã‰∏âÁßçÊñπÂºèÔºö ¬∑ ÈÄöËøáÂçï‰∏™row keyËÆøÈóÆÔºöÂç≥ÊåâÁÖßÊüê‰∏™row keyÈîÆÂÄºËøõË°ågetÊìç‰ΩúÔºõ ¬∑ ÈÄöËøárow keyÁöÑrangeËøõË°åscanÔºöÂç≥ÈÄöËøáËÆæÁΩÆstartRowKeyÂíåendRowKeyÔºåÂú®Ëøô‰∏™ËåÉÂõ¥ÂÜÖËøõË°åÊâ´ÊèèÔºõËøáÊª§Âô® ¬∑ ÂÖ®Ë°®Êâ´ÊèèÔºöÂç≥Áõ¥Êé•Êâ´ÊèèÊï¥Âº†Ë°®‰∏≠ÊâÄÊúâË°åËÆ∞ÂΩï„ÄÇ Ôºà‰∫åÔºâ„ÄÅÂÜôË°®Êìç‰Ωú‰∏Ä„ÄÅÂ§öHTableÂÆ¢Êà∑Á´ØÂπ∂ÂèëÂÜô ‰∫å„ÄÅHTableÂèÇÊï∞ËÆæÁΩÆ ‰∏â„ÄÅÊâπÈáèÂÜô Âõõ„ÄÅÂ§öÁ∫øÁ®ãÂπ∂ÂèëÂÜô Ôºà‰∏âÔºâ„ÄÅËØªË°®Êìç‰Ωú‰∏Ä„ÄÅÂ§öHTableÂÆ¢Êà∑Á´ØÂπ∂ÂèëËØª ‰∫å„ÄÅHTableÂèÇÊï∞ËÆæÁΩÆ ‰∏â„ÄÅÊâπÈáèËØª Âõõ„ÄÅÂ§öÁ∫øÁ®ãÂπ∂ÂèëËØª ‰∫î„ÄÅÁºìÂ≠òÊü•ËØ¢ÁªìÊûú ÂÖ≠„ÄÅ Blockcache]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>HBase</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HBaseÂ≠¶‰π†]]></title>
    <url>%2F2019%2F01%2F15%2FHBase%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[ÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì ÂÆòÁΩë ‰∏Ä„ÄÅÂØπÊï∞ÊçÆÂ∫ìÁöÑ Âü∫Êú¨‰∫ÜËß£ 1„ÄÅÁÆÄ‰ªã Âü∫‰∫éHadoop ÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ì ÁâπÁÇπÔºö 1„ÄÅÈ´òÂèØÈù†ÊÄß 2„ÄÅÈ´òÊÄßËÉΩ Ôºà‰ª•‰∏ä‰∏§ÁÇπÔºöÂü∫‰∫éÂàÜÂ∏ÉÂºèÁöÑÁâπÁÇπÔºâ 3„ÄÅÈù¢ÂêëÂàó Ôºà‰ª•ÔºàK,VÔºâÂ≠òÂÇ®ÔºåÊúâÂîØ‰∏ÄÊ†áËÆ∞ÁöÑrowkeyÔºåvalueÂåÖÂê´ÊòØÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂàóÂÄºÔºâ 4„ÄÅÂèØ‰º∏Áº© ÔºàÊê≠Âª∫Âú®ÈõÜÁæ§‰∏äÔºâ 5„ÄÅÂÆûÊó∂ËØªÂÜô ÔºàÁî®Êó∂Èó¥Êà≥ÂîØ‰∏ÄÊ†áËÆ∞ÊØè‰∏ÄÁâàÊú¨ÁöÑÊï∞ÊçÆËÆ∞ÂΩïÔºâ 2„ÄÅÂ∑•‰ΩúÁªìÊûÑ 1„ÄÅÂà©Áî®HadoopÁöÑHDFS‰Ωú‰∏∫ÂÖ∂Êñá‰ª∂Â≠òÂÇ®Á≥ªÁªü 2,Âà©Áî®HadoopÁöÑMapReduceÊù•Â§ÑÁêÜHBase‰∏≠ÁöÑÊµ∑ÈáèÊï∞ÊçÆ 3,Âà©Áî®Zookeeper‰Ωú‰∏∫ÂÖ∂ÂàÜÂ∏ÉÂºèÂçèÂêåÊúçÂä° 4,‰∏ªË¶ÅÁî®Êù•Â≠òÂÇ®ÈùûÁªìÊûÑÂåñÂíåÂçäÁªìÊûÑÂåñÁöÑÊùæÊï£Êï∞ÊçÆÔºàNoSQLÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÊúâredis„ÄÅMongoDBÁ≠â 3„ÄÅÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì 1„ÄÅÂÆö‰πâ ÂÖ≥Á≥ªÊ®°ÂûãÊåáÁöÑÂ∞±ÊòØ‰∫åÁª¥Ë°®Ê†ºÊ®°ÂûãÔºõ ËÄå‰∏Ä‰∏™ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÂ∞±ÊòØÁî±‰∫åÁª¥Ë°®ÂèäÂÖ∂‰πãÈó¥ÁöÑËÅîÁ≥ªÊâÄÁªÑÊàêÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÁªÑÁªá 2„ÄÅ‰∏âÂ§ß‰ºòÁÇπ ÂÆπÊòìÁêÜËß£ ‰ΩøÁî®Êñπ‰æø Êòì‰∫éÁª¥Êä§ 3„ÄÅ‰∏âÂ§ßÁì∂È¢à È´òÂπ∂ÂèëËØªÂÜôÈúÄÊ±Ç Á°¨ÁõòI/OÊòØ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÁì∂È¢àÔºåÂπ∂‰∏îÂæàÈöæËÉΩÂÅöÂà∞Êï∞ÊçÆÁöÑÂº∫‰∏ÄËá¥ÊÄß„ÄÇ Êµ∑ÈáèÊï∞ÊçÆÁöÑËØªÂÜôÊÄßËÉΩ‰Ωé Âú®‰∏ÄÂº†ÂåÖÂê´Êµ∑ÈáèÊï∞ÊçÆÁöÑË°®‰∏≠Êü•ËØ¢ÔºåÊïàÁéáÊòØÈùûÂ∏∏‰ΩéÁöÑ„ÄÇ ‚Äã Êâ©Â±ïÊÄßÂíåÂèØÁî®ÊÄßÂ∑Æ ‰∏∞ÂØåÁöÑÂÆåÊï¥ÊÄß‰ΩøÂæóÊ®™ÂêëÊâ©Â±ïÊääÈöæÂ∫¶Âä†Â§ß‰∫Ü 4„ÄÅÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì 1„ÄÅÂ≠òÂÇ®Ê†ºÂºèÔºökey valueÈîÆÂÄºÂØπÔºåÊñáÊ°£ÔºåÂõæÁâáÁ≠âÁ≠â ÁªìÊûÑ‰∏çÂõ∫ÂÆö 2„ÄÅÂèØ‰ª•ÂáèÂ∞ë‰∏Ä‰∫õÊó∂Èó¥ÂíåÁ©∫Èó¥ÁöÑÂºÄÈîÄÔºå‰ªÖÈúÄË¶ÅÊ†πÊçÆidÂèñÂá∫Áõ∏Â∫îÁöÑvalueÂ∞±ÂèØ‰ª•ÂÆåÊàêÊü•ËØ¢„ÄÇ 3„ÄÅ‰∏ÄËà¨‰∏çÊîØÊåÅACIDÁâπÊÄßÔºåÊó†ÈúÄÁªèËøáSQLËß£ÊûêÔºåËØªÂÜôÊÄßËÉΩÈ´ò 4„ÄÅ‰∏çÊèê‰æõwhereÂ≠óÊÆµÊù°‰ª∂ËøáÊª§ 5„ÄÅÈöæ‰ª•‰ΩìÁé∞ËÆæËÆ°ÁöÑÂÆåÊï¥ÊÄßÔºåÂè™ÈÄÇÂêàÂ≠òÂÇ®‰∏Ä‰∫õËæÉ‰∏∫ÁÆÄÂçïÁöÑÊï∞ÊçÆ ‰∫å„ÄÅÂØπHBaseÁöÑÂü∫Êú¨Èáå‰∫ÜËß£1„ÄÅÊï∞ÊçÆÁªìÊûÑÁªÑÊàêÔºà 1ÔºâRow key : ÂîØ‰∏ÄÊ†áËÆ∞ÂÜ≥ÂÆö‰∏ÄË°åÊï∞ÊçÆÊåâÁÖßÂ≠óÂÖ∏ÊéíÂ∫èÊúÄÂ§ßÂè™ËÉΩÂ≠òÂÇ®64KBÁöÑÂ≠óËäÇÊï∞ÊçÆËÆæËÆ°ÈùûÂ∏∏ÂÖ≥ÈîÆ Ôºà2ÔºâColumn FamilyÂàóÊóè &amp; qualifierÂàó ÂàóÊóèÂøÖÈ°ª‰Ωú‰∏∫Ë°®Ê®°Âºè(schema)ÂÆö‰πâÁöÑ‰∏ÄÈÉ®ÂàÜÈ¢ÑÂÖàÁªôÂá∫Ôºå Ë°®‰∏≠ÁöÑÊØè‰∏™ÂàóÈÉΩÂΩíÂ±û‰∫éÊüê‰∏™ÂàóÊóèÔºõ ÊùÉÈôêÊéßÂà∂„ÄÅÂ≠òÂÇ®‰ª•ÂèäË∞É‰ºòÈÉΩÊòØÂú®ÂàóÊóèÂ±ÇÈù¢ËøõË°åÁöÑÔºõ ÂàóÂêç‰ª•ÂàóÊóè‰Ωú‰∏∫ÂâçÁºÄÔºåÊØè‰∏™‚ÄúÂàóÊóè‚ÄùÈÉΩÂèØ‰ª•ÊúâÂ§ö‰∏™ÂàóÊàêÂëò(column)Ôºõ Êñ∞ÁöÑÂàóÂèØ‰ª•ÈöèÂêéÊåâÈúÄ„ÄÅÂä®ÊÄÅÂä†ÂÖ•Ôºõ Ôºà3ÔºâCellÂçïÂÖÉÊ†º Áî±Ë°åÂíåÂàóÁöÑÂùêÊ†á‰∫§ÂèâÂÜ≥ÂÆöÔºõ ÂçïÂÖÉÊ†ºÊòØÊúâÁâàÊú¨ÁöÑÔºàÊúâÊó∂Èó¥Êà≥ÂÜ≥ÂÆöÔºâÔºõ ÂçïÂÖÉÊ†ºÁöÑÂÜÖÂÆπÊòØÊú™Ëß£ÊûêÁöÑÂ≠óËäÇÊï∞ÁªÑÔºõcell‰∏≠ÁöÑÊï∞ÊçÆÊòØÊ≤°ÊúâÁ±ªÂûãÁöÑÔºåÂÖ®ÈÉ®ÊòØÂ≠óËäÇÁ†ÅÂΩ¢ÂºèÂ≠òË¥Æ„ÄÇ Áî±{rowkeyÔºå column( = +)Ôºå version} ÂîØ‰∏ÄÁ°ÆÂÆöÁöÑÂçïÂÖÉ„ÄÇ Ôºà4ÔºâTimestampÊó∂Èó¥Êà≥ Âú®HBaseÊØè‰∏™cellÂ≠òÂÇ®ÂçïÂÖÉÂØπÂêå‰∏Ä‰ªΩÊï∞ÊçÆÊúâÂ§ö‰∏™ÁâàÊú¨Ôºå Ê†πÊçÆÂîØ‰∏ÄÁöÑÊó∂Èó¥Êà≥Êù•Âå∫ÂàÜÊØè‰∏™ÁâàÊú¨‰πãÈó¥ÁöÑÂ∑ÆÂºÇÔºå ‰∏çÂêåÁâàÊú¨ÁöÑÊï∞ÊçÆÊåâÁÖßÊó∂Èó¥ÂÄíÂ∫èÊéíÂ∫èÔºåÊúÄÊñ∞ÁöÑÊï∞ÊçÆÁâàÊú¨ÊéíÂú®ÊúÄÂâçÈù¢ Êó∂Èó¥Êà≥ÁöÑÁ±ªÂûãÊòØ64‰ΩçÊï¥Âûã„ÄÇÊó∂Èó¥Êà≥ÂèØ‰ª•Áî±HBase(Âú®Êï∞ÊçÆÂÜôÂÖ•Êó∂Ëá™Âä®)ËµãÂÄºÔºåÁ≤æÁ°ÆÂà∞ÊØ´Áßí Êó∂Èó¥Êà≥„ÄÇ‰πüÂèØ‰ª•Áî±ÂÆ¢Êà∑ÊòæÂºèËµãÂÄºÔºå‰ΩÜÂøÖÈ°ªÂîØ‰∏ÄÊÄß Ôºà5ÔºâHLog(WAL log) HLogÊñá‰ª∂Â∞±ÊòØ‰∏Ä‰∏™ÊôÆÈÄöÁöÑHadoop SequenceFile HLog Sequence FileÁöÑKeyÊòØHLogKeyÂØπË±° ‚Äã **HLogKey‰∏≠ËÆ∞ÂΩï‰∫ÜÂÜôÂÖ•Êï∞ÊçÆÁöÑÂΩíÂ±û‰ø°ÊÅØÔºåÂåÖÊã¨tableÂíåregionÂêçÂ≠óÔºåsequence numberÔºàËµ∑ÂßãÂÄº‰∏∫0ÊàñÊòØÊúÄËøë‰∏ÄÊ¨°Â≠òÂÖ•Êñá‰ª∂Á≥ªÁªü‰∏≠sequence numberÔºâÂíåtimestampÔºàÂÜôÂÖ•Êó∂Èó¥Ôºâ HLog SequeceFileÁöÑValueÊòØHBaseÁöÑKeyValueÂØπË±°ÔºåÂç≥ÂØπÂ∫îHFile‰∏≠ÁöÑKeyValue ‚Äã **Â≠òÂÇ®hbaseË°®ÁöÑÊìç‰ΩúËÆ∞ÂΩïÔºåKVÊï∞ÊçÆ‰ø°ÊÅØ 2„ÄÅ‰ΩìÁ≥ªÊû∂ÊûÑ Ôºà1ÔºâClient ÂåÖÂê´ËÆøÈóÆHBaseÁöÑÊé•Âè£Âπ∂Áª¥Êä§cacheÊù•Âä†Âø´ÂØπHBaseÁöÑËÆøÈóÆ Ôºà2ÔºâZookeeper ‰øùËØÅ‰ªª‰ΩïÊó∂ÂÄôÔºåÈõÜÁæ§‰∏≠Âè™Êúâ‰∏Ä‰∏™masterÔºõ Â≠òË¥ÆÊâÄÊúâRegionÁöÑÂØªÂùÄÂÖ•Âè£„ÄÇ ÂÆûÊó∂ÁõëÊéßRegion serverÁöÑ‰∏äÁ∫øÂíå‰∏ãÁ∫ø‰ø°ÊÅØ„ÄÇÂπ∂ÂÆûÊó∂ÈÄöÁü•Master Â≠òÂÇ®HBaseÁöÑschemaÂíåtableÂÖÉÊï∞ÊçÆ Ôºà3ÔºâMaster ‰∏∫Region serverÂàÜÈÖçregionÔºõ Ë¥üË¥£Region serverÁöÑË¥üËΩΩÂùáË°°Ôºõ ÂèëÁé∞Â§±ÊïàÁöÑRegion serverÂπ∂Â∞ÜÂÖ∂‰∏äÁöÑregionÈáçÊñ∞ÂàÜÈÖçÔºõ ÁÆ°ÁêÜÁî®Êà∑ÂØπtableÁöÑÂ¢ûÂà†ÊîπÊìç‰ΩúÔºõ Ôºà4ÔºâRegionServer Áª¥Êä§regionÔºåÂ§ÑÁêÜÂØπËøô‰∫õregionÁöÑIOËØ∑Ê±Ç Ë¥üË¥£ÂàáÂàÜÂú®ËøêË°åËøáÁ®ã‰∏≠ÂèòÂæóËøáÂ§ßÁöÑregion Ôºà5ÔºâRegion ‰øùÂ≠ò‰∏Ä‰∏™Ë°®ÈáåÈù¢ÊüêÊÆµËøûÁª≠ÁöÑÊï∞ÊçÆÔºåÊØè‰∏™Ë°®‰∏ÄÂºÄÂßãÂè™Êúâ‰∏Ä‰∏™regionÔºõ ÈöèÁùÄÊï∞ÊçÆ‰∏çÊñ≠ÊèíÂÖ•Ë°®Ôºåregion‰∏çÊñ≠Â¢ûÂ§ßÔºåÂΩìÂ¢ûÂ§ßÂà∞‰∏Ä‰∏™ÈòÄÂÄºÁöÑÊó∂ÂÄôÔºåregionÂ∞±‰ºöÁ≠âÂàÜ‰ºö‰∏§‰∏™Êñ∞ÁöÑregionÔºàË£ÇÂèòÔºâ ÔºàHBaseËá™Âä®ÊääË°®Ê∞¥Âπ≥ÂàíÂàÜÊàêÂ§ö‰∏™Âå∫Âüü(region)Ôºâ ÂΩìtable‰∏≠ÁöÑË°å‰∏çÊñ≠Â¢ûÂ§öÔºåÂ∞±‰ºöÊúâË∂äÊù•Ë∂äÂ§öÁöÑregion„ÄÇËøôÊ†∑‰∏ÄÂº†ÂÆåÊï¥ÁöÑË°®Ë¢´‰øùÂ≠òÂú®Â§ö‰∏™Regionserver‰∏ä Ôºà6ÔºâMemstore‰∏éstorefile ‰∏Ä‰∏™regionÁî±2-3storeÁªÑÊàêÔºå‰∏Ä‰∏™storeÂØπÂ∫î‰∏Ä‰∏™CFÔºàÂàóÊóèÔºâ storeÂåÖÊã¨‰Ωç‰∫éÂÜÖÂ≠ò‰∏≠ÁöÑmemstoreÂíå‰Ωç‰∫éÁ£ÅÁõòÁöÑstorefile„ÄÇ ÂÜôÊìç‰ΩúÂÖàÂÜôÂÖ•memstoreÔºåÂΩìmemstore‰∏≠ÁöÑÊï∞ÊçÆËææÂà∞Êüê‰∏™ÈòàÂÄºÔºåhregionserver‰ºöÂêØÂä®flashcacheËøõÁ®ãÂÜôÂÖ•storefileÔºåÊØèÊ¨°ÂÜôÂÖ•ÂΩ¢ÊàêÂçïÁã¨ÁöÑ‰∏Ä‰∏™storefileÔºõ ÂΩìstorefileÊñá‰ª∂ÁöÑÊï∞ÈáèÂ¢ûÈïøÂà∞‰∏ÄÂÆöÈòàÂÄºÂêéÔºåÁ≥ªÁªü‰ºöËøõË°åÂêàÂπ∂Ôºàminor„ÄÅmajorcompactionÔºâÔºåÂú®ÂêàÂπ∂ËøáÁ®ã‰∏≠‰ºöËøõË°åÁâàÊú¨ÂêàÂπ∂ÂíåÂà†Èô§Â∑•‰ΩúÔºàmajarÔºâÔºåÂΩ¢ÊàêÊõ¥Â§ßÁöÑstorefile ÂΩì‰∏Ä‰∏™regionÊâÄÊúâstorefileÁöÑÂ§ßÂ∞èÂíåÊï∞ÈáèË∂ÖËøá‰∏ÄÂÆöÈòàÂÄºÂêéÔºå‰ºöÊääÂΩìÂâçÁöÑregionÂàÜÂâ≤‰∏∫‰∏§‰∏™ÔºåÂπ∂Áî±hmasterÂàÜÈÖçÂà∞Áõ∏Â∫îÁöÑregionserverÊúçÂä°Âô®ÔºåÂÆûÁé∞Ë¥üËΩΩÂùáË°° ÂÆ¢Êà∑Á´ØÊ£ÄÁ¥¢Êï∞ÊçÆÔºåÂÖàÂú®memstoreÊâæÔºåÊâæ‰∏çÂà∞ÂÜçÊâæstorefile HRegionÊòØHBase‰∏≠ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÂíåË¥üËΩΩÂùáË°°ÁöÑÊúÄÂ∞èÂçïÂÖÉ„ÄÇÊúÄÂ∞èÂçïÂÖÉÂ∞±Ë°®Á§∫‰∏çÂêåÁöÑHRegionÂèØ‰ª•ÂàÜÂ∏ÉÂú®‰∏çÂêåÁöÑHRegion server‰∏ä„ÄÇ ÊØè‰∏™StroreÂèàÁî±‰∏Ä‰∏™memStoreÂíå0Ëá≥Â§ö‰∏™StoreFileÁªÑÊàê,StoreFile‰ª•HFileÊ†ºÂºè‰øùÂ≠òÂú®HDFS‰∏ä(HFile)„ÄÇ ‰∏â„ÄÅHbase ÂÆâË£ÖÈÉ®ÁΩ≤ÂÆåÂÖ®ÂàÜÂ∏ÉÂºèÊê≠Âª∫ 1„ÄÅÂÆâË£ÖÂåÖÂáÜÂ§á HbaseÔºàÊú¨Êñá‰ΩøÁî®0.98ÁâàÊú¨Ôºâ Â∞Ütar‰∏ä‰º†Ëá≥LinuxÁ≥ªÁªüÔºåËøõË°åËß£ÂéãÂÆâË£Ö 2„ÄÅ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂hbase-env.shÔºàÂú®HbaseÁöÑËß£ÂéãÁõÆÂΩïÁöÑconfÁõÆÂΩï‰∏≠Ôºâ ‰øÆÊ∑ªÂä†JAVA_HOMEÁéØÂ¢ÉÂèòÈáè 123# The java implementation to use. Java 1.7+ required.# export JAVA_HOME=/usr/java/jdk1.6.0/export JAVA_HOME=/usr/soft/jdk1.8.0_191 ‰∏ç‰ΩøÁî®HBaseÁöÑÈªòËÆ§zookeeperÈÖçÁΩÆÔºåÔºà‰ΩøÁî®Ëá™Â∑±ÁöÑÔºâÔºö 12# Tell HBase whether it should manage it&apos;s own instance of Zookeeper or not. export HBASE_MANAGES_ZK=false 3„ÄÅ‰øÆÊîπÈÖçÁΩÆhbase-site.xmlÔºàÂú®HbaseÁöÑËß£ÂéãÁõÆÂΩïÁöÑconfÁõÆÂΩï‰∏≠Ôºâ 123456789101112131415161718192021&lt;configuration&gt;&lt;property&gt;&lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;!--HdfsÈÖçÁΩÆÊó∂ÁöÑÈõÜÁæ§Âêç--&gt;&lt;value&gt;hdfs://Sunrise:8020/hbase&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hbase.cluster.distributed&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;!--zookeeperÁöÑ‰∏âÂè∞ËäÇÁÇπ--&gt;&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;&lt;value&gt;node00,node01,node02&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;!--ÈÖçÁΩÆhttpËÆøÈóÆÁöÑport---&gt;&lt;name&gt;hbase.master.info.port&lt;/name&gt;&lt;value&gt;60010&lt;/value&gt;&lt;/property&gt;&lt;/configuration&gt; Ê≥®ÊÑèÔºöÔºà‰ºöÂá∫bugÁöÑÂú∞ÊñπÔºâÔºö 1„ÄÅÈóÆÈ¢òÊèèËø∞Ôºö HBaseÂêØÂä®Êó∂ÔºåË≠¶ÂëäÔºöJava HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=128m; support was removed in 8.0 Ëß£ÂÜ≥ÊñπÊ°àÔºö ÂéüÂõ†ÔºöÁî±‰∫é‰ΩøÁî®‰∫ÜJDK8 ÔºåÈúÄË¶ÅÂú®HBaseÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠hbase-env.shÔºåÊ≥®ÈáäÊéâ‰∏§Ë°å„ÄÇ 123# Configure PermSize. Only needed in JDK7. You can safely remove it for JDK8+#export HBASE_MASTER_OPTS=&quot;$HBASE_MASTER_OPTS -XX:PermSize=128m -XX:MaxPermSize=128m -XX:ReservedCodeCacheSize=256m&quot;#export HBASE_REGIONSERVER_OPTS=&quot;$HBASE_REGIONSERVER_OPTS -XX:PermSize=128m -XX:MaxPermSize=128m -XX:ReservedCodeCacheSize=256m&quot; ÈáçÊñ∞ÂêØÂä®HBase„ÄÇ 2„ÄÅÈóÆÈ¢òÊèèËø∞Ôºö ÈÖçÁΩÆÂ•ΩHBaseÂêéÔºåÂêÑÈ°πÊúçÂä°Ê≠£Â∏∏Ôºå‰ΩÜÊÉ≥‰ªéÊµèËßàÂô®ÈÄöËøáÁ´ØÂè£60010Áúã‰∏ãËäÇÁÇπÊÉÖÂÜµÔºå‰ΩÜÊòØÊèêÁ§∫ÊãíÁªùËÆøÈóÆ Ê£ÄÊµãÔºöÂú®ÊúçÂä°Âô®‰∏änetstat -natl|grep 60010 ÂèëÁé∞Âπ∂Ê≤°Êúâ60010Á´ØÂè£ ÂéüÂõ†ÔºöHBase 1.0 ‰πãÂêéÁöÑÁâàÊú¨ÈÉΩÈúÄË¶ÅÂú®hbase-site.xml‰∏≠ÈÖçÁΩÆÁ´ØÂè£ÔºåÂ¶Ç‰∏ã 1234&lt;property&gt; &lt;name&gt;hbase.master.info.port&lt;/name&gt; &lt;value&gt;60010&lt;/value&gt;&lt;/property&gt; ÈáçÊñ∞ÂêØÂä®HBase,Âú®ÊµèËßàÂô®ÂÜçÊ¨°ËÆøÈóÆÔºåÂ∞±ok‰∫Ü 4„ÄÅÊ∑ªÂä†ÈÖçÁΩÆregionservers Êñá‰ª∂ÔºàÂú®HbaseÁöÑËß£ÂéãÁõÆÂΩïÁöÑconfÁõÆÂΩï‰∏≠Ôºâ Ê∑ªÂä†ÈÖçÁΩÆÁöÑregionservers ÁöÑ‰∏ªÊú∫Âêç regionservers 123node00node01node02 5„ÄÅÊ∑ªÂä†ÈÖçÁΩÆbackup-masters Ê∑ªÂä†ÈÖçÁΩÆÁöÑmasterÂ§á‰ªΩÁöÑ‰∏ªÊú∫ÂêçÔºàÂú®HbaseÁöÑËß£ÂéãÁõÆÂΩïÁöÑconfÁõÆÂΩï‰∏≠Ôºâ backup-masters 1node02 6„ÄÅÂ∞ÜHadoopÂÆâË£ÖËß£ÂéãÁõÆÂΩï/etc/hadoopÁõÆÂΩï‰∏ãÁöÑhdfs-site.xmlÊñá‰ª∂ Êã∑Ë¥ùÂà∞HbaseÁöÑËß£ÂéãÁõÆÂΩïÁöÑconfÁõÆÂΩï‰∏≠ 7„ÄÅÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè ~/.bash_profile 123456789101112JAVA_HOME=/usr/soft/jdk1.8.0_191export PATH=$PATH:$JAVA_HOME/binHADOOP_HOME=/usr/soft/hadoop-2.6.5export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbinZOOKEEPER_HOME=/usr/soft/zookeeper-3.4.13export PATH=$PATH:$ZOOKEEPER_HOME/binHIVE_HOME=/usr/soft/apache-hive-1.2.1-binexport PATH=$PATH:$HIVE_HOME/binSQOOP_HOME=/usr/soft/sqoop-1.4.6export PATH=$PATH:$SQOOP_HOME/binHBASE_HOME=/usr/soft/hbase-1.2.9export PATH=$PATH:$HBASE_HOME/bin source ~/.bash_profile 8„ÄÅÂ∞ÜÂ¶Ç‰∏äÈÖçÁΩÆËøúÁ®ãÂèëÈÄÅËá≥ÂÖ∂‰ªñËäÇÁÇπÔºàHbase „ÄÅ ./bash_profileÔºâ 9„ÄÅÂêÑ‰∏™ËäÇÁÇπÊ≥®ÊÑèË¶ÅÂÅöÊó∂Èó¥ÂêåÊ≠• 1ntpdate cn.ntp.org.cn 10„ÄÅÂêØÂä®HDFSÈõÜÁæ§Ôºö 12zkServer.sh startstart-hdfs.sh 11„ÄÅÂêØÂä®Ôºöstart-hbase.sh 12345starting master, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-master-node00.outnode02: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node02.outnode01: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node01.outnode00: starting regionserver, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-regionserver-node00.outnode02: starting master, logging to /usr/soft/hbase-1.2.9/bin/../logs/hbase-root-master-node02.out 12„ÄÅÊü•ÁúãËøõÁ®ãÔºöjps 13„ÄÅÊµèËßàÂô®ËÆøÈóÆÔºönode00:60010 14„ÄÅÂÖ≥Èó≠Ôºöstop-hbase.sh Âõõ„ÄÅÈÄöËøáhbase shellÂëΩ‰ª§ËøõÂÖ•HBase ÂëΩ‰ª§Ë°åÊé•Âè£ÈÄöËøáhelpÂèØÊü•ÁúãÊâÄÊúâÂëΩ‰ª§ÁöÑÊîØÊåÅ‰ª•ÂèäÂ∏ÆÂä©ÊâãÂÜå Â∏ÆÂä©ÂàõÂª∫ hbase(main):007:0&gt; help create ÂêçÁß∞ ShellÂëΩ‰ª§ ‰∏æ‰æã ÂàõÂª∫Ë°® create ‚ÄòË°®Âêç‚Äô, ‚ÄòÂàóÊóèÂêç1‚Äô[,‚Ä¶] create ‚Äòt1‚ÄôÔºå‚Äòcf1‚Äô ÂàóÂá∫ÊâÄÊúâË°® list list Ê∑ªÂä†ËÆ∞ÂΩï put ‚ÄòË°®Âêç‚Äô, ‚ÄòRowKey‚Äô, ‚ÄòÂàóÊóèÂêçÁß∞:ÂàóÂêç‚Äô, ‚ÄòÂÄº‚Äô put ‚Äòt1‚Äô,‚Äòrk_00101‚Äô,‚Äòcf1:name‚Äô,‚Äòzs‚Äô Êü•ÁúãËÆ∞ÂΩï get ‚ÄòË°®Âêç‚Äô, ‚ÄòRowKey‚Äô, ‚ÄòÂàóÊóèÂêçÁß∞:ÂàóÂêç‚Äô get ‚Äòt1‚Äô,‚Äòrk_00101‚Äô get ‚Äòt1‚Äô,‚Äòrk_00101‚Äô,‚Äòcf1:name‚Äô Êü•ÁúãË°®‰∏≠ ËÆ∞ÂΩïÊÄªÊï∞ count ‚ÄòË°®Âêç‚Äô count ‚Äòt1‚Äô Âà†Èô§ËÆ∞ÂΩï delete ‚ÄòË°®Âêç‚Äô , ‚ÄòRowKey‚Äô, ‚ÄòÂàóÊóèÂêçÁß∞:ÂàóÂêç‚Äô delete ‚Äòt1‚Äô,‚Äòrk_00101‚Äô,‚Äòcf1:name‚Äô Âà†Èô§‰∏ÄÂº†Ë°® ÂÖàË¶ÅÂ±èËîΩËØ•Ë°®ÔºåÊâçËÉΩÂØπËØ•Ë°®ËøõË°åÂà†Èô§„ÄÇ Á¨¨‰∏ÄÊ≠• disable ‚ÄòË°®ÂêçÁß∞‚Äô Á¨¨‰∫åÊ≠• drop ‚ÄòË°®ÂêçÁß∞‚Äô disable ‚Äòt1‚Äô drop ‚Äòt1‚Äô Êü•ÁúãÊâÄÊúâ ËÆ∞ÂΩï scan ‚ÄòË°®Âêç ‚Äò scan ‚Äòt1‚Äô create ‚Äòt2‚Äô, {NAME =&gt; ‚Äòcf1‚Äô, VERSIONS =&gt; 2}, METADATA =&gt; { ‚Äòmykey‚Äô =&gt; ‚Äòmyvalue‚Äô } Êü•ÁúãÊú™Âä†Â∑•ÁöÑÊï∞ÊçÆ‰∏≠ÊåáÂÆöÁâàÊú¨ËÆ∞ÂΩï scan ‚Äòt1‚Äô, {RAW =&gt; true, VERSIONS =&gt; 3} raw Êú™Âä†Â∑•ÁöÑ 3 Êü•Áúã‰øùÂ≠ò ÁâàÊú¨ËÆ∞ÂΩï scan ‚Äòt1‚Äô, {VERSIONS =&gt; 2} 2 ‰∫î„ÄÅHBase‰ºòÂåñËØ¶ËßÅHBaseÊÄßËÉΩ‰ºòÂåñÊñáÊ°£]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>HBase</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hive‰ºòÂåñ]]></title>
    <url>%2F2019%2F01%2F14%2FHive%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅÊ†∏ÂøÉÊÄùÊÉ≥Ôºö ÊääHive SQL ÂΩìÂÅöMapReduceÁ®ãÂ∫èËøõË°å‰ºòÂåñ Ê≥®ÊÑèÔºö‰ª•‰∏ã‰∏çËÉΩHQLËΩ¨Âåñ‰∏∫Mapreduce‰ªªÂä°ËøêË°å ‚Äîselect ‰ªÖÊü•ËØ¢Êú¨Ë°®Â≠óÊÆµ ‚Äîwhere ‰ªÖÂØπÊú¨Ë°®Â≠óÊÆµÂÅöÊù°‰ª∂ËøáÊª§ ‰∫å„ÄÅexplain Áî®‰ª•ÊòæÁ§∫‰ªªÂä°ÊâßË°åËÆ°Âàí Ê†ºÂºèÔºö EXPLAIN [EXTENDED|DEPENDENCY|AUTHORIZATION] query ËØ≠Ê≥ïËß£Èáä ‰ªéËØ≠Ê≥ïÁªÑÊàêÂèØ‰ª•ÁúãÂá∫Êù•ÊòØ‰∏Ä‰∏™‚Äúexplain ‚Äù+‰∏â‰∏™ÂèØÈÄâÂèÇÊï∞+Êü•ËØ¢ËØ≠Âè•„ÄÇÂ§ßÂÆ∂ÂèØ‰ª•ÁßØÊûÅÂ∞ùËØï‰∏Ä‰∏ãÔºåÂêéÈù¢‰∏§‰∏™ÊòæÁ§∫ÂÜÖÂÆπÂæàÁÆÄÂçïÁöÑÔºåÊàë‰ªãÁªç‰∏Ä‰∏ãÁ¨¨‰∏Ä‰∏™ extended Ëøô‰∏™ÂèØ‰ª•ÊòæÁ§∫hqlËØ≠Âè•ÁöÑËØ≠Ê≥ïÊ†ë ÂÖ∂Ê¨°ÔºåÊâßË°åËÆ°Âàí‰∏ÄÂÖ±Êúâ‰∏â‰∏™ÈÉ®ÂàÜÔºö Ëøô‰∏™ËØ≠Âè•ÁöÑÊäΩË±°ËØ≠Ê≥ïÊ†ë Ëøô‰∏™ËÆ°Âàí‰∏çÂêåÈò∂ÊÆµ‰πãÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ª ÂØπ‰∫éÊØè‰∏™Èò∂ÊÆµÁöÑËØ¶ÁªÜÊèèËø∞ ‰æãÂ≠êÔºö 12&gt; hive&gt; explain select * from log;&gt; ÊãìÂ±ïËØæ‰∏ãÊü•ËØ¢MySQlÁöÑÊâßË°åËÆ°Âàí„ÄÇ ‰∏â„ÄÅHiveËøêË°åÊñπÂºèÈõÜÁæ§Ê®°ÂºèÔºö12ÊâßË°åhqlÔºöhive&gt; select count(*) from log; ÁªìËÆ∫Ôºö ÂáΩÊï∞ÔºàÂ¶ÇcountÔºâÊòØÂú®reduceÈò∂ÊÆµËøõË°åÈªòËÆ§Êèê‰∫§Âà∞yarnÊâÄÂú®ÁöÑËäÇÁÇπ‰∏äËøêË°åÔºå ‰ºòÂåñ‰∏Ä:ËÆæÁΩÆ Êú¨Âú∞Ê®°ÂºèÔºàËøêË°åÈÄüÂ∫¶Âä†Âø´„ÄÇ‰ΩÜÂØπÂä†ËΩΩÊñá‰ª∂ÊúâÈôêÂà∂Ôºâ 1234hive&gt;set hive.exec.mode.local.auto=true;Êü•ÁúãÔºöhive&gt;set hive.exec.mode.local.auto ‰ΩÜÊòØÂ¶ÇÊûúÂä†ËΩΩÊñá‰ª∂ÁöÑÊúÄÂ§ßÂÄºÂ§ß‰∫éÈÖçÁΩÆÔºàÈªòËÆ§ÈÖçÁΩÆ‰∏∫100MÔºâÔºå‰ªç‰ºö‰ΩøÁî®ÈõÜÁæ§Ê®°ÂºèËøêË°åÔºàÂú®yarnÊâÄÂú®ÁöÑËäÇÁÇπÔºâ 12345Êü•ÁúãÊúÄÂ§ßÂä†ËΩΩÊñá‰ª∂hive&gt; set hive.exec.mode.local.auto.inputbytes.max;ÊòæÁ§∫Ôºöhive.exec.mode.local.auto.inputbytes.max=134217728 ‰ºòÂåñ‰∫åÔºöËÆæÁΩÆ ‰∏•Ê†ºÊ®°Âºè 123ÈÄöËøáËÆæÁΩÆ‰ª•‰∏ãÂèÇÊï∞ÂºÄÂêØ‰∏•Ê†ºÊ®°Âºè[Èò≤Ê≠¢ËØØÊìç‰Ωú]Ôºöhive&gt; set hive.mapred.mode=strict;ÔºàÈªòËÆ§‰∏∫ÔºönonstrictÈùû‰∏•Ê†ºÊ®°ÂºèÔºâ ‰ΩÜÊòØÂ≠òÂú®Êü•ËØ¢ÈôêÂà∂ 1„ÄÅÂØπÂàÜÂå∫Ë°®Êü•ËØ¢Êó∂ÔºåÂøÖÈ°ªÊ∑ªÂä†whereÂØπ‰∫éÂàÜÂå∫Â≠óÊÆµÁöÑÊù°‰ª∂ËøáÊª§Ôºõ 12&gt; hive&gt; select * from day_table where dt='2019-01-13';&gt; 2„ÄÅorder byËØ≠Âè•ÂøÖÈ°ªÂåÖÂê´limitËæìÂá∫ÈôêÂà∂Ôºõ 12345&gt; hive&gt; select * from log order by id limit 1;&gt; ËøôÈáåÁöÑ1Ôºå Ë°®Á§∫ÊòæÁ§∫ÂâçÂ§öÂ∞ëÊù°ËÆ∞ÂΩïÔºåÂè™ËÉΩËÆæ‰∏Ä‰∏™Êï∞Â≠ó&gt; ÂíåMysqlÔºàÂèØ‰ª•‰ªé0 ÂºÄÂßãÔºâ‰∏çÂêåÁöÑÊòØÔºåÂÆÉÂè™ËÉΩ‰ªé1ÂºÄÂßã&gt; mysqlÂèØ‰ª•Êúâ‰∏§‰∏™Êï∞Â≠óÔºåË°®Á§∫‰ªéÁ¨¨Âá†Êù°ÂºÄÂßãÔºåÊòæÁ§∫Âá†Êù°&gt; 3„ÄÅÈôêÂà∂ÊâßË°åÁ¨õÂç°Â∞îÁßØÁöÑÊü•ËØ¢ imit Âõõ„ÄÅHiveÊéíÂ∫è1„ÄÅOrder By‚Äî ÂØπ‰∫éÊü•ËØ¢ÁªìÊûúÂÅöÂÖ®Â±ÄÊéíÂ∫èÔºåÂè™ÂÖÅËÆ∏Êúâ‰∏Ä‰∏™reduceÂ§ÑÁêÜÔºàÂΩìÊï∞ÊçÆÈáèËæÉÂ§ßÊó∂ÔºåreduceÊï∞ÈáèÊúâÈôêÔºåÂ∫îÊÖéÁî®„ÄÇ ‚Äã ‰∏•Ê†ºÊ®°Âºè‰∏ãÔºåÂøÖÈ°ªÁªìÂêàlimitÊù•‰ΩøÁî®Ôºâ 1select * from log order by idÔºõ 2„ÄÅSort By‚Äì ÂØπ‰∫éÂçï‰∏™reduceÁöÑÊï∞ÊçÆËøõË°åÊéíÂ∫è ‚ÄìÂ±ÄÈÉ®ÔºàÂçï‰∏™reduceÔºâÊúâÂ∫èÔºåÂÖ®Â±ÄÊó†Â∫è 1ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆmapred.reduce.tasksÁöÑÂÄºÊù•ÊéßÂà∂reduceÁöÑÊï∞ÔºåÁÑ∂ÂêéÂØπreduceËæìÂá∫ÁöÑÁªìÊûúÂÅö‰∫åÊ¨°ÊéíÂ∫è Ê°à‰æã 1select * from log sort by id; (ÁªìÊûúÊó†Â∫è) ÊòæÁ§∫ Time taken: 147.077 seconds, Fetched: 7 row(s) 3„ÄÅDistribute By‚Äì ÂàÜÂå∫ÊéíÂ∫èÔºåÁªèÂ∏∏Âíå Sort By ÁªìÂêà‰ΩøÁî® ÂÖ®Â±ÄÊúâÂ∫èÔºåÂ±ÄÈÉ®Êó†Â∫è 1select * from log distribute by id; ÔºàÁªìÊûúÊó†Â∫èÔºâ Time taken: 144.708 seconds, Fetched: 7 row(s) Ê≥®ÊÑèÔºöhiveË¶ÅÊ±ÇDISTRIBUTE BYËØ≠Âè•Âá∫Áé∞Âú®SORT BYËØ≠Âè•‰πãÂâç 1Distribute ByÂèØ‰ª•Â∞ÜMapÈò∂ÊÆµËæìÂá∫ÁöÑÊï∞ÊçÆÊåâÊåáÂÆöÁöÑÂ≠óÊÆµÂàíÂàÜÂà∞‰∏çÂêåÁöÑreduceÊñá‰ª∂‰∏≠ÔºåÁÑ∂ÂêéÔºåsort by ÂØπreduceÈò∂ÊÆµÁöÑËæìÂá∫Êï∞ÊçÆÂÅöÊéíÂ∫è„ÄÇ Ê°à‰æã: 1select * from log distribute by id sort by id asc; ÔºàÁªìÊûúÊó†Â∫èÔºâ 1select * from (select * from log distribute by id) a sort by a.id ;s ÊîπËâØ 123select a.* from (select * from log cluster by id ) a order by a.id limit 9 ; (ÁªìÊûúÊúâÂ∫è)9 Âú®ËøôÈáåÊòØË°®‰∏≠Êï∞ÊçÆËÆ∞ÂΩïÁöÑÊÄªÊù°Êï∞ ÊòæÁ§∫Ôºö Time taken: 234.593 seconds, Fetched: 7 row(s) 1select * from log order by id limit 9; ÔºàÁªìÊûúÊúâÂ∫èÔºâ ÊòæÁ§∫Ôºö Time taken: 102.065 seconds, Fetched: 7 row(s) 4„ÄÅCluster By‚Äì Áõ∏ÂΩì‰∫é Sort By + Distribute ByÔºàCluster By‰∏çËÉΩÈÄöËøáasc„ÄÅdescÁöÑÊñπÂºèÊåáÂÆöÊéíÂ∫èËßÑÂàôÔºõÂèØÈÄöËøá distribute by column sort by column asc|desc ÁöÑÊñπÂºèÔºâ 1select * from log cluster by idÔºõ ÔºàÁªìÊûúÊó†Â∫èÔºâ ‰∫î„ÄÅHive Join ÔºàÈáçÈöæÁÇπÔºâ1„ÄÅJoin ËøûÊé•Êó∂ÔºåÂ∞ÜÂ∞èË°®ÔºàÈ©±Âä®Ë°®ÔºâÊîæÂú®joinÁöÑÂ∑¶Ëæπ2„ÄÅMap Join Ôºö Âõ†‰∏∫Map Join ÊòØÂú®MapÁ´Ø‰∏îÂú®ÂÜÖÂ≠ò‰∏≠ËøõË°åÁöÑÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÂêØÂä®Reduce‰ªªÂä°Ôºå‰πüÊ≤°ÊúâshuffleÈò∂ÊÆµÔºå‰ªéËÄåÂú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äËäÇÁúÅËµÑÊ∫êÔºåÊèêÈ´òJoinÊïàÁéá„ÄÇ ÊñπÂºèÔºöÔºà‰∏§ÁßçÔºâ1„ÄÅSQLÊñπÂºèÔºö‚Äã Âú®HQlËØ≠Âè•‰∏≠Ê∑ªÂä†MapJoinÊ†áËÆ∞ÔºàmapjoinÔºâ(Â∞ÜÂ∞èË°®Âä†ÂÖ•Âà∞ÂÜÖÂ≠òÔºåÊ≥®ÊÑèÂ∞èË°®ÁöÑÂ§ßÂ∞è) ‚Äã ËØ≠Ê≥ïÔºö 12SELECT /*+ MAPJOIN(smallTable) */ smallTable.key, bigTable.value FROM smallTable JOIN bigTable ON smallTable.key = bigTable.key; Ê°à‰æãÔºö 12SELECT /*+ MAPJOIN(log1) */ log.id,log1.name FROM log JOIN log1 ON log.id = log1.id; 2„ÄÅËá™Âä®ÁöÑMapJoin‚Äã ÈÄöËøá‰øÆÊîπ‰ª•‰∏ãÈÖçÁΩÆÂêØÁî®Ëá™Âä®ÁöÑmapjoinÔºö 1hive&gt; set hive.auto.convert.join = true; ‚Äã Ôºà ËØ•ÂèÇÊï∞‰∏∫trueÊó∂ÔºåHiveËá™Âä®ÂØπÂ∑¶ËæπÁöÑË°®ÁªüËÆ°Êï∞ÊçÆÈáèÔºåÂ¶ÇÊûúÊòØÂ∞èË°®Â∞±Âä†ÂÖ•ÂÜÖÂ≠òÔºåÂç≥ÂØπÂ∞èË°®‰ΩøÁî®Map joinÔºâÂÖ∂‰ªñÁõ∏ÂÖ≥ÈÖçÁΩÆÂèÇÊï∞Ôºö 1hive&gt; set hive.mapjoin.smalltable.filesize; ÔºàÈªòËÆ§ÔºöÂ§ßË°®Â∞èË°®Âà§Êñ≠ÁöÑÈòàÂÄº25MBÂ∑¶Âè≥ÔºåÂ¶ÇÊûúË°®ÁöÑÂ§ßÂ∞èÂ∞è‰∫éËØ•ÂÄºÂàô‰ºöË¢´Âä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ËøêË°åÔºåÂèØËá™ÂÆö‰πâÔºâ 1hive&gt; set hive.ignore.mapjoin.hint; ÔºàÈªòËÆ§ÂÄºÔºötrueÔºõÊòØÂê¶ÂøΩÁï•mapjoin hint Âç≥mapjoinÊ†áËÆ∞ÔºõÂ¶ÇÊûú‰∏∫falseÔºåËøôÂàôÈúÄË¶ÅÊ∑ªÂä†-MapJoinÊ†áËÆ∞ÔºåmapjoinÔºàsmalltableÔºâÔºâ 1hive&gt; set hive.auto.convert.join.noconditionaltask; ÔºàÈªòËÆ§ÂÄºÔºötrueÔºõÂ∞ÜÊôÆÈÄöÁöÑjoinËΩ¨Âåñ‰∏∫ÊôÆÈÄöÁöÑmapjoinÊó∂ÔºåÊòØÂê¶Â∞ÜÂ§ö‰∏™mapjoinËΩ¨Âåñ‰∏∫‰∏Ä‰∏™mapjoinÔºâ 1hive&gt; set hive.auto.convert.join.noconditionaltask.size; ÔºàÈªòËÆ§Ôºö10MÔºõÂ∞ÜÂ§ö‰∏™mapjoinËΩ¨Âåñ‰∏∫‰∏Ä‰∏™mapjoinÊó∂ÔºåÂÖ∂Ë°®ÁöÑÊúÄÂ§ßÂÄº‰∏∫10MÔºåÂèØËá™ÂÆö‰πâÔºâ ÂÖ≠„ÄÅMap-SideËÅöÂêà Áõ∏ÂΩì‰∫éËÅöÂêàÂáΩÊï∞ÔºöcountÔºàÔºâ ËÆæÁΩÆÂèÇÊï∞ÔºåÂºÄÂêØÂú®MapÁ´ØÁöÑËÅöÂêà 1set hive.map.aggr=true; Áõ∏ÂÖ≥ÈÖçÁΩÆÂèÇÊï∞Ôºö 1set hive.groupby.mapaggr.checkintervalÔºõ ÔºàÈªòËÆ§‰∏∫Ôºö100000ÔºåË°®Á§∫ mapÁ´Øgroup byÊâßË°åËÅöÂêàÊó∂Â§ÑÁêÜÁöÑÂ§öÂ∞ëË°åÊï∞ÊçÆÔºâ 1set hive.map.aggr.hash.min.reductionÔºõ ÔºàÈªòËÆ§‰∏∫Ôºö0.5ÔºåËøõË°åËÅöÂêàÁöÑÊúÄÂ∞èÊØî‰æãÔºåÈ¢ÑÂÖàÂèñ100000Êù°Êï∞ÊçÆËÅöÂêà,Â¶ÇÊûúËÅöÂêàÂêéÁöÑÊù°Êï∞/100000&gt;0.5ÔºåÂàô‰∏çÂÜçËÅöÂêàÔºâ 1set hive.map.aggr.hash.percentmemory; ÔºàÈªòËÆ§Ôºö 0.5 ÔºåmapÁ´ØËÅöÂêà‰ΩøÁî®ÁöÑÂÜÖÂ≠òÁöÑÊúÄÂ§ßÂÄºÔºâ 1set hive.map.aggr.hash.force.flush.memory.threshold; ÔºàÈªòËÆ§‰∏∫Ôºö0.9ÔºåmapÁ´ØÂÅöËÅöÂêàÊìç‰ΩúÊòØhashË°®ÁöÑÊúÄÂ§ßÂèØÁî®ÂÜÖÂÆπÔºåÂ§ß‰∫éËØ•ÂÄºÂàô‰ºöËß¶Âèëflush 1set hive.groupby.skewindataÔºõ ÔºàÈªòËÆ§‰∏∫ÔºöfalseÔºåÊòØÂê¶ÂØπGroupBy‰∫ßÁîüÁöÑÊï∞ÊçÆÂÄæÊñúÂÅö‰ºòÂåñÔºâ ÈôÑÂä†Ôºö Êï∞ÊçÆÂÄæÊñúÈóÆÈ¢òËß£ÂÜ≥ÔºöÂ§öÁßçÊñπÂºèÔºà‰ΩøÁî®MapJoin„ÄÅ‰ΩøÁî®MapSideÔºâ ÂèÇËÄÉ http://www.sohu.com/a/224276626_543508 ‰∏É„ÄÅÊéßÂà∂Hive‰∏≠MapÂíåReduceÁöÑÊï∞Èáè1„ÄÅMapÊï∞ÈáèÁõ∏ÂÖ≥ÁöÑÂèÇÊï∞1set mapred.max.split.size; ÔºàÈªòËÆ§‰∏∫Ôºö256MÔºå‰∏Ä‰∏™splitÁöÑÊúÄÂ§ßÂÄºÔºåÂç≥ÊØè‰∏™mapÂ§ÑÁêÜÊñá‰ª∂ÁöÑÊúÄÂ§ßÂÄºÔºâ 1set mapred.min.split.size.per.node; (‰∏Ä‰∏™ËäÇÁÇπ‰∏äÊúÄÂ∞èsplitÊï∞Ôºö1‰∏™) 1set mapred.min.split.size.per.rack; (‰∏Ä‰∏™Êú∫Êû∂‰∏äÊúÄÂ∞èsplitÊï∞Ôºö1‰∏™) 2„ÄÅReduceÊï∞ÈáèÁõ∏ÂÖ≥ÁöÑÂèÇÊï∞1set mapred.reduce.tasks; (ÈªòËÆ§‰∏∫Ôºö-1ÔºåÂº∫Âà∂ÊåáÂÆöreduce‰ªªÂä°ÁöÑÊï∞Èáè„ÄÇ-1ÔºåÊòØÊú™ÂÆö‰πâÔºå‰∏çÂèëÊå•‰ΩúÁî®„ÄÇÂ¶ÇÊûúÊåáÂÆö‰∫ÜÔºåÂ∞±‰ºöÊåâÊåáÂÆöÁöÑÊï∞ÈáèÊâßË°å) 1set hive.exec.reducers.bytes.per.reducer; ÔºàÈªòËÆ§‰∏∫Ôºö256M ÔºåÊØè‰∏™reduce‰ªªÂä°Â§ÑÁêÜÁöÑÊï∞ÊçÆÈáèÔºâ 1set hive.exec.reducers.max; ÔºàÈªòËÆ§‰∏∫Ôºö1009‰∏™ÔºåÊØè‰∏™‰ªªÂä°ÊúÄÂ§ßÁöÑreduceÊï∞ [MapÊï∞Èáè &gt;= ReduceÊï∞Èáè ]Ôºâ ÂÖ´„ÄÅHive - JVMÈáçÁî®ÈÄÇÁî®Âú∫ÊôØÔºö1„ÄÅÂ∞èÊñá‰ª∂‰∏™Êï∞ËøáÂ§ö2„ÄÅtask‰∏™Êï∞ËøáÂ§ö ÂéüÁêÜÔºö hadoopÈªòËÆ§ÈÖçÁΩÆÊòØ‰ΩøÁî®Ê¥æÁîüJVMÊù•ÊâßË°åmapÂíåreduce‰ªªÂä°ÁöÑÔºåJVMÈáçÁî®ÂèØ‰ª•‰ΩøÂæóJVMÂÆû‰æãÂú®Âêå‰∏Ä‰∏™JOB‰∏≠ÈáçÊñ∞‰ΩøÁî®NÊ¨° 1set mapred.job.reuse.jvm.num.tasks; (ÈªòËÆ§ÊòØ1ÔºåË°®Á§∫‰∏Ä‰∏™JVM‰∏äÊúÄÂ§öÂèØ‰ª•È°∫Â∫èÊâßË°åÁöÑtaskÊï∞ÁõÆÔºàÂ±û‰∫éÂêå‰∏Ä‰∏™JobÔºâÊòØ1„ÄÇ‰πüÂ∞±ÊòØËØ¥‰∏Ä‰∏™taskÂêØ‰∏Ä‰∏™JVM) Áº∫ÁÇπÔºö ËÆæÁΩÆÂºÄÂêØ‰πãÂêéÔºåtaskÊèíÊßΩ‰ºö‰∏ÄÁõ¥Âç†Áî®ËµÑÊ∫êÔºå‰∏çËÆ∫ÊòØÂê¶ÊúâtaskËøêË°åÔºåÁõ¥Âà∞ÊâÄÊúâÁöÑtaskÂç≥Êï¥‰∏™jobÂÖ®ÈÉ®ÊâßË°åÂÆåÊàêÊó∂ÔºåÊâç‰ºöÈáäÊîæÊâÄÊúâÁöÑtaskÊèíÊßΩËµÑÊ∫êÔºÅ]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>Hive</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NginxÂÖ•Èó®Â≠¶‰π†Ôºà‰∏ÄÔºâ]]></title>
    <url>%2F2019%2F01%2F12%2FNginx%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%B8%80%E5%9B%9E%E5%90%88%EF%BC%89%2F</url>
    <content type="text"><![CDATA[Nginx[^ÂºÄÂèëËÄÖ]: Áî±‰øÑÁΩóÊñØÁöÑÁ®ãÂ∫èËÆæËÆ°Â∏àIgor SysoevÊâÄÂºÄÂèë [TOC] ‰∏Ä„ÄÅ‰∫ßÁîüËÉåÊôØ1.Â∑®Â§ßÊµÅÈáè‚ÄîÊµ∑ÈáèÁöÑÂπ∂ÂèëËÆøÈóÆ 2.ÂçïÂè∞ÊúçÂä°Âô®ËµÑÊ∫êÂíåËÉΩÂäõÊúâÈôê ÂºïÂèëÊúçÂä°Âô®ÂÆïÊú∫ËÄåÊó†Ê≥ïÊèê‰æõÊúçÂä° ‰∫å„ÄÅË¥üËΩΩÂùáË°°(Load Balance)1„ÄÅÈ´òÂπ∂ÂèëÔºà1Ôºâ„ÄÅÈ´òÔºàÂ§ßÈáèÁöÑÔºâ Ôºà2Ôºâ„ÄÅÂπ∂ÂèëÂ∞±ÊòØÂèØ‰ª•‰ΩøÁî®Â§ö‰∏™Á∫øÁ®ãÊàñËÄÖÂ§ö‰∏™ËøõÁ®ãÔºåÂêåÊó∂Â§ÑÁêÜÔºàÂ∞±ÊòØÂπ∂ÂèëÔºâ‰∏çÂêåÁöÑÊìç‰Ωú Ôºà3Ôºâ„ÄÅÁÆÄËÄåË®Ä‰πãÂ∞±ÊòØÊØèÁßíÂÜÖÊúâÂ§öÂ∞ë‰∏™ËØ∑Ê±ÇÂêåÊó∂ËÆøÈóÆ„ÄÇ 2„ÄÅË¥üËΩΩÂùáË°°Ôºà1Ôºâ„ÄÅÂ∞ÜËØ∑Ê±Ç/Êï∞ÊçÆ„ÄêÂùáÂåÄ„ÄëÂàÜÊëäÂà∞Â§ö‰∏™Êìç‰ΩúÂçïÂÖÉ‰∏äÊâßË°å Ôºà2Ôºâ„ÄÅÂÖ≥ÈîÆÂú®‰∫é„ÄêÂùáÂåÄ„Äë,‰πüÊòØÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊû∂ÊûÑËÆæËÆ°‰∏≠ÂøÖÈ°ªËÄÉËôëÁöÑÂõ†Á¥†‰πã‰∏Ä„ÄÇ 3„ÄÅ‰∫íËÅîÁΩëÂàÜÂ∏ÉÂºèÊû∂ÊûÑÂ∏∏ËßÅÔºåÂàÜ‰∏∫ÂÆ¢Êà∑Á´ØÂ±Ç„ÄÅÂèçÂêë‰ª£ÁêÜnginxÂ±Ç„ÄÅÁ´ôÁÇπÂ±Ç„ÄÅÊúçÂä°Â±Ç„ÄÅÊï∞ÊçÆÂ±Ç„ÄÇÂè™ÈúÄË¶ÅÂÆûÁé∞‚ÄúÂ∞ÜËØ∑Ê±Ç/Êï∞ÊçÆ ÂùáÂåÄÂàÜÊëäÂà∞Â§ö‰∏™Êìç‰ΩúÂçïÂÖÉ‰∏äÊâßË°å‚ÄùÔºåÂ∞±ËÉΩÂÆûÁé∞Ë¥üËΩΩÂùáË°°„ÄÇ ‰∏â„ÄÅÂØπNginxÁöÑÂü∫Êú¨‰∫ÜËß£1„ÄÅ‰ªÄ‰πàÊòØNginxÔºü1‰∏ÄÊ¨æËΩªÈáèÁ∫ßÁöÑWeb ÊúçÂä°Âô®/ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®„ÄêÂêéÈù¢Êúâ‰ªãÁªç„ÄëÂèäÁîµÂ≠êÈÇÆ‰ª∂ÔºàIMAP/POP3Ôºâ‰ª£ÁêÜÊúçÂä°Âô®„ÄÇ ‚Äã ÁâπÁÇπ 12*ÊòØÂç†ÊúâÂÜÖÂ≠òÂ∞ëÔºåCPU„ÄÅÂÜÖÂ≠òÁ≠âËµÑÊ∫êÊ∂àËÄóÂç¥ÈùûÂ∏∏‰ΩéÔºå*ËøêË°åÈùûÂ∏∏Á®≥ÂÆöÂπ∂ÂèëËÉΩÂäõÂº∫ÔºånginxÁöÑÂπ∂ÂèëËÉΩÂäõÁ°ÆÂÆûÂú®ÂêåÁ±ªÂûãÁöÑÁΩëÈ°µÊúçÂä°Âô®‰∏≠Ë°®Áé∞ÈùûÂ∏∏Â•Ω„ÄÇ 2„ÄÅNginx VS ApacheÔºà1Ôºâ„ÄÅnginxÁõ∏ÂØπ‰∫éapacheÁöÑ‰ºòÁÇπÔºö1234*ËΩªÈáèÁ∫ßÔºåÂêåÊ†∑Ëµ∑web ÊúçÂä°ÔºåÊØîapache Âç†Áî®Êõ¥Â∞ëÁöÑÂÜÖÂ≠òÂèäËµÑÊ∫êÈ´òÂπ∂ÂèëÔºå*nginx Â§ÑÁêÜËØ∑Ê±ÇÊòØÂºÇÊ≠•ÈùûÈòªÂ°ûÔºàÂ¶ÇÂâçÁ´ØajaxÔºâÁöÑÔºåËÄåapache ÂàôÊòØÈòªÂ°ûÂûãÁöÑÔºå*Âú®È´òÂπ∂Âèë‰∏ãnginxËÉΩ‰øùÊåÅ‰ΩéËµÑÊ∫ê‰ΩéÊ∂àËÄóÈ´òÊÄßËÉΩÈ´òÂ∫¶Ê®°ÂùóÂåñÁöÑËÆæËÆ°ÔºåÁºñÂÜôÊ®°ÂùóÁõ∏ÂØπÁÆÄÂçï*Nginx ÈÖçÁΩÆÁÆÄÊ¥Å, Apache Â§çÊùÇ Ôºà2Ôºâ„ÄÅapache Áõ∏ÂØπ‰∫énginx ÁöÑ‰ºòÁÇπÔºö12* RewriteÈáçÂÜô ÔºåÊØînginx ÁöÑrewrite Âº∫Â§ßÊ®°ÂùóË∂ÖÂ§öÔºå*Âü∫Êú¨ÊÉ≥Âà∞ÁöÑÈÉΩÂèØ‰ª•ÊâæÂà∞Â∞ëbug Ôºånginx ÁöÑbug Áõ∏ÂØπËæÉÂ§ö„ÄÇÔºàÂá∫Ë∫´Â•ΩËµ∑Ê≠•È´òÔºâ Âõõ„ÄÅÂÆâË£ÖNginxËøôÈáå‰ª•ÂÆâË£Ötengine‰∏∫‰æã 1„ÄÅÂÆâË£Ö‰πãÂâçÂáÜÂ§áÈÖçÁΩÆ‰æùËµñ gcc openssl-devel pcre-devel zlib-devel ÂÆâË£ÖÔºö yum install gcc openssl-devel pcre-devel zlib-devel -y 2„ÄÅ‰∏ãËΩΩÔºàÁõÆÂâçÊúÄÊñ∞ÁâàÔºâÔºötengine-2.2.3.tar 3„ÄÅ Ëß£ÂéãÁº© tar -zvxf tengine-2.2.3.tar 4„ÄÅÂÆâË£ÖNginx Âú®NginxËß£ÂéãÁöÑÁõÆÂΩï‰∏ãËøêË°åÔºö ./configure make &amp;&amp; make install ÈªòËÆ§ÂÆâË£ÖÁõÆÂΩïÔºö/usr/local/nginx 5„ÄÅÈÖçÁΩÆNginx‰∏∫Á≥ªÁªüÊúçÂä°Ôºå‰ª•Êñπ‰æøÁÆ°ÁêÜÔºà1Ôºâ„ÄÅÂú®/etc/rc.d/init.d/ÁõÆÂΩï‰∏≠Âª∫Á´ãÊñáÊú¨Êñá‰ª∂nginxÔºà2Ôºâ„ÄÅÂú®Êñá‰ª∂‰∏≠Á≤òË¥¥‰∏ãÈù¢ÁöÑÂÜÖÂÆπÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126#!/bin/sh## nginx - this script starts and stops the nginx daemon## chkconfig: - 85 15 # description: Nginx is an HTTP(S) server, HTTP(S) reverse \# proxy and IMAP/POP3 proxy server# processname: nginx# config: /etc/nginx/nginx.conf# config: /etc/sysconfig/nginx# pidfile: /var/run/nginx.pid # Source function library.. /etc/rc.d/init.d/functions # Source networking configuration.. /etc/sysconfig/network # Check that networking is up.[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0 nginx=&quot;/usr/local/nginx/sbin/nginx&quot;prog=$(basename $nginx) NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot; [ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx lockfile=/var/lock/subsys/nginx make_dirs() &#123; # make required directories user=`nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:&quot; | sed &apos;s/[^*]*--user=\([^ ]*\).*/\1/g&apos; -` options=`$nginx -V 2&gt;&amp;1 | grep &apos;configure arguments:&apos;` for opt in $options; do if [ `echo $opt | grep &apos;.*-temp-path&apos;` ]; then value=`echo $opt | cut -d &quot;=&quot; -f 2` if [ ! -d &quot;$value&quot; ]; then # echo &quot;creating&quot; $value mkdir -p $value &amp;&amp; chown -R $user $value fi fi done&#125; start() &#123; [ -x $nginx ] || exit 5 [ -f $NGINX_CONF_FILE ] || exit 6 make_dirs echo -n $&quot;Starting $prog: &quot; daemon $nginx -c $NGINX_CONF_FILE retval=$? echo [ $retval -eq 0 ] &amp;&amp; touch $lockfile return $retval&#125; stop() &#123; echo -n $&quot;Stopping $prog: &quot; killproc $prog -QUIT retval=$? echo [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile return $retval&#125; restart() &#123; configtest || return $? stop sleep 1 start&#125; reload() &#123; configtest || return $? echo -n $&quot;Reloading $prog: &quot; killproc $nginx -HUP RETVAL=$? echo&#125; force_reload() &#123; restart&#125; configtest() &#123; $nginx -t -c $NGINX_CONF_FILE&#125; rh_status() &#123; status $prog&#125; rh_status_q() &#123; rh_status &gt;/dev/null 2&gt;&amp;1&#125; case &quot;$1&quot; in start) rh_status_q &amp;&amp; exit 0 $1 ;; stop) rh_status_q || exit 0 $1 ;; restart|configtest) $1 ;; reload) rh_status_q || exit 7 $1 ;; force-reload) force_reload ;; status) rh_status ;; condrestart|try-restart) rh_status_q || exit 0 ;; *) echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot; exit 2esac Ôºà3Ôºâ„ÄÅ‰øÆÊîπnginxÊñá‰ª∂ÁöÑÊâßË°åÊùÉÈôê chmod +x nginx Ôºà4Ôºâ„ÄÅÊ∑ªÂä†ËØ•Êñá‰ª∂Âà∞Á≥ªÁªüÊúçÂä°‰∏≠Âéª chkconfig ‚Äìadd nginx Êü•ÁúãÊòØÂê¶Ê∑ªÂä†ÊàêÂäü chkconfig ‚Äìlist nginx ÂêØÂä®ÔºåÂÅúÊ≠¢ÔºåÈáçÊñ∞Ë£ÖËΩΩ service nginx start|stop ‰∫î„ÄÅNginxÈÖçÁΩÆ1„ÄÅÊü•ÁúãÈÖçÁΩÆ cd /usr/local/nginx/conf vim nginx.conf 2„ÄÅÈÖçÁΩÆËß£Êûê12345678910111213141516171819202122232425262728293031323334#ËøõÁ®ãÊï∞ÔºåÂª∫ËÆÆËÆæÁΩÆÂíåCPU‰∏™Êï∞‰∏ÄÊ†∑Êàñ2ÂÄçworker_processes 2;#Êó•ÂøóÁ∫ßÂà´error_log logs/error.log warning;(ÈªòËÆ§errorÁ∫ßÂà´)# nginx ÂêØÂä®ÂêéÁöÑpid Â≠òÊîæ‰ΩçÁΩÆ#pid logs/nginx.pid;events &#123; #ÈÖçÁΩÆÊØè‰∏™ËøõÁ®ãÁöÑËøûÊé•Êï∞ÔºåÊÄªÁöÑËøûÊé•Êï∞= worker_processes * worker_connections #ÈªòËÆ§1024 worker_connections 10240;&#125;http &#123; include mime.types; default_type application/octet-stream; sendfile on;#ËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥ÔºåÂçï‰ΩçÁßíkeepalive_timeout 65; server &#123; listen 80; server_name localhost #ÈªòËÆ§ËØ∑Ê±Ç location / &#123; root html; #ÂÆö‰πâÊúçÂä°Âô®ÁöÑÈªòËÆ§ÁΩëÁ´ôÊ†πÁõÆÂΩï‰ΩçÁΩÆ index index.php index.html index.htm; #ÂÆö‰πâÈ¶ñÈ°µÁ¥¢ÂºïÊñá‰ª∂ÁöÑÂêçÁß∞ &#125; #ÂÆö‰πâÈîôËØØÊèêÁ§∫È°µÈù¢ error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125; 3„ÄÅË¥üËΩΩÂùáË°°ÈÖçÁΩÆ1ÔºâÂÆâË£ÖTomcatÔºåÂèÇËÄÉ TomcatÈÖçÁΩÆ 2ÔºâÂ§öË¥üËΩΩÂùáÊâßË°å‰∏Ä‰∏ãÊìç‰ΩúÔºö Â§öË¥üËΩΩÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâìÂºÄÊåáÂÆöËôöÊãüÊú∫Âô® open node01 node01 ‰∏∫ÊåáÂÆöËôöÊãüÊú∫Âô®ÁöÑÂà´ÂêçÔºåÂú®hostsÊñá‰ª∂‰∏≠ÈÖçÁΩÆÁöÑ ÂêØÂä®Tomcat Âú®TomcatËß£ÂéãÁöÑÁõÆÂΩï‰∏ã ./startup.sh Ê≥®ÊÑèÔºö ËÆ∞ÂæóÂÖ≥Èó≠ËôöÊãüÊú∫Âô®ÁöÑÈò≤ÁÅ´Â¢ô service iptables stop ÊµèËßàÂô®ËÆøÈóÆ ËôöÊãüÊú∫Âô®IPÂú∞ÂùÄÔºö8080 ÈªòËÆ§Ë¥üËΩΩÂùáË°°ÈÖçÁΩÆ 123456789101112131415161718192021&gt; http &#123; &gt; upstream shsxt&#123; &gt; # ‰ª•‰∏ãÂùá‰∏∫ÂÆûÈôÖÊâßË°åÊúçÂä°ÁöÑÊúçÂä°Âô®&gt; #Âè™ÊúâÂΩìhostsÊñá‰ª∂‰∏≠ÁªôipÂú∞ÂùÄÈÖçÁΩÆ‰∫ÜÂà´ÂêçÔºåËøôÈáåserverÂêéÈù¢ÊâçËÉΩÁî®Âà´ÂêçÔºå&gt; #Âê¶ÂàôË∑üIPÂú∞ÂùÄ&gt; server node01; &gt; server node02; &gt; server node03; &gt; &#125; &gt; &gt; server &#123; &gt; #ÊåáÂÆöËÆøÈóÆÁ´ØÂè£‰∏∫80 ÔºåÈÇ£‰πàTomcatÊúçÂä°Âô®Á´ØÁöÑport‰πüË¶ÅÊîπ‰∏∫80&gt; listen 80; &gt; server_name localhost;&gt; location / &#123;&gt; proxy_pass http://shsxt; &gt; # shsxt ÊòØÊåáÂÆöÁöÑ‰ª£ÁêÜÊúçÂä°Âô®&gt; &#125;&gt; &#125; &gt; &#125;&gt; Êü•Áúã‰ΩøÁî® 80Á´ØÂè£ÁöÑÁ®ãÂ∫è netstat -anp |grep 80 ÈÖçÁΩÆÊñá‰ª∂ÁºñËæëÁªìÊùüÂêéÔºåÂêØÂä®nginxÊúçÂä° service nginx start Ôºà1Ôºâ„ÄÅËΩÆËØ¢Ë¥üËΩΩÂùáË°°ÔºàÈªòËÆ§Ôºâ1- ÂØπÂ∫îÁî®Á®ãÂ∫èÊúçÂä°Âô®ÁöÑËØ∑Ê±Ç‰ª•Âæ™ÁéØÊñπÂºèÂàÜÂèë Ôºà2Ôºâ„ÄÅÂä†ÊùÉË¥üËΩΩÂùáË°° ÈÄöËøá‰ΩøÁî®ÊúçÂä°Âô®ÊùÉÈáçÔºåËøòÂèØ‰ª•Ëøõ‰∏ÄÊ≠•ÂΩ±ÂìçnginxË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºå Ë∞ÅÁöÑÊùÉÈáçË∂äÂ§ßÔºåÂàÜÂèëÂà∞ÁöÑËØ∑Ê±ÇÂ∞±Ë∂äÂ§ö„ÄÇ ÊùÉÈáçÊÄªÊï∞Ôºö10 Âú®nginx.confÊñá‰ª∂‰∏≠‰øÆÊîπÔºö 12345upstream shsxt &#123; server srv1.example.com weight=3;//ÂüüÂêç‰∏∫Âú®/etc/hostsÊñá‰ª∂‰∏≠ÂèñÁöÑÂà´Âêç server srv2.example.com; server srv3.example.com; &#125; ÈÖçÁΩÆ‰øÆÊîπ‰πãÂêéÔºåÈáçÂêØ service nginx restart Ôºà3Ôºâ„ÄÅÊúÄÂ∞ëËøûÊé•Ë¥üËΩΩÂπ≥Ë°° Âú®ËøûÊé•Ë¥üËΩΩÊúÄÂ∞ëÁöÑÊÉÖÂÜµ‰∏ãÔºånginx‰ºöÂ∞ΩÈáèÈÅøÂÖçÂ∞ÜËøáÂ§öÁöÑËØ∑Ê±ÇÂàÜÂèëÁªôÁπÅÂøôÁöÑÂ∫îÁî®Á®ãÂ∫èÊúçÂä°Âô®Ôºå ËÄåÊòØÂ∞ÜÊñ∞ËØ∑Ê±ÇÂàÜÂèëÁªô‰∏çÂ§™ÁπÅÂøôÁöÑÊúçÂä°Âô®ÔºåÈÅøÂÖçÊúçÂä°Âô®ËøáËΩΩ„ÄÇ Âú®nginx.confÊñá‰ª∂‰∏≠‰øÆÊîπÔºö 123456upstream shsxt &#123; least_conn; server srv1.example.com; server srv2.example.com; server srv3.example.com; &#125; Ôºà4Ôºâ„ÄÅ‰ºöËØùÊåÅ‰πÖÊÄß‚Äî‚Äîip-hashË¥üËΩΩÂπ≥Ë°°Êú∫Âà∂ÁâπÁÇπÔºö‰øùËØÅÁõ∏ÂêåÁöÑÂÆ¢Êà∑Á´ØÊÄªÊòØÂÆöÂêëÂà∞Áõ∏ÂêåÁöÑÊúçÂä°; (Ê≠§ÊñπÊ≥ïÂèØÁ°Æ‰øùÊù•Ëá™Âêå‰∏ÄÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÂ∞ÜÂßãÁªàÂÆöÂêëÂà∞Âêå‰∏ÄÂè∞ÊúçÂä°Âô®ÔºåÈô§ÈùûÊ≠§ÊúçÂä°Âô®‰∏çÂèØÁî®„ÄÇ) Âú®nginx.confÊñá‰ª∂‰∏≠‰øÆÊîπÔºö 123456upstream shsxt&#123; ip_hash; server ÔºàIPÂú∞ÂùÄ|Âà´ÂêçÔºâ; server ÔºàIPÂú∞ÂùÄ|Âà´ÂêçÔºâ; server ÔºàIPÂú∞ÂùÄ|Âà´ÂêçÔºâ;&#125; (5)„ÄÅNginxÁöÑËÆøÈóÆÊéßÂà∂ NginxËøòÂèØ‰ª•ÂØπIPÁöÑËÆøÈóÆËøõË°åÊéßÂà∂Ôºåallow‰ª£Ë°®ÂÖÅËÆ∏Ôºådeny‰ª£Ë°®Á¶ÅÊ≠¢. 12345678location / &#123;deny 192.168.2.180;allow 192.168.78.0/24;allow 10.1.1.0/16;allow 192.168.1.0/32;deny all;proxy_pass http://shsxt;&#125; 12345‰ªé‰∏äÂà∞‰∏ãÁöÑÈ°∫Â∫èÔºåÂåπÈÖçÂà∞‰∫Ü‰æøË∑≥Âá∫„ÄÇÂ¶Ç‰∏äÁöÑ‰æãÂ≠êÂÖàÁ¶ÅÊ≠¢‰∫Ü1‰∏™ÔºåÊé•‰∏ãÊù•ÂÖÅËÆ∏‰∫Ü3‰∏™ÁΩëÊÆµÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ipv6ÔºåÊúÄÂêéÊú™ÂåπÈÖçÁöÑIPÂÖ®ÈÉ®Á¶ÅÊ≠¢ËÆøÈóÆ]]></content>
      <categories>
        <category>Ë¥üËΩΩÂùáË°°</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HiveÂ≠¶‰π†]]></title>
    <url>%2F2019%2F01%2F11%2FHive%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅHiveÊòØ‰ªÄ‰πàÔºü1„ÄÅÂü∫‰∫é Hadoop ÁöÑ‰∏Ä‰∏™Êï∞ÊçÆ‰ªìÂ∫ìÂ∑•ÂÖ∑ ÂèØ‰ª•Â∞ÜÁªìÊûÑÂåñÁöÑÊï∞ÊçÆÊñá‰ª∂Êò†Â∞Ñ‰∏∫‰∏ÄÂº†hiveÊï∞ÊçÆÂ∫ìË°®Ôºõ ËøôÂº†HiveÊï∞ÊçÆÂ∫ìË°®‰øùÂ≠ò‰∏ç‰∫ÜmetadataÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåËÄåÊòØÂ∞ÜmetadataÂ≠òÂÇ®Âú®Êú¨Âú∞Á£ÅÁõò‰∏äÁöÑMySQLÔºàÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºâ‰∏≠ Âπ∂Êèê‰æõÁÆÄÂçïÁöÑ sql Êü•ËØ¢ÂäüËÉΩÔºõ ÂèØ‰ª•Â∞Ü sql ËØ≠Âè•ËΩ¨Êç¢‰∏∫ MapReduce ‰ªªÂä°ËøõË°åËøêË°å„ÄÇ 2„ÄÅÂø´ÈÄüÂÆûÁé∞ÁÆÄÂçïÁöÑMapReduce ÁªüËÆ°ÁöÑÂ∑•ÂÖ∑ Êñπ‰æøÈùûJavaÁºñÁ®ãËÄÖÂØπHDFSÁöÑÊï∞ÊçÆÂÅömapreduceÊìç‰ΩúÔºõ Â≠¶‰π†ÊàêÊú¨‰ΩéÔºåÂçÅÂàÜÈÄÇÂêàÊï∞ÊçÆ‰ªìÂ∫ìÁöÑÁªüËÆ°ÂàÜÊûê„ÄÇ 3„ÄÅ‰ªÄ‰πàÊòØÊï∞ÊçÆ‰ªìÂ∫ìÔºü Data Warehouse(DW ÊàñDWHÔºâÊòØ‰∏∫‰ºÅ‰∏öÊâÄÊúâÁ∫ßÂà´ÁöÑÂÜ≥Á≠ñÂà∂ÂÆöËøáÁ®ãÔºåÊèê‰æõÊâÄÊúâÁ±ªÂûãÊï∞ÊçÆÊîØÊåÅÁöÑÊàòÁï•ÈõÜÂêà„ÄÇ Âçï‰∏™Êï∞ÊçÆÂ≠òÂÇ®ÔºåÂá∫‰∫éÂàÜÊûêÊÄßÊä•ÂëäÂíåÂÜ≥Á≠ñÊîØÊåÅÁõÆÁöÑËÄåÂàõÂª∫„ÄÇ ‰∏∫ÈúÄË¶Å‰∏öÂä°Êô∫ËÉΩÁöÑ‰ºÅ‰∏öÔºåÊèê‰æõÊåáÂØº‰∏öÂä°ÊµÅÁ®ãÊîπËøõ„ÄÅÁõëËßÜÊó∂Èó¥„ÄÅÊàêÊú¨„ÄÅË¥®Èáè‰ª•ÂèäÊéßÂà∂. Êï∞ÊçÆ‰ªìÂ∫ìÊòØÁî®Êù•ÂÅöÊü•ËØ¢ÂàÜÊûêÁöÑÊï∞ÊçÆÂ∫ìÔºåÂü∫Êú¨‰∏çÁî®Êù•ÂÅöÊèíÂÖ•Ôºå‰øÆÊîπÔºåÂà†Èô§Êìç‰Ωú„ÄÇ 4„ÄÅÊï∞ÊçÆÂ§ÑÁêÜÁöÑ‰∏§Â§ßÂàÜÁ±ªoltp+olap ËÅîÊú∫‰∫ãÂä°Â§ÑÁêÜOLTPÔºàon-line transaction processingÔºâ OLTPÊòØ‰º†ÁªüÁöÑÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁöÑ‰∏ªË¶ÅÂ∫îÁî®Ôºå‰∏ªË¶ÅÊòØÂü∫Êú¨ÁöÑ„ÄÅÊó•Â∏∏ÁöÑ‰∫ãÂä°Â§ÑÁêÜÔºå‰æãÂ¶ÇÈì∂Ë°å‰∫§Êòì„ÄÇ OLTPÁ≥ªÁªüÂº∫Ë∞ÉÊï∞ÊçÆÂ∫ìÂÜÖÂ≠òÊïàÁéáÔºåÂº∫Ë∞ÉÂÜÖÂ≠òÂêÑÁßçÊåáÊ†áÁöÑÂëΩ‰ª§ÁéáÔºåÂº∫Ë∞ÉÁªëÂÆöÂèòÈáèÔºåÂº∫Ë∞ÉÂπ∂ÂèëÊìç‰ΩúÔºõ ËÅîÊú∫ÂàÜÊûêÂ§ÑÁêÜOLAPÔºàOn-Line Analytical ProcessingÔºâ OLAPÊòØÊï∞ÊçÆ‰ªìÂ∫ìÁ≥ªÁªüÁöÑ‰∏ªË¶ÅÂ∫îÁî®ÔºåÊîØÊåÅÂ§çÊùÇÁöÑÂàÜÊûêÊìç‰ΩúÔºå‰æßÈáçÂÜ≥Á≠ñÊîØÊåÅÔºåÂπ∂‰∏îÊèê‰æõÁõ¥ËßÇÊòìÊáÇÁöÑÊü•ËØ¢ÁªìÊûú„ÄÇ OLAPÁ≥ªÁªüÂàôÂº∫Ë∞ÉÊï∞ÊçÆÂàÜÊûêÔºåÂº∫Ë∞ÉSQLÊâßË°åÂ∏ÇÂú∫ÔºåÂº∫Ë∞ÉÁ£ÅÁõòI/OÔºåÂº∫Ë∞ÉÂàÜÂå∫Á≠â„ÄÇ Êï∞ÊçÆÊñá‰ª∂ÊåâÁªìÊûÑÁöÑÂàÜÁ±ª ÁªìÊûÑÂåñÊï∞ÊçÆÔºöÂÖ≥Á≥ªÂûã ÂçäÁªìÊûÑÂåñÊï∞ÊçÆÔºöK-V ÊùæÊï£ÂûãÔºö ‰∫å„ÄÅHiveÊû∂ÊûÑÂéüÁêÜÁî®Êà∑Êé•Âè£‰∏ªË¶ÅÊúâ‰∏â‰∏™ÔºöCLIÔºåClient Âíå WUI„ÄÇ ‰∏â„ÄÅHiveÊê≠Âª∫Âèä‰∏âÁßçÊ®°Âºè1„ÄÅHiveÁöÑÂÆâË£ÖÈÖçÁΩÆÔºöÔºà1ÔºâÂü∫Êú¨ÁéØÂ¢ÉÔºöHadoopÈõÜÁæ§ÁéØÂ¢ÉÔºàËá≥Â∞ë3‰∏™ËäÇÁÇπÔºâ HiveÊòØ‰æùËµñ‰∫éhadoopÁ≥ªÁªüÁöÑÔºåÂõ†Ê≠§Âú®ËøêË°åHive‰πãÂâçÈúÄË¶Å‰øùËØÅÂ∑≤ÁªèÊê≠Âª∫Â•ΩhadoopÈõÜÁæ§ÁéØÂ¢É„ÄÇ Ôºà2ÔºâÂÆâË£Ö‰∏Ä‰∏™ÂÖ≥Á≥ªÂûãÊï∞ÊçÆmysql Âõ†‰∏∫HiveÊï∞ÊçÆ‰ªìÂ∫ìÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÊòØÂ≠òÊîæÂú®Êú¨Âú∞Á£ÅÁõòÁöÑÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏äÁöÑ ÂÆâË£ÖÊ≠•È™§ÔºöËØ¶ËßÅ ‚ÄúLinuxÁ≥ªÁªüÊï∞ÊçÆÂ∫ìMySQLÂÆâË£Ö.md‚Äù Ôºà3ÔºâËß£ÂéãÂÆâË£ÖÔºàÊåâÈúÄÂú®ÊåáÂÆöËäÇÁÇπ‰∏äÔºâ Ëß£Âéãapache-hive-1.2.1-bin.tar.gz Ôºà4ÔºâËøΩÂä†ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè vim ~/.bash_profile 1234HIVE_HOME=HiveÁöÑËß£ÂéãË∑ØÂæÑHIVE_HOME=/usr/soft/apache-hive-1.2.1-binexport PATH=$PATH:$HIVE_HOME/bin Ôºà5ÔºâÊõøÊç¢ÂíåÊ∑ªÂä†Áõ∏ÂÖ≥jarÂåÖ ‰øÆÊîπHADOOP_HOME/share/hadoop/yarn/libÁõÆÂΩï‰∏ãÁöÑjline-*.jar Â∞ÜÂÖ∂ÊõøÊç¢ÊàêHIVE_HOME/lib‰∏ãÁöÑjline-2.12.jar„ÄÇ ‚ÄìÂ∞ÜÂ¶Ç‰∏ã(hiveËøûÊé•mysql)ÁöÑjarÂåÖÊã∑Ë¥ùÂà∞hiveËß£ÂéãÁõÆÂΩïÁöÑlibÁõÆÂΩï‰∏ã mysql-connector-java-5.1.32-bin.jar Ôºà6Ôºâ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ÔºàÈÄâÊã©3ÁßçÊ®°ÂºèÈáåÂì™‰∏ÄÁßçÔºâËßÅ‰∏âÁßçÂÆâË£ÖÊ®°Âºè Ôºà7ÔºâÂêØÂä® hive 2„ÄÅ‰∏âÁßçÊ®°Âºè ‰∏âÁßçÊ®°Âºè A„ÄÅÂÜÖÂµåÊ®°ÂºèÔºàÂÖÉÊï∞ÊçÆ‰øùÂ≠òÂú®ÂÜÖÂµåÁöÑderby‰∏≠ÔºåÂÖÅËÆ∏‰∏Ä‰∏™‰ºöËØùÈìæÊé•ÔºåÂ∞ùËØïÂ§ö‰∏™‰ºöËØùÈìæÊé•Êó∂‰ºöÊä•ÈîôÔºâ„Äê‰∫ÜËß£„Äë B„ÄÅÊú¨Âú∞Ê®°ÂºèÔºàÊú¨Âú∞ÂÆâË£Ömysql Êõø‰ª£derbyÂ≠òÂÇ®ÂÖÉÊï∞ÊçÆÔºâ„ÄêÈáçË¶Å„Äë C„ÄÅËøúÁ®ãÊ®°ÂºèÔºàËøúÁ®ãÂÆâË£Ömysql Êõø‰ª£derbyÂ≠òÂÇ®ÂÖÉÊï∞ÊçÆÔºâ„ÄêÈáçË¶Å„Äë Ôºà1ÔºâÂÜÖÂµåDerbyÂçïÁî®Êà∑Ê®°ÂºèÔºà‰∫ÜËß£Ôºâ ÂÖÉÊï∞ÊçÆÊòØÂÜÖÂµåÂú®DerbyÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÔºåÂè™ËÉΩÂÖÅËÆ∏‰∏Ä‰∏™‰ºöËØùËøûÊé•ÔºåÊï∞ÊçÆ‰ºöÂ≠òÊîæÂà∞HDFS‰∏ä„ÄÇ Â≠òÂÇ®ÊñπÂºèÁÆÄÂçïÔºåÂè™ÈúÄË¶Åhive-site.xml Ê≥®Ôºö‰ΩøÁî® derbyÂ≠òÂÇ®ÊñπÂºèÊó∂ÔºåËøêË°å hive ‰ºöÂú®ÂΩìÂâçÁõÆÂΩïÁîüÊàê‰∏Ä‰∏™ derby Êñá‰ª∂Âíå‰∏Ä‰∏™metastore_db hive-site.xml Ôºö 1234567891011121314151617181920212223242526272829303132&lt;?xml version="1.0"?&gt;&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;&lt;configuration&gt;&lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;&lt;value&gt;jdbc:derby:;databaseName=metastore_db;create=true&lt;/value&gt; &lt;/property&gt;&lt;property&gt;&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;&lt;value&gt;org.apache.derby.jdbc.EmbeddedDriver&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hive.metastore.local&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;&lt;value&gt;/user/hive/warehouse&lt;/value&gt;&lt;/property&gt;&lt;/configuration&gt; Ôºà2ÔºâÊú¨Âú∞Áî®Êà∑Ê®°ÂºèÔºàÈáçË¶ÅÔºåÂ§öÁî®‰∫éÊú¨Âú∞ÂºÄÂèëÊµãËØïÔºâ ‰∏éÂµåÂÖ•ÂºèÁöÑÂå∫Âà´ ‰∏çÂÜç‰ΩøÁî®ÂÜÖÂµåÁöÑDerby‰Ωú‰∏∫ÂÖÉÊï∞ÊçÆÁöÑÂ≠òÂÇ®‰ªãË¥®ÔºåËÄåÊòØ‰ΩøÁî®ÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÊØîÂ¶ÇMySQLÊù•Â≠òÂÇ®ÂÖÉÊï∞ÊçÆ‰∏îÊòØ‰∏Ä‰∏™Â§öÁî®Êà∑ÁöÑÊ®°ÂºèÔºåËøêË°åÂ§ö‰∏™Áî®Êà∑clientËøûÊé•Âà∞‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∏≠„ÄÇËøôÁßçÊñπÂºè‰∏ÄËà¨‰Ωú‰∏∫ÂÖ¨Âè∏ÂÜÖÈÉ®ÂêåÊó∂‰ΩøÁî®Hive„ÄÇ ËøôÈáåÊúâ‰∏Ä‰∏™ÂâçÊèêÔºåÊØè‰∏Ä‰∏™Áî®Êà∑ÂøÖÈ°ªË¶ÅÊúâÂØπMySQLÁöÑËÆøÈóÆÊùÉÂà©ÔºåÂç≥ÊØè‰∏Ä‰∏™ÂÆ¢Êà∑Á´Ø‰ΩøÁî®ËÄÖÈúÄË¶ÅÁü•ÈÅìMySQLÁöÑÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÊâçË°å„ÄÇ ÈúÄË¶ÅÂú®Êú¨Âú∞ËøêË°å‰∏Ä‰∏™ mysql ÊúçÂä°Âô® Âú®node00‰∏äÔºà‰∏éMySQLÂú®Âêå‰∏Ä‰∏™ËäÇÁÇπ‰∏äÔºâËß£ÂéãÂÆâË£ÖHive MySQL Hive : node00 ÈúÄË¶ÅÂ∞Ü mysql ÁöÑ jar ÂåÖÔºàmysql-connector-java-5.1.32-bin.jarÔºâÊã∑Ë¥ùÂà∞$HIVE_HOME/lib ÁõÆÂΩï‰∏ã hive-site.xml 12345678910111213141516171819202122232425262728&lt;?xml version="1.0"?&gt;&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt; &lt;value&gt;/user/hive_local/warehouse&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hive.metastore.local&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt; &lt;value&gt;jdbc:mysql://node00/hive_remote?createDatabaseIfNotExist=true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt; &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt; &lt;value&gt;root&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt; &lt;value&gt;123456&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; Ôºà3ÔºâËøúÁ®ãÊ®°ÂºèÔºàÈáçË¶ÅÔºâ remote ‰∏Ä‰Ωì Â∞ÜHiveËß£ÂéãÂÆâË£Ö‰∏éMySQL‰∏çÂêåÁöÑËäÇÁÇπ‰∏ä MySQL Ôºönode00 Hive Ôºö node02 ÈúÄË¶ÅÂú® HiveÊúçÂä°Âô®ÂêØÂä® metaÊúçÂä° hive-site.xml (hadoop 2.6.5) 12345678910111213141516171819202122232425262728&lt;?xml version="1.0"?&gt;&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt; &lt;value&gt;/user/hive1/warehouse&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt; &lt;value&gt;jdbc:mysql://node02:3306/hive?createDatabaseIfNotExist=true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt; &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt; &lt;value&gt;root&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt; &lt;value&gt;123456&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hive.metastore.local&lt;/name&gt; &lt;value&gt;false&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; Â¶ÇÊûúÂú®hadoop5.XÁéØÂ¢É‰∏ãËøòÈúÄË¶ÅÊ∑ªÂä† 1234&lt;property&gt; &lt;name&gt;hive.metastore.uris&lt;/name&gt; &lt;value&gt;thrift://node01:9083&lt;/value&gt;&lt;/property&gt; Ê≥®ÔºöËøôÈáåÊäähiveÁöÑÊúçÂä°Á´ØÂíåÂÆ¢Êà∑Á´ØÈÉΩÊîæÂú®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏ä‰∫Ü„ÄÇÊúçÂä°Á´ØÂíåÂÆ¢Êà∑Á´ØÂèØ‰ª•ÊãÜÂºÄ Remote ÂàÜÂºÄ(ÂÖ¨Âè∏‰ºÅ‰∏öÁªèÂ∏∏Áî®) Â∞Ü hive-site.xml ÈÖçÁΩÆÊñá‰ª∂ÊãÜ‰∏∫Â¶Ç‰∏ã‰∏§ÈÉ®ÂàÜÔºàÊ≠§Êó∂‰∏ç‰∏éMySQLÂú®Âêå‰∏ÄÂè∞ËäÇÁÇπ‰∏äÔºâ MySql Ôºö node00 ÊúçÂä°Á´Ø Ôºö node02 ÂÆ¢Êà∑Á´Ø Ôºö node01 1Ôºâ„ÄÅÊúçÂä°Á´ØÈÖçÁΩÆÊñá‰ª∂Ôºànode02Ôºâ hive-site.xml 123456789101112131415161718192021222324&lt;?xml version="1.0"?&gt;&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt; &lt;value&gt;/user/hive2/warehouse&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt; &lt;value&gt;jdbc:mysql://node00:3306/hive?createDatabaseIfNotExist=true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt; &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt; &lt;value&gt;root&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt; &lt;value&gt;123456&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; 2Ôºâ„ÄÅÂÆ¢Êà∑Á´ØÈÖçÁΩÆÊñá‰ª∂Ôºànode01Ôºâ hive-site.xml 1234567891011121314151617181920212223242526272829303132&lt;?xml version="1.0"?&gt;&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt; &lt;configuration&gt; &lt;property&gt; &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt; &lt;value&gt;/user/hive2/warehouse&lt;/value&gt; &lt;!--Ê≥®ÊÑèËøôÈáåÁöÑË∑ØÂæÑË¶ÅÂíåÊúçÂä°Á´Ø‰∏ÄËá¥---&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hive.metastore.local&lt;/name&gt; &lt;value&gt;false&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hive.metastore.uris&lt;/name&gt; &lt;value&gt;thrift://node02:9083&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; ÊúçÂä°Á´ØÂêØÂä® hive Á®ãÂ∫è hive ‚Äìservice metastore ÂÆ¢Êà∑Á´ØÁõ¥Êé•‰ΩøÁî® hive ÂëΩ‰ª§Âç≥ÂèØ HiveÂ∏∏ËßÅÈóÆÈ¢òÊÄªÊ±áÔºöhttp://blog.csdn.net/freedomboy319/article/details/44828337 Âõõ„ÄÅHQLËØ¶Ëß£Hql Â∞±ÊòØHiveQlËØ≠Âè• 1„ÄÅDDLËØ≠Âè•ÔºàÊï∞ÊçÆÂ∫ìÂÆö‰πâËØ≠Ë®ÄÔºâÔºà1ÔºâÂÖ∑‰ΩìÂèÇËßÅÔºöhttps://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDLHiveÁöÑÊï∞ÊçÆÂÆö‰πâËØ≠Ë®Ä ÔºàLanguageManual DDL;)Ôºâ ÈáçÁÇπ hive ÁöÑÂª∫Ë°®ËØ≠Âè•ÂíåÂàÜÂå∫„ÄÇ Ôºà2ÔºâÂàõÂª∫/Âà†Èô§/‰øÆÊîπ/‰ΩøÁî®Êï∞ÊçÆÂ∫ì ÂàõÂª∫Êï∞ÊçÆÂ∫ì ÔºàHiveÊê≠Âª∫ÂÆåÊØïÂêéÔºå‰ºöÂàõÂª∫‰∏Ä‰∏™ÈªòËÆ§ÁöÑÊï∞ÊçÆÂ∫ìÔºâ Êü•Áúã show databasesÔºõ CREATE (DATABASE|SCHEMA) [IF NOT EXISTS] database_name [COMMENT database_comment]; ‰∏æ‰æãÔºö create database attribute; create database attr; Ê≥®ÊÑèÔºöÂàõÂª∫Êï∞ÊçÆÊó∂ÔºåÊï∞ÊçÆÂ∫ìÂêç‰∏çË¶ÅÂíåÁ≥ªÁªüÂÖ≥ÈîÆÂ≠óÂÜ≤Á™ÅÔºåÂê¶Âàô‰ºöÊä•ÈîôÔºõ Â¶Ç‰∏ãÔºö 123456789101112131415161718192021ÂëΩ‰ª§Ôºöhive&gt; create database out;Êä•ÈîôÔºöFAILED: ParseException line 1:16 Failed to recognize predicate 'out'. Failed rule: 'identifier' in create database statementÂéüÂõ†ÔºöÂú®Hive1.2.0ÁâàÊú¨ÂºÄÂßãÂ¢ûÂä†‰∫ÜÂ¶Ç‰∏ãÈÖçÁΩÆÈÄâÈ°πÔºåÈªòËÆ§ÂÄº‰∏∫trueÔºöhive.support.sql11.reserved.keywordsËØ•ÈÄâÈ°πÁöÑÁõÆÁöÑÊòØÔºöÊòØÂê¶ÂêØÁî®ÂØπSQL2011‰øùÁïôÂÖ≥ÈîÆÂ≠óÁöÑÊîØÊåÅ„ÄÇ ÂêØÁî®ÂêéÔºåÂ∞ÜÊîØÊåÅÈÉ®ÂàÜSQL2011‰øùÁïôÂÖ≥ÈîÆÂ≠ó„ÄÇËß£ÂÜ≥ÔºöÊ≥ï‰∏ÄÔºöÂºÉÁî®Ëøô‰∏™ÂÖ≥ÈîÆÂ≠óÔºåÊç¢‰∏™ÂêçÂ≠óÊ≥ï‰∫åÔºöÂºÉÁî®ÂØπ‰øùÁïôÂÖ≥ÈîÆÂ≠óÁöÑÊîØÊåÅÂú®conf‰∏ãÁöÑhive-site.xmlÈÖçÁΩÆÊñá‰ª∂‰∏≠‰øÆÊîπÈÖçÁΩÆÈÄâÈ°πÔºö&lt;property&gt; &lt;name&gt;hive.support.sql11.reserved.keywords&lt;/name&gt; &lt;value&gt;false&lt;/value&gt;&lt;/property&gt; Âà†Èô§Êï∞ÊçÆÂ∫ì DROP (DATABASE|SCHEMA) [IF EXISTS] database_name; ‰∏æ‰æãÔºö drop database attribute; ‰øÆÊîπÊï∞ÊçÆÂ∫ì(‰∫ÜËß£) ALTER (DATABASE|SCHEMA) database_name SET DBPROPERTIES (property_name=property_value, ‚Ä¶); ALTER (DATABASE|SCHEMA) database_name SET OWNER [USER|ROLE] user_or_role; ‰ΩøÁî®Êï∞ÊçÆÂ∫ì ÔºàËøõÂÖ•Êüê‰∏ÄÊï∞ÊçÆÂ∫ì„ÄÇÂ¶ÇÊûúÊ≤°ÊúâËøôÊ≠•Êìç‰ΩúÔºå‰ºöËøõÂÖ•ÈªòËÆ§defaultÊï∞ÊçÆÂ∫ìÔºâ USE database_name; ‰∏æ‰æãÔºö use attrÔºõ Ôºà3ÔºâÂàõÂª∫/Âà†Èô§/Ë°®ÔºàÈáçÁÇπÔºâ ÂàõÂª∫Ë°®ÔºàÈáçË¶ÅÔºÅÔºâ Êï∞ÊçÆÁ±ªÂûãÔºö data_type : primitive_type ÂéüÂßãÊï∞ÊçÆÁ±ªÂûã | array_type Êï∞ÁªÑ | map_type map | struct_type | union_type ‚Äì (Note: Available in Hive 0.7.0 and later) primitive_type : TINYINT | SMALLINT | INT | BIGINT | BOOLEAN | FLOAT | DOUBLE | DOUBLE PRECISION | STRING Âü∫Êú¨ÂèØ‰ª•ÊêûÂÆö‰∏ÄÂàá | BINARY | TIMESTAMP | DECIMAL | DECIMAL(precision, scale) | DATE | VARCHAR | CHAR array_type : ARRAY &lt; data_type &gt; map_type : MAP &lt; primitive_type, data_type &gt; struct_type : STRUCT &lt; col_name : data_type [COMMENT col_comment], ‚Ä¶&gt; union_type : UNIONTYPE &lt; data_type, data_type, ‚Ä¶ &gt; 1„ÄÅÂáÜÂ§áÊï∞ÊçÆ 1231,zshang,18,game-girl-book,stu_addr:beijing-work_addr:shanghai2,lishi,16,shop-boy-book,stu_addr:hunan-work_addr:shanghai3,wang2mazi,20,fangniu-eat,stu_addr:shanghai-work_addr:tianjing 2„ÄÅÂàõÂª∫Ë°® (Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆöËøõÂÖ•Êüê‰∏ÄÊï∞ÊçÆÂ∫ìÔºåÂ∞±‰ºöÂú®ÈªòËÆ§Êï∞ÊçÆÂ∫ì‰∏≠ÂàõÂª∫) 1234567891011create table log( id int, name string, age int, likes array&lt;string&gt;, address map&lt;string,string&gt; ) row format delimited fields terminated by &apos;,&apos; COLLECTION ITEMS TERMINATED by &apos;-&apos; map keys terminated by &apos;:&apos; lines terminated by &apos;\n&apos;; ÂØºÂÖ•Êï∞ÊçÆÔºàÂ±û‰∫éDML‰ΩÜÊòØ‰∏∫‰∫ÜÊºîÁ§∫ÈúÄË¶ÅÂú®Ê≠§Â∫îÁî®Ôºâ 123456LOAD DATA [LOCAL] INPATH &apos;filepath&apos; [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)] [LOCAL]:‰ªéÊú¨Âú∞ | Ëã•Êó†ÔºåÂàô‰∏∫‰ªéHDFS [OVERWRITE] Ôºö ‰ºöË¶ÜÁõñHiveË°®‰∏≠ÁöÑÊï∞ÊçÆ | Ëã•Êó†Âàô‰ºöËøΩÂä† [PARTITION....] Ôºö ÂàõÂª∫ÂàÜÂå∫ Â∞Ülog1Êñá‰ª∂‰∏≠ÁöÑÊï∞ÊçÆÂ°´Âä†Âà∞logË°®‰∏≠ Ôºàlog1‰∏≠Êï∞ÊçÆÁöÑÊ†ºÂºèË¶ÅÂíålogË°®Ê†ºÂºè‰øùÊåÅ‰∏ÄËá¥ÔºåÂê¶Âàô‰ºö‰π±ÔºõËã•Êñá‰ª∂Â∑≤Â≠òÂú®ÔºåÂàô‰ºöËá™Âä®ÈáçÂëΩÂêçÔºâ Êú¨Âú∞Âä†ËΩΩÔºàÁõ∏ÂΩì‰∫éÂ§çÂà∂ÔºâÊï∞ÊçÆÂà∞HiveÁöÑÂà∂ÂÆöË°®‰∏≠ 12&gt; LOAD DATA LOCAL INPATH &apos;/root/su/log1&apos; INTO TABLE log;&gt; HDFSÂä†ËΩΩÔºàÁõ∏ÂΩì‰∫éÂâ™ÂàáÔºâÊï∞ÊçÆÂà∞HiveÁöÑÂà∂ÂÆöË°®‰∏≠ 12&gt; LOAD DATA INPATH &apos;/root/su/log1&apos; INTO TABLE log ;&gt; Êü•ÁúãË°®‰∏≠Êï∞ÊçÆ 1234567&gt; ÂØπÊú¨Ë°®Êü•ËØ¢‰∏ç‰ºö‰∫ßÁîüMapReduce‰ªªÂä°&gt; hive&gt; select * from log;&gt; ‰ΩøÁî®ÂáΩÊï∞Êü•ËØ¢‰ºö‰∫ßÁîüMapReduce‰ªªÂä°&gt; hive&gt; select count(*) from log;&gt; Êü•ËØ¢Ë°®ÁöÑÂ≠óÊÆµ‰ø°ÊÅØ&gt; hive&gt; desc log;&gt; Á¨¨‰∏Ä‰∏™Êü•ËØ¢ÁªìÊûúÔºö 12341 zshang 18 [&quot;game&quot;,&quot;girl&quot;,&quot;book&quot;] &#123;&quot;stu_addr&quot;:&quot;beijing&quot;,&quot;work_addr&quot;:&quot;shanghai&quot;&#125;1 zhaoliu 18 [&quot;game&quot;,&quot;girl&quot;,&quot;book&quot;] &#123;&quot;stu_addr&quot;:&quot;beijing&quot;,&quot;work_addr&quot;:&quot;shanghai&quot;&#125;2 lishi 16 [&quot;shop&quot;,&quot;boy&quot;,&quot;book&quot;] &#123;&quot;stu_addr&quot;:&quot;hunan&quot;,&quot;work_addr&quot;:&quot;shanghai&quot;&#125;3 wang2mazi 20 [&quot;fangniu&quot;,&quot;eat&quot;] &#123;&quot;stu_addr&quot;:&quot;shanghai&quot;,&quot;work_addr&quot;:&quot;tianjing&quot;&#125; Á¨¨‰∫å‰∏™Êü•ËØ¢ÁªìÊûúÔºö 14 ÈôÑÂä†È¢ò Êü•ËØ¢Ë°®‰∏≠likesÂ≠óÊÆµ‰∏≠ÊúâgirlÁöÑ‰∫∫ 1hive&gt; select name from log2 where likes[1]=&quot;girl&quot;; Êü•ËØ¢Ë°®‰∏≠addressÂ≠óÊÆµÊúâstu_addr‰∏∫beijingÁöÑ‰∫∫ 1hive&gt; select name from log2 where address[&quot;stu_addr&quot;]=&quot;beijing&quot;; 3„ÄÅÂà†Èô§Ë°® 12&gt; DROP TABLE [IF EXISTS] table_name [PURGE];&gt; ‰∏æ‰æãÔºö ÔºàÁî®dropÂëΩ‰ª§Âà†Èô§Ë°®Ôºå‰ºöÂ∞ÜË°®‰∏≠Êï∞ÊçÆ‰∏ÄÂπ∂Âà†Èô§ÔºåÂÖ∂ÂØπÂ∫îÂú®MySQl‰∏≠ÁöÑË°®ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ‰πü‰ºöÈöè‰πãÂà†Èô§Ôºõ ‚Äã Áî®hdfsÂëΩ‰ª§Âà†Èô§Ë°®ÂØπÂ∫îÁöÑÊñá‰ª∂ÁõÆÂΩïÔºåË°®‰∏≠Êï∞ÊçÆ‰πü‰∏ÄÂπ∂Âà†Èô§Ôºå‰ΩÜÂÖ∂ÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ‰æùÁÑ∂‰øùÂ≠òÂú®My SQL‰∏äÔºå ‚Äã ÂÜçloadÊï∞ÊçÆÔºåÂèØÊÅ¢Â§çËØ•Ë°®Ôºâ 12&gt; drop table log1Ôºõ&gt; 123456&gt; hdfs dfs -rmr /user/hive_local/warehouse/attr.db/log1&gt; &gt; hive&gt; use attr;&gt; hive&gt; LOAD DATA LOCAL INPATH &apos;/root/su/log1&apos; INTO TABLE log1;&gt; &gt; ÂàõÂª∫Â§ñÈÉ®Ë°®ÔºàÈáçË¶ÅÔºâ Â§ñÈÉ®ÂÖ≥ÈîÆÂ≠óEXTERNALÂÖÅËÆ∏ÊÇ®ÂàõÂª∫‰∏Ä‰∏™Ë°®,Âπ∂Êèê‰æõ‰∏Ä‰∏™‰ΩçÁΩÆ,‰ª•‰æøhive‰∏ç‰ΩøÁî®Ëøô‰∏™Ë°®ÁöÑÈªòËÆ§‰ΩçÁΩÆ„ÄÇËøôÊñπ‰æøÂ¶ÇÊûú‰Ω†Â∑≤ÁªèÁîüÊàê‰∫ÜÊï∞ÊçÆÔºåÂΩìÂà†Èô§‰∏Ä‰∏™Â§ñÈÉ®Ë°®,Ë°®‰∏≠ÁöÑÊï∞ÊçÆ‰∏ç‰ºö‰ªéÊñá‰ª∂Á≥ªÁªü‰∏≠Âà†Èô§„ÄÇÂ§ñÈÉ®Ë°®ÊåáÂêë‰ªª‰ΩïHDFSÁöÑÂ≠òÂÇ®‰ΩçÁΩÆ,ËÄå‰∏çÊòØÂ≠òÂÇ®Âú®ÈÖçÁΩÆÂ±ûÊÄßÊåáÂÆöÁöÑÊñá‰ª∂Â§π hive.metastore.warehouse.dir;).‰∏≠ ÂàõÂª∫Ë°®Ôºö 1234567891011create EXTERNAL table log1( id int, name string, age int, likes array&lt;string&gt;, address map&lt;string,string&gt; ) row format delimited fields terminated by &apos;,&apos; COLLECTION ITEMS TERMINATED by &apos;-&apos; map keys terminated by &apos;:&apos; lines terminated by &apos;\n&apos;; Âä†ËΩΩÊï∞ÊçÆÔºö 1LOAD DATA LOCAL INPATH &apos;/root/su/log1&apos; INTO TABLE log1; Âà†Èô§Â§ñÈÉ®Ë°®ÔºàÁõ∏ÂΩì‰∫éÂà†Èô§ÁöÑÊòØË°®ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåËÄåË°®‰∏≠ÁöÑÊï∞ÊçÆËøò‰øùÂ≠òÔºâ 1drop table log1Ôºõ ÁªìÊûúÔºö hive&gt; show tables; Êó†log1 MySQl‰∏≠‰πüÊó†Ê≠§Ë°®ÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ ‰ΩÜÊòØÔºå Âú®HDFSÊñá‰ª∂Á≥ªÁªü‰∏≠ÔºåÊ≠§Ë°®Êï∞ÊçÆ‰æùÁÑ∂Â≠òÂú® ‰πüÂ∞±ÊòØËØ¥ÔºåËØçË°®ËøòÂèØ‰ª•ÊÅ¢Â§ç ÊÅ¢Â§çË°®Ôºö 1ÈáçÊñ∞ÂàõÂª∫log1Ë°®ÔºåËØ•Ë°®Âç≥ÂèØÊÅ¢Â§ç Ôºà4Ôºâ‰øÆÊîπË°®,Êõ¥Êñ∞ÔºåÂà†Èô§Êï∞ÊçÆ(Ëøô‰∫õÂæàÂ∞ëÁî®)ÈáçÂëΩÂêçË°® 1234&gt; ALTER TABLE table_name RENAME TO new_table_name;&gt; &gt; Eg: alter table meninem rename to jacke;&gt; Êõ¥Êñ∞Êï∞ÊçÆ 1UPDATE tablename SET column = value [, column = value ...][WHERE expression] Âà†Èô§Êï∞ÊçÆ 1DELETE FROM tablename [WHERE expression] 2„ÄÅDMLËØ≠Âè•ÔºàÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜËØ≠Ë®ÄÔºâÔºà1ÔºâÂÖ∑‰ΩìÂèÇËßÅÔºöhttps://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML ÈáçÁÇπÊòØÊï∞ÊçÆÂä†ËΩΩÂíåÊü•ËØ¢ÊèíÂÖ•ËØ≠Ê≥ï HiveÊï∞ÊçÆÊìç‰ΩúËØ≠Ë®ÄÔºàLanguageManual DML;)Ôºâ Ôºà2ÔºâÂõõÁßçÊèíÂÖ•/ÂØºÂÖ•Êï∞ÊçÆ(ÈáçË¶Å) Hive‰∏çËÉΩÂæàÂ•ΩÁöÑÊîØÊåÅÁî®insertËØ≠Âè•‰∏ÄÊù°‰∏ÄÊù°ÁöÑËøõË°åÊèíÂÖ•Êìç‰ΩúÔºå‰∏çÊîØÊåÅupdateÊìç‰Ωú„ÄÇÊï∞ÊçÆÊòØ‰ª•loadÁöÑÊñπÂºèÂä†ËΩΩÂà∞Âª∫Á´ãÂ•ΩÁöÑË°®‰∏≠„ÄÇÊï∞ÊçÆ‰∏ÄÊó¶ÂØºÂÖ•Â∞±‰∏çÂèØ‰ª•‰øÆÊîπ„ÄÇ 1234567create table log3( id int, name string, age int ) row format delimited fields terminated by &apos;,&apos; lines terminated by &apos;\n&apos;; 1.Áõ¥Êé•Âä†ËΩΩÊï∞ÊçÆ12LOAD DATA [LOCAL] INPATH &apos;filepath&apos; [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)]load data local inpath &apos;/root/su/log1&apos; into table log1; 2.Â∞ÜË°®1Êü•ËØ¢ÁªìÊûúÊèíÂÖ•Ë°®2Ê≥®ÊÑèÔºöÊü•ËØ¢ÁªìÊûúÁöÑÂ≠óÊÆµ‰∏™Êï∞„ÄÅÁ±ªÂûã Ë¶Å‰∏éÊèíÂÖ•ÁöÑË°®ÁöÑÂ≠óÊÆµ‰∏Ä ‰∏ÄÂåπÈÖçÂØπÂ∫î 1234567ÂàõÂª∫person2Ë°®ÔºåÁÑ∂Âêé‰ªéË°®person1Êü•ËØ¢Êï∞ÊçÆÂØºÂÖ•ÔºöË¶ÜÁõñÔºöINSERT OVERWRITE TABLE person2 [PARTITION(dt=&apos;2008-06-08&apos;, country)] SELECT id,name, age From ppt;ËøΩÂä†ÔºöINSERT INTO TABLE log3 SELECT id,name, age From log; 3.Â∞ÜË°®1„ÄÅË°®2Êü•ËØ¢ÁªìÊûúÊèíÂÖ•Ë°®3„ÄÅË°®4Ê≥®ÊÑèÔºöÊü•ËØ¢ÁªìÊûúÁöÑÂ≠óÊÆµ‰∏™Êï∞„ÄÅÁ±ªÂûã Ë¶Å‰∏éÊèíÂÖ•ÁöÑË°®ÁöÑÂ≠óÊÆµ‰∏Ä ‰∏ÄÂåπÈÖçÂØπÂ∫î 1234567891011121314FROM person t1INSERT OVERWRITE | INTO TABLE person1 [PARTITION(dt=&apos;2008-06-08&apos;, country)] SELECT t1.id, t1.name, t1.age ; FROM log t1,log1 t2 INSERT OVERWRITE TABLE log4 SELECT t1.id,t1.name,t2.age ; ÊòØÂê¶Â≠òÂú®Á¨õÂç°Â∞îÁßØÔºöÔºüÔºüÔºüÔºüÂ≠òÂú®„ÄÇ ‰∏∫‰∫ÜÈò≤Ê≠¢Á¨õÂç°Â∞îÁßØÔºö FROM log t1,log1 t2 INSERT OVERWRITE TABLE log4 SELECT t1.id,t1.name,t2.age where t1.id =t2.id; 1234„ÄêfromÊîæÂâçÈù¢Â•ΩÂ§ÑÂ∞±ÊòØÂêéÈù¢ÂèØ‰ª•ÊèíÂÖ•Â§öÊù°ËØ≠Âè• „ÄëFROM abc t1,sufei t2 INSERT OVERWRITE TABLE qidu SELECT t1.id,t1.name,t1.age,t2.likes,t2.address ; 12345FROM abc t1,sufei t2 INSERT OVERWRITE TABLE qidu SELECT t1.id,t1.name,t1.age,t1.likes,t1.address where‚Ä¶INSERT OVERWRITE TABLE wbb SELECT t2.id,t2.name,t2.age,t2.likes,t2.address where‚Ä¶; 4.Áõ¥Êé•ÂàóÂá∫Êï∞ÊçÆÊèíÂÖ•Ë°®‰∏≠ÔºàÂ§ßÈáèÊï∞ÊçÆÊó∂‰∏çÊé®ËçêÔºâÊ≥®ÊÑèÔºöÊü•ËØ¢ÁªìÊûúÁöÑÂ≠óÊÆµ‰∏™Êï∞„ÄÅÁ±ªÂûã Ë¶Å‰∏éÊèíÂÖ•ÁöÑË°®ÁöÑÂ≠óÊÆµ‰∏Ä ‰∏ÄÂåπÈÖçÂØπÂ∫î 12INSERT INTO TABLE students VALUES (1,&apos;zs&apos;,18,&apos;boy&apos;,&apos;beijng&apos;),(2,&apos;wh&apos;,&apos;girl&apos;,&apos;stu_addr&apos;:shanghai&apos;); Êú¨Âú∞loadÊï∞ÊçÆÂíå‰ªéHDFS‰∏äloadÂä†ËΩΩÊï∞ÊçÆÁöÑËøáÁ®ãÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü Êú¨Âú∞Ôºö local ‰ºöËá™Âä®Â§çÂà∂Âà∞HDFS‰∏äÁöÑhiveÁöÑ**ÁõÆÂΩï‰∏ã HdfsÂØºÂÖ• ÂêéÁßªÂä®Âà∞hiveÁöÑ**ÁõÆÂΩï‰∏ã Ôºà3ÔºâÊü•ËØ¢Êï∞ÊçÆÂπ∂‰øùÂ≠ò ‰øùÂ≠òÊï∞ÊçÆÂà∞Êú¨Âú∞Ôºö 123456789101112insert overwrite local directory &apos;/opt/datas/hive_exp_emp2&apos; ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos; select * from db_1128.emp ;ÁïôÊÑè‰∏§ÁßçÁöÑÂå∫Âà´Ôºö‰øùÂ≠òÁöÑÊï∞ÊçÆÊ†ºÂºèinsert overwrite local directory &apos;/sun/temp/hive_save1&apos; row format delimited fields terminated by &apos;,&apos; COLLECTION ITEMS TERMINATED by &apos;-&apos; map keys terminated by &apos;:&apos; select * from log2 ; ËøôÈáåÂ¶ÇÊûúÂ∞Ü overwrite Êîπ‰∏∫into ‰ºöÊä•Èîô„ÄÇ 12//Êü•ÁúãÊï∞ÊçÆ!cat /sun/temp/hive_save1/000000_0; ‰øùÂ≠òÊï∞ÊçÆÂà∞HDFS‰∏äÔºö 12345678910insert overwrite directory &apos;/user/beifeng/hive/hive_exp_emp&apos; select * from db_1128.emp ;insert overwrite directory &apos;/sun/hive/temp/hive_save1&apos; row format delimited fields terminated by &apos;,&apos; COLLECTION ITEMS TERMINATED by &apos;-&apos; map keys terminated by &apos;:&apos; select * from log2 ; ËøôÈáåÂ¶ÇÊûúÂ∞Ü overwrite Êîπ‰∏∫into ‰ºöÊä•Èîô„ÄÇ Âú®Â§ñÈÉ®shell‰∏≠Â∞ÜÊï∞ÊçÆÈáçÂÆöÂêëÂà∞Êñá‰ª∂‰∏≠Ôºö 123(Ê≥®ÊÑèÔºöÈúÄË¶ÅÊåáÊòéÊòØÂì™‰∏™Êï∞ÊçÆÂ∫ìÁöÑË°®)# hive -e &quot;select * from attr.log;&quot; &gt; /sun/hive/temp/hive_save2# cat /sun/hive/temp/hive_save2 Ôºà4ÔºâÂ§á‰ªΩÊï∞ÊçÆÊàñËøòÂéüÊï∞ÊçÆÔºàÂú®HDFS‰∏äÔºâ Â§á‰ªΩÊï∞ÊçÆÔºàÂåÖÊã¨Ë°®ÁöÑÂÖÉÊï∞ÊçÆÂíåË°®‰∏≠ÁöÑÊï∞ÊçÆÔºâÔºö 1EXPORT TABLE log to &apos;/sun/hive/datas/export/cp1&apos; Âà†Èô§ÂÜçËøòÂéüÊï∞ÊçÆÔºö 12345ÂÖàÂà†Èô§Ë°®„ÄÇdrop table log;show tables ;ÂÜçËøòÂéüÊï∞ÊçÆÔºöIMPORT FROM &apos;/sun/hive/datas/export/cp1&apos; ; Ôºà5ÔºâÂÖ∂‰ªñHqlÊìç‰ΩúHiveÁöÑgroup by\join(left join right joinÁ≠â)\having\sort by \order byÁ≠âÊìç‰ΩúÂíåMySQLÊ≤°Êúâ‰ªÄ‰πàÂ§ßÁöÑÂå∫Âà´Ôºöhttp://www.2cto.com/kf/201609/545560.html 3„ÄÅHive SerDeÔºàÂ∫èÂàóÂåñ„ÄÅÂèçÂ∫èÂàóÂåñÔºâ(1)ÂÆö‰πâHive SerDe - Serializer and Deserializer SerDe Áî®‰∫éÂÅöÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ„ÄÇ ÊûÑÂª∫Âú®Êï∞ÊçÆÂ≠òÂÇ®ÂíåÊâßË°åÂºïÊìé‰πãÈó¥ÔºåÂØπ‰∏§ËÄÖÂÆûÁé∞Ëß£ËÄ¶„ÄÇ ÂØπÊï∞ÊçÆÂÆûÁé∞Â∫èÂàóÂåñÔºåÊ∏ÖÊ¥óÊï∞ÊçÆÔºå‰Ωø‰πãÊàê‰∏∫ÊúâÊïàÊï∞ÊçÆÂπ∂Âä†ËΩΩ„ÄÇ HiveÈÄöËøáROW FORMAT DELIMITED‰ª•ÂèäSERDEËøõË°åÂÜÖÂÆπÁöÑËØªÂÜô„ÄÇ Ôºà2ÔºâÂÆûÁé∞1234567row_format: DELIMITED [FIELDS TERMINATED BY char [ESCAPED BY char]] [COLLECTION ITEMS TERMINATED BY char] [MAP KEYS TERMINATED BY char] [LINES TERMINATED BY char] : SERDE serde_name [WITH SERDEPROPERTIES (property_name=property_value, property_name=property_value, ...)] 1234567891011121314151617181920212223242526272829303132HiveÊ≠£ÂàôÂåπÈÖçÔºàÂÆûÁé∞Êï∞ÊçÆÊ∏ÖÊ¥óÔºâÂàõÂª∫Ë°® logtblÔºö CREATE TABLE logtbl ( host STRING, identity STRING, t_user STRING, time STRING, request STRING, referer STRING, agent STRING) ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.RegexSerDe&apos; WITH SERDEPROPERTIES ( &quot;input.regex&quot;=&quot;([^ ]*) ([^ ]*) ([^ ]*) \\[(.*)\\] \&quot;(.*)\&quot; (-|[0-9]*) (-|[0-9]*)&quot;) STORED AS TEXTFILE; Âä†ËΩΩÊï∞ÊçÆ:load data local inpath &apos;/root/su/localhost_access_log.2016-02-29&apos; into table logtbl;Êü•ÁúãÊï∞ÊçÆÔºöselect * from logtbl;ÊòæÁ§∫Ôºö192.168.57.4 - - 29/Feb/2016:18:14:35 +0800 GET /bg-upper.png HTTP/1.1 304 -192.168.57.4 - - 29/Feb/2016:18:14:35 +0800 GET /bg-nav.png HTTP/1.1 304 -192.168.57.4 - - 29/Feb/2016:18:14:35 +0800 GET /asf-logo.png HTTP/1.1 304 -...(ÁúÅÁï•„ÄÇ„ÄÇ„ÄÇ) Ë°®Êï∞ÊçÆËßÅÊï∞ÊçÆÊñá‰ª∂Ôºölocalhost_access_log.2016-02-29.txt 12345678910111213141516171819202122192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /bg-upper.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /bg-nav.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /asf-logo.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /bg-button.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:35 +0800] &quot;GET /bg-middle.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11217192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11217192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.css HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /asf-logo.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-middle.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-button.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-nav.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-upper.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11217192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.css HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11217192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.css HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /tomcat.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-button.png HTTP/1.1&quot; 304 -192.168.57.4 - - [29/Feb/2016:18:14:36 +0800] &quot;GET /bg-upper.png HTTP/1.1&quot; 304 - ‰∫î„ÄÅBeelineÂíåHiveserver2ÔºàHiveÁöÑÂçáÁ∫ßÔºâ1„ÄÅHiveserver2Áõ¥Êé•ÂêØÂä®ÔºàÂè™ËÉΩÂú®ÊúçÂä°Á´ØÂêØÂä®ÔºåÁõ∏ÂΩì‰∫éÊúçÂä°Á´ØÔºâ1# ./hiveserver2 Ëã•Â∑≤ÁªèÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèÂàôÂêØÂä®ÊñπÂºè‰∏∫Ôºö 1# hivesever2 2„ÄÅÂêØÂä® beelineÔºàÂèØÂú®ÊúçÂä°Á´Ø|ÂÆ¢Êà∑Á´ØÂêØÂä®ÔºåÁõ∏ÂΩì‰∫éÂÆ¢Êà∑Á´ØÔºâ Âõ†‰∏∫beelineÊòØÂú®HiveÂÆâË£ÖÁõÆÂΩïÁöÑ/bin‰∏ãÔºåÊâÄ‰ª•Âè™Ë¶ÅÊúâhiveÂåÖÈÉΩÂèØ‰ª•ÂêØÂä® 1234567891011121314151617181920212223242526272829303132333435363738# ./beelinebeeline&gt; !connect jdbc:hive2://node00:10000 root 123456ÊòæÁ§∫ÔºöConnecting to jdbc:hive2://node00:10000Connected to: Apache Hive (version 1.2.1)Driver: Hive JDBC (version 1.2.1)Transaction isolation: TRANSACTION_REPEATABLE_READ0: jdbc:hive2://node00:10000&gt;‰ΩøÁî®ÔºöÂàóÂá∫Êï∞ÊçÆÂ∫ì0: jdbc:hive2://node00:10000&gt; show databases;+----------------+--+| database_name |+----------------+--+| attr || attribute || default |+----------------+--+3 rows selected (7.493 seconds)0: jdbc:hive2://node00:10000&gt;ËÄåÂú®ÊúçÂä°Á´ØÔºöÊòæÁ§∫Ôºö[root@node00 ~]# hiveserver219/01/07 08:52:09 WARN conf.HiveConf: HiveConf of name hive.metastore.local does not existOKOKOKOKÈÄÄÂá∫ÔºöÊúçÂä°Á´ØÔºöctrl + cÂÆ¢Êà∑Á´ØÔºöÔºÅquitÔºõ Êàñ ctrl + c‰ΩúÁî®ÔºöÂØπÊìç‰ΩúÁªìÊûúÊ∑ªÂä†‰∫ÜÁæéÂåñ„ÄÇ‰∏çËøá‰∏çÂ§™Â∏∏Áî®ÔºåËÄóÂÜÖÂ≠òÔºåÊï∞ÊçÆÂ§ßÁöÑÊó∂ÂÄôÔºåËøòÂΩ±ÂìçÈ°µÈù¢„ÄÇ ÂÖ≠„ÄÅHiveÁöÑJDBC ‰∏ÄËà¨ÊòØÂπ≥Âè∞‰ΩøÁî®Â±ïÁ§∫ÊàñÊé•Âè£ÔºåÊúçÂä°Á´ØÂêØÂä®hiveserver2ÂêéÔºåÂú®java‰ª£Á†Å‰∏≠ÈÄöËøáË∞ÉÁî®hiveÁöÑjdbcËÆøÈóÆÈªòËÆ§Á´ØÂè£10000ËøõË°åËøûÊé•„ÄÅËÆøÈóÆ 12345678910111213141516171819public class HivejdbcClient &#123; private static String driverName = "org.apache.hive.jdbc.HiveDriver"; public static void main(String[] args)&#123; try&#123; Class.forName(driverName); &#125;catch (ClassNotFoundException)&#123; e.printStackTrace(); System.exit(1); &#125;// repalace "hive" here with the name of user the queries should run as Connection con = DriverManager.getConnection("jdbc:hive2://node00:10000/default","root","123456"); Statement stmt = con.createStatement(); String sql = "select * from log limit 0"; ResultSet rs = stmt.executeQuery(sql); while(rs.next())&#123; System.out.println(rs.getInt(1)+"-"+rs.getString("name")); &#125; &#125;&#125; ‰∏É„ÄÅHiveÂàÜÂå∫‰∏éËá™ÂÆö‰πâÂáΩÊï∞UDF UDAF UDTF1„ÄÅHiveÁöÑÂàÜÂå∫partitionÔºàÈáçË¶ÅÔºâ ÂäüËÉΩÔºö ‰∏∫‰∫ÜÊñπ‰æøÊµ∑ÈáèÊï∞ÊçÆÁöÑÁÆ°ÁêÜÂíåÊü•ËØ¢ÔºåÂèØ‰ª•ÂØπÊï∞ÊçÆÂª∫Á´ãÂàÜÂå∫ÔºàÂèØÊåâÊó•Êúü„ÄÅÈÉ®Èó®„ÄÅÁ±ªÂûãÁ≠âÂÖ∑‰Ωì‰∏öÂä°Ôºâ„ÄÇËøõË°åÂàÜÈó®Âà´Á±ªÁöÑÁÆ°ÁêÜ„ÄÇ Ê≥®ÊÑèÔºö ÂøÖÈ°ªÂú®ÂÆö‰πâË°®ÁöÑÊó∂ÂÄôÂàõÂª∫partitionÂàÜÂå∫ Â≠òÂÇ®Êï∞ÊçÆÊó∂ÔºåÊ∑ªÂä†ÂàÜÂå∫Â≠óÊÆµÁöÑÊï∞ÊçÆÔºåÁõ¥Êé•Â∞ÜÊï∞ÊçÆÊåâÂàÜÂå∫ËøõË°åÂ≠òÂÇ®„ÄÇ Ê∑ªÂä†ÂàÜÂå∫Êó∂Ôºö ‚Äã Êó∂Èó¥ÁöÑÊ†ºÂºèÔºö/ Ôºö Â≠òÂÇ®Êó∂‰ºö‰π±Á†ÅÔºåÁî® - ‰∏ç‰ºö„ÄÇ ‚Äã ÈúÄË¶ÅÊåáÂÆöÂàÜÂå∫ ‚Äã Â§ö‰∏™ÂàÜÂå∫Êó∂ÔºåÂ≠òÂú®Áà∂Â≠êÁõÆÂΩïÂÖ≥Á≥ªÔºåÊåâÈ°∫Â∫èÂØπÂ∫îÔºåÂØπÂ∫îÁà∂Â≠ê ‚Äã ÂàõÂª∫Ë°®Êó∂ÔºåÂ∑≤ÁªèÊåáÂÆöÂàÜÂå∫‰∏™Êï∞ÔºåÂ∞±Âè™ËÉΩÂ°´Âä†ÊåáÂÆö‰∏™Êï∞ÁöÑÂ≠óÊÆµÊï∞ÊçÆ Âà†Èô§ÂàÜÂå∫Êó∂Ôºö ‚Äã Ëã•ËØ•ÂàÜÂå∫ÊòØÁà∂ÂàÜÂå∫ÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠êÂå∫ÔºåÂàôÁà∂ÂàÜÂå∫‰πü‰ºöË¢´Âà†Èô§ ‚Äã Ëã•Âà†Èô§Áà∂ÂàÜÂå∫ÔºåÂÖ∂ÊâÄÊúâÂ≠êÂàÜÂå∫‰πüÈÉΩ‰ºöÂ§áÂà†Èô§ ‚Äã Ëã•Âà†Èô§ÁöÑÂàÜÂå∫ÔºåÂàÜÂà´Âú®Â§ö‰∏™‰∏çÂêåÁà∂ÂàÜÂå∫‰∏≠Â≠òÂú®ÔºåÂàôÈÉΩ‰ºöË¢´Âà†Èô§ ÈáçÂëΩÂêçÂàÜÂå∫Êó∂Ôºö ‚Äã ‰øÆÊîπ‰πãÂêéÁöÑÂêçÂ≠ó‰∏çËÉΩÊòØÂ∑≤ÁªèÂ≠òÂú®ÁöÑ Ê≥®ÊÑèÔºöÂú®ÂàõÂª∫ Âà†Èô§Â§öÂàÜÂå∫Á≠âÊìç‰ΩúÊó∂‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèÂàÜÂå∫ÁöÑÂÖàÂêéÈ°∫Â∫èÔºå‰ªñ‰ª¨ÊòØÁà∂Â≠êËäÇÁÇπÁöÑÂÖ≥Á≥ª„ÄÇÂàÜÂå∫Â≠óÊÆµ‰∏çË¶ÅÂíåË°®Â≠óÊÆµÁõ∏Âêå Á±ªÂà´Ôºö ÂçïÂàÜÂå∫ÂíåÂ§öÂàÜÂå∫ ÈùôÊÄÅÂàÜÂå∫ÂíåÂä®ÊÄÅÂàÜÂå∫ Ôºà1ÔºâÂàõÂª∫ÂàÜÂå∫ ÂçïÂàÜÂå∫Âª∫Ë°® 123456create table day_table(id int, content string) partitioned by (dt string) row format delimited fields terminated by &apos;,&apos;; Ê≥®ÊÑèÔºö„ÄêÂçïÂàÜÂå∫Ë°®ÔºåÊåâÂ§©ÂàÜÂå∫ÔºåÂú®Ë°®ÁªìÊûÑ‰∏≠Â≠òÂú®idÔºåcontentÔºådt‰∏âÂàóÔºõ‰ª•dt‰∏∫Êñá‰ª∂Â§πÂå∫ÂàÜ„Äë ÂèåÂàÜÂå∫Âª∫Ë°® 123456create table day_hour_table (id int,content string) partitioned by (dt string, hour string) row format delimited fields terminated by &apos;,&apos;; Ê≥®ÊÑèÔºö „ÄêÂèåÂàÜÂå∫Ë°®ÔºåÊåâÂ§©ÂíåÂ∞èÊó∂ÂàÜÂå∫ÔºåÂú®Ë°®ÁªìÊûÑ‰∏≠Êñ∞Â¢ûÂä†‰∫ÜdtÂíåhour‰∏§ÂàóÔºõÂÖà‰ª•dt‰∏∫Êñá‰ª∂Â§πÔºåÂÜç‰ª•hourÂ≠êÊñá‰ª∂Â§πÂå∫ÂàÜ„Äë Ôºà2ÔºâÊ∑ªÂä†ÂàÜÂå∫Ë°®ÁöÑÂàÜÂå∫ÔºàË°®Â∑≤ÂàõÂª∫ÔºåÂú®Ê≠§Âü∫Á°Ä‰∏äÊ∑ªÂä†ÂàÜÂå∫ÔºöÊåâ‰ªÄ‰πàÂàÜÂå∫ÔºâÔºö Ê≥®ÊÑèÔºöÊä•ÈîôÔºöÊ≠§Êó∂Ê∑ªÂä†ÔºåË¶ÅÊ≥®ÊÑèÂàÜÂå∫ÁöÑ‰∏™Êï∞Áõ∏ÂØπÂ∫îÔºåÂê¶Âàô‰ºöÊä•ÈîôÔºö 1FAILED: ValidationFailureSemanticException Partition spec &#123;dt=2008-08-08, hour=08&#125; contains non-partition columns Ê≥®ÊÑèÔºöÊä•ÈîôÊ≠§Êó∂Ê∑ªÂä†ÔºåË¶ÅÊ≥®ÊÑèÂàÜÂå∫ÁöÑÂ≠óÊÆµÂêçË¶ÅÂØπÂ∫îÊ∑ªÂä†ÔºåÂê¶Âàô‰ºö‰øùÂ¶Ç‰∏ãÈîôËØØÔºö 1FAILED: ValidationFailureSemanticException Partition spec &#123;d=2008-08-08&#125; contains non-partition columns Ê≥®ÊÑèÔºö‰∏ÄÂÆöÊòØÂ≠òÂú®ÂàÜÂå∫ÔºåÊâçÂèØÊ∑ªÂä† Ê∑ªÂä†ÂàÜÂå∫Ôºö 12ALTER TABLE table_nameADD partition_spec [ LOCATION &apos;location1&apos; ] partition_spec [ LOCATION &apos;location2&apos; ] ... 123‰æãÔºö ALTER TABLE day_table ADD PARTITION (dt=&apos;2028-08-08&apos;, hour=&apos;08&apos;);ALTER TABLE day_table ADD PARTITION (dt=&apos;2028-08-08&apos;); Ôºà3ÔºâÂà†Èô§ÂàÜÂå∫ËØ≠Ê≥ïÔºöÔºà‚Äì Áî®Êà∑ÂèØ‰ª•Áî® ALTER TABLE DROP PARTITION Êù•Âà†Èô§ÂàÜÂå∫„ÄÇÂàÜÂå∫ÁöÑÂÖÉÊï∞ÊçÆÂíåÊï∞ÊçÆÂ∞ÜË¢´‰∏ÄÂπ∂Âà†Èô§„ÄÇÔºâ Âà†Èô§Â¶ÇÂèåÂàÜÂå∫‰∏≠ÁöÑÂ≠êÁ∫ßÂàÜÂå∫Êó∂ÔºåÂ¶ÇÊûú‰ªÖÂâ©‰∏Ä‰∏™Â≠êÂàÜÂå∫ÔºåÈÇ£‰πàÁà∂Á∫ßÂàÜÂå∫‰πü‰ºöË¢´Âà†Èô§„ÄÇÔºàËøûÂùêÔºâ 1ALTER TABLE table_name DROP partition_spec, partition_spec,... 1234‰æãÔºöALTER TABLE day_hour_table DROP PARTITION (dt=&apos;2008-08-08&apos;, hour=&apos;08&apos;);ALTER TABLE day_hour_table DROP PARTITION (dt=&apos;2008-08-08&apos;); Ôºà4ÔºâÊï∞ÊçÆÂä†ËΩΩËøõÂàÜÂå∫Ë°®‰∏≠ËØ≠Ê≥ïÔºö 1LOAD DATA [LOCAL] INPATH &apos;filepath&apos; [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1,partcol2=val2 ...)] 12345HDFSÔºöLOAD DATA INPATH &apos;/user/pv.txt&apos; INTO TABLE day_hour_table PARTITION(dt=&apos;2008-08-08&apos;, hour=&apos;08&apos;);Êú¨Âú∞ÔºöLOAD DATA local INPATH &apos;/user/hua/*&apos; INTO TABLE day_hour partition(dt=&apos;2010-07-07&apos;); Ôºà5ÔºâÊü•ÁúãË°®ÁöÑÊâÄÊúâÂàÜÂå∫123hive&gt; show partitions day_hour_table;show partitions day_table; Ôºà6ÔºâÈáçÂëΩÂêçÂàÜÂå∫ËØ≠Ê≥ïÔºö 1ALTER TABLE table_name PARTITION partition_spec RENAME TO PARTITION partition_spec; 12‰æãÔºöALTER TABLE day_table PARTITION (tian=&apos;2018-05-01&apos;) RENAME TO PARTITION (tain=&apos;2018-06-01&apos;); HiveÁöÑÂáΩÊï∞ËØæÂèÇËÄÉÂÆòÁΩëÔºåÁî®Êó∂Êü•ÈòÖÂç≥ÂèØÔºö https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF Ôºà7ÔºâÂä®ÊÄÅÂàÜÂå∫(ÈáçË¶Å)‚ÄìÊ≥®ÊÑèÂ§ñÈÉ®Ë°® Âú®Êú¨Âú∞Êñá‰ª∂/home/grid/a.txt‰∏≠ÂÜôÂÖ•‰ª•‰∏ã4Ë°åÊï∞ÊçÆ aaa,US,CA aaa,US,CB bbb,CA,BB bbb,CA,BC Âª∫Á´ãÈùûÂàÜÂå∫Ë°®Âπ∂Âä†ËΩΩÊï∞ÊçÆ ÂàõÂª∫Ë°® 123456CREATE TABLE info1 ( name STRING, cty STRING, st STRING) ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;; Âä†ËΩΩÊï∞ÊçÆ 1LOAD DATA LOCAL INPATH &apos;/root/su/a&apos; INTO TABLE info1; Êü•Áúã 1SELECT * FROM info1; Âª∫Á´ãÂ§ñÈÉ®ÂàÜÂå∫Ë°®Âπ∂Âä®ÊÄÅÂä†ËΩΩÊï∞ÊçÆ ÔºàÊ≥®ÊÑèÂà†Èô§Â§ñÈÉ®Ë°®ÁöÑÁõ∏ÂÖ≥‰∫ãÈ°πÔºâ 123456&gt; CREATE EXTERNAL TABLE info2 (&gt; name STRING&gt; ) &gt; PARTITIONED BY (country STRING, state STRING); &gt; &gt; ËøôÊó∂ÂÄôÂ∞±ÈúÄË¶Å‰ΩøÁî®Âä®ÊÄÅÂàÜÂå∫Êù•ÂÆûÁé∞Ôºå‰ΩøÁî®Âä®ÊÄÅÂàÜÂå∫ÈúÄË¶ÅÊ≥®ÊÑèËÆæÂÆö‰ª•‰∏ãÂèÇÊï∞Ôºö hive.exec.dynamic.partition ÈªòËÆ§ÂÄºÔºöfalse ÊòØÂê¶ÂºÄÂêØÂä®ÊÄÅÂàÜÂå∫ÂäüËÉΩÔºåÈªòËÆ§falseÂÖ≥Èó≠„ÄÇ ‰ΩøÁî®Âä®ÊÄÅÂàÜÂå∫Êó∂ÂÄôÔºåËØ•ÂèÇÊï∞ÂøÖÈ°ªËÆæÁΩÆÊàêtrue; hive.exec.dynamic.partition.mode ÈªòËÆ§ÂÄºÔºöstrict Âä®ÊÄÅÂàÜÂå∫ÁöÑÊ®°ÂºèÔºåÈªòËÆ§strictÔºåË°®Á§∫ÂøÖÈ°ªÊåáÂÆöËá≥Â∞ë‰∏Ä‰∏™ÂàÜÂå∫‰∏∫ÈùôÊÄÅÂàÜÂå∫ÔºånonstrictÊ®°ÂºèË°®Á§∫ÂÖÅËÆ∏ÊâÄÊúâÁöÑÂàÜÂå∫Â≠óÊÆµÈÉΩÂèØ‰ª•‰ΩøÁî®Âä®ÊÄÅÂàÜÂå∫„ÄÇ ‰∏ÄËà¨ÈúÄË¶ÅËÆæÁΩÆ‰∏∫nonstrict hive.exec.max.dynamic.partitions.pernode ÈªòËÆ§ÂÄºÔºö100 Âú®ÊØè‰∏™ÊâßË°åMRÁöÑËäÇÁÇπ‰∏äÔºåÊúÄÂ§ßÂèØ‰ª•ÂàõÂª∫Â§öÂ∞ë‰∏™Âä®ÊÄÅÂàÜÂå∫„ÄÇ ËØ•ÂèÇÊï∞ÈúÄË¶ÅÊ†πÊçÆÂÆûÈôÖÁöÑÊï∞ÊçÆÊù•ËÆæÂÆö„ÄÇ ÊØîÂ¶ÇÔºöÊ∫êÊï∞ÊçÆ‰∏≠ÂåÖÂê´‰∫Ü‰∏ÄÂπ¥ÁöÑÊï∞ÊçÆÔºåÂç≥dayÂ≠óÊÆµÊúâ365‰∏™ÂÄºÔºåÈÇ£‰πàËØ•ÂèÇÊï∞Â∞±ÈúÄË¶ÅËÆæÁΩÆÊàêÂ§ß‰∫é365ÔºåÂ¶ÇÊûú‰ΩøÁî®ÈªòËÆ§ÂÄº100ÔºåÂàô‰ºöÊä•Èîô„ÄÇ hive.exec.max.dynamic.partitions ÈªòËÆ§ÂÄºÔºö1000 Âú®ÊâÄÊúâÊâßË°åMRÁöÑËäÇÁÇπ‰∏äÔºåÊúÄÂ§ß‰∏ÄÂÖ±ÂèØ‰ª•ÂàõÂª∫Â§öÂ∞ë‰∏™Âä®ÊÄÅÂàÜÂå∫„ÄÇ Âêå‰∏äÂèÇÊï∞Ëß£Èáä„ÄÇ hive.exec.max.created.files ÈªòËÆ§ÂÄºÔºö100000 Êï¥‰∏™MR Job‰∏≠ÔºåÊúÄÂ§ßÂèØ‰ª•ÂàõÂª∫Â§öÂ∞ë‰∏™HDFSÊñá‰ª∂„ÄÇ ‰∏ÄËà¨ÈªòËÆ§ÂÄºË∂≥Â§ü‰∫ÜÔºåÈô§Èùû‰Ω†ÁöÑÊï∞ÊçÆÈáèÈùûÂ∏∏Â§ßÔºåÈúÄË¶ÅÂàõÂª∫ÁöÑÊñá‰ª∂Êï∞Â§ß‰∫é100000ÔºåÂèØÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµÂä†‰ª•Ë∞ÉÊï¥„ÄÇ hive.error.on.empty.partition ÈªòËÆ§ÂÄºÔºöfalse ÂΩìÊúâÁ©∫ÂàÜÂå∫ÁîüÊàêÊó∂ÔºåÊòØÂê¶ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ ‰∏ÄËà¨‰∏çÈúÄË¶ÅËÆæÁΩÆ„ÄÇ 1234567891011set hive.exec.dynamic.partition=true; set hive.exec.dynamic.partition.mode=nonstrict; set hive.exec.max.dynamic.partitions.pernode=1000; INSERT INTO TABLE info2 PARTITION (country, state) SELECT name, cty, st FROM info1; INSERT INTO TABLE info2 PARTITION (country, state) SELECT name, cty, st FROM info1; SELECT * FROM info2; 2„ÄÅËá™ÂÆö‰πâÂáΩÊï∞UDF UDAF UDTF Ëá™ÂÆö‰πâÂáΩÊï∞ÂåÖÊã¨‰∏âÁßç UDF„ÄÅUDAF„ÄÅUDTF UDFÔºö‰∏ÄËøõ‰∏ÄÂá∫ UDAFÔºöËÅöÈõÜÂáΩÊï∞ÔºåÂ§öËøõ‰∏ÄÂá∫„ÄÇÂ¶ÇÔºöCount/max/min UDTFÔºö‰∏ÄËøõÂ§öÂá∫ÔºåÂ¶Ç lateralview explore()ÔºåÔºàÁ±ª‰ºº‰∫émysql‰∏≠ÁöÑËßÜÂõæÔºâ ‰ΩøÁî®ÊñπÂºè ÔºöÂú®HIVE‰ºöËØù‰∏≠addËá™ÂÆö‰πâÂáΩÊï∞ÁöÑjar Êñá‰ª∂ÔºåÁÑ∂ÂêéÂàõÂª∫ function ÁªßËÄå‰ΩøÁî®ÂáΩÊï∞ Ôºà1ÔºâUDF ÂºÄÂèëÔºàÁî®ÁöÑÂ§ö‰∏ÄÁÇπÔºâ1„ÄÅUDFÂáΩÊï∞ÂèØ‰ª•Áõ¥Êé•Â∫îÁî®‰∫é select ËØ≠Âè•ÔºåÂØπÊü•ËØ¢ÁªìÊûÑÂÅöÊ†ºÂºèÂåñÂ§ÑÁêÜÂêéÔºåÂÜçËæìÂá∫ÂÜÖÂÆπ„ÄÇ 2„ÄÅÁºñÂÜô UDF ÂáΩÊï∞ÁöÑÊó∂ÂÄôÈúÄË¶ÅÊ≥®ÊÑè‰∏Ä‰∏ãÂá†ÁÇπÔºö aÔºâËá™ÂÆö‰πâ UDF ÈúÄË¶ÅÁªßÊâø org.apache.hadoop.hive.ql.UDF„ÄÇ bÔºâÈúÄË¶ÅÂÆûÁé∞ evaluate ÂáΩÊï∞Ôºåevaluate ÂáΩÊï∞ÊîØÊåÅÈáçËΩΩ„ÄÇ 3„ÄÅÊ≠•È™§ aÔºâÊääÁ®ãÂ∫èÊâìÂåÖÊîæÂà∞ÁõÆÊ†áÊú∫Âô®‰∏äÂéªÔºõ ÔºàÈúÄË¶ÅhiveÂíåhadoopÔºåjdk ÁöÑÁõ∏ÂÖ≥jarÂåÖÔºâ ÂáΩÊï∞‰∏ÄÔºöËÑ±ÊïèÂ§ÑÁêÜ 123456789101112131415161718192021222324package com.bigdata.hive.udf;import org.apache.hadoop.hive.ql.exec.UDF;import org.apache.hadoop.io.Text;public class TuoMing extends UDF &#123; private Text res = new Text(); public Text evaluate(String string) &#123; // Ê†°È™åÂèÇÊï∞ÊòØÂê¶‰∏∫Á©∫ if(string==null)&#123; return null; &#125; // Ëã•‰∏∫Âçï‰∏™Â≠óÁ¨¶ if(string.length()==1)&#123; res.set("*"); &#125; String str1 = string.substring(0,1); String str2 = string.substring(string.length()-1,string.length()); res.set(str1+"***"+str2); return res; &#125; &#125; ÂáΩÊï∞‰∫åÔºöaddÂáΩÊï∞ 12345678910111213141516171819202122package com.bigdata.hive.udf;import org.apache.hadoop.hive.ql.exec.UDF;import org.apache.hadoop.io.Text;public class Add extends UDF &#123; private Text res = new Text(); public Text evaluate(String num1,String num2) &#123; // Ê†°È™åÂèÇÊï∞ÊòØÂê¶‰∏∫Á©∫ if(num1==null)&#123; return null; &#125;else if(num2==null)&#123; res.set(num1); return res; &#125; int n = Integer.parseInt(num1)+Integer.parseInt(num2); String str =n+""; res.set(str); return res; &#125; &#125; bÔºâËøõÂÖ• hive ÂÆ¢Êà∑Á´ØÔºåÊ∑ªÂä† jar ÂåÖ 1234hive&gt;add jar /root/su/TuoMing.jar;(Áõ∏ÂΩì‰∫éÊ∑ªÂä†Âà∞ÁéØÂ¢ÉÂèòÈáè‰∏≠)(Ê∏ÖÈô§ÁºìÂ≠òÊó∂ËÆ∞ÂæóÂà†Èô§jarÂåÖÔºö delete jar /*)delete jar /jar/udf_test.jar; cÔºâÂàõÂª∫‰∏¥Êó∂ÂáΩÊï∞Ôºö 123hive&gt;CREATE TEMPORARY FUNCTION add_example AS &apos;hive.udf.add&apos;;CREATE TEMPORARY FUNCTION tm_example AS &apos;com.bigdata.hive.udf.TuoMing&apos;;Ôºàas ÂêéÈù¢Ê∑ªÂä†ÁöÑÊòØÔºöÂåÖÂêç+Á±ªÂêçÔºâ dÔºâÊü•ËØ¢ HQL ËØ≠Âè•Ôºö 12345SELECT add_example(8, 9) FROM scores;SELECT add_example(scores.math, scores.art) FROM scores;SELECT tm_example(id) FROM log; eÔºâÈîÄÊØÅ‰∏¥Êó∂ÂáΩÊï∞Ôºö 1hive&gt; DROP TEMPORARY FUNCTION tm_example; Ôºà2ÔºâUDAFËá™ÂÆö‰πâÈõÜÂáΩÊï∞(Áî®ÁöÑÂ∞ë) Â§öË°åËøõ‰∏ÄË°åÂá∫ÔºåÂ¶Ç sum()„ÄÅmin()ÔºåÁî®Âú® group by Êó∂ 1.ÂøÖÈ°ªÁªßÊâøorg.apache.hadoop.hive.ql.exec.UDAF(ÂáΩÊï∞Á±ªÁªßÊâø) org.apache.hadoop.hive.ql.exec.UDAFEvaluator(ÂÜÖÈÉ®Á±ª Eval uator ÂÆûÁé∞ UDAFEvaluator Êé•Âè£) 2.Evaluator ÈúÄË¶ÅÂÆûÁé∞ init„ÄÅiterate„ÄÅterminatePartial„ÄÅmerge„ÄÅterminate ËøôÂá†‰∏™ÂáΩÊï∞ init():Á±ª‰ºº‰∫éÊûÑÈÄ†ÂáΩÊï∞ÔºåÁî®‰∫é UDAF ÁöÑÂàùÂßãÂåñ iterate():Êé•Êî∂‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÂπ∂ËøõË°åÂÜÖÈÉ®ÁöÑËΩÆËΩ¨ÔºåËøîÂõû boolean terminatePartial():Êó†ÂèÇÊï∞ÔºåÂÖ∂‰∏∫ iterate ÂáΩÊï∞ËΩÆËΩ¨ÁªìÊùüÂêéÔºåËøîÂõûËΩÆËΩ¨Êï∞ÊçÆÔºå Á±ª‰ºº‰∫é hadoop ÁöÑCombinermerge():Êé•Êî∂ terminatePartial ÁöÑËøîÂõûÁªìÊûúÔºåËøõË°åÊï∞ÊçÆ merge Êìç‰ΩúÔºå ‚Äã ÂÖ∂ËøîÂõûÁ±ªÂûã‰∏∫ boolean terminate():ËøîÂõûÊúÄÁªàÁöÑËÅöÈõÜÂáΩÊï∞ÁªìÊûú ÂºÄÂèë‰∏Ä‰∏™ÂäüËÉΩÂêåÔºö Oracle ÁöÑ wm_concat()ÂáΩÊï∞ Mysql ÁöÑ group_concat() Hive UDF ÁöÑÊï∞ÊçÆÁ±ªÂûãÔºö Hive UDF ÁöÑÊï∞ÊçÆÁ±ªÂûãÔºö Ôºà3ÔºâUDTFÔºàÁî®ÁöÑÂ∞ë‰∏ÄÁÇπÔºâUDTFÔºö‰∏ÄËøõÂ§öÂá∫ÔºåÂ¶Ç lateral view explode( ) ËøîÂõû‰∏Ä‰∏™Êï∞ÁªÑË°® Hive Lateral View ËßÜÂõæ Lateral ViewÁî®‰∫éÂíåUDTFÂáΩÊï∞Ôºàexplode„ÄÅsplitÔºâÁªìÂêàÊù•‰ΩøÁî®„ÄÇ È¶ñÂÖàÈÄöËøáUDTFÂáΩÊï∞ÊãÜÂàÜÊàêÂ§öË°åÔºåÂÜçÂ∞ÜÂ§öË°åÁªìÊûúÁªÑÂêàÊàê‰∏Ä‰∏™ÊîØÊåÅÂà´ÂêçÁöÑËôöÊãüË°®„ÄÇ ‰∏ªË¶ÅËß£ÂÜ≥ Âú®select‰ΩøÁî®UDTFÂÅöÊü•ËØ¢ËøáÁ®ã‰∏≠ÔºåÊü•ËØ¢Âè™ËÉΩÂåÖÂê´Âçï‰∏™UDTFÔºå‰∏çËÉΩÂåÖÂê´ÂÖ∂‰ªñÂ≠óÊÆµ„ÄÅ‰ª•ÂèäÂ§ö‰∏™UDTFÁöÑÈóÆÈ¢ò ËØ≠Ê≥ïÔºö LATERAL VIEW udtf(expression) tableAlias AS columnAlias (‚Äò,‚Äô columnAlias) ‰æãÔºö ÁªüËÆ°‰∫∫ÂëòË°®‰∏≠ÂÖ±ÊúâÂ§öÂ∞ëÁßçÁà±Â•Ω„ÄÅÂ§öÂ∞ë‰∏™ÂüéÂ∏Ç? 1234&gt; select count(distinct(myCol1)), count(distinct(myCol2))Ôºåcount(distinct(myCol3))from log2 &gt; LATERAL VIEW explode(likes) myTable1 AS myCol1 &gt; LATERAL VIEW explode(address) myTable2 AS myCol2, myCol3;&gt; 123select myCol1, myCol2 from log2 LATERAL VIEW explode(likes) myTable1 AS myCol1 LATERAL VIEW explode(address) myTable2 AS myCol2, myCol3; distinct(myCol1) Ë°®Á§∫ÂéªÈáç LATERAL VIEW explode(likes) myTable1 AS myCol1 Â∞ÜlikesÊü•ËØ¢ÁªìÊûúÊîæÂà∞mytable1Ë°®‰∏≠Ôºå‰Ωú‰∏∫Â≠óÊÆµmyCol1 LATERAL VIEW explode(address) myTable2 AS myCol2, myCol3; Â∞ÜaddressÊü•ËØ¢ÁªìÊûúÊîæÂà∞myTable2 Ë°®‰∏≠Ôºå‰Ωú‰∏∫Â≠óÊÆµmyCol2ÔºåmyCol3ÔºåÂõ†‰∏∫addressÊòØÂåÖÂê´K-VÁöÑÔºà‰∏§‰∏™Ôºâ ÂÖ´„ÄÅHiveÁ¥¢Âºï(Áü•ÈÅì) ‰∏Ä‰∏™Ë°®‰∏äÂàõÂª∫Á¥¢ÂºïÔºö ‰ΩøÁî®ÁªôÂÆöÁöÑÂàóË°®ÁöÑÂàó‰Ωú‰∏∫ÈîÆÂàõÂª∫‰∏Ä‰∏™Á¥¢Âºï„ÄÇ ËØ¶ËßÅÂàõÂª∫Á¥¢Âºï;)ËÆæËÆ°ÊñáÊ°£„ÄÇ 12345678910111213CREATE INDEX index_name ON TABLE base_table_name (col_name, ...) AS index_type [WITH DEFERRED REBUILD] [IDXPROPERTIES (property_name=property_value, ...)] [IN TABLE index_table_name] [ [ ROW FORMAT ...] STORED AS ... | STORED BY ... ] [LOCATION hdfs_path] [TBLPROPERTIES (...)] [COMMENT &quot;index comment&quot;]; ‰πù„ÄÅÊ°à‰æãÂÆûË∑µÊ°à‰æã‰∏ÄÔºö(Âü∫Á´ôÊéâËØùÁéá)Âü∫Á´ôÊéâËØùÁéá 1„ÄÅÂàõÂª∫Ë°®cell_monitorË°® 1234567891011121314create table cell_monitor( record_time string, imei string, cell string, ph_num int, call_num int, drop_num int, duration int, drop_rate DOUBLE, net_type string, erl string)ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;STORED AS TEXTFILE; ÁªìÊûúË°®cell_drop_monitor 12345678create table cell_drop_monitor(imei string,total_call_num int,total_drop_num int,d_rate DOUBLE) ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;\t&apos;STORED AS TEXTFILE; 2„ÄÅloadÊï∞ÊçÆ1LOAD DATA LOCAL INPATH &apos;/root/su/cdr_summ_imei_cell_info.csv&apos; OVERWRITE INTO TABLE cell_monitor; 3„ÄÅÊâæÂá∫ÊéâÁ∫øÁéáÊúÄÈ´òÁöÑÂü∫Á´ô12345from cell_monitor cm insert overwrite table cell_drop_monitor select cm.imei ,sum(cm.drop_num),sum(cm.duration),sum(cm.drop_num)/sum(cm.duration) d_rate group by cm.imei sort by d_rate desc; Ê°à‰æã‰∫åÔºöÔºàÂçïËØçÁªüËÆ°Ôºâ1„ÄÅÂª∫Ë°®12create table docs(line string);create table wc(word string, totalword int); 2„ÄÅÂä†ËΩΩÊï∞ÊçÆ1load data local inpath &apos;/tmp/wc&apos; into table docs; 3„ÄÅÁªüËÆ°12345from (select explode(split(line, &apos; &apos;)) as word from docs) w insert into table wc select word, count(1) as totalword group by word order by word; 4„ÄÅÊü•ËØ¢ÁªìÊûú1select * from wc; ÂçÅ„ÄÅÂàÜÊ°∂ÔºàÈáçË¶ÅÔºâ1„ÄÅÊ¶ÇÂøµ ‰∏ªË¶ÅÂ∫îÁî®‰∫éÊï∞ÊçÆÊäΩÊ†∑„ÄÇ ÈÄöËøáÂØπÂàóÂÄºÂèñÂìàÂ∏åÂÄºÁöÑÊñπÂºèÔºåÂ∞Ü‰∏çÂêåÊï∞ÊçÆÊîæÂà∞‰∏çÂêåÁöÑÊñá‰ª∂‰∏≠Â≠òÂÇ®„ÄÇ ÂØπHive‰∏≠ÊØè‰∏™Ë°®„ÄÅÂàÜÂå∫ÈÉΩÂèØ‰ª•ËøõË°åÂàÜÊ°∂„ÄÇ ÂàóÁöÑÂìàÂ∏åÂÄº /Ê°∂ÁöÑ‰∏™Êï∞‚ÜíÂÜ≥ÂÆöÊØèÊù°Êï∞ÊçÆÂàíÂàÜÂà∞Âì™‰∏™Ê°∂‰∏≠ 2„ÄÅÂºÄÂêØÊîØÊåÅÂàÜÊ°∂1hive&gt; set hive.enforce.bucketing=true; ÈªòËÆ§ÔºöfalseÔºõ ËÆæÁΩÆ‰∏∫true‰πãÂêéÔºåmrËøêË°åÊó∂‰ºöÊ†πÊçÆbucketÁöÑ‰∏™Êï∞Ëá™Âä®ÂàÜÈÖçreduce task‰∏™Êï∞„ÄÇ ÔºàÁî®Êà∑‰πüÂèØ‰ª•ÈÄöËøámapred.reduce.tasksËá™Â∑±ËÆæÁΩÆreduce‰ªªÂä°‰∏™Êï∞Ôºå‰ΩÜÂàÜÊ°∂Êó∂‰∏çÊé®Ëçê‰ΩøÁî®Ôºâ ‰∏ÄÊ¨°‰Ωú‰∏ö‰∫ßÁîüÁöÑÊ°∂Êï∞ = reducde taskÊï∞ 3„ÄÅÂæÄÂàÜÊ°∂Ë°®‰∏≠Âä†ËΩΩÊï∞ÊçÆ12insert into table bucket_table select columns from tbl;insert overwrite table bucket_table select columns from tbl; 4„ÄÅÊ°∂Ë°®ÊäΩÊ†∑Êü•ËØ¢1select * from bucket_table tablesample(bucket 1 out of 4 on columns); TABLESAMPLEËØ≠Ê≥ïÔºö 12&gt; TABLESAMPLE(BUCKET x OUT OF y)&gt; xÔºöË°®Á§∫‰ªéÂì™‰∏™bucketÂºÄÂßãÊäΩÂèñÊï∞ÊçÆÔºåx&lt;=y yÔºöÂøÖÈ°ª‰∏∫ËØ•Ë°®ÊÄªbucketÊï∞ÁöÑÂÄçÊï∞ÊàñÂõ†Â≠ê ÁêÜËß£Ôºö ÂàÜÊ°∂Ë°®Â∑≤ÁªèÊåâageÂàÜ‰∏∫4Ê°∂ÔºåÁÑ∂ÂêéÔºåÊúây‰∏™‰∫∫ÂéªÊäΩÔºå‰ªéÁ¨¨(x ÂèñÊ®° Ê°∂Êï∞)Ê°∂‰∏≠ÊäΩ 5„ÄÅÂÆûÊàòÂàõÂª∫ÊôÆÈÄöË°® 123456CREATE TABLE mm( id INT, name STRING, age INT)ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;; ÊµãËØïÊï∞ÊçÆ 123456781,tom,112,cat,223,dog,334,hive,445,hbase,556,mr,667,alice,778,scala,88 Âä†ËΩΩÊï∞ÊçÆÔºö 1load data local inpath &apos;/root/su/mm&apos; into table mm; ÂàõÂª∫ÂàÜÊ°∂Ë°® 1234567CREATE TABLE psnbucket( id INT, name STRING, age INT)CLUSTERED BY (age) INTO 4 BUCKETS ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;,&apos;; Âä†ËΩΩÊï∞ÊçÆÔºö 1insert into table psnbucket select id, name, age from mm; ÊäΩÊ†∑ 1select id, name, age from psnbucket tablesample(bucket 2 out of 4 on age); Ê≥®ÊÑèÔºö hive&gt; select id, name, age from psnbucket tablesample(bucket 4 out of 2 on age);FAILED: SemanticException [Error 10061]: Numerator should not be bigger than denominator in sample clause for table psnbucket denominator : ÂàÜÊØç ÂçÅ‰∏Ä„ÄÅËøêË°åÊñπÂºè1„ÄÅHiveËøêË°åÊ®°Âºè ‚Äì ÂëΩ‰ª§Ë°åÊñπÂºècliÔºöÊéßÂà∂Âè∞Ê®°Âºè 1234567--‰∏éhdfs‰∫§‰∫í * ÊâßË°ådfsÂëΩ‰ª§ * ‰æã Ôºöhive&gt; dfs -ls / --‰∏éLinux‰∫§‰∫í * ÔºÅ ÂºÄÂ§¥ * hive&gt; !pwd ‚ÄìËÑöÊú¨ËøêË°åÊñπÂºèÔºöÔºàÁîü‰∫ß‰∏≠Â∏∏Áî®Ôºâ 123456789101112131415161718192021222324Âú®Â§ñÈÉ®shell‰∏≠ÊâßË°å,ÊåáÂÆöÊï∞ÊçÆÂ∫ì,ÂàÜÂè∑ÂèØÂä†ÂèØ‰∏çÂä†# hive -e &quot;select * from attr.log &quot;# hive -e &quot;select * from attr.logÔºõselect * from default.log2&quot;--------------------------------------------------------------Â∞ÜÊâßË°åÁªìÊûúÈáçÂÆöÂêëÂà∞ÊåáÂÆöÊñá‰ª∂Ôºö# hive -e &quot;select * from attr.log &quot; &gt;&gt;log1--------------------------------------------------------------ÈùôÈªòÊ®°ÂºèÊâßË°åÔºå‰∏çÊâìÂç∞logÊó•Âøó# hive -S -e &quot;select * from attr.log &quot; &gt;&gt;log1--------------------------------------------------------------ËÑöÊú¨ÊâßË°åÂÖàÁºñËæëËÑöÊú¨ÈóÆ‰ª∑# vim file1ÁºñËæëÂÜÖÂÆπselect * from attr.log where id = 1;select * from attr.log where id &lt; 3;ÊâßË°åËÑöÊú¨# hive -f file1--------------------------------------------------------------?? ‰ΩøÁî®ÂëΩ‰ª§Êñá‰ª∂ÊâßË°åhive-init.sql?? # hive -i /home/hive-init.sql--------------------------------------------------------------Âú®hive cli‰∏≠ÊâßË°åËÑöÊú¨Êñá‰ª∂hive&gt; source file1 ÔºüÊú™Ëß£ÂÜ≥Ôºü ?? ‰ΩøÁî®ÂëΩ‰ª§Êñá‰ª∂ÊâßË°åhive-init.sql?? # hive -i /home/hive-init.sql ÂçÅ‰∫å„ÄÅhiveÁöÑGUIÊé•Âè£ÔºàwebÈ°µÈù¢ÔºâHive Web GUIÊé•Âè£ webÁïåÈù¢ÂÆâË£ÖÔºö1„ÄÅ‰∏ãËΩΩÊ∫êÁ†ÅÂåÖapache-hive-1.2.1-src.tar.gz, 2„ÄÅÂú®Êú¨Âú∞WindowsÁ≥ªÁªü‰∏≠Ëß£Âéã Âπ∂Â∞Ü\apache-hive-1.2.1-src\hwi\webË∑ØÂæÑ‰∏≠ÊâÄÊúâÁöÑÊñá‰ª∂ÊâìÊàêwarÂåÖ Âà∂‰ΩúÊñπÊ≥ïÔºö warÂåÖ 1„ÄÅÂà∞\apache-hive-1.2.1-src\hwi\webË∑ØÂæÑ‰∏ã 2„ÄÅÂú®Ë∑ØÂæÑÊ†èËæìÂÖ•ÂëΩ‰ª§Ôºöjar -cvf hive-hwi.war * 3„ÄÅÂç≥ÂèØÁîüÊàêÊñá‰ª∂Ôºöhive-hwi.war 3„ÄÅÂ∞Ühwi-warÂåÖÊîæÂú®$HIVE_HOME/lib/‰∏≠ÔºàLinuxÁ≥ªÁªüÔºâ 4„ÄÅÂ§çÂà∂tools.jar(Âú®jdkÁöÑlibÁõÆÂΩï‰∏ã)Âà∞$HIVE_HOME/lib‰∏ã 5„ÄÅ‰øÆÊîπhive-site.xml Ë∑ØÂæÑÔºö/usr/soft/apache-hive-1.2.1-bin/conf/hive-site.xml 123456789101112&lt;property&gt; &lt;name&gt;hive.hwi.listen.host&lt;/name&gt; &lt;value&gt;0.0.0.0&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hive.hwi.listen.port&lt;/name&gt; &lt;value&gt;9999&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hive.hwi.war.file&lt;/name&gt; &lt;value&gt;lib/hive-hwi.war&lt;/value&gt; &lt;/property&gt; 6„ÄÅÂêØÂä®hwiÊúçÂä°(Á´ØÂè£Âè∑9999) 1hive --service hwi 7„ÄÅÊµèËßàÂô®ÈÄöËøá‰ª•‰∏ãÈìæÊé•Êù•ËÆøÈóÆ http://node00:9999/hwi/ 8„ÄÅÁôªÂΩïÈ°µÈù¢Ôºö USER: GROUPS: Ëá™Â∑≤ÂÆö‰πâ ÂçÅ‰∏â„ÄÅÊùÉÈôêÁÆ°ÁêÜHive - SQL Standards Based Authorization in HiveServer2 Ôºà1Ôºâ‰∏âÁßçÊéàÊùÉÊ®°Âûã Ôºà2ÔºâÂ∏∏Áî®ÔºöÂü∫‰∫éSQLÊ†áÂáÜÁöÑÂÆåÂÖ®ÂÖºÂÆπSQLÁöÑÊéàÊùÉÊ®°ÂûãÁâπÁÇπÔºö ÊîØÊåÅÂØπ‰∫éÁî®Êà∑ÁöÑÊéàÊùÉËÆ§ËØÅ ÊîØÊåÅËßíËâ≤roleÁöÑÊéàÊùÉËÆ§ËØÅ roleÂèØÁêÜËß£‰∏∫ÊòØ‰∏ÄÁªÑÊùÉÈôêÁöÑÈõÜÂêàÔºåÈÄöËøárole‰∏∫Áî®Êà∑ÊéàÊùÉ ‰∏Ä‰∏™Áî®Êà∑ÂèØ‰ª•ÂÖ∑Êúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËßíËâ≤ ‚Äã ÈªòËÆ§ÂåÖÂê´‰ø©ÁßçËßíËâ≤Ôºöpublic„ÄÅadmin ÈôêÂà∂ Ôºà3ÔºâÊìç‰ΩúÂú®hiveÊúçÂä°Á´Ø‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂hive-site.xmlÊ∑ªÂä†‰ª•‰∏ãÈÖçÁΩÆÂÜÖÂÆπÔºö 1234567891011121314151617181920&lt;property&gt; &lt;name&gt;hive.security.authorization.enabled&lt;/name&gt; &lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hive.server2.enable.doAs&lt;/name&gt; &lt;value&gt;false&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hive.users.in.admin.role&lt;/name&gt; &lt;value&gt;root&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hive.security.authorization.manager&lt;/name&gt;&lt;value&gt;org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdHiveAuthorizerFactory&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hive.security.authenticator.manager&lt;/name&gt; &lt;value&gt;org.apache.hadoop.hive.ql.security.SessionStateUserAuthenticator&lt;/value&gt;&lt;/property&gt; ÊúçÂä°Á´ØÂêØÂä®hiveserver2ÔºõÂÆ¢Êà∑Á´ØÈÄöËøábeelineËøõË°åËøûÊé• ËßíËâ≤ÁöÑÊ∑ªÂä†„ÄÅÂà†Èô§„ÄÅÊü•Áúã„ÄÅËÆæÁΩÆÔºö Á¨¨‰∏ÄÊ¨°Êìç‰ΩúÊó†ÊùÉÈôêÔºö ÈúÄË¶ÅÔºöCREATE ROLE adminÔºõ 12345CREATE ROLE role_name; -- ÂàõÂª∫ËßíËâ≤DROP ROLE role_name; -- Âà†Èô§ËßíËâ≤SET ROLE (role_name|ALL|NONE); -- ËÆæÁΩÆËßíËâ≤SHOW CURRENT ROLES; -- Êü•ÁúãÂΩìÂâçÂÖ∑ÊúâÁöÑËßíËâ≤SHOW ROLES; -- Êü•ÁúãÊâÄÊúâÂ≠òÂú®ÁöÑËßíËâ≤ „ÄêÂÆòÁΩëÔºöÊùÉÈôê„Äë Action Select Insert Update Delete Owership Admin URL Privilege(RWX Permission + Ownership) ALTER DATABASE Y ALTER INDEX PROPERTIES Y ALTER INDEX REBUILD Y ALTER PARTITION LOCATION Y Y (for new partition location) ALTER TABLE (all of them except the ones above) Y ALTER TABLE ADD PARTITION Y Y (for partition location) ALTER TABLE DROP PARTITION Y ALTER TABLE LOCATION Y Y (for new location) ALTER VIEW PROPERTIES Y ALTER VIEW RENAME Y ANALYZE TABLE Y Y CREATE DATABASE Y (if custom location specified) CREATE FUNCTION Y CREATE INDEX Y (of table) CREATE MACRO Y CREATE TABLE Y (of database) Y (for create external table ‚Äì the location) CREATE TABLE AS SELECT Y (of input) Y (of database) CREATE VIEW Y + G DELETE Y DESCRIBE TABLE Y DROP DATABASE Y DROP FUNCTION Y DROP INDEX Y DROP MACRO Y DROP TABLE Y DROP VIEW Y DROP VIEW PROPERTIES Y EXPLAIN Y INSERT Y Y (for OVERWRITE) LOAD Y (output) Y (output) Y (input location) MSCK (metastore check) Y SELECT Y SHOW COLUMNS Y SHOW CREATE TABLE Y+G SHOW PARTITIONS Y SHOW TABLE PROPERTIES Y SHOW TABLE STATUS Y TRUNCATE TABLE Y UPDATE Y ÂçÅÂõõ„ÄÅHive‰ºòÂåñÔºàÈáçÁÇπÔºâËØ¶ËßÅHive‰ºòÂåñÊñáÊ°£ HIveÂ∏∏Áî®ÂáΩÊï∞Ôºö https://www.cnblogs.com/kimbo/p/6288516.html https://www.iteblog.com/archives/2258.html#3_avg https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-Built-inFunctions MapReducdeÂ∫ïÂ±ÇÊ∫êÁ†ÅÔºö http://note.youdao.com/noteshare?id=212e4a69d7bf8fc30979f1e4fc39ff0f&amp;sub=EA7C15DC72DF45248721CE2AD3F93CDD http://note.youdao.com/noteshare?id=86ca5c96d13413f789164ff92f9ab4f9&amp;sub=7F20006D1D714D77AEDE5242603786C1 http://note.youdao.com/noteshare?id=a518dfed10d824b0995380669ddd28c9&amp;sub=3526F532CDAA49628FEA1FE3A61239F3 http://note.youdao.com/noteshare?id=95d458d779f8e9f391d6ea06b6c6d122&amp;sub=0A13B59E10D94C96ABF5388CE4EB89D4]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>Hive</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux ÂÖ•Èó®Â≠¶‰π†Ôºà‰∫åÔºâ]]></title>
    <url>%2F2019%2F01%2F11%2FLinux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%BA%8C%E5%9B%9E%E5%90%88%EF%BC%89%2F</url>
    <content type="text"><![CDATA[2018Âπ¥12Êúà18Êó• Âë®‰∫å Êô¥ ‰ªäÊó•Â≠¶‰π†Ë¶ÅÁÇπÔºö [TOC] LinuxÂêéÂçäÁ®ã‰∏Ä„ÄÅLinuxÁ≥ªÁªüÈÖçÁΩÆ1.‰∏ªÊú∫ÂêçÈÖçÁΩÆÔºö vim /etc/sysconfig/network 1545214876278 ÈÖçÁΩÆÂÆåÊàê‰πãÂêéÈúÄË¶ÅÈáçÂêØÊú∫Âô®ÊâçËÉΩÁîüÊïà reboot 2.DNSÈÖçÁΩÆ Êü•ÁúãDNSÊúçÂä°Âô®ÁöÑÂú∞ÂùÄcat /etc/resolv.conf ‰øÆÊîπDNSÊúçÂä°Âô®Âú∞ÂùÄÊñπÂºè‰∏ÄÔºövim /etc/sysconfig/network.scripts/ifconfig-eth0 ‚Äã Âú®ÈÖçÁΩÆÁΩëÂÖ≥Êó∂ÔºåÈÖçÁΩÆDNS1=114.114.114.114Ôºà‰∏çÊé®ËçêÔºåÊ±üËãèÂçó‰∫¨ÁöÑIPÔºâ ÊñπÂºè‰∫åÔºövim /etc/resolv.conf ÔºàÁî®Êú¨Âú∞ÁΩëÂÖ≥Ëß£ÊûêÔºâ ‚Äã nameserver 192.168.198.0 ( Ê≠§‰∏∫ËôöÊãüÊú∫‰∏≠ÁöÑÁΩëÂÖ≥Âú∞ÂùÄ) 3.ÁéØÂ¢ÉÂèòÈáè ÈÖçÁΩÆÁ≥ªÁªüÁéØÂ¢ÉÂèòÈáèÔºå‰ΩøÂæóÊüê‰∫õÂëΩ‰ª§Âú®ÊâßË°åÊó∂ÔºåÁ≥ªÁªüÂèØ‰ª•ÊâæÂà∞ÂëΩ‰ª§ÂØπÂ∫îÁöÑÊâßË°åÁ®ãÂ∫èÔºåÂëΩ‰ª§ÊâçËÉΩÊ≠£Â∏∏ÊâßË°å„ÄÇ Êü•ÁúãÁ≥ªÁªü‰∏ÄÂÖ±Âú®Âì™‰∫õÁõÆÂΩïÈáåÂØªÊâæÂëΩ‰ª§ÂØπÂ∫îÁöÑÁ®ãÂ∫è ÂëΩ‰ª§Ôºöecho $PATH 1545215894631 Ê≥®ÊÑèÔºöË∑ØÂæÑ‰πãÈó¥ÊúâÂÜíÂè∑ÈöîÂºÄÔºåÁ≥ªÁªü‰ºö‰ªéÂ∑¶ÂæÄÂè≥‰æùÊ¨°ÂØªÊâæÂØπÂ∫îÁöÑÁ®ãÂ∫è ‚Äã ‰∏ÄËà¨ÂëΩ‰ª§‰ºöÂ≠òÊîæÂú® binÁõÆÂΩïÔºåÊàñsbinÁõÆÂΩï ÈÖçÁΩÆÂÖ®Â±ÄÁéØÂ¢ÉÂèòÈáèÔºö vim /etc/profile Âú®Êñá‰ª∂‰∏≠Ôºö PATH=$PATH:(ÂëΩ‰ª§ÊâÄÂú®ÁõÆÂΩï) ÈÄÄÂá∫Êñá‰ª∂ÁºñËæëÂêéÔºö source /etc/profile (ÈáçÊñ∞Âä†ËΩΩËµÑÊ∫êÔºåÊúâÁöÑÂèØËÉΩÈúÄË¶ÅÈáçÂêØÊú∫Âô®ÔºåËøô‰∏çÈÄÇÁî®‰∫éÂÆûÈôÖÁä∂ÂÜµ) ÈÖçÁΩÆÂ±ÄÈÉ®ÁéØÂ¢ÉÂèòÈáèÔºöÔºàÊé®ËçêÔºåÈôêÂΩìÂâçÁôªÂΩïÁî®Êà∑‰ΩøÁî®Ôºâ Êü•ÁúãÊâÄÊúâÊñá‰ª∂(rootÁõÆÂΩï‰∏ã) ls -a (ÂèëÁé∞ÈöêËóèÊñá‰ª∂ .bash.profile) vim ~/ bash_profile Âú®Êñá‰ª∂‰∏≠Ôºö export PATH =$PATH:(ÂëΩ‰ª§ÊâÄÂú®ÁõÆÂΩï) 4.ÊãçÂø´ÁÖßÔºà‰øùÂ≠òÂΩìÊó∂ËÆ°ÁÆóÊú∫ÊâÄÂá∫Áä∂ÊÄÅÁöÑÂêÑÁßçÈÖçÁΩÆÂíåËµÑÊ∫êÔºåÈÄÇÂ∫¶‰ΩøÁî®Ôºâ ÈÄâ‰∏≠ÊåáÂÆöËôöÊãüËÆ°ÁÆóÊú∫‚Äî‚ÄîÈº†Ê†áÂè≥Âáª‚Äî‚ÄìÈÄâ‰∏≠‚ÄúÂø´ÁÖß‚Äù ‚Äî‚Äî‚ÄúÊãçÊëÑÂø´ÁÖß‚Äò‚Äî-Âú®È°µÈù¢‰∏≠ÊâæÂà∞‚ÄùÊãçÊëÑÂø´ÁÖß‚ÄúÔºåÂπ∂Ê∑ªÂä†ÂêçÁß∞ÂíåÊèèËø∞ ‰πüÂèØ‰ª•Âà†Èô§ÔºåÊâæÂà∞È°µÈù¢‰∏≠ÁöÑÂà†Èô§ÊåâÈíÆ ‰∫å„ÄÅÊúçÂä°Êìç‰Ωú1„ÄÅÊü•ËØ¢Êìç‰ΩúÁ≥ªÁªüÂú®ÊØè‰∏Ä‰∏™ÊâßË°åÁ≠âÁ∫ß‰∏≠‰ºöÊâßË°åÂì™‰∫õÁ≥ªÁªüÊúçÂä°ÔºåÂÖ∂‰∏≠ÂåÖÊã¨ÂêÑÁ±ªÂ∏∏È©ªÊúçÂä°„ÄÇ ÂëΩ‰ª§Ôºöchkconfig 1545219619458 12345678ÂêÑÊï∞Â≠ó‰ª£Ë°®ÁöÑÁ≥ªÁªüÂàùÂßãÂåñÁ∫ßÂà´Ôºö 0ÔºöÂÅúÊú∫Áä∂ÊÄÅ 1ÔºöÂçïÁî®Êà∑Ê®°ÂºèÔºårootË¥¶Êà∑ËøõË°åÊìç‰Ωú 2ÔºöÂ§öÁî®Êà∑Ôºå‰∏çËÉΩ‰ΩøÁî®net file systemÔºå‰∏ÄËà¨ÂæàÂ∞ëÁî® 3ÔºöÂÆåÂÖ®Â§öÁî®Êà∑Ôºå‰∏ÄÈÉ®ÂàÜÂêØÂä®Ôºå‰∏ÄÈÉ®ÂàÜ‰∏çÂêØÂä®ÔºåÂëΩ‰ª§Ë°åÁïåÈù¢ 4ÔºöÊú™‰ΩøÁî®„ÄÅÊú™ÂÆö‰πâÁöÑ‰øùÁïôÊ®°Âºè 5ÔºöÂõæÂΩ¢ÂåñÔºå3Á∫ßÂà´‰∏≠ÂêØÂä®ÁöÑËøõÁ®ãÈÉΩÂêØÂä®ÔºåÂπ∂‰∏î‰ºöÂêØÂä®‰∏ÄÈÉ®ÂàÜÂõæÂΩ¢ÁïåÈù¢ËøõÁ®ã„ÄÇ 6ÔºöÂÅúÊ≠¢ÊâÄÊúâËøõÁ®ãÔºåÂç∏ËΩΩÊñá‰ª∂Á≥ªÁªüÔºåÈáçÊñ∞ÂêØÂä®(reboot) 1„ÄÅ2„ÄÅ4ÂæàÂ∞ëÁî®Ôºå0„ÄÅ3„ÄÅ5„ÄÅ6Â∏∏Áî®Ôºå3Á∫ßÂà´Âíå5Á∫ßÂà´Èô§‰∫ÜÊ°åÈù¢Áõ∏ÂÖ≥ÁöÑËøõÁ®ãÂ§ñÊ≤°Êúâ‰ªÄ‰πàÂå∫Âà´ÔºåÊé®ËçêÈÉΩÁî®3Á∫ßÂà´Ôºõ linuxÈªòËÆ§Á∫ßÂà´‰∏∫3Ôºõ ‰∏çË¶ÅÊää /etc/inittab ‰∏≠ initdefault ËÆæÁΩÆ‰∏∫0 Âíå 6Ôºõ 2„ÄÅÊúçÂä°Êìç‰Ωú service ÊúçÂä°Âêç start/stop/status/restart ‰∏æ‰æãÔºöÂØπÈò≤ÁÅ´Â¢ôÊúçÂä°ËøõË°åÊìç‰Ωú Èò≤ÁÅ´Â¢ôÁöÑÊúçÂä°Âêç‰∏∫Ôºöiptables Êü•ÁúãÈò≤ÁÅ´Â¢ôÊúçÂä°ËøêË°åÁä∂ÊÄÅ service iptables status ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô service iptables stop ÂºÄÂêØÈò≤ÁÅ´Â¢ô service iptables start Ê∞∏‰πÖÂºÄÂêØ/ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô chkconfig iptables on/off 3„ÄÅÊúçÂä°ÂàùÊâßË°åÁ≠âÁ∫ßÊõ¥Êîπ chkconfig ‚Äìlevel 2345 name off|on‚Äã Ôºà ÊúçÂä°ÂêçÔºâ ‰∏æ‰æãÔºöÈò≤ÁÅ´Â¢ô chkconfig ‚Äìlevel 2345 iptables off Ëã•‰∏çÂä†Á∫ßÂà´ÔºåÈªòËÆ§ÊòØ2345Á∫ßÂà´ ÂëΩ‰ª§Ôºöchkconfig name on|off‚Äã ÔºàÊúçÂä°ÂêçÔºâ ‰∏â„ÄÅlinuxËøõÁ®ãÊìç‰Ωú1„ÄÅÊü•ÁúãÊâÄÊúâËøõÁ®ã ÂëΩ‰ª§Ôºö ps -aux 12345 -a ÂàóÂá∫ÊâÄÊúâ-u ÂàóÂá∫Áî®Êà∑-x ËØ¶ÁªÜÂàóÂá∫ÔºåÂ¶Çcpu„ÄÅÂÜÖÂ≠òÁ≠â -e select all processes Áõ∏ÂΩì‰∫é-a -f does full-format listing Â∞ÜÊâÄÊúâÊ†ºÂºèËØ¶ÁªÜÂàóÂá∫Êù• Êü•ÁúãÊâÄÊúâËøõÁ®ãÈáåCMDÊòØssh ÁöÑËøõÁ®ã‰ø°ÊÅØÔºàÂåÖÊã¨pid ËøõÁ®ãÂè∑Ôºâ ÂëΩ‰ª§Ôºö ps - ef | grep ssh Ôºà| ÁÆ°ÈÅìÁ¨¶ ÔºöÂâç‰∏Ä‰∏™ËæìÂá∫ÔºåÂèò‰∏∫Âêé‰∏Ä‰∏™ÁöÑËæìÂÖ•Ôºâ ‰∏æ‰æãÔºö ps -ef | grep redis 2„ÄÅÊùÄÊ≠ªËøõÁ®ãkill ÂëΩ‰ª§Ôºökill pid -9 Âº∫Âà∂ÊùÄÊ≠ª Áî®Ê≥ïÔºöÁî®ps ÂëΩ‰ª§ÂÖàÊü•Âá∫ÂØπÂ∫îÁ®ãÂ∫èÁöÑPIDÊàñPPID ÔºåÁÑ∂ÂêéÁî®killÊùÄÊ≠ªÊéâËøõÁ®ã„ÄÇ Âõõ„ÄÅÂÖ∂‰ªñÂ∏∏Áî®ÂëΩ‰ª§1„ÄÅyum Âü∫‰∫éRPMÂåÖÁÆ°ÁêÜ ËÉΩÂ§ü‰ªéÊåáÂÆöÁöÑÊúçÂä°Âô®Ëá™Âä®‰∏ãËΩΩRPMÂåÖÂπ∂‰∏îÂÆâË£ÖÔºåÂèØ‰ª•Ëá™Âä®Â§ÑÁêÜ‰æùËµñÊÄßÂÖ≥Á≥ªÔºåÂπ∂‰∏î‰∏ÄÊ¨°ÂÆâË£ÖÊâÄÊúâ‰æùËµñÁöÑËΩØ‰ª∂ÂåÖÔºåÊó†È°ªÁπÅÁêêÂú∞‰∏ÄÊ¨°Ê¨°‰∏ãËΩΩ„ÄÅÂÆâË£Ö Ë∑üÊç¢yum‰∏ãËΩΩÊ∫êÔºàÈªòËÆ§ÊòØÂà∞ÂõΩÂ§ñÁΩëÁ´ô‰∏ãËΩΩÔºâ Á¨¨‰∏ÄÊ≠•ÔºöÂ§á‰ªΩ‰Ω†ÁöÑÂéüÈïúÂÉèÊñá‰ª∂Ôºå‰ª•ÂÖçÂá∫ÈîôÂêéÂèØ‰ª•ÊÅ¢Â§ç cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup Á¨¨‰∫åÊ≠•Ôºö‰∏ãËΩΩÊñ∞ÁöÑCentOS-Base.repÂà∞/etc/yum.repos.d/ wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo ‰∏ãËΩΩÂÆå‰πãÂêéÔºåÊü•Áúã‰∏Ä‰∏ãÊñá‰ª∂ÂÜÖÂÆπ vim /etc/yum.repos.d/CentOS-Base.repo Á¨¨‰∏âÊ≠•ÔºöÁîüÊàêÁºìÂ≠ò ËøêË°åyum makecache Êü•ÁúãÂΩìÂâçÊ∫ê yum list | head -50 2„ÄÅ wget ‰∏Ä‰∏™‰ªéÁΩëÁªú‰∏äËá™Âä®‰∏ãËΩΩÊñá‰ª∂ÁöÑËá™Áî±Â∑•ÂÖ∑ ÊîØÊåÅÈÄöËøá HTTP„ÄÅHTTPS„ÄÅFTP ‰∏â‰∏™ÊúÄÂ∏∏ËßÅÁöÑ TCP/IPÂçèËÆÆÔºåÂèØ‰ª•‰ΩøÁî® HTTP ‰ª£ÁêÜ ÂÆâË£ÖÔºö yum install wget ‚Äìy Áî®Ê≥ïÔºö wget [option] ÁΩëÂùÄ -O ÊåáÂÆö‰∏ãËΩΩ‰øùÂ≠òÁöÑË∑ØÂæÑ ‰∏æ‰æãÔºö wget www.baidu.com -O baidu.html 3„ÄÅtar12345 -z gzipËøõË°åËß£ÂéãÊàñÂéãÁº©ÔºåÂ∏¶.gzÈúÄË¶ÅÂä†ÔºåÂéãÁº©Âá∫Êù•.gz‰πüÈúÄË¶ÅÂä†-x Ëß£Âéã-c ÂéãÁº©-f ÁõÆÊ†áÊñá‰ª∂ÔºåÂéãÁº©Êñá‰ª∂Êñ∞ÂëΩÂêçÊàñËß£ÂéãÊñá‰ª∂Âêç-v Ëß£ÂéãÁº©ËøáÁ®ã‰ø°ÊÅØÊâìÂç∞ Ëß£ÂéãÂëΩ‰ª§Ôºötar -zvxf xxxx.tar.gz ÂéãÁº©ÂëΩ‰ª§Ôºötar -zcf ÂéãÁº©ÂåÖÂëΩÂêç ÂéãÁº©ÁõÆÊ†á‰∏æ‰æãÔºö tar -zcf tomcat.tar.gz apache-tomcat-7.0.61Â∞Ü apache-tomcat-7.0.61 ÁõÆÂΩïÂéãÁº©Êàêtomcat.tar.gzÂåÖ 4„ÄÅman‰ΩúÁî®ÔºöÁî®‰∫éÊü•ÁúãÊåáÂÆöÂëΩ‰ª§ÁöÑÂÖ∑‰ΩìËß£Èáä ÂÆâË£Ö yum install man -y (‰∏ãËΩΩÂπ∂ÂÆâË£Öman Âπ∂Á°ÆËÆ§) ‰ΩøÁî® man ps ‰∫î„ÄÅJDKÈÉ®ÁΩ≤1„ÄÅÂáÜÂ§áJDKÂÆâË£ÖÂåÖÔºöÔºàËøôÊòØ‰ΩøÁî® .rpm Ê†ºÂºèÁöÑÂÆâË£ÖÂåÖÔºâ ÂÆòÁΩë‰∏ãËΩΩÔºöhttp://www.oracle.com/technetwork/java/javase/downloads/index.html ‰∫ëÁõòËµÑÊ∫êÔºö jdk-8u191-linux-x64.rpm Ôºö ‚Äã Ê†πÊçÆÁî®Êà∑ÂñúÂ•ΩÊîæÂà∞ËôöÊãüÊú∫Âô®ÁöÑÊñá‰ª∂ÁõÆÂΩï‰∏≠ 2„ÄÅËß£ÂéãÂπ∂ÂÆâË£ÖÔºåÂ±ïÁ§∫ÁºñËØëËøáÁ®ã rpm -ivh jdk-8u191-linux-x64.rpm ÂÆâË£ÖÊîæÂà∞‰∫Ü /usr ÁõÆÂΩï‰∏ãÔºåÊúâ/javaÁõÆÂΩï 3„ÄÅÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè vim ~/.bash_profile Âú®Êñá‰ª∂‰∏≠Ôºö JAVA_HOME=(jdkÊñá‰ª∂ÊâÄÂú®ÁöÑË∑ØÂæÑ+jdkÊñá‰ª∂Âêç) export PATH=$PATH:$JAVA_HOME/bin Ê≥®ÊÑèÔºö Êñ∞ÁöÑpathË∑ØÂæÑÂøÖÈ°ªË¶ÅÂåÖÂê´ÊóßÁöÑPATHË∑ØÂæÑÔºå‰∏îÊØè‰∏™Ë∑ØÂæÑ‰πãÈó¥‰ª•ÂÜíÂè∑ÈöîÂºÄÔºåËÄå‰∏çÊòØÂàÜÂè∑ ÈÖçÁΩÆÂÆåÊàêÔºåÈÄÄÂá∫ÁºñËæëÊ°ÜÂêé source ~/.hash_profile 4„ÄÅÊµãËØïÔºö java -version Êàñ echo $JAVA_HOME echo Ê†áÂáÜËæìÂá∫ÔºåÊâìÂç∞ ÂÖ≠„ÄÅTomcatÈÉ®ÁΩ≤1„ÄÅÂÆòÁΩë‰∏ãËΩΩhttp://tomcat.apache.org/ ‰∫ëÁõòËµÑÊ∫êÔºöapache-tomcat-7.0.61.tar 2„ÄÅ‰∏ä‰º†Âπ∂Ëß£Âéã tar -zvxf apache-tomcat-7.0.61.tar 3„ÄÅÂêØÂä®tomcatÂú®tomcatÁöÑbinÁõÆÂΩï‰∏ãÊúâ‰∏™startup.sh ËÑöÊú¨ÂèØ‰ª•Áõ¥Êé•ÂêØÂä®tomcatÊúçÂä° ./startup.sh 4„ÄÅÂÖ≥Èó≠tomcatÊúçÂä°ÊñπÂºè‰∏ÄÔºöÂèØ‰ª•Áî®shutdown.shÂëΩ‰ª§ ÊñπÂºè‰∫åÔºöps -ef | grep tomcat Êü•ÁúãÂá∫tomcatËøõÁ®ãÂè∑ÂêéÔºåÁî®killÂëΩ‰ª§ 5„ÄÅÈ™åËØÅÂÖàÊääÈò≤ÁÅ´Â¢ôÂÖ≥‰∫ÜÔºàservice iptables stopÔºâÔºåÁÑ∂ÂêéËÆøÈóÆËôöÊãüÊú∫IPÁöÑ8080Á´ØÂè£]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Á≥ªÁªüÂ≠¶‰π†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux ÂÖ•Èó®Â≠¶‰π†Ôºà‰∏ÄÔºâ]]></title>
    <url>%2F2019%2F01%2F11%2FLinux%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%2B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0(%E7%AC%AC%E4%B8%80%E5%9B%9E%E5%90%88)%2F</url>
    <content type="text"><![CDATA[LinuxÁΩëÁªúÈÖçÁΩÆ+Â∏∏Áî®ÂëΩ‰ª§Â≠¶‰π†[TOC] ‰∏Ä„ÄÅ LinuxÊ¶ÇËø∞1.1. ÁÆÄ‰ªãimgLinuxÊòØ‰∏Ä‰∏™Ëá™Áî±ÁöÑÔºåÂÖçË¥πÁöÑÔºåÊ∫êÁ†ÅÂºÄÊîæÁöÑÊìç‰ΩúÁ≥ªÁªü„ÄÇ‰πüÊòØÂºÄÊ∫êËΩØ‰ª∂‰∏≠ÊúÄËëóÂêçÁöÑ‰æãÂ≠ê„ÄÇÂÖ∂ÊúÄ‰∏ªË¶ÅÁöÑÁõÆÁöÑÂ∞±ÊòØ‰∏∫‰∫ÜÂª∫Á´ã‰∏çÂèó‰ªª‰ΩïÂïÜÂìÅÂåñËΩØ‰ª∂ÁâàÊùÉÂà∂Á∫¶ÁöÑÔºåÂÖ®‰∏ñÁïåÈÉΩËÉΩ‰ΩøÁî®ÁöÑÁ±ªUnixÂÖºÂÆπ‰∫ßÂìÅ.ËÄåÊàë‰ª¨Â∞ÜÊúçÂä°Âô®ÈÉ®ÁΩ≤Âú®LinuxÂ∞Ü‰ºöÊõ¥Âä†ÁöÑÁ®≥ÂÆö„ÄÅÂÆâÂÖ®„ÄÅÈ´òÊïà‰ª•ÂèäÂá∫Ëâ≤ÁöÑÊÄßËÉΩËøôÊó∂windowsÊó†Ê≥ïÊØîÁöÑ„ÄÇ 1.2.Linux‰ΩúËÄÖimg ÊûóÁ∫≥ÊñØ¬∑Êú¨Á∫≥Á¨¨ÂÖãÁâπ¬∑ÊâòÁì¶ÂÖπÔºàLinus Benedict Torvalds, 1969Âπ¥~ ÔºâÔºåËëóÂêçÁöÑÁîµËÑëÁ®ãÂ∫èÂëò„ÄÅÈªëÂÆ¢„ÄÇLinuxÂÜÖÊ†∏ÁöÑÂèëÊòé‰∫∫ÂèäËØ•ËÆ°ÂàíÁöÑÂêà‰ΩúËÄÖ„ÄÇÊâòÁì¶ÂÖπÂà©Áî®‰∏™‰∫∫Êó∂Èó¥ÂèäÂô®ÊùêÂàõÈÄ†Âá∫‰∫ÜËøôÂ•óÂΩì‰ªäÂÖ®ÁêÉÊúÄÊµÅË°åÁöÑÊìç‰ΩúÁ≥ªÁªüÔºà‰Ωú‰∏öÁ≥ªÁªüÔºâÂÜÖÊ†∏‰πã‰∏Ä„ÄÇÁé∞ÂèóËÅò‰∫éÂºÄÊîæÊ∫ê‰ª£Á†ÅÂºÄÂèëÂÆûÈ™åÂÆ§ÔºàOSDLÔºöOpen Source Development Labs, IncÔºâÔºåÂÖ®ÂäõÂºÄÂèëLinuxÂÜÖÊ†∏„ÄÇ 1.3.Linux ÂèëË°åÁâàÂèëË°åÁâàÊòØÂü∫‰∫é Linux ÂÜÖÊ†∏ÁöÑ‰∏Ä‰∏™Êìç‰ΩúÁ≥ªÁªü„ÄÇÂÆÉÂ∏¶ÊúâÁî®Êà∑ÂèØ‰ª•‰ΩøÁî®ÁöÑËΩØ‰ª∂ÈõÜÂêà„ÄÇÊõ¥Â§öÁöÑÔºåÂÆÉËøòÂåÖÂê´Á≥ªÁªüÁÆ°ÁêÜÂåÖ„ÄÇÁõÆÂâçÊúâËÆ∏Â§ö Linux ÂèëË°åÁâà„ÄÇÂõ†‰∏∫Êàë‰ª¨‰∏çËÉΩÊï∞Ê∏ÖÁõÆÂâçÊâÄÊúâÁöÑ Linux ÂèëË°åÁâàÔºåÊâÄ‰ª•Êàë‰ª¨Êù•Áúã‰∏Ä‰∏ã‰∏Ä‰∫õÊúâÂêçÁöÑÁâàÊú¨Ôºö Ubuntu„ÄÅFedora„ÄÅOpensuse„ÄÅRed hat Linux Âíå Debian Á≠âÊòØÂá†‰∏™ÈùûÂ∏∏ÂèóÊ¨¢ËøéÁöÑ Linux ÂèëË°åÁâà„ÄÇ img C**entos** img img Ubuntu imgimg Rehat img img 1.4.LinuxÁöÑÁâπÁÇπÂºÄÊîæÊÄßÔºåÂ§öÁî®Êà∑ÔºåÂ§ö‰ªªÂä°Ôºå‰∏∞ÂØåÁöÑÁΩëÁªúÂäüËÉΩÔºåÂèØÈù†ÁöÑÁ≥ªÁªüÂÆâÂÖ®ÔºåËâØÂ•ΩÁöÑÂèØÁßªÊ§çÊÄßÔºåÂÖ∑ÊúâÊ†áÂáÜÂÖºÂÆπÊÄß ‰∫å„ÄÅÁéØÂ¢ÉÂáÜÂ§á2.1. Vmware2.1.1 VmwareÁÆÄ‰ªãÂ§ßÂ§öÊï∞ÊúçÂä°Âô®ÁöÑÂÆπÈáèÔºàCPU,ÂÜÖÂ≠òÔºåÁ£ÅÁõòÁ≠âÔºâÂà©Áî®Áéá‰∏çË∂≥ 30%ÔºåËøô‰∏ç‰ªÖÂØºËá¥‰∫ÜËµÑÊ∫êÊµ™Ë¥πÔºå‰πüÂä†Â§ß‰∫ÜÊúçÂä°Âô®ÁöÑÊï∞Èáè„ÄÇÂÆûÁé∞ÊúçÂä°Âô®ËôöÊãüÂåñÂêéÔºåÂ§ö‰∏™Êìç‰ΩúÁ≥ªÁªüÂèØ‰ª•‰Ωú‰∏∫ËôöÊãüÊú∫Âú®ÂçïÂè∞Áâ©ÁêÜÊúçÂä°Âô®‰∏äËøêË°åÔºåÂπ∂‰∏îÊØè‰∏™Êìç‰ΩúÁ≥ªÁªüÈÉΩÂèØ‰ª•ËÆøÈóÆÂ∫ïÂ±ÇÊúçÂä°Âô®ÁöÑËÆ°ÁÆóËµÑÊ∫êÔºå‰ªéËÄåËß£ÂÜ≥ÊïàÁéá‰Ωé‰∏ãÈóÆÈ¢ò„ÄÇ VmwareËôöÊãüÊú∫ÂåñÊäÄÊúØÁî±Ê≠§ËØûÁîüÔºåÂÆÉÂèØ‰ª•Â∞Ü‰∏ÄÂè∞ÊúçÂä°Âô®ËôöÊãüÂåñÂá∫Â§öÂè∞ËôöÊãüÊú∫Ôºå‰æõÂ§ö‰∫∫ÂêåÊó∂‰ΩøÁî®ÔºåÊèêÈ´òËµÑÊ∫êÂà©Áî®Áéá„ÄÇ 2.1.2 Vmware workstationÂÆâË£ÖËØ¶ÁªÜËßÅvmwareÂÆâË£ÖÊñáÊ°£ 2.2. linuxÂÆâË£ÖËØ¶ÁªÜËßÅLinuxÂÆâË£ÖÊñáÊ°£ 2.3.ÁΩëÁªúÈÖçÁΩÆ2.3.1 Êü•ÁúãÁΩëÂÖ≥img img 2.3.2 ÈÖçÁΩÆÈùôÊÄÅIP(NATÊ®°Âºè)1.ÁºñËæëÈÖçÁΩÆÊñá‰ª∂,Ê∑ªÂä†‰øÆÊîπ‰ª•‰∏ãÂÜÖÂÆπ vi /etc/sysconfig/network-scripts/ifcfg-eth0 Êåâi ËøõÂÖ•ÊñáÊú¨ÁºñËæëÊ®°ÂºèÔºåÂá∫Áé∞Ê∏∏Ê†áÔºåÂ∑¶‰∏ãËßí‰ºöÂá∫Áé∞INSERT,Âç≥ÂèØ‰ª•ÁºñËæë img Â∫îÂåÖÂê´‰ª•‰∏ãÈÖçÁΩÆÔºåÈô§Ê≠§‰πãÂ§ñÁöÑÂèØ‰ª•Âà†Èô§Êéâ„ÄÇ 123456789101112131415DEVICE=eth0 #ÁΩëÂç°ËÆæÂ§áÂêç,ËØ∑Âãø‰øÆÊîπÂêçÂ≠óTYPE=Ethernet #ÁΩëÁªúÁ±ªÂûãÔºå‰ª•Â§™ÁΩëBOOTPROTO=static #ÂêØÁî®ÈùôÊÄÅIPÂú∞ÂùÄONBOOT=yes #ÂºÄÂêØËá™Âä®ÂêØÁî®ÁΩëÁªúËøûÊé• IPADDR=192.168.78.100 #ËÆæÁΩÆIPÂú∞ÂùÄNETMASK=255.255.255.0 #ËÆæÁΩÆÂ≠êÁΩëÊé©Á†ÅGATEWAY=192.168.78.2 #ËÆæÁΩÆÁΩëÂÖ≥DNS1=114.114.114.114 #ËÆæÁΩÆÂ§áDNS ÊåâESCÈÄÄÂá∫ÁºñËæëÊ®°Âºè :wq #‰øùÂ≠òÈÄÄÂá∫ 2.‰øÆÊîπÂÆåÂêéÊâßË°å‰ª•‰∏ãÂëΩ‰ª§ service network restart #ÈáçÂêØÁΩëÁªúËøûÊé• ifconfig #Êü•ÁúãIPÂú∞ÂùÄ 3.È™åËØÅÊòØÂê¶ÈÖçÁΩÆÊàêÂäü: ËôöÊãüÊú∫ËÉΩpingÈÄöËôöÊãüÁΩëÂÖ≥ img ËôöÊãüÊú∫‰∏éÁâ©ÁêÜÊú∫ÔºàÁ¨îËÆ∞Êú¨ÔºâÁõ∏‰∫íÂèØpingÈÄö img ËôöÊãüÊú∫‰∏éÂÖ¨ÁΩë‰∏äÁöÑÁôæÂ∫¶ÁΩëÂùÄÁõ∏‰∫íÂèØpingÈÄöÔºàÊ≠§Ê≠•pingÈÄöÔºåÊâçËØ¥ÊòéÁΩëÁªúÈÖçÁΩÆÊàêÂäüÔºåCtrlÈîÆ+CÂÅúÊ≠¢Ôºâ ÂëΩ‰ª§Ôºöping www.baidu.com Ê≥®ÊÑèÔºö a.‰øùËØÅVMwareÁöÑËôöÊãüÁΩëÂç°Ê≤°ÊúâË¢´Á¶ÅÁî®img b.ÁΩëÂÖ≥IP‰∏çËÉΩË¢´Âç†Áî® 2.4.XShellÂÆâË£Ö‰∏é‰ΩøÁî®2.4.1ÂÆâË£ÖÊ≠•È™§Èô§‰∫ÜÂÆâË£ÖË∑ØÂæÑÈúÄË¶Å‰øÆÊîπÔºåÂÖ∂‰ªñ‰∏ÄÁõ¥‰∏ã‰∏ÄÊ≠•„ÄÇ 2.4.2 ËøûÊé•ËôöÊãüÊú∫ ÊâìÂºÄxshellËΩØ‰ª∂Êñ∞Âª∫‰∏Ä‰∏™‰ºöËØù img Â°´ÂÜôÊâÄË¶ÅËøûÊé•ÁöÑËôöÊãüÊú∫IPÔºå‰ºöËØùÂêçÁß∞ÂèØÊîπÂèØ‰∏çÊîπÔºåÁÇπÂáªÁ°ÆÂÆö„ÄÇ img 3.ËøûÊé•ËôöÊãüÊú∫„ÄÇ img 4ÔºéËæìÂÖ•rootÁî®Êà∑ÂêçÔºåÂèØ‰ª•ÂãæÈÄâ‚ÄùËÆ∞‰ΩèÁî®Êà∑Âêç‚Äù img 5.Â°´ÂÜôÂØÜÁ†ÅÔºåÂèØ‰ª•ÂãæÈÄâ‚ÄúËÆ∞‰ΩèÂØÜÁ†Å‚Äù img 6.ÁôªÂΩïÊàêÂäü„ÄÇ img ‰∏â„ÄÅÊñá‰ª∂Á≥ªÁªüLinuxÊñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑÊñá‰ª∂ÊòØÊï∞ÊçÆÁöÑÈõÜÂêàÔºåÊñá‰ª∂Á≥ªÁªü‰∏ç‰ªÖÂåÖÂê´ÁùÄÊñá‰ª∂‰∏≠ÁöÑÊï∞ÊçÆËÄå‰∏îËøòÊúâÊñá‰ª∂Á≥ªÁªüÁöÑÁªìÊûÑÔºåÊâÄÊúâLinux Áî®Êà∑ÂíåÁ®ãÂ∫èÁúãÂà∞ÁöÑÊñá‰ª∂„ÄÅÁõÆÂΩï„ÄÅËΩØËøûÊé•ÂèäÊñá‰ª∂‰øùÊä§‰ø°ÊÅØÁ≠âÈÉΩÂ≠òÂÇ®Âú®ÂÖ∂‰∏≠„ÄÇ LinuxÁõÆÂΩïÁªìÊûÑÔºö img bin Â≠òÊîæ‰∫åËøõÂà∂ÂèØÊâßË°åÊñá‰ª∂(ls,cat,mkdirÁ≠â) boot Â≠òÊîæÁî®‰∫éÁ≥ªÁªüÂºïÂØºÊó∂‰ΩøÁî®ÁöÑÂêÑÁßçÊñá‰ª∂ dev Áî®‰∫éÂ≠òÊîæËÆæÂ§áÊñá‰ª∂ etc Â≠òÊîæÁ≥ªÁªüÈÖçÁΩÆÊñá‰ª∂ home Â≠òÊîæÊâÄÊúâÁî®Êà∑Êñá‰ª∂ÁöÑÊ†πÁõÆÂΩï lib Â≠òÊîæË∑üÊñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑÁ®ãÂ∫èËøêË°åÊâÄÈúÄË¶ÅÁöÑÂÖ±‰∫´Â∫ìÂèäÂÜÖÊ†∏Ê®°Âùó mnt Á≥ªÁªüÁÆ°ÁêÜÂëòÂÆâË£Ö‰∏¥Êó∂Êñá‰ª∂Á≥ªÁªüÁöÑÂÆâË£ÖÁÇπ opt È¢ùÂ§ñÂÆâË£ÖÁöÑÂèØÈÄâÂ∫îÁî®Á®ãÂ∫èÂåÖÊâÄÊîæÁΩÆÁöÑ‰ΩçÁΩÆ proc ËôöÊãüÊñá‰ª∂Á≥ªÁªüÔºåÂ≠òÊîæÂΩìÂâçÂÜÖÂ≠òÁöÑÊò†Â∞Ñ root Ë∂ÖÁ∫ßÁî®Êà∑ÁõÆÂΩï sbin Â≠òÊîæ‰∫åËøõÂà∂ÂèØÊâßË°åÊñá‰ª∂ÔºåÂè™ÊúârootÊâçËÉΩËÆøÈóÆ tmp Áî®‰∫éÂ≠òÊîæÂêÑÁßç‰∏¥Êó∂Êñá‰ª∂ usr Áî®‰∫éÂ≠òÊîæÁ≥ªÁªüÂ∫îÁî®Á®ãÂ∫èÔºåÊØîËæÉÈáçË¶ÅÁöÑÁõÆÂΩï/usr/local Êú¨Âú∞ÁÆ°ÁêÜÂëòËΩØ‰ª∂ÂÆâË£ÖÁõÆÂΩï var Áî®‰∫éÂ≠òÊîæËøêË°åÊó∂ÈúÄË¶ÅÊîπÂèòÊï∞ÊçÆÁöÑÊñá‰ª∂ 3.1ÁõÆÂΩïÊìç‰Ωú3.1.1**ÂàáÊç¢ÁõÆÂΩïÂëΩ‰ª§Ôºöcd + ÁõÆÂΩïÁöÑË∑ØÂæÑ Êü•ÁúãÂΩìÂâçÁõÆÂΩïÁöÑÂÆåÊï¥Ë∑ØÂæÑ Ôºöpwd img ÂëΩ‰ª§ cd .. ËøîÂõûÂà∞Áà∂ÁõÆÂΩï img 3.1.2**Êñ∞Âª∫ÁõÆÂΩïÂëΩ‰ª§Ôºömkdir+ ÁõÆÂΩïÂêçÂ≠ó Êü•ÁúãÂΩìÂâçÁõÆÂΩï‰∏ãÊã•ÊúâÁöÑÂ≠êÁõÆÂΩïÂíåÊñá‰ª∂: ls img 3.1.3 Êã∑Ë¥ùÁõÆÂΩïcp source dest -r img 3.1.4Âà†Èô§ÁõÆÂΩïrmdir directory img Ê≥®ÊÑèÔºörmdirÂè™ËÉΩÂà†Èô§Á©∫ÁõÆÂΩï,Ëã•Ë¶ÅÂà†Èô§ÈùûÁ©∫ÁõÆÂΩïÂàôÁî®rmÂëΩ‰ª§ rm -rf dir 3.1.5ÁßªÂä®/Êõ¥Êîπ ÁõÆÂΩï‚Äã ÁßªÂä®Êñá‰ª∂ÊàñÁõÆÂΩïÔºömv + ÁõÆÂΩï/Êñá‰ª∂ÂêçÂ≠ó + ÂÖ∂‰ªñË∑ØÂæÑ ‚Äã mv test / Â∞ÜtestÁõÆÂΩïÁßªÂä®Âà∞ Ê†πÁõÆÂΩï/ ‰∏ã ‚Äã img ‚Äã Êõ¥ÊîπÊñá‰ª∂ÊàñÁõÆÂΩïÁöÑÂêçÂ≠óÔºömv + ÊóßÁõÆÂΩïÂêçÂ≠ó + Êñ∞ÁõÆÂΩïÂêçÂ≠ó„ÄÇ ‚Äã img 3.2.Êñá‰ª∂Êìç‰Ωú3.2.1Êñ∞Âª∫Êñá‰ª∂ÔºöÔºà‰∏ÄÂàáÁöÜÊñá‰ª∂Ôºâtouch web.log ÂàõÂª∫‰∏Ä‰∏™Á©∫Êñá‰ª∂„ÄÇ img 3.2.2 Â§çÂà∂Êñá‚Äã cp web.log web_cp.log img Â§çÂà∂Êñá‰ª∂ÔºåÂä†‰∏™-r ÂèÇÊï∞Ôºå‰ª£Ë°®ÈÅçÂéÜÂ§çÂà∂ÔºåÊ≠§Êó∂ÂèØÁî®‰∫éÂ§çÂà∂‰∏Ä‰∏™ÁõÆÂΩï„ÄÇ 3.2.3Âà†Èô§Êñá‰ª∂rm web_cp.log img Ê≠§Êó∂ÈúÄË¶ÅÊâãÂä®ËæìÂÖ•y Ôºå‰ª£Ë°®Á°ÆËÆ§Âà†Èô§„ÄÇÂèØÂä† ‚ÄìfÂèÇÊï∞ÔºåÁõ¥Êé•Âà†Èô§ÔºåÊó†ÈúÄÁ°ÆËÆ§„ÄÇÂΩìÈúÄË¶Å‰∏Ä‰∏™ÁõÆÂΩï‰∏ãÊâÄÊúâ‰∏úË•øÊó∂ÔºåÂä†-rÂèÇÊï∞Ôºå‰ª£Ë°®ÈÅçÂéÜÂà†Èô§„ÄÇ rm -f web.log img 3.2.4**Êü•Áúã3.2.4.1**Êü•ÁúãÁõÆÂΩï‰∏ãÁöÑ‰∏úË•ø‚Äã ls / ll ÂëΩ‰ª§ ls -l Á≠â‰ª∑‰∫é ll img Êü•ÁúãÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâ‰∏úË•øÔºàÂåÖÊã¨ÈöêËóèÊñá‰ª∂Ôºâ ÂëΩ‰ª§Ôºöls ‚Äìal Á≠â‰ª∑‰∫é ll ‚Äìa img 3.2.4.2Êü•ÁúãÊñá‰ª∂ÂÜÖÂÆπcat filename: ‰∏ÄÊ¨°ÊÄßÊòæÁ§∫Êï¥‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπ img Ê≥®ÊÑèÔºöÂΩìÊñá‰ª∂ËæÉÂ§ßÊó∂ÔºåÊñáÊú¨Âú®Â±èÂπï‰∏äËøÖÈÄüÈó™ËøáÔºàÊªöÂ±èÔºâÔºåÁî®Êà∑ÂæÄÂæÄÁúã‰∏çÊ∏ÖÊâÄÊòæÁ§∫ÁöÑÂÜÖÂÆπ„ÄÇ Âõ†Ê≠§Ôºå‰∏ÄËà¨Áî®moreÁ≠âÂëΩ‰ª§ÂàÜÂ±èÊòæÁ§∫. more filename ËØ•ÂëΩ‰ª§‰∏ÄÊ¨°ÊòæÁ§∫‰∏ÄÂ±èÊñáÊú¨ÔºåÊª°Â±èÂêéÂÅú‰∏ãÊù•ÔºåÂπ∂‰∏îÂú®Â±èÂπïÁöÑÂ∫ïÈÉ®Âá∫Áé∞‰∏Ä‰∏™ÊèêÁ§∫‰ø°ÊÅØÔºåÁªôÂá∫Ëá≥‰ªäÂ∑±ÊòæÁ§∫ÁöÑËØ•Êñá‰ª∂ÁöÑÁôæÂàÜÊØî„ÄÇ ÊåâSpaceÈîÆÔºåÊòæÁ§∫ÊñáÊú¨ÁöÑ‰∏ã‰∏ÄÂ±èÂÜÖÂÆπ„ÄÇÊåâEnterÈîÆÔºåÂè™ÊòæÁ§∫ÊñáÊú¨ÁöÑ‰∏ã‰∏ÄË°åÂÜÖÂÆπ„ÄÇ ÊåâBÈîÆÔºåÊòæÁ§∫‰∏ä‰∏ÄÂ±èÂÜÖÂÆπ„ÄÇ ÊåâQÈîÆÔºåÈÄÄÂá∫„ÄÇ ÂëΩ‰ª§Ôºömore /etc/profile img ÊòæÁ§∫ÁöÑÂÜÖÂÆπÔºö img ‚Äã lessÂëΩ‰ª§ ‰∏é moreÂëΩ‰ª§ ÈùûÂ∏∏Á±ª‰ºº less filename: ‚Äã h ÊòæÁ§∫Â∏ÆÂä©ÁïåÈù¢ Q ÈÄÄÂá∫less ÂëΩ‰ª§ u ÂêëÂêéÊªöÂä®ÂçäÈ°µ d ÂêëÂâçÁøªÂçäÈ°µ Á©∫Ê†ºÈîÆ ÊªöÂä®‰∏ÄÈ°µ b ÂêëÂêéÁøª‰∏ÄÈ°µ ÂõûËΩ¶ÈîÆ ÊªöÂä®‰∏ÄË°å [pagedown]Ôºö Âêë‰∏ãÁøªÂä®‰∏ÄÈ°µ [pageup]Ôºö Âêë‰∏äÁøªÂä®‰∏ÄÈ°µ ‰ª•Âèä‰∏ä‰∏ãÈîÆÔºåÂêë‰∏ä‰∏ÄË°åÔºåÂêë‰∏ã‰∏ÄË°å 3.2.4.3‰ªéÂ§¥ÊâìÂç∞**Êñá‰ª∂ÂÜÖÂÆπ‚Äã head -10 filename ÊâìÂç∞Êñá‰ª∂1Âà∞10Ë°å img 3.2.4.4‰ªéÂ∞æÈÉ®ÊâìÂç∞Êñá‰ª∂ÂÜÖÂÆπ tail -10 filename ÊâìÂç∞Êñá‰ª∂ÊúÄÂêé10Ë°å img Ê≥®ÊÑèÔºötail ËøòÁªèÂ∏∏ÂèØ‰ª•ÊãøÊù•Êü•ÁúãÊñá‰ª∂ÁöÑÂÜÖÂÆπÂèòÂåñ Âä†-fÂèÇÊï∞Ôºåtail ‚Äìf filename 3.2.5Êü•ÊâæÊñá‰ª∂ÊàñÁõÆÂΩï‚Äã find pathname ‚Äìname filename ‚Äã ‰æãÂ≠êÔºöfind / -name profile ‚Äã ËØ•ÂëΩ‰ª§Ë°®Á§∫‰∏∫ÔºåÂú®/ÁõÆÂΩï‰∏ãÊü•Êâæ ÂêçÂ≠ó‰∏∫profileÁöÑÊñá‰ª∂ÊàñÁõÆÂΩïÔºåÊúÄÂêéÂàóÂá∫ÂÆÉÁöÑÁªùÂØπË∑ØÂæÑ ‚Äã img ‚Äã ÊúÄÂêéÂèëÁé∞ÔºålinuxÁ≥ªÁªüÊ†πÁõÆÂΩï/ ‰∏ã ‰∏ÄÂÖ±Êúâ‰∏§‰∏™ÂêçÂ≠ó‰∏∫profileÔºå ‚Äã ÂÖ∂‰∏≠/etc/profileÊòØ‰∏Ä‰∏™Êñá‰ª∂Ôºå/etc/lvm/profile‰∏∫ÁõÆÂΩï ËøòÂèØ‰ª•ÊåâÊ≠£ÂàôË°®ËææÂºèÊù•Êü•ÊâæÔºå‰∏îpathnameË∂äÁ≤æÁ°ÆÔºåÊü•ÊâæÁöÑËåÉÂõ¥Ë∂äÂ∞èÔºåÈÄüÂ∫¶Ë∂äÂø´„ÄÇ ‚Äã find /etc -name pro* Ê≥®ÊÑèÔºöÔºàÂëΩ‰ª§ÊâßË°åÊó∂ÔºåÂÖ∂Êü•ÊâæÁöÑÁõÆÂΩïÂøÖÈ°ªÊòØÊâÄÂú®ÁõÆÂΩïÁöÑÁà∂Á∫ßÁõÆÂΩïÔºâ ‚Äã ËØ•ÂëΩ‰ª§Ë°®Á§∫‰∏∫ÔºöÂú®/etcÁõÆÂΩï‰∏ãÊü•Êâæ‰ª•proÂºÄÂ§¥ÁöÑÊñá‰ª∂ÊàñÁõÆÂΩï„ÄÇ img Âõõ„ÄÅÊñáÊú¨ÁºñËæë4.1.viÁºñËæëÊ®°Âºè vi filename :ÊâìÂºÄÊàñÊñ∞Âª∫Êñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖâÊ†áÁΩÆ‰∫éÁ¨¨‰∏ÄË°åÈ¶ñ vi +n filename ÔºöÊâìÂºÄÊñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖâÊ†áÁΩÆ‰∫éÁ¨¨nË°åÈ¶ñ vi + filename ÔºöÊâìÂºÄÊñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖâÊ†áÁΩÆ‰∫éÊúÄÂêé‰∏ÄË°åÈ¶ñ vi +/pattern filenameÔºöÊâìÂºÄÊñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖâÊ†áÁΩÆ‰∫éÁ¨¨‰∏Ä‰∏™‰∏é patternÂåπÈÖçÁöÑ‰∏≤Â§Ñ ‚Ä¢ q!Ôºö‰∏ç‰øùÂ≠òÊñá‰ª∂Âπ∂ÈÄÄÂá∫vi ‚Äì Âú®VIÁöÑÂëΩ‰ª§Ê®°Âºè‰∏ãËæìÂÖ•‚Äú:set nu‚ÄùÔºåÂ∞±ÊúâË°åÂè∑‰∫Ü„ÄÇ ‚Äì Âú®VIÁöÑÂëΩ‰ª§Ê®°Âºè‰∏ãËæìÂÖ•‚Äú:set nonu‚ÄùÔºåÂèñÊ∂àË°åÂè∑„ÄÇ ‰∏ÄËà¨Ê®°Âºè ‚Ä¢ yy Â§çÂà∂ÂÖâÊ†áÊâÄÂú®Ë°å(Â∏∏Áî®) ‚Ä¢ nyy Â§çÂà∂ÂÖâÊ†áÊâÄÂú®Ë°åÁöÑÂêë‰∏ãnË°åÔºå‰æãÂ¶ÇÔºå 20yyÂàôÊòØÂ§çÂà∂20Ë°å(Â∏∏Áî®) Ôºà‰∏çÂêåÔºöÂú®ÊàëÁöÑxshell‰∏≠ÊòØ yynÂÆûÁé∞Â§çÂà∂ÊâÄÂú®Ë°åÁöÑÂêë‰∏ãnË°åÔºâ ‚Ä¢ p,P p‰∏∫Â§çÂà∂ÁöÑÊï∞ÊçÆÁ≤òË¥¥Âú®ÂÖâÊ†á‰∏ã‰∏ÄË°åÔºå PÂàô‰∏∫Á≤òË¥¥Âú®ÂÖâÊ†á‰∏ä‰∏ÄË°å(Â∏∏Áî®) G:ÂÖâÊ†áÁßªËá≥Á¨¨ÊúÄÂêé‰∏ÄË°å nGÔºöÂÖâÊ†áÁßªÂä®Ëá≥Á¨¨NË°åË°åÈ¶ñ nÔºàshiftÔºâ+ÔºöÂÖâÊ†á‰∏ãÁßªnË°å ÔºànB|nb:ÂÖâÊ†áÂêë‰∏äÁßªÂä®nË°åÔºâ n-ÔºöÂÖâÊ†á‰∏äÁßªnË°å H ÔºöÂÖâÊ†áÁßªËá≥Â±èÂπïÈ°∂Ë°å M ÔºöÂÖâÊ†áÁßªËá≥Â±èÂπï‰∏≠Èó¥Ë°å L ÔºöÂÖâÊ†áÁßªËá≥Â±èÂπïÊúÄÂêéË°å ‚Ä¢ ddÔºöÂà†Èô§ Ë°å xÊàñXÔºöÂà†Èô§‰∏Ä‰∏™Â≠óÁ¨¶ÔºåxÂà†Èô§ÂÖâÊ†áÂêéÁöÑÔºåËÄåXÂà†Èô§ÂÖâÊ†áÂâçÁöÑ ‚Ä¢ u ÊÅ¢Â§çÂâç‰∏Ä‰∏™Âä®‰Ωú(Â∏∏Áî®) Âà†Èô§Á¨¨NË°åÂà∞Á¨¨MË°åÔºö :N,Md 4.2.vimVimÊòØ‰ªé vi ÂèëÂ±ïÂá∫Êù•ÁöÑ‰∏Ä‰∏™ÊñáÊú¨ÁºñËæëÂô®„ÄÇ‰ª£Á†ÅË°•ÂÆå„ÄÅËØ≠Ê≥ïÈ´ò‰∫Æ„ÄÅÁºñËØëÂèäÈîôËØØË∑≥ËΩ¨Á≠âÊñπ‰æøÁºñÁ®ãÁöÑÂäüËÉΩÁâπÂà´‰∏∞ÂØåÔºåÂú®Á®ãÂ∫èÂëò‰∏≠Ë¢´ÂπøÊ≥õ‰ΩøÁî®. ÂÆâË£Övim ËΩØ‰ª∂ yum install vim img ÊåâyÁ°ÆËÆ§, Ëøô‰∏≠Èó¥‰∏ÄÂÖ±Ë¶ÅÊåâ‰∏§Ê¨°Á°ÆËÆ§ img ÂèØ‰ª•Âú®‰π¶ÂÜôÂëΩ‰ª§Êó∂Â∞±Âä†y,ËøôÊ†∑Â∞±‰∏çÁî®ÈÄê‰∏ÄÁ°ÆËÆ§„ÄÇ yum install vim -y Áî®vim ÊâìÂºÄ/etc/profile Êñá‰ª∂Ôºå‰ºöÂèëÁé∞ÁºñËæëÂô®ÂØπÊñáÊú¨ÁöÑÂÜÖÂÆπËøõË°å‰∫ÜÈ´ò‰∫ÆÔºå‰ΩøÊï¥‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπÂèØËØªÊÄßÂ§ßÂ§ßÂä†Âº∫ ÂëΩ‰ª§Ôºövim /etc/profile img ‰∫î„ÄÅÊñá‰ª∂‰º†Ëæì5.1.ËøúÁ®ãÊã∑Ë¥ù5.1.1Â∞ÜÊú¨Âú∞Êñá‰ª∂Â§çÂà∂Âà∞ËøúÁ®ãÊú∫Âô® ‰∏æ‰æãÔºö 123456789101112&gt; ÊñπÂºè‰∏ÄÔºö&gt; scp -rf /etc/profile root@192.168.198.128:/etc/&gt; &gt; ÊñπÂºè‰∫å:&gt; scp -r /etc/profile root@node01 /etc/ &gt; &gt; ÊñπÂºè‰∏âÔºö&gt; scp -r /etc/profile node01:/etc/&gt; &gt; ÊñπÂºèÂõõÔºö&gt; scp -r /ec/profile node01:&apos;pwd&apos;&gt; scp ÔºöËøúÁ®ã‰º†ËæìÊñá‰ª∂ÂëΩ‰ª§ -r Ôºö- ÊåáÁöÑÊòØÂêéÈù¢Ë∑üÁöÑÊòØÂèÇÊï∞ r ÊåáÁöÑÊòØÈÅçÂéÜÊåáÂÆöÊñá‰ª∂ f ÊåáÁöÑÊòØ‰∏çÁî®ËØ¢ÈóÆ /etc/profile : ÊòØÊåáÂÆö‰º†ËæìÁöÑÊñá‰ª∂ rootÔºö ËøúÁ®ãÊú∫Âô®ÁöÑË¥¶Êà∑Âêç @ ËøúÁ®ãÊú∫Âô®ÁöÑIPÂú∞ÂùÄ Ôºö /etc/ ËøúÁ®ãÊú∫Âô®‰∏äÊåáÂÆöÁöÑÁõÆÂΩï node01ÔºöËøúÁ®ãÊú∫Âô®ÁöÑÂà´Âêç ‚Äòpwd‚ÄôÔºö Êú¨Âú∞Ë¶ÅËøúÁ®ã‰º†ËæìÊñá‰ª∂ÊâÄÂú®ÁöÑÁõÆÂΩï scp local_file remote_username@remote_ip:remote_folder img Á¨¨‰∏ÄÊ¨°ËøúÁ®ãÊã∑Ë¥ùÊó∂ÔºåÈúÄË¶ÅÂú®ÁÆ≠Â§¥1ÂàùËæìÂÖ•yesÁ°ÆËÆ§‰∏Ä‰∏ãÔºåÈ™åËØÅ‰∏Ä‰∏ãËøúÁ®ã‰∏ªÊú∫„ÄÇÁÑ∂ÂêéÂú®ÁÆ≠Â§¥2Â§ÑËæìÂÖ•‰∏Ä‰∏ãËøúÁ®ã‰∏ªÊú∫ÁöÑÂØÜÁ†Å„ÄÇ 5.1.2Â∞ÜÊú¨Âú∞ÁõÆÂΩïÂ§çÂà∂Âà∞ËøúÁ®ãÊú∫Âô®scp -r local_folder remote_username@remote_ip:remote_folder img Âú®testÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™myfileÊñá‰ª∂ÔºåÁÑ∂ÂêéÂ∞ÜtestÁõÆÂΩïËøúÁ®ãÊã∑Ë¥ùÂà∞192ËôöÊãüÊú∫ÁöÑÊ†πÁõÆÂΩï‰∏ã„ÄÇ 5.2.‰∏ä‰º†‚Äã ÈúÄÂÖàÂÆâË£ÖÂ•Ωlrzsz : yum install lrzsz -y ÂÆâË£ÖÂ•ΩÂêéÔºåËæìÂÖ•‰∏ä‰º†ÁöÑÂëΩ‰ª§rz,ÂºπÂá∫‰∏Ä‰∏ãÁïåÈù¢Ôºö img ÈÄâÊã©‰∏Ä‰∏™windowsÁ≥ªÁªüÈáåÁöÑÊñá‰ª∂‰∏ä‰º†Ëá≥ËôöÊãüÊú∫ÁöÑÂΩìÂâçÁõÆÂΩï‰∏ã,ÁÑ∂ÂêéllÂëΩ‰ª§ÔºåÊü•ÁúãÁªìÊûú img 5.3.‰∏ãËΩΩ ‰∏ãËΩΩÂëΩ‰ª§‰∏∫szÔºåszÂëΩ‰ª§Âè™ËÉΩ‰∏ãËΩΩÊñá‰ª∂Ôºå‰∏çËÉΩÊòØÁõÆÂΩïÔºåÂèØÂÖàÂ∞ÜÁõÆÂΩïÂéãÁº©Êàê‰∏Ä‰∏™ÂåÖÔºåÂÜç‰∏ãËΩΩËá≥windowsÁ≥ªÁªü„ÄÇ‰∏ãËΩΩÂÆå‰πãÂêéÔºåÊåâctrl+cÁªìÊùü„ÄÇ img 5.4 XftpÁöÑÂÆâË£Ö‰∏é‰ΩøÁî®‚Äã Èô§‰∫ÜÂèØ‰ª•Áî®rz szÂëΩ‰ª§ËøõË°åÊú¨Âú∞windowsÁ≥ªÁªüÂíåËôöÊãüÊú∫‰πãÈó¥ÁöÑÊñá‰ª∂‰º†ËæìÔºåËøòÂèØ‰ª•‰ΩøÁî®XFTPËΩØ‰ª∂„ÄÇ ÂÖ≠„ÄÅÁΩëÁªúÊåá‰ª§6.1.Êü•ÁúãÁΩëÁªúÈÖçÁΩÆ‰ø°ÊÅØÂëΩ‰ª§:ifconfig img ÁÆ≠Â§¥1ÊåáÂêëÁöÑÊòØÊú¨Êú∫IPÔºåÁÆ≠Â§¥2‰∏∫ÂπøÊí≠Âú∞ÂùÄÔºåÁÆ≠Â§¥3‰ΩçÂ≠êÁΩëÊé©Á†Å„ÄÇ 6.2.ÊµãËØï‰∏éÁõÆÊ†á‰∏ªÊú∫ÁöÑËøûÈÄöÊÄßÂëΩ‰ª§Ôºöping remote_ipÔºàÂèØ‰ª•pingÈÄöWindowsÁ≥ªÁªüÁöÑIPÔºâ img ËæìÂÖ•ping 192.168.78.192‰ª£Ë°®ÊµãËØïÊú¨Êú∫Âíå192‰∏ªÊú∫ÁöÑÁΩëÁªúÊÉÖÂÜµÔºå ÁÆ≠Â§¥1Ë°®Á§∫‰∏ÄÂÖ±Êé•Êî∂Âà∞‰∫Ü3‰∏™ÂåÖÔºåÁÆ≠Â§¥2Ë°®Á§∫‰∏¢ÂåÖÁéá‰∏∫0ÔºåË°®Á§∫‰∏§ËÄÖ‰πãÈó¥ÁöÑÁΩëÁªúÈ°∫ÁïÖ„ÄÇ Ê≥®ÊÑèÔºölinuxÁ≥ªÁªüÁöÑpingÂëΩ‰ª§‰ºö‰∏ÄÁõ¥ÂèëÈÄÅÊï∞ÊçÆÂåÖÔºåËøõË°åÊµãËØïÔºåÈô§ÈùûËÆ§‰∏∫ÁöÑÊåâctrl + cÂÅúÊ≠¢ÊéâÔºå ‚Äã windowsÁ≥ªÁªüÈªòËÆ§Âè™‰ºöÂèë4‰∏™ÂåÖËøõË°åÊµãËØïÔºå‰ª•‰∏ã‰∏∫windowsÁöÑdosÂëΩ‰ª§„ÄÇ img 6.3.ÊòæÁ§∫ÂêÑÁßçÁΩëÁªúÁõ∏ÂÖ≥‰ø°ÊÅØ‚Äã ÂëΩ‰ª§Ôºönetstat ‚Äìa n p t -a (all)ÊòæÁ§∫ÊâÄÊúâÈÄâÈ°πÔºåÈªòËÆ§‰∏çÊòæÁ§∫LISTENÁõ∏ÂÖ≥-t (tcp)‰ªÖÊòæÁ§∫tcpÁõ∏ÂÖ≥ÈÄâÈ°π-u (udp)‰ªÖÊòæÁ§∫udpÁõ∏ÂÖ≥ÈÄâÈ°π-n ÊãíÁªùÊòæÁ§∫Âà´ÂêçÔºåËÉΩÊòæÁ§∫Êï∞Â≠óÁöÑÂÖ®ÈÉ®ËΩ¨ÂåñÊàêÊï∞Â≠ó„ÄÇ-l ‰ªÖÂàóÂá∫ÊúâÂú® Listen (ÁõëÂê¨) ÁöÑÊúçÂãôÁä∂ÊÄÅ -p ÊòæÁ§∫Âª∫Á´ãÁõ∏ÂÖ≥ÈìæÊé•ÁöÑÁ®ãÂ∫èÂêç-r ÊòæÁ§∫Ë∑ØÁî±‰ø°ÊÅØÔºåË∑ØÁî±Ë°®-e ÊòæÁ§∫Êâ©Â±ï‰ø°ÊÅØÔºå‰æãÂ¶ÇuidÁ≠â-s ÊåâÂêÑ‰∏™ÂçèËÆÆËøõË°åÁªüËÆ°-c ÊØèÈöî‰∏Ä‰∏™Âõ∫ÂÆöÊó∂Èó¥ÔºåÊâßË°åËØ•netstatÂëΩ‰ª§„ÄÇ ÊèêÁ§∫ÔºöLISTENÂíåLISTENINGÁöÑÁä∂ÊÄÅÂè™ÊúâÁî®-aÊàñËÄÖ-lÊâçËÉΩÁúãÂà∞ img ‰∏É„ÄÅÁ≥ªÁªüÈÖçÁΩÆ7.1 ‰∏ªÊú∫ÂêçÈÖçÁΩÆ Ëã•Ë¶Å‰øÆÊîπ‰∏ªÊú∫ÂêçÂ≠óÔºåÂèØÂú®/etc/sysconfig/networkÊñá‰ª∂Èáå‰øÆÊîπ. vim /etc/sysconfig/network ‚Äã img Êú∫Âô®ÈáçÂêØÊâçËÉΩÁîüÊïà 7.2 DNSÈÖçÁΩÆ /etc/resolv.conf ‰∏∫DNSÊúçÂä°Âô®ÁöÑÂú∞ÂùÄÊñá‰ª∂ img 7.3 ÁéØÂ¢ÉÂèòÈáèLinuxÁ≥ªÁªüÁöÑÁéØÂ¢ÉÂèòÈáèÊòØÂú®/etc/profileÊñá‰ª∂ÈáåÈÖçÁΩÆ„ÄÇ È¶ñÂÖàËÄÉËôë‰∏Ä‰∏™ÈóÆÈ¢òÔºå‰∏∫‰ªÄ‰πàÊàë‰ª¨ÂÖàÂâçÊï≤ÁöÑyum, service,date,useraddÁ≠âÁ≠âÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÔºåÁ≥ªÁªüÊÄé‰πàÁü•ÈÅìËøô‰∫õÂëΩ‰ª§ÂØπÂ∫îÁöÑÁ®ãÂ∫èÊòØÊîæÂú®Âì™ÈáåÁöÑÂë¢Ôºü ËøôÊòØÁî±‰∫éÊó†ËÆ∫ÊòØwindowsÁ≥ªÁªüËøòÊòØlinuxÁ≥ªÁªüÔºåÈÉΩÊúâ‰∏Ä‰∏™Âè´ÂÅöpathÁöÑÁ≥ªÁªüÁéØÂ¢ÉÂèòÈáèÔºåÂΩìÊàë‰ª¨Âú®Êï≤ÂëΩ‰ª§Êó∂ÔºåÁ≥ªÁªü‰ºöÂà∞pathÂØπÂ∫îÁöÑÁõÆÂΩï‰∏ãÂØªÊâæÔºåÊâæÂà∞ÁöÑËØùÂ∞±‰ºöÊâßË°åÔºåÊâæ‰∏çÂà∞Â∞±‰ºöÊä•Ê≤°ÊúâËøô‰∏™ÂëΩ‰ª§„ÄÇÂ¶Ç‰∏ãÂõæÔºö img Êàë‰ª¨ÂèØ‰ª•Êü•Áúã‰∏Ä‰∏ãÔºåÁ≥ªÁªü‰∏ÄÂÖ±Âú®Âì™‰∫õÁõÆÂΩïÈáåÂØªÊâæÂëΩ‰ª§ÂØπÂ∫îÁöÑÁ®ãÂ∫è„ÄÇ ÂëΩ‰ª§Ôºöecho $PATH img ÂèØ‰ª•ÁúãÂà∞pathÈáåÊúâÂæàÂ§öË∑ØÂæÑÔºåË∑ØÂæÑ‰πãÈó¥ÊúâÂÜíÂè∑ÈöîÂºÄ„ÄÇÂΩìÁî®Êà∑Êï≤ÂëΩ‰ª§Êó∂ÔºåÁ≥ªÁªü‰ºö‰ªéÂ∑¶ÂæÄÂè≥‰æùÊ¨°ÂØªÊâæÂØπÂ∫îÁöÑÁ®ãÂ∫èÔºåÊúâÁöÑËØùÂàôËøêË°åËØ•Á®ãÂ∫èÔºåÊ≤°ÊúâÁöÑÂ∞±Êä•ÈîôÔºåcommand not found. ÈÇ£Â¶ÇÊûúÊàëÂÜô‰∫Ü‰∏Ä‰∏™ËÑöÊú¨ÔºàËÑöÊú¨ÂêéÈù¢‰ºö‰∏ìÈó®ËÆ≤ÔºâÔºåÊàëËØ•ÊÄéÊ†∑ËøêË°åÂÆÉÂë¢Ôºü img img ÂØπtest.shÊ∑ªÂä†ÂèØÊâßË°åÊùÉÈôêÔºåchmod 700 test.sh img ËøêË°åÊñπÊ≥ïÊúâ‰∏âÁßçÔºö ‰∏ÄÁßçÊòØÂà∞ËÑöÊú¨ÁöÑÁõÆÂΩï‰∏ãÊâßË°åÔºö ËøêË°åÂëΩ‰ª§ Ôºö ./test.sh ,‰ª£Ë°®ÊâßË°åÂΩìÂâçÁõÆÂΩïÈáåÁöÑËÑöÊú¨test.sh img ‰∏ÄÁßçÊòØÊï≤ËÑöÊú¨ÁöÑÁªùÂØπË∑ØÂæÑÔºö/usr/test/test.sh img ‰ª•‰∏ä‰∏§ÁßçËøêË°åÊñπÂºèÈÉΩ‰∏çÊòØÂæàÁÆÄ‰æøÔºåÂõ†‰∏∫ÂÖàÂâçÊàë‰ª¨ÊâßË°åyum serviceÂëΩ‰ª§Á≠âÔºåÈÉΩÊòØÁõ¥Êé•Êï≤ÂØπÂ∫îÁöÑÂëΩ‰ª§ÁöÑ„ÄÇÊâÄ‰ª•Êàë‰ª¨‰πüÂèØ‰ª•ÂèÇÁÖßËøôÊ†∑Â≠êÂÅöÔºåÂè™Ë¶ÅÊàë‰ª¨ÈÖç‰∏Ä‰∏™ÁéØÂ¢ÉÂèòÈáèÂ∞±Â•Ω„ÄÇ ÁºñËæëÔºö vim /etc/profile Â∞Ütest.shÊâÄÂú®ÁõÆÂΩïÊ∑ªÂä†Âà∞PATHÈáåÂ∞±OKÔºåÊàëËøôÈáåtest.shÊòØÂú®/usr/testÁõÆÂΩïÔºàÈÄöËøápwdÊü•ÁúãÔºâ‰∏ã„ÄÇ img ÁºñËæëÂÆå‰πãÂêéÔºåÊâßË°åsource /etc/profileÂëΩ‰ª§ÔºåÈáçÊñ∞Âä†ËΩΩÁéØÂ¢ÉÂèòÈáèÔºåÊ≠§Êó∂‰ºöÂèëÁé∞PATHË∑ØÂæÑÂ§ö‰∫Ü‰∏Ä‰∏™/usr/test„ÄÇ img ‚Äã ÊúÄÂêéÈ™åËØÅ‰∏Ä‰∏ãÔºåÁõ¥Êé•ÊâßË°åtest.sh ‚Äã img ÂÖ´„ÄÅÊúçÂä°Êìç‰Ωú8.1 ÂàóÂá∫ÊâÄÊúâÊúçÂä°ÂëΩ‰ª§Ôºöchkconfig Êü•ËØ¢Êìç‰ΩúÁ≥ªÁªüÂú®ÊØè‰∏Ä‰∏™ÊâßË°åÁ≠âÁ∫ß‰∏≠‰ºöÊâßË°åÂì™‰∫õÁ≥ªÁªüÊúçÂä°ÔºåÂÖ∂‰∏≠ÂåÖÊã¨ÂêÑÁ±ªÂ∏∏È©ªÊúçÂä°„ÄÇ img ÂêÑÊï∞Â≠ó‰ª£Ë°®ÁöÑÁ≥ªÁªüÂàùÂßãÂåñÁ∫ßÂà´Âê´‰πâÔºö ‚Äã 0ÔºöÂÅúÊú∫Áä∂ÊÄÅ 1ÔºöÂçïÁî®Êà∑Ê®°ÂºèÔºårootË¥¶Êà∑ËøõË°åÊìç‰Ωú 2ÔºöÂ§öÁî®Êà∑Ôºå‰∏çËÉΩ‰ΩøÁî®net file systemÔºå‰∏ÄËà¨ÂæàÂ∞ëÁî® 3ÔºöÂÆåÂÖ®Â§öÁî®Êà∑Ôºå‰∏ÄÈÉ®ÂàÜÂêØÂä®Ôºå‰∏ÄÈÉ®ÂàÜ‰∏çÂêØÂä®ÔºåÂëΩ‰ª§Ë°åÁïåÈù¢ 4ÔºöÊú™‰ΩøÁî®„ÄÅÊú™ÂÆö‰πâÁöÑ‰øùÁïôÊ®°Âºè 5ÔºöÂõæÂΩ¢ÂåñÔºå3Á∫ßÂà´‰∏≠ÂêØÂä®ÁöÑËøõÁ®ãÈÉΩÂêØÂä®ÔºåÂπ∂‰∏î‰ºöÂêØÂä®‰∏ÄÈÉ®ÂàÜÂõæÂΩ¢ÁïåÈù¢ËøõÁ®ã„ÄÇ 6ÔºöÂÅúÊ≠¢ÊâÄÊúâËøõÁ®ãÔºåÂç∏ËΩΩÊñá‰ª∂Á≥ªÁªüÔºåÈáçÊñ∞ÂêØÂä®(reboot) Ëøô‰∫õÁ∫ßÂà´‰∏≠1„ÄÅ2„ÄÅ4ÂæàÂ∞ëÁî®ÔºåÁõ∏ÂØπËÄåË®Ä0„ÄÅ3„ÄÅ5„ÄÅ6Áî®ÁöÑ‰ºöËæÉÂ§ö„ÄÇ3Á∫ßÂà´Âíå5Á∫ßÂà´Èô§‰∫ÜÊ°åÈù¢Áõ∏ÂÖ≥ÁöÑËøõÁ®ãÂ§ñÊ≤°Êúâ‰ªÄ‰πàÂå∫Âà´„ÄÇ‰∏∫‰∫ÜÂáèÂ∞ëËµÑÊ∫êÂç†Áî®ÔºåÊé®ËçêÈÉΩÁî®3Á∫ßÂà´. Ê≥®ÊÑè ÔºölinuxÈªòËÆ§Á∫ßÂà´‰∏∫3Ôºå‰∏çË¶ÅÊää/etc/inittab ‰∏≠initdefault ËÆæÁΩÆ‰∏∫0 Âíå 6 8.2 ÊúçÂä°Êìç‰Ωúservice ÊúçÂä°Âêç start/stop/status/restart ‰æãÂ≠êÔºöÂØπÈò≤ÁÅ´Â¢ôÊúçÂä°ËøõË°åÊìç‰ΩúÔºåÈò≤ÁÅ´Â¢ôÁöÑÊúçÂä°Âêç‰∏∫Ôºöiptables. ‚Äã Êü•ÁúãÈò≤ÁÅ´Â¢ôÊúçÂä°ËøêË°åÁä∂ÊÄÅ„ÄÇ img ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô. img ÂºÄÂêØÈò≤ÁÅ´Â¢ô img 8.3 ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ôservice iptables start/stop/status Ê≥®ÔºöÂ≠¶‰π†ÊúüÈó¥Áõ¥Êé•ÊääÈò≤ÁÅ´Â¢ôÂÖ≥ÊéâÂ∞±ÊòØÔºåÂ∑•‰ΩúÊúüÈó¥‰πüÊòØËøêÁª¥‰∫∫ÂëòÊù•Ë¥üË¥£Èò≤ÁÅ´Â¢ôÁöÑ„ÄÇ Ê∞∏‰πÖÂºÄÂêØ/ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô chkconfig iptables on/off 8.4 ÊúçÂä°ÂàùÊâßË°åÁ≠âÁ∫ßÊõ¥Êîπchkconfig ‚Äìlevel 2345 name off|on ‚Äã ÔºàÊúçÂä°ÂêçÔºâ img Ëã•‰∏çÂä†Á∫ßÂà´ÔºåÈªòËÆ§ÊòØ2345Á∫ßÂà´ ÂëΩ‰ª§Ôºöchkconfig name on|off ‚Äã ÔºàÊúçÂä°ÂêçÔºâ ‰πù„ÄÅlinuxËøõÁ®ãÊìç‰Ωú9.1 Êü•ÁúãÊâÄÊúâËøõÁ®ãÂëΩ‰ª§Ôºö ps -aux ‚Äã -a ÂàóÂá∫ÊâÄÊúâ ‚Äã -u ÂàóÂá∫Áî®Êà∑ ‚Äã -x ËØ¶ÁªÜÂàóÂá∫ÔºåÂ¶Çcpu„ÄÅÂÜÖÂ≠òÁ≠â e ‚Äã -f img ÂëΩ‰ª§Ôºö ps - ef | grep ssh Êü•ÁúãÊâÄÊúâËøõÁ®ãÈáåCMDÊòØssh ÁöÑËøõÁ®ã‰ø°ÊÅØ„ÄÇ img ÂÖ∂‰∏≠ÁÆ≠Â§¥ÊâÄÊåáÁöÑÊòØsshdÊúçÂä°ËøõÁ®ãÁöÑËøõÁ®ãÂè∑ÔºàPIDÔºâ 9.2 ÊùÄÊ≠ªËøõÁ®ãKill Áî®Ê≥ï kill pid -9ÔºöÂº∫Âà∂ÊùÄÊ≠ª ps ÂëΩ‰ª§ÂÖàÊü•Âá∫ÂØπÂ∫îÁ®ãÂ∫èÁöÑPIDÊàñPPID ÔºåÁÑ∂ÂêéÊùÄÊ≠ªÊéâËøõÁ®ã„ÄÇ img ÂçÅ„ÄÅ ÂÖ∂‰ªñÂ∏∏Áî®ÂëΩ‰ª§10.1 yumyumÊòØ‰∏Ä‰∏™Âú®FedoraÂíåRedHat‰ª•ÂèäCentOS‰∏≠ÁöÑShellÂâçÁ´ØËΩØ‰ª∂ÂåÖÁÆ°ÁêÜÂô®„ÄÇÂü∫‰∫éRPMÂåÖÁÆ°ÁêÜÔºåËÉΩÂ§ü‰ªéÊåáÂÆöÁöÑÊúçÂä°Âô®Ëá™Âä®‰∏ãËΩΩRPMÂåÖÂπ∂‰∏îÂÆâË£ÖÔºåÂèØ‰ª•Ëá™Âä®Â§ÑÁêÜ‰æùËµñÊÄßÂÖ≥Á≥ªÔºåÂπ∂‰∏î‰∏ÄÊ¨°ÂÆâË£ÖÊâÄÊúâ‰æùËµñÁöÑËΩØ‰ª∂ÂåÖÔºåÊó†È°ªÁπÅÁêêÂú∞‰∏ÄÊ¨°Ê¨°‰∏ãËΩΩ„ÄÅÂÆâË£Ö„ÄÇ Áî±‰∫écentosÁ≥ªÁªüÁöÑyumÈªòËÆ§ÊòØÂà∞ÂõΩÂ§ñÁΩëÁ´ô‰∏ãËΩΩÔºåÊúâÊó∂‰∏ãËΩΩÈÄüÂ∫¶‰ºöÂæàÊÖ¢ÔºåÊïÖÊàë‰ª¨ÂèØ‰ª•Êç¢‰∏Ä‰∏™yumÁöÑ‰∏ãËΩΩÊ∫êÔºåËøôÈáåÊàë‰ª¨Êç¢‰∏Ä‰∏™ÂõΩÂÜÖÁöÑ‰∏ãËΩΩÊ∫ê ÈòøÈáå‰∫ëÈïúÂÉè„ÄÇ Á¨¨‰∏ÄÊ≠•ÔºöÂ§á‰ªΩ‰Ω†ÁöÑÂéüÈïúÂÉèÊñá‰ª∂Ôºå‰ª•ÂÖçÂá∫ÈîôÂêéÂèØ‰ª•ÊÅ¢Â§ç„ÄÇ cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup img Á¨¨‰∫åÊ≠•Ôºö‰∏ãËΩΩÊñ∞ÁöÑCentOS-Base.repÂà∞/etc/yum.repos.d/ wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo img ‰∏ãËΩΩÂÆå‰πãÂêéÔºåvim /etc/yum.repos.d/CentOS-Base.repo Êü•Áúã‰∏Ä‰∏ãÊñá‰ª∂ÂÜÖÂÆπ„ÄÇ img Á¨¨‰∏âÊ≠•ÔºöËøêË°åyum makecacheÁîüÊàêÁºìÂ≠ò img Êü•ÁúãÂΩìÂâçÊ∫ê yum list | head -50 10.2 wgetwget ÊòØ‰∏Ä‰∏™‰ªéÁΩëÁªú‰∏äËá™Âä®‰∏ãËΩΩÊñá‰ª∂ÁöÑËá™Áî±Â∑•ÂÖ∑ÔºåÊîØÊåÅÈÄöËøá HTTP„ÄÅHTTPS„ÄÅFTP ‰∏â‰∏™ÊúÄÂ∏∏ËßÅÁöÑ TCP/IPÂçèËÆÆ ‰∏ãËΩΩÔºåÂπ∂ÂèØ‰ª•‰ΩøÁî® HTTP ‰ª£ÁêÜ ÈúÄÂÖàÂÆâË£Ö yum install wget ‚Äìy wgetÁî®Ê≥ï:wget [option] ÁΩëÂùÄ -O ÊåáÂÆö‰∏ãËΩΩ‰øùÂ≠òÁöÑË∑ØÂæÑ img img wget Â∑•ÂÖ∑ËøòÂèØ‰ª•Áî®Êù•ÂÅö‰∏Ä‰∫õÁÆÄÂçïÁöÑÁà¨Ëô´ÔºåËøôÈáå‰∏çÊòØÊàë‰ª¨ÁöÑÂ≠¶‰π†ÈáçÁÇπÔºåÂ¶ÇÊûúÊÉ≥ÂÅöÁà¨Ëô´ÔºåÂèØ‰ª•Áî®javaÊàñpythonËØ≠Ë®ÄÊù•ÂÅö„ÄÇ img 10.3 tartar ‚Äã -z gzipËøõË°åËß£ÂéãÊàñÂéãÁº©ÔºåÂ∏¶.gzÈúÄË¶ÅÂä†ÔºåÂéãÁº©Âá∫Êù•.gz‰πüÈúÄË¶ÅÂä† ‚Äã -x Ëß£Âéã ‚Äã -c ÂéãÁº© ‚Äã -f ÁõÆÊ†áÊñá‰ª∂ÔºåÂéãÁº©Êñá‰ª∂Êñ∞ÂëΩÂêçÊàñËß£ÂéãÊñá‰ª∂Âêç ‚Äã -v Ëß£ÂéãÁº©ËøáÁ®ã‰ø°ÊÅØÊâìÂç∞ Ëß£ÂéãÂëΩ‰ª§Ôºötar -zvxf xxxx.tar.gz ‰æãÂ≠êÔºöÂÖàÁî®rzÂëΩ‰ª§Êàñwscp‰∏ä‰º†‰∏Ä‰∏™tarÂåÖÔºåÁÑ∂ÂêéËß£Âéã„ÄÇ img img Ëß£ÂéãÂêéÔºö img ÂéãÁº©ÂëΩ‰ª§Ôºötar -zcf ÂéãÁº©ÂåÖÂëΩÂêç ÂéãÁº©ÁõÆÊ†á ‰æãÂ≠êÔºötar -zcf tomcat.tar.gz apache-tomcat-7.0.61 Â∞Ü apache-tomcat-7.0.61 ÁõÆÂΩïÂéãÁº©Êàêtomcat.tar.gzÂåÖ„ÄÇ img ÂçÅ‰∏Ä„ÄÅJDKÈÉ®ÁΩ≤11.1 ÂÆòÁΩë‰∏ãËΩΩhttp://www.oracle.com/technetwork/java/javase/downloads/index.html img img 11.2 ‰∏ä‰º†Âπ∂Ëß£ÂéãÁî®xftpÂ∞ÜjdkÂåÖ‰∏ä‰º†Âà∞linuxÁ≥ªÁªüÈáåÔºåÊàëËøôÈáå‰∏ä‰º†Âà∞/usr/softÁõÆÂΩï‰∏ã„ÄÇ ÁÑ∂ÂêéËß£Âéã: tar -zxf jdk-7u80-linux-x64.tar.gz img 11.3ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆÂÖ®Â±ÄJAVA_HOMEÔºåÂπ∂Âú®PATHË∑ØÂæÑÈáåÂä†ÂÖ•java_home/bin. Ê≥®ÊÑèÔºöÊñ∞ÁöÑpathË∑ØÂæÑÂøÖÈ°ªË¶ÅÂåÖÂê´ÊóßÁöÑPATHË∑ØÂæÑÔºå‰∏îÊØè‰∏™Ë∑ØÂæÑ‰πãÈó¥‰ª•ÂÜíÂè∑ÈöîÂºÄÔºåËÄå‰∏çÊòØÂàÜÂè∑ vim /etc/profile JAVA_HOME= /usr/soft/jdk1.7.0_75 PATH=$PATH:$JAVA_HOME/bin img ÈáçÊñ∞Âä†ËΩΩÁéØÂ¢ÉÂèòÈáèÔºösource /etc/profile img 11.4 È™åËØÅjava -version img Â¶ÇÂá∫Áé∞‰∏äÂõæÔºåÂàôË°®Á§∫javaÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆÊàêÂäü„ÄÇ ÂçÅ‰∫å„ÄÅÈÉ®ÁΩ≤Tomcat12.1 ÂÆòÁΩë‰∏ãËΩΩ‰∏ãËΩΩtomcat http://tomcat.apache.org/ 12**.2 ‰∏ä‰º†Âπ∂Ëß£Âéã**ÊàëËøôÈáå‰∏ä‰º†Ëá≥/usr/softÁõÆÂΩï‰∏ãÔºåÁÑ∂ÂêéËß£Âéã„ÄÇ img 12.3 ÂêØÂä®tomcatÂú®tomcatÁöÑbinÁõÆÂΩï‰∏ãÊúâ‰∏™startup.sh ËÑöÊú¨ÂèØ‰ª•Áõ¥Êé•ÂêØÂä®tomcatÊúçÂä° img ÂÖ≥Èó≠tomcatÊúçÂä°ÔºåÂèØ‰ª•Áî®shutdown.shÂëΩ‰ª§„ÄÇ ÊàñËÄÖps -ef | grep tomcat Êü•ÁúãÂá∫tomcatËøõÁ®ãÂè∑ÂêéÔºåÁî®killÂëΩ‰ª§„ÄÇ 12.4 jpsjpsÊòØJDK 1.5Êèê‰æõÁöÑ‰∏Ä‰∏™ÊòæÁ§∫ÂΩìÂâçÊâÄÊúâjavaËøõÁ®ãpidÁöÑÂëΩ‰ª§ÔºåÁÆÄÂçïÂÆûÁî®ÔºåÈùûÂ∏∏ÈÄÇÂêàÂú®linux/unixÂπ≥Âè∞‰∏äÁÆÄÂçïÂØüÁúãÂΩìÂâçjavaËøõÁ®ãÁöÑ‰∏Ä‰∫õÁÆÄÂçïÊÉÖÂÜµ„ÄÇ img Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåjpsÂëΩ‰ª§ÊòæÁ§∫Âá∫‰∫ÜÔºåÁ≥ªÁªüÂΩìÂâçËøêË°åÂú®jvm‰∏äÁöÑËøõÁ®ãÊÉÖÂÜµ„ÄÇÂÖ∂‰∏≠BootstrapÊòØtomcatÁöÑËøõÁ®ãÂêçÂ≠óÔºå1996ÊòØtomcatÁöÑPID 13.5È™åËØÅÂÖàÊääÈò≤ÁÅ´Â¢ôÂÖ≥‰∫ÜÔºàservice iptables stopÔºâÔºåÁÑ∂ÂêéËÆøÈóÆËôöÊãüÊú∫IPÁöÑ8080Á´ØÂè£ img]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Á≥ªÁªüÂ≠¶‰π†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinuxÁ≥ªÁªüCentOS 6]]></title>
    <url>%2F2019%2F01%2F11%2FLinux%E7%B3%BB%E7%BB%9FCentOS%206%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅÂÆâË£Ö ËµÑÊ∫êÂáÜÂ§áÔºö CentOS-6.6-x86_64-minimal.isoÔºàÁÆÄÊòìËø∑‰Ω†ÁâàÔºâ Ôºö CentOS-6.7-x86_64-bin-DVD1.isoÔºàÂÆåÊï¥ÁâàÔºâÔºö 1„ÄÅÁÇπÂáªÊñ∞Âª∫ËôöÊãüÊú∫img 2„ÄÅÈÄâÊã©ÂÖ∏Âûã„ÄÇÔºà‰∏ì‰∏ö‰∫∫Â£´‰ΩøÁî®ÁöÑËØùÂª∫ËÆÆÈÄâÊã©È´òÁ∫ßÔºâimg 3. ÈÄâÊã©Á®çÂêéÂÆâË£ÖÊìç‰ΩúÁ≥ªÁªüimg 4. ÈÄâÊã©Êìç‰ΩúÁ≥ªÁªüÁ±ªÂûãÔºåÈÄâÊã©linux,centos 64‰Ωçimg 5. ÈÄâÊã©ËôöÊãüÊú∫ÂÆâË£Ö‰ΩçÁΩÆÂíåÂêçÁß∞„ÄÇimg 6. ÊåáÂÆöÁ£ÅÁõòÂÆπÈáèÔºåÈªòËÆ§20GB„ÄÇimg 7. ÈÄâÊã©Ëá™ÂÆö‰πâÁ°¨‰ª∂img 8. ÁÇπÂáªCD/DVD,ÁÑ∂ÂêéÈÄâÊã©Êìç‰ΩúÁ≥ªÁªüÁöÑISOÊò†ÂÉèÊñá‰ª∂ÔºåÈÄâÊã©ÂÆåÂêéÔºåÁÇπÂáªÂÖ≥Èó≠„ÄÇimg 9.ÁÇπÂáªÂÆåÊàê„ÄÇimg ‰∫å„ÄÅÈÖçÁΩÆËôöÊãüÊú∫1. ÂêØÂä®ËôöÊãüÊú∫„ÄÇimgÊ≥®ÊÑèÔºöÂ¶ÇÊûúÂêØÂä®ËôöÊãüÊú∫Êó∂ÔºåÂèëÁîü‰ª•‰∏ãÈóÆÈ¢òÔºåËØ¥ÊòéÊòØ‰Ω†ÁöÑÁîµËÑëÈªòËÆ§Êú™ÂºÄÂêØËôöÊãüÂåñÊäÄÊúØ„ÄÇ img Ê≠§Êó∂‰Ω†Â∫îËØ•ÊääÊú∫Âô®ÈáçÂêØÂπ∂ËøõÂÖ•biosÁïåÈù¢Ôºà‰∏çÂêåÁöÑÊú∫Âô®ËøõÂÖ•biosÁïåÈù¢ÁöÑÂø´Êç∑ÈîÆ‰∏çÂêåÔºå‰∏ÄËà¨‰∏∫F1~F10ÈîÆ‰∏≠ÁöÑÊüê‰∏™ÈîÆÔºåÂ¶ÇÊûúÈÉΩ‰∏çË°åÔºåÂ∞±ÂæóËá™Â∑±ÁôæÂ∫¶‰∏Ä‰∏ã‰Ω†ÁöÑÊú∫Âô®ÂûãÂè∑ËøõÂÖ•biosÁïåÈù¢ÁöÑÂø´Êç∑ÊñπÂºèÔºâ„ÄÇ ‚Äã ÂΩìËøõÂÖ•biosÁïåÈù¢ÂêéÔºåÊääËôöÊãüÊú∫ÂåñÈÄâÈ°πÔºàvirtualization technologyÔºâÊâìÂºÄ,ÈÄöËøáÂõûËΩ¶ÈîÆÔºåÊäädisabledÊîπÊàêenabled,ÁÑ∂Âêé‰øùÂ≠òÂπ∂ÈáçÂêØÊú∫Âô®„ÄÇÊàëËøôËæπÊòØÊåâF10Ôºå‰∏çÂêåÊú∫Âô®ÂèØËÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÁúãÂè≥‰∏ãËßíÁöÑÊèêÁ§∫‰ø°ÊÅØ„ÄÇ img 2.Test Media, Â¶ÇÊûú‰∏çÈúÄË¶ÅÁöÑËØùÔºåÁÇπSkipimg 3„ÄÅÂçïÂáªNextÊåâÈíÆÁªßÁª≠img 4. ÈÄâÊã©ÂÆâË£ÖÊúüÈó¥ÊòæÁ§∫ÁöÑËØ≠Ë®Äimg 5„ÄÅÈÄâÊã©ÈîÆÁõòËØ≠Ë®Äimg 6„ÄÅÈÄâÊã©Â≠òÂÇ®‰ªãË¥®ÁöÑÁ±ªÂà´„ÄÇÂ¶ÇÊûúÊòØÂ∞ÜCentOS 6ÂÆâË£ÖÂà∞Êú¨Âú∞Á°¨Áõò‰∏äÔºåÈÄâÊã© Basic Storage DevicesÔºåÂ¶ÇÊûúÂÆâË£ÖÂà∞ÁΩëÁªúÂ≠òÂÇ®‰ªãË¥®Â¶ÇSANs‰∏äÔºåÈÄâÊã© Specialized Storage Devices img 7.ÈÄâÊã© yes,discard any dataimg 8. ËÆæÂÆö‰∏ªÊú∫ÂêçÁß∞ÔºàhostnameÔºâimg 9. ËÆæÂÆöÊó∂Âå∫ÔºåÈÄâÊã© Asia/Shanghaiimg 10. ËÆæÂÆörootÂ∏êÊà∑ÁöÑÂØÜÁ†ÅÂ∞ΩÈáè‰ΩøÁî®ËæÉÂ§çÊùÇÁöÑÂØÜÁ†ÅÂÆâË£ÖÔºàÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµÔºåÂØÜÁ†ÅÁÆÄÂçïÊó∂Ôºå‰ºöÊúâÊèêÁ§∫ÔºåÁÇπÂáªuser anyway Â∞±Ë°åÔºâ img 11. ÈÄâÊã©ÂÆâË£ÖÁ±ªÂûãÔºåËøôÈáåÊàëÈÄâÊã© ‚ÄúUse All Space‚Äù img 12. ÈÄâÊã© ‚ÄúWrite changes to disk‚ÄùÔºåÂ∞ÜÂàÜÂå∫Êï∞ÊçÆÂÜôÂÖ•Á°¨Áõòimg 13. ÂºÄÂßãÂÆâË£ÖÔºåÊ≠§Êó∂Âè™ÈúÄÁ≠âÂæÖÂç≥ÂèØimg 14. ÂÆâË£ÖÂÆåÁªìÂêéÔºåÁÇπÂáªRebootÊåâÈíÆimg]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>CentOS 6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinuxÁ≥ªÁªüÊï∞ÊçÆÂ∫ìMySQLÂÆâË£Ö]]></title>
    <url>%2F2019%2F01%2F10%2FLinux%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93MySQL%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[[TOC] LinuxÁ≥ªÁªüÊï∞ÊçÆÂ∫ìMySQLÂÆâË£Ö‰∏Ä„ÄÅÁ¨¨‰∏ÄÊ¨°ÂÆâË£ÖMySQL1„ÄÅyumÂÆâË£Ö ÂëΩ‰ª§ Ôºö yum -y install mysql-server mysql-devel 2„ÄÅÁôªÂΩï ÂëΩ‰ª§ Ôºö mysql -u -p ÊòæÁ§∫Ôºö 1mysql&gt; 3„ÄÅÊü•ÁúãÊï∞ÊçÆÂ∫ì(Ê≥®ÊÑèÁî®‚Äò ; ‚ÄôÁªìÊùü ) ÂëΩ‰ª§ Ôºö show databases; 4„ÄÅÈÄÄÂá∫Ôºö ÂëΩ‰ª§Ôºö quitÔºõ 5„ÄÅÂàõÂª∫Áî®Êà∑Ôºö ÂëΩ‰ª§ Ôºö mysqladmin -uroot password 123456 6„ÄÅÂÜçÁôªÂΩïÔºö ÂëΩ‰ª§ Ôºömysql -u root -p ÊòæÁ§∫Ôºö 1mysql&gt; ËØ¥ÊòéÊàêÂäü‰∫ÜÔºÅ 7„ÄÅÊï∞ÊçÆÂ∫ìÊìç‰ΩúÔºö ÂëΩ‰ª§ Ôºö use mysql; ÊòæÁ§∫Ôºö 1234Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changed 8„ÄÅÊü•ÁúãÁî®Êà∑Êï∞ÊçÆË°®Ôºö ÂëΩ‰ª§ Ôºö show tables; 9„ÄÅÊü•ËØ¢userË°®ÈÉ®ÂàÜÂ≠óÊÆµÔºö ÂëΩ‰ª§ Ôºö select host,user,password from user; 10„ÄÅÈÄöËøá‰øÆÊîπuserË°®ÁöÑhostÂ≠óÊÆµÔºåËÆæÁΩÆÊï∞ÊçÆÂ∫ìËÆøÈóÆÊùÉÈôêÔºåÂè™Ë¶ÅÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÊ≠£Á°ÆÔºà1ÔºâÊé®ËçêÁé∞Â∞ÜuserË°®‰∏≠ÂÖ∂‰ªñÊó†ÂØÜÁ†ÅÁöÑËÆ∞ÂΩïÂà†Èô§ ÂëΩ‰ª§ Ôºö delete from user where password = ‚Äò ‚Äò; (2)Êõ¥Êñ∞ÊúâÂØÜÁ†ÅÁöÑËÆ∞ÂΩïÁöÑhostÂ≠óÊÆµÂÄº ÂëΩ‰ª§ Ôºö update user set host = ‚Äú%‚Äù; (3)Âà∑Êñ∞ÊùÉÈôê ÂëΩ‰ª§ Ôºöflush privileges; (4)ÈÄÄÂá∫ ÂëΩ‰ª§ Ôºöquit; ‰∫å„ÄÅLinuxÁ≥ªÁªüÁôªÂΩïÊï∞ÊçÆÂ∫ìMySQLÊä•ÈîôÊä•Èîô‰∏ÄÔºö1„ÄÅÁôªÂΩï mysqld -uroot -p123456 Êä•ÈîôÔºö 1Can&apos;t connect to local MySQL server through socket &apos;/var/lib/mysql/mysql.sock&apos; (111) Ëß£ÂÜ≥Ôºö 1Ôºâ„ÄÅÂÖàÂà†Èô§mysql.sock cd /var/lib/mysql mv mysql.sock mysql.sock.bak 2Ôºâ„ÄÅÂÜçÊ¨°ÁôªÈôÜ mysql -uroot -p123456 Êä•ÈîôÔºö 1Can&apos;t connect to local MySQL server through socket &apos;/var/lib/mysql/mysql.sock&apos; (2) 3Ôºâ„ÄÅÁúãÁúãmysqlÁöÑÁä∂ÊÄÅÔºå /etc/rc.d/init.d/mysqld status ÊòæÁ§∫Ôºö mysqld is stopped 4Ôºâ„ÄÅÁúãÁúãÊòØ‰∏çÊòØmysqlÁöÑÊùÉÈôêÈóÆÈ¢òÂú®/var/libÁõÆÂΩï‰∏ãÔºö ls -lt|grep mysql ÊòæÁ§∫Ôºö drwxr-xr-x. 4 mysql mysql 4096 Jan 6 11:09 mysql 5Ôºâ„ÄÅËØ¥ÊòémysqlÊúçÂä°Ê≤°ÊúâÂêØÂä® 2„ÄÅÂêØÂä®mysqlÊúçÂä° /etc/init.d/mysqld start ÊòæÁ§∫Ôºö 1Starting mysqld: [ OK ] 3„ÄÅÂÜçÊ¨°ÁôªÂΩïÔºö mysql -uroot -p123456 ÊòæÁ§∫Ôºö 12345678910111213Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 2Server version: 5.1.73 Source distributionCopyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; 4„ÄÅÈÄÄÂá∫ quit 5„ÄÅËß£ÂÜ≥Âá∫Áé∞mysql.sockÁöÑÈóÆÈ¢ò Ôºà1Ôºâ„ÄÅvim /etc/mycnf ÁºñËæëÂÜÖÂÆπÔºö 12[mysqld]skip_name_resolve=on innodb_file_per_table=on Êåâesc :wq ‰øùÂ≠òÂπ∂ÈÄÄÂá∫ Ôºà2Ôºâ‰ΩøÁî®ÂëΩ‰ª§Ôºö mysql_secure_installation Ôºà3ÔºâÁõ¥Êé•[ enter ] ÈîÆÔºåËæìÂÖ•ÂØÜÁ†ÅÔºå (Âè¶Êé®ËçêÔºöJakie_ZHFËÄÅÂ∏àÁöÑÂçöÂÆ¢) Êä•Èîô‰∫åÔºö1ERROR 1045 (28000): Access denied for user &apos;root&apos;@&apos;localhost&apos; (using password: YES)]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>LinuxÁ≥ªÁªüÁéØÂ¢É</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§ßÊï∞ÊçÆÊÄùÊÉ≥]]></title>
    <url>%2F2019%2F01%2F05%2F%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%80%9D%E6%83%B3%2F</url>
    <content type="text"><![CDATA[[TOC] 1„ÄÅÂ§ßÊï∞ÊçÆÊ†∏ÂøÉÈóÆÈ¢òÔºö==Êµ∑ÈáèÊï∞ÊçÆ„ÄÅÂ∑•‰∏öÊäÄÊúØËêΩÂêé„ÄÅÁ°¨‰ª∂ÊçüÂùèÂ∏∏ÊÄÅÂåñÔºàCtrl+MÔºâ== 2„ÄÅÂ§ßÊï∞ÊçÆÊÄùÁª¥ÂàÜËÄåÊ≤ª‰πã Êää‰∏Ä‰∏™Â§çÊùÇÁöÑÈóÆÈ¢òÊåâ‰∏ÄÂÆöÁöÑ‚ÄúÂàÜËß£‚ÄùÊñπÊ≥ïÂàÜ‰∏∫Á≠â‰ª∑ÁöÑËßÑÊ®°ËæÉÂ∞èÁöÑËã•Âπ≤ÈÉ®ÂàÜÔºåÁÑ∂ÂêéÈÄê‰∏™Ëß£ÂÜ≥ÔºåÁÑ∂ÂêéÂàÜÂà´ÊâæÂá∫ÂêÑÈÉ®ÂàÜÁöÑ‰∏≠Èó¥ÁªìÊûúÔºåÊúÄÂêéÂ∞ÜÂêÑ‰∏™ÈÉ®ÂàÜÁöÑ‰∏≠Èó¥ÁªìÊûúÁªÑÊàêÊï¥‰∏™ÈóÆÈ¢òÁöÑÊúÄÁªàÁªìÊûúÔºàCtrl+QÔºâ enter description here 3„ÄÅ‰∏öÂä°Âú∫ÊôØ‰ªìÂÇ®„ÄÅÊï∞Áâå ‰∏öÂä°‰∏ÄÔºöÊâæ{ÈáçÂ§çË°å}(chongfuhang)++Áé∞Êúâ1TBÁöÑTXTÊñá‰ª∂ ;Ê†ºÂºèÔºöÊï∞Â≠ó+Â≠óÁ¨¶ ÔºõÁΩëÈÄüÔºö500M/s ÔºõÊúçÂä°Âô®ÂÜÖÂ≠òÂ§ßÂ∞èÔºö128M ÔºõÊù°‰ª∂Ôºö‰ªÖÊúâ‰∏§Ë°åÈáçÂ§ç ÔºåÂÜÖÂ≠ò‰∏çËÉΩÊîæ‰∏ãÂÖ®ÈáèÊï∞ÊçÆÔºàOMÔºöout of memeryÔºâÔºõ++ enter description here ==ÊñπÊ≥ï== Á≠îÔºöÂÖ±ÈúÄË¶Å2Ê¨°IOÔºö2*30min=1h ==Á¨¨‰∏ÄÊ¨°IO==Ôºö ÁªôÊØè‰∏ÄË°åÂÜÖÂÆπÂä†‰∏äÂîØ‰∏ÄÊ†áËÆ∞ÔºàhashcodeÔºàÂÜÖÂÆπÔºâÔºåvalueÔºàË°åÂè∑ÔºâÔºâ„ÄÇÂØπÊØè‰∏ÄË°åÂÜÖÂÆπËøõË°åhashËøêÁÆóÔºåÂæóÂà∞ÂîØ‰∏ÄÊ†áËØÜhashcodeÔºå‰Ωú‰∏∫keyÔºåÂ∞ÜË°åÂè∑‰Ωú‰∏∫value„ÄÇÁÑ∂ËÄåÔºåÂØπ‰∫éÂÜÖÂÆπÂÆåÂÖ®ÈáçÂ§çÁöÑ‰∏§Ë°åÔºåÂÖ∂hashcodeÂÄº‰∏ÄÂÆöÁõ∏Âêå„ÄÇ `ÂØπÊØè‰∏ÄË°åÁöÑhashÂÄºËøõË°åÂèñÊ®°ËøêÁÆóÔºåÂπ∂ÊîæÁΩÆ‰∫éÂΩíÁ±ªÂàÜÂå∫ÁöÑÂ∞èÊñá‰ª∂‰∏≠`„ÄÇÁî±‰∫éÊï∞ÊçÆÂü∫Êï∞ËøáÂ§ßÔºåÂ∞±Â∞ÜÊØèË°åÁöÑkeyÂÄºÂØπÂèñÊ®°ÔºåËΩ¨Âåñ‰∏∫Â∞èÊñá‰ª∂ÔºåÂ¶ÇÂ∞ÜhashÂÄºÂØπ100ÂèñÊ®°ÔºåÂàô‰∫ßÁîü100‰∏™Â∞èÊñá‰ª∂ÂàÜÂå∫ÔºåÂèñÊ®°ÂêéÁõ∏ÂêåÁöÑÊîæÂú®Âêå‰∏Ä‰∏™ÂàÜÂå∫‰∏≠„ÄÇ ==Á¨¨‰∫åÊ¨°IO==Ôºö Âú®ÊØè‰∏™ÂàÜÂå∫‰∏≠ÁöÑÂ∞èÊñá‰ª∂ÈÅçÂéÜÔºåÂØπÊØè‰∏ÄË°åËøõË°åÊØîËæÉÔºåÂõ†‰∏∫ÈáçÂ§çË°å‰∏ÄÂÆö‰ºöÂú®Âêå‰∏Ä‰∏™ÂàÜÂå∫‰∏≠„ÄÇËøôÊ†∑Â∑•‰ΩúÈáèÂ∞±‰ºöÂ§ßÂ§ßÂáèÂ∞è„ÄÇ ‰∏öÂä°‰∫åÔºöÂø´{ÊéíÂ∫è}(paixu)++Áé∞Êúâ1TBÁöÑTXTÊñá‰ª∂ ;Ê†ºÂºèÔºöÊï∞Â≠óÔºõÁΩëÈÄüÔºö500M/s ÔºõÊúçÂä°Âô®ÂÜÖÂ≠òÂ§ßÂ∞èÔºö128M ÔºõÊù°‰ª∂ÔºöÂÆûÁé∞Âø´ÊéíÂ∫èÔºåÂÜÖÂ≠ò‰∏çËÉΩÊîæ‰∏ãÂÖ®ÈáèÊï∞ÊçÆÔºàOMÔºöout of memeryÔºâÔºõ++ ‰∏§Ê¨°IOÔºå2 * 30ÂàÜÈíü = 1Â∞èÊó∂ enter description here ==ÊñπÊ≥ï‰∏ÄÔºöÂÖàÂÖ®Â±ÄÊúâÂ∫èÂêéÂ±ÄÈÉ®ÊúâÂ∫è== 1.ÂØπÂÖ®Â±ÄÊåâÂàÜÂå∫ÊéíÂ∫èÔºàÁî±Â§ßÂà∞Â∞èÔºâ„ÄÇ‚Äã Áî®if„ÄÇ„ÄÇelseÊñπÊ≥ïÂØπÊï∞ÊçÆËøõË°åÊåâËåÉÂõ¥ÂàÜÁ±ªÔºåËêΩÂà∞‰∏çÂêåÁöÑÂàÜÂå∫‰∏≠Ôºà0~1000„ÄÅ1001~2000„ÄÅ2001~3000¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑Ôºâ 2.ÂØπÂ±ÄÈÉ®ËøõË°åÊéíÂ∫èÔºàÁî±Â§ßÂà∞Â∞èÔºâ„ÄÇ‚Äã ÂØπÊØè‰∏™ÂàÜÂå∫ËøõË°åÊéíÂ∫è„ÄÇ enter description here ==ÊñπÊ≥ï‰∫åÔºöÂÖàÂ±ÄÈÉ®ÊúâÂ∫èÂêéÂÖ®Â±ÄÊúâÂ∫è== ÂÖàÂÆûÁé∞Â±ÄÈÉ®ÊúâÂ∫è(Â∞è‚Äì&gt;Â§ß)„ÄÇÂ∞ÜÊñá‰ª∂ÂàíÂàÜ‰∏∫N‰∏™ÂàÜÂå∫ÔºåÂú®ÊØè‰∏™ÂàÜÂå∫ÂÜÖÈÉ®ËøõË°åÊéíÂ∫è ‰ΩøÁî®ÂΩíÂπ∂ÂÆûÁé∞ÂÖ®Â±ÄÊúâÂ∫è„ÄÇÊØè‰∏™ÂàÜÂå∫ÂàÜÂà´ÂêÑËá™ÂèñÂá∫ÊúÄÂ∞èÂÄºÔºåÊãøÂá∫Êù•ÊØîËæÉÔºåÊúÄÂ∞èÂÄºÊîæÂú®‰∏ÄÊóÅÔºåÊúÄÂ∞èÂÄºÊâÄÂú®ÁöÑÈÇ£‰∏™ÂàÜÂå∫ÂÜçÊãøÂá∫Ââ©‰∏ãÊï∞ÊçÆ‰∏≠ÁöÑÊúÄÂ∞èÂÄºÔºåÂÜçËøõË°åÊØîËæÉÔºåÊØîËæÉÂá∫ÁöÑÊúÄÂ∞èÂÄºÔºåÊéíÂú®‰∏ä‰∏ÄÊ¨°ÁöÑÊúÄÂ∞èÂÄºÂêéÔºå‰æùÊ¨°ËøõË°å‰∏ãÂéªÔºåËøôÊ†∑Â∞±ÂÆûÁé∞‰∫ÜÂÖ®Â±ÄÊúâÂ∫è„ÄÇ Áü•Âê¶]]></content>
      <categories>
        <category>Â§¥ËÑëÈ£éÊö¥</category>
      </categories>
      <tags>
        <tag>ÂàÜËÄåÊ≤ª‰πã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MapReduceÂ≠¶‰π†]]></title>
    <url>%2F2019%2F01%2F05%2FMapReduce%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅMapReduceÊòØ‰ªÄ‰πà1„ÄÅÊ¶ÇÂøµ MapReduceÊòØ‰∏ÄÁßçÂàÜÂ∏ÉÂºèÁ¶ªÁ∫øËÆ°ÁÆóÊ°ÜÊû∂ÔºåÊòØ‰∏ÄÁßçÁºñÁ®ãÊ®°ÂûãÔºåÁî®‰∫éÂú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏äÂ§ßËßÑÊ®°Êï∞ÊçÆÈõÜ(Â§ß‰∫é1TB)ÁöÑÂπ∂Ë°åËøêÁÆó„ÄÇ ÂàÜÂ∏ÉÂºèÁºñÁ®ãÔºö ÂÄüÂä©‰∏Ä‰∏™ÈõÜÁæ§ÔºåÈÄöËøáÂ§öÂè∞Êú∫Âô®ÂéªÂπ∂Ë°åÂ§ÑÁêÜÂ§ßËßÑÊ®°Êï∞ÊçÆÈõÜÔºå‰ªéËÄåËé∑ÂæóÊµ∑ÈáèËÆ°ÁÆóËÉΩÂäõ„ÄÇ 2„ÄÅÁêÜËß£ Map(Êò†Â∞Ñ) Reduce(ÂΩíÁ∫¶) ÊåáÂÆö‰∏Ä‰∏™Map(Êò†Â∞Ñ)ÂáΩÊï∞ÔºåÁî®Êù•Êää‰∏ÄÁªÑÈîÆÂÄºÂØπÊò†Â∞ÑÊàê‰∏ÄÁªÑÊñ∞ÁöÑÈîÆÂÄºÂØπÔºåÊåáÂÆöÂπ∂ÂèëÁöÑReduce(ÂΩíÁ∫¶)ÂáΩÊï∞ÔºåÁî®Êù•‰øùËØÅÊâÄÊúâÊò†Â∞ÑÁöÑÈîÆÂÄºÂØπ‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÂÖ±‰∫´Áõ∏ÂêåÁöÑÈîÆÁªÑ„ÄÇ ‰∫å„ÄÅMapReduceËÆæËÆ°ÁêÜÂøµ1„ÄÅÂàÜÂ∏ÉÂºèËÆ°ÁÆó ÂàÜÂ∏ÉÂºèËÆ°ÁÆóÂ∞ÜËØ•Â∫îÁî®ÂàÜËß£ÊàêËÆ∏Â§öÂ∞èÁöÑÈÉ®ÂàÜÔºåÂàÜÈÖçÁªôÂ§öÂè∞ËÆ°ÁÆóÊú∫ËäÇÁÇπËøõË°åÂ§ÑÁêÜ„ÄÇËøôÊ†∑ÂèØ‰ª•ËäÇÁ∫¶Êï¥‰ΩìËÆ°ÁÆóÊó∂Èó¥ÔºåÂ§ßÂ§ßÊèêÈ´òËÆ°ÁÆóÊïàÁéá„ÄÇ ÂàÜËÄåÊ≤ª‰πã Á≠ñÁï•Ôºö ‰∏Ä‰∏™Â≠òÂÇ®Âú®ÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑÂ§ßËßÑÊ®°Êï∞ÊçÆÈõÜÔºå ‰ºöË¢´ÂàáÂàÜÊàêËÆ∏Â§öÁã¨Á´ãÁöÑÂàÜÁâáÔºàsplitÔºâÔºå Ëøô‰∫õÂàÜÁâáÂèØ‰ª•Ë¢´ Â§ö‰∏™Map‰ªªÂä°Âπ∂Ë°åÂ§ÑÁêÜ 2„ÄÅÁßªÂä®ËÆ°ÁÆóÔºåËÄåÂàÜÁßªÂä®Êï∞ÊçÆ Â∞ÜËÆ°ÁÆóÁ®ãÂ∫èÂ∫îÁî®ÁßªÂä®Âà∞ÂÖ∑ÊúâÊï∞ÊçÆÁöÑÈõÜÁæ§ËÆ°ÁÆóÊú∫ËäÇÁÇπ‰πã‰∏äËøõË°åËÆ°ÁÆóÊìç‰ΩúÔºõ Â∞ÜÊúâÁî®„ÄÅÂáÜÁ°Æ„ÄÅÂèäÊó∂ÁöÑ‰ø°ÊÅØÊèê‰æõÁªô‰ªª‰ΩïÊó∂Èó¥„ÄÅ‰ªª‰ΩïÂú∞ÁÇπÁöÑ‰ªª‰ΩïÂÆ¢Êà∑„ÄÇ 3„ÄÅMaster/SlaveÊû∂ÊûÑ ÂåÖÊã¨‰∏Ä‰∏™MasterÂíåËã•Âπ≤‰∏™Slave„ÄÇMaster‰∏äËøêË°åJobTrackerÔºåSlave‰∏äËøêË°åTaskTracker ‰∏â„ÄÅMapReduceËÆ°ÁÆóÊ°ÜÊû∂ÁöÑÁªÑÊàê MR 1„ÄÅ MapperË¥üË¥£‚ÄúÂàÜ‚ÄùÔºåÂç≥ÊääÂæóÂà∞ÁöÑÂ§çÊùÇÁöÑ‰ªªÂä°ÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‚ÄúÁÆÄÂçïÁöÑ‰ªªÂä°‚ÄùÊâßË°å„ÄÇ ‚Äã ‚ÄúÁÆÄÂçïÁöÑ‰ªªÂä°‚ÄùÔºö Êï∞ÊçÆÊàñËÆ°ÁÆóËßÑÊ®°Áõ∏ÂØπ‰∫éÂéü‰ªªÂä°Ë¶ÅÂ§ßÂ§ßÁº©Â∞èÔºõ Â∞±ËøëËÆ°ÁÆóÔºåÂç≥‰ºöË¢´ÂàÜÈÖçÂà∞Â≠òÊîæ‰∫ÜÊâÄÈúÄÊï∞ÊçÆÁöÑËäÇÁÇπËøõË°åËÆ°ÁÆóÔºõ ÊØè‰∏™map‰ªªÂä°‰πãÈó¥ÂèØ‰ª•Âπ∂Ë°åËÆ°ÁÆóÔºå‰∏ç‰∫ßÁîü‰ªª‰ΩïÈÄö‰ø°„ÄÇ split 2„ÄÅSplitËßÑÂàôÔºöÔºàÂèñ‰∏âËÄÖÁöÑ‰∏≠Èó¥ÂÄºÔºâ ‚Äì max.split(100M) ‚Äì min.split(10M) ‚Äì block(64M) max(min.split,min(max.split,block)) splitÂÆûÈôÖÂ§ßÂ∞è=blockÂ§ßÂ∞èÔºà2.XÔºö128MÔºâ MapÁöÑÊï∞ÁõÆÈÄöÂ∏∏ÊòØÁî±ËæìÂÖ•Êï∞ÊçÆÁöÑÂ§ßÂ∞èÂÜ≥ÂÆöÁöÑÔºå‰∏ÄËà¨Â∞±ÊòØÊâÄÊúâËæìÂÖ•Êñá‰ª∂ÁöÑÊÄªÂùóÔºàblockÔºâÊï∞ 3„ÄÅReduceËØ¶Ëß£ÔºàÊÄª¬∑ÈáçË¶ÅÔºâ ‚Äì ReduceÁöÑ‰ªªÂä°ÊòØÂØπmapÈò∂ÊÆµÁöÑÁªìÊûúËøõË°å‚ÄúÊ±áÊÄª‚ÄùÂπ∂ËæìÂá∫„ÄÇ ReducerÁöÑÊï∞ÁõÆÁî±mapred-site.xmlÈÖçÁΩÆÊñá‰ª∂ÈáåÁöÑÈ°πÁõÆmapred.reduce.tasksÂÜ≥ÂÆö„ÄÇÁº∫ÁúÅÂÄº‰∏∫1ÔºåÁî®Êà∑ÂèØËá™ÂÆö‰πâ„ÄÇ 4„ÄÅShuffleËØ¶Ëß£ÔºàÊÄª¬∑Ê†∏ÂøÉÔºâ ‚Äì Âú®mapperÂíåreducer‰∏≠Èó¥ÁöÑ‰∏Ä‰∏™Ê≠•È™§ ÂèØ‰ª•ÊäämapperÁöÑËæìÂá∫ÊåâÁÖßÊüêÁßçkeyÂÄºÈáçÊñ∞ÂàáÂàÜÂíåÁªÑÂêàÊàên‰ªΩÔºåÊääkeyÂÄºÁ¨¶ÂêàÊüêÁßçËåÉÂõ¥ÁöÑËæìÂá∫ÈÄÅÂà∞ÁâπÂÆöÁöÑreducerÈÇ£ÈáåÂéªÂ§ÑÁêÜ„ÄÇ ‚Äì ÂèØ‰ª•ÁÆÄÂåñreducerËøáÁ®ã Partitoner Ôºö hash(key) mod R Âõõ„ÄÅMapReduceÊû∂ÊûÑ1„ÄÅÈùûÂÖ±‰∫´ÂºèÊû∂ÊûÑÊØè‰∏™ËäÇÁÇπÈÉΩÊúâËá™Â∑±ÁöÑÂÜÖÂ≠òÔºåÂÆπÈîôÊÄßÊØîËæÉÂ•Ω„ÄÇ 2„ÄÅ‰∏Ä‰∏ªÂ§ö‰ªéÊû∂ÊûÑÂèØÊâ©Â±ïÊÄßÂ•ΩÔºåÁ°¨‰ª∂Ë¶ÅÊ±ÇÊòìËææÂà∞„ÄÇ ‚Äì ‰∏ª JobTracker:ÔºàResourceManagerËµÑÊ∫êÁÆ°ÁêÜÔºâ Ë¥üË¥£Ë∞ÉÂ∫¶ÂàÜÈÖçÊØè‰∏Ä‰∏™Â≠ê‰ªªÂä°taskËøêË°å‰∫éTaskTracker‰∏äÔºå Â¶ÇÊûúÂèëÁé∞ÊúâÂ§±Ë¥•ÁöÑtaskÂ∞±ÈáçÊñ∞ÂàÜÈÖçÂÖ∂‰ªªÂä°Âà∞ÂÖ∂‰ªñËäÇÁÇπ„ÄÇ ÊØè‰∏Ä‰∏™hadoopÈõÜÁæ§‰∏≠Âè™‰∏Ä‰∏™ JobTracker, ‰∏ÄËà¨ÂÆÉËøêË°åÂú®MasterËäÇÁÇπ‰∏ä„ÄÇ ‚Äì ‰ªéTaskTracker:ÔºàNodeManagerÔºâ TaskTracker‰∏ªÂä®‰∏éJobTrackerÈÄö‰ø°ÔºåÊé•Êî∂‰Ωú‰∏öÔºåÂπ∂Ë¥üË¥£Áõ¥Êé•ÊâßË°åÊØè‰∏Ä‰∏™‰ªªÂä°Ôºå ‰∏∫‰∫ÜÂáèÂ∞ëÁΩëÁªúÂ∏¶ÂÆΩTaskTrackerÊúÄÂ•ΩËøêË°åÂú®HDFSÁöÑDataNode‰∏ä„ÄÇ MapReduceÁöÑ‰ΩìÁ≥ªÁªìÊûÑMapReduce‰∏ªË¶ÅÊúâ‰ª•‰∏ã4‰∏™ÈÉ®ÂàÜÁªÑÊàê 1234567891011121314151617181 ÔºâClient‚Ä¢Áî®Êà∑ÁºñÂÜôÁöÑMapReduceÁ®ãÂ∫èÈÄöËøáClientÊèê‰∫§Âà∞JobTrackerÁ´Ø‚Ä¢Áî®Êà∑ÂèØÈÄöËøáClientÊèê‰æõÁöÑ‰∏Ä‰∫õÊé•Âè£Êü•Áúã‰Ωú‰∏öËøêË°åÁä∂ÊÄÅ2 ÔºâJobTracker‚Ä¢JobTrackerË¥üË¥£ËµÑÊ∫êÁõëÊéßÂíå‰Ωú‰∏öË∞ÉÂ∫¶‚Ä¢JobTracker ÁõëÊéßÊâÄÊúâTaskTracker‰∏éJobÁöÑÂÅ•Â∫∑Áä∂ÂÜµÔºå‰∏ÄÊó¶ÂèëÁé∞Â§±Ë¥•ÔºåÂ∞±Â∞ÜÁõ∏Â∫îÁöÑ‰ªªÂä°ËΩ¨ÁßªÂà∞ÂÖ∂‰ªñËäÇÁÇπ‚Ä¢JobTracker ‰ºöË∑üË∏™‰ªªÂä°ÁöÑÊâßË°åËøõÂ∫¶„ÄÅËµÑÊ∫ê‰ΩøÁî®ÈáèÁ≠â‰ø°ÊÅØÔºåÂπ∂Â∞ÜËøô‰∫õ‰ø°ÊÅØÂëäËØâ‰ªªÂä°Ë∞ÉÂ∫¶Âô®ÔºàTaskSchedulerÔºâÔºåËÄåË∞ÉÂ∫¶Âô®‰ºöÂú®ËµÑÊ∫êÂá∫Áé∞Á©∫Èó≤Êó∂ÔºåÈÄâÊã©ÂêàÈÄÇÁöÑ‰ªªÂä°Âéª‰ΩøÁî®Ëøô‰∫õËµÑÊ∫ê3 ÔºâTaskTracker‚Ä¢TaskTracker ‰ºöÂë®ÊúüÊÄßÂú∞ÈÄöËøá‚ÄúÂøÉË∑≥‚ÄùÂ∞ÜÊú¨ËäÇÁÇπ‰∏äËµÑÊ∫êÁöÑ‰ΩøÁî®ÊÉÖÂÜµÂíå‰ªªÂä°ÁöÑËøêË°åËøõÂ∫¶Ê±áÊä•ÁªôJobTrackerÔºåÂêåÊó∂Êé•Êî∂JobTracker ÂèëÈÄÅËøáÊù•ÁöÑÂëΩ‰ª§Âπ∂ÊâßË°åÁõ∏Â∫îÁöÑÊìç‰ΩúÔºàÂ¶ÇÂêØÂä®Êñ∞‰ªªÂä°„ÄÅÊùÄÊ≠ª‰ªªÂä°Á≠âÔºâ‚Ä¢TaskTracker ‰ΩøÁî®‚Äúslot‚ÄùÁ≠âÈáèÂàíÂàÜÊú¨ËäÇÁÇπ‰∏äÁöÑËµÑÊ∫êÈáèÔºàCPU„ÄÅÂÜÖÂ≠òÁ≠âÔºâ„ÄÇ‰∏Ä‰∏™Task Ëé∑ÂèñÂà∞‰∏Ä‰∏™slot ÂêéÊâçÊúâÊú∫‰ºöËøêË°åÔºåËÄåHadoopË∞ÉÂ∫¶Âô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÂ∞ÜÂêÑ‰∏™TaskTracker‰∏äÁöÑÁ©∫Èó≤slotÂàÜÈÖçÁªôTask‰ΩøÁî®„ÄÇslot ÂàÜ‰∏∫Map slot ÂíåReduce slot ‰∏§ÁßçÔºåÂàÜÂà´‰æõMapTaskÂíåReduce Task‰ΩøÁî®ÔºàÊâÄ‰ª•ÊúÄÂ•ΩÊîæÂú®DataNode‰∏äÔºâ4 ÔºâTaskTask ÂàÜ‰∏∫Map Task ÂíåReduce Task ‰∏§ÁßçÔºåÂùáÁî±TaskTracker ÂêØÂä® ‰∫î„ÄÅMapReduceÊê≠Âª∫1„ÄÅËäÇÁÇπÂàÜÂ∏ÉÊÉÖÂÜµ NN DN JN ZK ZKFC RM node00 ‚àö ‚àö node01 ‚àö ‚àö node02 ‚àö 2„ÄÅÈÖçÁΩÆÊñá‰ª∂ ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ (1)mapred-site.xml:ÔºàÈÖçÁΩÆmapreudceÈúÄË¶ÅÁöÑÊ°ÜÊû∂ÁéØÂ¢ÉÔºâ Ë∑ØÂæÑÔºöF:\hadoop-2.6.5\etc\hadoop\mapred-site.xml 123456&lt;configuration&gt; &lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; Ôºà2Ôºâyarn-site.xml:ÔºàÈÖçÁΩÆyarnÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶ÁöÑËÆ°ÁÆóÊ°ÜÊû∂Ôºâ 123456&lt;configuration&gt; &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; Âõ†‰∏∫ResourceManager ÂíåNodeManager‰∏ª‰ªéÁªìÊûÑÔºåRMÂ≠òÂú®ÂçïÁÇπÊïÖÈöúÔºåË¶ÅÂØπÂÆÉÂÅöHAÔºàÈÄöËøáZKÔºâ ‰øÆÊîπyarn-site.xmlÈÖçÁΩÆÊñá‰ª∂,ÂÆåÊï¥ÁöÑÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728 &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt;&lt;property&gt; &lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt; &lt;value&gt;Sunrise&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt; &lt;value&gt;rm1,rm2&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt; &lt;value&gt;node03&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt; &lt;value&gt;node04&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt; &lt;value&gt;node01:2181,node02:2181,node03:2181&lt;/value&gt; &lt;/property&gt; ÂÖ≠„ÄÅ‰∏™‰∫∫ÁêÜËß£ Âü∫‰∫éÊ∫êÁ†ÅÔºåÂØπmapreduceÁöÑÂ∑•‰ΩúÊµÅÁ®ãÁöÑÊèèËø∞Ôºö 12345678910111213141516171819‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èË¶ÅËøõË°åÂ§ßËßÑÊ®°Êï∞ÊçÆÂ§ÑÁêÜÂàÜÊûêÊï∞ÊçÆÊñá‰ª∂‰øùÂ≠òÂú®HDFS‰∏≠ÔºåÂàÜÂùóÂ≠òÂÇ®Âú®ÂàÜÂ∏ÉÂºèËäÇÁÇπ‰∏äÈ¶ñÂÖàÊòØÂ∞ÜÊï∞ÊçÆÊñá‰ª∂ÂàáÂàÜÊàêËÆ∏Â§ösplitÂàáÁâáÊØè‰∏Ä‰∏™splitÂàáÁâáÂçïÁã¨ÂêØÂä®‰∏Ä‰∏™map‰ªªÂä°ÔºåÊâÄ‰ª•‰ºöÂêØÂä®Â§ö‰∏™map‰ªªÂä°mapÈò∂ÊÆµÁöÑËæìÂÖ•ÊòØËØ∏Â§ö(key,value),ËæìÂá∫ÊòØÊñ∞ÁöÑÔºàkey,valueÔºâ,ÁÑ∂ÂêéË¢´ÊãâÂéªÂà∞‰∏çÂêåÁöÑreduce‰∏äÂπ∂Ë°åÂ§ÑÁêÜÊìç‰ΩúÊâÄ‰ª•ÊØè‰∏™mapÁöÑËæìÂá∫Èò∂ÊÆµÈÉΩÊâßË°åÂàÜÂå∫Êìç‰ΩúÔºåÂπ∂ÂÜ≥ÂÆöreduce‰ªªÂä°ÁöÑ‰∏™Êï∞ÁÑ∂ÂêéÂØπmapËæìÂá∫ÁªìÊûúËøõË°åÊéíÂ∫è„ÄÅÂΩíÂπ∂„ÄÅÂêàÂπ∂ÔºåËøô‰∏™ËøáÁ®ãÂè´mapÈò∂ÊÆµÁöÑshuffleshuffleÁªìÊùüÂêéÔºåÂ∞ÜÁõ∏Â∫îÁöÑÁªìÊûúÂàÜÂèëÁªôreduceÔºåËÆ©reduceÂÆåÊàêÂêéÁª≠ÁöÑÂ∑•‰Ωú ÁªìÊùüÂêéÔºåÂ∞ÜÁªìÊûúËæìÂá∫ÁªôHDFS„ÄÇ‰∏çÂêåÁöÑmap‰πãÈó¥‰∏ç‰ºöÈÄö‰ø°Ôºå‰∏çÂêåÁöÑreduce‰πü‰∏ç‰ºöÈÄö‰ø°ÔºåÊï¥‰∏™ËøáÁ®ãÂØπÁî®Êà∑ÈÄèÊòé„ÄÇ shuffle MapReduceÊâßË°åÁöÑÂêÑ‰∏™Èò∂ÊÆµÔºö 123456789101112131„ÄÅ‰ªéHDFS‰∏≠Âä†ËΩΩÊñá‰ª∂ÔºåÂä†ËΩΩËØªÂèñÁî±INputFormatÊ®°ÂùóÊù•ÂÆåÊàêÔºåÂØπËæìÂÖ•Ë¥üË¥£Ê†ºÂºèÈ™åËØÅÔºåÂêåÊó∂ÔºåÂØπÊï∞ÊçÆËøõË°åÈÄªËæë‰∏äÂàáÂàÜÊàêsplit2„ÄÅÁî±record readÂÖ∑‰ΩìÊ†πÊçÆÂàÜÁâáÁöÑ‰ΩçÁΩÆÈïøÂ∫¶‰ø°ÊÅØÂéªÊâæÂêÑ‰∏™blockÔºå‰ª•ÔºàkeyÔºåvalueÔºâËæìÂá∫Ôºå‰Ωú‰∏∫mapÁöÑËæìÂÖ•Ôºå3„ÄÅmap‰∏≠ÊúâÁî®Êà∑Ëá™ÂÆö‰πâÁöÑmapÂáΩÊï∞Â∞±ÂèØ‰ª•ËøõË°åÁõ∏Â∫îÁöÑÊï∞ÊçÆÂ§ÑÁêÜÔºåÂπ∂ËæìÂá∫‰∏ÄÂ†ÜÔºàkeyÔºåvalueÔºâÔºå‰Ωú‰∏∫‰∏≠Èó¥ÁªìÊûú4„ÄÅ‰πãÂêéÔºåÊòØshuffleÔºàÊ¥óÁâåÔºâËøáÁ®ãÂØπËøô‰∏≠Èó¥ÁªìÊûúËøõË°åÂàÜÂå∫„ÄÅÊéíÂ∫è„ÄÅÂêàÂπ∂ÔºåÂπ∂Ê∫¢ÂÜôÂà∞Á£ÅÁõòÔºå5„ÄÅÁõ∏Â∫îÁöÑreduce‰ªªÂä°Â∞±‰ºöÊù•fetchÂØπÂ∫îÁöÑÂàÜÂå∫ÔºàkeyÔºåvalueÔºàlistÔºâÔºâ6„ÄÅreduce‰∏≠ÊúâÁî®Êà∑Ëá™ÂÆö‰πâÁöÑreduceÂáΩÊï∞Â∞±ÂèØ‰ª•ÂÆåÊàêÂØπÊï∞ÊçÆÁöÑÂàÜÊûêÔºåÁªìÊûú‰ª•Êñ∞ÁöÑÔºàkeyÔºåvalueÔºâËæìÂá∫7„ÄÅËæìÂá∫ÁªìÊûúÂÄüÂä©OutputFormatÊ®°ÂùóÂØπËæìÂá∫Ê†ºÂºèËøõË°åÊ£ÄÊü•Ôºå‰ª•ÂèäÁõ∏ÂÖ≥ÁõÆÂΩïÊòØÂê¶Â≠òÂú®Á≠âÔºåÊúÄÂêéÂÜôÂÖ•Âà∞HDFS‰∏≠„ÄÇ split ÂÖ≥‰∫ésplitÁöÑÂàáÂàÜÁöÑÁêÜËß£Ôºö 1234561„ÄÅInputFormatÂ∞ÜÂ§ßÁöÑÊï∞ÊçÆÊñá‰ª∂ÂàÜÊàêÂæàÂ§ösplit2„ÄÅÊñá‰ª∂Âú®HDFS‰∏≠ÊòØ‰ª•ÂæàÂ§ö‰∏™Áâ©ÁêÜÂùóblockÂàÜÂ∏ÉÂºèÂ≠òÂÇ®‰∏çÂêåÁöÑËäÇÁÇπ‰∏ä3„ÄÅÂàáÁâáÊòØÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÈÄªËæëÂàÜÁâá4„ÄÅsplitÁöÑÊï∞ÈáèÂÜ≥ÂÆömap‰ªªÂä°ÁöÑÊï∞Èáè5„ÄÅÂàáÁâáËøáÂ§ö‰ºöÂØºËá¥map‰ªªÂä°ÂêØÂä®ËøáÂ§öÔºåmap‰ªªÂä°‰πãÈó¥ÂàáÊç¢ÁöÑÊó∂ÂÄôÂ∞±‰ºöËÄóË¥πÁõ∏ÂÖ≥ÁöÑÁÆ°ÁêÜËµÑÊ∫êÔºåÊâÄ‰ª•ÂàáÁâáËøáÂ§ö‰ºöÂΩ±ÂìçÊâßË°åÊïàÁéá6„ÄÅ ÂàáÁâáËøáÂ∞ëÂèà‰ºöÂΩ±Âìç‰ªªÂä°ÊâßË°åÁöÑÂπ∂Ë°åÂ∫¶ÔºåÊâÄ‰ª•ÁêÜÊÉ≥ÊÉÖÂÜµÁî®blockÂùóÁöÑÂ§ßÂ∞è‰Ωú‰∏∫ÂàáÁâáÁöÑÂ§ßÂ∞è„ÄÇ ÂÖ≥‰∫éshuffleÁöÑÁêÜËß£ 123456789mapÁ´Øshuffle1„ÄÅ‰ªéHDFSËæìÂÖ•Êï∞ÊçÆÂíåÊâßË°åmap‰ªªÂä°ÔºåÂú®map‰ªªÂä°ÊâßË°å‰πãÂâçÔºåRecordReaderÈòÖËØªÂô®ËøòÂ∞ÜÊï∞ÊçÆÂèòÊàêÊª°Ë∂≥MapÂáΩÊï∞ÊâÄÈúÄÁöÑÔºàKÔºåVÔºâÂΩ¢ÂºèÔºåÁÑ∂ÂêéInputFormat‰ºöÂ∞ÜÂÖ∂ÂàáÂàÜÊàêËã•Âπ≤ÂàáÁâáÔºà‰∏ÄÂ†ÜÔºàKÔºåVÔºâÔºâ„ÄÇ2„ÄÅÊØè‰∏™ÂàáÁâá‰ºöÂàÜÈÖç‰∏Ä‰∏™map‰ªªÂä°ÔºåÊØè‰∏™map‰ªªÂä°‰ºöÂàÜÈÖç‰∏Ä‰∏™ÈªòËÆ§ÁöÑÁºìÂ≠òÔºå‰∏ÄËà¨ÈªòËÆ§ÁºìÂ≠ò‰∏∫100M.mapÁöÑËæìÂá∫ÈîÆÂÄºÂØπ‰Ωú‰∏∫‰∏≠Èó¥ÁªìÊûúÂÖàÂÜôÂÖ•Âà∞ÁºìÂ≠òÔºàÁõ¥Êé•ÂÜôÂÖ•Á£ÅÁõò‰ºöÂ¢ûÂä†ÂØªÂùÄÂºÄÈîÄÔºåÊâÄ‰ª•ÈõÜ‰∏≠ÂÜôÂÖ•Á£ÅÁõò‰∏ÄÊ¨°ÂØªÂùÄÂ∞±ÂèØ‰ª•ÂÆåÊàêÊâπÈáèÂÜôÂÖ•ÔºåÂ∞±ÂèØ‰ª•Â∞ÜÂØªÂùÄÂºÄÈîÄÂàÜÊëäÂà∞Â§ßÈáèÊï∞ÊçÆ‰∏≠ÔºåËøôÂ∞±ÊòØÁºìÂ≠òÁöÑ‰ΩúÁî®Ôºâ„ÄÇ3„ÄÅÂΩìÂÜôÂÖ•ÁöÑÂÜÖÂÆπËææÂà∞ÁºìÂ≠òÁ©∫Èó¥ÁöÑ‰∏ÄÂÆöÊØî‰æãÂêéÔºàÊ∫¢ÂÜôÊØîÔºå‰∏ÄËà¨‰∏∫0.8ÔºåÂ∞±ÊòØ80MÁöÑÊó∂ÂÄôÔºå‰∏∫‰∫Ü‰∏çÂΩ±Âìçmap‰ªªÂä°ÁöÑÁªßÁª≠ÊâßË°åÔºâÔºå‰ºöÂêØÂä®Ê∫¢ÂÜôËøõÁ®ãÔºåÊääÁºìÂ≠ò‰∏≠Áõ∏ÂÖ≥Êï∞ÊçÆÂÜôÂÖ•Á£ÅÁõò„ÄÇ4„ÄÅÂú®Ê∫¢ÂÜôËøáÁ®ã‰∏≠Ôºå‰ºöÊâßË°åÂàÜÂå∫ÔºàpartitionÔºâ„ÄÅÊéíÂ∫èÔºàsortÔºåÊåâÁÖßkeyÂÄºÔºâÂíåÂèØËÉΩÁöÑÂêàÂπ∂ÔºàcombineÔºå‰∏∫‰∫ÜÂáèÂ∞ëÊ∫¢ÂÜôÂà∞Á£ÅÁõòÁöÑÊï∞ÊçÆÈáèÔºåÊÖéÁî®ÔºâÊìç‰ΩúÔºåÂÜôÂÖ•Á£ÅÁõòÔºåÁîüÊàêÁ£ÅÁõòÁöÑÊ∫¢ÂÜôÊñá‰ª∂„ÄÇ5„ÄÅÂú®map‰ªªÂä°ËøêË°åÁªìÊùüÂâçÔºåÁ≥ªÁªü‰ºöÂØπÊ∫¢ÂÜôÊñá‰ª∂ËøõË°åÂΩíÂπ∂ÔºàmergeÔºâÔºåÂΩ¢ÊàêÂ§ßÊñá‰ª∂ÔºàÈáåÈù¢ÁöÑÈîÆÂÄºÂØπÊòØÂàÜÂå∫ÔºåÊéíÂ∫èÁöÑÔºâ,Êñá‰ª∂Ê†ºÂºè‰∏∫Ôºàkey,value&lt;list&gt;ÔºâÔºåÂΩíÂπ∂Êó∂Â¶ÇÊûúÊ∫¢ÂÜôÊñá‰ª∂Â§ß‰∫éÈ¢ÑÂÆöÂÄºÔºàÈªòËÆ§‰∏∫3ÔºâÔºå‰ºöÂÜçÊ¨°ÂêàÂπ∂reduceÁ´Øshuffle1„ÄÅreduce‰ªªÂä°‰ºöËØ¢ÈóÆJobTrackerÔºåÂéªÊãâÂèñmapÊú∫Âô®‰∏äÁöÑÂ±û‰∫éËá™Â∑±ÁöÑÂàÜÂå∫ÔºåÂØπÊù•Ëá™‰∏çÂêåÊú∫Âô®ÁöÑÊï∞ÊçÆËøõË°åÂΩíÂπ∂„ÄÅÂêàÂπ∂ÔºåÁÑ∂ÂêéËæìÂÖ•Âà∞reduceÂáΩÊï∞‰∏≠ËøõË°åÊï∞ÊçÆÁöÑÂ§ÑÁêÜÂàÜÊûêÔºåÂÜçÂÜôÂÖ•Á£ÅÁõò Êàë MapReduceÂ∫îÁî®Á®ãÂ∫èÊâßË°åËøáÁ®ã]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>MapReduce</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hadoop2.X]]></title>
    <url>%2F2019%2F01%2F04%2FHadoop2.X%2F</url>
    <content type="text"><![CDATA[[TOC] ‰∏Ä„ÄÅHadoop 2.x‰∫ßÁîüËÉåÊôØ1„ÄÅHadoop 1.0Â≠òÂú®ÁöÑÈóÆÈ¢òÔºà1ÔºâHDFSÂ≠òÂú®ÁöÑÈóÆÈ¢ò NameNodeÂçïÁÇπÊïÖÈöúÔºåÈöæ‰ª•Â∫îÁî®‰∫éÂú®Á∫øÂú∫ÊôØ NameNodeÔºà‰∏Ä‰∏™ÔºâÂéãÂäõËøáÂ§ßÔºåÂÜÖÂ≠òÂèóÈôêÔºåÂΩ±ÂìçÁ≥ªÁªüÊâ©Â±ïÊÄß Ôºà2ÔºâMapReduceÂ≠òÂú®ÁöÑÈóÆÈ¢ò JobTrackerËÆøÈóÆÂéãÂäõÂ§ßÔºåÂΩ±ÂìçÁ≥ªÁªüÊâ©Â±ïÊÄß Èöæ‰ª•ÊîØÊåÅMapReduce‰ª•Â§ñÁöÑËÆ°ÁÆóÊ°ÜÊû∂ÔºåÊØîÂ¶ÇSpark„ÄÅStorm 2„ÄÅHadoop 2.0ÂàÜÊîØHDFSÔºöÂàÜÂ∏ÉÂºèÊñá‰ª∂Â≠òÂÇ®Á≥ªÁªüMapReduceÔºöËÆ°ÁÆóÊ°ÜÊû∂YARNÔºöËµÑÊ∫êÁÆ°ÁêÜÁ≥ªÁªü 3„ÄÅÁâπÁÇπ 1Ôºâ. Ëß£ÂÜ≥ÂçïÁÇπÊïÖÈöúÔºöHDFS HAÔºàÈ´òÂèØÁî®Ôºâ ÈÄöËøá‰∏ªÂ§áNameNodeËß£ÂÜ≥ÔºåÂ¶ÇÊûú‰∏ªNameNodeÂèëÁîüÊïÖÈöúÔºåÂ∞±ÂàáÊç¢Âà∞Â§áNameNode‰∏ä | 2).Ëß£ÂÜ≥ÂÜÖÂ≠òÂèóÈôêÈóÆÈ¢òÔºöHDFS FederationÔºàËÅîÈÇ¶Âà∂Ôºâ„ÄÅHA HAÔºö‰∏§‰∏™NameNode (3.0Â∞±ÂÆûÁé∞‰∫Ü‰∏ÄÁªÑÂ§ö‰ªéÔºöÊ∞¥Âπ≥Êâ©Â±ïÔºåÊîØÊåÅÂ§ö‰∏™NameNodeÔºõÊØè‰∏™NameNodeÂàÜÁÆ°‰∏ÄÈÉ®ÂàÜÁõÆÂΩïÔºõÊâÄÊúâNameNodeÂÖ±‰∫´ÊâÄÊúâDataNodeËµÑÊ∫ê) 3).‰ªÖÊû∂ÊûÑ‰∏äÂèëÁîüÂèòÂåñ‰ΩøÁî®ÊñπÂºè‰∏çÂèò ‰∫å„ÄÅHDFS HAÁªìÊûÑÂèäÂäüËÉΩ**HADNÔºöDataNodeÔºàÊï∞ÊçÆËäÇÁÇπÔºâ Â≠òÊîæÊï∞ÊçÆblockÂùóÔºõÈÅµÂæ™ÂøÉË∑≥Êú∫Âà∂ÂêëNN ActiveÂíåNN StandbyÊ±áÊä•blockÂùó‰ø°ÊÅØÔºå‰ΩÜÂè™ÊâßË°åactiveÁöÑÂëΩ‰ª§ ‰∏ªÂ§áNNÔºöNameNode Active Âíå NameNode Standby Ôºà‰∏ªÂ§áÂêçÁß∞ËäÇÁÇπÔºâ ‰∏ªNNÂØπÂ§ñÊèê‰æõËØªÂÜôÊúçÂä°ÔºåÂ§áNNÂêåÊ≠•‰∏ªNNÂÖÉÊï∞ÊçÆÔºå‰ª•ÂæÖÂàáÊç¢ÔºåÊâÄÊúâÁöÑDNÂêåÊó∂Âêë‰∏§‰∏™NNÊ±áÊä•Êï∞ÊçÆÂùó‰ø°ÊÅØ ÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÂä†ËΩΩÂà∞‰∏ªNNÔºåÂπ∂ÂÜôÂÖ•JNÔºàËá≥Â∞ëÂÜô‰∏§Âè∞ÔºöËøáÂçäÂéüÂàôÔºâÔºõ Â§áNNÂèØ‰ª•‰ªéJN‰∏≠ÂêåÊ≠•ÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºõ Ëß£ÂÜ≥ÂçïÁÇπÊïÖÈöúÔºõ ‚Äì‰∏§ÁßçÂàáÊç¢ÊñπÂºèÔºö ÊâãÂä®ÔºöÈÄöËøáÂëΩ‰ª§ÂÆûÁé∞‰∏ªÂ§áÂàáÊç¢ Ëá™Âä®ÔºöÂü∫‰∫éZookeeperÂÆûÁé∞ÔºàËØ¶ÊÉÖËßÅÊê≠Âª∫Ê≠•È™§Ôºâ JNÔºöJournalNodeÔºàËá≥Â∞ë3Âè∞Ôºâ Â≠òÂÇ®‰∏ªNNÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåÂÆûÁé∞‰∏ªÂ§áNNÈó¥Êï∞ÊçÆÂÖ±‰∫´Ôºõ ÔºàÈÅµÂæ™ËøáÂçäÂéüÂàôÔºöËá≥Â∞ëÊúâËøáÂçäÁöÑÊï∞ÈáèÂèÇ‰∏éÊäïÁ•®Ôºâ ZKFCÔºöFailoverControllerÔºàÁ´û‰∫âÈîÅÔºâ Ë∞ÅÊãøÂà∞‰∫ÜËøô‰∏™ÊâÄÔºåË∞ÅÂ∞±ÊòØactive NN ÂøÉË∑≥Êú∫Âà∂ÁõëÊéß‰∏ªÂ§áNNÁä∂ÊÄÅÔºå‰∏ÄÊó¶Âá∫Áé∞‰∏ÄÂè∞ÊåÇÊú∫ÔºåÂ∞±‰ºöÈáäÊîæÈîÅÔºåÂè¶‰∏Ä‰∏™NNÂ∞±‰ºöÁ´ãÂç≥ÂêØÂä®Á´û‰∫âÈîÅÔºåÊàê‰∏∫active NN ZKÔºöZookeeperÔºàËá≥Â∞ë3Âè∞Ôºâ ÔºàÂÆûÁé∞‰∏ªÂ§áNNÂàáÊç¢Ôºâ **ËÅîÈÇ¶ ÈÄöËøáÂ§ö‰∏™namenode/namespaceÊääÂÖÉÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåÁÆ°ÁêÜÂàÜÊï£Âà∞Â§ö‰∏™ËäÇÁÇπ‰∏≠Ôºå‰ΩøÂà∞namenode/namespaceÂèØ‰ª•ÈÄöËøáÂ¢ûÂä†Êú∫Âô®Êù•ËøõË°åÊ∞¥Âπ≥Êâ©Â±ï ÈÄöËøáÂ§ö‰∏™namespaceÊù•ÈöîÁ¶ª‰∏çÂêåÁ±ªÂûãÁöÑÂ∫îÁî®ÔºåÊää‰∏çÂêåÁ±ªÂûãÂ∫îÁî®ÁöÑHDFSÂÖÉÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåÁÆ°ÁêÜÂàÜÊ¥æÂà∞‰∏çÂêåÁöÑnamenode‰∏≠„ÄÇ ‰∏â„ÄÅYARN(ËµÑÊ∫êÁÆ°ÁêÜ)???????ËØ¶ËßÅYarnÂ≠¶‰π†.md 1„ÄÅÊ†∏ÂøÉÊÄùÊÉ≥ÔºöSourceManagerÔºàËµÑÊ∫êÁÆ°ÁêÜÔºâ+ReplicationMasterÔºà‰ªªÂä°Ë∞ÉÂ∫¶Ôºâ 2.yarnÁöÑÂºïÂÖ•‰ΩøÂæóÂ§ö‰∏™ËÆ°ÁÆóÊ°ÜÊû∂ÂèØ‰ª•Â∫îÁî®Âà∞‰∏Ä‰∏™ÈõÜÁæ§‰∏≠ Âõõ„ÄÅZookeeperÂ∑•‰ΩúÂéüÁêÜËØ¶ËßÅZookeeperÂ≠¶‰π†.md ‰∫î„ÄÅHadoop2.X ÈõÜÁæ§Êê≠Âª∫1„ÄÅlinuxÁéØÂ¢É‰∏ãÊê≠Âª∫ NN DN JN ZKFC ZK SM RM node00 ‚àö ‚àö ‚àö ‚àö ‚àö ‚àö ‚àö node01 ‚àö ‚àö ‚àö ‚àö ‚àö ‚àö node02 ‚àö ‚àö ‚àö ‚àö 0.Âú®Êê≠Âª∫ÁéØÂ¢É‰πãÂâçÁöÑÂáÜÂ§á ‰∏âÂè∞ËôöÊãüÊú∫Ôºö 1234567ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ôÂÆâË£ÖjdkÁºñËæë/etc/hosts/ÁªôÂêÑ‰∏™ËäÇÁÇπÊúçÂä°Âô®Ëµ∑Âà´ÂêçÊó∂Èó¥ÊúçÂä°Âô®Ôºöntpdate ÂÆâË£ÖÔºöyum install ntpdate -y ÁîüÊàêÔºöntpdate cn.ntp.org.cnÂÖçÂØÜÁôªÂΩïÁéØÂ¢ÉÂáÜÂ§á Âú®hadoopÂÆâË£ÖÁõÆÂΩï‰∏ãhadoop-2.6.5/etc/hadoop/ ÁºñËæëhadoop-env.sh 1export JAVA_HOME=/usr/soft/jdk1.8.0_191 2.ÁºñËæëcore-site.xml 123456789101112131415&lt;configuration&gt;&lt;property&gt; &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://Sunrise&lt;/value&gt;&lt;!--ÈÖçÁΩÆÈõÜÁæ§ÁöÑÂêçÂ≠ó--&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;ha.zookeeper.quorum&lt;/name&gt; &lt;value&gt;node00:2181,node01:2181,node02:2181&lt;/value&gt; &lt;!--ÈÖçÁΩÆzookeeperÔºö‰∏â‰∏™ËäÇÁÇπ--&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/opt/hadoop&lt;/value&gt;&lt;!--ÈÖçÁΩÆhadoopÂü∫Á°ÄÈÖçÁΩÆÂ≠òÊîæÁöÑË∑ØÂæÑ--&gt;&lt;/property&gt;&lt;/configuration&gt; 3.ÁºñËæëhdfs-site.xml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;configuration&gt;&lt;property&gt; &lt;name&gt;dfs.nameservices&lt;/name&gt; &lt;value&gt;sxt&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.ha.namenodes.Sunrise&lt;/name&gt; &lt;value&gt;nn1,nn2&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.namenode.rpc-address.Sunrise.nn1&lt;/name&gt; &lt;value&gt;node00:8020&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.namenode.rpc-address.Sunrise.nn2&lt;/name&gt; &lt;value&gt;node01:8020&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.namenode.http-address.Sunrise.nn1&lt;/name&gt; &lt;value&gt;node00:50070&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.namenode.http-address.Sunrise.nn2&lt;/name&gt; &lt;value&gt;node01:50070&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;!-- ÊåáÂÆönamenodeÂÖÉÊï∞ÊçÆÂ≠òÂÇ®Âú®journalnode‰∏≠ÁöÑË∑ØÂæÑ --&gt; &lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt; &lt;value&gt;qjournal://node00:8485;node01:8485;node02:8485/sxt&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;!-- ÊåáÂÆöHDFSÂÆ¢Êà∑Á´ØËøûÊé•active namenodeÁöÑjavaÁ±ª --&gt; &lt;name&gt;dfs.client.failover.proxy.provider.Sunrise&lt;/name&gt;&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;!-- ÈÖçÁΩÆÈöîÁ¶ªÊú∫Âà∂‰∏∫ssh Èò≤Ê≠¢ËÑëË£ÇÔºö‰øùËØÅactiveNN‰ªÖÊúâ‰∏ÄÂè∞--&gt; &lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt; &lt;value&gt;sshfence&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;!-- ÊåáÂÆöÁßòÈí•ÁöÑ‰ΩçÁΩÆ --&gt; &lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt; &lt;value&gt;/root/.ssh/id_dsa&lt;/value&gt; &lt;!--ÂÖçÂØÜÁôªÂΩïÊòØÁîüÊàêÁöÑÊñá‰ª∂ÔºåÊúâÁöÑÊòØid_rsa--&gt;&lt;/property&gt;&lt;property&gt; &lt;!-- ÊåáÂÆöjournalnodeÊó•ÂøóÊñá‰ª∂Â≠òÂÇ®ÁöÑË∑ØÂæÑ --&gt; &lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt; &lt;value&gt;/opt/hadoop/data&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;!-- ÂºÄÂêØËá™Âä®ÊïÖÈöúËΩ¨Áßª --&gt; &lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt; &lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;/configuration&gt; ÈÖçÁΩÆhadoop‰∏≠ÁöÑslavesÔºà‰∏ª‰ªéÊû∂ÊûÑÔºödatanodeÔºâ 123node00node01node02 5.ÂáÜÂ§ázookeeper ‰∏âÂè∞zookeeperÔºönode00Ôºånode01Ôºånode02 ÁºñËæëzookeeper-3.4.13/conf/zoo.cfg 123456789tickTime=2000initLimit=10syncLimit=5dataDir=/usr/soft/zookeeper-3.4.13/datadataLogDir=/usr/soft/zookeeper-3.4.13/logsclientPort=2181server.1=node00:2888:3888server.2=node01:2888:3888server.3=node02:2888:3888 Âú®dataDirÁõÆÂΩï‰∏≠ÂàõÂª∫Êñá‰ª∂myidÔºå‰∏âÂè∞ËäÇÁÇπÁöÑÊñá‰ª∂ÂÜÖÂÆπÂàÜÂà´‰∏∫1Ôºå2Ôºå3 6.ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè vim ~/.bash_profile 123456JAVA_HOME=/usr/soft/jdk1.8.0_191export PATH=$PATH:$JAVA_HOME/binHADOOP_HOME=/usr/soft/hadoop-2.6.5export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbinZOOKEEPER_HOME=/usr/soft/zookeeper-3.4.13export PATH=$PATH:$ZOOKEEPER_HOME/bin source ~/.bash_profile ‰ΩøÂÖ∂Êàê‰∏∫ËµÑÊ∫êÊñá‰ª∂ÔºåÂèëÈÄÅÂà∞ÂÖ∂‰ªñËäÇÁÇπÂêéÔºå‰πüÈúÄË¶ÅÊ≠§Êìç‰Ωú 7.Â∞Ü‰ª•‰∏äÈÖçÁΩÆÊñá‰ª∂ËøúÁ®ãÂèëÈÄÅËá≥ÂÖ∂‰ªñËäÇÁÇπÊúçÂä°Âô® scp -r filename nodename:pwd 8.ÂëΩ‰ª§Êìç‰ΩúÔºö 123456789101112131415161. ÂêØÂä®‰∏â‰∏™zookeeperÔºö./zkServer.sh start2. ÂêØÂä®‰∏â‰∏™JournalNodeÔºö./hadoop-daemon.sh start journalnode3. ÔºàÁîüÊàêfsimageÊñá‰ª∂ÔºâÂú®ÂÖ∂‰∏≠‰∏Ä‰∏™namenode‰∏äÊ†ºÂºèÂåñÔºö hdfs namenode -format4. ÊääÂàöÂàöÊ†ºÂºèÂåñ‰πãÂêéÁöÑÂÖÉÊï∞ÊçÆÊã∑Ë¥ùÂà∞Âè¶Â§ñ‰∏Ä‰∏™namenode‰∏ä a) ÂêØÂä®ÂàöÂàöÊ†ºÂºèÂåñÁöÑnamenode : hadoop-daemon.sh start namenode b) ÔºàÂêåÊ≠•fsimageÊñá‰ª∂ÔºâÂú®Âè¶‰∏Ä‰∏™ÔºàÊ≤°ÊúâÊ†ºÂºèÂåñÁöÑÔºânamenode‰∏äÊâßË°åÔºö hdfs namenode -bootstrapStandby c) ÂêØÂä®Ê≤°Ê†ºÂºèÂåñÁöÑnamenodeÔºö hadoop-daemon.sh start namenode5. ÔºàÂàùÂßãÂåñÁ´û‰∫âÈîÅzookeeperÔºâÂú®ÂÖ∂‰∏≠‰∏Ä‰∏™namenode‰∏äÂàùÂßãÂåñzkfcÔºö hdfs zkfc -formatZK6. ÂÅúÊ≠¢‰∏äÈù¢ËäÇÁÇπÔºöstop-dfs.sh7. ÂÖ®Èù¢ÂêØÂä®Ôºà‰∏â‰∏™ËäÇÁÇπÔºâÔºöstart-dfs.sh8. ÂêØÂä®yarnËµÑÊ∫êÁÆ°ÁêÜÂô® yarn-daemon.sh start resourcemanager (yarn resourcemanager ) 2„ÄÅ‰ΩøÁî®ÔºàÂêØÂä®Ê≠•È™§Ôºâ 1234(1)ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ôÔºöservice iptables stop Ôºà3Âè∞Ôºâ(2)ÂêØÂä®zookeeper:zkServer.sh start Ôºà3Âè∞Ôºâ(3)ÂêØÂä®ÈõÜÁæ§Ôºöstart-dfs.sh |Ôºàstart-all.sh : ÂêåÊó∂ÂêØÂä®hdfsÂíåyarn)(4)ÂêØÂä®yarnÔºöyarn-daemon.sh start resourcemanager ÔºàÂèØ3Âè∞Ôºâ ÔºàÂÖ≥Èó≠Ê≠•È™§Ôºâ 123(1)ÂÖ≥Èó≠yarnÔºöyarn-daemon.sh stop resourcemanager ÔºàÂºÄÂá†Âè∞ÂÖ≥Âá†Âè∞Ôºâ(2)ÂÖ≥Èó≠ÈõÜÁæ§Ôºöstop-dfs.sh |Ôºàstop-all.sh :ÂêåÊó∂ÂÖ≥Èó≠hdfsÂíåyarnÔºâ Ôºà3Âè∞Ôºâ(3)ÂÖ≥Èó≠zookeeperÔºözkServer.sh stop Ôºà3Âè∞Ôºâ 12345678ÊúâÂèØËÉΩ‰ºöÂá∫ÈîôÁöÑÂú∞Êñπ1Ôºå Á°ÆËÆ§ÊØèÂè∞Êú∫Âô®Èò≤ÁÅ´Â¢ôÂùáÂÖ≥Êéâ2Ôºå Á°ÆËÆ§ÊØèÂè∞Êú∫Âô®ÁöÑÊó∂Èó¥ÊòØ‰∏ÄËá¥ÁöÑ3Ôºå Á°ÆËÆ§ÈÖçÁΩÆÊñá‰ª∂Êó†ËØØÔºåÂπ∂‰∏îÁ°ÆËÆ§ÊØèÂè∞Êú∫Âô®‰∏äÈù¢ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏ÄÊ†∑4Ôºå Â¶ÇÊûúËøòÊúâÈóÆÈ¢òÊÉ≥ÈáçÊñ∞Ê†ºÂºèÂåñÔºåÈÇ£‰πàÂÖàÊääÊâÄÊúâËäÇÁÇπÁöÑËøõÁ®ãÂÖ≥Êéâ5Ôºå Âà†Èô§‰πãÂâçÊ†ºÂºèÂåñÁöÑÊï∞ÊçÆÁõÆÂΩïhadoop.tmp.dirÂ±ûÊÄßÂØπÂ∫îÁöÑÁõÆÂΩïÔºåÊâÄÊúâËäÇÁÇπÂêåÊ≠•ÈÉΩÂà†ÊéâÔºåÂà´ÂçïÂà†Êéâ‰πãÂâçÁöÑ‰∏Ä‰∏™ÔºåÂà†Êéâ‰∏âÂè∞JNËäÇÁÇπ‰∏≠dfs.journalnode.edits.dirÂ±ûÊÄßÊâÄÂØπÂ∫îÁöÑÁõÆÂΩï6Ôºå Êé•‰∏äÈù¢ÁöÑÁ¨¨6Ê≠•ÂèàÂèØ‰ª•ÈáçÊñ∞Ê†ºÂºèÂåñÂ∑≤ÁªèÂêØÂä®‰∫Ü7Ôºå ÊúÄÁªàActive NamenodeÂÅúÊéâÁöÑÊó∂ÂÄôÔºåStandByÂèØ‰ª•Ëá™Âä®Êé•ÁÆ°ÔºÅ]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HDFSÂ≠¶‰π†]]></title>
    <url>%2F2019%2F01%2F03%2FHDFS%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[[TOC] HadoopÂ≠¶‰π†‰∏Ä„ÄÅÂàÜÂ∏ÉÂºèÊñá‰ª∂Â≠òÂÇ®Á≥ªÁªüHDFS1„ÄÅ‰ªÄ‰πàÊòØÂàÜÂ∏ÉÂºèÔºü ÂÆö‰πâÔºöÂ∞ÜÊµ∑ÈáèÁöÑÊï∞ÊçÆÔºåÂ§çÊùÇÁöÑ‰∏öÂä°ÂàÜÂèëÂà∞‰∏çÂêåÁöÑËÆ°ÁÆóÊú∫ËäÇÁÇπÂíåÊúçÂä°Âô®‰∏äÂàÜÂºÄÂ§ÑÁêÜÂíåËÆ°ÁÆó„ÄÇ ÁâπÁÇπÔºö Â§öÂâØÊú¨ÔºåÊèêÈ´òÊúçÂä°ÁöÑÂÆπÈîôÁéá„ÄÅÂÆâÂÖ®ÊÄß„ÄÅÈ´òÂèØÈù†ÊÄß ÈÄÇÂêàÊâπÂ§ÑÁêÜÔºåÊèêÈ´òÊúçÂä°ÁöÑÊïàÁéáÂíåÈÄüÂ∫¶Ôºå ÂáèËΩªÂçïÂè∞ÊúçÂä°ÁöÑÂéãÂäõ ÂÖ∑ÊúâÂæàÂ•ΩÁöÑÂèØÊâ©Â±ïÊÄß ËÆ°ÁÆóÂêëÊï∞ÊçÆÈù†Êã¢ÔºåÂÆâÂÖ®ÔºåÈ´òÊïà Â§ßÊï∞ÊçÆ‰∏âÈ©æÈ©¨ËΩ¶ÔºöGFS„ÄÅMapReduce„ÄÅBigtable 2„ÄÅ‰ªÄ‰πàÊòØHDFSÔºüÔºà1ÔºâHDFS‰∏∫‰ªÄ‰πà‰ºöÂá∫Áé∞Ôºü ‰∏ªË¶ÅËß£ÂÜ≥Â§ßÈáè„ÄêpbÁ∫ß‰ª•‰∏ä„ÄëÁöÑÂ§ßÊï∞ÊçÆÁöÑÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÈóÆÈ¢ò Ôºà2ÔºâHDFSÁöÑÁâπÁÇπ $$ ÂàÜÂ∏ÉÂºèÁâπÊÄßÔºö ÈÄÇÂêàÂ§ßÊï∞ÊçÆÂ§ÑÁêÜÔºöGB„ÄÅTB„ÄÅPB‰ª•‰∏äÁöÑÊï∞ÊçÆ Áôæ‰∏áËßÑÊ®°‰ª•‰∏äÁöÑÊñá‰ª∂Êï∞Èáè:10K+ ËäÇÁÇπ ÈÄÇÂêàÊâπÂ§ÑÁêÜÔºöÁßªÂä®ËÆ°ÁÆóËÄåÈùûÊï∞ÊçÆ(MR),Êï∞ÊçÆ‰ΩçÁΩÆÊö¥Èú≤ÁªôËÆ°ÁÆóÊ°ÜÊû∂ $$ Ëá™Ë∫´ÁâπÊÄßÔºö ÂèØÊûÑÂª∫Âú®Âªâ‰ª∑Êú∫Âô®‰∏ä È´òÂèØÈù†ÊÄßÔºöÈÄöËøáÂ§öÂâØÊú¨ÊèêÊèêÈ´ò È´òÂÆπÈîôÊÄßÔºöÊï∞ÊçÆËá™Âä®‰øùÂ≠òÂ§ö‰∏™ÂâØÊú¨ÔºõÂâØÊú¨‰∏¢Â§±ÂêéÔºåËá™Âä®ÊÅ¢Â§ç,Êèê‰æõ‰∫ÜÊÅ¢Â§çÊú∫Âà∂ $$ Áº∫ÁÇπÔºö ‚Äî‚Äì‰ΩéÂª∂ËøüÈ´òÊï∞ÊçÆÂêûÂêêËÆøÈóÆÈóÆÈ¢òÔºà‰∏çÈÄÇÂêà‰ΩéÂª∂ËøüÊï∞ÊçÆËÆøÈóÆÔºåHbaseÈÄÇÂêàÔºâ ‰∏çÊîØÊåÅÊØ´ÁßíÁ∫ß ÂêûÂêêÈáèÂ§ß‰ΩÜÊúâÈôêÂà∂‰∫éÂÖ∂Âª∂ËøüÔºàÁì∂È¢àÔºö‰ΩéÂª∂ËøüÊó†Ê≥ïÁ™ÅÁ†¥Ôºâ ‚Äî‚ÄìÂ∞èÊñá‰ª∂Â≠òÂèñÂç†Áî®NameNodeÂ§ßÈáèÂÜÖÂ≠ò(ÂØªÈÅìÊó∂Èó¥Ë∂ÖËøáËØªÂèñÊó∂Èó¥,Á∫¶Âç†99%) ‚Äî‚Äî-‰∏çÊîØÊåÅÂ§öÁî®Êà∑ÂÜôÂÖ•Âèä‰ªªÊÑè‰øÆÊîπÊñá‰ª∂ ‰∏çÊîØÊåÅÊñá‰ª∂‰øÆÊîπÔºö‰∏Ä‰∏™Êñá‰ª∂Âè™ËÉΩÊúâ‰∏Ä‰∏™ÂÜôËÄÖ Êñá‰ª∂‰ªÖÊîØÊåÅappend‰∏çÊîØÊåÅ‰øÆÊîπ ÔºàÂÖ∂ÂÆûÊú¨Ë∫´ÊòØÊîØÊåÅÁöÑÔºå‰∏ªË¶Å‰∏∫‰∫ÜÁî®Á©∫Èó¥Êç¢Êó∂Èó¥ÔºåËäÇÁ∫¶ÊàêÊú¨Ôºâ $$ ÂÆûÁé∞ÁõÆÊ†áÔºö ÂÖºÂÆπÂªâ‰ª∑ÁöÑÁ°¨‰ª∂ËÆæÊñΩ ÂÆûÁé∞ÊµÅÊï∞ÊçÆËØªÂÜô ÊîØÊåÅÂ§ßÊï∞ÊçÆÈõÜ ÊîØÊåÅÁÆÄÂçïÁöÑÊñá‰ª∂Ê®°Âûã Âº∫Â§ßÁöÑË∑®Âπ≥Âè∞ÂÖºÂÆπÊÄß Ôºà3ÔºâHDFSÊû∂ÊûÑÂõæHDFSÊû∂ÊûÑÂõæ HDFSÊû∂ÊûÑÂõæ ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºöÂÆâÂÖ®ÔºåÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏≠ÔºõÂ¶ÇMySql„ÄÅOracle„ÄÅSQlServer ÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºö‰∏çÂÆâÂÖ®ÔºåÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÔºõÂ¶ÇRedis„ÄÅMemcacheDB„ÄÅmongDB„ÄÅHbase 3„ÄÅHDFSÁöÑÂäüËÉΩÊ®°ÂùóÂèäÂéüÁêÜËØ¶Ëß£ HDFSÊï∞ÊçÆÂ≠òÂÇ®Ê®°ÂûãÔºàblockÔºâblock Ôºà1ÔºâÊñá‰ª∂Ë¢´Á∫øÊÄßÂàáÂàÜÂõ∫ÂÆöÂ§ßÂ∞èÁöÑÊï∞ÊçÆÂùóÔºöblock ÈÄöËøáÂÅèÁßªÈáèoffsetÔºàÂçï‰ΩçÔºöbyteÔºâÊ†áËÆ∞ ÈªòËÆ§Êï∞ÊçÆÂùóÂ§ßÂ∞è‰∏∫64MB (hadoop1.xÔºåhadoop2.xÈªòËÆ§‰∏∫128MÔºâ)ÔºåÂèØËá™ÂÆö‰πâÈÖçÁΩÆ Ëã•Êñá‰ª∂Â§ßÂ∞è‰∏çÂà∞64MB ÔºåÂàôÂçïÁã¨Â≠òÊàê‰∏Ä‰∏™block Ôºà2Ôºâ‰∏Ä‰∏™Êñá‰ª∂Â≠òÂÇ®ÊñπÂºè ÊåâÂ§ßÂ∞èË¢´ÂàáÂàÜÊàêËã•Âπ≤‰∏™block ÔºåÂ≠òÂÇ®Âà∞‰∏çÂêåËäÇÁÇπ‰∏ä ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊØè‰∏™blockÈÉΩÊúâ2‰∏™ÂâØÊú¨ ÂÖ±3‰∏™ÂâØÊú¨ ÂâØÊú¨Êï∞‰∏çÂ§ß‰∫éËäÇÁÇπÊï∞ Ôºà3ÔºâBlockÂ§ßÂ∞èÂíåÂâØÊú¨Êï∞ÈÄöËøáClientÁ´Ø‰∏ä‰º†Êñá‰ª∂Êó∂ËÆæÁΩÆÔºå Êñá‰ª∂‰∏ä‰º†ÊàêÂäüÂêéÂâØÊú¨Êï∞ÂèØ‰ª•ÂèòÊõ¥ÔºåBlock SizeÂ§ßÂ∞è‰∏çÂèØÂèòÊõ¥ ÂùóÁöÑÂ§ßÂ∞èËøúËøúÂ§ß‰∫éÊôÆÈÄöÊñá‰ª∂Á≥ªÁªüÔºåÂèØ‰ª•ÊúÄÂ∞èÂåñÂØªÂùÄÂºÄÈîÄ NameNodeÔºàÁÆÄÁß∞NNÔºâ Â≠òÂÇ®ÂÖÉÊï∞ÊçÆÔºõ ÂÖÉÊï∞ÊçÆ‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠Ôºõ ‰øùÂ≠òÊñá‰ª∂„ÄÅblockÂùó„ÄÅdatanode‰πãÈó¥ÁöÑÊò†Â∞ÑÂÖ≥Á≥ª 1&gt; NN‰∏ªË¶ÅÂäüËÉΩÔºö Êé•Êî∂ÂÆ¢Êà∑Á´ØÁöÑËØªÂÜôÊúçÂä°ÔºõÊé•Êî∂DNÊ±áÊä•block‰ΩçÁΩÆÂÖ≥Á≥ª 2&gt; NN‰øùÂ≠òmetadateÂÖÉ‰ø°ÊÅØ Âü∫‰∫éÂÜÖÂ≠òÂ≠òÂÇ®Ôºå‰∏ç‰ºöÂíåÁ£ÅÁõòÂèëÁîü‰∫§Êç¢ ‚Äã metadataÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÂåÖÊã¨‰ª•‰∏ã Êñá‰ª∂ÁöÑÂΩíÂ±ûÔºàownershipÔºâÂíåÊùÉÈôêÔºàpermissionÔºâ Êñá‰ª∂Â§ßÂ∞èÂíåÂÜôÂÖ•Êó∂Èó¥ blockÂàóË°®„ÄêÂÅèÁßªÈáè„ÄëÔºöÂç≥‰∏Ä‰∏™ÂÆåÊï¥Êñá‰ª∂ÊúâÂì™‰∫õblockÔºàb0+b1+b2+..=fileÔºâ ‰ΩçÁΩÆ‰ø°ÊÅØÔºàÂä®ÊÄÅÁöÑÔºâÔºöBlockÊØè‰∏™ÂâØÊú¨‰øùÂ≠òÂú®Âì™‰∏™DataNode‰∏≠ *Ê≥®ÊÑè*Ôºö‰ΩçÁΩÆ‰ø°ÊÅØÊòØÁî±DNÂêØÂä®Êó∂‰∏äÊä•ÁªôNN ÔºåÂõ†‰∏∫ÂÆÉ‰ºöÈöèÊó∂ÂèòÂåñÔºåÊâÄ‰ª•‰∏ç‰ºö‰øùÂ≠òÂú®ÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏≠ 3&gt; NameNodeÁöÑmetadate‰ø°ÊÅØÂú®ÂêØÂä®Âêé‰ºöÂä†ËΩΩÂà∞ÂÜÖÂ≠ò ÂêåÊó∂Ôºö metadata‰ø°ÊÅØ‰πü‰ºö‰øùÂ≠òfsimageÊñá‰ª∂‰∏≠ÔºàfsimageÊñá‰ª∂ÊòØ‰Ωç‰∫éÁ£ÅÁõò‰∏äÁöÑÈïúÂÉèÊñá‰ª∂Ôºâ ÂØπmetadataÁöÑÊìç‰ΩúÊó•Âøó‰πü‰ºöËÆ∞ÂΩïÂú®edits Êñá‰ª∂‰∏≠ÔºàeditsÊñá‰ª∂ÊòØ‰Ωç‰∫éÁ£ÅÁõò‰∏äÁöÑÊó•ÂøóÊñá‰ª∂Ôºâ SecondaryNameNodeÔºàÁÆÄÁß∞SNNÔºâ1&gt;SNN‰∏ªË¶ÅÂäüËÉΩ Â∏ÆÂä©NameNodeÂêàÂπ∂editsÂíåfsimageÊñá‰ª∂ÔºåÂáèÂ∞ëNNÂêØÂä®Êó∂Èó¥Ôºõ SecondaryNameNode‰∏ÄËà¨ÊòØÂçïÁã¨ËøêË°åÂú®‰∏ÄÂè∞Êú∫Âô®‰∏äÔºõ ÂÆÉ‰∏çÊòØNNÁöÑÂ§á‰ªΩÔºà‰ΩÜÂèØ‰ª•ÂÅöÂ§á‰ªΩ)„ÄÇ 2&gt;ÂêàÂπ∂ÊµÅÁ®ãSNNÂêàÂπ∂ 123456789101112SecondaryNameNodeÁöÑÂ∑•‰ΩúÊÉÖÂÜµÔºöÔºà1ÔºâSecondaryNameNode‰ºöÂÆöÊúüÂíåNameNodeÈÄö‰ø°ÔºåËØ∑Ê±ÇÂÖ∂ÂÅúÊ≠¢‰ΩøÁî®EditLogÊñá‰ª∂Ôºå ÊöÇÊó∂Â∞ÜÊñ∞ÁöÑÂÜôÊìç‰ΩúÂÜôÂà∞‰∏Ä‰∏™Êñ∞ÁöÑÊñá‰ª∂edit.new‰∏äÊù•ÔºåËøô‰∏™Êìç‰ΩúÊòØÁû¨Èó¥ÂÆåÊàêÔºå ‰∏äÂ±ÇÂÜôÊó•ÂøóÁöÑÂáΩÊï∞ÂÆåÂÖ®ÊÑüËßâ‰∏çÂà∞Â∑ÆÂà´ÔºõÔºà2ÔºâSecondaryNameNodeÈÄöËøáHTTP GETÊñπÂºè‰ªéNameNode‰∏äËé∑ÂèñÂà∞FsImageÂíåEditLogÊñá ‰ª∂ÔºåÂπ∂‰∏ãËΩΩÂà∞Êú¨Âú∞ÁöÑÁõ∏Â∫îÁõÆÂΩï‰∏ãÔºõÔºà3ÔºâSecondaryNameNodeÂ∞Ü‰∏ãËΩΩ‰∏ãÊù•ÁöÑFsImageËΩΩÂÖ•Âà∞ÂÜÖÂ≠òÔºåÁÑ∂Âêé‰∏ÄÊù°‰∏ÄÊù°Âú∞ÊâßË°åEditLogÊñá‰ª∂ ‰∏≠ÁöÑÂêÑÈ°πÊõ¥Êñ∞Êìç‰ΩúÔºå‰ΩøÂæóÂÜÖÂ≠ò‰∏≠ÁöÑFsImage‰øùÊåÅÊúÄÊñ∞Ôºõ Ëøô‰∏™ËøáÁ®ãÂ∞±ÊòØEditLogÂíåFsImageÊñá‰ª∂ÂêàÂπ∂ÔºõÔºà4ÔºâSecondaryNameNodeÊâßË°åÂÆåÔºà3ÔºâÊìç‰Ωú‰πãÂêéÔºå ‰ºöÈÄöËøápostÊñπÂºèÂ∞ÜÊñ∞ÁöÑFsImageÊñá‰ª∂ÂèëÈÄÅÂà∞NameNodeËäÇÁÇπ‰∏äÔºà5ÔºâNameNodeÂ∞Ü‰ªéSecondaryNameNodeÊé•Êî∂Âà∞ÁöÑÊñ∞ÁöÑFsImageÊõøÊç¢ÊóßÁöÑFsImageÊñá‰ª∂Ôºå ÂêåÊó∂Â∞Üedit.newÊõøÊç¢EditLogÊñá‰ª∂ÔºåÈÄöËøáËøô‰∏™ËøáÁ®ãEditLogÂ∞±ÂèòÂ∞è‰∫Ü 3&gt;ÂêàÂπ∂Êú∫Âà∂ ‚Äî‚Äî-SNNÊâßË°åÂêàÂπ∂Êó∂Èó¥ÂíåÊú∫Âà∂ A„ÄÅÊ†πÊçÆÈÖçÁΩÆÊñá‰ª∂ËÆæÁΩÆÁöÑÊó∂Èó¥Èó¥Èöîfs.checkpoint.period ÈªòËÆ§3600Áßí B„ÄÅÊ†πÊçÆÈÖçÁΩÆÊñá‰ª∂ËÆæÁΩÆedits logÂ§ßÂ∞è fs.checkpoint.size ‚Äã ËßÑÂÆöeditsÊñá‰ª∂ÁöÑÊúÄÂ§ßÂÄºÈªòËÆ§ÊòØ64MB DataNodeÔºàÁÆÄÁß∞DNÔºâ1&gt; DN‰∏ªË¶ÅÂäüËÉΩ Â≠òÂÇ®Êñá‰ª∂ÂÜÖÂÆπÔºàblockÔºâÔºõ Êñá‰ª∂ÂÜÖÂÆπ‰øùÂ≠òÂú®Á£ÅÁõòÔºõ Áª¥Êä§‰∫Üblock id Âà∞datanodeÊú¨Âú∞Êñá‰ª∂ÁöÑÊò†Â∞ÑÂÖ≥Á≥ª ÂêØÂä®DNÁ∫øÁ®ãÁöÑÊó∂ÂÄô‰ºöÂêëNameNodeÊ±áÊä•block‰ΩçÁΩÆ‰ø°ÊÅØ 2&gt; DNÂ∑•‰ΩúÊú∫Âà∂12345‚Ä¢ Êï∞ÊçÆËäÇÁÇπÊòØÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüHDFSÁöÑÂ∑•‰ΩúËäÇÁÇπÔºåË¥üË¥£Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåËØªÂèñÔºå‚Ä¢ ‰ºöÊ†πÊçÆÂÆ¢Êà∑Á´ØÊàñËÄÖÊòØÂêçÁß∞ËäÇÁÇπÁöÑË∞ÉÂ∫¶Êù•ËøõË°åÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåÊ£ÄÁ¥¢Ôºå‚Ä¢ Âπ∂‰∏îÈÄöËøáÂøÉË∑≥Êú∫Âà∂ÂêëÂêçÁß∞ËäÇÁÇπÂÆöÊúüÂèëÈÄÅËá™Â∑±ÊâÄÂ≠òÂÇ®ÁöÑÂùóÁöÑÂàóË°®Ôºå‰øùÊåÅ‰∏éÂÖ∂ËÅîÁ≥ªÔºà3Áßí‰∏ÄÊ¨°Ôºâ ÔºàÂ¶ÇÊûúNN 10ÂàÜÈíüÊ≤°ÊúâÊî∂Âà∞DNÁöÑÂøÉË∑≥ÔºåÂàôËÆ§‰∏∫ÂÖ∂Â∑≤ÁªèlostÔºåÂπ∂copyÂÖ∂‰∏äÁöÑblockÂà∞ÂÖ∂ÂÆÉDNÔºâ‚Ä¢ ÊØè‰∏™Êï∞ÊçÆËäÇÁÇπ‰∏≠ÁöÑÊï∞ÊçÆ‰ºöË¢´‰øùÂ≠òÂú®ÂêÑËá™ËäÇÁÇπÁöÑÊú¨Âú∞LinuxÊñá‰ª∂Á≥ªÁªü‰∏≠ 3&gt; blockÁöÑÂâØÊú¨ÊîæÁΩÆÁ≠ñÁï• ‚Äì Á¨¨‰∏Ä‰∏™ÂâØÊú¨ÔºöÊîæÁΩÆÂú®‰∏ä‰º†Êñá‰ª∂ÁöÑDNÔºàÈõÜÁæ§ÂÜÖÊèê‰∫§ÔºâÔºõ ‚Äã Â¶ÇÊûúÊòØÈõÜÁæ§Â§ñÊèê‰∫§ÔºåÂàôÈöèÊú∫ÊåëÈÄâ‰∏ÄÂè∞Á£ÅÁõò‰∏çÂ§™Êª°ÔºåCPU‰∏çÂ§™ÂøôÁöÑËäÇÁÇπ„ÄÇ ‚Äì Á¨¨‰∫å‰∏™ÂâØÊú¨ÔºöÊîæÁΩÆÂú®‰∫éÁ¨¨‰∏Ä‰∏™ÂâØÊú¨‰∏çÂêåÁöÑÊú∫Êû∂ÁöÑËäÇÁÇπ‰∏ä„ÄÇ ‚Äì Á¨¨‰∏â‰∏™ÂâØÊú¨Ôºö‰∏éÁ¨¨‰∫å‰∏™ÂâØÊú¨Áõ∏ÂêåÊú∫Êû∂ÁöÑ‰∏çÂêåËäÇÁÇπ„ÄÇ ‚Äì Êõ¥Â§öÂâØÊú¨ÔºöÈöèÊú∫ËäÇÁÇπ blockÂùóÂ≠òÊîæ‰ΩçÁΩÆ 4„ÄÅHDFSËØªÂÜôÊµÅÁ®ã ËØªÊñá‰ª∂ËøáÁ®ãread 1„ÄÅÈ¶ñÂÖàclientÁ´ØË∞ÉÁî®FileSystemÂØπË±°ÔºàFSÔºâÁöÑopenÊñπÊ≥ïÔºåÔºàFSÔºö‰∏Ä‰∏™DistributedFileSystemÁöÑÂÆû‰æãÔºâ„ÄÇ2„ÄÅDistributedFileSystemÈÄöËøárpcÂçèËÆÆ‰ªéNameNodeÔºàNNÔºâËé∑ÂæóÊñá‰ª∂ÁöÑÁ¨¨‰∏ÄÊâπblockÁöÑlocationsÔºåÔºàÂêå‰∏Ä‰∏™blockÊåâÂâØÊú¨Êï∞‰ºöËøîÂõûÂ§ö‰∏™locationsÔºåÂõ†‰∏∫Âêå‰∏ÄÊñá‰ª∂ÁöÑblockÂàÜÂ∏ÉÂºèÂ≠òÂÇ®Âú®‰∏çÂêåËäÇÁÇπ‰∏äÔºâÔºåËøô‰∫õlocationsÊåâÁÖßhadoopÊãìÊâëÁªìÊûÑÊéíÂ∫èÔºåË∑ùÁ¶ªÂÆ¢Êà∑Á´ØËøëÁöÑÊéíÂú®ÂâçÈù¢ÔºàÂ∞±ËøëÈÄâÊã©Ôºâ„ÄÇ 3„ÄÅÂâç‰∏§Ê≠•‰ºöËøîÂõû‰∏Ä‰∏™FSDataInputStreamÂØπË±°ÔºåËØ•ÂØπË±°‰ºöË¢´Â∞ÅË£ÖDFSInputStreamÂØπË±°ÔºåDFSInputStreamÂèØ‰ª•Êñπ‰æøÁöÑÁÆ°ÁêÜDNÂíåNNÁöÑÊï∞ÊçÆÊµÅ„ÄÇÂÆ¢Êà∑Á´ØË∞ÉÁî®readÊñπÊ≥ïÔºåDFSInputStream‰ºöËøûÊé•Á¶ªÂÆ¢Êà∑Á´ØÊúÄËøëÁöÑDNÔºåÊï∞ÊçÆ‰ªéDNÊ∫êÊ∫ê‰∏çÊñ≠ÁöÑÊµÅÂêëÂÆ¢Êà∑Á´ØÔºàÂØπÂÆ¢Êà∑Á´ØÊòØÈÄèÊòéÁöÑÔºåÂè™ËÉΩÁúãÂà∞‰∏Ä‰∏™ËØªÂÖ•ÁöÑInputÊµÅÔºâ„ÄÇ 4„ÄÅÂ¶ÇÊûúÁ¨¨‰∏ÄÊâπblockÈÉΩËØªÂÆå‰∫ÜÔºå DFSInputStreamÂ∞±‰ºöÂéªNNÊãø‰∏ã‰∏ÄÊâπblockÁöÑlocationsÔºåÁÑ∂ÂêéÁªßÁª≠ËØªÔºåÂ¶ÇÊûúÊâÄÊúâÁöÑÂùóÈÉΩËØªÂÆåÔºåËøôÊó∂Â∞±‰ºöÂÖ≥Èó≠ÊéâÊâÄÊúâÁöÑÊµÅ ËØª Ê≥®ÊÑèÔºö 123456Â¶ÇÊûúÂú®ËØªÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºå DFSInputStreamÂíåDNÁöÑÈÄöËÆØÂèëÁîüÂºÇÂ∏∏ÔºåÂ∞±‰ºöÂ∞ùËØïËøûÊé•Ê≠£Âú®ËØªÁöÑblockÁöÑÊéíÂ∫èÁ¨¨‰∫åËøëÁöÑDN,Âπ∂‰∏î‰ºöËÆ∞ÂΩïÂì™‰∏™DNÂèëÁîüÈîôËØØÔºåÂâ©‰ΩôÁöÑblocksËØªÁöÑÊó∂ÂÄôÂ∞±‰ºöÁõ¥Êé•Ë∑≥ËøáËØ•DN„ÄÇ DFSInputStream‰πü‰ºöÊ£ÄÊü•blockÊï∞ÊçÆÊ†°È™åÂíåÔºåÂ¶ÇÊûúÂèëÁé∞‰∏Ä‰∏™ÂùèÁöÑblock,Â∞±‰ºöÂÖàÊä•ÂëäÂà∞NNÔºåÁÑ∂ÂêéDFSInputStreamÂú®ÂÖ∂‰ªñÁöÑDN‰∏äËØªËØ•blockÁöÑÈïúÂÉè„ÄÇËØ•ËÆæËÆ°Â∞±ÊòØÂÆ¢Êà∑Á´ØÁõ¥Êé•ËøûÊé•DNÊù•Ê£ÄÁ¥¢Êï∞ÊçÆÔºåÂπ∂‰∏îNNÊù•Ë¥üË¥£‰∏∫ÊØè‰∏Ä‰∏™blockÊèê‰æõÊúÄ‰ºòÁöÑDNÔºåNN‰ªÖ‰ªÖÂ§ÑÁêÜblock locationÁöÑËØ∑Ê±ÇÔºåËøô‰∫õ‰ø°ÊÅØÈÉΩÂä†ËΩΩÂú®NNÁöÑÂÜÖÂ≠ò‰∏≠ÔºåhdfsÈÄöËøáDNÈõÜÁæ§ÂèØ‰ª•ÊâøÂèóÂ§ßÈáèÂÆ¢Êà∑Á´ØÁöÑÂπ∂ÂèëËÆøÈóÆ„ÄÇ* RPC *ÔºàRemote Procedure Call ProtocolÔºâ‚Äî‚ÄîËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÂçèËÆÆÔºåÂÆÉÊòØ‰∏ÄÁßçÈÄöËøáÁΩëÁªú‰ªéËøúÁ®ãËÆ°ÁÆóÊú∫Á®ãÂ∫è‰∏äËØ∑Ê±ÇÊúçÂä°ÔºåËÄå‰∏çÈúÄË¶Å‰∫ÜËß£Â∫ïÂ±ÇÁΩëÁªúÊäÄÊúØÁöÑÂçèËÆÆ„ÄÇRPCÂçèËÆÆÂÅáÂÆöÊüê‰∫õ‰º†ËæìÂçèËÆÆÁöÑÂ≠òÂú®ÔºåÂ¶ÇTCPÊàñUDPÔºå‰∏∫ÈÄö‰ø°Á®ãÂ∫è‰πãÈó¥Êê∫Â∏¶‰ø°ÊÅØÊï∞ÊçÆ„ÄÇÂú®OSIÁΩëÁªúÈÄö‰ø°Ê®°Âûã‰∏≠ÔºåRPCË∑®Ë∂ä‰∫Ü‰º†ËæìÂ±ÇÂíåÂ∫îÁî®Â±Ç„ÄÇRPC‰ΩøÂæóÂºÄÂèëÂåÖÊã¨ÁΩëÁªúÂàÜÂ∏ÉÂºèÂ§öÁ®ãÂ∫èÂú®ÂÜÖÁöÑÂ∫îÁî®Á®ãÂ∫èÊõ¥Âä†ÂÆπÊòì„ÄÇRPCÈááÁî®ÂÆ¢Êà∑Êú∫/ÊúçÂä°Âô®Ê®°Âºè„ÄÇËØ∑Ê±ÇÁ®ãÂ∫èÂ∞±ÊòØ‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ÔºåËÄåÊúçÂä°Êèê‰æõÁ®ãÂ∫èÂ∞±ÊòØ‰∏Ä‰∏™ÊúçÂä°Âô®„ÄÇÈ¶ñÂÖàÔºåÂÆ¢Êà∑Êú∫Ë∞ÉÁî®ËøõÁ®ãÂèëÈÄÅ‰∏Ä‰∏™ÊúâËøõÁ®ãÂèÇÊï∞ÁöÑË∞ÉÁî®‰ø°ÊÅØÂà∞ÊúçÂä°ËøõÁ®ãÔºåÁÑ∂ÂêéÁ≠âÂæÖÂ∫îÁ≠î‰ø°ÊÅØ„ÄÇÂú®ÊúçÂä°Âô®Á´ØÔºåËøõÁ®ã‰øùÊåÅÁù°Áú†Áä∂ÊÄÅÁõ¥Âà∞Ë∞ÉÁî®‰ø°ÊÅØÂà∞Ëææ‰∏∫Ê≠¢„ÄÇÂΩì‰∏Ä‰∏™Ë∞ÉÁî®‰ø°ÊÅØÂà∞ËææÔºåÊúçÂä°Âô®Ëé∑ÂæóËøõÁ®ãÂèÇÊï∞ÔºåËÆ°ÁÆóÁªìÊûúÔºåÂèëÈÄÅÁ≠îÂ§ç‰ø°ÊÅØÔºåÁÑ∂ÂêéÁ≠âÂæÖ‰∏ã‰∏Ä‰∏™Ë∞ÉÁî®‰ø°ÊÅØÔºåÊúÄÂêéÔºåÂÆ¢Êà∑Á´ØË∞ÉÁî®ËøõÁ®ãÊé•Êî∂Á≠îÂ§ç‰ø°ÊÅØÔºåËé∑ÂæóËøõÁ®ãÁªìÊûúÔºåÁÑ∂ÂêéË∞ÉÁî®ÊâßË°åÁªßÁª≠ËøõË°å„ÄÇ ÂÜôÊñá‰ª∂ËøáÁ®ãwrite 1.ÂÆ¢Êà∑Á´ØÈÄöËøáË∞ÉÁî®DistributedFileSystemÁöÑcreateÊñπÊ≥ïÂàõÂª∫Êñ∞Êñá‰ª∂„ÄÇ 2.DistributedFileSystemÈÄöËøáRPCË∞ÉÁî®NNÂéªÂàõÂª∫‰∏Ä‰∏™Ê≤°ÊúâblocksÂÖ≥ËÅîÁöÑÊñ∞Êñá‰ª∂ÔºåÂàõÂª∫ÂâçÔºåNN‰ºöÂÅöÂêÑÁßçÊ†°È™åÔºåÊØîÂ¶ÇÊñá‰ª∂ÊòØÂê¶Â≠òÂú®ÔºåÂÆ¢Êà∑Á´ØÊúâÊó†ÊùÉÈôêÂéªÂàõÂª∫Á≠â„ÄÇÂ¶ÇÊûúÊ†°È™åÈÄöËøáÔºåNNÂ∞±‰ºöËÆ∞ÂΩï‰∏ãÊñ∞Êñá‰ª∂ÔºåÂê¶ÂàôÂ∞±‰ºöÊäõÂá∫IOÂºÇÂ∏∏„ÄÇ 3.Ââç‰∏§Ê≠•ÁªìÊùüÂêéÔºå‰ºöËøîÂõûFSDataOutputStreamÁöÑÂØπË±°ÔºåÂ∞ÅË£ÖÂú®DFSOutputStreamÔºåÂÆ¢Êà∑Á´ØÂºÄÂßãÂÜôÊï∞ÊçÆÂà∞DFSOutputStreamÔºåDFSOutputStream‰ºöÊääÊï∞ÊçÆÂàáÊàê‰∏Ä‰∏™‰∏™Â∞èÁöÑpacketÔºåÁÑ∂ÂêéÊéíÊàêÈòüÂàódataQuene„ÄÇ 4.NN‰ºöÁªôËøô‰∏™Êñ∞ÁöÑblockÂàÜÈÖçÊúÄÈÄÇÂêàÂ≠òÂÇ®ÁöÑÂá†‰∏™datanodeÔºåDFSOutputStreamÊääpacketÂåÖÊéíÊàê‰∏Ä‰∏™ÁÆ°ÈÅìpipelineËæìÂá∫„ÄÇÂÖàÊåâÈòüÂàóËæìÂá∫Âà∞ÁÆ°ÈÅìÁöÑÁ¨¨‰∏Ä‰∏™datanode‰∏≠ÔºåÂπ∂Â∞ÜËØ•Packet‰ªédataQueueÈòüÂàó‰∏≠ÁßªÂà∞ackQueueÈòüÂàó‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™datanodeÂèàÊääpacketËæìÂá∫Âà∞Á¨¨‰∫å‰∏™datanode‰∏≠Ôºå‰ª•Ê≠§Á±ªÊé®„ÄÇ 5.DFSOutputStream‰∏≠ÁöÑackQueneÔºå‰πüÊòØÁî±packetÁªÑÊàêÔºåÁ≠âÂæÖDNÁöÑÊî∂Âà∞ÂìçÂ∫îÔºåÂΩìpipeline‰∏≠ÁöÑDNÈÉΩË°®Á§∫Â∑≤ÁªèÊî∂Âà∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåËøôÊó∂ackQueneÊâç‰ºöÊääÂØπÂ∫îÁöÑpacketÂåÖÁßªÈô§Êéâ„ÄÇ Â¶ÇÊûúÂú®ÂÜôÁöÑËøáÁ®ã‰∏≠Êüê‰∏™DNÂèëÁîüÈîôËØØÔºå‰ºöÈááÂèñ‰ª•‰∏ãÂá†Ê≠•Ôºö ‚Äã 1) pipelineË¢´ÂÖ≥Èó≠ÊéâÔºõ ‚Äã 2)‰∏∫‰∫ÜÈò≤Ê≠¢‰∏¢ÂåÖÔºåackQueneÈáåÁöÑpacket‰ºöÂêåÊ≠•Âà∞dataQueneÈáå;Êñ∞Âª∫pipelineÁÆ°ÈÅìÊé•Âà∞ÂÖ∂‰ªñÊ≠£Â∏∏DN‰∏ä ‚Äã 4)Ââ©‰∏ãÁöÑÈÉ®ÂàÜË¢´ÂÜôÂà∞Ââ©‰∏ãÁöÑÊ≠£Â∏∏ÁöÑdatanode‰∏≠Ôºõ ‚Äã 5)NNÊâæÂà∞Âè¶Â§ñÁöÑDNÂéªÂàõÂª∫Ëøô‰∏™ÂùóÁöÑÂ§çÂà∂„ÄÇÔºàÂØπÂÆ¢Êà∑Á´ØÈÄèÊòéÔºâ 6.ÂÆ¢Êà∑Á´ØÂÆåÊàêÂÜôÊï∞ÊçÆÂêéË∞ÉÁî®closeÊñπÊ≥ïÂÖ≥Èó≠ÂÜôÂÖ•ÊµÅ Ê≥®ÊÑèÔºöÂÆ¢Êà∑Á´ØÊâßË°åwriteÊìç‰ΩúÂêéÔºåÂÜôÂÆåÁöÑblockÊâçÊòØÂèØËßÅÁöÑÔºåÊ≠£Âú®ÂÜôÁöÑblockÂØπÂÆ¢Êà∑Á´ØÊòØ‰∏çÂèØËßÅÁöÑ ÂÜô 5.HDFSÊñá‰ª∂ÊùÉÈôêÂíåÂÆâÂÖ®Ê®°ÂºèÔºüÔºüHDFSÊñá‰ª∂ÊùÉÈôêÔºüÔºü‚Äì ‰∏éLinuxÊñá‰ª∂ÊùÉÈôêÁ±ª‰ºº ‚Ä¢ r: read; w:write; x:executeÔºåÊùÉÈôêxÂØπ‰∫éÊñá‰ª∂ÂøΩÁï•ÔºåÂØπ‰∫éÊñá‰ª∂Â§πË°®Á§∫ÊòØÂê¶ÂÖÅËÆ∏ËÆøÈóÆÂÖ∂ÂÜÖÂÆπ ‚Äì Â¶ÇÊûúLinuxÁ≥ªÁªüÁî®Êà∑zs‰ΩøÁî®hadoopÂëΩ‰ª§ÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂ÔºåÈÇ£‰πàËøô‰∏™ Êñá‰ª∂Âú®HDFS‰∏≠ownerÂ∞±ÊòØzs„ÄÇ ‚Äì HDFSÁöÑÊùÉÈôêÁõÆÁöÑÔºöÈòªÊ≠¢Â•Ω‰∫∫ÂÅöÈîô‰∫ãÔºåËÄå‰∏çÊòØÈòªÊ≠¢Âùè‰∫∫ÂÅöÂùè‰∫ã„ÄÇ ÔºüÔºüÂÆâÂÖ®Ê®°ÂºèÔºüÔºü NNÂêØÂä®ÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖàÂ∞ÜÊò†ÂÉèÊñá‰ª∂(fsimage)ËΩΩÂÖ•ÂÜÖÂ≠òÔºåÂπ∂ÊâßË°åÁºñËæëÊó•Âøó(edits)‰∏≠ÁöÑÂêÑÈ°πÊìç‰Ωú„ÄÇ ‰∏ÄÊó¶Âú®ÂÜÖÂ≠ò‰∏≠ÊàêÂäüÂª∫Á´ãÊñá‰ª∂Á≥ªÁªüÂÖÉÊï∞ÊçÆÁöÑÊò†Â∞ÑÔºåÂàôÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑfsimageÊñá‰ª∂(Ëøô‰∏™Êìç‰Ωú‰∏çÈúÄË¶ÅSecondaryNameNode)Âíå‰∏Ä‰∏™Á©∫ÁöÑÁºñËæëÊó•Âøó„ÄÇ Ê≠§ÂàªnamenodeËøêË°åÂú®ÂÆâÂÖ®Ê®°Âºè„ÄÇÂç≥namenodeÁöÑÊñá‰ª∂Á≥ªÁªüÂØπ‰∫éÂÆ¢ÊúçÁ´ØÊù•ËØ¥ÊòØÂè™ËØªÁöÑ„ÄÇ(ÊòæÁ§∫ÁõÆÂΩïÔºåÊòæÁ§∫Êñá‰ª∂ÂÜÖÂÆπÁ≠â„ÄÇÂÜô„ÄÅÂà†Èô§„ÄÅÈáçÂëΩÂêçÈÉΩ‰ºöÂ§±Ë¥•)„ÄÇ Âú®Ê≠§Èò∂ÊÆµNamenodeÊî∂ÈõÜÂêÑ‰∏™datanodeÁöÑÊä•ÂëäÔºåÂΩìÊï∞ÊçÆÂùóËææÂà∞ÊúÄÂ∞èÂâØÊú¨Êï∞‰ª•‰∏äÊó∂Ôºå‰ºöË¢´ËÆ§‰∏∫ÊòØ‚ÄúÂÆâÂÖ®‚ÄùÁöÑÔºå Âú®‰∏ÄÂÆöÊØî‰æãÔºàÂèØËÆæÁΩÆÔºâÁöÑÊï∞ÊçÆÂùóË¢´Á°ÆÂÆö‰∏∫‚ÄúÂÆâÂÖ®‚ÄùÂêéÔºåÂÜçËøáËã•Âπ≤Êó∂Èó¥ÔºåÂÆâÂÖ®Ê®°ÂºèÁªìÊùü ÂΩìÊ£ÄÊµãÂà∞ÂâØÊú¨Êï∞‰∏çË∂≥ÁöÑÊï∞ÊçÆÂùóÊó∂ÔºåËØ•Âùó‰ºöË¢´Â§çÂà∂Áõ¥Âà∞ËææÂà∞ÊúÄÂ∞èÂâØÊú¨Êï∞ÔºåÁ≥ªÁªü‰∏≠Êï∞ÊçÆÂùóÁöÑ‰ΩçÁΩÆÂπ∂‰∏çÊòØÁî±namenodeÁª¥Êä§ÁöÑÔºåËÄåÊòØ‰ª•ÂùóÂàóË°®ÂΩ¢ÂºèÂ≠òÂÇ®Âú®datanode‰∏≠„ÄÇ ÂºÇÂ∏∏ ‰∫å„ÄÅÂÆåÂÖ®ÂàÜÂ∏ÉÂºèÊê≠Âª∫ÂèäeclipseÊèí‰ª∂1„ÄÅÂÆåÂÖ®ÂàÜÂ∏ÉÂºèÊê≠Âª∫ÔºàÂøÖÂ§áÔºâ(1)ÁéØÂ¢ÉÁöÑÂáÜÂ§á Linux (ÂâçÈù¢Â∑≤ÁªèÂÆâË£ÖÂ•Ω‰∫Ü) JDKÔºàÂâçÈù¢Â∑≤ÁªèÂÆâË£ÖÂ•Ω‰∫ÜÔºâ ÂáÜÂ§áËá≥Â∞ë3Âè∞Êú∫Âô®ÔºàÈÄöËøáÂÖãÈöÜËôöÊãüÊú∫Ôºõ) (ÁΩëÁªúÈÖçÁΩÆ„ÄÅJDKÊê≠Âª∫„ÄÅhostsÈÖçÁΩÆÔºå‰øùËØÅËäÇÁÇπÈó¥ËÉΩ‰∫ípingÈÄöÔºâ Êó∂Èó¥ÂêåÊ≠• (ntpdate time.nist.gov) sshÂÖçÁßòÈí•ÁôªÂΩï (‰∏§‰∏§‰∫íÈÄöÂÖçÁßòÈí•) Ôºà2ÔºâÂÆåÂÖ®ÂàÜÂ∏ÉÂºèÊê≠Âª∫Ê≠•È™§ËØ¶ÊÉÖËßÅHadoop2.X.mdÊñá‰ª∂ 2„ÄÅHDFSÂëΩ‰ª§(0) ÂëΩ‰ª§ Ôºöhdfs dfs(1)‰∏ä‰º†Êñá‰ª∂Âà∞HDFSÔºö hdfs dfs -put fileName[Êú¨Âú∞Êñá‰ª∂Âêç] PATH„ÄêhdfsÁöÑÊñá‰ª∂Ë∑ØÂä≤„Äë ‰∏ä‰º†Êú¨Âú∞Êñá‰ª∂install.logÂà∞/myhdfsÁõÆÂΩï‰∏ã hdfs dfs -put install.log /myhdfs ‚Äã ÔºàÊñá‰ª∂Ë∑ØÂæÑ) (‰∏ä‰º†ÁõÆÂΩïÔºâ (2)ÂàõÂª∫Êñá‰ª∂Â§π hdfs dfs -mkdir[-p] (3)Âà†Èô§Êñá‰ª∂ÊàñÊñá‰ª∂Â§π hdfs dfs -rm -r /myhadoop1.0 123456789hdfs dfs -du -s URI[URI ...] ÊòæÁ§∫Êñá‰ª∂(Â§π)Â§ßÂ∞è. hdfs dfs -cp -f]URI[URI...]&lt;dest&gt; Â§çÂà∂Êñá‰ª∂(Â§π)ÔºåÂèØ‰ª•Ë¶ÜÁõñÔºåÂèØ‰ª•‰øùÁïôÂéüÊúâÊùÉÈôê‰ø°ÊÅØhdfs dfs -count -q&lt;paths&gt;ÂàóÂá∫Êñá‰ª∂Â§πÊï∞Èáè„ÄÅÊñá‰ª∂Êï∞Èáè„ÄÅÂÜÖÂÆπÂ§ßÂ∞è.hdfs dfs -chown -R[:[GROUP]]URI[URI] ‰øÆÊîπÊâÄÊúâËÄÖ.hdfs dfs -chmod [-R]&lt;MODE[,MODE]...|OCTALMODE&gt;URI[URI ...] ‰øÆÊîπÊùÉÈôê. Ôºà4ÔºâÊåáÂÆöblockÂ§ßÂ∞è 123456789‰∫ßÁîü100000Êù°Êï∞ÊçÆÔºöfor i in `seq 100000`;do echo &quot;hello sxt $i&quot; &gt;&gt; test.txt;done‰∏ä‰º†Êñá‰ª∂test.txtÂà∞ÊåáÂÆöÁöÑJava22ÁõÆÂΩï‰∏ãÔºåÂπ∂ÊåáÂÆöblockÂùóÁöÑÂ§ßÂ∞è1MÔºöhdfs dfs -D dfs.blocksize=1048576-put test.txt /java22-D ----ËÆæÁΩÆÂ±ûÊÄß 3„ÄÅeclipseÊèí‰ª∂ÂÆâË£ÖÈÖçÁΩÆÔºà1Ôºâ„ÄÅÂØºÂÖ•Êèí‰ª∂ Â∞Ü‰ª•‰∏ãjarÂåÖÊîæÂÖ•eclipseÁöÑpluginsÊñá‰ª∂Â§π‰∏≠ ‚Äã hadoop-eclipse-plugin-2.6.0.jar ÂêØÂä®eclipseÔºöÂá∫Áé∞ÁïåÈù¢Â¶Ç‰∏ãÔºö Êèí‰ª∂Â∫îÁî® Ôºà2ÔºâÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèEclipseÊèí‰ª∂ÂÆâË£ÖÂÆåÂêé‰øÆÊîπwindows‰∏ãÁöÑÁî®Êà∑ÂêçÔºåÁÑ∂ÂêéÈáçÂêØEclipseÔºö ÁéØÂ¢ÉÂèòÈáè Ôºà3ÔºâÊñ∞Âª∫JavaÈ°πÁõÆ ‰∏â„ÄÅÁΩëÁõò1„ÄÅ‰ª£Á†ÅÁºñÂÜô Êñ∞Âª∫JavaÈ°πÁõÆÔºåÂØºÂÖ•ÊâÄÈúÄË¶ÅÁöÑjarÂåÖ 1234567hadoop‰∏≠ÁöÑshare\hadoop\hdfshadoop‰∏≠ÁöÑshare\hadoop\hdfs\libhadoop‰∏≠ÁöÑshare\hadoop\commonhadoop‰∏≠ÁöÑshare\hadoop\common\lib‰∏ãÁöÑjarÂåÖ„ÄÇ blockÂ∫ïÂ±Ç‚ÄîoffsetÂÅèÁßªÈáèÊù•ËØªÂèñÂ≠óËäÇÊï∞ÁªÑ 123456789101112131415161718private static void blk() throws Exception &#123; Path ifile = new Path(""); FileStatus file = fs.getFileStatus(ifile );// Ëé∑ÂèñblockÁöÑlocation‰ø°ÊÅØHDFSÂàÜÂ∏ÉÂºèÊñá‰ª∂Â≠òÂÇ®Á≥ªÁªüÊ†πÊçÆÂÖ∂ÂÅèÁßªÈáèÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÊù•ËØªÂèñÂÖ∂ÂÜÖÂÆπ BlockLocation[] blk = fs.getFileBlockLocations(file,0, file.getLen()); for (BlockLocation bb : blk) &#123; System.out.println(bb); &#125; FSDataInputStream input = fs.open(ifile); System.out.println((char)input.readByte()); System.out.println((char)input.readByte()); // ÊåáÂÆö‰ªéÂì™‰∏™offsetÁöÑ‰ΩçÁΩÆÂÅèÁßªÈáèÊù•ËØª input.seek(1048576); System.out.println((char)input.readByte()); input.seek(1048576); System.out.println((char)input.readByte()); &#125; private static void blk() throws Exception { Path ifile = new Path(‚Äú‚Äù); FileStatus file = fs.getFileStatus(ifile ); // Ëé∑ÂèñblockÁöÑlocation‰ø°ÊÅØ HDFSÂàÜÂ∏ÉÂºèÊñá‰ª∂Â≠òÂÇ®Á≥ªÁªüÊ†πÊçÆÂÖ∂ÂÅèÁßªÈáèÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÊù•ËØªÂèñÂÖ∂ÂÜÖÂÆπ BlockLocation[] blk = fs.getFileBlockLocations(file , 0, file.getLen()); for (BlockLocation bb : blk) { System.out.println(bb); } FSDataInputStream input = fs.open(ifile); System.out.println((char)input.readByte()); System.out.println((char)input.readByte()); // ÊåáÂÆö‰ªéÂì™‰∏™offsetÁöÑ‰ΩçÁΩÆÂÅèÁßªÈáèÊù•ËØª input.seek(1048576); System.out.println((char)input.readByte()); input.seek(1048576); System.out.println((char)input.readByte()); }]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>HDFS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[YARNÁöÑÂÖ•Èó®Â≠¶‰π†]]></title>
    <url>%2F2019%2F01%2F03%2FYarn%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[[TOC] ‰∏Ä„ÄÅÁÆÄ‰ªãyarnÔºàËµÑÊ∫êÁÆ°ÁêÜÂô®ÔºâÔºà1ÔºâÂ≠òÂú®ËÉåÊôØÔºöMR1.0Â≠òÂú®Áº∫Èô∑Ôºö ÂçïÁÇπÊïÖÈöúÔºö ‰ªÖÊúâ‰∏Ä‰∏™JobTrackerË¥üË¥£Êï¥‰∏™‰Ωú‰∏öÁöÑË∞ÉÂ∫¶„ÄÅÁÆ°ÁêÜ„ÄÅÁõëÊéß„ÄÅËµÑÊ∫êË∞ÉÂ∫¶ Ôºà‰∏Ä‰∏™‰Ωú‰∏öÊãøÂà∞Âêé‰ºöÂàÜËß£Â§ö‰∏™‰ªªÂä°ÂéªÊâßË°åmapduceÔºåJobTrackerÊää‰ªªÂä°ÂàÜÈÖçÁªôTaskTrackerÊù•ÂÖ∑‰ΩìË¥üË¥£ÊâßË°åÁõ∏ÂÖ≥mapÊàñreduce‰ªªÂä°Ôºâ JobTracker‚ÄòÂ§ßÂåÖÂ§ßÊèΩ‚ÄôÔºåÁÆ°ÁêÜ‰∫ãÈ°πËøáÂ§ö Ôºà‰∏äÈôê4000‰∏™ËäÇÁÇπÔºâ ÂÆπÊòìÂá∫Áé∞ÂÜÖÂ≠òÊ∫¢Âá∫ ËµÑÊ∫êÂàíÂàÜ‰∏çÂêàÁêÜ ÔºàÂº∫Ë°åÂàíÂàÜslotÔºåmapËµÑÊ∫êÂíåreduceËµÑÊ∫ê‰∏çËÉΩ‰∫íÁî®ÔºåÂØºËá¥ÂøôÁöÑÂøôÊ≠ªÔºåÈó≤ÁöÑÈó≤Ê≠ªÔºâ 1Êó¢ÊòØ‰∏Ä‰∏™ËÆ°ÁÆóÊ°ÜÊû∂Ôºå‰πüÊòØ‰∏Ä‰∏™ËµÑÊ∫êÁÆ°ÁêÜÊ°ÜÊû∂ Ôºà2Ôºâyarn‰∫ßÁîü ÂØπJobTrackerËøõË°åÂäüËÉΩÂàÜËß£ÔºåÂ∞ÜËµÑÊ∫êÁÆ°ÁêÜÂäüËÉΩÂàÜÁªôResourceManagerÔºåÂ∞Ü‰ªªÂä°Ë∞ÉÂ∫¶Âíå‰ªªÂä°ÁõëÊéßÂàÜÁªôApplicationMasterÔºåÂ∞ÜTaskTrackerÁöÑ‰ªªÂä°‰∫§ÁªôNodeManager 12Á∫ØÁ≤πÁöÑËµÑÊ∫êÁÆ°ÁêÜÊ°ÜÊû∂Ë¢´Ââ•Á¶ªËµÑÊ∫êÁÆ°ÁêÜË∞ÉÂ∫¶ÂäüËÉΩÁöÑMapReduceÂ∞±ÂèòÊàê‰∫ÜMR2.0Ôºå‰ªñÂ∞±ÊòØ‰∏Ä‰∏™ËøêË°åÂú®YARN‰∏äÁöÑ‰∏Ä‰∏™Á∫ØÁ≤πÁöÑËÆ°ÁÆóÊ°ÜÊû∂ÔºåÁî±YARN‰∏∫ÂÖ∂Êèê‰æõËµÑÊ∫êÁÆ°ÁêÜË∞ÉÂ∫¶ÊúçÂä° ‰ªÄ‰πàÂè´Á∫ØÁ≤πÁöÑËÆ°ÁÆóÊ°ÜÊû∂ÔºüÔºü ÂÆÉÊèê‰æõ‰∏Ä‰∫õËÆ°ÁÆóÂü∫Á±ªÔºå‰ΩøÁî®Êó∂ÔºåÁºñÂÜômapÁ±ªÂíåreduceÁ±ªÁöÑÂ≠êÁ±ªÔºåÂéªÁªßÊâøÂÆÉ„ÄÇÁÑ∂ÂêéËÆ°ÁÆóÊ°ÜÊû∂ÂéªÂÅöÂêéÂè∞Ëá™Âä®ÂàÜÁâáÔºåshuffleËøáÁ®ã„ÄÇ ËµÑÊ∫êÁÆ°ÁêÜÊ°ÜÊû∂ÔºüÔºü ÂÆÉ‰∏ìÈó®ÁÆ°ÁêÜCPUÂÜÖÂ≠òËµÑÊ∫êÁöÑÂàÜÈÖç ‰∫å„ÄÅYARNËÆæËÆ°ÊÄùË∑Ø ‰∏â„ÄÅYARN‰ΩìÁ≥ªÁªìÊûÑ‰∏âÂ§ßÊ†∏ÂøÉÔºö 1„ÄÅRecourceManagerÔºàRMÔºâ ResourceManagerÔºàRMÔºâÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑËµÑÊ∫êÁÆ°ÁêÜÂô®ÔºåË¥üË¥£Êï¥‰∏™Á≥ªÁªüÁöÑËµÑÊ∫êÁÆ°ÁêÜÂíåÂàÜÈÖçÔºå‰∏ªË¶ÅÂåÖÊã¨‰∏§‰∏™ÁªÑ‰ª∂ÔºåÂç≥Ë∞ÉÂ∫¶Âô®ÔºàSchedulerÔºâÂíåÂ∫îÁî®Á®ãÂ∫èÁÆ°ÁêÜÂô®ÔºàApplications ManagerÔºâ Ë∞ÉÂ∫¶Âô®Êé•Êî∂Êù•Ëá™ApplicationMasterÁöÑÂ∫îÁî®Á®ãÂ∫èËµÑÊ∫êËØ∑Ê±ÇÔºåÊääÈõÜÁæ§‰∏≠ÁöÑËµÑÊ∫ê‰ª•‚ÄúÂÆπÂô®‚ÄùÁöÑÂΩ¢ÂºèÂàÜÈÖçÁªôÊèêÂá∫Áî≥ËØ∑ÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÂÆπÂô®ÁöÑÈÄâÊã©ÈÄöÂ∏∏‰ºöËÄÉËôëÂ∫îÁî®Á®ãÂ∫èÊâÄË¶ÅÂ§ÑÁêÜÁöÑÊï∞ÊçÆÁöÑ‰ΩçÁΩÆÔºåËøõË°åÂ∞±ËøëÈÄâÊã©Ôºå‰ªéËÄåÂÆûÁé∞‚ÄúËÆ°ÁÆóÂêëÊï∞ÊçÆÈù†Êã¢‚Äù ÂÆπÂô®ÔºàContainerÔºâ‰Ωú‰∏∫Âä®ÊÄÅËµÑÊ∫êÂàÜÈÖçÂçï‰ΩçÔºåÊØè‰∏™ÂÆπÂô®‰∏≠ÈÉΩÂ∞ÅË£Ö‰∫Ü‰∏ÄÂÆöÊï∞ÈáèÁöÑCPU„ÄÅÂÜÖÂ≠ò„ÄÅÁ£ÅÁõòÁ≠âËµÑÊ∫êÔºå‰ªéËÄåÈôêÂÆöÊØè‰∏™Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•‰ΩøÁî®ÁöÑËµÑÊ∫êÈáè Ë∞ÉÂ∫¶Âô®Ë¢´ËÆæËÆ°ÊàêÊòØ‰∏Ä‰∏™ÂèØÊèíÊãîÁöÑÁªÑ‰ª∂ÔºåYARN‰∏ç‰ªÖËá™Ë∫´Êèê‰æõ‰∫ÜËÆ∏Â§öÁßçÁõ¥Êé•ÂèØÁî®ÁöÑË∞ÉÂ∫¶Âô®Ôºå‰πüÂÖÅËÆ∏Áî®Êà∑Ê†πÊçÆËá™Â∑±ÁöÑÈúÄÊ±ÇÈáçÊñ∞ËÆæËÆ°Ë∞ÉÂ∫¶Âô® Â∫îÁî®Á®ãÂ∫èÁÆ°ÁêÜÂô®ÔºàApplications ManagerÔºâË¥üË¥£Á≥ªÁªü‰∏≠ÊâÄÊúâÂ∫îÁî®Á®ãÂ∫èÁöÑÁÆ°ÁêÜÂ∑•‰ΩúÔºå‰∏ªË¶ÅÂåÖÊã¨Â∫îÁî®Á®ãÂ∫èÊèê‰∫§„ÄÅ‰∏éË∞ÉÂ∫¶Âô®ÂçèÂïÜËµÑÊ∫ê‰ª•ÂêØÂä®ApplicationMaster„ÄÅÁõëÊéßApplicationMasterËøêË°åÁä∂ÊÄÅÂπ∂Âú®Â§±Ë¥•Êó∂ÈáçÊñ∞ÂêØÂä®Á≠â 2„ÄÅApplicationMaster ResourceManagerÊé•Êî∂Áî®Êà∑Êèê‰∫§ÁöÑ‰Ωú‰∏öÔºåÊåâÁÖß‰Ωú‰∏öÁöÑ‰∏ä‰∏ãÊñá‰ø°ÊÅØ‰ª•Âèä‰ªéNodeManagerÊî∂ÈõÜÊù•ÁöÑÂÆπÂô®Áä∂ÊÄÅ‰ø°ÊÅØÔºåÂêØÂä®Ë∞ÉÂ∫¶ËøáÁ®ãÔºå‰∏∫Áî®Êà∑‰Ωú‰∏öÂêØÂä®‰∏Ä‰∏™ApplicationMasterApplicationMasterÁöÑ‰∏ªË¶ÅÂäüËÉΩÊòØÔºöÔºà1ÔºâÂΩìÁî®Êà∑‰Ωú‰∏öÊèê‰∫§Êó∂ÔºåApplicationMaster‰∏éResourceManagerÂçèÂïÜËé∑ÂèñËµÑÊ∫êÔºåResourceManager‰ºö‰ª•ÂÆπÂô®ÁöÑÂΩ¢Âºè‰∏∫ApplicationMasterÂàÜÈÖçËµÑÊ∫êÔºõ Ôºà2ÔºâÊääËé∑ÂæóÁöÑËµÑÊ∫êËøõ‰∏ÄÊ≠•ÂàÜÈÖçÁªôÂÜÖÈÉ®ÁöÑÂêÑ‰∏™‰ªªÂä°ÔºàMap‰ªªÂä°ÊàñReduce‰ªªÂä°ÔºâÔºåÂÆûÁé∞ËµÑÊ∫êÁöÑ‚Äú‰∫åÊ¨°ÂàÜÈÖç‚ÄùÔºõ Ôºà3Ôºâ‰∏éNodeManager‰øùÊåÅ‰∫§‰∫íÈÄö‰ø°ËøõË°åÂ∫îÁî®Á®ãÂ∫èÁöÑÂêØÂä®„ÄÅËøêË°å„ÄÅÁõëÊéßÂíåÂÅúÊ≠¢ÔºåÁõëÊéßÁî≥ËØ∑Âà∞ÁöÑËµÑÊ∫êÁöÑ‰ΩøÁî®ÊÉÖÂÜµÔºåÂØπÊâÄÊúâ‰ªªÂä°ÁöÑÊâßË°åËøõÂ∫¶ÂíåÁä∂ÊÄÅËøõË°åÁõëÊéßÔºåÂπ∂Âú®‰ªªÂä°ÂèëÁîüÂ§±Ë¥•Êó∂ÊâßË°åÂ§±Ë¥•ÊÅ¢Â§çÔºàÂç≥ÈáçÊñ∞Áî≥ËØ∑ËµÑÊ∫êÈáçÂêØ‰ªªÂä°ÔºâÔºõ Ôºà4ÔºâÂÆöÊó∂ÂêëResourceManagerÂèëÈÄÅ‚ÄúÂøÉË∑≥‚ÄùÊ∂àÊÅØÔºåÊä•ÂëäËµÑÊ∫êÁöÑ‰ΩøÁî®ÊÉÖÂÜµÂíåÂ∫îÁî®ÁöÑËøõÂ∫¶‰ø°ÊÅØÔºõ Ôºà5ÔºâÂΩì‰Ωú‰∏öÂÆåÊàêÊó∂ÔºåApplicationMasterÂêëResourceManagerÊ≥®ÈîÄÂÆπÂô®ÔºåÊâßË°åÂë®ÊúüÂÆåÊàê„ÄÇ 3„ÄÅNodeManager NodeManagerÊòØÈ©ªÁïôÂú®‰∏Ä‰∏™YARNÈõÜÁæ§‰∏≠ÁöÑÊØè‰∏™ËäÇÁÇπ‰∏äÁöÑ‰ª£ÁêÜÔºåÊúâÊâÄÈúÄÊï∞ÊçÆÁöÑËäÇÁÇπÔºå‰∏ªË¶ÅË¥üË¥£Ôºö ÂÆπÂô®ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ ÁõëÊéßÊØè‰∏™ÂÆπÂô®ÁöÑËµÑÊ∫êÔºàCPU„ÄÅÂÜÖÂ≠òÁ≠âÔºâ‰ΩøÁî®ÊÉÖÂÜµ Ë∑üË∏™ËäÇÁÇπÂÅ•Â∫∑Áä∂ÂÜµ ‰ª•‚ÄúÂøÉË∑≥‚ÄùÁöÑÊñπÂºè‰∏éResourceManager‰øùÊåÅÈÄö‰ø° ÂêëResourceManagerÊ±áÊä•‰Ωú‰∏öÁöÑËµÑÊ∫ê‰ΩøÁî®ÊÉÖÂÜµÂíåÊØè‰∏™ÂÆπÂô®ÁöÑËøêË°åÁä∂ÊÄÅ Êé•Êî∂Êù•Ëá™ApplicationMasterÁöÑÂêØÂä®/ÂÅúÊ≠¢ÂÆπÂô®ÁöÑÂêÑÁßçËØ∑Ê±Ç ÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåNodeManager‰∏ªË¶ÅË¥üË¥£ÁÆ°ÁêÜÊäΩË±°ÁöÑÂÆπÂô®ÔºåÂè™Â§ÑÁêÜ‰∏éÂÆπÂô®Áõ∏ÂÖ≥ÁöÑ‰∫ãÊÉÖÔºåËÄå‰∏çÂÖ∑‰ΩìË¥üË¥£ÊØè‰∏™‰ªªÂä°ÔºàMap‰ªªÂä°ÊàñReduce‰ªªÂä°ÔºâËá™Ë∫´Áä∂ÊÄÅÁöÑÁÆ°ÁêÜÔºåÂõ†‰∏∫Ëøô‰∫õÁÆ°ÁêÜÂ∑•‰ΩúÊòØÁî±ApplicationMasterÂÆåÊàêÁöÑÔºåApplicationMaster‰ºöÈÄöËøá‰∏çÊñ≠‰∏éNodeManagerÈÄö‰ø°Êù•ÊéåÊè°ÂêÑ‰∏™‰ªªÂä°ÁöÑÊâßË°åÁä∂ÊÄÅ Âõõ„ÄÅYARN Â∑•‰ΩúÊµÅÁ®ã ‰∫î„ÄÅYARNÊ°ÜÊû∂‰∏éMapReduce1.0Ê°ÜÊû∂ÁöÑÂØπÊØîÂàÜÊûê ‰ªéMapReduce1.0Ê°ÜÊû∂ÂèëÂ±ïÂà∞YARNÊ°ÜÊû∂ÔºåÂÆ¢Êà∑Á´ØÂπ∂Ê≤°ÊúâÂèëÁîüÂèòÂåñÔºåÂÖ∂Â§ßÈÉ®ÂàÜË∞ÉÁî®APIÂèäÊé•Âè£ÈÉΩ‰øùÊåÅÂÖºÂÆπÔºåÂõ†Ê≠§ÔºåÂéüÊù•ÈíàÂØπHadoop1.0ÂºÄÂèëÁöÑ‰ª£Á†Å‰∏çÁî®ÂÅöÂ§ßÁöÑÊîπÂä®ÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊîæÂà∞Hadoop2.0Âπ≥Âè∞‰∏äËøêË°å ÊÄª‰ΩìËÄåË®ÄÔºåYARNÁõ∏ÂØπ‰∫éMapReduce1.0Êù•ËØ¥ÂÖ∑Êúâ‰ª•‰∏ã‰ºòÂäøÔºö Â§ßÂ§ßÂáèÂ∞ë‰∫ÜÊâøÊãÖ‰∏≠ÂøÉÊúçÂä°ÂäüËÉΩÁöÑResourceManagerÁöÑËµÑÊ∫êÊ∂àËÄó ApplicationMasterÊù•ÂÆåÊàêÈúÄË¶ÅÂ§ßÈáèËµÑÊ∫êÊ∂àËÄóÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶ÂíåÁõëÊéß Â§ö‰∏™‰Ωú‰∏öÂØπÂ∫îÂ§ö‰∏™ApplicationMasterÔºåÂÆûÁé∞‰∫ÜÁõëÊéßÂàÜÂ∏ÉÂåñ MapReduce1.0Êó¢ÊòØ‰∏Ä‰∏™ËÆ°ÁÆóÊ°ÜÊû∂ÔºåÂèàÊòØ‰∏Ä‰∏™ËµÑÊ∫êÁÆ°ÁêÜË∞ÉÂ∫¶Ê°ÜÊû∂Ôºå‰ΩÜÊòØÔºåÂè™ËÉΩÊîØÊåÅMapReduceÁºñÁ®ãÊ®°Âûã„ÄÇËÄåYARNÂàôÊòØ‰∏Ä‰∏™Á∫ØÁ≤πÁöÑËµÑÊ∫êË∞ÉÂ∫¶ÁÆ°ÁêÜÊ°ÜÊû∂ÔºåÂú®ÂÆÉ‰∏äÈù¢ÂèØ‰ª•ËøêË°åÂåÖÊã¨MapReduceÂú®ÂÜÖÁöÑ‰∏çÂêåÁ±ªÂûãÁöÑËÆ°ÁÆóÊ°ÜÊû∂ÔºåÂè™Ë¶ÅÁºñÁ®ãÂÆûÁé∞Áõ∏Â∫îÁöÑApplicationMaster YARN‰∏≠ÁöÑËµÑÊ∫êÁÆ°ÁêÜÊØîMapReduce1.0Êõ¥Âä†È´òÊïà ‰ª•ÂÆπÂô®‰∏∫Âçï‰ΩçÔºåËÄå‰∏çÊòØ‰ª•slot‰∏∫Âçï‰Ωç ÂÖ≠„ÄÅYARN ÁöÑÂèëÂ±ïÁõÆÊ†áYARN ÁöÑÁõÆÊ†áÂ∞±ÊòØÂÆûÁé∞‚Äú‰∏Ä‰∏™ÈõÜÁæ§Â§ö‰∏™Ê°ÜÊû∂‚ÄùÔºü Ôºå‰∏∫‰ªÄ‰πàÔºü ‰∏Ä‰∏™‰ºÅ‰∏öÂΩì‰∏≠ÂêåÊó∂Â≠òÂú®ÂêÑÁßç‰∏çÂêåÁöÑ‰∏öÂä°Â∫îÁî®Âú∫ÊôØÔºåÈúÄË¶ÅÈááÁî®‰∏çÂêåÁöÑËÆ°ÁÆóÊ°ÜÊû∂ MapReduceÂÆûÁé∞Á¶ªÁ∫øÊâπÂ§ÑÁêÜ ‰ΩøÁî®ImpalaÂÆûÁé∞ÂÆûÊó∂‰∫§‰∫íÂºèÊü•ËØ¢ÂàÜÊûê ‰ΩøÁî®StormÂÆûÁé∞ÊµÅÂºèÊï∞ÊçÆÂÆûÊó∂ÂàÜÊûê ‰ΩøÁî®SparkÂÆûÁé∞Ëø≠‰ª£ËÆ°ÁÆó Ëøô‰∫õ‰∫ßÂìÅÈÄöÂ∏∏Êù•Ëá™‰∏çÂêåÁöÑÂºÄÂèëÂõ¢ÈòüÔºåÂÖ∑ÊúâÂêÑËá™ÁöÑËµÑÊ∫êË∞ÉÂ∫¶ÁÆ°ÁêÜÊú∫Âà∂ ‰∏∫‰∫ÜÈÅøÂÖç‰∏çÂêåÁ±ªÂûãÂ∫îÁî®‰πãÈó¥‰∫íÁõ∏Âπ≤Êâ∞Ôºå‰ºÅ‰∏öÂ∞±ÈúÄË¶ÅÊääÂÜÖÈÉ®ÁöÑÊúçÂä°Âô®ÊãÜÂàÜÊàêÂ§ö‰∏™ÈõÜÁæ§ÔºåÂàÜÂà´ÂÆâË£ÖËøêË°å‰∏çÂêåÁöÑËÆ°ÁÆóÊ°ÜÊû∂ÔºåÂç≥‚Äú‰∏Ä‰∏™Ê°ÜÊû∂‰∏Ä‰∏™ÈõÜÁæ§‚Äù ÂØºËá¥ÈóÆÈ¢ò ÈõÜÁæ§ËµÑÊ∫êÂà©Áî®Áéá‰Ωé Êï∞ÊçÆÊó†Ê≥ïÂÖ±‰∫´ Áª¥Êä§‰ª£‰ª∑È´ò YARNÁöÑÁõÆÊ†áÂ∞±ÊòØÂÆûÁé∞‚Äú‰∏Ä‰∏™ÈõÜÁæ§Â§ö‰∏™Ê°ÜÊû∂‚ÄùÔºåÂç≥Âú®‰∏Ä‰∏™ÈõÜÁæ§‰∏äÈÉ®ÁΩ≤‰∏Ä‰∏™Áªü‰∏ÄÁöÑËµÑÊ∫êË∞ÉÂ∫¶ÁÆ°ÁêÜÊ°ÜÊû∂YARNÔºåÂú®YARN‰πã‰∏äÂèØ‰ª•ÈÉ®ÁΩ≤ÂÖ∂‰ªñÂêÑÁßçËÆ°ÁÆóÊ°ÜÊû∂ Áî±YARN‰∏∫Ëøô‰∫õËÆ°ÁÆóÊ°ÜÊû∂Êèê‰æõÁªü‰∏ÄÁöÑËµÑÊ∫êË∞ÉÂ∫¶ÁÆ°ÁêÜÊúçÂä°ÔºåÂπ∂‰∏îËÉΩÂ§üÊ†πÊçÆÂêÑÁßçËÆ°ÁÆóÊ°ÜÊû∂ÁöÑË¥üËΩΩÈúÄÊ±ÇÔºåË∞ÉÊï¥ÂêÑËá™Âç†Áî®ÁöÑËµÑÊ∫êÔºåÂÆûÁé∞ÈõÜÁæ§ËµÑÊ∫êÂÖ±‰∫´ÂíåËµÑÊ∫êÂºπÊÄßÊî∂Áº© ÂèØ‰ª•ÂÆûÁé∞‰∏Ä‰∏™ÈõÜÁæ§‰∏äÁöÑ‰∏çÂêåÂ∫îÁî®Ë¥üËΩΩÊ∑∑Êê≠ÔºåÊúâÊïàÊèêÈ´ò‰∫ÜÈõÜÁæ§ÁöÑÂà©Áî®Áéá ‰∏çÂêåËÆ°ÁÆóÊ°ÜÊû∂ÂèØ‰ª•ÂÖ±‰∫´Â∫ïÂ±ÇÂ≠òÂÇ®ÔºåÈÅøÂÖç‰∫ÜÊï∞ÊçÆÈõÜË∑®ÈõÜÁæ§ÁßªÂä®]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>yarn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ZookeeperÂ≠¶‰π†]]></title>
    <url>%2F2019%2F01%2F03%2FZookeeper%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[[TOC] Âä®Áâ©Âõ≠ÁÆ°ÁêÜÂëò Êé®ËçêÂõæ‰π¶Ôºö„Ää‰ªéPaxoÂà∞Zookeeper„Äã Zookeeper1„ÄÅÁÆÄ‰ªã ÂºÄÊ∫êÁöÑ„ÄÅÂàÜÂ∏ÉÂºèÂ∫îÁî®Á®ãÂ∫èÔºåÊèê‰æõ‰∏ÄËá¥ÊÄßÊúçÂä°ÔºåÊòØHaoop ÔºàÂÆûÁé∞HAÔºâÂíåHbaseÔºàÂíåzookeeperÊòØÂº∫‰æùËµñÂÖ≥Á≥ªÔºâÁöÑÈáçË¶ÅÁªÑ‰ª∂ Êèê‰æõÁöÑÂäüËÉΩÔºö ÈÖçÁΩÆÁª¥Êä§ ÂüüÂêçÁª¥Êä§ ÂàÜÂ∏ÉÂºèÁöÑÂêåÊ≠• ÁªÑÊúçÂä° Zookeeper‚ÜíÊèê‰æõÈÄöÁî®ÂàÜÂ∏ÉÂºèÈîÅÊúçÂä°ÔºåÁî®‰ª•ÂçèË∞ÉÂàÜÂ∏ÉÂºèÂ∫îÁî® Keepalived‚ÜíÂÆûÁé∞ËäÇÁÇπÂÅ•Â∫∑Ê£ÄÊü•ÔºåÈááÁî®‰ºòÂÖàÁ∫ßÁõëÊéßÔºåÊ≤°ÊúâÂçèÂêåÂ∑•‰ΩúÔºåÂäüËÉΩÂçï‰∏ÄÔºåÂèØÊâ©Â±ïÊÄßÂ∑Æ„ÄÇ 2„ÄÅZookeepËÄåËßíËâ≤ Ôºà‰∏ÄËà¨ÂæàÂ∞ëÈÖçÁΩÆObserverÔºåÂõ†‰∏∫Áî®ÁöÑÂ∞ëÔºåËÄå‰∏îÈÖçÁΩÆÁöÑËäÇÁÇπ‰∏ÄËà¨‰∏∫Â•áÊï∞Ôºâ ZookeeperÈúÄ‰øùËØÅÈ´òÂèØÁî®ÂíåÂº∫‰∏ÄËá¥ÊÄßÔºõ ‚Äã ‰∏∫‰∫ÜÊîØÊåÅÊõ¥Â§öÁöÑÂÆ¢Êà∑Á´ØÔºåÈúÄË¶ÅÂ¢ûÂä†Êõ¥Â§öServerÔºõ ‚Äã ServerÂ¢ûÂ§öÔºåÊäïÁ•®Èò∂ÊÆµÂª∂ËøüÂ¢ûÂ§ßÔºåÂΩ±ÂìçÊÄßËÉΩÔºõ ‚Äã ÊùÉË°°‰º∏Áº©ÊÄßÂíåÈ´òÂêûÂêêÁéáÔºåÂºïÂÖ•Observer ‚Äã Observer‰∏çÂèÇ‰∏éÊäïÁ•®Ôºõ ‚Äã ObserversÊé•ÂèóÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ÔºåÂπ∂Â∞ÜÂÜôËØ∑Ê±ÇËΩ¨ÂèëÁªôleaderËäÇÁÇπÔºõ ‚Äã Âä†ÂÖ•Êõ¥Â§öObserverËäÇÁÇπÔºåÊèêÈ´ò‰º∏Áº©ÊÄßÔºåÂêåÊó∂‰∏çÂΩ±ÂìçÂêûÂêêÁéá„ÄÇ 3„ÄÅZookeeperÁâπÁÇπ ÁâπÁÇπ ËØ¥Êòé ÊúÄÁªà‰∏ÄËá¥ÊÄß ‰∏∫ÂÆ¢Êà∑Á´ØÂ±ïÁ§∫Âêå‰∏Ä‰∏™ËßÜÂõæÔºåËøôÊòØzookeeperÈáåÈù¢‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÂäüËÉΩÔºà‰∏éÂº∫‰∏ÄËá¥ÊÄßÁõ∏ÂØπÔºâ ÂèØÈù†ÊÄß Â¶ÇÊûúÊ∂àÊÅØË¢´Âà∞‰∏ÄÂè∞ÊúçÂä°Âô®Êé•ÂèóÔºåÈÇ£‰πàÂÆÉÂ∞ÜË¢´ÊâÄÊúâÁöÑÊúçÂä°Âô®Êé•Âèó. ÂÆûÊó∂ÊÄß Zookeeper‰∏çËÉΩ‰øùËØÅ‰∏§‰∏™ÂÆ¢Êà∑Á´ØËÉΩÂêåÊó∂ÂæóÂà∞ÂàöÊõ¥Êñ∞ÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúÈúÄË¶ÅÊúÄÊñ∞Êï∞ÊçÆÔºåÂ∫îËØ•Âú®ËØªÊï∞ÊçÆ‰πãÂâçË∞ÉÁî®sync()Êé•Âè£„ÄÇ Áã¨Á´ãÊÄß ÂêÑ‰∏™Client‰πãÈó¥‰∫í‰∏çÂπ≤È¢Ñ ÂéüÂ≠êÊÄß Êõ¥Êñ∞Âè™ËÉΩÊàêÂäüÊàñËÄÖÂ§±Ë¥•ÔºåÊ≤°Êúâ‰∏≠Èó¥Áä∂ÊÄÅ„ÄÇ È°∫Â∫èÊÄß ÊâÄÊúâServerÔºåÂêå‰∏ÄÊ∂àÊÅØÂèëÂ∏ÉÈ°∫Â∫è‰∏ÄËá¥„ÄÇ 4„ÄÅÂÆâË£ÖÈÉ®ÁΩ≤ÔºöÂÆòÁΩëÔºö ‰∏ãËΩΩÔºö Ôºà1Ôºâ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂Ôºö Âú®ZokeeperÁöÑÂÆâË£ÖÁõÆÂΩï‰∏≠ÁöÑconfÁõÆÂΩï‰∏ãÔºåÂ∞Üzoo_sample.cfgÊñá‰ª∂ÊîπÂêç‰∏∫zoo.cfg mv zoo_sample.cfg zoo.cfg ÁºñËæëÔºö vim /usr/soft/zookeeper-3.4.13/conf/zoo.cfg 12345678910111213#ÂèëÈÄÅÂøÉË∑≥ÁöÑÈó¥ÈöîÊó∂Èó¥ÔºåÂçï‰ΩçÔºöÊØ´ÁßítickTime=2000 dataDir=/usr/soft/zookeeper-3.4.13/datadataLogDir=/usr/soft/zookeeper-3.4.13/logsdataLogDir=/Users/zdandljb/zookeeper/dataLog#ÂÆ¢Êà∑Á´ØËøûÊé• Zookeeper ÊúçÂä°Âô®ÁöÑÁ´ØÂè£ÔºåclientPort=2181 #Zookeeper ‰ºöÁõëÂê¨Ëøô‰∏™Á´ØÂè£ÔºåÊé•ÂèóÂÆ¢Êà∑Á´ØÁöÑËÆøÈóÆËØ∑Ê±Ç„ÄÇinitLimit=5syncLimit=2server.1=node01:2888:3888server.2=node02:2888:3888server.3=node03:2888:3888 ÈÖçÁΩÆËß£Èáä: initLimitÔºö Ëøô‰∏™ÈÖçÁΩÆÈ°πÊòØÁî®Êù•ÈÖçÁΩÆ Zookeeper Êé•ÂèóÂÆ¢Êà∑Á´ØÔºàËøôÈáåÊâÄËØ¥ÁöÑÂÆ¢Êà∑Á´ØÊòØ Zookeeper ÊúçÂä°Âô®ÈõÜÁæ§‰∏≠ËøûÊé•Âà∞ Leader ÁöÑ Follower ÊúçÂä°Âô®ÔºâÂàùÂßãÂåñËøûÊé•Êó∂ÊúÄÈïøËÉΩÂøçÂèóÂ§öÂ∞ë‰∏™ÂøÉË∑≥Êó∂Èó¥Èó¥ÈöîÊï∞„ÄÇÂΩìÂ∑≤ÁªèË∂ÖËøá 5 ‰∏™ÂøÉË∑≥ÁöÑÊó∂Èó¥Ôºà‰πüÂ∞±ÊòØ tickTimeÔºâÈïøÂ∫¶Âêé Zookeeper ÊúçÂä°Âô®ËøòÊ≤°ÊúâÊî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑËøîÂõû‰ø°ÊÅØÔºåÈÇ£‰πàË°®ÊòéËøô‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•Â§±Ë¥•„ÄÇÊÄªÁöÑÊó∂Èó¥ÈïøÂ∫¶Â∞±ÊòØ 5*2000=10 Áßí syncLimitÔºöËøô‰∏™ÈÖçÁΩÆÈ°πÊ†áËØÜ Leader ‰∏é Follower ‰πãÈó¥ÂèëÈÄÅÊ∂àÊÅØÔºåËØ∑Ê±ÇÂíåÂ∫îÁ≠îÊó∂Èó¥ÈïøÂ∫¶ÔºåÊúÄÈïø‰∏çËÉΩË∂ÖËøáÂ§öÂ∞ë‰∏™ tickTime ÁöÑÂøÉË∑≥Êó∂Èó¥ÈïøÂ∫¶ÔºåÊÄªÁöÑÊó∂Èó¥ÈïøÂ∫¶Â∞±ÊòØ 2*2000=4 Áßí server.A=BÔºöCÔºöDÔºöÂÖ∂ ‰∏≠ A ÊòØ‰∏Ä‰∏™Êï∞Â≠óÔºåË°®Á§∫Ëøô‰∏™ÊòØÁ¨¨Âá†Âè∑ÊúçÂä°Âô®ÔºõB ÊòØËøô‰∏™ÊúçÂä°Âô®ÁöÑ ip Âú∞ÂùÄÔºõC Ë°®Á§∫ÁöÑÊòØËøô‰∏™ÊúçÂä°Âô®‰∏éÈõÜÁæ§‰∏≠ÁöÑ Leader ÊúçÂä°Âô®‰∫§Êç¢‰ø°ÊÅØÁöÑÁ´ØÂè£ÔºõD Ë°®Á§∫ÁöÑÊòØ‰∏á‰∏ÄÈõÜÁæ§‰∏≠ÁöÑ Leader ÊúçÂä°Âô®ÊåÇ‰∫ÜÔºåÈúÄË¶Å‰∏Ä‰∏™Á´ØÂè£Êù•ÈáçÊñ∞ËøõË°åÈÄâ‰∏æÔºåÈÄâÂá∫‰∏Ä‰∏™Êñ∞ÁöÑ LeaderÔºåËÄåËøô‰∏™Á´ØÂè£Â∞±ÊòØÁî®Êù•ÊâßË°åÈÄâ‰∏æÊó∂ÊúçÂä°Âô®Áõ∏‰∫íÈÄö‰ø°ÁöÑÁ´ØÂè£„ÄÇÂ¶ÇÊûúÊòØ‰º™ÈõÜÁæ§ÁöÑÈÖçÁΩÆÊñπÂºèÔºåÁî±‰∫é B ÈÉΩÊòØ‰∏ÄÊ†∑ÔºåÊâÄ‰ª•‰∏çÂêåÁöÑ Zookeeper ÂÆû‰æãÈÄö‰ø°Á´ØÂè£Âè∑‰∏çËÉΩ‰∏ÄÊ†∑ÔºåÊâÄ‰ª•Ë¶ÅÁªôÂÆÉ‰ª¨ÂàÜÈÖç‰∏çÂêåÁöÑÁ´ØÂè£Âè∑ (2)ÂàõÂª∫myidÊñá‰ª∂ÔºàÂú®‰∏äÈù¢ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆdataDir ÁöÑÁõÆÂΩï‰∏ãÔºâ 123server1Êú∫Âô®ÁöÑÂÜÖÂÆπ‰∏∫Ôºö1Ôºåserver2Êú∫Âô®ÁöÑÂÜÖÂÆπ‰∏∫Ôºö2Ôºåserver3Êú∫Âô®ÁöÑÂÜÖÂÆπ‰∏∫Ôºö3 Ôºà3ÔºâÂ∞ÜzookeeperÂåÖÂèëÂà∞ÂêÑ‰∏™ËäÇÁÇπ‰∏ä PaxoÁÆóÊ≥ïÂÆòÁΩëÔºö 1„ÄÅÁÆÄ‰ªã‰∏Ä‰∏™Âü∫‰∫éÊ∂àÊÅØ‰º†ÈÄíÁöÑ‰∏ÄËá¥ÊÄßÁÆóÊ≥ïÔºåÂπøÊ≥õÂ∫îÁî®‰∫éÂàÜÂ∏ÉÂºèËÆ°ÁÆó‰∏≠ÔºåÊòØÂà∞ÁõÆÂâç‰∏∫Ê≠¢ÂîØ‰∏ÄÁöÑÂàÜÂ∏ÉÂºè‰∏ÄËá¥ÊÄßÁÆóÊ≥ï„ÄÇ ÂâçÊèêÔºö Paxos Êúâ‰∏Ä‰∏™ÂâçÊèêÔºöÊ≤°ÊúâÊãúÂç†Â∫≠Â∞ÜÂÜõÈóÆÈ¢ò„ÄÇÂ∞±ÊòØËØ¥ PaxosÂè™ÊúâÂú®‰∏Ä‰∏™ÂèØ‰ø°ÁöÑËÆ°ÁÆóÁéØÂ¢É‰∏≠ÊâçËÉΩÊàêÁ´ãÔºåËøô‰∏™ÁéØÂ¢ÉÊòØ‰∏ç‰ºöË¢´ÂÖ•‰æµÊâÄÁ†¥ÂùèÁöÑ„ÄÇ 2„ÄÅÁªìÂêàÊïÖ‰∫ãÁöÑÂØπÂ∫îÁêÜËß£ Â∞èÂ≤õ(Island)‚Äî‚ÄîZK Server ClusterËÆÆÂëò(Senator)‚Äî‚ÄîZK ServerÊèêËÆÆ(Proposal)‚Äî‚ÄîZNode Change(Create/Delete/SetData‚Ä¶)ÊèêËÆÆÁºñÂè∑(PID)‚Äî‚ÄîZxid(ZooKeeper Transaction Id)Ê≠£ÂºèÊ≥ï‰ª§‚Äî‚ÄîÊâÄÊúâ ZNode ÂèäÂÖ∂Êï∞ÊçÆ ÊÄªÁªü‚Äî‚ÄîZK Server Leader zookeeperÁöÑËäÇÁÇπÂèäÂ∑•‰ΩúÂéüÁêÜ1„ÄÅÂ∑•‰ΩúÂéüÁêÜ 1.ÊØè‰∏™ServerÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÂÇ®‰∫Ü‰∏Ä‰ªΩÊï∞ÊçÆÔºõ 2.ZookeeperÂêØÂä®Êó∂ÔºåÂ∞Ü‰ªéÂÆû‰æã‰∏≠ÈÄâ‰∏æ‰∏Ä‰∏™leaderÔºàPaxosÂçèËÆÆÔºâ 3.LeaderË¥üË¥£Â§ÑÁêÜÊï∞ÊçÆÊõ¥Êñ∞Á≠âÊìç‰Ωú 4.‰∏Ä‰∏™Êõ¥Êñ∞Êìç‰ΩúÊàêÂäüÔºåÂΩì‰∏î‰ªÖÂΩìÂ§ßÂ§öÊï∞ServerÂú®ÂÜÖÂ≠ò‰∏≠ÊàêÂäü‰øÆÊîπÊï∞ÊçÆ„ÄÇ ZookeeperÁöÑÊ†∏ÂøÉÊòØÂéüÂ≠êÂπøÊí≠ÔºåËøô‰∏™Êú∫Âà∂‰øùËØÅ‰∫ÜÂêÑ‰∏™server‰πãÈó¥ÁöÑÂêåÊ≠•„ÄÇÂÆûÁé∞Ëøô‰∏™Êú∫Âà∂ÁöÑÂçèËÆÆÂè´ÂÅöZabÂçèËÆÆ„ÄÇ ZabÂçèËÆÆÊúâ‰∏§ÁßçÊ®°ÂºèÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØÊÅ¢Â§çÊ®°ÂºèÂíåÂπøÊí≠Ê®°Âºè„ÄÇ ÂΩìÊúçÂä°ÂêØÂä®ÊàñËÄÖÂú®È¢ÜÂØºËÄÖÂ¥©Ê∫ÉÂêéÔºåZabÂ∞±ËøõÂÖ•‰∫ÜÊÅ¢Â§çÊ®°ÂºèÔºåÂΩìÈ¢ÜÂØºËÄÖË¢´ÈÄâ‰∏æÂá∫Êù•Ôºå‰∏îÂ§ßÂ§öÊï∞serverÁöÑÂÆåÊàê‰∫ÜÂíåleaderÁöÑÁä∂ÊÄÅÂêåÊ≠•‰ª•ÂêéÔºåÊÅ¢Â§çÊ®°ÂºèÂ∞±ÁªìÊùü‰∫Ü„ÄÇÁä∂ÊÄÅÂêåÊ≠•‰øùËØÅ‰∫ÜleaderÂíåserverÂÖ∑ÊúâÁõ∏ÂêåÁöÑÁ≥ªÁªüÁä∂ÊÄÅ„ÄÇ‰∏ÄÊó¶leaderÂ∑≤ÁªèÂíåÂ§öÊï∞ÁöÑfollowerËøõË°å‰∫ÜÁä∂ÊÄÅÂêåÊ≠•ÂêéÔºå‰ªñÂ∞±ÂèØ‰ª•ÂºÄÂßãÂπøÊí≠Ê∂àÊÅØ‰∫ÜÔºåÂç≥ËøõÂÖ•ÂπøÊí≠Áä∂ÊÄÅ„ÄÇËøôÊó∂ÂÄôÂΩì‰∏Ä‰∏™serverÂä†ÂÖ•zookeeperÊúçÂä°‰∏≠ÔºåÂÆÉ‰ºöÂú®ÊÅ¢Â§çÊ®°Âºè‰∏ãÂêØÂä®ÔºåÂèëÁé∞leaderÔºåÂπ∂ÂíåleaderËøõË°åÁä∂ÊÄÅÂêåÊ≠•„ÄÇÂæÖÂà∞ÂêåÊ≠•ÁªìÊùüÔºåÂÆÉ‰πüÂèÇ‰∏éÊ∂àÊÅØÂπøÊí≠„ÄÇZookeeperÊúçÂä°‰∏ÄÁõ¥Áª¥ÊåÅÂú®BroadcastÁä∂ÊÄÅÔºåÁõ¥Âà∞leaderÂ¥©Ê∫É‰∫ÜÊàñËÄÖleaderÂ§±Âéª‰∫ÜÂ§ßÈÉ®ÂàÜÁöÑfollowersÊîØÊåÅ. ÂπøÊí≠Ê®°ÂºèÈúÄË¶Å‰øùËØÅproposalË¢´ÊåâÈ°∫Â∫èÂ§ÑÁêÜÔºåÂõ†Ê≠§zkÈááÁî®‰∫ÜÈÄíÂ¢ûÁöÑ‰∫ãÂä°idÂè∑(zxid)Êù•‰øùËØÅ„ÄÇÊâÄÊúâÁöÑÊèêËÆÆ(proposal)ÈÉΩÂú®Ë¢´ÊèêÂá∫ÁöÑÊó∂ÂÄôÂä†‰∏ä‰∫Üzxid„ÄÇÂÆûÁé∞‰∏≠zxidÊòØ‰∏Ä‰∏™64‰ΩçÁöÑÊï∞Â≠óÔºåÂÆÉÈ´ò32‰ΩçÊòØepochÁî®Êù•Ê†áËØÜleaderÂÖ≥Á≥ªÊòØÂê¶ÊîπÂèòÔºåÊØèÊ¨°‰∏Ä‰∏™leaderË¢´ÈÄâÂá∫Êù•ÔºåÂÆÉÈÉΩ‰ºöÊúâ‰∏Ä‰∏™Êñ∞ÁöÑepoch„ÄÇ‰Ωé32‰ΩçÊòØ‰∏™ÈÄíÂ¢ûËÆ°Êï∞„ÄÇ ÂΩìleaderÂ¥©Ê∫ÉÊàñËÄÖleaderÂ§±ÂéªÂ§ßÂ§öÊï∞ÁöÑfollowerÔºåËøôÊó∂ÂÄôzkËøõÂÖ•ÊÅ¢Â§çÊ®°ÂºèÔºåÊÅ¢Â§çÊ®°ÂºèÈúÄË¶ÅÈáçÊñ∞ÈÄâ‰∏æÂá∫‰∏Ä‰∏™Êñ∞ÁöÑleaderÔºåËÆ©ÊâÄÊúâÁöÑserverÈÉΩÊÅ¢Â§çÂà∞‰∏Ä‰∏™Ê≠£Á°ÆÁöÑÁä∂ÊÄÅ„ÄÇ 2„ÄÅZnodeËäÇÁÇπÔºà1ÔºâZnodeÊúâ‰∏§ÁßçÁ±ªÂûãÔºåÁü≠ÊöÇÁöÑÔºàephemeralÔºâÂíåÊåÅ‰πÖÁöÑÔºàpersistentÔºâ ZnodeÁöÑÁ±ªÂûãÂú®ÂàõÂª∫Êó∂Á°ÆÂÆöÂπ∂‰∏î‰πãÂêé‰∏çËÉΩÂÜç‰øÆÊîπ„ÄÇ Áü≠ÊöÇznodeÁöÑÂÆ¢Êà∑Á´Ø‰ºöËØùÁªìÊùüÊó∂Ôºåzookeeper‰ºöÂ∞ÜËØ•Áü≠ÊöÇznodeÂà†Èô§ÔºåÁü≠ÊöÇznode‰∏çÂèØ‰ª•ÊúâÂ≠êËäÇÁÇπ ÊåÅ‰πÖznode‰∏ç‰æùËµñ‰∫éÂÆ¢Êà∑Á´Ø‰ºöËØùÔºåÂè™ÊúâÂΩìÂÆ¢Êà∑Á´ØÊòéÁ°ÆË¶ÅÂà†Èô§ËØ•ÊåÅ‰πÖznodeÊó∂Êâç‰ºöË¢´Âà†Èô§ Ôºà2ÔºâZnodeÊúâÂõõÁßçÂΩ¢ÂºèÁöÑÁõÆÂΩïËäÇÁÇπ PERSISTENT„ÄÅÊåÅ‰πÖÁöÑ EPHEMERAL„ÄÅÁü≠ÊöÇÁöÑ PERSISTENT_SEQUENTIAL„ÄÅÊåÅ‰πÖ‰∏îÊúâÂ∫èÁöÑ EPHEMERAL_SEQUENTIAL Áü≠ÊöÇ‰∏îÊúâÂ∫èÁöÑ 3„ÄÅshellÊìç‰ΩúÂêØÂä®ÊúçÂä°Á´ØÔºö./zkServer.sh start ÂÅúÊ≠¢ÊúçÂä°Ôºö./zkServer.sh stop ÂêØÂä®ÂÆ¢Êà∑Á´ØÔºö./zkCli.sh -server 127.0.0.1 : 2081 ‚Äã (localhost„ÄÅnode01) ‚Äã Ôºà‰πüÂèØËøûÊé•ÂÖ∂‰ªñËäÇÁÇπÔºâ ‚Äã (portÈªòËÆ§2081,ÂèØÁúÅÔºõip‰πüÂèØÁúÅ) ÈÄÄÂá∫ÂÆ¢Êà∑Á´ØÔºöquit Êìç‰ΩúÊåáÂçóÔºöhelp Êü•ÁúãÊ†πÁõÆÂΩïÔºöll / ‚Äã Ôºàll +Ë∑ØÂæÑÔºâ Ëé∑ÂèñÂÖ∑‰ΩìÊúçÂä°ÂÜÖÂÆπÔºöget / ‚Äã (get +Ë∑ØÂæÑ+ÊúçÂä°)ÂèØÊü•ÁúãÊ≥®ÂÜåzookeeperÊúçÂä°ÁöÑËäÇÁÇπ‰ø°ÊÅØ ÔºàÂ¶ÇÊûú‰Ωú‰∏∫leaderÁöÑnamenodeÊåÇ‰∫ÜÔºåÊúÄÊñ∞Êñá‰ª∂‰ºöÁõ∏Â∫îÁöÑÊõ¥Êç¢Êï∞ÊçÆ‰ø°ÊÅØÔºåÂ¶ÇÊûúÊ≤°ÊúânnÔºåÈÇ£‰πàÂ∞±Ê≤°ÊúâÁõ∏Â∫îÁöÑÊúÄÊñ∞Êñá‰ª∂ÔºåÂè™‰ºöÊúâËÆ∞ÂΩï‰∏ä‰∏Ä‰∏™Èò∂ÊÆµÊï∞ÊçÆÁöÑÊñá‰ª∂Ôºâ ÂàõÂª∫ÊúçÂä°Ôºöcreate /sun aabbcc ‚Äã (create +Ë∑ØÂæÑ + Êï∞ÊçÆÂÜÖÂÆπ) Âú®ÂÖ∂‰ªñËäÇÁÇπ‰πüÂèØÂêØÂä®ÂÆ¢Êà∑Á´ØÔºåÂàõÂª∫ÊúçÂä° Âà†Èô§ÊúçÂä°Ôºörmr /sun 4„ÄÅAPIÊìç‰Ωú ËßÅ‰ª£Á†Åtestzookeeper ÊÄªÁªì Zookeeper ‰Ωú‰∏∫ Hadoop È°πÁõÆ‰∏≠ÁöÑ‰∏Ä‰∏™Â≠êÈ°πÁõÆÔºåÊòØHadoop ÈõÜÁæ§ÁÆ°ÁêÜÁöÑ‰∏Ä‰∏™ÂøÖ‰∏çÂèØÂ∞ëÁöÑÊ®°ÂùóÔºåÂÆÉ‰∏ªË¶ÅÁî®Êù•ÊéßÂà∂ÈõÜÁæ§‰∏≠ÁöÑÊï∞ÊçÆÔºåÂ¶ÇÂÆÉÁÆ°ÁêÜ Hadoop ÈõÜÁæ§‰∏≠ÁöÑNameNodeÔºåËøòÊúâ Hbase ‰∏≠ Master„ÄÅ Server ‰πãÈó¥Áä∂ÊÄÅÂêåÊ≠•Á≠â„ÄÇ ‚Äã Zoopkeeper Êèê‰æõ‰∫Ü‰∏ÄÂ•óÂæàÂ•ΩÁöÑÂàÜÂ∏ÉÂºèÈõÜÁæ§ÁÆ°ÁêÜÁöÑÊú∫Âà∂ÔºåÂ∞±ÊòØÂÆÉËøôÁßçÂü∫‰∫éÂ±ÇÊ¨°ÂûãÁöÑÁõÆÂΩïÊ†ëÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂπ∂ÂØπÊ†ë‰∏≠ÁöÑËäÇÁÇπËøõË°åÊúâÊïàÁÆ°ÁêÜÔºå‰ªéËÄåÂèØ‰ª•ËÆæËÆ°Âá∫Â§öÁßçÂ§öÊ†∑ÁöÑÂàÜÂ∏ÉÂºèÁöÑÊï∞ÊçÆÁÆ°ÁêÜÊ®°Âûã„ÄÇ]]></content>
      <categories>
        <category>HDFS</category>
      </categories>
      <tags>
        <tag>Zookeeper</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NginxÂ≠¶‰π†(ÊÄª)]]></title>
    <url>%2F2019%2F01%2F02%2FNginx%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[[TOC] NginxÂ≠¶‰π†ÔºöÂ§ßÂûãÁΩëÁ´ôÈ´òÂπ∂ÂèëËøêË°åÂ§ÑÁêÜ‰∏Ä„ÄÅNginx‰ΩøÁî®ËÉåÊôØ1„ÄÅËÉåÊôØ 1ÔºâÈ´òÂπ∂ÂèëÔºàÊµ∑ÈáèÊï∞ÊçÆÔºåÂ§çÊùÇ‰∏öÂä°ÔºåÂ§ßÈáèÁ∫øÁ®ãÔºâÈõÜ‰∏≠ËÆøÈóÆÊúçÂä°Âô® 2)ÊúçÂä°Âô®ËµÑÊ∫êÂíåËÉΩÂäõÊúâÈôê ‰ΩøÂæóÊúçÂä°Âô®ÂÆïÊú∫ÔºåÊó†Ê≥ïÊèê‰æõÊúçÂä° 2„ÄÅÊ¶ÇÂøµÁêÜËß£ 1)È´òÂπ∂Âèë Êµ∑ÈáèÊï∞ÊçÆËÆøÈóÆÔºåÂ§ö‰∏™ËøõÁ®ãÂêåÊó∂Â§ÑÁêÜ‰∏çÂêåÊìç‰Ωú 2ÔºâË¥üËΩΩÂùáË°° ÂùáÂåÄÂàÜÈÖçËØ∑Ê±Ç|Êï∞ÊçÆÂà∞‰∏çÂêåÊìç‰ΩúÂçïÂÖÉ‰∏ä 3ÔºâÂ∏∏ËßÅ‰∫íËÅîÁΩëÊû∂ÊûÑ ÂÆ¢Êà∑Á´ØÂ±Ç‚ÜíÂèçÂêë‰ª£ÁêÜÂ±Ç‚ÜíÁ´ôÁÇπÂ±Ç‚ÜíÊúçÂä°Â±Ç‚ÜíÊï∞ÊçÆÂ±Ç ‰∫å„ÄÅNginxÂÖ•Èó®1„ÄÅ‰∫ÜËß£nginxÊòØ‰ªÄ‰πà nginxÊòØ‰∏ÄÊ¨æËΩªÈáèÁ∫ßÔºàÂºÄÂèëÊñπ‰æøÔºåÈÖçÁΩÆÁÆÄÊç∑ÔºâÁöÑWeb ÊúçÂä°Âô®/ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®ÂèäÁîµÂ≠êÈÇÆ‰ª∂ÔºàIMAP/POP3Ôºâ‰ª£ÁêÜÊúçÂä°Âô® 2„ÄÅÁâπÁÇπ Âç†ÊúâÂÜÖÂ≠òÂ∞ëÔºåÂπ∂ÂèëËÉΩÂäõÂº∫ÔºånginxÁöÑÂπ∂ÂèëËÉΩÂäõÁ°ÆÂÆûÂú®ÂêåÁ±ªÂûãÁöÑÁΩëÈ°µÊúçÂä°Âô®‰∏≠Ë°®Áé∞ÈùûÂ∏∏Â•Ω„ÄÇ Ôºà‰ΩøÁî®CËØ≠Ë®ÄÁºñÂÜôÔºâ 3„ÄÅÈÖçÁΩÆÊê≠Âª∫NginxÔºàLinuxÁ≥ªÁªüÁéØÂ¢É‰∏ãÔºâËµÑÊ∫êÔºö TengineÔºàÊé®ËçêÔºâÔºöTengine-2.2.3.tar.gz ‚Äã ÂÖ∂‰ªñÁâàÊú¨ nginxÔºönginx/Windows-1.8.1 1ÔºâÂÆâË£Ö‰æùËµñ ÂëΩ‰ª§Ôºöyum -y install gcc openssl-devel pcre-devel zlib-devel 2ÔºâËß£ÂéãtarÂåÖ ÂëΩ‰ª§Ôºötar -zxvf Tengine-2.2.3.tar.gz 3ÔºâconfigureÈÖçÁΩÆÔºöÂú®Ëß£ÂéãÂêéÁöÑÊ∫êÁ†ÅÁõÆÂΩï‰∏≠ ‰∏§ÁßçÊñπÊ°àÔºö ÂëΩ‰ª§Ôºö ./configure ÈªòËÆ§ÈÖçÁΩÆ/usr/soft/nginx ÂëΩ‰ª§ : ./configure ‚Äìprofix==/usr/soft/nginx ÈÖçÁΩÆÂú®ÊåáÂÆöË∑ØÂæÑ 4ÔºâÁºñËØëÂπ∂ÂÆâË£Ö(ÈªòËÆ§‰ºöÂú®/usr/local‰∏ãÁîüÊàênginxÁõÆÂΩï) make &amp;&amp; make install 5ÔºâÈÖçÁΩÆnginxÊúçÂä° Âú®/etc/rc.d/init.d/ÁõÆÂΩï‰∏≠Âª∫Á´ãÊñáÊú¨Êñá‰ª∂nginx 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126#!/bin/sh## nginx - this script starts and stops the nginx daemon## chkconfig: - 85 15 # description: Nginx is an HTTP(S) server, HTTP(S) reverse \# proxy and IMAP/POP3 proxy server# processname: nginx# config: /etc/nginx/nginx.conf# config: /etc/sysconfig/nginx# pidfile: /var/run/nginx.pid # Source function library.. /etc/rc.d/init.d/functions # Source networking configuration.. /etc/sysconfig/network # Check that networking is up.[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0 nginx=&quot;/usr/local/nginx/sbin/nginx&quot;prog=$(basename $nginx) NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot; [ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx lockfile=/var/lock/subsys/nginx make_dirs() &#123; # make required directories user=`nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:&quot; | sed &apos;s/[^*]*--user=\([^ ]*\).*/\1/g&apos; -` options=`$nginx -V 2&gt;&amp;1 | grep &apos;configure arguments:&apos;` for opt in $options; do if [ `echo $opt | grep &apos;.*-temp-path&apos;` ]; then value=`echo $opt | cut -d &quot;=&quot; -f 2` if [ ! -d &quot;$value&quot; ]; then # echo &quot;creating&quot; $value mkdir -p $value &amp;&amp; chown -R $user $value fi fi done&#125; start() &#123; [ -x $nginx ] || exit 5 [ -f $NGINX_CONF_FILE ] || exit 6 make_dirs echo -n $&quot;Starting $prog: &quot; daemon $nginx -c $NGINX_CONF_FILE retval=$? echo [ $retval -eq 0 ] &amp;&amp; touch $lockfile return $retval&#125; stop() &#123; echo -n $&quot;Stopping $prog: &quot; killproc $prog -QUIT retval=$? echo [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile return $retval&#125; restart() &#123; configtest || return $? stop sleep 1 start&#125; reload() &#123; configtest || return $? echo -n $&quot;Reloading $prog: &quot; killproc $nginx -HUP RETVAL=$? echo&#125; force_reload() &#123; restart&#125; configtest() &#123; $nginx -t -c $NGINX_CONF_FILE&#125; rh_status() &#123; status $prog&#125; rh_status_q() &#123; rh_status &gt;/dev/null 2&gt;&amp;1&#125; case &quot;$1&quot; in start) rh_status_q &amp;&amp; exit 0 $1 ;; stop) rh_status_q || exit 0 $1 ;; restart|configtest) $1 ;; reload) rh_status_q || exit 7 $1 ;; force-reload) force_reload ;; status) rh_status ;; condrestart|try-restart) rh_status_q || exit 0 ;; *) echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot; exit 2esac 6Ôºâ‰øÆÊîπnginxÊñá‰ª∂ÁöÑÊùÉÈôê ÂëΩ‰ª§ Ôºö chmod +x nginx 7ÔºâÂ∞ÜÊñá‰ª∂Ê∑ªÂä†Âà∞Á≥ªÁªüÊúçÂä°‰∏≠ chkconfig ‚Äìadd nginx 8ÔºâÈ™åËØÅ chkconfig ‚Äìlist nginx 9ÔºâÂêØÂä®|ÂÅúÊ≠¢ÊúçÂä° service nginx start|stop 4„ÄÅË¥üËΩΩÂùáË°°ÈÖçÁΩÆ1ÔºâÁºñËæëÈÖçÁΩÆÊñá‰ª∂Ôºö ÂëΩ‰ª§ Ôºö vim /usr/local/nginx/conf/nginx.conf ÂÖ∑‰ΩìË¥üËΩΩÈÖçÁΩÆÔºö 1234567891011121314151617181920212223242526272829303132333435363738Ôºà1ÔºâÔºàÈªòËÆ§ÔºâËΩÆËØ¢Ë¥üËΩΩhttp &#123; upstream shsxt&#123; server node01; server node02; &#125; server &#123; listen 80; server_name localhost; location / &#123; proxy_pass http://shsxt; &#125; &#125; &#125;Ôºà2ÔºâÂä†ÊùÉË¥üËΩΩupstream shsxt&#123; server sxt1.com weight=3; server sxt2.com;&#125;(3)ÊúÄÂ∞ëËøûÊé•Ë¥üËΩΩupstream shsxt&#123; least_conn; servcer node01; server node02;&#125;(4)ip_hashË¥üËΩΩÔºà‰øùÊåÅÂõûËØùÊåÅ‰πÖÊÄßÔºâupstream shsxt&#123; ip_hash; server node01; server node02;&#125;3. ËÆøÈóÆÊéßÂà∂Ôºàallow ‰ª£Ë°®ÂÖÅËÆ∏ÂÖ∂ËÆøÈóÆÔºådeny Á¶ÅÊ≠¢ÂÖ∂ËÆøÈóÆÔºâlocation / &#123; deny 192.168.4.29; allow 192.168.198.0/24; deny all; proxy_pass http://shsxt;&#125; 5„ÄÅsession‰∏ÄËá¥ÊÄßÈóÆÈ¢ò ÂÆûÁé∞sessionÂÖ±‰∫´Âç≥ÂèØËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò ÂÆûÁé∞Â∑•ÂÖ∑Ôºömemcached ‰ΩúÁî®Ôºö‰∏ìÈó®ÁÆ°ÁêÜsessionÁöÑÂ∑•ÂÖ∑ 1ÔºâÂú®tomcatÁöÑlibÁõÆÂΩï‰∏ãÂØºÂÖ•ËøûÊé•memcachedÊâÄÈúÄÁöÑjarÂåÖ asm-3.2.jar kryo-1.04.jar kryo-serializers-0.11.jar memcached-session-manager-1.7.0.jar memcached-session-manager-tc7-1.8.1.jar minlog-1.2.jar msm-kryo-serializer-1.7.0.jar reflectasm-1.01.jar spymemcached-2.7.3.jar 2ÔºâÂú®tomcatÁöÑconfÁõÆÂΩï‰∏ãÁºñËæëcontext.xmlÊñá‰ª∂ 1234567&lt;Manager className="de.javakaffee.web.msm.MemcachedBackupSessionManager" memcachedNodes="n1:192.168.17.9:11211" sticky="true" lockingMode="auto" sessionBackupAsync="false" requestUriIgnorePattern=".*\.(ico|png|gif|jpg|css|js)$"sessionBackupTimeout="1000" transcoderFactoryClass="de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory" /&gt; ÔºàÊ≥®ÊÑèÔºöÈÖçÁΩÆmemcachedNodesÂ±ûÊÄßÊó∂ÔºåÈÖçÁΩÆÂÖ∂ipÂíåÁ´ØÂè£ÔºåÈªòËÆ§‰∏∫11211ÔºåÂ≠òÂú®Â§ö‰∏™memecacahedÊï∞ÊçÆÂ∫ìÊó∂ÔºåÁî®ÈÉΩÈÄóÂè∑ÈöîÂºÄÔºâ 3ÔºâÈ™åËØÅsessionÔºö‰øÆÊîπindex.jspÔºàÂú®/usr/soft/apache-tomcat-8.5.24/webapps/ROOT/index.jspÔºâÔºåÂèñsessionidÁúã‰∏ÄÁúã 12345SessionID:&lt;%=session.getId()%&gt;&lt;/br&gt;SessionIP:&lt;%=request.getServerName()%&gt;&lt;/br&gt;&lt;h1&gt;tomcat1&lt;/h1&gt; 4)ÂÆâË£ÖÔºö memcached ÂëΩ‰ª§ Ôºöyum install memcached ‚Äìy 5ÔºâÂêØÂä®memcached (IPÂú∞ÂùÄ‰∏∫memcachedÂÆâË£ÖÁöÑËäÇÁÇπÁöÑIPÂú∞ÂùÄ) memcached -d -m 128m -p 11211 -l 192.168.198.128 -u root -P /tmp/ 6ÔºâÂú®ÊµèËßàÂô®ÊÆµËÆøÈóÆÊúçÂä°Âô®ÔºåÈªòËÆ§Á´ØÂè£ Ôºö 80 ÔºåÂØπÊ≠§ÊµãÈ™åÔºåÂ∞±‰ºöÂèëÁé∞sessionID‰∏ç‰ºöÊîπÂèò ‰∏â„ÄÅËôöÊãü‰∏ªÊú∫1„ÄÅ‰ªÄ‰πàÊòØËôöÊãü‰∏ªÊú∫ÔºüÔºà1ÔºâÊòØÊåáÂú®ÁΩëÁªúÊúçÂä°Âô®‰∏äÂàÜÂá∫‰∏ÄÂÆöÁöÑÁ£ÅÁõòÁ©∫Èó¥ÔºåÁßüÁªôÁî®Êà∑‰ª•ÊîæÁΩÆÁ´ôÁÇπ‰ª•ÂèäÂ∫îÁî®Á©∫Èó¥ÔºåÂπ∂Êèê‰æõÂøÖË¶ÅÁöÑÂ≠òÂÇ®Âíå‰º†ËæìÂäüËÉΩ„ÄÇ Ôºà2ÔºâÊòØË¢´ËôöÊãüÂåñÁöÑÈÄªËæë‰∏ªÊú∫Ôºå‰πüÂèØÁêÜËß£‰∏∫Â∞±ÊòØÊää‰∏ÄÂè∞Áâ©ÁêÜÊúçÂä°Âô®ÂàíÂàÜÊàêÂ§ö‰∏™‚ÄúËôöÊãü‚ÄúÁöÑÊúçÂä°Âô®ÔºåÂêÑ‰∏™ËôöÊãü‰∏ªÊú∫‰πãÈó¥ÂÆåÂÖ®Áã¨Á´ãÔºåÂØπÂ§ñÁïåÂëàÁé∞ÁöÑÁä∂ÊÄÅ‰πüÂêåÂçïÁã¨Áâ©ÁêÜ‰∏ªÊú∫Ë°®Áé∞ÂÆåÂÖ®Áõ∏Âêå„ÄÇ 2„ÄÅËôöÊãü‰∏ªÊúâÂï•ÁâπÁÇπÔºüÔºà1ÔºâÂ§öÂè∞ËôöÊãü‰∏ªÊú∫ÂÖ±‰∫´‰∏ÄÂè∞ÁúüÂÆû‰∏ªÊú∫ËµÑÊ∫êÔºåÂ§ßÂπÖÂ∫¶Èôç‰Ωé‰∫ÜÁ°¨‰ª∂„ÄÅÁΩëÁªúÁª¥Êä§„ÄÅÈÄö‰ø°Á∫øË∑ØÁ≠âÁöÑË¥πÁî® Ôºà2Ôºâ‰πüÂ§ßÂ§ßÁÆÄÂåñ‰∫ÜÊúçÂä°Âô®ÁÆ°ÁêÜÁöÑÂ§çÊùÇÊÄßÔºõ 3„ÄÅËôöÊãü‰∏ªÊú∫ÊúâÂì™‰∫õÁ±ªÂà´ÔºüÔºà1ÔºâÂü∫‰∫éÂüüÂêç 1234567891011121314151617181920212223242526http &#123; upstream shsxt&#123; server node01; server node02; &#125; upstream bjsxt&#123; server node03; &#125; server &#123; listen 80; //ËÆøÈóÆsxt2.comÁöÑÊó∂ÂÄôÔºå‰ºöÊääËØ∑Ê±ÇÂØºÂà∞bjsxtÁöÑÊúçÂä°Âô®ÁªÑÈáå server_name sxt2.com; location / &#123; proxy_pass http://bjsxt; &#125; &#125; server &#123; listen 80; //ËÆøÈóÆsxt1.comÁöÑÊó∂ÂÄôÔºå‰ºöÊääËØ∑Ê±ÇÂØºÂà∞shsxtÁöÑÊúçÂä°Âô®ÁªÑÈáå server_name sxt1.com; location / &#123; proxy_pass http://shsxt; &#125; &#125; &#125; Ê≥®ÊÑèÔºö Ôºà1ÔºâÂü∫‰∫éÂüüÂêçÁöÑËôöÊãüÊú∫‰∏ªÊú∫ Âú®Ê®°ÊãüÂ∫îÁî®Âú∫ÊôØÊó∂ÔºåÈúÄË¶ÅÂú®windowsÁ≥ªÁªüÁöÑhostsÊñá‰ª∂ÈáåÈÖçÁΩÆÂüüÂêçÊò†Â∞Ñ„ÄÇ ÔºàC:\Windows\System32\drivers\etc\hosts ÁªôIPÂèñÂà´ÂêçÔºâ Â¶ÇÔºö192.168.198.130 sxt1.com Ôºà2ÔºâÊØèÂè∞ÊúçÂä°Âô®ÁöÑTomcatÁöÑÁ´ØÂè£‰∏ç‰∏éÈÖçÁΩÆ‰∏≠ÁöÑlisten‰∏ÄËá¥ÔºåÈÇ£‰πàwindowsÁ≥ªÁªüÊµèËßàÂô®ËÆøÈóÆÊó∂ÔºåÈúÄË¶ÅÂä†‰∏äTomcatÁöÑÁ´ØÂè£ÔºåÔºà192.168.198.128Ôºö8080Ôºâ ‚Äã Â¶ÇÊûú‰∏ÄËá¥ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•‰∏çÂä†TomcatÁöÑÁ´ØÂè£Âõ†‰∏∫NginxÊúçÂä°Âô®ÈªòËÆ§Á´ØÂè£‰∏∫80 Ôºà2ÔºâÂü∫‰∫éÁ´ØÂè£ 12345678910111213141516171819202122232425http &#123; upstream shsxt&#123; server node01; server node02; &#125; upstream bjsxt&#123; server node03 &#125; server &#123; //ÂΩìËÆøÈóÆnginxÁöÑ80Á´ØÂè£Êó∂ÔºåÂ∞ÜËØ∑Ê±ÇÂØºÁªôbjsxtÁªÑ listen 8080; server_name 192.168.198.128; location / &#123; proxy_pass http://bjsxt; &#125;&#125; server &#123; //ÂΩìËÆøÈóÆnginxÁöÑ81Á´ØÂè£Êó∂ÔºåÂ∞ÜËØ∑Ê±ÇÂØºÁªôshsxtÁªÑ listen 81; server_name 192.168.198.128; //nginxÊúçÂä°Âô®ÁöÑIP location / &#123; proxy_pass http://shsxt; &#125; &#125; &#125; Ôºà3ÔºâÂü∫‰∫éIP ÔºöÔºà‰∏çÂ∏∏Áî®Ôºâ Âõõ„ÄÅÊ≠£Âêë‰ª£ÁêÜÂíåÂèçÂêë‰ª£ÁêÜ1„ÄÅÊ≠£Âêë‰ª£ÁêÜÁêÜËß£Ôºö ‰ª£ÁêÜÂÆ¢Êà∑Á´ØÔºåÂ¶ÇÈÄöËøáVPN ÔºåÈöêËóèÂÆ¢Êà∑Á´ØÔºåËÆøÈóÆÁõÆÊ†áÊúçÂä°Âô®ÔºàÊúçÂä°Á´ØÂèØËßÅÔºâ ‰∏æ‰æãÔºö ÂõΩÂÜÖ‰∏çËÉΩÁõ¥Êé•ËÆøÈóÆË∞∑Ê≠åÔºå‰ΩÜÊòØÂèØ‰ª•ËÆøÈóÆ‰ª£ÁêÜÊúçÂä°Âô®ÔºåÈÄöËøá‰ª£ÁêÜÊúçÂä°Âô®ÂèØ‰ª•ËÆøÈóÆË∞∑Ê≠å„ÄÇÔºàÂ∞±ÊòØÁøªÂ¢ôÔºâ ‰ΩÜÊòØÔºåÈúÄË¶ÅÂÆ¢Êà∑Á´ØÂøÖÈ°ªËÆæÁΩÆÊ≠£Âêë‰ª£ÁêÜÊúçÂä°Âô®ÔºåÂπ∂‰∏îË¶ÅÁü•ÈÅìÊ≠£Âêë‰ª£ÁêÜÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÂíåÁ´ØÂè£ 2„ÄÅÂèçÂêë‰ª£ÁêÜÁêÜËß£Ôºö ‰ª£ÁêÜÊúçÂä°Á´ØÔºåÈÄöËøáË¥üËΩΩÂùáË°°ÊúçÂä°Âô®ÔºàÂ¶ÇNginxÔºâÔºåÈöêËóèÊúçÂä°Á´ØÔºåÂàÜÂèëÂÆ¢Êà∑Á´ØÁöÑ‰∏çÂêåËØ∑Ê±ÇÔºàÂÆ¢Êà∑Á´ØÂèØËßÅÔºâÂà∞ÂÜÖÈÉ®ÁΩëÁªú‰∏äÁöÑÊúçÂä°Âô® ‰∏æ‰æãÔºö Â¶ÇÊàë‰ª¨ËÆøÈóÆwww.baidu.comÁöÑÊó∂ÂÄôÔºåÂÆÉËÉåÂêéÊúâÂæàÂ§öÂè∞ÊúçÂä°Âô®ÔºåÂÆ¢Êà∑Á´ØÂπ∂‰∏çÁü•ÈÅìÂÖ∑‰ΩìÊòØÂì™‰∏ÄÂè∞ÊúçÂä°Âô®Áªô‰Ω†Êèê‰æõÁöÑÊúçÂä°ÔºåÂè™Ë¶ÅÁü•ÈÅìÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®ÊòØË∞ÅÂ∞±Â•Ω‰∫ÜÔºåÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®Â∞±‰ºöÊääÊàë‰ª¨ÁöÑËØ∑Ê±ÇËΩ¨ÂèëÂà∞ÁúüÂÆûÊúçÂä°Âô®‰∏ä„ÄÇ NginxÂ∞±ÊòØÊÄßËÉΩÂæàÂ•ΩÁöÑÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®ÔºåÁî®Êù•‰ΩúË¥üËΩΩÂùáË°°„ÄÇ]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Ë¥üËΩΩÂùáË°°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊâãÂä®ÂÆâË£ÖmavenÂùêÊ†á‰æùËµñ]]></title>
    <url>%2F2018%2F12%2F28%2F%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85maven%E5%9D%90%E6%A0%87%E4%BE%9D%E8%B5%96%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅ‰∫ã‰ª∂ÂéüÂõ†ÔºöÂ≠¶‰π†quartzÊ°ÜÊû∂Êó∂ÔºåÂú®mavenÈ°πÁõÆÁöÑpom.xmlÊñá‰ª∂‰∏≠Ê∑ªÂä†quartzÊâÄÈúÄË¶ÅÁöÑÂùêÊ†á‰æùËµñÊó∂ÔºåÊòæÁ§∫jarÂåÖ‰∏çÂ≠òÂú®„ÄÇ 12345678910111213ÊèêÁ§∫Ôºö"Dependency 'xxxx‚Äò not found"Ôºå Âπ∂‰∏îÊ∑ªÂä†ÁöÑÂ¶Ç‰∏ã‰∏§‰∏™ÂùêÊ†á‰æùËµñÂùáÊä•Á∫¢„ÄÇ &lt;dependency&gt; &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt; &lt;artifactId&gt;quartz&lt;/artifactId&gt; &lt;version&gt;2.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Â∑•ÂÖ∑ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt; &lt;artifactId&gt;quartz-jobs&lt;/artifactId&gt; &lt;version&gt;2.3.0&lt;/version&gt; &lt;/dependency&gt; ÂàÜÊûêÔºö 1„ÄÅmavenÈ°πÁõÆÊâÄÈúÄË¶ÅÁöÑjarÂåÖÂùáÂ≠òÊîæÂú®mavenÁöÑF:\m2\repository(È°πÁõÆÊâÄÈúÄÁöÑjarÂåÖ‰ªìÂ∫ì)Êñá‰ª∂Â§π‰∏≠ 2„ÄÅÂú®F:\apache-maven-3.5.4\confÁöÑsettings.xmlÊñá‰ª∂‰∏≠ÊúâÂ¶Ç‰∏ãËÆæÁΩÆÔºöÔºàÁî±‰∫é‰ΩøÁî®ËøúÁ®ã‰ªìÂ∫ìÂ§™ÊÖ¢ÔºåÈòøÈáå‰∫ëÁªôÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÈïúÂÉè‰ªìÂ∫ìÔºå‰æø‰∫éÊàë‰ª¨‰ΩøÁî®Ôºå‰∏îÂè™ÂåÖÂê´central‰ªìÂ∫ì‰∏≠ÁöÑjarÔºâ 1234567&lt;!--Êñá‰ª∂‰∏≠ÂéüÊúâÁöÑÈÖçÁΩÆÔºöËøúÁ®ã‰ªìÂ∫ì---&gt;&lt;mirror&gt; &lt;id&gt;mirrorId&lt;/id&gt; &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt; &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt; &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt; &lt;/mirror&gt; 1234567&lt;!--Êñá‰ª∂‰∏≠Ëá™Â∑±ÊâãÂä®ÈÖçÁΩÆÔºöÈòøÈáåÈïúÂÉè‰ªìÂ∫ì---&gt;&lt;mirror&gt; &lt;id&gt;nexus-aliyun&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Nexus aliyun&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt; &lt;/mirror&gt; 3.ÂèØÊòØÊàë‰ª¨Âú®https://mvnrepository.com/Ôºàmaven‰ªìÂ∫ìÔºâ‰∏≠ÂèëÁé∞ÊúâÊàë‰ª¨Ë¶ÅÁöÑjarÂåÖÔºåËÄå‰∏îÂ∞±Âú®Central‰ªìÂ∫ìÈáåÔºåËøôÈáåÊàë‰ª¨Â∞±ÂæàÂ•áÊÄ™‰∫ÜÔºåÂêéÊù•Â∞±ÈÄâÊã©ËøòÊòØÊâãÂä®ÂÆâË£ÖjarÂåÖÂêß ÔºàÂ¶ÇÊûúÊúâÂ∞è‰ºô‰º¥ÊúâÂà´ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåËøòËØ∑ÊåáÁÇπ‰∏Ä‰∫å„ÄÇÔºâ 1&lt;!--more--&gt; ‰∫å„ÄÅËß£ÂÜ≥ÊñπÊ°à1„ÄÅÈ¶ñÂÖàÔºåÊàë‰ª¨ÈúÄË¶Å‰ªémaven Repository‰∏≠‰∏ãËΩΩÊàë‰ª¨ÈúÄË¶ÅÁöÑjarÂåÖÔºàÈúÄË¶ÅÁöÑ‰∏§‰∏™jarÂåÖÔºå‰∏ãËΩΩÂéüÁêÜÁõ∏ÂêåÔºâ 2„ÄÅÊ≥®ÊÑèÊàë‰ª¨ÁöÑmavenÂÆâË£ÖÔºåÈúÄË¶ÅÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèÔºåÊâçËÉΩÂú®dosÁ™óÂè£ÔºåÊåá‰ª§ÂÆâË£ÖjarÂåÖ Âõ†‰∏∫Êàë‰πãÂâçÊü•ËµÑÊñôÊó∂ÔºåÊúâÂ∞è‰ºô‰º¥ËØ¥ÔºåjavaÁöÑÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆ‰πü‰ºöÂΩ±ÂìçÔºåÊâÄ‰ª•ÔºåÊàëÂú®ËøôÈáå‰πüÊääjavaÁöÑÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆ‰πüË¥¥Âá∫Êù• 1 1544699916763 1544699989775 JAVA_HOME F:\Java\jdk1.8.0_131Ôºà Ê†πÊçÆËá™Â∑±ÁöÑjdkÂÆâË£ÖÁõÆÂΩïÔºâ CLASSPATH .;%JAVA_HOME%\lib;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar MAVEN_HOME F:\apache-maven-3.5.4Ôºà Ê†πÊçÆËá™Â∑±mavenÂÆâË£ÖÁõÆÂΩïÔºâ PathÔºàÊ≥®ÊÑèÈÖçÁΩÆÁöÑÊó∂ÂÄôÔºå‰∏ÄÂÆöË¶ÅÂíåÈÖçÁΩÆhomeÊó∂ÁöÑÂèòÈáèÂêç‰∏ÄËá¥ÔºåÂ¶ÇMAVEN_HOME,ÊàëÈÖçÁΩÆÊàê‰∫Ü%MVN_HOME%\bin;Ôºâ %JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;%MYSQL_HOME%\bin;%MAVEN_HOME%\bin; ÈÖçÁΩÆËøô‰∫õÁéØÂ¢ÉÂèòÈáèÔºåÂú®dosÁ™óÂè£ÊâçËÉΩ‰Ωøjava Ôºåmvn ‰πãÁ±ªÁöÑÊåá‰ª§ÂèØ‰ª•Áî®Ôºõ Âê¶Âàô‰ºöÂá∫Áé∞Â¶Ç‰∏ãÊòæÁ§∫„ÄÇ ‚Äòmvn‚Äô ‰∏çÊòØÂÜÖÈÉ®ÊàñÂ§ñÈÉ®ÂëΩ‰ª§Ôºå‰πü‰∏çÊòØÂèØËøêË°åÁöÑÁ®ãÂ∫è (ËøôÂ∞±ÊòØÁéØÂ¢ÉÂèòÈáèÊ≤°ÊúâÈÖçÊàêÂäüÁöÑÁªìÊûú) 3.ÂÆâË£Ö C:\Users\Administrator&gt;mvn -v 1544701045091 C:\Users\Administrator&gt;mvn install:install-file -Dfile=F:/apache-maven-3.5.4/m2/quartz-2.3.0.jarÔºàjarÂåÖÊâÄÂú®Ë∑ØÂæÑÔºâ -DgroupId=org.quartz-scheduler -DartifactId=quartz -Dversion=2.3.0 -Dpackaging=jar ÔºàÊ†πÊçÆ‰∏ãÈù¢ÊâÄÁ§∫ÁöÑÈÖçÁΩÆgroupId„ÄÅartifactId„ÄÅversionÔºâ 12345&lt;dependency&gt; &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt; &lt;artifactId&gt;quartz&lt;/artifactId&gt; &lt;version&gt;2.3.0&lt;/version&gt; &lt;/dependency&gt; 1544702128551 Â¶ÇÂõæÊâÄÁ§∫ÔºåÂÆâË£ÖÊàêÂäü„ÄÇ 1544702179172]]></content>
      <categories>
        <category>maven</category>
      </categories>
      <tags>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∏∏Áî®LinuxÂëΩ‰ª§ÁöÑÂ≠¶‰π†Ôºà‰∫åÔºâ]]></title>
    <url>%2F2018%2F12%2F28%2F%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[‚Äã‚Äã [TOC] ‰∏Ä„ÄÅÁ£ÅÁõòÊåá‰ª§ Êü•ÁúãÁ°¨Áõò‰ø°ÊÅØ ÂëΩ‰ª§Ôºödf ÔºàÈªòËÆ§Â§ßÂ∞è‰ª•kbÊòæÁ§∫Ôºâ df -kÔºà‰ª•kb‰∏∫Âçï‰ΩçÔºâ df -mÔºà ‰ª•mb‰∏∫Âçï‰ΩçÔºâ df ‚Äìh ÔºàÊòì‰∫éÈòÖËØªÔºâ Êü•ÁúãÊñá‰ª∂/ÁõÆÂΩïÁöÑÂ§ßÂ∞è ÂëΩ‰ª§Ôºödu filename|foldername ÔºàÈªòËÆ§Âçï‰Ωç‰∏∫kbÔºâ-k kbÂçï‰Ωç -m mbÂçï‰Ωç -a ÊâÄÊúâÊñá‰ª∂ÂíåÁõÆÂΩï -h Êõ¥Êòì‰∫éÈòÖËØª ‚Äã --max-depth=0 ÁõÆÂΩïÊ∑±Â∫¶ ‰∫å„ÄÅÁΩëÁªúÊåá‰ª§ Êü•ÁúãÁΩëÁªúÈÖçÁΩÆ‰ø°ÊÅØ ÂëΩ‰ª§:ifconfig ÊµãËØï‰∏éÁõÆÊ†á‰∏ªÊú∫ÁöÑËøûÈÄöÊÄß ÂëΩ‰ª§Ôºöping remote_ip ctrl + c :ÁªìÊùüpingËøõÁ®ã ÊòæÁ§∫ÂêÑÁßçÁΩëÁªúÁõ∏ÂÖ≥‰ø°ÊÅØ ÂëΩ‰ª§Ôºönetstat Êü•ÁúãÁ´ØÂè£Âè∑ÔºàÊòØÂê¶Ë¢´Âç†Áî®Ôºâ (1)„ÄÅlsof -i:Á´ØÂè£Âè∑ ÔºàÈúÄË¶ÅÂÖàÂÆâË£ÖlsofÔºâ (2)„ÄÅnetstat -tunlp|grep Á´ØÂè£Âè∑ ÊµãËØïËøúÁ®ã‰∏ªÊú∫ÁöÑÁΩëÁªúÁ´ØÂè£ ÂëΩ‰ª§Ôºö telnet ip port ÔºàÈúÄË¶ÅÂÖàÂÆâË£ÖtelnetÔºâ ÊµãËØïÊàêÂäüÂêéÔºåÊåâctrl + ] ÈîÆÔºåÁÑ∂ÂêéÂºπÂá∫telnet&gt;Êó∂ÔºåÂÜçÊåâqÈÄÄÂá∫ httpËØ∑Ê±ÇÊ®°Êãü curl -X get www.baidu.com Ê®°ÊãüËØ∑Ê±ÇÁôæÂ∫¶ ‰∏â„ÄÅÁ≥ªÁªüÁÆ°ÁêÜÊåá‰ª§ Áî®Êà∑Êìç‰Ωú 12345678910 Êìç‰Ωú ÂëΩ‰ª§ÂàõÂª∫Áî®Êà∑ useradd|adduser username‰øÆÊîπÂØÜÁ†Å passwd usernameÂà†Èô§Áî®Êà∑ userdel ‚Äìr username‰øÆÊîπÁî®Êà∑ÔºàÂ∑≤‰∏ãÁ∫øÔºâÔºö ‰øÆÊîπÁî®Êà∑Âêç: usermod ‚Äìl new_name oldname ÈîÅÂÆöË¥¶Êà∑: usermod ‚ÄìL username Ëß£Èô§Ë¥¶Êà∑Ôºö usermod ‚ÄìU usernameÊü•ÁúãÂΩìÂâçÁôªÂΩïÁî®Êà∑ ‰ªÖroot Áî®Êà∑Ôºöwhoami | cat /etc/shadow ÊôÆÈÄöÁî®Êà∑Ôºöcat /etc/pqsswd Áî®Êà∑ÁªÑÊìç‰Ωú 12345 Êìç‰Ωú ÂëΩ‰ª§ ÂàõÂª∫Áî®Êà∑ÁªÑ groupadd groupnameÂà†Èô§Áî®Êà∑ÁªÑ groupdel groupname‰øÆÊîπÁî®Êà∑ÁªÑ groupmod ‚Äìn new_name old_nameÊü•ÁúãÁî®Êà∑ÁªÑ groups ÔºàÊü•ÁúãÁöÑÊòØÂΩìÂâçÁî®Êà∑ÊâÄÂú®ÁöÑÁî®Êà∑ÁªÑÔºâ Áî®Êà∑+Áî®Êà∑ÁªÑ 12345 Êìç‰Ωú ÂëΩ‰ª§ ‰øÆÊîπÁî®Êà∑ÁöÑ‰∏ªÁªÑ usermod ‚Äìg groupname usernameÁªôÁî®Êà∑ËøΩÂä†ÈôÑÂä†ÁªÑ usermod ‚ÄìG groupname usernameÊü•ÁúãÁî®Êà∑ÁªÑ‰∏≠Áî®Êà∑Êï∞ cat /etc/groupÊ≥®ÊÑèÔºöÂàõÂª∫Áî®Êà∑Êó∂ÔºåÁ≥ªÁªüÈªòËÆ§‰ºöÂàõÂª∫‰∏Ä‰∏™ÂíåÁî®Êà∑ÂêçÂ≠ó‰∏ÄÊ†∑ÁöÑ‰∏ªÁªÑ Á≥ªÁªüÊùÉÈôê 12345678910 Êìç‰Ωú ÂëΩ‰ª§ Êü•Áúã/usr‰∏ãÊâÄÊúâÊùÉÈôê ll /usr ÊùÉÈôêÁ±ªÂà´ rÔºàËØªÂèñÔºö4Ôºâ wÔºàÂÜôÂÖ•Ôºö2Ôºâ xÔºàÊâßË°åÔºö1Ôºâ ‰∏â‰∏™‰∏∫‰∏ÄÁªÑÔºåÊó†ÊùÉÈôêÁî® ‚Äî‰ª£Êõø UGOÊ®°Âûã UÔºàUserÔºâ G(Group) O(ÂÖ∂‰ªñ)ÊùÉÈôê‰øÆÊîπ ‰øÆÊîπÊâÄÊúâËÄÖÔºöchown username file|folder (ÈÄíÂΩí)‰øÆÊîπÊâÄÊúâËÄÖÂíåÊâÄÂ±ûÁªÑÔºö chown -r usernameÔºögroupname file|folder ‰øÆÊîπÊâÄÂ±ûÁªÑÔºöchgrp groupname file|folder ‰øÆÊîπÊùÉÈôêÔºöchmod ugo+rwx file|folder Âõõ„ÄÅÁ≥ªÁªüÈÖçÁΩÆÊåá‰ª§ 1.‰øÆÊîπ‰∏ªÊú∫Âêç 123 ÁºñËæëÊñá‰ª∂Ôºö ÂëΩ‰ª§Ôºö vim /etc/sysconfig/network Êñá‰ª∂ÂÜÖÂÆπÔºö HOSTNAME=node00ÔºàÈáçÂêØÁîüÊïà)reboot 2.DNSÈÖçÁΩÆ 12ÁºñËæëÊñá‰ª∂Ôºö ÂëΩ‰ª§Ôºövim /etc/resolv.confÊñá‰ª∂ÂÜÖÂÆπÔºö nameserver 192.168.198.0 3.sudoÊùÉÈôêÈÖçÁΩÆ 1234567891011121314151617 Êìç‰Ωú ÂëΩ‰ª§ÁºñËæëÊùÉÈôêÈÖçÁΩÆÊñá‰ª∂Ôºö vim /etc/sudoersÊ†ºÂºèÔºö ÊéàÊùÉÁî®Êà∑ ‰∏ªÊú∫=[(ÂàáÊç¢Âà∞Âì™‰∫õÁî®Êà∑ÊàñÁî®Êà∑ÁªÑ)] [ÊòØÂê¶ÈúÄË¶ÅÂØÜÁ†ÅÈ™åËØÅ] Ë∑ØÂæÑ/ÂëΩ‰ª§‰∏æ‰æãÔºö test ALL=(root) /usr/bin/yum,/sbin/serviceËß£ÈáäÔºö testÁî®Êà∑Â∞±ÂèØ‰ª•Áî®yumÂíåservieÂëΩ‰ª§Ôºå ‰ΩÜÊòØÔºå‰ΩøÁî®Êó∂ÈúÄË¶ÅÂú®ÂâçÈù¢Âä†‰∏äsudoÂÜçÊï≤ÂëΩ‰ª§„ÄÇ Á¨¨‰∏ÄÊ¨°‰ΩøÁî®ÈúÄË¶ÅËæìÂÖ•Áî®Êà∑ÂØÜÁ†Å,‰∏îÊØè‰∏™ÂçÅ‰∫îÂàÜÈíüÈúÄË¶Å‰∏ÄÊ¨°ÂØÜÁ†ÅÈ™åËØÅ‰øÆÊîπÔºö test ALL=(root) NOPASSWD: /usr/bin/yum,/sbin/serviceËøôÊ†∑Â∞±‰∏çÈúÄË¶ÅÂØÜÁ†Å‰∫ÜÂ∞ÜÊùÉÈôêËµã‰∫àÊüê‰∏™ÁªÑÔºå%+ÁªÑÂêç%group ALL=(root) NOPASSWD: /usr/bin/yum,/sbin/serviceÂàóÂá∫Áî®Êà∑ÊâÄÊúâÁöÑsudoÊùÉÈôê sudo ‚Äìl 4.Á≥ªÁªüÊó∂Èó¥ 12345678Êìç‰Ωú ÂëΩ‰ª§Êü•ÁúãÁ≥ªÁªüÊó∂Èó¥ date ---Êü•ÁúãÂΩìÂâçÊó∂Èó¥ËØ¶ÊÉÖ cal ---Êü•ÁúãÂΩìÂâçÊúàÊó•ÂéÜ cal 2018 ---Êü•Áúã2018Âπ¥ÂÆåÊï¥Êó•ÂéÜ cal 12 2018 ---Êü•ÁúãÊåáÂÆöÂπ¥ÊúàÁöÑÊó•ÂéÜ Êõ¥Êñ∞Á≥ªÁªüÊó∂Èó¥ÔºàÊé®ËçêÔºâ yum install ntpdate ‚Äìy ---ÂÆâË£ÖntpÊúçÂä° ntpdate cn.ntp.org.cn ---Âà∞ÂüüÂêç‰∏∫cn.ntp.org.cnÁöÑÊó∂Èó¥ÊúçÂä°Âô®‰∏äÂêåÊ≠•Êó∂Èó¥ 5.ÂÖ≥‰∫éhostsÈÖçÁΩÆ Áõ∏ÂΩì‰∫éÁªôIPÂú∞ÂùÄÂÖ∂Âà´ÂêçÔºåÂèØ‰ª•ÈÄöËøáÂà´ÂêçËÆøÈóÆ Ë∑ØÂæÑÔºö WindowsÁ≥ªÁªü C:/Windows/System32/drivers/etc/hosts Êñá‰ª∂ LinuxÁ≥ªÁªü /etc/hostsÊñá‰ª∂Ôºövim +Ë∑ØÂæÑ Áªü‰∏Ä ÁºñËæëÊ†ºÂºè IPÂú∞ÂùÄ Âà´ÂêçÔºö192.168.198.128 node00 6.ÂÖ≥‰∫éhostnameÈÖçÁΩÆ Áõ∏ÂΩì‰∫éÁªôÂØπÂ∫îÁöÑËôöÊãüÊú∫Âô®Ëµ∑Âà´Âêç LinuxÁ≥ªÁªüÔºö vi /etc/sysconfig/network ÁºñËæëÂÜÖÂÆπÔºö HOSTNAME=node01 ‰∫î„ÄÅÈáçÂÆöÂêë‰∏éÁÆ°ÈÅìÁ¨¶ ËæìÂá∫ÈáçÂÆöÂêë ËæìÂá∫ÈáçÂÆöÂêëÂà∞‰∏Ä‰∏™Êñá‰ª∂ÊàñËÆæÂ§áÔºö &gt; Ë¶ÜÁõñÂéüÊù•ÁöÑÊñá‰ª∂ &gt;&gt; ËøΩÂä†ÂéüÊù•ÁöÑÊñá‰ª∂ ‰∏æ‰æãÔºö ls &gt; log ‚Äî Âú®logÊñá‰ª∂‰∏≠ÂàóÂá∫ÊâÄÊúâÈ°πÔºåÂπ∂Ë¶ÜÁõñÂéüÊñá‰ª∂ echo ‚Äúhello‚Äù&gt;&gt;log ‚ÄîÂ∞ÜhelloËøΩÂä†Âà∞logÊñá‰ª∂‰∏≠ ËæìÂÖ•ÈáçÂÆöÂêë &lt; ËæìÂÖ•ÈáçÂÆöÂêëÂà∞‰∏Ä‰∏™Á®ãÂ∫è ‰∏æ‰æãÔºöcat &lt; log ‚ÄîÂ∞ÜlogÊñá‰ª∂‰Ωú‰∏∫catÂëΩ‰ª§ÁöÑËæìÂÖ•ÔºåÊü•ÁúãlogÊñá‰ª∂ÁöÑÂÜÖÂÆπ Ê†áÂáÜ ËæìÂá∫ ÈáçÂÆöÂêë 1 &gt; Êàñ &gt; Âê´‰πâÔºö ËæìÂá∫ÈáçÂÆöÂêëÊó∂ÔºåÂè™Áî®Ê≠£Á°ÆÁöÑËæìÂá∫Êâç‰ºöÈáçÂÆöÂêëÂà∞ÊåáÁöÑÊñá‰ª∂‰∏≠ ÈîôËØØÁöÑÂàô‰ºöÁõ¥Êé•ÊâìÂç∞Âà∞Â±èÂπï‰∏ä ÈîôËØØ ËæìÂá∫ ÈáçÂÆöÂêë 2 &gt; Âê´‰πâÔºö ÈîôËØØÁöÑËæìÂá∫‰ºöÈáçÂÆöÂêëÂà∞ÊåáÂÆöÊñá‰ª∂ÈáåÔºåÊ≠£Á°ÆÁöÑÊó•ÂøóÂàôÁõ¥Êé•ÊâìÂç∞Âà∞Â±èÂπï‰∏ä„ÄÇ ÁªìÂêà ‰ΩøÁî® 2&gt;&amp;1 Âê´‰πâÔºö Â∞ÜÊó†ËÆ∫ÊòØÊ≠£Á°ÆÁöÑËæìÂá∫ËøòÊòØÈîôËØØÁöÑËæìÂá∫ÈÉΩÈáçÂÆöÂêëÂà∞ÊåáÂÆöÊñá‰ª∂ ÁÆ°ÈÅì **\ ** Âê´‰πâÔºö ÊääÂâç‰∏Ä‰∏™ËæìÂá∫ÂΩìÂÅöÂêé‰∏Ä‰∏™ËæìÂÖ• grep ÈÄöËøáÊ≠£ÂàôÊêúÁ¥¢ÊñáÊú¨ÔºåÂπ∂Â∞ÜÂåπÈÖçÁöÑË°åÊâìÂç∞Âá∫Êù• netstat -anp \ grep 22 Êäänetstat ‚Äìanp ÂëΩ‰ª§ÁöÑËæìÂá∫ ÂΩìÂÅöÊòØgrep ÂëΩ‰ª§ÁöÑËæìÂÖ• ÂëΩ‰ª§ ÊâßË°å ÊéßÂà∂ &amp;&amp; Ââç‰∏Ä‰∏™ÂëΩ‰ª§ÊâßË°åÊàêÂäüÊâç‰ºöÊâßË°åÂêé‰∏Ä‰∏™ÂëΩ‰ª§ **\ \ ** Ââç‰∏Ä‰∏™ÂëΩ‰ª§ÊâßË°åÂ§±Ë¥•Êâç‰ºöÊâßË°åÂêé‰∏Ä‰∏™ÂëΩ‰ª§]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>LinuxÂëΩ‰ª§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∏∏Áî®LinuxÂëΩ‰ª§ÁöÑÂ≠¶‰π†Ôºà‰∏ÄÔºâ]]></title>
    <url>%2F2018%2F12%2F27%2F%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[[TOC] ‰∏Ä„ÄÅÂëΩ‰ª§ÊåáÂçóÔºàmanualÔºâÔºöman ÂÆâË£ÖÔºöyum install man ‚Äìy Ôºà-y Ë°®Á§∫Ëé∑ÂæóÂÖÅËÆ∏ÔºåÊó†ÈúÄÁ°ÆËÆ§Ôºâ Êü•ÁúãlsÂëΩ‰ª§ÊåáÂçóÔºö man ls ‰∫å„ÄÅÁõÆÂΩïÂëΩ‰ª§ÂàáÊç¢ÁõÆÂΩïÔºöcd + ÁõÆÂΩïÁöÑË∑ØÂæÑ Êü•ÁúãÂΩìÂâçÁõÆÂΩïÊâÄÂú®ÁöÑÂÆåÊï¥Ë∑ØÂæÑÔºöpwd Êñ∞Âª∫ÁõÆÂΩïÔºömkdir +ÁõÆÂΩïÂêçÂ≠ó Êü•ÁúãÂΩìÂâçÁõÆÂΩïÊâÄÁî®ÊúâÁöÑÂ≠êÁõÆÂΩïÂíåÊñá‰ª∂Ôºöls ÔºållÁ≠â‰ª∑‰∫é ls ‚Äìl ‚Äã Êü•ÁúãÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâ‰∏úË•øÔºàÂåÖÊã¨ÈöêËóèÊñá‰ª∂ÔºâÔºö ls ‚Äìal Á≠â‰ª∑‰∫é ll -a‚ÄãÊã∑Ë¥ùÁõÆÂΩïÊàñÊñá‰ª∂Ôºöcp ‚Äìr install.log install2.log Âà†Èô§ÁõÆÂΩïÊàñÊñá‰ª∂Ôºörm -r install.log (rmdirÂè™ËÉΩÂà†Èô§Á©∫ÁõÆÂΩï) ÁßªÂä®ÁõÆÂΩïÊàñÊñá‰ª∂Ôºömv + ÁõÆÂΩï/Êñá‰ª∂ÂêçÂ≠ó + ÂÖ∂‰ªñË∑ØÂæÑ ‚Äã Â∞ÜtestÁõÆÂΩïÁßªÂä®Âà∞ Ê†πÁõÆÂΩï/ ‰∏ã : mv test / ÔºàÂ¶ÇÊûúÁßªÂä®Âà∞ÂΩìÂâçÁõÆÂΩïÔºåÁî®Âè¶Â§ñ‰∏Ä‰∏™ÂêçÁß∞ÔºåÂàôÂèØ‰ª•ÂÆûÁé∞ÈáçÂëΩÂêçÁöÑÊïàÊûúÔºâ Êõ¥ÊîπÊñá‰ª∂ÊàñÁõÆÂΩïÁöÑÂêçÂ≠óÔºömv + ÊóßÁõÆÂΩïÂêçÂ≠ó + Êñ∞ÁõÆÂΩïÂêç ( -r Áî®‰∫éÈÄíÂΩíÁöÑÊã∑Ë¥ùÔºåÂà†Èô§ÔºåÁßªÂä®ÁõÆÂΩï) ‰∏â„ÄÅÊñá‰ª∂ÂëΩ‰ª§1„ÄÅ‰∏ÄËà¨Êñá‰ª∂Êìç‰ΩúÊñ∞Âª∫Êñá‰ª∂Ôºötouch install.log‚Äã (vim install.log ÁºñËæëÊñá‰ª∂ÔºåÂ¶ÇÊûúÊñá‰ª∂‰∏çÂ≠òÂú®ÔºåÂ∞±‰ºöÊñ∞Âª∫‰∏Ä‰∏™ÂØπÂ∫îÁöÑÊñá‰ª∂ÔºåÂπ∂ËøõÂÖ•Êñá‰ª∂ÁöÑÁºñËæëÊ®°ÂºèÔºåÂ¶ÇÊûúÊåâ :wq ‰ºö‰øùÂ≠òÊñá‰ª∂Âπ∂ÈÄÄÂá∫ÔºåÂ¶ÇÊûúÊåâ :q Âàô‰∏ç‰øùÂ≠òÈÄÄÂá∫)‚ÄãÊü•ÁúãÊñá‰ª∂ÂÜÖÂÆπÔºöcat +ÔºàÊñá‰ª∂ÂêçÔºâÔºà‰∏ÄÊ¨°ÊÄßÊòæÁ§∫Êï¥‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπÔºåÊñá‰ª∂ÂÜÖÂÆπËøáÂ§öÊó∂Áî®Êà∑‰ΩìÈ™å‰∏çÂ•ΩÔºâ ‰∏ÄÊ¨°ÂëΩ‰ª§ÊòæÁ§∫‰∏ÄÂ±èÊñáÊú¨Ôºö 1234567 more +ÔºàÊñá‰ª∂ÂêçÔºâ ÊåâÈîÆ ÊïàÊûú Space ÊòæÁ§∫‰∏ã‰∏ÄÂ±èÊñáÊú¨ÂÜÖÂÆπB ÊòæÁ§∫‰∏ä‰∏ÄÂ±èÊñáÊú¨ÂÜÖÂÆπEnter ÊòæÁ§∫‰∏ã‰∏ÄË°åÊñáÊú¨ÂÜÖÂÆπQ ÈÄÄÂá∫Êü•Áúã less+ÔºàÊñá‰ª∂ÂêçÔºâ ÊåâÈîÆ ÊïàÊûú h ÊòæÁ§∫Â∏ÆÂä©ÁïåÈù¢ u ÂêëÂêéÊªöÂä®ÂçäÈ°µ d ÂêëÂâçÁøªÂçäÈ°µ e | Enter ÂêëÂêéÁøª‰∏ÄË°åÊñáÊú¨ space ÊªöÂä®‰∏ÄÈ°µ b ÂêëÂêéÁøª‰∏ÄÈ°µ [pagedown]Ôºö Âêë‰∏ãÁøªÂä®‰∏ÄÈ°µ [pageup]Ôºö Âêë‰∏äÁøªÂä®‰∏ÄÈ°µ ‰∏ä‰∏ãÈîÆÔºåÂêë‰∏ä‰∏ÄË°åÔºåÂêë‰∏ã‰∏ÄË°å ‰ªéÂ§¥ÊâìÂç∞Êñá‰ª∂ÂÜÖÂÆπÔºö‚Äã head -10 +ÔºàÊñá‰ª∂ÂêçÔºâ ÊâìÂç∞Êñá‰ª∂1Âà∞10Ë°å ‰ªéÂ∞æÈÉ®ÊâìÂç∞Êñá‰ª∂ÂÜÖÂÆπ‚Äã tail -10 +ÔºàÊñá‰ª∂ÂêçÔºâÊâìÂç∞Êñá‰ª∂ÊúÄÂêé10Ë°å tail -f (Êñá‰ª∂Âêç) Â∏∏Áî®‰∫éÊü•ÁúãÊñá‰ª∂ÂÜÖÂÆπÁöÑÊõ¥Êñ∞ÂèòÂåñ Êü•ÊâæÊñá‰ª∂ÊàñÁõÆÂΩï‚Äã find +ÔºàË∑ØÂæÑÂêçÔºâ ‚Äìname +ÔºàÊñá‰ª∂ÂêçÔºâ‚Äã ‰∏æ‰æãÔºöfind / -name profile‚Äã Âú®/(Ê†πÁõÆÂΩï)ÁõÆÂΩï‰∏ãÊü•Êâæ ÂêçÂ≠ó‰∏∫profileÁöÑÊñá‰ª∂ÊàñÁõÆÂΩï ‚Äã ‰πüÂèØÂà©Áî®Ê≠£ÂàôÔºö‚Äã ‰∏æ‰æãÔºö find /etc -name pro*‚Äã Âú®/etcÁõÆÂΩï‰∏ãÊü•Êâæ‰ª•proÂºÄÂ§¥ÁöÑÊñá‰ª∂ÊàñÁõÆÂΩï Ë∑ØÂæÑË∂äÁ≤æÁ°ÆÔºåÊü•ÊâæÁöÑËåÉÂõ¥Ë∂äÂ∞èÔºåÈÄüÂ∫¶Ë∂äÂø´ i 2„ÄÅÊñá‰ª∂ÁºñËæëviÔºà1Ôºâ vi ËøõÂÖ•ÁºñËæëÊ®°Âºè ‚Äî‚Äì&gt;Êåâi ËøõÂÖ•ÊèíÂÖ•Ê®°Âºè ‚Äî‚Äî-&gt; ÊåâEsc ÈÄÄÂá∫ÁºñËæëÊ®°Âºè 1234vi filename :ÊâìÂºÄÊàñÊñ∞Âª∫Êñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖâÊ†áÁΩÆ‰∫éÁ¨¨‰∏ÄË°åÈ¶ñ vi +n filename ÔºöÊâìÂºÄÊñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖâÊ†áÁΩÆ‰∫éÁ¨¨nË°åÈ¶ñ vi + filename ÔºöÊâìÂºÄÊñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖâÊ†áÁΩÆ‰∫éÊúÄÂêé‰∏ÄË°åÈ¶ñ vi +/pattern filenameÔºöÊâìÂºÄÊñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖâÊ†áÁΩÆ‰∫éÁ¨¨‰∏Ä‰∏™‰∏é patternÂåπÈÖçÁöÑÂ≠óÁ¨¶‰∏≤ÊâÄÂú®ÁöÑË°åÈ¶ñ filename ‰∏∫Êñá‰ª∂Âêç Ôºà2ÔºâÂú®Êñá‰ª∂viÔºàÊñá‰ª∂ÁºñËæëÔºâÊ®°Âºè‰∏ã ÂëΩ‰ª§Ë°åÊ®°Âºè 123456789:w ‰øùÂ≠ò:q ÈÄÄÂá∫:wq ‰øùÂ≠òÂπ∂ÈÄÄÂá∫:q! Âº∫Âà∂ÈÄÄÂá∫:set nu |ctrl+g ÊòæÁ§∫ÊñáÊú¨Ë°åÊï∞:set nonu ÂéªÈô§ÊòæÁ§∫ÁöÑË°åÊï∞:s/p1/p2/g Â∞ÜÂΩìÂâçË°å‰∏≠ÊâÄÊúâp1ÂùáÁî®p2Êõø‰ª£ :n1,n2s/p1/p2/g Â∞ÜÁ¨¨n1Ëá≥n2Ë°å‰∏≠ÊâÄÊúâp1ÂùáÁî®p2Êõø‰ª£ :g/p1/s//p2/g Â∞ÜÊñá‰ª∂‰∏≠ÊâÄÊúâp1ÂùáÁî®p2ÊõøÊç¢ ‰∏ÄËà¨Ê®°Âºè 12345678910111213141516171819202122232425262728293031ÊåâÈîÆÔºöyy Â§çÂà∂ÂÖâÊ†áÊâÄÂú®Ë°å(Â∏∏Áî®) nyy Â§çÂà∂ÂÖâÊ†áÊâÄÂú®Ë°åÁöÑÂêë‰∏ãnË°åÔºå‰æãÂ¶ÇÔºå 20yyÂàôÊòØÂ§çÂà∂20Ë°å(Â∏∏Áî®) p|P p‰∏∫Â§çÂà∂ÁöÑÊï∞ÊçÆÁ≤òË¥¥Âú®ÂÖâÊ†á‰∏ã‰∏ÄË°åÔºå PÂàô‰∏∫Á≤òË¥¥Âú®ÂÖâÊ†á‰∏ä‰∏ÄË°å(Â∏∏Áî®)G ÂÖâÊ†áÁßªËá≥Á¨¨ÊúÄÂêé‰∏ÄË°ånG ÂÖâÊ†áÁßªÂä®Ëá≥Á¨¨NË°åË°åÈ¶ñn+ ÂÖâÊ†á‰∏ãÁßªnË°å n- ÂÖâÊ†á‰∏äÁßªnË°å H ÂÖâÊ†áÁßªËá≥Â±èÂπïÈ°∂Ë°å M ÂÖâÊ†áÁßªËá≥Â±èÂπï‰∏≠Èó¥Ë°å L ÂÖâÊ†áÁßªËá≥Â±èÂπïÊúÄÂêéË°å dd Âà†Èô§ÊâÄÂú®Ë°å xÊàñX Âà†Èô§‰∏Ä‰∏™Â≠óÁ¨¶ÔºåxÂà†Èô§ÂÖâÊ†áÂêéÁöÑÔºåËÄåXÂà†Èô§ÂÖâÊ†áÂâçÁöÑ u Êí§ÈîÄ(Â∏∏Áî®)Âà†Èô§Á¨¨NË°åÂà∞Á¨¨MË°åÔºöN,MdÔºö,$-1d Âà†Èô§ÂΩìÂâçÂÖâÊ†áÂà∞Âà∞Êï∞Á¨¨‰∏ÄË°åÊï∞ÊçÆÊåâÈîÆÔºö i: Âú®ÂΩìÂâçÂÖâÊ†áÊâÄÂú®Â≠óÁ¨¶ÁöÑÂâçÈù¢ÔºåËΩ¨‰∏∫ËæìÂÖ•Ê®°ÂºèÔºõ a: Âú®ÂΩìÂâçÂÖâÊ†áÊâÄÂú®Â≠óÁ¨¶ÁöÑÂêéÈù¢ÔºåËΩ¨‰∏∫ËæìÂÖ•Ê®°ÂºèÔºõ o: Âú®ÂΩìÂâçÂÖâÊ†áÊâÄÂú®Ë°åÁöÑ‰∏ãÊñπÔºåÊñ∞Âª∫‰∏ÄË°åÔºåÂπ∂ËΩ¨‰∏∫ËæìÂÖ•Ê®°ÂºèÔºõ IÔºöÂú®ÂΩìÂâçÂÖâÊ†áÊâÄÂú®Ë°åÁöÑË°åÈ¶ñÔºåËΩ¨Êç¢‰∏∫ËæìÂÖ•Ê®°Âºè AÔºöÂú®ÂΩìÂâçÂÖâÊ†áÊâÄÂú®Ë°åÁöÑË°åÂ∞æÔºåËΩ¨Êç¢‰∏∫ËæìÂÖ•Ê®°Âºè OÔºöÂú®ÂΩìÂâçÂÖâÊ†áÊâÄÂú®Ë°åÁöÑ‰∏äÊñπÔºåÊñ∞Âª∫‰∏ÄË°åÔºåÂπ∂ËΩ¨‰∏∫ËæìÂÖ•Ê®°ÂºèÔºõ---ÈÄêÂ≠óÁ¨¶ÁßªÂä®Ôºöh: Â∑¶ l: Âè≥j: ‰∏ã k: ‰∏ä vim ÂÆâË£ÖÔºöyum install vim -y Áî®vim ÊâìÂºÄ/etc/profile Êñá‰ª∂Ôºå ÁâπÁÇπÔºöÁºñËæëÂô®ÂØπÊñáÊú¨ÁöÑÂÜÖÂÆπËøõË°å‰∫ÜÈ´ò‰∫ÆÔºå‰ΩøÊï¥‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπÂèØËØªÊÄßÂ§ßÂ§ßÂä†Âº∫ ÔºåÂÖ∂‰ªñÂùá‰∏éviÁõ∏Âêå 3„ÄÅÊñá‰ª∂‰∏ä‰º†‰∏ãËΩΩ ÂÆâË£Ö‰∏ä‰º†‰∏ãËΩΩÂëΩ‰ª§Ôºöyum install lrzsz -y ‰∏ä‰º†Êñá‰ª∂ÔºöÔºàwindows‚Äî&gt;linuxÔºâ ÂëΩ‰ª§ Ôºörz ÂºπÂá∫windows‰∏ä‰º†Êñá‰ª∂Á™óÂè£ ‰∏ãËΩΩÊñá‰ª∂Ôºö(linux‚Äî&gt;windows) Ê≥®ÊÑèÔºöszÂëΩ‰ª§Âè™ËÉΩ‰∏ãËΩΩÊñá‰ª∂Ôºå‰∏çËÉΩ‰∏ãËΩΩÁõÆÂΩïÔºåÊé®ËçêÂ∞ÜÁõÆÂΩïÂéãÁº©ÊàêtarÂåÖÊàñ‰ΩøÁî®Â∑•ÂÖ∑ËΩØ‰ª∂ÔºöWinscp„ÄêXftp„Äë ÂëΩ‰ª§Ôºösz ÔºàÊñá‰ª∂ÂêçÔºâ ÂºπÂá∫windows‰∏ãËΩΩÁ™óÂè£,‰∏ãËΩΩÊñá‰ª∂Âà∞ÊåáÂÆöÊñá‰ª∂ÁõÆÂΩï 4„ÄÅÊñá‰ª∂‰º†Ëæì(1)„ÄÅÊú¨Âú∞‚ÜíËøúÁ®ã Êñá‰ª∂ Ôºö scp local_file remote_username@remote_ip:remote_folder ÁõÆÂΩï Ôºö scp -r local_folder remote_username@remote_ip:remote_folder (2Ôºâ„ÄÅËøúÁ®ã‚ÜíÊú¨Âú∞ Êñá‰ª∂ Ôºö scp remote_username@remote_ip:remote_file local_folder ÁõÆÂΩï Ôºö scp remote_username@remote_ip:remote_folder local_folder]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>LinuxÂëΩ‰ª§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∏∏Áî®LinuxÂëΩ‰ª§ÁöÑÂ≠¶‰π†Ôºà‰∏âÔºâ]]></title>
    <url>%2F2018%2F12%2F27%2F%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89%2F</url>
    <content type="text"><![CDATA[[TOC] ‰∏Ä„ÄÅÊúçÂä°Êìç‰Ωú ÂàóÂá∫ ÊâÄÊúâ ÊúçÂä° chkconfig ÊúçÂä° Êìç‰Ωú service ÊúçÂä°Âêç start\ stop\ status\ restart Ê∞∏‰πÖÂÖ≥Èó≠\ ÊâìÂºÄ ÔºàÂêØÂä®ÂêéÁîüÊïàÔºâ chkconfig iptables on\ off Ê∑ªÂä† ÊúçÂä° 1) ÁºñËæëËÑöÊú¨Ôºövim myservice.sh ÁºñËæëÂÜÖÂÆπÔºö ÔºàÂú®ÊúÄÂâçÈù¢Âä†‰∏Ä‰∏ã‰∏§Âè•Ôºâ #chkconfig: 2345 80 90 #description:auto_run (Ëá™Â∑±ÁöÑÊúçÂä°ËÑöÊú¨ÔºöÂºÄÊú∫Êó∂ÂêåÊ≠•Êó∂Èó¥Ôºâ result=‚Äôntpdate cn.ntp.org.cn‚Äô ÈÄÄÂá∫ÁºñËæëÂπ∂‰øùÂ≠òÔºöÊåâescÈîÆ Êåâ Ôºöwq Âú®ntpdate.logÊñá‰ª∂‰∏≠ËæìÂá∫ÊâìÂç∞Ôºöecho $result &gt; /usr/ntpdate.log 2) ‰øÆÊîπÊùÉÈôêÔºå‰ΩøÂÖ∂Êã•ÊúâÂèØÊâßË°åÊùÉÈôê: chmod 700 myservice.sh 3) Â∞ÜËÑöÊú¨Êã∑Ë¥ùÂà∞/etc/init.dÁõÆÂΩïÔºö 4) Âä†ÂÖ•ÊúçÂä°Ôºöchkconfig ‚Äìadd myservice.sh 5) ÈáçÂêØÊúçÂä°Âô®ÔºåÈ™åËØÅÊúçÂä°ÊòØÂê¶Ê∑ªÂä†ÊàêÂäüÔºödate 6Ôºâ/usrÁõÆÂΩï‰∏ã‰∫ßÁîüntpdate.log Âà†Èô§ ÊúçÂä° chkconfig ‚Äìdel name Êõ¥Êîπ ÊúçÂä°Âàù ÊâßË°å Á≠âÁ∫ß chkconfig ‚Äìlevel 2345 ÊúçÂä°Âêç off\ on chkconfig ÊúçÂä°Âêç on\ of f ‰∫å„ÄÅÂÆöÊó∂Ë∞ÉÂ∫¶ ÁºñËæëÂÆöÊó∂‰ªªÂä° crontab ‚Äìe Ê†ºÂºèÔºöminute hour day month dayofweek command ‰∏æ‰æã * echo ‚Äúhello‚Äù ÊØèÂàÜÈíüÊâìÂç∞‚Äúhello‚Äù Êó∂Èó¥‰∏ÄÂà∞ÔºåÊâßË°åÊìç‰ΩúÂëΩ‰ª§Âêé ‰ºöÂá∫Áé∞ÔºöYou have new mail in /var/spool/mail/root Êü•Áúã‰ªªÂä°ÊâßË°åÊÉÖÂÜµ vim /var/spool/mail/root Êü•ÁúãÊâÄÊúâÁî®Êà∑ÁöÑÂÆöÊó∂‰ªªÂä° ll /var/spool/cron Êü•ÁúãÂΩìÂâçÁî®Êà∑ÁöÑÂÆöÊó∂‰ªªÂä° contab ‚Äìl Ê≥®ÊÑè ‚Äú‚Äù‰ª£Ë°®‰ªªÊÑèÁöÑÊï∞Â≠ó, ‚Äú/‚Äù‰ª£Ë°®‚ÄùÊØèÈöîÂ§ö‰πÖ‚Äù, ‚Äú-‚Äù‰ª£Ë°®‰ªéÊüê‰∏™Êï∞Â≠óÂà∞Êüê‰∏™Êï∞Â≠ó, ‚Äú,‚ÄùÂàÜÂºÄÂá†‰∏™Á¶ªÊï£ÁöÑÊï∞Â≠ó Â¶ÇÔºö 30-40 12 echo ‚Äúhello‚Äù ‚Äî‚Äî‚ÄìÊØèÂ§©12ÁÇπ30ÂàÜËá≥40ÂàÜÊúüÈó¥ÔºåÊØèÂàÜÈíüÊâßË°å‰∏ÄÊ¨°ÂëΩ‰ª§ 30,40 ‚Äî‚Äî‚ÄìÊØèÂ§©12ÁÇπ30ÂàÜÂíå12ÁÇπ40ÂàÜ 0/5 ‚Äî‚Äî‚ÄìÊØèÂ§©ÁöÑ12ÁÇπÊï¥Ëá≥12ÁÇπ55ÂàÜÊúüÈó¥ÔºåÊØèÈöî5ÂàÜÈíüÊâßË°å‰∏ÄÊ¨°ÂëΩ‰ª§ ‰∏â„ÄÅËøõÁ®ãÊìç‰Ωú Êü•Áúã ËøõÁ®ã ps -aux -a ÂàóÂá∫ÊâÄÊúâ -u ÂàóÂá∫Áî®Êà∑ -x ËØ¶ÁªÜÂàóÂá∫ÔºåÂ¶Çcpu„ÄÅÂÜÖÂ≠òÁ≠â -e ÊòæÁ§∫ÊâÄÊúâËøõÁ®ã -f ÂÖ®Ê†ºÂºè ps - ef \ grep ssh Êü•ÁúãÊâÄÊúâËøõÁ®ãÈáåCMDÊòØssh ÁöÑËøõÁ®ã‰ø°ÊÅØ ps -aux ‚Äìsort ‚Äìpcpu Ê†πÊçÆ CPU ‰ΩøÁî®Êù•ÂçáÂ∫èÊéíÂ∫è ‰ΩøÁ®ãÂ∫è ÂêéÂè∞ËøêË°å Âè™ÈúÄË¶ÅÂú®ÂëΩ‰ª§ÂêéÊ∑ªÂä† &amp; Á¨¶Âè∑ echo ‚Äúhello‚Äù &amp; jobs ‚Äìl ‚ÄìÂàóÂá∫ÂΩìÂâçËøûÊé•ÁöÑÊâÄÊúâÂêéÂè∞ËøõÁ®ãÔºàjobs‰ªÖÈÄÇÁî®‰∫éÂΩìÂâçÁ´ØÔºâ ps -ef \ grep ËøõÁ®ãÂêç ‚Äî-ÔºàÊé®ËçêÔºâÂàóÂá∫ÂêéÂè∞ËøõÁ®ã ÊùÄÊ≠ªËøõÁ®ã ÔºàÂº∫Âà∂Ôºâkill -9 pid ‚Äî-pid‰∏∫ËøõÁ®ãÂè∑ Âõõ„ÄÅÂÖ∂‰ªñÂëΩ‰ª§ wget 1Ôºâ ÂÆâË£ÖÔºöyum install wget ‚Äìy 2Ôºâ Áî®Ê≥ïÔºöwget [option] ÁΩëÂùÄ -O ÊåáÂÆö‰∏ãËΩΩ‰øùÂ≠òÁöÑË∑ØÂæÑ 3Ôºâ ‰πüÂèØÁî®‰∫éÂÅöÁà¨Ëô´ yum 1Ôºâ Â§á‰ªΩÂéüÈïúÂÉèÔºö cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOSBase.repo.backup 2Ôºâ ‰∏ãËΩΩÊñ∞ÈïúÂÉèÔºö wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo 3Ôºâ Êü•ÁúãÊñá‰ª∂ÂÜÖÂÆπÔºövim /etc/yum.repos.d/CentOS-Base.repo 4Ôºâ ÁîüÊàêÁºìÂ≠òÔºöyum makecache rpm 1Ôºâ ÂÆâË£Ö rpm ‚Äìivh rpmÂåÖ 2Ôºâ Êü•ÊâæÂ∑≤ÂÆâË£ÖÁöÑrpmÂåÖÔºörpm ‚Äìq ntp 3Ôºâ Âç∏ËΩΩÔºörpm ‚Äìe ntp-4.2.6p5-10.el6.centos.2.x86_64ÔºàÂÖ®ÂêçÔºâ tar 1Ôºâ Ëß£ÂéãÔºötar -zvxf xxxx.tar.gz 2Ôºâ ÂéãÁº©Ôºötar -zcf ÂéãÁº©ÂåÖÂëΩÂêç ÂéãÁº©ÁõÆÊ†á 3Ôºâ ‰æãÂ≠êÔºötar -zcf tomcat.tar.gz apache-tomcat-7.0.61 4Ôºâ -z gzipËøõË°åËß£ÂéãÊàñÂéãÁº©ÔºåÂ∏¶.gzÈúÄË¶ÅÂä†ÔºåÂéãÁº©Âá∫Êù•.gz‰πüÈúÄË¶ÅÂä† -x Ëß£Âéã -c ÂéãÁº© -f ÁõÆÊ†áÊñá‰ª∂ÔºåÂéãÁº©Êñá‰ª∂Êñ∞ÂëΩÂêçÊàñËß£ÂéãÊñá‰ª∂Âêç -v Ëß£ÂéãÁº©ËøáÁ®ã‰ø°ÊÅØÊâìÂç∞ zip 1ÔºâÂÆâË£ÖzipÔºöyum install zip ‚Äìy 2ÔºâÂéãÁº©ÂëΩ‰ª§Ôºözip -r ÂåÖÂêç ÁõÆÊ†áÁõÆÂΩï 3ÔºâÂÆâË£Ö Ôºöunzip,yum install unzip ‚Äìy 4ÔºâËß£Âéã Ôºöunzip filename ‰∫î„ÄÅÂÆâË£ÖÈÉ®ÁΩ≤ JDK ÈÉ®ÁΩ≤ 1) Ëß£Âéã: tar -zxf jdk-7u80-linux-x64.tar.gz 2) ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè ÁºñËæëÈÖçÁΩÆÊñá‰ª∂Ôºövim /etc/profile ÁºñËæëÂÜÖÂÆπ Ôºö JAVA_HOME= /usr/soft/jdk1.7.0_75 PATH=$PATH:$JAVA_HOME/bin 3) ÈáçÊñ∞Âä†ËΩΩÁéØÂ¢ÉÂèòÈáèÔºösource /etc/profile 4) È™åËØÅ: java -version mysqlÈÉ®ÁΩ≤ yumÂÆâË£Ö mysql 1) yum install mysql-server -y 2) yum install mysql-devel -y 3) service mysqld start 4) mysql -uroot -p 5) mysqladmin -u root password 123456 ÂÖ≠„ÄÅÂÖçÂØÜÁôªÂΩï| Ê≥ï‰∏Ä | 1Ôºâ ÁîüÊàêÂÖ¨Èí•ÂíåÂØÜÈí•Ôºössh-keygen -t rsa ÔºåÂπ∂‰∏îÂõûËΩ¶3Ê¨° ÔºàÂú®Áî®Êà∑ÁöÑÊ†πÁõÆÂΩïÁîüÊàê‰∏Ä‰∏™ ‚Äú.ssh‚ÄùÁöÑÊñá‰ª∂Â§πÔºâ 2Ôºâ Êü•ÁúãÂÖ¨Èí•ÂíåÁßÅÈí•Ôºöll ~/.ssh ÔºàÁõÆÂΩï‰∏≠‰ºöÊúâ‰ª•‰∏ãÂá†‰∏™Êñá‰ª∂Ôºâ authorized_keys:Â≠òÊîæËøúÁ®ãÂÖçÂØÜÁôªÂΩïÁöÑÂÖ¨Èí•,‰∏ªË¶ÅÈÄöËøáËøô‰∏™Êñá‰ª∂ËÆ∞ÂΩïÂ§öÂè∞Êú∫Âô®ÁöÑÂÖ¨Èí• id_rsa : ÁîüÊàêÁöÑÁßÅÈí•Êñá‰ª∂ id_rsa.pub Ôºö ÁîüÊàêÁöÑÂÖ¨Èí•Êñá‰ª∂ know_hosts : Â∑≤Áü•ÁöÑ‰∏ªÊú∫ÂÖ¨Èí•Ê∏ÖÂçï Â¶ÇÊûúÂ∏åÊúõsshÂÖ¨Èí•ÁîüÊïàÈúÄÊª°Ë∂≥Ëá≥Â∞ë‰∏ãÈù¢‰∏§‰∏™Êù°‰ª∂Ôºö 1&gt; .sshÁõÆÂΩïÁöÑÊùÉÈôêÂøÖÈ°ªÊòØ700 * 2&gt; .ssh/authorized_keysÊñá‰ª∂ÊùÉÈôêÂøÖÈ°ªÊòØ600 3Ôºâ Â∞ÜAÁöÑ.sshÁõÆÂΩï‰∏ãÁöÑÂÖ¨Èí•ËøΩÂä†Êã∑Ë¥ùÂà∞BÁöÑauthorized_keysÊñá‰ª∂Èáå scp -p ~/.ssh/id_rsa.pub root@&lt;remote_ip&gt;:/root/.ssh/authorized_keys 4) È™åËØÅÔºöÂ∞ÜÊñá‰ª∂ËøúÁ®ãÊã∑Ë¥ùÂà∞ËøúÁ®ã‰∏ªÊú∫‰∏äÔºåÁúãÊòØÂê¶ÈúÄË¶ÅÂØÜÁ†Å | ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî :‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì ÔºàÊ≠§ÊñπÊ≥ïÊúâÂæÖËÄÉÁ©∂ÔºâÊ≥ï‰∫åÔºöÈÄöËøáAnsibleÂÆûÁé∞ ÊâπÈáè ÂÖçÂØÜ 1Ôºâ„ÄÅ Â∞ÜÈúÄË¶ÅÂÅöÂÖçÂØÜÊìç‰ΩúÁöÑÊú∫Âô®hostsÊ∑ªÂä†Âà∞/etc/ansible/hosts‰∏ãÔºö [&nbsp;Avoid close] 192.168.91.132 192.168.91.133 192.168.91.134 2Ôºâ„ÄÅ ÊâßË°åÂëΩ‰ª§ËøõË°åÂÖçÂØÜÊìç‰Ωú Ôºö‚Äã 1ansible &lt;groupname&gt; -m authorized_key -a &quot;user=root key=&apos;&#123;&#123; lookup(&apos;file&apos;,&apos;/root/.ssh/id_rsa.pub&apos;) &#125;&#125;&apos;&quot; -k ‚Äã |]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>LinuxÂëΩ‰ª§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NginxÂÖ•Èó®Â≠¶‰π†Ôºà‰∫åÔºâ]]></title>
    <url>%2F2018%2F12%2F20%2FNginx%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E7%AC%AC%E4%BA%8C%E5%9B%9E%E5%90%88%EF%BC%89%2F</url>
    <content type="text"><![CDATA[2018Âπ¥12Êúà20Êó• Âë®Âõõ Èò¥ ‰∏Ä„ÄÅËôöÊãü‰∏ªÊú∫1„ÄÅ‰ªÄ‰πàÊòØËôöÊãü‰∏ªÊú∫ÔºüÔºà1ÔºâÊòØÊåáÂú®ÁΩëÁªúÊúçÂä°Âô®‰∏äÂàÜÂá∫‰∏ÄÂÆöÁöÑÁ£ÅÁõòÁ©∫Èó¥ÔºåÁßüÁªôÁî®Êà∑‰ª•ÊîæÁΩÆÁ´ôÁÇπ‰ª•ÂèäÂ∫îÁî®Á©∫Èó¥ÔºåÂπ∂Êèê‰æõÂøÖË¶ÅÁöÑÂ≠òÂÇ®Âíå‰º†ËæìÂäüËÉΩ„ÄÇ Ôºà2ÔºâÊòØË¢´ËôöÊãüÂåñÁöÑÈÄªËæë‰∏ªÊú∫Ôºå‰πüÂèØÁêÜËß£‰∏∫Â∞±ÊòØÊää‰∏ÄÂè∞Áâ©ÁêÜÊúçÂä°Âô®ÂàíÂàÜÊàêÂ§ö‰∏™‚ÄúËôöÊãü‚ÄúÁöÑÊúçÂä°Âô®ÔºåÂêÑ‰∏™ËôöÊãü‰∏ªÊú∫‰πãÈó¥ÂÆåÂÖ®Áã¨Á´ãÔºåÂØπÂ§ñÁïåÂëàÁé∞ÁöÑÁä∂ÊÄÅ‰πüÂêåÂçïÁã¨Áâ©ÁêÜ‰∏ªÊú∫Ë°®Áé∞ÂÆåÂÖ®Áõ∏Âêå„ÄÇ 2„ÄÅËôöÊãü‰∏ªÊúâÂï•ÁâπÁÇπÔºüÔºà1ÔºâÂ§öÂè∞ËôöÊãü‰∏ªÊú∫ÂÖ±‰∫´‰∏ÄÂè∞ÁúüÂÆû‰∏ªÊú∫ËµÑÊ∫êÔºåÂ§ßÂπÖÂ∫¶Èôç‰Ωé‰∫ÜÁ°¨‰ª∂„ÄÅÁΩëÁªúÁª¥Êä§„ÄÅÈÄö‰ø°Á∫øË∑ØÁ≠âÁöÑË¥πÁî® Ôºà2Ôºâ‰πüÂ§ßÂ§ßÁÆÄÂåñ‰∫ÜÊúçÂä°Âô®ÁÆ°ÁêÜÁöÑÂ§çÊùÇÊÄßÔºõ 3„ÄÅËôöÊãü‰∏ªÊú∫ÊúâÂì™‰∫õÁ±ªÂà´ÔºüÔºà1ÔºâÂü∫‰∫éÂüüÂêç 1234567891011121314151617181920212223242526http &#123; upstream shsxt&#123; server node01; server node02; &#125; upstream bjsxt&#123; server node03; &#125; server &#123; listen 80; //ËÆøÈóÆsxt2.comÁöÑÊó∂ÂÄôÔºå‰ºöÊääËØ∑Ê±ÇÂØºÂà∞bjsxtÁöÑÊúçÂä°Âô®ÁªÑÈáå server_name sxt2.com; location / &#123; proxy_pass http://bjsxt; &#125; &#125; server &#123; listen 80; //ËÆøÈóÆsxt1.comÁöÑÊó∂ÂÄôÔºå‰ºöÊääËØ∑Ê±ÇÂØºÂà∞shsxtÁöÑÊúçÂä°Âô®ÁªÑÈáå server_name sxt1.com; location / &#123; proxy_pass http://shsxt; &#125; &#125; &#125; Ê≥®ÊÑèÔºö Ôºà1ÔºâÂü∫‰∫éÂüüÂêçÁöÑËôöÊãüÊú∫‰∏ªÊú∫ Âú®Ê®°ÊãüÂ∫îÁî®Âú∫ÊôØÊó∂ÔºåÈúÄË¶ÅÂú®windowsÁ≥ªÁªüÁöÑhostsÊñá‰ª∂ÈáåÈÖçÁΩÆÂüüÂêçÊò†Â∞Ñ„ÄÇ ÔºàC:\Windows\System32\drivers\etc\hosts ÁªôIPÂèñÂà´ÂêçÔºâ Â¶ÇÔºö192.168.198.130 sxt1.com Ôºà2ÔºâÊØèÂè∞ÊúçÂä°Âô®ÁöÑTomcatÁöÑÁ´ØÂè£‰∏ç‰∏éÈÖçÁΩÆÁöÑlisten‰∏ÄËá¥ÔºåÈÇ£‰πàwindowsÁ≥ªÁªüÊµèËßàÂô®ËÆøÈóÆÊó∂ÔºåÈúÄË¶ÅÂä†‰∏äTOmcatÁöÑÁ´ØÂè£ÔºåÔºà192.168.198.128Ôºö8080Ôºâ ‚Äã Â¶ÇÊûú‰∏ÄËá¥ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•‰∏çÂä†TomcatÁöÑÁ´ØÂè£Âõ†‰∏∫NginxÊúçÂä°Âô®ÈªòËÆ§Á´ØÂè£‰∏∫80 Ôºà2ÔºâÂü∫‰∫éÁ´ØÂè£ 12345678910111213141516171819202122232425http &#123; upstream shsxt&#123; server node01; server node02; &#125; upstream bjsxt&#123; server node03 &#125; server &#123; //ÂΩìËÆøÈóÆnginxÁöÑ80Á´ØÂè£Êó∂ÔºåÂ∞ÜËØ∑Ê±ÇÂØºÁªôbjsxtÁªÑ listen 8080; server_name 192.168.198.128; location / &#123; proxy_pass http://bjsxt; &#125;&#125; server &#123; //ÂΩìËÆøÈóÆnginxÁöÑ81Á´ØÂè£Êó∂ÔºåÂ∞ÜËØ∑Ê±ÇÂØºÁªôshsxtÁªÑ listen 81; server_name 192.168.198.128; //nginxÊúçÂä°Âô®ÁöÑIP location / &#123; proxy_pass http://shsxt; &#125; &#125; &#125; Ôºà3ÔºâÂü∫‰∫éIP ÔºöÔºà‰∏çÂ∏∏Áî®Ôºâ ‰∫å„ÄÅÊ≠£Âêë‰ª£ÁêÜÂíåÂèçÂêë‰ª£ÁêÜ1„ÄÅÊ≠£Âêë‰ª£ÁêÜÁêÜËß£Ôºö ‰ª£ÁêÜÂÆ¢Êà∑Á´ØÔºåÂ¶ÇÈÄöËøáVPN ÔºåÈöêËóèÂÆ¢Êà∑Á´ØÔºåËÆøÈóÆÁõÆÊ†áÊúçÂä°Âô®ÔºàÊúçÂä°Á´ØÂèØËßÅÔºâ ‰∏æ‰æãÔºö ÂõΩÂÜÖ‰∏çËÉΩÁõ¥Êé•ËÆøÈóÆË∞∑Ê≠åÔºå‰ΩÜÊòØÂèØ‰ª•ËÆøÈóÆ‰ª£ÁêÜÊúçÂä°Âô®ÔºåÈÄöËøá‰ª£ÁêÜÊúçÂä°Âô®ÂèØ‰ª•ËÆøÈóÆË∞∑Ê≠å„ÄÇÔºàÂ∞±ÊòØÁøªÂ¢ôÔºâ ‰ΩÜÊòØÔºåÈúÄË¶ÅÂÆ¢Êà∑Á´ØÂøÖÈ°ªËÆæÁΩÆÊ≠£Âêë‰ª£ÁêÜÊúçÂä°Âô®ÔºåÂπ∂‰∏îË¶ÅÁü•ÈÅìÊ≠£Âêë‰ª£ÁêÜÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÂíåÁ´ØÂè£ 2„ÄÅÂèçÂêë‰ª£ÁêÜÁêÜËß£Ôºö ‰ª£ÁêÜÊúçÂä°Á´ØÔºåÈÄöËøáË¥üËΩΩÂùáË°°ÊúçÂä°Âô®ÔºàÂ¶ÇNginxÔºâÔºåÈöêËóèÊúçÂä°Á´ØÔºåÂàÜÂèëÂÆ¢Êà∑Á´ØÁöÑ‰∏çÂêåËØ∑Ê±ÇÔºàÂÆ¢Êà∑Á´ØÂèØËßÅÔºâÂà∞ÂÜÖÈÉ®ÁΩëÁªú‰∏äÁöÑÊúçÂä°Âô® ‰∏æ‰æãÔºö Â¶ÇÊàë‰ª¨ËÆøÈóÆwww.baidu.comÁöÑÊó∂ÂÄôÔºåÂÆÉËÉåÂêéÊúâÂæàÂ§öÂè∞ÊúçÂä°Âô®ÔºåÂÆ¢Êà∑Á´ØÂπ∂‰∏çÁü•ÈÅìÂÖ∑‰ΩìÊòØÂì™‰∏ÄÂè∞ÊúçÂä°Âô®Áªô‰Ω†Êèê‰æõÁöÑÊúçÂä°ÔºåÂè™Ë¶ÅÁü•ÈÅìÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®ÊòØË∞ÅÂ∞±Â•Ω‰∫ÜÔºåÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®Â∞±‰ºöÊääÊàë‰ª¨ÁöÑËØ∑Ê±ÇËΩ¨ÂèëÂà∞ÁúüÂÆûÊúçÂä°Âô®‰∏ä„ÄÇ NginxÂ∞±ÊòØÊÄßËÉΩÂæàÂ•ΩÁöÑÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®ÔºåÁî®Êù•‰ΩúË¥üËΩΩÂùáË°°„ÄÇ ‰∏â„ÄÅNginxÁöÑsession‰∏ÄËá¥ÊÄßÈóÆÈ¢ò1„ÄÅËÉåÊôØÔºöhttpÂçèËÆÆÊòØÊó†Áä∂ÊÄÅÁöÑÔºåÂ§öÊ¨°ËÆøÈóÆÂ¶ÇÊûúÊòØ‰∏çÂêåÊúçÂä°Âô®ÂìçÂ∫îËØ∑Ê±ÇÔºåÂ∞±‰ºöÂá∫Áé∞‰∏äÊ¨°ËÆøÈóÆÁïô‰∏ãÁöÑsessionÊàñcookieÂ§±Êïà„ÄÇËøôÂ∞±ÂºïÂèë‰∫ÜsessionÂÖ±‰∫´ÁöÑÈóÆÈ¢ò„ÄÇ 2„ÄÅSession‰∏ÄËá¥ÊÄßËß£ÂÜ≥ÊñπÊ°àÔºà1Ôºâ‚ÄìsessionÂ§çÂà∂ tomcat Êú¨Ë∫´Â∏¶ÊúâÂ§çÂà∂sessionÁöÑÂäüËÉΩ„ÄÇ Ôºà2Ôºâ-ÂÖ±‰∫´session ÈúÄË¶Å‰∏ìÈó®ÁÆ°ÁêÜsessionÁöÑËΩØ‰ª∂Ôºå memcached ÁºìÂ≠òÊúçÂä°ÔºåÂèØ‰ª•ÂíåtomcatÊï¥ÂêàÔºåÂ∏ÆÂä©tomcatÂÖ±‰∫´ÁÆ°ÁêÜsession„ÄÇ 3„ÄÅÂÆâË£Ömemcachedmemcached ÔºàÂêåredis‰∏ÄÊ†∑ÔºâÊòØÂü∫‰∫éÂÜÖÂ≠òÁöÑÊï∞ÊçÆÂ∫ì 1„ÄÅÂÆâË£Ö yum ‚Äìy install memcached ÂèØ‰ª•Áî®telnet localhost 11211 ÂêØÂä®Ôºö memcached -d -m 128m -p 11211 -l 192.168.235.113 -u root -P /tmp/ 2.webÊúçÂä°Âô®ËøûÊé•memcachedÁöÑjarÂåÖÊã∑Ë¥ùÂà∞tomcatÁöÑlibÁõÆÂΩï‰∏ã ËÆøÈóÆTomcatÊúçÂä°Âô®ÊúüÈó¥‰∫ßÁîüÁöÑsessionÈÄöËøáÁõ∏ÂÖ≥jarÂåÖÔºåÊâçËÉΩÂÜôÂÖ•Âà∞memcachedÊï∞ÊçÆÂ∫ì‰∏≠ memcached-session-manager-1.7.0.jar memcached-session-manager-tc7-1.8.1.jar 3.ÈÖçÁΩÆtomcatÁöÑconfÁõÆÂΩï‰∏ãÁöÑcontext.xml 1234567&lt;Manager className="de.javakaffee.web.msm.MemcachedBackupSessionManager" memcachedNodes="n1:192.168.198.128:11211" sticky="true" lockingMode="auto" sessionBackupAsync="false" requestUriIgnorePattern=".*\.(ico|png|gif|jpg|css|js)$"sessionBackupTimeout="1000" transcoderFactoryClass="de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory" /&gt; ÈÖçÁΩÆmemcachedNodesÂ±ûÊÄßÔºå ÈÖçÁΩÆmemcachedÊï∞ÊçÆÂ∫ìÁöÑipÂíåÁ´ØÂè£ÔºåÈªòËÆ§11211ÔºåÂ§ö‰∏™ÁöÑËØùÁî®ÈÄóÂè∑ÈöîÂºÄ. ÁõÆÁöÑÊòØ‰∏∫‰∫ÜËÆ©tomcatÊúçÂä°Âô®‰ªémemcachedÁºìÂ≠òÈáåÈù¢ÊãøsessionÊàñËÄÖÊòØÊîæsession Â∞ÜÈÖçÁΩÆÂÆåÊàêÁöÑcontext.xmlÂèëÈÄÅÂà∞ÂÖ∂‰ªñËôöÊãüÊú∫Âô®‰∏ä scp -r context.xml root@node01:pwd Êàñ scp -r context.xml node01:pwd Êàñ scp -r context.xml root@192.168.198.130:pwd 4.‰øÆÊîπtomcatÁõÆÂΩï‰∏≠webapps/ROOT‰∏ãÁöÑ index.jspÔºåÂèñsessionidÁúã‰∏ÄÁúã 12345678&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;&lt;html lang="en"&gt;SessionID:&lt;%=session.getId()%&gt;&lt;/br&gt;SessionIP:&lt;%=request.getServerName()%&gt;&lt;/br&gt;&lt;h1&gt;tomcat1&lt;/h1&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>Ë¥üËΩΩÂùáË°°</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2018%2F12%2F19%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
